(function(t,e){"object"===typeof exports&&"object"===typeof module?module.exports=e():"function"===typeof define&&define.amd?define([],e):"object"===typeof exports?exports["econdraw"]=e():t["econdraw"]=e()})("undefined"!==typeof self?self:this,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s="fb15")}({0:function(t,e){},"00ee":function(t,e,n){var i=n("b622"),r=i("toStringTag"),o={};o[r]="z",t.exports="[object z]"===String(o)},"00fd":function(t,e,n){var i=n("9e69"),r=Object.prototype,o=r.hasOwnProperty,a=r.toString,s=i?i.toStringTag:void 0;function l(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(l){}var r=a.call(t);return i&&(e?t[s]=n:delete t[s]),r}t.exports=l},"0209":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcLabelNumber=e.util.createClass(e.Text,{type:"ecLabelNumber",MIN_TEXT_WIDTH:50,split:{field:"TagName",separate:"_",position:1},initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t)}}),e.EcLabelNumber.fromObject=function(t,n){n&&n(new e.EcLabelNumber(t.text,t))},e.EcLabelNumber.async=!0}).call(this,n("c8ba"))},"0366":function(t,e,n){var i=n("1c0b");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"03dd":function(t,e,n){var i=n("eac5"),r=n("57a5"),o=Object.prototype,a=o.hasOwnProperty;function s(t){if(!i(t))return r(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}t.exports=s},"04f6":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=32,r=7;function o(t){var e=0;while(t>=i)e|=1&t,t>>=1;return t+e}function a(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){while(r<n&&i(t[r],t[r-1])<0)r++;s(t,e,r)}else while(r<n&&i(t[r],t[r-1])>=0)r++;return r-e}function s(t,e,n){n--;while(e<n){var i=t[e];t[e++]=t[n],t[n--]=i}}function l(t,e,n,i,r){for(i===e&&i++;i<n;i++){var o,a=t[i],s=e,l=i;while(s<l)o=s+l>>>1,r(a,t[o])<0?l=o:s=o+1;var c=i-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:while(c>0)t[s+c]=t[s+c-1],c--}t[s]=a}}function c(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])>0){s=i-r;while(l<s&&o(t,e[n+r+l])>0)a=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}else{s=r+1;while(l<s&&o(t,e[n+r-l])<=0)a=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s);var c=a;a=r-l,l=r-c}a++;while(a<l){var u=a+(l-a>>>1);o(t,e[n+u])>0?a=u+1:l=u}return l}function u(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])<0){s=r+1;while(l<s&&o(t,e[n+r-l])<0)a=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s);var c=a;a=r-l,l=r-c}else{s=i-r;while(l<s&&o(t,e[n+r+l])>=0)a=l,l=1+(l<<1),l<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}a++;while(a<l){var u=a+(l-a>>>1);o(t,e[n+u])<0?l=u:a=u+1}return l}function h(t,e){var n,i,o=r,a=0,s=0;a=t.length;var l=[];function h(t,e){n[s]=t,i[s]=e,s+=1}function f(){while(s>1){var t=s-2;if(t>=1&&i[t-1]<=i[t]+i[t+1]||t>=2&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;p(t)}}function d(){while(s>1){var t=s-2;t>0&&i[t-1]<i[t+1]&&t--,p(t)}}function p(r){var o=n[r],a=i[r],l=n[r+1],h=i[r+1];i[r]=a+h,r===s-3&&(n[r+1]=n[r+2],i[r+1]=i[r+2]),s--;var f=u(t[l],t,o,a,0,e);o+=f,a-=f,0!==a&&(h=c(t[o+a-1],t,l,h,h-1,e),0!==h&&(a<=h?g(o,a,l,h):m(o,a,l,h)))}function g(n,i,a,s){var h=0;for(h=0;h<i;h++)l[h]=t[n+h];var f=0,d=a,p=n;if(t[p++]=t[d++],0!==--s)if(1!==i){var g,m,v,y=o;while(1){g=0,m=0,v=!1;do{if(e(t[d],l[f])<0){if(t[p++]=t[d++],m++,g=0,0===--s){v=!0;break}}else if(t[p++]=l[f++],g++,m=0,1===--i){v=!0;break}}while((g|m)<y);if(v)break;do{if(g=u(t[d],l,f,i,0,e),0!==g){for(h=0;h<g;h++)t[p+h]=l[f+h];if(p+=g,f+=g,i-=g,i<=1){v=!0;break}}if(t[p++]=t[d++],0===--s){v=!0;break}if(m=c(l[f],t,d,s,0,e),0!==m){for(h=0;h<m;h++)t[p+h]=t[d+h];if(p+=m,d+=m,s-=m,0===s){v=!0;break}}if(t[p++]=l[f++],1===--i){v=!0;break}y--}while(g>=r||m>=r);if(v)break;y<0&&(y=0),y+=2}if(o=y,o<1&&(o=1),1===i){for(h=0;h<s;h++)t[p+h]=t[d+h];t[p+s]=l[f]}else{if(0===i)throw new Error;for(h=0;h<i;h++)t[p+h]=l[f+h]}}else{for(h=0;h<s;h++)t[p+h]=t[d+h];t[p+s]=l[f]}else for(h=0;h<i;h++)t[p+h]=l[f+h]}function m(n,i,a,s){var h=0;for(h=0;h<s;h++)l[h]=t[a+h];var f=n+i-1,d=s-1,p=a+s-1,g=0,m=0;if(t[p--]=t[f--],0!==--i)if(1!==s){var v=o;while(1){var y=0,_=0,b=!1;do{if(e(l[d],t[f])<0){if(t[p--]=t[f--],y++,_=0,0===--i){b=!0;break}}else if(t[p--]=l[d--],_++,y=0,1===--s){b=!0;break}}while((y|_)<v);if(b)break;do{if(y=i-u(l[d],t,n,i,i-1,e),0!==y){for(p-=y,f-=y,i-=y,m=p+1,g=f+1,h=y-1;h>=0;h--)t[m+h]=t[g+h];if(0===i){b=!0;break}}if(t[p--]=l[d--],1===--s){b=!0;break}if(_=s-c(t[f],l,0,s,s-1,e),0!==_){for(p-=_,d-=_,s-=_,m=p+1,g=d+1,h=0;h<_;h++)t[m+h]=l[g+h];if(s<=1){b=!0;break}}if(t[p--]=t[f--],0===--i){b=!0;break}v--}while(y>=r||_>=r);if(b)break;v<0&&(v=0),v+=2}if(o=v,o<1&&(o=1),1===s){for(p-=i,f-=i,m=p+1,g=f+1,h=i-1;h>=0;h--)t[m+h]=t[g+h];t[p]=l[d]}else{if(0===s)throw new Error;for(g=p-(s-1),h=0;h<s;h++)t[g+h]=l[h]}}else{for(p-=i,f-=i,m=p+1,g=f+1,h=i-1;h>=0;h--)t[m+h]=t[g+h];t[p]=l[d]}else for(g=p-(s-1),h=0;h<s;h++)t[g+h]=l[h]}return a<120?5:a<1542?10:a<119151?19:40,n=[],i=[],{mergeRuns:f,forceMergeRuns:d,pushRun:h}}function f(t,e,n,r){n||(n=0),r||(r=t.length);var s=r-n;if(!(s<2)){var c=0;if(s<i)return c=a(t,n,r,e),void l(t,n,r,n+c,e);var u=h(t,e),f=o(s);do{if(c=a(t,n,r,e),c<f){var d=s;d>f&&(d=f),l(t,n,n+d,n+c,e),c=d}u.pushRun(n,c),u.mergeRuns(),s-=c,n+=c}while(0!==s);u.forceMergeRuns()}}},"04f7":function(t,e,n){"use strict";n.d(e,"b",(function(){return v})),n.d(e,"a",(function(){return y}));var i=n("07fd"),r=n("e0d3"),o=n("6d8b"),a=n("2b17"),s=n("b7d9"),l=n("edae"),c=n("ec6f"),u=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(t){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,e){},t.prototype.retrieveValueFromItem=function(t,e){},t.prototype.convertValue=function(t,e){return Object(s["d"])(t,e)},t}();function h(t,e){var n=new u,r=t.data,s=n.sourceFormat=t.sourceFormat,c=t.startIndex,h="";t.seriesLayoutBy!==i["a"]&&Object(l["c"])(h);var m=[],v={},y=t.dimensionsDefine;if(y)Object(o["k"])(y,(function(t,e){var n=t.name,i={index:e,name:n,displayName:t.displayName};if(m.push(i),null!=n){var r="";Object(o["q"])(v,n)&&Object(l["c"])(r),v[n]=i}}));else for(var _=0;_<t.dimensionsDetectedCount;_++)m.push({index:_});var b=Object(a["c"])(s,i["a"]);e.__isBuiltIn&&(n.getRawDataItem=function(t){return b(r,c,m,t)},n.getRawData=Object(o["c"])(f,null,t)),n.cloneRawData=Object(o["c"])(d,null,t);var x=Object(a["b"])(s,i["a"]);n.count=Object(o["c"])(x,null,r,c,m);var w=Object(a["d"])(s);n.retrieveValue=function(t,e){var n=b(r,c,m,t);return S(n,e)};var S=n.retrieveValueFromItem=function(t,e){if(null!=t){var n=m[e];return n?w(t,e,n.name):void 0}};return n.getDimensionInfo=Object(o["c"])(p,null,m,v),n.cloneAllDimensionInfo=Object(o["c"])(g,null,m),n}function f(t){var e=t.sourceFormat;if(!b(e)){var n="";0,Object(l["c"])(n)}return t.data}function d(t){var e=t.sourceFormat,n=t.data;if(!b(e)){var r="";0,Object(l["c"])(r)}if(e===i["c"]){for(var a=[],s=0,c=n.length;s<c;s++)a.push(n[s].slice());return a}if(e===i["e"]){for(a=[],s=0,c=n.length;s<c;s++)a.push(Object(o["m"])({},n[s]));return a}}function p(t,e,n){if(null!=n)return"number"===typeof n||!isNaN(n)&&!Object(o["q"])(e,n)?t[n]:Object(o["q"])(e,n)?e[n]:void 0}function g(t){return Object(o["d"])(t)}var m=Object(o["g"])();function v(t){t=Object(o["d"])(t);var e=t.type,n="";e||Object(l["c"])(n);var i=e.split(":");2!==i.length&&Object(l["c"])(n);var r=!1;"echarts"===i[0]&&(e=i[1],r=!0),t.__isBuiltIn=r,m.set(e,t)}function y(t,e,n){var i=Object(r["r"])(t),o=i.length,a="";o||Object(l["c"])(a);for(var s=0,c=o;s<c;s++){var u=i[s];e=_(u,e,n,1===o?null:s),s!==c-1&&(e.length=Math.max(e.length,1))}return e}function _(t,e,n,a){var s="";e.length||Object(l["c"])(s),Object(o["A"])(t)||Object(l["c"])(s);var u=t.type,f=m.get(u);f||Object(l["c"])(s);var d=Object(o["H"])(e,(function(t){return h(t,f)})),p=Object(r["r"])(f.transform({upstream:d[0],upstreamList:d,config:Object(o["d"])(t.config)}));return Object(o["H"])(p,(function(t,n){var r="";Object(o["A"])(t)||Object(l["c"])(r),t.data||Object(l["c"])(r);var a,s=Object(c["d"])(t.data);b(s)||Object(l["c"])(r);var u=e[0];if(u&&0===n&&!t.dimensions){var h=u.startIndex;h&&(t.data=u.data.slice(0,h).concat(t.data)),a={seriesLayoutBy:i["a"],sourceHeader:h,dimensions:u.metaRawOption.dimensions}}else a={seriesLayoutBy:i["a"],sourceHeader:0,dimensions:t.dimensions};return Object(c["b"])(t.data,a,null)}))}function b(t){return t===i["c"]||t===i["e"]}},"057f":function(t,e,n){var i=n("fc6a"),r=n("241c").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},"0655":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var i=n("8728"),r=1e-8;function o(t,e){return Math.abs(t-e)<r}function a(t,e,n){var r=0,a=t[0];if(!a)return!1;for(var s=1;s<t.length;s++){var l=t[s];r+=Object(i["a"])(a[0],a[1],l[0],l[1],e,n),a=l}var c=t[0];return o(a[0],c[0])&&o(a[1],c[1])||(r+=Object(i["a"])(a[0],a[1],c[0],c[1],e,n)),0!==r}},"06ad":function(t,e,n){"use strict";n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return x}));var i={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i))},elasticOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/i)+1)},elasticInOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/i)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-i.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*i.bounceIn(2*t):.5*i.bounceOut(2*t-1)+.5}},r=i,o=function(){function t(t){this._initialized=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=null!=t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart}return t.prototype.step=function(t,e){if(this._initialized||(this._startTime=t+this._delay,this._initialized=!0),!this._paused){var n=(t-this._startTime-this._pausedTime)/this._life;n<0&&(n=0),n=Math.min(n,1);var i=this.easing,o="string"===typeof i?r[i]:i,a="function"===typeof o?o(n):n;if(this.onframe&&this.onframe(a),1===n){if(!this.loop)return!0;this._restart(t),this.onrestart&&this.onrestart()}return!1}this._pausedTime+=e},t.prototype._restart=function(t){var e=(t-this._startTime-this._pausedTime)%this._life;this._startTime=t-e+this.gap,this._pausedTime=0},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t}(),a=o,s=n("41ef"),l=n("6d8b"),c=Array.prototype.slice;function u(t,e,n){return(e-t)*n+t}function h(t,e,n){return n>.5?e:t}function f(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=u(e[o],n[o],i)}function d(t,e,n,i){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=u(e[a][s],n[a][s],i)}}function p(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=e[o]+n[o]*i;return t}function g(t,e,n,i){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+n[a][s]*i}return t}function m(t,e,n){var i=t,r=e;if(i.push&&r.push){var o=i.length,a=r.length;if(o!==a){var s=o>a;if(s)i.length=a;else for(var l=o;l<a;l++)i.push(1===n?r[l]:c.call(r[l]))}var u=i[0]&&i[0].length;for(l=0;l<i.length;l++)if(1===n)isNaN(i[l])&&(i[l]=r[l]);else for(var h=0;h<u;h++)isNaN(i[l][h])&&(i[l][h]=r[l][h])}}function v(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function y(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}function _(t,e,n,i,r,o,a,s){for(var l=e.length,c=0;c<l;c++)t[c]=y(e[c],n[c],i[c],r[c],o,a,s)}function b(t,e,n,i,r,o,a,s){for(var l=e.length,c=e[0].length,u=0;u<l;u++){t[u]||(t[1]=[]);for(var h=0;h<c;h++)t[u][h]=y(e[u][h],n[u][h],i[u][h],r[u][h],o,a,s)}}function x(t){if(Object(l["u"])(t)){var e=t.length;if(Object(l["u"])(t[0])){for(var n=[],i=0;i<e;i++)n.push(c.call(t[i]));return n}return c.call(t)}return t}function w(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}function S(t){return Object(l["u"])(t&&t[0])?2:1}var T=[0,0,0,0],O=function(){function t(t){this.keyframes=[],this.maxTime=0,this.arrDim=0,this.interpolable=!0,this._needsSort=!1,this._isAllValueEqual=!0,this._lastFrame=0,this._lastFramePercent=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return!this._isAllValueEqual&&this.keyframes.length>=2&&this.interpolable&&this.maxTime>0},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e){t>=this.maxTime?this.maxTime=t:this._needsSort=!0;var n=this.keyframes,i=n.length;if(this.interpolable)if(Object(l["u"])(e)){var r=S(e);if(i>0&&this.arrDim!==r)return void(this.interpolable=!1);if(1===r&&"number"!==typeof e[0]||2===r&&"number"!==typeof e[0][0])return void(this.interpolable=!1);if(i>0){var o=n[i-1];this._isAllValueEqual&&(1===r&&v(e,o.value)||(this._isAllValueEqual=!1))}this.arrDim=r}else{if(this.arrDim>0)return void(this.interpolable=!1);if("string"===typeof e){var a=s["parse"](e);a?(e=a,this.isValueColor=!0):this.interpolable=!1}else if("number"!==typeof e||isNaN(e))return void(this.interpolable=!1);if(this._isAllValueEqual&&i>0){o=n[i-1];(this.isValueColor&&!v(o.value,e)||o.value!==e)&&(this._isAllValueEqual=!1)}}var c={time:t,value:e,percent:0};return this.keyframes.push(c),c},t.prototype.prepare=function(t){var e=this.keyframes;this._needsSort&&e.sort((function(t,e){return t.time-e.time}));for(var n=this.arrDim,i=e.length,r=e[i-1],o=0;o<i;o++)e[o].percent=e[o].time/this.maxTime,n>0&&o!==i-1&&m(e[o].value,r.value,n);if(t&&this.needsAnimate()&&t.needsAnimate()&&n===t.arrDim&&this.isValueColor===t.isValueColor&&!t._finished){this._additiveTrack=t;var a=e[0].value;for(o=0;o<i;o++)0===n?this.isValueColor?e[o].additiveValue=p([],e[o].value,a,-1):e[o].additiveValue=e[o].value-a:1===n?e[o].additiveValue=p([],e[o].value,a,-1):2===n&&(e[o].additiveValue=g([],e[o].value,a,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,i=null!=this._additiveTrack,r=i?"additiveValue":"value",o=this.keyframes,a=this.keyframes.length,s=this.propName,l=this.arrDim,c=this.isValueColor;if(e<0)n=0;else if(e<this._lastFramePercent){var p=Math.min(this._lastFrame+1,a-1);for(n=p;n>=0;n--)if(o[n].percent<=e)break;n=Math.min(n,a-2)}else{for(n=this._lastFrame;n<a;n++)if(o[n].percent>e)break;n=Math.min(n-1,a-2)}var g=o[n+1],m=o[n];if(m&&g){this._lastFrame=n,this._lastFramePercent=e;var v=g.percent-m.percent;if(0!==v){var x=(e-m.percent)/v,S=i?this._additiveValue:c?T:t[s];if((l>0||c)&&!S&&(S=this._additiveValue=[]),this.useSpline){var O=o[n][r],C=o[0===n?n:n-1][r],M=o[n>a-2?a-1:n+1][r],A=o[n>a-3?a-1:n+2][r];if(l>0)1===l?_(S,C,O,M,A,x,x*x,x*x*x):b(S,C,O,M,A,x,x*x,x*x*x);else if(c)_(S,C,O,M,A,x,x*x,x*x*x),i||(t[s]=w(S));else{var D=void 0;D=this.interpolable?y(C,O,M,A,x,x*x,x*x*x):M,i?this._additiveValue=D:t[s]=D}}else if(l>0)1===l?f(S,m[r],g[r],x):d(S,m[r],g[r],x);else if(c)f(S,m[r],g[r],x),i||(t[s]=w(S));else{D=void 0;D=this.interpolable?u(m[r],g[r],x):h(m[r],g[r],x),i?this._additiveValue=D:t[s]=D}i&&this._addToTarget(t)}}}},t.prototype._addToTarget=function(t){var e=this.arrDim,n=this.propName,i=this._additiveValue;0===e?this.isValueColor?(s["parse"](t[n],T),p(T,T,i,1),t[n]=w(T)):t[n]=t[n]+i:1===e?p(t[n],t[n],i,1):2===e&&g(t[n],t[n],i,1)},t}(),C=function(){function t(t,e,n){this._tracks={},this._trackKeys=[],this._delay=0,this._maxTime=0,this._paused=!1,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&n?Object(l["G"])("Can' use additive animation on looped animation."):this._additiveAnimators=n}return t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e){return this.whenWithKeys(t,e,Object(l["F"])(e))},t.prototype.whenWithKeys=function(t,e,n){for(var i=this._tracks,r=0;r<n.length;r++){var o=n[r],a=i[o];if(!a){a=i[o]=new O(o);var s=void 0,l=this._getAdditiveTrack(o);if(l){var c=l.keyframes[l.keyframes.length-1];s=c&&c.value,l.isValueColor&&s&&(s=w(s))}else s=this._target[o];if(null==s)continue;0!==t&&a.addKeyframe(0,x(s)),this._trackKeys.push(o)}a.addKeyframe(t,x(e[o]))}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var r=n[i].getTrack(t);r&&(e=r)}return e},t.prototype.start=function(t,e){if(!(this._started>0)){this._started=1;for(var n=this,i=[],r=0;r<this._trackKeys.length;r++){var o=this._trackKeys[r],s=this._tracks[o],l=this._getAdditiveTrack(o),c=s.keyframes;if(s.prepare(l),s.needsAnimate())i.push(s);else if(!s.interpolable){var u=c[c.length-1];u&&(n._target[s.propName]=u.value)}}if(i.length||e){var h=new a({life:this._maxTime,loop:this._loop,delay:this._delay,onframe:function(t){n._started=2;var e=n._additiveAnimators;if(e){for(var r=!1,o=0;o<e.length;o++)if(e[o]._clip){r=!0;break}r||(n._additiveAnimators=null)}for(o=0;o<i.length;o++)i[o].step(n._target,t);var a=n._onframeCbs;if(a)for(o=0;o<a.length;o++)a[o](n._target,t)},ondestroy:function(){n._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&"spline"!==t&&(h.easing=t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,r=0;r<t.length;r++){var o=n[t[r]];o&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}var a=!0;for(r=0;r<i.length;r++)if(!n[i[r]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveFinalToTarget=function(t,e){if(t){e=e||this._trackKeys;for(var n=0;n<e.length;n++){var i=e[n],r=this._tracks[i];if(r&&!r.isFinished()){var o=r.keyframes,a=o[o.length-1];if(a){var s=x(a.value);r.isValueColor&&(s=w(s)),t[i]=s}}}}},t.prototype.__changeFinalValue=function(t,e){e=e||Object(l["F"])(t);for(var n=0;n<e.length;n++){var i=e[n],r=this._tracks[i];if(r){var o=r.keyframes;if(o.length>1){var a=o.pop();r.addKeyframe(a.time,t[i]),r.prepare(r.getAdditiveTrack())}}}},t}();e["b"]=C},"06cf":function(t,e,n){var i=n("83ab"),r=n("d1e7"),o=n("5c6c"),a=n("fc6a"),s=n("c04e"),l=n("5135"),c=n("0cfb"),u=Object.getOwnPropertyDescriptor;e.f=i?u:function(t,e){if(t=a(t),e=s(e,!0),c)try{return u(t,e)}catch(n){}if(l(t,e))return o(!r.f.call(t,e),t[e])}},"07c7":function(t,e){function n(){return!1}t.exports=n},"07fd":function(t,e,n){"use strict";n.d(e,"i",(function(){return r})),n.d(e,"f",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"e",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"g",(function(){return c})),n.d(e,"h",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f}));var i=n("6d8b"),r=Object(i["g"])(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),o="original",a="arrayRows",s="objectRows",l="keyedColumns",c="typedArray",u="unknown",h="column",f="row"},"087d":function(t,e){function n(t,e){var n=-1,i=e.length,r=t.length;while(++n<i)t[r+n]=e[n];return t}t.exports=n},"08cc":function(t,e,n){var i=n("1a8c");function r(t){return t===t&&!i(t)}t.exports=r},"0924":function(t,e,n){"use strict";function i(t,e,n){switch(n){case"color":var i=t.getItemVisual(e,"style");return i[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n);default:0}}function r(t,e){switch(e){case"color":var n=t.getVisual("style");return n[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e);default:0}}function o(t,e,n,i){switch(n){case"color":var r=t.ensureUniqueItemVisual(e,"style");r[t.getVisual("drawType")]=i,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,n,i);break;default:0}}n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o}))},"099a":function(t,e){function n(t,e,n){var i=n-1,r=t.length;while(++i<r)if(t[i]===e)return i;return-1}t.exports=n},"0a06":function(t,e,n){"use strict";var i=n("c532"),r=n("30b5"),o=n("f6b4"),a=n("5270"),s=n("4a7b");function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=s(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));while(e.length)n=n.then(e.shift(),e.shift());return n},l.prototype.getUri=function(t){return t=s(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],(function(t){l.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}})),i.forEach(["post","put","patch"],(function(t){l.prototype[t]=function(e,n,i){return this.request(s(i||{},{method:t,url:e,data:n}))}})),t.exports=l},"0b07":function(t,e,n){var i=n("34ac"),r=n("3698");function o(t,e){var n=r(t,e);return i(n)?n:void 0}t.exports=o},"0b11":function(t,e,n){t.exports=n.p+"media/alarm.b9b63837.wav"},"0cb2":function(t,e,n){var i=n("7b0b"),r=Math.floor,o="".replace,a=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,s=/\$([$&'`]|\d{1,2})/g;t.exports=function(t,e,n,l,c,u){var h=n+t.length,f=l.length,d=s;return void 0!==c&&(c=i(c),d=a),o.call(u,d,(function(i,o){var a;switch(o.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,n);case"'":return e.slice(h);case"<":a=c[o.slice(1,-1)];break;default:var s=+o;if(0===s)return i;if(s>f){var u=r(s/10);return 0===u?i:u<=f?void 0===l[u-1]?o.charAt(1):l[u-1]+o.charAt(1):i}a=l[s-1]}return void 0===a?"":a}))}},"0cfb":function(t,e,n){var i=n("83ab"),r=n("d039"),o=n("cc12");t.exports=!i&&!r((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},"0d24":function(t,e,n){(function(t){var i=n("2b3e"),r=n("07c7"),o=e&&!e.nodeType&&e,a=o&&"object"==typeof t&&t&&!t.nodeType&&t,s=a&&a.exports===o,l=s?i.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||r;t.exports=u}).call(this,n("62e4")(t))},"0da8":function(t,e,n){"use strict";var i=n("21a1"),r=n("19eb"),o=n("9850"),a=n("6d8b"),s=Object(a["j"])({x:0,y:0},r["b"]),l={style:Object(a["j"])({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},r["a"].style)};function c(t){return!!(t&&"string"!==typeof t&&t.width&&t.height)}var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["a"])(e,t),e.prototype.createStyle=function(t){return Object(a["h"])(s,t)},e.prototype._getSize=function(t){var e=this.style,n=e[t];if(null!=n)return n;var i=c(e.image)?e.image:this.__image;if(!i)return 0;var r="width"===t?"height":"width",o=e[r];return null==o?i[t]:i[t]/i[r]*o},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return l},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new o["a"](t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(r["c"]);u.prototype.type="image",e["a"]=u},"0df6":function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},"0f99":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"g",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"f",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"b",(function(){return d}));var i=n("e0d3"),r=n("6d8b"),o=n("07fd"),a={Must:1,Might:2,Not:3},s=Object(i["o"])();function l(t){s(t).datasetMap=Object(r["g"])()}function c(t,e,n){var i={},o=h(e);if(!o||!t)return i;var a,l,c=[],u=[],f=e.ecModel,d=s(f).datasetMap,p=o.uid+"_"+n.seriesLayoutBy;t=t.slice(),Object(r["k"])(t,(function(e,n){var o=Object(r["A"])(e)?e:t[n]={name:e};"ordinal"===o.type&&null==a&&(a=n,l=v(o)),i[o.name]=[]}));var g=d.get(p)||d.set(p,{categoryWayDim:l,valueWayDim:0});function m(t,e,n){for(var i=0;i<n;i++)t.push(e+i)}function v(t){var e=t.dimsDef;return e?e.length:1}return Object(r["k"])(t,(function(t,e){var n=t.name,r=v(t);if(null==a){var o=g.valueWayDim;m(i[n],o,r),m(u,o,r),g.valueWayDim+=r}else if(a===e)m(i[n],0,r),m(c,0,r);else{o=g.categoryWayDim;m(i[n],o,r),m(u,o,r),g.categoryWayDim+=r}})),c.length&&(i.itemName=c),u.length&&(i.seriesName=u),i}function u(t,e,n){var i={},s=h(t);if(!s)return i;var l,c=e.sourceFormat,u=e.dimensionsDefine;c!==o["e"]&&c!==o["d"]||Object(r["k"])(u,(function(t,e){"name"===(Object(r["A"])(t)?t.name:t)&&(l=e)}));var f=function(){for(var t={},i={},r=[],o=0,s=Math.min(5,n);o<s;o++){var h=p(e.data,c,e.seriesLayoutBy,u,e.startIndex,o);r.push(h);var f=h===a.Not;if(f&&null==t.v&&o!==l&&(t.v=o),(null==t.n||t.n===t.v||!f&&r[t.n]===a.Not)&&(t.n=o),d(t)&&r[t.n]!==a.Not)return t;f||(h===a.Might&&null==i.v&&o!==l&&(i.v=o),null!=i.n&&i.n!==i.v||(i.n=o))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(i)?i:null}();if(f){i.value=[f.v];var d=null!=l?l:f.n;i.itemName=[d],i.seriesName=[d]}return i}function h(t){var e=t.get("data",!0);if(!e)return Object(i["v"])(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},i["b"]).models[0]}function f(t){return t.get("transform",!0)||t.get("fromTransformResult",!0)?Object(i["v"])(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},i["b"]).models:[]}function d(t,e){return p(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function p(t,e,n,s,l,c){var u,h,f,d=5;if(Object(r["E"])(t))return a.Not;if(s){var p=s[c];Object(r["A"])(p)?(h=p.name,f=p.type):Object(r["C"])(p)&&(h=p)}if(null!=f)return"ordinal"===f?a.Must:a.Not;if(e===o["c"]){var g=t;if(n===o["b"]){for(var m=g[c],v=0;v<(m||[]).length&&v<d;v++)if(null!=(u=T(m[l+v])))return u}else for(v=0;v<g.length&&v<d;v++){var y=g[l+v];if(y&&null!=(u=T(y[c])))return u}}else if(e===o["e"]){var _=t;if(!h)return a.Not;for(v=0;v<_.length&&v<d;v++){var b=_[v];if(b&&null!=(u=T(b[h])))return u}}else if(e===o["d"]){var x=t;if(!h)return a.Not;m=x[h];if(!m||Object(r["E"])(m))return a.Not;for(v=0;v<m.length&&v<d;v++)if(null!=(u=T(m[v])))return u}else if(e===o["f"]){var w=t;for(v=0;v<w.length&&v<d;v++){b=w[v];var S=Object(i["h"])(b);if(!Object(r["t"])(S))return a.Not;if(null!=(u=T(S[c])))return u}}function T(t){var e=Object(r["C"])(t);return null!=t&&isFinite(t)&&""!==t?e?a.Might:a.Not:e&&"-"!==t?a.Must:void 0}return a.Not}},1:function(t,e){},1148:function(t,e,n){"use strict";var i=n("a691"),r=n("1d80");t.exports="".repeat||function(t){var e=String(r(this)),n="",o=i(t);if(o<0||o==1/0)throw RangeError("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},1276:function(t,e,n){"use strict";var i=n("d784"),r=n("44e7"),o=n("825a"),a=n("1d80"),s=n("4840"),l=n("8aa5"),c=n("50c4"),u=n("14c3"),h=n("9263"),f=n("d039"),d=[].push,p=Math.min,g=4294967295,m=!f((function(){return!RegExp(g,"y")}));i("split",2,(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=String(a(this)),o=void 0===n?g:n>>>0;if(0===o)return[];if(void 0===t)return[i];if(!r(t))return e.call(i,t,o);var s,l,c,u=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(s=h.call(m,i)){if(l=m.lastIndex,l>p&&(u.push(i.slice(p,s.index)),s.length>1&&s.index<i.length&&d.apply(u,s.slice(1)),c=s[0].length,p=l,u.length>=o))break;m.lastIndex===s.index&&m.lastIndex++}return p===i.length?!c&&m.test("")||u.push(""):u.push(i.slice(p)),u.length>o?u.slice(0,o):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var r=a(this),o=void 0==e?void 0:e[t];return void 0!==o?o.call(e,r,n):i.call(String(r),e,n)},function(t,r){var a=n(i,t,this,r,i!==e);if(a.done)return a.value;var h=o(t),f=String(this),d=s(h,RegExp),v=h.unicode,y=(h.ignoreCase?"i":"")+(h.multiline?"m":"")+(h.unicode?"u":"")+(m?"y":"g"),_=new d(m?h:"^(?:"+h.source+")",y),b=void 0===r?g:r>>>0;if(0===b)return[];if(0===f.length)return null===u(_,f)?[f]:[];var x=0,w=0,S=[];while(w<f.length){_.lastIndex=m?w:0;var T,O=u(_,m?f:f.slice(w));if(null===O||(T=p(c(_.lastIndex+(m?0:w)),f.length))===x)w=l(f,w,v);else{if(S.push(f.slice(x,w)),S.length===b)return S;for(var C=1;C<=O.length-1;C++)if(S.push(O[C]),S.length===b)return S;w=x=T}}return S.push(f.slice(x)),S}]}),!m)},1290:function(t,e){function n(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}t.exports=n},1310:function(t,e){function n(t){return null!=t&&"object"==typeof t}t.exports=n},1368:function(t,e,n){var i=n("da03"),r=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function o(t){return!!r&&r in t}t.exports=o},"14c3":function(t,e,n){var i=n("c6b6"),r=n("9263");t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var o=n.call(t,e);if("object"!==typeof o)throw TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==i(t))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"159b":function(t,e,n){var i=n("da84"),r=n("fdbc"),o=n("17c2"),a=n("9112");for(var s in r){var l=i[s],c=l&&l.prototype;if(c&&c.forEach!==o)try{a(c,"forEach",o)}catch(u){c.forEach=o}}},"15c9":function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcCabinet=e.util.createClass(e.Object,{type:"ecCabinet",stateProperties:e.Object.prototype.stateProperties.concat(["column","colWidth","rowHeight","thHeight"]),cacheProperties:e.Object.prototype.stateProperties.concat(["column","colWidth","rowHeight","thHeight"]),initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawEcCabinet()},drawEcCabinet:function(){this.ctx.save();var t=this.width=+this.column*+this.colWidth,e=this.height=+this.rowHeight+this.thHeight,n=-t/2,i=-e/2;this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.stroke,this.ctx.beginPath(),this.ctx.moveTo(n,i),this.ctx.lineTo(-n,i),this.ctx.lineTo(-n,-i),this.ctx.lineTo(n,-i),this.ctx.lineTo(n,i),this.ctx.moveTo(n,i+this.thHeight),this.ctx.lineTo(-n,i+this.thHeight);for(var r=0;r<=t;r+=this.colWidth)this.ctx.moveTo(r-t/2,-e/2),this.ctx.lineTo(r-t/2,e/2);this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()}}),e.EcCabinet.fromObject=function(t,n){n&&n(new e.EcCabinet(t))},e.EcCabinet.async=!0}).call(this,n("c8ba"))},"15e5":function(t,e,n){"use strict";(function(t){n("99af"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("159b");var e=n("313e"),i=n("bc3a"),r=n.n(i),o=t.fabric||(t.fabric={});o.EcEchartsLine=o.util.createClass(o.Rect,{type:"ecEchartsLine",superType:"element",stateProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),cacheProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e)},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({xAxis:{},yAxis:{},series:[{type:"line",data:[[0,1],[1,2],[2,3],[3,4]]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return o.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var i=this.id,r=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=(this.dialog,this.canvas.getZoom()),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*r*f-s)/2,m=(l*a*f-l)/2,v=o.util.makeElement("div",{id:"".concat(i,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(r*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=o.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element),this.getHistoryData()}},setParameter:function(t){this.chartProperty.list=t,this.getHistoryData()},getHistoryData:function(){var t=this,e=this.editable,n=this.chartOption,i=this.chartProperty,o=i.count,a=i.format,s=i.interval,l=i.loop,c=i.loopInterval,u=i.list;if(!e&&"history"==a&&u.length){l&&setInterval((function(){f()}),1e3*c);var h=u.map((function(t){return t.name}));if(!h)return;var f=function(){var e={factory:"DefaultDB",tagName:h.toString(),interval:+s,count:o,IsSum:!1};r.a.get("".concat("/ECONApi","/Real/ScopeHisVal"),{params:e}).then((function(e){var i=e.data.Data,r=[],o=[];i&&i.length&&(i[0].Data&&i[0].Data.length&&i[0].Data.forEach((function(t){r.push(t.RecordTime)})),i.forEach((function(t){var e=t.Data.map((function(t){return+t.Value}));o.push({name:t.TagName,type:"line",data:e})}))),n.xAxis instanceof Array?n.xAxis[0].data=r:n.xAxis.data=r,n.series=o,t.instance.setOption(n,{replaceMerge:["legend","xAxis","yAxis","series"]})}))};f()}}}),o.EcEchartsLine.fromObject=function(t,e){return e(new o.EcEchartsLine(t.chartOption,t))},o.EcEchartsLine.async=!0}).call(this,n("c8ba"))},1687:function(t,e,n){"use strict";function i(){return[1,0,0,1,0,0]}function r(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function a(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function s(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function l(t,e,n){var i=e[0],r=e[2],o=e[4],a=e[1],s=e[3],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+a*c,t[1]=-i*c+a*u,t[2]=r*u+s*c,t[3]=-r*c+u*s,t[4]=u*o+c*l,t[5]=u*l-c*o,t}function c(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}function u(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*i;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*r)*l,t[5]=(o*r-n*s)*l,t):null}function h(t){var e=i();return o(e,t),e}n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"f",(function(){return a})),n.d(e,"i",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"h",(function(){return c})),n.d(e,"e",(function(){return u})),n.d(e,"a",(function(){return h}))},1792:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]};function r(t,e){if("china"===t){var n=i[e.name];if(n){var r=e.getCenter();r[0]+=n[0]/10.5,r[1]+=-n[1]/14,e.setCenter(r)}}}},"17c2":function(t,e,n){"use strict";var i=n("b727").forEach,r=n("a640"),o=r("forEach");t.exports=o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},1830:function(t,e,n){"use strict";var i=n("6d8b"),r=n("b682"),o=n("b1d4"),a=n("2f45"),s=n("e0d3"),l=n("1f39"),c=function(){function t(t){this.coordSysDims=[],this.axisMap=Object(i["g"])(),this.categoryAxisMap=Object(i["g"])(),this.coordSysName=t}return t}();function u(t){var e=t.get("coordinateSystem"),n=new c(e),i=h[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}var h={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis",s["b"]).models[0],o=t.getReferringComponents("yAxis",s["b"]).models[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",o),f(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),f(o)&&(i.set("y",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis",s["b"]).models[0];e.coordSysDims=["single"],n.set("single",r),f(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar",s["b"]).models[0],o=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),f(o)&&(i.set("radius",o),e.firstCategoryDimIndex=0),f(a)&&(i.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,r){var o=t.ecModel,a=o.getComponent("parallel",t.get("parallelIndex")),s=e.coordSysDims=a.dimensions.slice();Object(i["k"])(a.parallelAxisIndex,(function(t,i){var a=o.getComponent("parallelAxis",t),l=s[i];n.set(l,a),f(a)&&(r.set(l,a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=i))}))}};function f(t){return"category"===t.get("type")}var d=n("ec6f"),p=n("ee1a"),g=n("0f99"),m=n("07fd");function v(t,e){var n,r=t.get("coordinateSystem"),o=l["a"].get(r);return e&&e.coordSysDims&&(n=i["H"](e.coordSysDims,(function(t){var n={name:t},i=e.axisMap.get(t);if(i){var r=i.get("type");n.type=Object(a["a"])(r)}return n}))),n||(n=o&&(o.getDimensionsInfo?o.getDimensionsInfo():o.dimensions.slice())||["x","y"]),n}function y(t,e,n){var r,o;return n&&i["k"](t,(function(t,i){var a=t.coordDim,s=n.categoryAxisMap.get(a);s&&(null==r&&(r=i),t.ordinalMeta=s.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(o=!0)})),o||null==r||(t[r].otherDims.itemName=0),r}function _(t,e,n){n=n||{};var a,s=e.getSourceManager(),l=!1;t?(l=!0,a=Object(d["c"])(t)):(a=s.getSource(),l=a.sourceFormat===m["f"]);var c=u(e),h=v(e,c),f=n.useEncodeDefaulter,_=i["w"](f)?f:f?i["i"](g["c"],h,e):null,x={coordDimensions:h,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:_,canOmitUnusedDimensions:!l},w=Object(o["b"])(a,x),S=y(w.dimensions,n.createInvertedIndices,c),T=l?null:s.getSharedDataStore(w),O=Object(p["a"])(e,{schema:w,store:T}),C=new r["a"](w,e);C.setCalculationInfo(O);var M=null!=S&&b(a)?function(t,e,n,i){return i===S?n:this.defaultDimValueGetter(t,e,n,i)}:null;return C.hasItemOption=!1,C.initData(l?a:T,null,M),C}function b(t){if(t.sourceFormat===m["f"]){var e=x(t.data||[]);return null!=e&&!i["t"](Object(s["h"])(e))}}function x(t){var e=0;while(e<t.length&&null==t[e])e++;return t[e]}e["a"]=_},1838:function(t,e,n){var i=n("c05f"),r=n("9b02"),o=n("8604"),a=n("f608"),s=n("08cc"),l=n("20ec"),c=n("f4d6"),u=1,h=2;function f(t,e){return a(t)&&s(e)?l(c(t),e):function(n){var a=r(n,t);return void 0===a&&a===e?o(n,t):i(e,a,u|h)}}t.exports=f},"18c0":function(t,e,n){"use strict";var i=n("7fae"),r=n("e0d8"),o=n("8e43"),a=n("944e"),s=n("6d8b"),l=function(t){function e(e){var n=t.call(this,e)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new o["a"]({})),Object(s["t"])(i)&&(i=new o["a"]({categories:Object(s["H"])(i,(function(t){return Object(s["A"])(t)?t.value:t}))})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return Object(i["b"])(e,t),e.prototype.parse=function(t){return"string"===typeof t?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return t=this.parse(t),a["a"](t,this._extent)&&null!=this._ordinalMeta.categories[t]},e.prototype.normalize=function(t){return t=this._getTickNumber(this.parse(t)),a["d"](t,this._extent)},e.prototype.scale=function(t){return t=Math.round(a["e"](t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){var t=[],e=this._extent,n=e[0];while(n<=e[1])t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(null!=t){for(var e=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],r=0,o=this._ordinalMeta.categories.length,a=Math.min(o,e.length);r<a;++r){var s=e[r];n[r]=s,i[s]=r}for(var l=0;r<o;++r){while(null!=i[l])l++;n.push(l),i[l]=r}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},e.prototype._getTickNumber=function(t){var e=this._ticksByOrdinalNumber;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getRawOrdinalNumber=function(t){var e=this._ordinalNumbersByTick;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var e=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[e];return null==n?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.niceTicks=function(){},e.prototype.niceExtent=function(){},e.type="ordinal",e}(r["a"]);r["a"].registerClass(l),e["a"]=l},"18d8":function(t,e,n){var i=n("234d"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(r,(function(t,n,i,r){e.push(i?r.replace(o,"$1"):n||t)})),e}));t.exports=a},"19aa":function(t,e){t.exports=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}},"19eb":function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u}));var i=n("21a1"),r=n("d5b7"),o=n("9850"),a=n("6d8b"),s=n("4bc4"),l="__zr_style_"+Math.round(10*Math.random()),c={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},u={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};c[l]=!0;var h=["z","z2","invisible"],f=["invisible"],d=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype._init=function(e){for(var n=Object(a["F"])(e),i=0;i<n.length;i++){var r=n[i];"style"===r?this.useStyle(e[r]):t.prototype.attrKV.call(this,r,e[r])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,e,n,i){var r=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&m(this,t,e)||r&&!r[0]&&!r[3])return!1;if(n&&this.__clipPaths)for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1;if(i&&this.parent){var a=this.parent;while(a){if(a.ignore)return!1;a=a.parent}}return!0},e.prototype.contain=function(t,e){return this.rectContain(t,e)},e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.rectContain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return i.contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,n=this.getBoundingRect(),i=this.style,r=i.shadowBlur||0,a=i.shadowOffsetX||0,s=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new o["a"](0,0,0,0)),e?o["a"].applyTransform(t,n,e):t.copy(n),(r||a||s)&&(t.width+=2*r+Math.abs(a),t.height+=2*r+Math.abs(s),t.x=Math.min(t.x,t.x+a-r),t.y=Math.min(t.y,t.y+s-r));var l=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-l),t.y=Math.floor(t.y-l),t.width=Math.ceil(t.width+1+2*l),t.height=Math.ceil(t.height+1+2*l))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new o["a"](0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(e,n){"style"!==e?t.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,e){return"string"===typeof t?this.style[t]=e:Object(a["m"])(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=s["c"],this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(this.__dirty&s["c"])},e.prototype.styleUpdated=function(){this.__dirty&=~s["c"]},e.prototype.createStyle=function(t){return Object(a["h"])(c,t)},e.prototype.useStyle=function(t){t[l]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[l]},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,h)},e.prototype._applyStateObj=function(e,n,i,r,o,s){t.prototype._applyStateObj.call(this,e,n,i,r,o,s);var l,c=!(n&&r);if(n&&n.style?o?r?l=n.style:(l=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(l,n.style)):(l=this._mergeStyle(this.createStyle(),r?this.style:i.style),this._mergeStyle(l,n.style)):c&&(l=i.style),l)if(o){var u=this.style;if(this.style=this.createStyle(c?{}:u),c)for(var d=Object(a["F"])(u),p=0;p<d.length;p++){var g=d[p];g in l&&(l[g]=l[g],this.style[g]=u[g])}var m=Object(a["F"])(l);for(p=0;p<m.length;p++){g=m[p];this.style[g]=this.style[g]}this._transitionState(e,{style:l},s,this.getAnimationStyleProps())}else this.useStyle(l);var v=this.__inHover?f:h;for(p=0;p<v.length;p++){g=v[p];n&&null!=n[g]?this[g]=n[g]:c&&null!=i[g]&&(this[g]=i[g])}},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(i.style=n),i},e.prototype._mergeStyle=function(t,e){return Object(a["m"])(t,e),t},e.prototype.getAnimationStyleProps=function(){return u},e.initDefaultProps=function(){var t=e.prototype;t.type="displayable",t.invisible=!1,t.z=0,t.z2=0,t.zlevel=0,t.culling=!1,t.cursor="pointer",t.rectHover=!1,t.incremental=!1,t._rect=null,t.dirtyRectTolerance=0,t.__dirty=s["a"]|s["c"]}(),e}(r["a"]),p=new o["a"](0,0,0,0),g=new o["a"](0,0,0,0);function m(t,e,n){return p.copy(t.getBoundingRect()),t.transform&&p.applyTransform(t.transform),g.width=e,g.height=n,!p.intersect(g)}e["c"]=d},"1a8c":function(t,e){function n(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=n},"1b1a":function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcWeather=e.util.createClass(e.Rect,{type:"ecWeather",superType:"element",element:null,hasControls:!1,lockRotation:!0,initialize:function(t){t=t||{},this.callSuper("initialize",t)},setSource:function(){},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t);var n=this.id,i=this.scaleX,r=this.scaleY,o=this.width,a=this.height,s=this.angle,l=this.editable,c=this.canvas.getZoom(),u=this.aCoords.tl.x,h=this.aCoords.tl.y,f=(o*i*c-o)/2,d=(a*r*c-a)/2;if(!this.element){this.iframeElement=e.util.makeElement("iframe",{id:n,src:"https://i.tianqi.com/?c=code&a=getcode&id=34&icon=1&w=230&h=50",width:"100%",height:"100%",frameborder:0,scrolling:"none",allowfullscreen:!0});var p=e.util.wrapElement(this.iframeElement,"div",{id:"".concat(n,"_container"),class:"item__container",style:"\n\t\t\t\t\ttransform: rotate(".concat(s,"deg) scale(").concat(i*c,", ").concat(r*c,");\n\t\t\t\t\twidth: ").concat(o,"px;\n\t\t\t\t\theight: ").concat(a,"px;\n\t\t\t\t\tleft: ").concat(u+f,"px;\n\t\t\t\t\ttop: ").concat(h+d,"px;\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tuser-select: ").concat(l?"none":" none ",";\n\t\t\t\t\tpointer-events: ").concat("none",";\n\t\t\t\t")});this.element=e.util.makeElementSelectable(p);var g=document.getElementById(this.canvas.container);g.appendChild(this.element)}}}),e.EcWeather.fromObject=function(t,n){n&&n(new e.EcWeather(t))},e.EcWeather.async=!0}).call(this,n("c8ba"))},"1be4":function(t,e,n){var i=n("d066");t.exports=i("document","documentElement")},"1be7":function(t,e,n){"use strict";n.d(e,"a",(function(){return Xe})),n.d(e,"d",(function(){return Vn})),n.d(e,"l",(function(){return Un})),n.d(e,"m",(function(){return Wn})),n.d(e,"j",(function(){return Xn})),n.d(e,"k",(function(){return Yn})),n.d(e,"o",(function(){return qn})),n.d(e,"e",(function(){return Zn})),n.d(e,"f",(function(){return Kn})),n.d(e,"b",(function(){return $n})),n.d(e,"g",(function(){return Jn})),n.d(e,"p",(function(){return Qn})),n.d(e,"h",(function(){return ni})),n.d(e,"i",(function(){return ii})),n.d(e,"c",(function(){return ri})),n.d(e,"n",(function(){return oi}));var i=n("7fae"),r=n("697e7"),o=n("6d8b"),a=n("41ef"),s=n("22d1"),l=n("04f6"),c=n("6fd3"),u=n("e0d3"),h=n("4319"),f=n("6cb7"),d="";"undefined"!==typeof navigator&&(d=navigator.platform||"");var p,g,m,v="rgba(0, 0, 0, 0.2)",y={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:v,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:v,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:v,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:v,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:v,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:v,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:d.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},_=n("0f99"),b=n("2f1f"),x=n("4041"),w=n("edae"),S="\0_ec_inner",T=1;var O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["b"])(e,t),e.prototype.init=function(t,e,n,i,r,o){i=i||{},this.option=null,this._theme=new h["a"](i),this._locale=new h["a"](r),this._optionManager=o},e.prototype.setOption=function(t,e,n){var i=E(e);this._optionManager.setOption(t,n,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,e){return this._resetOption(t,E(e))},e.prototype._resetOption=function(t,e){var n=!1,i=this._optionManager;if(!t||"recreate"===t){var r=i.mountOption("recreate"===t);0,this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(r,e)):m(this,r),n=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var a=i.getTimelineOption(this);a&&(n=!0,this._mergeOption(a,e))}if(!t||"recreate"===t||"media"===t){var s=i.getMediaOption(this);s.length&&Object(o["k"])(s,(function(t){n=!0,this._mergeOption(t,e)}),this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,e){var n=this.option,i=this._componentsMap,r=this._componentsCount,a=[],s=Object(o["g"])(),l=e&&e.replaceMergeMainTypeMap;function c(e){var a=Object(b["a"])(this,e,u["r"](t[e])),s=i.get(e),c=s?l&&l.get(e)?"replaceMerge":"normalMerge":"replaceAll",h=u["q"](s,a,c);u["x"](h,e,f["a"]),n[e]=null,i.set(e,null),r.set(e,0);var d=[],g=[],m=0;Object(o["k"])(h,(function(t,n){var i=t.existing,r=t.newOption;if(r){var a="series"===e,s=f["a"].getClass(e,t.keyInfo.subType,!a);if(!s)return;if(i&&i.constructor===s)i.name=t.keyInfo.name,i.mergeOption(r,this),i.optionUpdated(r,!1);else{var l=Object(o["m"])({componentIndex:n},t.keyInfo);i=new s(r,this,this,l),Object(o["m"])(i,l),t.brandNew&&(i.__requireNewView=!0),i.init(r,this,this),i.optionUpdated(null,!0)}}else i&&(i.mergeOption({},this),i.optionUpdated({},!1));i?(d.push(i.option),g.push(i),m++):(d.push(void 0),g.push(void 0))}),this),n[e]=d,i.set(e,g),r.set(e,m),"series"===e&&p(this)}Object(_["g"])(this),Object(o["k"])(t,(function(t,e){null!=t&&(f["a"].hasClass(e)?e&&(a.push(e),s.set(e,!0)):n[e]=null==n[e]?Object(o["d"])(t):Object(o["I"])(n[e],t,!0))})),l&&l.each((function(t,e){f["a"].hasClass(e)&&!s.get(e)&&(a.push(e),s.set(e,!0))})),f["a"].topologicalTravel(a,f["a"].getAllClassMainTypes(),c,this),this._seriesIndices||p(this)},e.prototype.getOption=function(){var t=Object(o["d"])(this.option);return Object(o["k"])(t,(function(e,n){if(f["a"].hasClass(n)){for(var i=u["r"](e),r=i.length,o=!1,a=r-1;a>=0;a--)i[a]&&!u["l"](i[a])?o=!0:(i[a]=null,!o&&r--);i.length=r,t[n]=i}})),delete t[S],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,e){var n=this._componentsMap.get(t);if(n){var i=n[e||0];if(i)return i;if(null==e)for(var r=0;r<n.length;r++)if(n[r])return n[r]}},e.prototype.queryComponents=function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,a=t.name,s=this._componentsMap.get(e);return s&&s.length?(null!=i?(n=[],Object(o["k"])(u["r"](i),(function(t){s[t]&&n.push(s[t])}))):n=null!=r?A("id",r,s):null!=a?A("name",a,s):Object(o["n"])(s,(function(t){return!!t})),D(n,t)):[]},e.prototype.findComponents=function(t){var e=t.query,n=t.mainType,i=a(e),r=i?this.queryComponents(i):Object(o["n"])(this._componentsMap.get(n),(function(t){return!!t}));return s(D(r,t));function a(t){var e=n+"Index",i=n+"Id",r=n+"Name";return!t||null==t[e]&&null==t[i]&&null==t[r]?null:{mainType:n,index:t[e],id:t[i],name:t[r]}}function s(e){return t.filter?Object(o["n"])(e,t.filter):e}},e.prototype.eachComponent=function(t,e,n){var i=this._componentsMap;if(Object(o["w"])(t)){var r=e,a=t;i.each((function(t,e){for(var n=0;t&&n<t.length;n++){var i=t[n];i&&a.call(r,e,i,i.componentIndex)}}))}else for(var s=Object(o["C"])(t)?i.get(t):Object(o["A"])(t)?this.findComponents(t):null,l=0;s&&l<s.length;l++){var c=s[l];c&&e.call(n,c,c.componentIndex)}},e.prototype.getSeriesByName=function(t){var e=u["e"](t,null);return Object(o["n"])(this._componentsMap.get("series"),(function(t){return!!t&&null!=e&&t.name===e}))},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return Object(o["n"])(this._componentsMap.get("series"),(function(e){return!!e&&e.subType===t}))},e.prototype.getSeries=function(){return Object(o["n"])(this._componentsMap.get("series"),(function(t){return!!t}))},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,e){g(this),Object(o["k"])(this._seriesIndices,(function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)}),this)},e.prototype.eachRawSeries=function(t,e){Object(o["k"])(this._componentsMap.get("series"),(function(n){n&&t.call(e,n,n.componentIndex)}))},e.prototype.eachSeriesByType=function(t,e,n){g(this),Object(o["k"])(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)}),this)},e.prototype.eachRawSeriesByType=function(t,e,n){return Object(o["k"])(this.getSeriesByType(t),e,n)},e.prototype.isSeriesFiltered=function(t){return g(this),null==this._seriesIndicesMap.get(t.componentIndex)},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,e){g(this);var n=[];Object(o["k"])(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];t.call(e,r,i)&&n.push(i)}),this),this._seriesIndices=n,this._seriesIndicesMap=Object(o["g"])(n)},e.prototype.restoreData=function(t){p(this);var e=this._componentsMap,n=[];e.each((function(t,e){f["a"].hasClass(e)&&n.push(e)})),f["a"].topologicalTravel(n,f["a"].getAllClassMainTypes(),(function(n){Object(o["k"])(e.get(n),(function(e){!e||"series"===n&&C(e,t)||e.restoreData()}))}))},e.internalField=function(){p=function(t){var e=t._seriesIndices=[];Object(o["k"])(t._componentsMap.get("series"),(function(t){t&&e.push(t.componentIndex)})),t._seriesIndicesMap=Object(o["g"])(e)},g=function(t){0},m=function(t,e){t.option={},t.option[S]=T,t._componentsMap=Object(o["g"])({series:[]}),t._componentsCount=Object(o["g"])();var n=e.aria;Object(o["A"])(n)&&null==n.enabled&&(n.enabled=!0),M(e,t._theme.option),Object(o["I"])(e,y,!1),t._mergeOption(e,null)}}(),e}(h["a"]);function C(t,e){if(e){var n=e.seriesIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}function M(t,e){var n=t.color&&!t.colorLayer;Object(o["k"])(e,(function(e,i){"colorLayer"===i&&n||f["a"].hasClass(i)||("object"===typeof e?t[i]=t[i]?Object(o["I"])(t[i],e,!1):Object(o["d"])(e):null==t[i]&&(t[i]=e))}))}function A(t,e,n){if(Object(o["t"])(e)){var i=Object(o["g"])();return Object(o["k"])(e,(function(t){if(null!=t){var e=u["e"](t,null);null!=e&&i.set(t,!0)}})),Object(o["n"])(n,(function(e){return e&&i.get(e[t])}))}var r=u["e"](e,null);return Object(o["n"])(n,(function(e){return e&&null!=r&&e[t]===r}))}function D(t,e){return e.hasOwnProperty("subType")?Object(o["n"])(t,(function(t){return t&&t.subType===e.subType})):t}function E(t){var e=Object(o["g"])();return t&&Object(o["k"])(u["r"](t.replaceMerge),(function(t){e.set(t,!0)})),{replaceMergeMainTypeMap:e}}Object(o["K"])(O,x["a"]);var I=O,P=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],L=function(){function t(t){o["k"](P,(function(e){this[e]=o["c"](t[e],t)}),this)}return t}(),k=L,j=n("1f39"),R=/^(min|max)?(.+)$/,N=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,e,n){t&&(Object(o["k"])(Object(u["r"])(t.series),(function(t){t&&t.data&&Object(o["E"])(t.data)&&Object(o["R"])(t.data)})),Object(o["k"])(Object(u["r"])(t.dataset),(function(t){t&&t.source&&Object(o["E"])(t.source)&&Object(o["R"])(t.source)}))),t=Object(o["d"])(t);var i=this._optionBackup,r=B(t,e,!i);this._newBaseOption=r.baseOption,i?(r.timelineOptions.length&&(i.timelineOptions=r.timelineOptions),r.mediaList.length&&(i.mediaList=r.mediaList),r.mediaDefault&&(i.mediaDefault=r.mediaDefault)):this._optionBackup=r},t.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],Object(o["d"])(t?e.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=Object(o["d"])(n[i.getCurrentIndex()]))}return e},t.prototype.getMediaOption=function(t){var e=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,r=this._mediaDefault,a=[],s=[];if(!i.length&&!r)return s;for(var l=0,c=i.length;l<c;l++)F(i[l].query,e,n)&&a.push(l);return!a.length&&r&&(a=[-1]),a.length&&!V(a,this._currentMediaIndices)&&(s=Object(o["H"])(a,(function(t){return Object(o["d"])(-1===t?r.option:i[t].option)}))),this._currentMediaIndices=a,s},t}();function B(t,e,n){var i,r,a=[],s=t.baseOption,l=t.timeline,c=t.options,u=t.media,h=!!t.media,f=!!(c||l||s&&s.timeline);function d(t){Object(o["k"])(e,(function(e){e(t,n)}))}return s?(r=s,r.timeline||(r.timeline=l)):((f||h)&&(t.options=t.media=null),r=t),h&&Object(o["t"])(u)&&Object(o["k"])(u,(function(t){t&&t.option&&(t.query?a.push(t):i||(i=t))})),d(r),Object(o["k"])(c,(function(t){return d(t)})),Object(o["k"])(a,(function(t){return d(t.option)})),{baseOption:r,timelineOptions:c||[],mediaDefault:i,mediaList:a}}function F(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return Object(o["k"])(t,(function(t,e){var n=e.match(R);if(n&&n[1]&&n[2]){var o=n[1],a=n[2].toLowerCase();z(i[a],t,o)||(r=!1)}})),r}function z(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e}function V(t,e){return t.join(",")===e.join(",")}var H=N,G=o["k"],U=o["A"],W=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function X(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=W.length;n<i;n++){var r=W[n],a=e.normal,s=e.emphasis;a&&a[r]&&(t[r]=t[r]||{},t[r].normal?o["I"](t[r].normal,a[r]):t[r].normal=a[r],a[r]=null),s&&s[r]&&(t[r]=t[r]||{},t[r].emphasis?o["I"](t[r].emphasis,s[r]):t[r].emphasis=s[r],s[r]=null)}}function Y(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,o["j"](t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r,r.focus&&(t.emphasis.focus=r.focus),r.blurScope&&(t.emphasis.blurScope=r.blurScope))}}function q(t){Y(t,"itemStyle"),Y(t,"lineStyle"),Y(t,"areaStyle"),Y(t,"label"),Y(t,"labelLine"),Y(t,"upperLabel"),Y(t,"edgeLabel")}function Z(t,e){var n=U(t)&&t[e],i=U(n)&&n.textStyle;if(i){0;for(var r=0,o=u["c"].length;r<o;r++){var a=u["c"][r];i.hasOwnProperty(a)&&(n[a]=i[a])}}}function K(t){t&&(q(t),Z(t,"label"),t.emphasis&&Z(t.emphasis,"label"))}function $(t){if(U(t)){X(t),q(t),Z(t,"label"),Z(t,"upperLabel"),Z(t,"edgeLabel"),t.emphasis&&(Z(t.emphasis,"label"),Z(t.emphasis,"upperLabel"),Z(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(X(e),K(e));var n=t.markLine;n&&(X(n),K(n));var i=t.markArea;i&&K(i);var r=t.data;if("graph"===t.type){r=r||t.nodes;var a=t.links||t.edges;if(a&&!o["E"](a))for(var s=0;s<a.length;s++)K(a[s]);o["k"](t.categories,(function(t){q(t)}))}if(r&&!o["E"](r))for(s=0;s<r.length;s++)K(r[s]);if(e=t.markPoint,e&&e.data){var l=e.data;for(s=0;s<l.length;s++)K(l[s])}if(n=t.markLine,n&&n.data){var c=n.data;for(s=0;s<c.length;s++)o["t"](c[s])?(K(c[s][0]),K(c[s][1])):K(c[s])}"gauge"===t.type?(Z(t,"axisLabel"),Z(t,"title"),Z(t,"detail")):"treemap"===t.type?(Y(t.breadcrumb,"itemStyle"),o["k"](t.levels,(function(t){q(t)}))):"tree"===t.type&&q(t.leaves)}}function J(t){return o["t"](t)?t:t?[t]:[]}function Q(t){return(o["t"](t)?t[0]:t)||{}}function tt(t,e){G(J(t.series),(function(t){U(t)&&$(t)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),G(n,(function(e){G(J(t[e]),(function(t){t&&(Z(t,"axisLabel"),Z(t.axisPointer,"label"))}))})),G(J(t.parallel),(function(t){var e=t&&t.parallelAxisDefault;Z(e,"axisLabel"),Z(e&&e.axisPointer,"label")})),G(J(t.calendar),(function(t){Y(t,"itemStyle"),Z(t,"dayLabel"),Z(t,"monthLabel"),Z(t,"yearLabel")})),G(J(t.radar),(function(t){Z(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)})),G(J(t.geo),(function(t){U(t)&&(K(t),G(J(t.regions),(function(t){K(t)})))})),G(J(t.timeline),(function(t){K(t),Y(t,"label"),Y(t,"itemStyle"),Y(t,"controlStyle",!0);var e=t.data;o["t"](e)&&o["k"](e,(function(t){o["A"](t)&&(Y(t,"label"),Y(t,"itemStyle"))}))})),G(J(t.toolbox),(function(t){Y(t,"iconStyle"),G(t.feature,(function(t){Y(t,"iconStyle")}))})),Z(Q(t.axisPointer),"label"),Z(Q(t.tooltip).axisPointer,"label")}function et(t,e){for(var n=e.split(","),i=t,r=0;r<n.length;r++)if(i=i&&i[n[r]],null==i)break;return i}function nt(t,e,n,i){for(var r,o=e.split(","),a=t,s=0;s<o.length-1;s++)r=o[s],null==a[r]&&(a[r]={}),a=a[r];(i||null==a[o[s]])&&(a[o[s]]=n)}function it(t){t&&Object(o["k"])(rt,(function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])}))}var rt=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],ot=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],at=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function st(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<at.length;n++){var i=at[n][1],r=at[n][0];null!=e[i]&&(e[r]=e[i])}}function lt(t){t&&"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function ct(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function ut(t){t&&null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency"))}function ht(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&ht(t[n].children,e)}function ft(t,e){tt(t,e),t.series=Object(u["r"])(t.series),Object(o["k"])(t.series,(function(t){if(Object(o["A"])(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e){null!=t.clockWise&&(t.clockwise=t.clockWise),lt(t.label);var n=t.data;if(n&&!Object(o["E"])(n))for(var i=0;i<n.length;i++)lt(n[i]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if("gauge"===e){var r=et(t,"pointer.color");null!=r&&nt(t,"itemStyle.color",r)}else if("bar"===e){st(t),st(t.backgroundStyle),st(t.emphasis);n=t.data;if(n&&!Object(o["E"])(n))for(i=0;i<n.length;i++)"object"===typeof n[i]&&(st(n[i]),st(n[i]&&n[i].emphasis))}else if("sunburst"===e){var a=t.highlightPolicy;a&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=a)),ct(t),ht(t.data,ct)}else"graph"===e||"sankey"===e?ut(t):"map"===e&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&Object(o["j"])(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),it(t)}})),t.dataRange&&(t.visualMap=t.dataRange),Object(o["k"])(ot,(function(e){var n=t[e];n&&(Object(o["t"])(n)||(n=[n]),Object(o["k"])(n,(function(t){it(t)})))}))}var dt=n("3842");function pt(t){var e=Object(o["g"])();t.eachSeries((function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),o={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}})),e.each(gt)}function gt(t){Object(o["k"])(t,(function(e,n){var i=[],r=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex;a.modify(o,(function(o,l,c){var u,h,f=a.get(e.stackedDimension,c);if(isNaN(f))return r;s?h=a.getRawIndex(c):u=a.get(e.stackedByDimension,c);for(var d=NaN,p=n-1;p>=0;p--){var g=t[p];if(s||(h=g.data.rawIndexOf(g.stackedByDimension,u)),h>=0){var m=g.data.getByRawIndex(g.stackResultDimension,h);if(f>=0&&m>0||f<=0&&m<0){f=Object(dt["b"])(f,m),d=m;break}}}return i[0]=f,i[1]=d,i}))}))}var mt=n("4f85"),vt=n("b12f"),yt=n("e887"),_t=n("c7a2"),bt=n("0da8"),xt=n("deab"),wt=n("cbe5"),St=n("861c"),Tt=n("7d6c"),Ot=n("88b3"),Ct=n("282b"),Mt=n("551f"),At=n("3901"),Dt=Object(u["o"])(),Et={itemStyle:Object(Ct["a"])(Mt["a"],!0),lineStyle:Object(Ct["a"])(At["a"],!0)},It={lineStyle:"stroke",itemStyle:"fill"};function Pt(t,e){var n=t.visualStyleMapper||Et[e];return n||(console.warn("Unkown style type '"+e+"'."),Et.itemStyle)}function Lt(t,e){var n=t.visualDrawType||It[e];return n||(console.warn("Unkown style type '"+e+"'."),"fill")}var kt={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=t.getModel(i),a=Pt(t,i),s=a(r),l=r.getShallow("decal");l&&(n.setVisual("decal",l),l.dirty=!0);var c=Lt(t,i),u=s[c],h=Object(o["w"])(u)?u:null,f="auto"===s.fill||"auto"===s.stroke;if(!s[c]||h||f){var d=t.getColorFromPalette(t.name,null,e.getSeriesCount());s[c]||(s[c]=d,n.setVisual("colorFromPalette",!0)),s.fill="auto"===s.fill||"function"===typeof s.fill?d:s.fill,s.stroke="auto"===s.stroke||"function"===typeof s.stroke?d:s.stroke}if(n.setVisual("style",s),n.setVisual("drawType",c),!e.isSeriesFiltered(t)&&h)return n.setVisual("colorFromPalette",!1),{dataEach:function(e,n){var i=t.getDataParams(n),r=Object(o["m"])({},s);r[c]=h(i),e.setItemVisual(n,"style",r)}}}},jt=new h["a"],Rt={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.ignoreStyleOnData&&!e.isSeriesFiltered(t)){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=Pt(t,i),a=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(t,e){var n=t.getRawDataItem(e);if(n&&n[i]){jt.option=n[i];var s=r(jt),l=t.ensureUniqueItemVisual(e,"style");Object(o["m"])(l,s),jt.option.decal&&(t.setItemVisual(e,"decal",jt.option.decal),jt.option.decal.dirty=!0),a in s&&t.setItemVisual(e,"colorFromPalette",!1)}}:null}}}},Nt={performRawSeries:!0,overallReset:function(t){var e=Object(o["g"])();t.eachSeries((function(t){var n=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+n,r=e.get(i);r||(r={},e.set(i,r)),Dt(t).scope=r}})),t.eachSeries((function(e){if(!e.isColorBySeries()&&!t.isSeriesFiltered(e)){var n=e.getRawData(),i={},r=e.getData(),o=Dt(e).scope,a=e.visualStyleAccessPath||"itemStyle",s=Lt(e,a);r.each((function(t){var e=r.getRawIndex(t);i[e]=t})),n.each((function(t){var a=i[t],l=r.getItemVisual(a,"colorFromPalette");if(l){var c=r.ensureUniqueItemVisual(a,"style"),u=n.getName(t)||t+"",h=n.count();c[s]=e.getColorFromPalette(u,o,h)}}))}}))}},Bt=n("2dc5"),Ft=n("76a5"),zt=n("8d32"),Vt=Math.PI;function Ht(t,e){e=e||{},o["j"](e,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Bt["a"],i=new _t["a"]({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var r,a=new Ft["a"]({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),s=new _t["a"]({style:{fill:"none"},textContent:a,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});return n.add(s),e.showSpinner&&(r=new zt["a"]({shape:{startAngle:-Vt/2,endAngle:-Vt/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001}),r.animateShape(!0).when(1e3,{endAngle:3*Vt/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:3*Vt/2}).delay(300).start("circularInOut"),n.add(r)),n.resize=function(){var n=a.getBoundingRect().width,o=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-2*o-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner&&n?0:5+n/2)+(e.showSpinner?0:n/2)+(n?0:o),c=t.getHeight()/2;e.showSpinner&&r.setShape({cx:l,cy:c}),s.setShape({x:l-o,y:c-o,width:2*o,height:2*o}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n}var Gt=n("9fbc"),Ut=n("8918"),Wt=function(){function t(t,e,n,i){this._stageTaskMap=Object(o["g"])(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return t.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each((function(t){var e=t.overallTask;e&&e.dirty()}))},t.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,o=r?n.step:null,a=i&&i.modDataCount,s=null!=a?Math.ceil(a/o):null;return{step:o,modBy:s,modDataCount:a}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData(),r=i.count(),o=n.progressiveEnabled&&e.incrementalPrepareRender&&r>=n.threshold,a=t.get("large")&&r>=t.get("largeThreshold"),s="mod"===t.get("progressiveChunkMode")?r:null;t.pipelineContext=n.context={progressiveRender:o,modDataCount:s,large:a}},t.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=Object(o["g"])();t.eachSeries((function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),e._pipe(t,t.dataTask)}))},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;Object(o["k"])(this._allHandlers,(function(i){var r=t.get(i.uid)||t.set(i.uid,{}),a="";Object(o["b"])(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,r,e,n),i.overallReset&&this._createOverallStageTask(i,r,e,n)}),this)},t.prototype.prepareView=function(t,e,n,i){var r=t.renderTask,o=r.context;o.model=e,o.ecModel=n,o.api=i,r.__block=!t.incrementalPrepareRender,this._pipe(e,r)},t.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},t.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},t.prototype._performStageTasks=function(t,e,n,i){i=i||{};var r=!1,a=this;function s(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}Object(o["k"])(t,(function(t,o){if(!i.visualType||i.visualType===t.visualType){var l=a._stageTaskMap.get(t.uid),c=l.seriesTaskMap,u=l.overallTask;if(u){var h,f=u.agentStubMap;f.each((function(t){s(i,t)&&(t.dirty(),h=!0)})),h&&u.dirty(),a.updatePayload(u,n);var d=a.getPerformArgs(u,i.block);f.each((function(t){t.perform(d)})),u.perform(d)&&(r=!0)}else c&&c.each((function(o,l){s(i,o)&&o.dirty();var c=a.getPerformArgs(o,i.block);c.skip=!t.performRawSeries&&e.isSeriesFiltered(o.context.model),a.updatePayload(o,n),o.perform(c)&&(r=!0)}))}})),this.unfinished=r||this.unfinished},t.prototype.performSeriesTasks=function(t){var e;t.eachSeries((function(t){e=t.dataTask.perform()||e})),this.unfinished=e||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each((function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)}))},t.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},t.prototype._createSeriesStageTask=function(t,e,n,i){var r=this,a=e.seriesTaskMap,s=e.seriesTaskMap=Object(o["g"])(),l=t.seriesType,c=t.getTargetSeries;function u(e){var o=e.uid,l=s.set(o,a&&a.get(o)||Object(Gt["a"])({plan:Kt,reset:$t,count:te}));l.context={model:e,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:r},r._pipe(e,l)}t.createOnAllSeries?n.eachRawSeries(u):l?n.eachRawSeriesByType(l,u):c&&c(n,i).each(u)},t.prototype._createOverallStageTask=function(t,e,n,i){var r=this,a=e.overallTask=e.overallTask||Object(Gt["a"])({reset:Xt});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:r};var s=a.agentStubMap,l=a.agentStubMap=Object(o["g"])(),c=t.seriesType,u=t.getTargetSeries,h=!0,f=!1,d="";function p(t){var e=t.uid,n=l.set(e,s&&s.get(e)||(f=!0,Object(Gt["a"])({reset:Yt,onDirty:Zt})));n.context={model:t,overallProgress:h},n.agent=a,n.__block=h,r._pipe(t,n)}Object(o["b"])(!t.createOnAllSeries,d),c?n.eachRawSeriesByType(c,p):u?u(n,i).each(p):(h=!1,Object(o["k"])(n.getSeries(),p)),f&&a.dirty()},t.prototype._pipe=function(t,e){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=e),i.tail&&i.tail.pipe(e),i.tail=e,e.__idxInPipeline=i.count++,e.__pipeline=i},t.wrapStageHandler=function(t,e){return Object(o["w"])(t)&&(t={overallReset:t,seriesType:ee(t)}),t.uid=Object(Ut["c"])("stageHandler"),e&&(t.visualType=e),t},t}();function Xt(t){t.overallReset(t.ecModel,t.api,t.payload)}function Yt(t){return t.overallProgress&&qt}function qt(){this.agent.dirty(),this.getDownstream().dirty()}function Zt(){this.agent&&this.agent.dirty()}function Kt(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function $t(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=Object(u["r"])(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?Object(o["H"])(e,(function(t,e){return Qt(e)})):Jt}var Jt=Qt(0);function Qt(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var o=e.start;o<e.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(e,i)}}function te(t){return t.data.count()}function ee(t){ne=null;try{t(ie,re)}catch(e){}return ne}var ne,ie={},re={};function oe(t,e){for(var n in e.prototype)t[n]=o["L"]}oe(ie,I),oe(re,k),ie.eachSeriesByType=ie.eachRawSeriesByType=function(t){ne=t},ie.eachComponent=function(t){"series"===t.mainType&&t.subType&&(ne=t.subType)};var ae=Wt,se=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],le={color:se,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],se]},ce="#B9B8CE",ue="#100C2A",he=function(){return{axisLine:{lineStyle:{color:ce}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},fe=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],de={darkMode:!0,color:fe,backgroundColor:ue,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:ce}},textStyle:{color:ce},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:ce}},dataZoom:{borderColor:"#71708A",textStyle:{color:ce},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:ce}},timeline:{lineStyle:{color:ce},label:{color:ce},controlStyle:{color:ce,borderColor:ce}},calendar:{itemStyle:{color:ue},dayLabel:{color:ce},monthLabel:{color:ce},yearLabel:{color:ce}},timeAxis:he(),logAxis:he(),valueAxis:he(),categoryAxis:he(),line:{symbol:"circle"},graph:{color:fe},gauge:{title:{color:ce},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:ce},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};de.categoryAxis.splitLine.show=!1;var pe=de,ge=n("625e"),me=function(){function t(){}return t.prototype.normalizeQuery=function(t){var e={},n={},i={};if(o["C"](t)){var r=Object(ge["f"])(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};o["k"](t,(function(t,r){for(var o=!1,l=0;l<a.length;l++){var c=a[l],u=r.lastIndexOf(c);if(u>0&&u===r.length-c.length){var h=r.slice(0,u);"data"!==h&&(e.mainType=h,e[c.toLowerCase()]=t,o=!0)}}s.hasOwnProperty(r)&&(n[r]=t,o=!0),o||(i[r]=t)}))}return{cptQuery:e,dataQuery:n,otherQuery:i}},t.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,r=n.packedEvent,o=n.model,a=n.view;if(!o||!a)return!0;var s=e.cptQuery,l=e.dataQuery;return c(s,o,"mainType")&&c(s,o,"subType")&&c(s,o,"index","componentIndex")&&c(s,o,"name")&&c(s,o,"id")&&c(l,r,"name")&&c(l,r,"dataIndex")&&c(l,r,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,e.otherQuery,i,r));function c(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),ve={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),t.hasSymbolVisual){var i=t.get("symbol"),r=t.get("symbolSize"),a=t.get("symbolKeepAspect"),s=t.get("symbolRotate"),l=t.get("symbolOffset"),c=Object(o["w"])(i),u=Object(o["w"])(r),h=Object(o["w"])(s),f=Object(o["w"])(l),d=c||u||h||f,p=!c&&i?i:t.defaultSymbol,g=u?null:r,m=h?null:s,v=f?null:l;if(n.setVisual({legendIcon:t.legendIcon||p,symbol:p,symbolSize:g,symbolKeepAspect:a,symbolRotate:m,symbolOffset:v}),!e.isSeriesFiltered(t))return{dataEach:d?y:null}}function y(e,n){var o=t.getRawValue(n),a=t.getDataParams(n);c&&e.setItemVisual(n,"symbol",i(o,a)),u&&e.setItemVisual(n,"symbolSize",r(o,a)),h&&e.setItemVisual(n,"symbolRotate",s(o,a)),f&&e.setItemVisual(n,"symbolOffset",l(o,a))}}},ye={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(t.hasSymbolVisual&&!e.isSeriesFiltered(t)){var n=t.getData();return{dataEach:n.hasItemOption?i:null}}function i(t,e){var n=t.getItemModel(e),i=n.getShallow("symbol",!0),r=n.getShallow("symbolSize",!0),o=n.getShallow("symbolRotate",!0),a=n.getShallow("symbolOffset",!0),s=n.getShallow("symbolKeepAspect",!0);null!=i&&t.setItemVisual(e,"symbol",i),null!=r&&t.setItemVisual(e,"symbolSize",r),null!=o&&t.setItemVisual(e,"symbolRotate",o),null!=a&&t.setItemVisual(e,"symbolOffset",a),null!=s&&t.setItemVisual(e,"symbolKeepAspect",s)}}},_e=n("0924"),be=n("f3bb"),xe=n("04f7"),we=n("ef59"),Se=n("fadd"),Te=n("b3c1");function Oe(t,e){t.eachRawSeries((function(n){if(!t.isSeriesFiltered(n)){var i=n.getData();i.hasItemVisual()&&i.each((function(t){var n=i.getItemVisual(t,"decal");if(n){var r=i.ensureUniqueItemVisual(t,"style");r.decal=Object(Te["a"])(n,e)}}));var r=i.getVisual("decal");if(r){var o=i.getVisual("style");o.decal=Object(Te["a"])(r,e)}}}))}var Ce=n("5b87"),Me=new c["a"],Ae=Me,De="undefined"!==typeof window,Ee=1,Ie=800,Pe=900,Le=1e3,ke=2e3,je=5e3,Re=1e3,Ne=1100,Be=2e3,Fe=3e3,ze=4e3,Ve=4500,He=4600,Ge=5e3,Ue=6e3,We=7e3,Xe={PROCESSOR:{FILTER:Le,SERIES_FILTER:Ie,STATISTIC:je},VISUAL:{LAYOUT:Re,PROGRESSIVE_LAYOUT:Ne,GLOBAL:Be,CHART:Fe,POST_CHART_LAYOUT:He,COMPONENT:ze,BRUSH:Ge,CHART_ITEM:Ve,ARIA:Ue,DECAL:We}},Ye="__flagInMainProcess",qe="__pendingUpdate",Ze="__needsUpdateStatus",Ke=/^[a-zA-Z0-9_]+$/,$e="__connectUpdateStatus",Je=0,Qe=1,tn=2;function en(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.isDisposed())return rn(this,t,e);Dn(this.id)}}function nn(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return rn(this,t,e)}}function rn(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),c["a"].prototype[e].apply(t,n)}var on,an,sn,ln,cn,un,hn,fn,dn,pn,gn,mn,vn,yn,_n,bn,xn,wn,Sn,Tn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["b"])(e,t),e}(c["a"]),On=Tn.prototype;On.on=nn("on"),On.off=nn("off");var Cn=function(t){function e(e,n,i){var a=t.call(this,new me)||this;a._chartsViews=[],a._chartsMap={},a._componentsViews=[],a._componentsMap={},a._pendingActions=[],i=i||{},"string"===typeof n&&(n=jn[n]),a._dom=e;var s="canvas",c=!1,u=a._zr=r["init"](e,{renderer:i.renderer||s,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,useDirtyRect:null==i.useDirtyRect?c:i.useDirtyRect});a._throttledZrFlush=Object(Ot["c"])(Object(o["c"])(u.flush,u),17),n=Object(o["d"])(n),n&&ft(n,!0),a._theme=n,a._locale=Object(we["b"])(i.locale||we["a"]),a._coordSysMgr=new j["a"];var h=a._api=bn(a);function f(t,e){return t.__prio-e.__prio}return Object(l["a"])(kn,f),Object(l["a"])(Pn,f),a._scheduler=new ae(a,h,Pn,kn),a._messageCenter=new Tn,a._initEvents(),a.resize=Object(o["c"])(a.resize,a),u.animation.on("frame",a._onframe,a),pn(u,a),gn(u,a),Object(o["R"])(a),a}return Object(i["b"])(e,t),e.prototype._onframe=function(){if(!this._disposed){Sn(this);var t=this._scheduler;if(this[qe]){var e=this[qe].silent;this[Ye]=!0,on(this),ln.update.call(this,null,this[qe].updateParams),this._zr.flush(),this[Ye]=!1,this[qe]=null,fn.call(this,e),dn.call(this,e)}else if(t.unfinished){var n=Ee,i=this._model,r=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),un(this,i),t.performVisualTasks(i),_n(this,this._model,r,"remain",{}),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.setOption=function(t,e,n){if(this._disposed)Dn(this.id);else{var i,r,a;if(Object(o["A"])(e)&&(n=e.lazyUpdate,i=e.silent,r=e.replaceMerge,a=e.transition,e=e.notMerge),this[Ye]=!0,!this._model||e){var s=new H(this._api),l=this._theme,c=this._model=new I;c.scheduler=this._scheduler,c.init(null,null,null,l,this._locale,s)}this._model.setOption(t,{replaceMerge:r},Ln);var u={seriesTransition:a,optionChanged:!0};n?(this[qe]={silent:i,updateParams:u},this[Ye]=!1,this.getZr().wakeUp()):(on(this),ln.update.call(this,null,u),this._zr.flush(),this[qe]=null,this[Ye]=!1,fn.call(this,i),dn.call(this,i))}},e.prototype.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||De&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){if(s["a"].canvasSupported)return t=t||{},this._zr.painter.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.getSvgDataURL=function(){if(s["a"].svgSupported){var t=this._zr,e=t.storage.getDisplayList();return Object(o["k"])(e,(function(t){t.stopAnimation(null,!0)})),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(!this._disposed){t=t||{};var e=t.excludeComponents,n=this._model,i=[],r=this;Object(o["k"])(e,(function(t){n.eachComponent({mainType:t},(function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)}))}));var a="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return Object(o["k"])(i,(function(t){t.group.ignore=!1})),a}Dn(this.id)},e.prototype.getConnectedDataURL=function(t){if(this._disposed)Dn(this.id);else if(s["a"].canvasSupported){var e="svg"===t.type,n=this.group,i=Math.min,a=Math.max,l=1/0;if(Bn[n]){var c=l,u=l,h=-l,f=-l,d=[],p=t&&t.pixelRatio||this.getDevicePixelRatio();Object(o["k"])(Nn,(function(r,s){if(r.group===n){var l=e?r.getZr().painter.getSvgDom().innerHTML:r.getRenderedCanvas(Object(o["d"])(t)),p=r.getDom().getBoundingClientRect();c=i(p.left,c),u=i(p.top,u),h=a(p.right,h),f=a(p.bottom,f),d.push({dom:l,left:p.left,top:p.top})}})),c*=p,u*=p,h*=p,f*=p;var g=h-c,m=f-u,v=Object(o["f"])(),y=r["init"](v,{renderer:e?"svg":"canvas"});if(y.resize({width:g,height:m}),e){var _="";return Object(o["k"])(d,(function(t){var e=t.left-c,n=t.top-u;_+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"})),y.painter.getSvgRoot().innerHTML=_,t.connectedBackgroundColor&&y.painter.setBackgroundColor(t.connectedBackgroundColor),y.refreshImmediately(),y.painter.toDataURL()}return t.connectedBackgroundColor&&y.add(new _t["a"]({shape:{x:0,y:0,width:g,height:m},style:{fill:t.connectedBackgroundColor}})),Object(o["k"])(d,(function(t){var e=new bt["a"]({style:{x:t.left*p-c,y:t.top*p-u,image:t.dom}});y.add(e)})),y.refreshImmediately(),v.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}},e.prototype.convertToPixel=function(t,e){return cn(this,"convertToPixel",t,e)},e.prototype.convertFromPixel=function(t,e){return cn(this,"convertFromPixel",t,e)},e.prototype.containPixel=function(t,e){if(!this._disposed){var n,i=this._model,r=u["s"](i,t);return Object(o["k"])(r,(function(t,i){i.indexOf("Models")>=0&&Object(o["k"])(t,(function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n=n||!!r.containPoint(e);else if("seriesModels"===i){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(n=n||o.containPoint(e,t))}else 0}),this)}),this),!!n}Dn(this.id)},e.prototype.getVisual=function(t,e){var n=this._model,i=u["s"](n,t,{defaultMainType:"series"}),r=i.seriesModel;var o=r.getData(),a=i.hasOwnProperty("dataIndexInside")?i.dataIndexInside:i.hasOwnProperty("dataIndex")?o.indexOfRawIndex(i.dataIndex):null;return null!=a?Object(_e["a"])(o,a,e):Object(_e["b"])(o,e)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t=this;Object(o["k"])(An,(function(e){var n=function(n){var i,r=t.getModel(),a=n.target,s="globalout"===e;if(s?i={}:a&&Object(Se["a"])(a,(function(t){var e=Object(St["a"])(t);if(e&&null!=e.dataIndex){var n=e.dataModel||r.getSeriesByIndex(e.seriesIndex);return i=n&&n.getDataParams(e.dataIndex,e.dataType)||{},!0}if(e.eventData)return i=Object(o["m"])({},e.eventData),!0}),!0),i){var l=i.componentType,c=i.componentIndex;"markLine"!==l&&"markPoint"!==l&&"markArea"!==l||(l="series",c=i.seriesIndex);var u=l&&null!=c&&r.getComponent(l,c),h=u&&t["series"===u.mainType?"_chartsMap":"_componentsMap"][u.__viewId];0,i.event=n,i.type=e,t._$eventProcessor.eventInfo={targetEl:a,packedEvent:i,model:u,view:h},t.trigger(e,i)}};n.zrEventfulCallAtLast=!0,t._zr.on(e,n,t)})),Object(o["k"])(In,(function(e,n){t._messageCenter.on(n,(function(t){this.trigger(n,t)}),t)})),Object(o["k"])(["selectchanged"],(function(e){t._messageCenter.on(e,(function(t){this.trigger(e,t)}),t)})),Object(be["b"])(this._messageCenter,this,this._api)},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){this._disposed?Dn(this.id):this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed)Dn(this.id);else{this._disposed=!0,u["w"](this.getDom(),zn,"");var t=this,e=t._api,n=t._model;Object(o["k"])(t._componentsViews,(function(t){t.dispose(n,e)})),Object(o["k"])(t._chartsViews,(function(t){t.dispose(n,e)})),t._zr.dispose(),t._dom=t._model=t._chartsMap=t._componentsMap=t._chartsViews=t._componentsViews=t._scheduler=t._api=t._zr=t._throttledZrFlush=t._theme=t._coordSysMgr=t._messageCenter=null,delete Nn[t.id]}},e.prototype.resize=function(t){if(this._disposed)Dn(this.id);else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[qe]&&(null==i&&(i=this[qe].silent),n=!0,this[qe]=null),this[Ye]=!0,n&&on(this),ln.update.call(this,{type:"resize",animation:Object(o["m"])({duration:0},t&&t.animation)}),this[Ye]=!1,fn.call(this,i),dn.call(this,i)}}},e.prototype.showLoading=function(t,e){if(this._disposed)Dn(this.id);else if(Object(o["A"])(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Rn[t]){var n=Rn[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},e.prototype.hideLoading=function(){this._disposed?Dn(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},e.prototype.makeActionFromEvent=function(t){var e=Object(o["m"])({},t);return e.type=In[t.type],e},e.prototype.dispatchAction=function(t,e){if(this._disposed)Dn(this.id);else if(Object(o["A"])(e)||(e={silent:!!e}),En[t.type]&&this._model)if(this[Ye])this._pendingActions.push(t);else{var n=e.silent;hn.call(this,t,n);var i=e.flush;i?this._zr.flush():!1!==i&&s["a"].browser.weChat&&this._throttledZrFlush(),fn.call(this,n),dn.call(this,n)}},e.prototype.updateLabelLayout=function(){Ae.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed)Dn(this.id);else{var e=t.seriesIndex,n=this.getModel(),i=n.getSeriesByIndex(e);0,i.appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},e.internalField=function(){function t(t){for(var e=[],n=t.currentStates,i=0;i<n.length;i++){var r=n[i];"emphasis"!==r&&"blur"!==r&&"select"!==r&&e.push(r)}t.selected&&t.states.select&&e.push("select"),t.hoverState===Tt["e"]&&t.states.emphasis?e.push("emphasis"):t.hoverState===Tt["d"]&&t.states.blur&&e.push("blur"),t.useStates(e)}function e(t,e){var n=t._zr,i=n.storage,r=0;i.traverse((function(t){t.isGroup||r++})),r>e.get("hoverLayerThreshold")&&!s["a"].node&&!s["a"].worker&&e.eachSeries((function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.group.traverse((function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)}))}}))}function n(t,e){var n=t.get("blendMode")||null;e.group.traverse((function(t){t.isGroup||(t.style.blend=n),t.eachPendingDisplayable&&t.eachPendingDisplayable((function(t){t.style.blend=n}))}))}function r(t,e){t.preventAutoZ||l(e.group,t.get("z")||0,t.get("zlevel")||0,-1/0)}function l(t,e,n,i){var r=t.getTextContent(),o=t.getTextGuideLine(),a=t.isGroup;if(a)for(var s=t.childrenRef(),c=0;c<s.length;c++)i=Math.max(l(s[c],e,n,i),i);else t.z=e,t.zlevel=n,i=Math.max(t.z2,i);if(r&&(r.z=e,r.zlevel=n,isFinite(i)&&(r.z2=i+2)),o){var u=t.textGuideLineConfig;o.z=e,o.zlevel=n,isFinite(i)&&(o.z2=i+(u&&u.showAbove?1:-1))}return i}function c(t,e){e.group.traverse((function(t){if(!xt["d"](t)){var e=t.getTextContent(),n=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),e&&e.stateTransition&&(e.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}}))}function h(e,n){var i=e.getModel("stateAnimation"),r=e.isAnimationEnabled(),o=i.get("duration"),a=o>0?{duration:o,delay:i.get("delay"),easing:i.get("easing")}:null;n.group.traverse((function(e){if(e.states&&e.states.emphasis){if(xt["d"](e))return;if(e instanceof wt["b"]&&Object(Tt["E"])(e),e.__dirty){var n=e.prevStates;n&&e.useStates(n)}if(r){e.stateTransition=a;var i=e.getTextContent(),o=e.getTextGuideLine();i&&(i.stateTransition=a),o&&(o.stateTransition=a)}e.__dirty&&t(e)}}))}on=function(t){var e=t._scheduler;e.restorePipelines(t._model),e.prepareStageTasks(),an(t,!0),an(t,!1),e.plan()},an=function(t,e){for(var n=t._model,i=t._scheduler,r=e?t._componentsViews:t._chartsViews,o=e?t._componentsMap:t._chartsMap,a=t._zr,s=t._api,l=0;l<r.length;l++)r[l].__alive=!1;function c(t){var l=t.__requireNewView;t.__requireNewView=!1;var c="_ec_"+t.id+"_"+t.type,u=!l&&o[c];if(!u){var h=Object(ge["f"])(t.type),f=e?vt["a"].getClass(h.main,h.sub):yt["a"].getClass(h.sub);0,u=new f,u.init(n,s),o[c]=u,r.push(u),a.add(u.group)}t.__viewId=u.__id=c,u.__alive=!0,u.__model=t,u.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!e&&i.prepareView(u,t,n,s)}e?n.eachComponent((function(t,e){"series"!==t&&c(e)})):n.eachSeries(c);for(l=0;l<r.length;){var u=r[l];u.__alive?l++:(!e&&u.renderTask.dispose(),a.remove(u.group),u.dispose(n,s),r.splice(l,1),o[u.__id]===u&&delete o[u.__id],u.__id=u.group.__ecComponentInfo=null)}},sn=function(t,e,n,i,r){var a=t._model;if(a.setUpdatePayload(n),i){var s={};s[i+"Id"]=n[i+"Id"],s[i+"Index"]=n[i+"Index"],s[i+"Name"]=n[i+"Name"];var l={mainType:i,query:s};r&&(l.subType=r);var c,h=n.excludeSeriesId;null!=h&&(c=Object(o["g"])(),Object(o["k"])(u["r"](h),(function(t){var e=u["e"](t,null);null!=e&&c.set(e,!0)}))),Object(Tt["z"])(n)&&Object(Tt["k"])(t._api),a&&a.eachComponent(l,(function(e){var i=c&&null!==c.get(e.id);if(!i)if(Object(Tt["z"])(n))if(e instanceof mt["b"])n.type!==Tt["c"]||n.notBlur||Object(Tt["m"])(e,n,t._api);else{var r=Object(Tt["t"])(e.mainType,e.componentIndex,n.name,t._api),a=r.focusSelf,s=r.dispatchers;n.type===Tt["c"]&&a&&!n.notBlur&&Object(Tt["l"])(e.mainType,e.componentIndex,t._api),s&&Object(o["k"])(s,(function(t){n.type===Tt["c"]?Object(Tt["r"])(t):Object(Tt["C"])(t)}))}else Object(Tt["A"])(n)&&e instanceof mt["b"]&&(Object(Tt["J"])(e,n,t._api),Object(Tt["K"])(e),wn(t))}),t),a&&a.eachComponent(l,(function(e){var n=c&&null!==c.get(e.id);n||f(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])}),t)}else Object(o["k"])([].concat(t._componentsViews).concat(t._chartsViews),f);function f(i){i&&i.__alive&&i[e]&&i[e](i.__model,a,t._api,n)}},ln={prepareAndUpdate:function(t){on(this),ln.update.call(this,t,{optionChanged:null!=t.newOption})},update:function(t,e){var n=this._model,i=this._api,r=this._zr,o=this._coordSysMgr,l=this._scheduler;if(n){n.setUpdatePayload(t),l.restoreData(n,t),l.performSeriesTasks(n),o.create(n,i),l.performDataProcessorTasks(n,t),un(this,n),o.update(n,i),mn(n),l.performVisualTasks(n,t),vn(this,n,i,t,e);var c=n.get("backgroundColor")||"transparent",u=n.get("darkMode");if(s["a"].canvasSupported)r.setBackgroundColor(c),null!=u&&"auto"!==u&&r.setDarkMode(u);else{var h=a["parse"](c);c=a["stringify"](h,"rgb"),0===h[3]&&(c="transparent")}Ae.trigger("afterupdate",n,i)}},updateTransform:function(t){var e=this,n=this._model,i=this._api;if(n){n.setUpdatePayload(t);var r=[];n.eachComponent((function(o,a){if("series"!==o){var s=e.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,n,i,t);l&&l.update&&r.push(s)}else r.push(s)}}));var a=Object(o["g"])();n.eachSeries((function(r){var o=e._chartsMap[r.__viewId];if(o.updateTransform){var s=o.updateTransform(r,n,i,t);s&&s.update&&a.set(r.uid,1)}else a.set(r.uid,1)})),mn(n),this._scheduler.performVisualTasks(n,t,{setDirty:!0,dirtyMap:a}),_n(this,n,i,t,{},a),Ae.trigger("afterupdate",n,i)}},updateView:function(t){var e=this._model;e&&(e.setUpdatePayload(t),yt["a"].markUpdateMethod(t,"updateView"),mn(e),this._scheduler.performVisualTasks(e,t,{setDirty:!0}),vn(this,e,this._api,t,{}),Ae.trigger("afterupdate",e,this._api))},updateVisual:function(t){var e=this,n=this._model;n&&(n.setUpdatePayload(t),n.eachSeries((function(t){t.getData().clearAllVisual()})),yt["a"].markUpdateMethod(t,"updateVisual"),mn(n),this._scheduler.performVisualTasks(n,t,{visualType:"visual",setDirty:!0}),n.eachComponent((function(i,r){if("series"!==i){var o=e.getViewOfComponentModel(r);o&&o.__alive&&o.updateVisual(r,n,e._api,t)}})),n.eachSeries((function(i){var r=e._chartsMap[i.__viewId];r.updateVisual(i,n,e._api,t)})),Ae.trigger("afterupdate",n,this._api))},updateLayout:function(t){ln.update.call(this,t)}},cn=function(t,e,n,i){if(t._disposed)Dn(t.id);else{for(var r,o=t._model,a=t._coordSysMgr.getCoordinateSystems(),s=u["s"](o,n),l=0;l<a.length;l++){var c=a[l];if(c[e]&&null!=(r=c[e](o,s,i)))return r}0}},un=function(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries((function(t){i.updateStreamModes(t,n[t.__viewId])}))},hn=function(t,e){var n=this,i=this.getModel(),r=t.type,a=t.escapeConnect,s=En[r],l=s.actionInfo,c=(l.update||"update").split(":"),h=c.pop(),f=null!=c[0]&&Object(ge["f"])(c[0]);this[Ye]=!0;var d=[t],p=!1;t.batch&&(p=!0,d=Object(o["H"])(t.batch,(function(e){return e=Object(o["j"])(Object(o["m"])({},e),t),e.batch=null,e})));var g,m=[],v=Object(Tt["A"])(t),y=Object(Tt["z"])(t);if(Object(o["k"])(d,(function(e){if(g=s.action(e,n._model,n._api),g=g||Object(o["m"])({},e),g.type=l.event||g.type,m.push(g),y){var i=u["t"](t),r=i.queryOptionMap,a=i.mainTypeSpecified,c=a?r.keys()[0]:"series";sn(n,h,e,c),wn(n)}else v?(sn(n,h,e,"series"),wn(n)):f&&sn(n,h,e,f.main,f.sub)})),"none"===h||y||v||f||(this[qe]?(on(this),ln.update.call(this,t),this[qe]=null):ln[h].call(this,t)),g=p?{type:l.event||r,escapeConnect:a,batch:m}:m[0],this[Ye]=!1,!e){var _=this._messageCenter;if(_.trigger(g.type,g),v){var b={type:"selectchanged",escapeConnect:a,selected:Object(Tt["u"])(i),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};_.trigger(b.type,b)}}},fn=function(t){var e=this._pendingActions;while(e.length){var n=e.shift();hn.call(this,n,t)}},dn=function(t){!t&&this.trigger("updated")},pn=function(t,e){t.on("rendered",(function(n){e.trigger("rendered",n),!t.animation.isFinished()||e[qe]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")}))},gn=function(t,e){t.on("mouseover",(function(t){var n=t.target,i=Object(Se["a"])(n,Tt["y"]);i&&(Object(Tt["x"])(i,t,e._api),wn(e))})).on("mouseout",(function(t){var n=t.target,i=Object(Se["a"])(n,Tt["y"]);i&&(Object(Tt["w"])(i,t,e._api),wn(e))})).on("click",(function(t){var n=t.target,i=Object(Se["a"])(n,(function(t){return null!=Object(St["a"])(t).dataIndex}),!0);if(i){var r=i.selected?"unselect":"select",o=Object(St["a"])(i);e._api.dispatchAction({type:r,dataType:o.dataType,dataIndexInside:o.dataIndex,seriesIndex:o.seriesIndex,isFromClick:!0})}}))},mn=function(t){t.clearColorPalette(),t.eachSeries((function(t){t.clearColorPalette()}))},vn=function(t,e,n,i,r){yn(t,e,n,i,r),Object(o["k"])(t._chartsViews,(function(t){t.__alive=!1})),_n(t,e,n,i,r),Object(o["k"])(t._chartsViews,(function(t){t.__alive||t.remove(e,n)}))},yn=function(t,e,n,i,a,s){Object(o["k"])(s||t._componentsViews,(function(t){var o=t.__model;c(o,t),t.render(o,e,n,i),r(o,t),h(o,t)}))},_n=function(t,i,a,s,l,u){var f=t._scheduler;l=Object(o["m"])(l||{},{updatedSeries:i.getSeries()}),Ae.trigger("series:beforeupdate",i,a,l);var d=!1;i.eachSeries((function(e){var i=t._chartsMap[e.__viewId];i.__alive=!0;var r=i.renderTask;f.updatePayload(r,s),c(e,i),u&&u.get(e.uid)&&r.dirty(),r.perform(f.getPerformArgs(r))&&(d=!0),i.group.silent=!!e.get("silent"),n(e,i),Object(Tt["K"])(e)})),f.unfinished=d||f.unfinished,Ae.trigger("series:layoutlabels",i,a,l),Ae.trigger("series:transition",i,a,l),i.eachSeries((function(e){var n=t._chartsMap[e.__viewId];r(e,n),h(e,n)})),e(t,i),Ae.trigger("series:afterupdate",i,a,l)},wn=function(t){t[Ze]=!0,t.getZr().wakeUp()},Sn=function(e){e[Ze]&&(e.getZr().storage.traverse((function(e){xt["d"](e)||t(e)})),e[Ze]=!1)},bn=function(t){return new(function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Object(i["b"])(n,e),n.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},n.prototype.getComponentByElement=function(e){while(e){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}},n.prototype.enterEmphasis=function(e,n){Object(Tt["r"])(e,n),wn(t)},n.prototype.leaveEmphasis=function(e,n){Object(Tt["C"])(e,n),wn(t)},n.prototype.enterBlur=function(e){Object(Tt["q"])(e),wn(t)},n.prototype.leaveBlur=function(e){Object(Tt["B"])(e),wn(t)},n.prototype.enterSelect=function(e){Object(Tt["s"])(e),wn(t)},n.prototype.leaveSelect=function(e){Object(Tt["D"])(e),wn(t)},n.prototype.getModel=function(){return t.getModel()},n.prototype.getViewOfComponentModel=function(e){return t.getViewOfComponentModel(e)},n.prototype.getViewOfSeriesModel=function(e){return t.getViewOfSeriesModel(e)},n}(k))(t)},xn=function(t){function e(t,e){for(var n=0;n<t.length;n++){var i=t[n];i[$e]=e}}Object(o["k"])(In,(function(n,i){t._messageCenter.on(i,(function(n){if(Bn[t.group]&&t[$e]!==Je){if(n&&n.escapeConnect)return;var i=t.makeActionFromEvent(n),r=[];Object(o["k"])(Nn,(function(e){e!==t&&e.group===t.group&&r.push(e)})),e(r,Je),Object(o["k"])(r,(function(t){t[$e]!==Qe&&t.dispatchAction(i)})),e(r,tn)}}))}))}}(),e}(c["a"]),Mn=Cn.prototype;Mn.on=en("on"),Mn.off=en("off"),Mn.one=function(t,e,n){var i=this;function r(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];e&&e.apply&&e.apply(this,n),i.off(t,r)}Object(w["a"])("ECharts#one is deprecated."),this.on.call(this,t,r,n)};var An=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Dn(t){0}var En={},In={},Pn=[],Ln=[],kn=[],jn={},Rn={},Nn={},Bn={},Fn=+new Date-0,zn=(new Date,"_echarts_instance_");function Vn(t,e,n){var i=Hn(t);if(i)return i;var r=new Cn(t,e,n);return r.id="ec_"+Fn++,Nn[r.id]=r,u["w"](t,zn,r.id),xn(r),Ae.trigger("afterinit",r),r}function Hn(t){return Nn[u["g"](t,zn)]}function Gn(t,e){jn[t]=e}function Un(t){Object(o["r"])(Ln,t)<0&&Ln.push(t)}function Wn(t,e){ei(Pn,t,e,ke)}function Xn(t){qn("afterinit",t)}function Yn(t){qn("afterupdate",t)}function qn(t,e){Ae.on(t,e)}function Zn(t,e,n){"function"===typeof e&&(n=e,e="");var i=Object(o["A"])(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,In[e]||(Object(o["b"])(Ke.test(i)&&Ke.test(e)),En[i]||(En[i]={action:n,actionInfo:t}),In[e]=i)}function Kn(t,e){j["a"].register(t,e)}function $n(t){var e=j["a"].get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()}function Jn(t,e){ei(kn,t,e,Re,"layout")}function Qn(t,e){ei(kn,t,e,Fe,"visual")}var ti=[];function ei(t,e,n,i,r){if((Object(o["w"])(e)||Object(o["A"])(e))&&(n=e,e=i),!(Object(o["r"])(ti,n)>=0)){ti.push(n);var a=ae.wrapStageHandler(n,r);a.__prio=e,a.__raw=n,t.push(a)}}function ni(t,e){Rn[t]=e}function ii(t,e,n){Ce["a"].registerMap(t,e,n)}function ri(t){return Ce["a"].getMapForUser(t)}var oi=xe["b"];Qn(Be,kt),Qn(Ve,Rt),Qn(Ve,Nt),Qn(Be,ve),Qn(Ve,ye),Qn(We,Oe),Un(ft),Wn(Pe,pt),ni("default",Ht),Zn({type:Tt["c"],event:Tt["c"],update:Tt["c"]},o["L"]),Zn({type:Tt["b"],event:Tt["b"],update:Tt["b"]},o["L"]),Zn({type:Tt["f"],event:Tt["f"],update:Tt["f"]},o["L"]),Zn({type:Tt["i"],event:Tt["i"],update:Tt["i"]},o["L"]),Zn({type:Tt["h"],event:Tt["h"],update:Tt["h"]},o["L"]),Gn("light",le),Gn("dark",pe)},"1bf2":function(t,e,n){var i=n("23e7"),r=n("56ef");i({target:"Reflect",stat:!0},{ownKeys:r})},"1c0b":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}},"1c3c":function(t,e,n){var i=n("9e69"),r=n("2474"),o=n("9638"),a=n("a2be"),s=n("edfa"),l=n("ac41"),c=1,u=2,h="[object Boolean]",f="[object Date]",d="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",_="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",w=i?i.prototype:void 0,S=w?w.valueOf:void 0;function T(t,e,n,i,w,T,O){switch(n){case x:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!T(new r(t),new r(e)));case h:case f:case g:return o(+t,+e);case d:return t.name==e.name&&t.message==e.message;case m:case y:return t==e+"";case p:var C=s;case v:var M=i&c;if(C||(C=l),t.size!=e.size&&!M)return!1;var A=O.get(t);if(A)return A==e;i|=u,O.set(t,e);var D=a(C(t),C(e),i,w,T,O);return O["delete"](t),D;case _:if(S)return S.call(t)==S.call(e)}return!1}t.exports=T},"1c7e":function(t,e,n){var i=n("b622"),r=i("iterator"),o=!1;try{var a=0,s={next:function(){return{done:!!a++}},return:function(){o=!0}};s[r]=function(){return this},Array.from(s,(function(){throw 2}))}catch(l){}t.exports=function(t,e){if(!e&&!o)return!1;var n=!1;try{var i={};i[r]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(l){}return n}},"1cdc":function(t,e,n){var i=n("342f");t.exports=/(iphone|ipod|ipad).*applewebkit/i.test(i)},"1cec":function(t,e,n){var i=n("0b07"),r=n("2b3e"),o=i(r,"Promise");t.exports=o},"1d2b":function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},"1d80":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on "+t);return t}},"1dde":function(t,e,n){var i=n("d039"),r=n("b622"),o=n("2d00"),a=r("species");t.exports=function(t){return o>=51||!i((function(){var e=[],n=e.constructor={};return n[a]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"1efc":function(t,e){function n(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}t.exports=n},"1f39":function(t,e,n){"use strict";var i=n("6d8b"),r={},o=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,e){var n=[];i["k"](r,(function(i,r){var o=i.create(t,e);n=n.concat(o||[])})),this._coordinateSystems=n},t.prototype.update=function(t,e){i["k"](this._coordinateSystems,(function(n){n.update&&n.update(t,e)}))},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,e){r[t]=e},t.get=function(t){return r[t]},t}();e["a"]=o},"1fb5":function(t,e,n){"use strict";e.byteLength=u,e.toByteArray=f,e.fromByteArray=g;for(var i=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function c(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");-1===n&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function u(t){var e=c(t),n=e[0],i=e[1];return 3*(n+i)/4-i}function h(t,e,n){return 3*(e+n)/4-n}function f(t){var e,n,i=c(t),a=i[0],s=i[1],l=new o(h(t,a,s)),u=0,f=s>0?a-4:a;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[u++]=255&e),1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l}function d(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function p(t,e,n){for(var i,r=[],o=e;o<n;o+=3)i=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(255&t[o+2]),r.push(d(i));return r.join("")}function g(t){for(var e,n=t.length,r=n%3,o=[],a=16383,s=0,l=n-r;s<l;s+=a)o.push(p(t,s,s+a>l?l:s+a));return 1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),o.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},"1fc8":function(t,e,n){var i=n("4245");function r(t,e){var n=i(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}t.exports=r},2:function(t,e){},2023:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i=function(){function t(){}return t.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},t.prototype.getCoordSysModel=function(){},t}()},"20c8":function(t,e,n){"use strict";n.d(e,"b",(function(){return C}));var i=n("401b"),r=n("9850"),o=n("2cf4"),a=n("e263"),s=n("4a3f"),l={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},c=[],u=[],h=[],f=[],d=[],p=[],g=Math.min,m=Math.max,v=Math.cos,y=Math.sin,_=Math.sqrt,b=Math.abs,x=Math.PI,w=2*x,S="undefined"!==typeof Float32Array,T=[];function O(t){var e=Math.round(t/x*1e8)/1e8;return e%2*x}function C(t,e){var n=O(t[0]);n<0&&(n+=w);var i=n-t[0],r=t[1];r+=i,!e&&r-n>=w?r=n+w:e&&n-r>=w?r=n-w:!e&&n>r?r=n+(w-O(n-r)):e&&n<r&&(r=n-(w-O(r-n))),t[0]=n,t[1]=r}var M=function(){function t(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(t,e,n){n=n||0,n>0&&(this._ux=b(n/o["e"]/t)||0,this._uy=b(n/o["e"]/e)||0)},t.prototype.setDPR=function(t){this.dpr=t},t.prototype.setContext=function(t){this._ctx=t},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(l.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},t.prototype.lineTo=function(t,e){var n=b(t-this._xi),i=b(e-this._yi),r=n>this._ux||i>this._uy;if(this.addData(l.L,t,e),this._ctx&&r&&(this._needsDash?this._dashedLineTo(t,e):this._ctx.lineTo(t,e)),r)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){return this._drawPendingPt(),this.addData(l.C,t,e,n,i,r,o),this._ctx&&(this._needsDash?this._dashedBezierTo(t,e,n,i,r,o):this._ctx.bezierCurveTo(t,e,n,i,r,o)),this._xi=r,this._yi=o,this},t.prototype.quadraticCurveTo=function(t,e,n,i){return this._drawPendingPt(),this.addData(l.Q,t,e,n,i),this._ctx&&(this._needsDash?this._dashedQuadraticTo(t,e,n,i):this._ctx.quadraticCurveTo(t,e,n,i)),this._xi=n,this._yi=i,this},t.prototype.arc=function(t,e,n,i,r,o){this._drawPendingPt(),T[0]=i,T[1]=r,C(T,o),i=T[0],r=T[1];var a=r-i;return this.addData(l.A,t,e,n,n,i,a,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=v(r)*n+t,this._yi=y(r)*n+e,this},t.prototype.arcTo=function(t,e,n,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},t.prototype.rect=function(t,e,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,i),this.addData(l.R,t,e,n,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(l.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&(this._needsDash&&this._dashedLineTo(e,n),t.closePath()),this._xi=e,this._yi=n,this},t.prototype.fill=function(t){t&&t.fill(),this.toStatic()},t.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},t.prototype.setLineDash=function(t){if(t instanceof Array){this._lineDash=t,this._dashIdx=0;for(var e=0,n=0;n<t.length;n++)e+=t[n];this._dashSum=e,this._needsDash=!0}else this._lineDash=null,this._needsDash=!1;return this},t.prototype.setLineDashOffset=function(t){return this._dashOffset=t,this},t.prototype.len=function(){return this._len},t.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!S||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},t.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();S&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[i++]=o[a];this._len=i},t.prototype.addData=function(t,e,n,i,r,o,a,s,l){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var u=0;u<arguments.length;u++)c[this._len++]=arguments[u]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},t.prototype._dashedLineTo=function(t,e){var n,i,r=this._dashSum,o=this._lineDash,a=this._ctx,s=this._dashOffset,l=this._xi,c=this._yi,u=t-l,h=e-c,f=_(u*u+h*h),d=l,p=c,v=o.length;u/=f,h/=f,s<0&&(s=r+s),s%=r,d-=s*u,p-=s*h;while(u>0&&d<=t||u<0&&d>=t||0===u&&(h>0&&p<=e||h<0&&p>=e))i=this._dashIdx,n=o[i],d+=u*n,p+=h*n,this._dashIdx=(i+1)%v,u>0&&d<l||u<0&&d>l||h>0&&p<c||h<0&&p>c||a[i%2?"moveTo":"lineTo"](u>=0?g(d,t):m(d,t),h>=0?g(p,e):m(p,e));u=d-t,h=p-e,this._dashOffset=-_(u*u+h*h)},t.prototype._dashedBezierTo=function(t,e,n,i,r,o){var a,l,c,u,h,f=this._ctx,d=this._dashSum,p=this._dashOffset,g=this._lineDash,m=this._xi,v=this._yi,y=0,b=this._dashIdx,x=g.length,w=0;for(p<0&&(p=d+p),p%=d,a=0;a<1;a+=.1)l=Object(s["a"])(m,t,n,r,a+.1)-Object(s["a"])(m,t,n,r,a),c=Object(s["a"])(v,e,i,o,a+.1)-Object(s["a"])(v,e,i,o,a),y+=_(l*l+c*c);for(;b<x;b++)if(w+=g[b],w>p)break;a=(w-p)/y;while(a<=1)u=Object(s["a"])(m,t,n,r,a),h=Object(s["a"])(v,e,i,o,a),b%2?f.moveTo(u,h):f.lineTo(u,h),a+=g[b]/y,b=(b+1)%x;b%2!==0&&f.lineTo(r,o),l=r-u,c=o-h,this._dashOffset=-_(l*l+c*c)},t.prototype._dashedQuadraticTo=function(t,e,n,i){var r=n,o=i;n=(n+2*t)/3,i=(i+2*e)/3,t=(this._xi+2*t)/3,e=(this._yi+2*e)/3,this._dashedBezierTo(t,e,n,i,r,o)},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,S&&this._len>11&&(this.data=new Float32Array(t)))}},t.prototype.getBoundingRect=function(){h[0]=h[1]=d[0]=d[1]=Number.MAX_VALUE,f[0]=f[1]=p[0]=p[1]=-Number.MAX_VALUE;var t,e=this.data,n=0,o=0,s=0,c=0;for(t=0;t<this._len;){var u=e[t++],g=1===t;switch(g&&(n=e[t],o=e[t+1],s=n,c=o),u){case l.M:n=s=e[t++],o=c=e[t++],d[0]=s,d[1]=c,p[0]=s,p[1]=c;break;case l.L:Object(a["c"])(n,o,e[t],e[t+1],d,p),n=e[t++],o=e[t++];break;case l.C:Object(a["b"])(n,o,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],d,p),n=e[t++],o=e[t++];break;case l.Q:Object(a["e"])(n,o,e[t++],e[t++],e[t],e[t+1],d,p),n=e[t++],o=e[t++];break;case l.A:var m=e[t++],_=e[t++],b=e[t++],x=e[t++],w=e[t++],S=e[t++]+w;t+=1;var T=!e[t++];g&&(s=v(w)*b+m,c=y(w)*x+_),Object(a["a"])(m,_,b,x,w,S,T,d,p),n=v(S)*b+m,o=y(S)*x+_;break;case l.R:s=n=e[t++],c=o=e[t++];var O=e[t++],C=e[t++];Object(a["c"])(s,c,s+O,c+C,d,p);break;case l.Z:n=s,o=c;break}i["l"](h,h,d),i["k"](f,f,p)}return 0===t&&(h[0]=h[1]=f[0]=f[1]=0),new r["a"](h[0],h[1],f[0]-h[0],f[1]-h[1])},t.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,i=this._uy,r=0,o=0,a=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,h=0,f=0,d=0;d<e;){var p=t[d++],_=1===d;_&&(r=t[d],o=t[d+1],a=r,c=o);var x=-1;switch(p){case l.M:r=a=t[d++],o=c=t[d++];break;case l.L:var S=t[d++],T=t[d++],O=S-r,C=T-o;(b(O)>n||b(C)>i||d===e-1)&&(x=Math.sqrt(O*O+C*C),r=S,o=T);break;case l.C:var M=t[d++],A=t[d++],D=(S=t[d++],T=t[d++],t[d++]),E=t[d++];x=Object(s["d"])(r,o,M,A,S,T,D,E,10),r=D,o=E;break;case l.Q:M=t[d++],A=t[d++],S=t[d++],T=t[d++];x=Object(s["k"])(r,o,M,A,S,T,10),r=S,o=T;break;case l.A:var I=t[d++],P=t[d++],L=t[d++],k=t[d++],j=t[d++],R=t[d++],N=R+j;d+=1;t[d++];_&&(a=v(j)*L+I,c=y(j)*k+P),x=m(L,k)*g(w,Math.abs(R)),r=v(N)*L+I,o=y(N)*k+P;break;case l.R:a=r=t[d++],c=o=t[d++];var B=t[d++],F=t[d++];x=2*B+2*F;break;case l.Z:O=a-r,C=c-o;x=Math.sqrt(O*O+C*C),r=a,o=c;break}x>=0&&(u[f++]=x,h+=x)}return this._pathLen=h,h},t.prototype.rebuildPath=function(t,e){var n,i,r,o,a,h,f,d,p,_,x,w=this.data,S=this._ux,T=this._uy,O=this._len,C=e<1,M=0,A=0,D=0;if(!C||(this._pathSegLen||this._calculateLength(),f=this._pathSegLen,d=this._pathLen,p=e*d,p))t:for(var E=0;E<O;){var I=w[E++],P=1===E;switch(P&&(r=w[E],o=w[E+1],n=r,i=o),I!==l.L&&D>0&&(t.lineTo(_,x),D=0),I){case l.M:n=r=w[E++],i=o=w[E++],t.moveTo(r,o);break;case l.L:a=w[E++],h=w[E++];var L=b(a-r),k=b(h-o);if(L>S||k>T){if(C){var j=f[A++];if(M+j>p){var R=(p-M)/j;t.lineTo(r*(1-R)+a*R,o*(1-R)+h*R);break t}M+=j}t.lineTo(a,h),r=a,o=h,D=0}else{var N=L*L+k*k;N>D&&(_=a,x=h,D=N)}break;case l.C:var B=w[E++],F=w[E++],z=w[E++],V=w[E++],H=w[E++],G=w[E++];if(C){j=f[A++];if(M+j>p){R=(p-M)/j;Object(s["g"])(r,B,z,H,R,c),Object(s["g"])(o,F,V,G,R,u),t.bezierCurveTo(c[1],u[1],c[2],u[2],c[3],u[3]);break t}M+=j}t.bezierCurveTo(B,F,z,V,H,G),r=H,o=G;break;case l.Q:B=w[E++],F=w[E++],z=w[E++],V=w[E++];if(C){j=f[A++];if(M+j>p){R=(p-M)/j;Object(s["n"])(r,B,z,R,c),Object(s["n"])(o,F,V,R,u),t.quadraticCurveTo(c[1],u[1],c[2],u[2]);break t}M+=j}t.quadraticCurveTo(B,F,z,V),r=z,o=V;break;case l.A:var U=w[E++],W=w[E++],X=w[E++],Y=w[E++],q=w[E++],Z=w[E++],K=w[E++],$=!w[E++],J=X>Y?X:Y,Q=b(X-Y)>.001,tt=q+Z,et=!1;if(C){j=f[A++];M+j>p&&(tt=q+Z*(p-M)/j,et=!0),M+=j}if(Q&&t.ellipse?t.ellipse(U,W,X,Y,K,q,tt,$):t.arc(U,W,J,q,tt,$),et)break t;P&&(n=v(q)*X+U,i=y(q)*Y+W),r=v(tt)*X+U,o=y(tt)*Y+W;break;case l.R:n=r=w[E],i=o=w[E+1],a=w[E++],h=w[E++];var nt=w[E++],it=w[E++];if(C){j=f[A++];if(M+j>p){var rt=p-M;t.moveTo(a,h),t.lineTo(a+g(rt,nt),h),rt-=nt,rt>0&&t.lineTo(a+nt,h+g(rt,it)),rt-=it,rt>0&&t.lineTo(a+m(nt-rt,0),h+it),rt-=nt,rt>0&&t.lineTo(a,h+m(it-rt,0));break t}M+=j}t.rect(a,h,nt,it);break;case l.Z:if(C){j=f[A++];if(M+j>p){R=(p-M)/j;t.lineTo(r*(1-R)+n*R,o*(1-R)+i*R);break t}M+=j}t.closePath(),r=n,o=i}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=l,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._needsDash=!1,e._dashOffset=0,e._dashIdx=0,e._dashSum=0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();e["a"]=M},"20ec":function(t,e){function n(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}t.exports=n},"216a":function(t,e,n){"use strict";var i=n("7fae"),r=n("3842"),o=n("f876"),a=n("944e"),s=n("89e3"),l=n("e0d8"),c=n("6d8b"),u=function(t,e,n,i){while(n<i){var r=n+i>>>1;t[r][1]<e?n=r+1:i=r}return n},h=function(t){function e(e){var n=t.call(this,e)||this;return n.type="time",n}return Object(i["b"])(e,t),e.prototype.getLabel=function(t){var e=this.getSetting("useUTC");return Object(o["h"])(t.value,o["i"][Object(o["l"])(Object(o["m"])(this._minLevelUnit))]||o["i"].second,e,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,e,n){var i=this.getSetting("useUTC"),r=this.getSetting("locale");return Object(o["r"])(t,e,n,r,i)},e.prototype.getTicks=function(t){var e=this._interval,n=this._extent,i=[];if(!e)return i;i.push({value:n[0],level:0});var r=this.getSetting("useUTC"),o=b(this._minLevelUnit,this._approxInterval,r,n);return i=i.concat(o),i.push({value:n[1],level:0}),i},e.prototype.niceExtent=function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=o["a"],e[1]+=o["a"]),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-o["a"]}this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.niceTicks=function(t,e,n){t=t||10;var i=this._extent,r=i[1]-i[0];this._approxInterval=r/t,null!=e&&this._approxInterval<e&&(this._approxInterval=e),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var o=f.length,a=Math.min(u(f,this._approxInterval,0,o),o-1);this._interval=f[a][1],this._minLevelUnit=f[Math.max(a-1,0)][0]},e.prototype.parse=function(t){return"number"===typeof t?t:+r["o"](t)},e.prototype.contain=function(t){return a["a"](this.parse(t),this._extent)},e.prototype.normalize=function(t){return a["d"](this.parse(t),this._extent)},e.prototype.scale=function(t){return a["e"](t,this._extent)},e.type="time",e}(s["a"]),f=[["second",o["d"]],["minute",o["c"]],["hour",o["b"]],["quarter-day",6*o["b"]],["half-day",12*o["b"]],["day",1.2*o["a"]],["half-week",3.5*o["a"]],["week",7*o["a"]],["month",31*o["a"]],["quarter",95*o["a"]],["half-year",o["e"]/2],["year",o["e"]]];function d(t,e,n,i){var a=r["o"](e),s=r["o"](n),l=function(t){return Object(o["n"])(a,t,i)===Object(o["n"])(s,t,i)},c=function(){return l("year")},u=function(){return c()&&l("month")},h=function(){return u()&&l("day")},f=function(){return h()&&l("hour")},d=function(){return f()&&l("minute")},p=function(){return d()&&l("second")},g=function(){return p()&&l("millisecond")};switch(t){case"year":return c();case"month":return u();case"day":return h();case"hour":return f();case"minute":return d();case"second":return p();case"millisecond":return g()}}function p(t,e){return t/=o["a"],t>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function g(t){var e=30*o["a"];return t/=e,t>6?6:t>3?3:t>2?2:1}function m(t){return t/=o["b"],t>12?12:t>6?6:t>3.5?4:t>2?2:1}function v(t,e){return t/=e?o["c"]:o["d"],t>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function y(t){return r["m"](t,!0)}function _(t,e,n){var i=new Date(t);switch(Object(o["m"])(e)){case"year":case"month":i[Object(o["x"])(n)](0);case"day":i[Object(o["g"])(n)](1);case"hour":i[Object(o["p"])(n)](0);case"minute":i[Object(o["v"])(n)](0);case"second":i[Object(o["A"])(n)](0),i[Object(o["t"])(n)](0)}return i.getTime()}function b(t,e,n,i){var r=1e4,a=o["B"],s=0;function l(t,e,n,r,o,a,s){var l=new Date(e),c=e,u=l[r]();while(c<n&&c<=i[1])s.push({value:c}),u+=t,l[o](u),c=l.getTime();s.push({value:c,notAdd:!0})}function u(t,r,a){var s=[],c=!r.length;if(!d(Object(o["m"])(t),i[0],i[1],n)){c&&(r=[{value:_(new Date(i[0]),t,n)},{value:i[1]}]);for(var u=0;u<r.length-1;u++){var h=r[u].value,f=r[u+1].value;if(h!==f){var b=void 0,x=void 0,w=void 0,S=!1;switch(t){case"year":b=Math.max(1,Math.round(e/o["a"]/365)),x=Object(o["j"])(n),w=Object(o["k"])(n);break;case"half-year":case"quarter":case"month":b=g(e),x=Object(o["w"])(n),w=Object(o["x"])(n);break;case"week":case"half-week":case"day":b=p(e,31),x=Object(o["f"])(n),w=Object(o["g"])(n),S=!0;break;case"half-day":case"quarter-day":case"hour":b=m(e),x=Object(o["o"])(n),w=Object(o["p"])(n);break;case"minute":b=v(e,!0),x=Object(o["u"])(n),w=Object(o["v"])(n);break;case"second":b=v(e,!1),x=Object(o["z"])(n),w=Object(o["A"])(n);break;case"millisecond":b=y(e),x=Object(o["s"])(n),w=Object(o["t"])(n);break}l(b,h,f,x,w,S,s),"year"===t&&a.length>1&&0===u&&a.unshift({value:a[0].value-b})}}for(u=0;u<s.length;u++)a.push(s[u]);return s}}for(var h=[],f=[],b=0,x=0,w=0;w<a.length&&s++<r;++w){var S=Object(o["m"])(a[w]);if(Object(o["q"])(a[w])){u(a[w],h[h.length-1]||[],f);var T=a[w+1]?Object(o["m"])(a[w+1]):null;if(S!==T){if(f.length){x=b,f.sort((function(t,e){return t.value-e.value}));for(var O=[],C=0;C<f.length;++C){var M=f[C].value;0!==C&&f[C-1].value===M||(O.push(f[C]),M>=i[0]&&M<=i[1]&&b++)}var A=(i[1]-i[0])/e;if(b>1.5*A&&x>A/1.5)break;if(h.push(O),b>A||t===a[w])break}f=[]}}}var D=Object(c["n"])(Object(c["H"])(h,(function(t){return Object(c["n"])(t,(function(t){return t.value>=i[0]&&t.value<=i[1]&&!t.notAdd}))})),(function(t){return t.length>0})),E=[],I=D.length-1;for(w=0;w<D.length;++w)for(var P=D[w],L=0;L<P.length;++L)E.push({value:P[L].value,level:I-w});E.sort((function(t,e){return t.value-e.value}));var k=[];for(w=0;w<E.length;++w)0!==w&&E[w].value===E[w-1].value||k.push(E[w]);return k}l["a"].registerClass(h),e["a"]=h},"217c":function(t,e,n){"use strict";n.d(e,"c",(function(){return h})),n.d(e,"b",(function(){return g})),n.d(e,"e",(function(){return w})),n.d(e,"d",(function(){return S})),n.d(e,"a",(function(){return T}));var i=n("eda2"),r=n("6d8b"),o=n("b7d9"),a=n("3842"),s="line-height:1";function l(t,e){var n=t.color||"#6e7079",r=t.fontSize||12,o=t.fontWeight||"400",a=t.color||"#464646",s=t.fontSize||14,l=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+Object(i["d"])(r+"")+"px;color:"+Object(i["d"])(n)+";font-weight:"+Object(i["d"])(o+""),valueStyle:"font-size:"+Object(i["d"])(s+"")+"px;color:"+Object(i["d"])(a)+";font-weight:"+Object(i["d"])(l+"")}:{nameStyle:{fontSize:r,fill:n,fontWeight:o},valueStyle:{fontSize:s,fill:a,fontWeight:l}}}var c=[0,10,20,30],u=["","\n","\n\n","\n\n\n"];function h(t,e){return e.type=t,e}function f(t){return Object(r["q"])(d,t.type)&&d[t.type]}var d={section:{planLayout:function(t){var e=t.blocks.length,n=e>1||e>0&&!t.noHeader,i=0;Object(r["k"])(t.blocks,(function(t){f(t).planLayout(t);var e=t.__gapLevelBetweenSubBlocks;e>=i&&(i=e+(!n||e&&("section"!==t.type||t.noHeader)?0:1))})),t.__gapLevelBetweenSubBlocks=i},build:function(t,e,n,r){var o=e.noHeader,a=m(e),c=p(t,e,o?n:a.html,r);if(o)return c;var u=Object(i["i"])(e.header,"ordinal",t.useUTC),h=l(r,t.renderMode).nameStyle;return"richText"===t.renderMode?b(t,u,h)+a.richText+c:v('<div style="'+h+";"+s+';">'+Object(i["d"])(u)+"</div>"+c,n)}},nameValue:{planLayout:function(t){t.__gapLevelBetweenSubBlocks=0},build:function(t,e,n,o){var a=t.renderMode,s=e.noName,c=e.noValue,u=!e.markerType,h=e.name,f=e.value,d=t.useUTC;if(!s||!c){var p=u?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",a),g=s?"":Object(i["i"])(h,"ordinal",d),m=e.valueType,w=c?[]:Object(r["t"])(f)?Object(r["H"])(f,(function(t,e){return Object(i["i"])(t,Object(r["t"])(m)?m[e]:m,d)})):[Object(i["i"])(f,Object(r["t"])(m)?m[0]:m,d)],S=!u||!s,T=!u&&s,O=l(o,a),C=O.nameStyle,M=O.valueStyle;return"richText"===a?(u?"":p)+(s?"":b(t,g,C))+(c?"":x(t,w,S,T,M)):v((u?"":p)+(s?"":y(g,!u,C))+(c?"":_(w,S,T,M)),n)}}}};function p(t,e,n,i){var a=[],s=e.blocks||[];Object(r["b"])(!s||Object(r["t"])(s)),s=s||[];var l=t.orderMode;if(e.sortBlocks&&l){s=s.slice();var c={valueAsc:"asc",valueDesc:"desc"};if(Object(r["q"])(c,l)){var u=new o["a"](c[l],null);s.sort((function(t,e){return u.evaluate(t.sortParam,e.sortParam)}))}else"seriesDesc"===l&&s.reverse()}var h=m(e);if(Object(r["k"])(s,(function(e,n){var r=f(e).build(t,e,n>0?h.html:0,i);null!=r&&a.push(r)})),a.length)return"richText"===t.renderMode?a.join(h.richText):v(a.join(""),n)}function g(t,e,n,i,r,o){if(t){var a=f(t);a.planLayout(t);var s={useUTC:r,renderMode:n,orderMode:i,markupStyleCreator:e};return a.build(s,t,0,o)}}function m(t){var e=t.__gapLevelBetweenSubBlocks;return{html:c[e],richText:u[e]}}function v(t,e){var n='<div style="clear:both"></div>',i="margin: "+e+"px 0 0";return'<div style="'+i+";"+s+';">'+t+n+"</div>"}function y(t,e,n){var r=e?"margin-left:2px":"";return'<span style="'+n+";"+r+'">'+Object(i["d"])(t)+"</span>"}function _(t,e,n,o){var a=n?"10px":"20px",s=e?"float:right;margin-left:"+a:"";return'<span style="'+s+";"+o+'">'+Object(r["H"])(t,(function(t){return Object(i["d"])(t)})).join("&nbsp;&nbsp;")+"</span>"}function b(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function x(t,e,n,i,r){var o=[r],a=i?10:20;return n&&o.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(e.join("  "),o)}function w(t,e){var n=t.getData().getItemVisual(e,"style"),r=n[t.visualDrawType];return Object(i["c"])(r)}function S(t,e){var n=t.get("padding");return null!=n?n:"richText"===e?[8,10]:10}var T=function(){function t(){this.richTextStyles={},this._nextStyleNameId=Object(a["i"])()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,n){var o="richText"===n?this._generateStyleName():null,a=Object(i["h"])({color:e,type:t,renderMode:n,markerId:o});return Object(r["C"])(a)?a:(this.richTextStyles[o]=a.style,a.content)},t.prototype.wrapRichTextStyle=function(t,e){var n={};Object(r["t"])(e)?Object(r["k"])(e,(function(t){return Object(r["m"])(n,t)})):Object(r["m"])(n,e);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},t}()},"21a1":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}Object.create;Object.create},2266:function(t,e,n){var i=n("825a"),r=n("e95a"),o=n("50c4"),a=n("0366"),s=n("35a1"),l=n("2a62"),c=function(t,e){this.stopped=t,this.result=e};t.exports=function(t,e,n){var u,h,f,d,p,g,m,v=n&&n.that,y=!(!n||!n.AS_ENTRIES),_=!(!n||!n.IS_ITERATOR),b=!(!n||!n.INTERRUPTED),x=a(e,v,1+y+b),w=function(t){return u&&l(u),new c(!0,t)},S=function(t){return y?(i(t),b?x(t[0],t[1],w):x(t[0],t[1])):b?x(t,w):x(t)};if(_)u=t;else{if(h=s(t),"function"!=typeof h)throw TypeError("Target is not iterable");if(r(h)){for(f=0,d=o(t.length);d>f;f++)if(p=S(t[f]),p&&p instanceof c)return p;return new c(!1)}u=h.call(t)}g=u.next;while(!(m=g.call(u)).done){try{p=S(m.value)}catch(T){throw l(u),T}if("object"==typeof p&&p&&p instanceof c)return p}return new c(!1)}},"22b4":function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("1be7"),r=n("b12f"),o=n("e887"),a=n("6cb7"),s=n("4f85"),l=n("6d8b"),c=n("697e7"),u=[],h={registerPreprocessor:i["l"],registerProcessor:i["m"],registerPostInit:i["j"],registerPostUpdate:i["k"],registerUpdateLifecycle:i["o"],registerAction:i["e"],registerCoordinateSystem:i["f"],registerLayout:i["g"],registerVisual:i["p"],registerTransform:i["n"],registerLoading:i["h"],registerMap:i["i"],PRIORITY:i["a"],ComponentModel:a["a"],ComponentView:r["a"],SeriesModel:s["b"],ChartView:o["a"],registerComponentModel:function(t){a["a"].registerClass(t)},registerComponentView:function(t){r["a"].registerClass(t)},registerSeriesModel:function(t){s["b"].registerClass(t)},registerChartView:function(t){o["a"].registerClass(t)},registerSubTypeDefaulter:function(t,e){a["a"].registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){Object(c["registerPainter"])(t,e)}};function f(t){Object(l["t"])(t)?Object(l["k"])(t,(function(t){f(t)})):Object(l["r"])(u,t)>=0||(u.push(t),Object(l["w"])(t)&&(t={install:t}),t.install(h))}},"22d1":function(t,e,n){"use strict";var i=function(){function t(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return t}(),r=function(){function t(){this.browser=new i,this.node=!1,this.wxa=!1,this.worker=!1,this.canvasSupported=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1}return t}(),o=new r;function a(t,e){var n=e.browser,i=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);i&&(n.firefox=!0,n.version=i[1]),r&&(n.ie=!0,n.version=r[1]),o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18),a&&(n.weChat=!0),e.canvasSupported=!!document.createElement("canvas").getContext,e.svgSupported="undefined"!==typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported="undefined"!==typeof document;var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}"object"===typeof wx&&"function"===typeof wx.getSystemInfoSync?(o.wxa=!0,o.canvasSupported=!0,o.touchEventsSupported=!0):"undefined"===typeof document&&"undefined"!==typeof self?(o.worker=!0,o.canvasSupported=!0):"undefined"===typeof navigator?(o.node=!0,o.canvasSupported=!0,o.svgSupported=!0):a(navigator.userAgent,o),e["a"]=o},2306:function(t,e,n){"use strict";n.r(e),n.d(e,"extendShape",(function(){return j})),n.d(e,"extendPath",(function(){return N})),n.d(e,"registerShape",(function(){return B})),n.d(e,"getShapeClass",(function(){return F})),n.d(e,"makePath",(function(){return z})),n.d(e,"makeImage",(function(){return V})),n.d(e,"mergePath",(function(){return G})),n.d(e,"resizePath",(function(){return U})),n.d(e,"subPixelOptimizeLine",(function(){return W})),n.d(e,"subPixelOptimizeRect",(function(){return X})),n.d(e,"subPixelOptimize",(function(){return Y})),n.d(e,"getTransform",(function(){return q})),n.d(e,"applyTransform",(function(){return Z})),n.d(e,"transformDirection",(function(){return K})),n.d(e,"groupTransition",(function(){return Q})),n.d(e,"clipPointsByRect",(function(){return tt})),n.d(e,"clipRectByRect",(function(){return et})),n.d(e,"createIcon",(function(){return nt})),n.d(e,"linePolygonIntersect",(function(){return it})),n.d(e,"lineLineIntersect",(function(){return rt})),n.d(e,"setTooltipConfig",(function(){return st}));var i=n("342d"),r=n("1687"),o=n("401b"),a=n("cbe5");n.d(e,"Path",(function(){return a["b"]}));var s=n("8582"),l=n("0da8");n.d(e,"Image",(function(){return l["a"]}));var c=n("2dc5");n.d(e,"Group",(function(){return c["a"]}));var u=n("76a5");n.d(e,"Text",(function(){return u["a"]}));var h=n("d9fc");n.d(e,"Circle",(function(){return h["a"]}));var f=n("ae69");n.d(e,"Ellipse",(function(){return f["a"]}));var d=n("4aa2");n.d(e,"Sector",(function(){return d["a"]}));var p=n("4573");n.d(e,"Ring",(function(){return p["a"]}));var g=n("87b1");n.d(e,"Polygon",(function(){return g["a"]}));var m=n("d498");n.d(e,"Polyline",(function(){return m["a"]}));var v=n("c7a2");n.d(e,"Rect",(function(){return v["a"]}));var y=n("cb11");n.d(e,"Line",(function(){return y["a"]}));var _=n("ac0f");n.d(e,"BezierCurve",(function(){return _["a"]}));var b=n("8d32");n.d(e,"Arc",(function(){return b["a"]}));var x=n("d4c6");n.d(e,"CompoundPath",(function(){return x["a"]}));var w=n("48a9");n.d(e,"LinearGradient",(function(){return w["a"]}));var S=n("dded");n.d(e,"RadialGradient",(function(){return S["a"]}));var T=n("9850");n.d(e,"BoundingRect",(function(){return T["a"]}));var O=n("ca80");n.d(e,"OrientedBoundingRect",(function(){return O["a"]}));var C=n("dce8");n.d(e,"Point",(function(){return C["a"]}));var M=n("392f");n.d(e,"IncrementalDisplayable",(function(){return M["a"]}));var A=n("9cf9"),D=n("6d8b"),E=n("861c"),I=n("deab");n.d(e,"updateProps",(function(){return I["h"]})),n.d(e,"initProps",(function(){return I["c"]})),n.d(e,"removeElement",(function(){return I["e"]})),n.d(e,"removeElementWithFadeOut",(function(){return I["f"]})),n.d(e,"isElementRemoved",(function(){return I["d"]}));var P=Math.max,L=Math.min,k={};function j(t){return a["b"].extend(t)}var R=i["c"];function N(t,e){return R(t,e)}function B(t,e){k[t]=e}function F(t){if(k.hasOwnProperty(t))return k[t]}function z(t,e,n,r){var o=i["b"](t,e);return n&&("center"===r&&(n=H(n,o.getBoundingRect())),U(o,n)),o}function V(t,e,n){var i=new l["a"]({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var r={width:t.width,height:t.height};i.setStyle(H(e,r))}}});return i}function H(t,e){var n,i=e.width/e.height,r=t.height*i;r<=t.width?n=t.height:(r=t.width,n=r/i);var o=t.x+t.width/2,a=t.y+t.height/2;return{x:o-r/2,y:a-n/2,width:r,height:n}}var G=i["d"];function U(t,e){if(t.applyTransform){var n=t.getBoundingRect(),i=n.calculateTransform(e);t.applyTransform(i)}}function W(t){return A["b"](t.shape,t.shape,t.style),t}function X(t){return A["c"](t.shape,t.shape,t.style),t}var Y=A["a"];function q(t,e){var n=r["d"]([]);while(t&&t!==e)r["f"](n,t.getLocalTransform(),n),t=t.parent;return n}function Z(t,e,n){return e&&!Object(D["u"])(e)&&(e=s["a"].getLocalTransform(e)),n&&(e=r["e"]([],e)),o["b"]([],t,e)}function K(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=Z(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function $(t){return!t.isGroup}function J(t){return null!=t.shape}function Q(t,e,n){if(t&&e){var i=r(t);e.traverse((function(t){if($(t)&&t.anid){var e=i[t.anid];if(e){var r=o(t);t.attr(o(e)),Object(I["h"])(t,r,n,Object(E["a"])(t).dataIndex)}}}))}function r(t){var e={};return t.traverse((function(t){$(t)&&t.anid&&(e[t.anid]=t)})),e}function o(t){var e={x:t.x,y:t.y,rotation:t.rotation};return J(t)&&(e.shape=Object(D["m"])({},t.shape)),e}}function tt(t,e){return Object(D["H"])(t,(function(t){var n=t[0];n=P(n,e.x),n=L(n,e.x+e.width);var i=t[1];return i=P(i,e.y),i=L(i,e.y+e.height),[n,i]}))}function et(t,e){var n=P(t.x,e.x),i=L(t.x+t.width,e.x+e.width),r=P(t.y,e.y),o=L(t.y+t.height,e.y+e.height);if(i>=n&&o>=r)return{x:n,y:r,width:i-n,height:o-r}}function nt(t,e,n){var i=Object(D["m"])({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),Object(D["j"])(r,n),new l["a"](i)):z(t.replace("path://",""),i,n,"center")}function it(t,e,n,i,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if(rt(t,e,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function rt(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,f=ot(u,h,l,c);if(at(f))return!1;var d=t-r,p=e-o,g=ot(d,p,l,c)/f;if(g<0||g>1)return!1;var m=ot(d,p,u,h)/f;return!(m<0||m>1)}function ot(t,e,n,i){return t*i-n*e}function at(t){return t<=1e-6&&t>=-1e-6}function st(t){var e=t.itemTooltipOption,n=t.componentModel,i=t.itemName,r=Object(D["C"])(e)?{formatter:e}:e,o=n.mainType,a=n.componentIndex,s={componentType:o,name:i,$vars:["name"]};s[o+"Index"]=a;var l=t.formatterParamsExtra;l&&Object(D["k"])(Object(D["F"])(l),(function(t){Object(D["q"])(s,t)||(s[t]=l[t],s.$vars.push(t))}));var c=Object(E["a"])(t.el);c.componentMainType=o,c.componentIndex=a,c.tooltipConfig={name:i,option:Object(D["j"])({content:i,formatterParams:s},r)}}B("circle",h["a"]),B("ellipse",f["a"]),B("sector",d["a"]),B("ring",p["a"]),B("polygon",g["a"]),B("polyline",m["a"]),B("rect",v["a"]),B("line",y["a"]),B("bezierCurve",_["a"]),B("arc",b["a"])},"234d":function(t,e,n){var i=n("e380"),r=500;function o(t){var e=i(t,(function(t){return n.size===r&&n.clear(),t})),n=e.cache;return e}t.exports=o},2355:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"d",(function(){return l})),n.d(e,"a",(function(){return c}));var i=n("ca80"),r=n("9850");function o(t){for(var e=[],n=0;n<t.length;n++){var r=t[n];if(!r.defaultAttr.ignore){var o=r.label,a=o.getComputedTransform(),s=o.getBoundingRect(),l=!a||a[1]<1e-5&&a[2]<1e-5,c=o.style.margin||0,u=s.clone();u.applyTransform(a),u.x-=c/2,u.y-=c/2,u.width+=c,u.height+=c;var h=l?new i["a"](s,a):null;e.push({label:o,labelLine:r.labelLine,rect:u,localRect:s,obb:h,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:l,transform:a})}}return e}function a(t,e,n,i,r,o){var a=t.length;if(!(a<2)){t.sort((function(t,n){return t.rect[e]-n.rect[e]}));for(var s,l=0,c=!1,u=[],h=0,f=0;f<a;f++){var d=t[f],p=d.rect;s=p[e]-l,s<0&&(p[e]-=s,d.label[e]-=s,c=!0);var g=Math.max(-s,0);u.push(g),h+=g,l=p[e]+p[n]}h>0&&o&&w(-h/a,0,a);var m,v,y=t[0],_=t[a-1];return b(),m<0&&S(-m,.8),v<0&&S(v,.8),b(),x(m,v,1),x(v,m,-1),b(),m<0&&T(-m),v<0&&T(v),c}function b(){m=y.rect[e]-i,v=r-_.rect[e]-_.rect[n]}function x(t,e,n){if(t<0){var i=Math.min(e,-t);if(i>0){w(i*n,0,a);var r=i+t;r<0&&S(-r*n,1)}else S(-t*n,1)}}function w(n,i,r){0!==n&&(c=!0);for(var o=i;o<r;o++){var a=t[o],s=a.rect;s[e]+=n,a.label[e]+=n}}function S(i,r){for(var o=[],s=0,l=1;l<a;l++){var c=t[l-1].rect,u=Math.max(t[l].rect[e]-c[e]-c[n],0);o.push(u),s+=u}if(s){var h=Math.min(Math.abs(i)/s,r);if(i>0)for(l=0;l<a-1;l++){var f=o[l]*h;w(f,0,l+1)}else for(l=a-1;l>0;l--){f=o[l-1]*h;w(-f,l,a)}}}function T(t){var e=t<0?-1:1;t=Math.abs(t);for(var n=Math.ceil(t/(a-1)),i=0;i<a-1;i++)if(e>0?w(n,0,i+1):w(-n,a-i-1,a),t-=n,t<=0)return}}function s(t,e,n,i){return a(t,"x","width",e,n,i)}function l(t,e,n,i){return a(t,"y","height",e,n,i)}function c(t){var e=[];t.sort((function(t,e){return e.priority-t.priority}));var n=new r["a"](0,0,0,0);function o(t){if(!t.ignore){var e=t.ensureState("emphasis");null==e.ignore&&(e.ignore=!1)}t.ignore=!0}for(var a=0;a<t.length;a++){var s=t[a],l=s.axisAligned,c=s.localRect,u=s.transform,h=s.label,f=s.labelLine;n.copy(s.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var d=s.obb,p=!1,g=0;g<e.length;g++){var m=e[g];if(n.intersect(m.rect)){if(l&&m.axisAligned){p=!0;break}if(m.obb||(m.obb=new i["a"](m.localRect,m.transform)),d||(d=new i["a"](c,u)),d.intersect(m.obb)){p=!0;break}}}p?(o(h),f&&o(f)):(h.attr("ignore",s.defaultAttr.ignore),f&&f.attr("ignore",s.defaultAttr.labelGuideIgnore),e.push(s))}}},2376:function(t,e,n){(function(t){n("99af"),n("a9e3"),n("cb29"),n("b680");var e=t.fabric||(t.fabric={});e.EcMeter=e.util.createClass(e.Object,{type:"ecMeter",stateProperties:e.Object.prototype.stateProperties.concat(["progressTotal","progressColor","text"]),cacheProperties:e.Object.prototype.stateProperties.concat(["progressTotal","progressColor","text"]),text:6,progressTotal:10,progressColor:"#07ef2e",percentage:1,initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t),t.save(),this.ctx=t;var e=5,n=Number(this.progressTotal);e=Number(this.text),this.percentage=e/n,this.percentage>1&&(this.percentage=1);var i=(this.height-10)/2-(this.height-10)*this.percentage-5,r=-this.width/2,o=-this.height/2;t.beginPath(),t.moveTo(r+20,i+10),t.lineTo(-r,i+10),t.lineTo(-r,-o),t.lineTo(r+20,-o),t.lineTo(r+20,i),t.fillStyle=this.progressColor,t.fill(),t.closePath();var a=(r+20+-r)/2-5;t.fillText((100*this.percentage).toFixed(0),a,i+8),t.closePath(),t.beginPath(),t.moveTo(r+20,o+10),t.lineTo(r+20,-o);for(var s=0;s<=10;s++){var l=r+5;s%5||(l=r+10);var c=this.height/2-(this.height-10)/10*s;switch(t.fillStyle="#000",t.moveTo(r+20,c),t.lineTo(l+20,c),s){case 0:t.fillText(10*s,r,c);break;default:t.fillText(10*s,r,c+5);break}}t.lineWidth=.5,t.strokeStyle="#000",t.stroke(),t.closePath(),t.restore()}}),e.EcMeter.fromObject=function(t,n){n&&n(new e.EcMeter(t))}}).call(this,n("c8ba"))},"23cb":function(t,e,n){var i=n("a691"),r=Math.max,o=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):o(n,e)}},"23e7":function(t,e,n){var i=n("da84"),r=n("06cf").f,o=n("9112"),a=n("6eeb"),s=n("ce4e"),l=n("e893"),c=n("94ca");t.exports=function(t,e){var n,u,h,f,d,p,g=t.target,m=t.global,v=t.stat;if(u=m?i:v?i[g]||s(g,{}):(i[g]||{}).prototype,u)for(h in e){if(d=e[h],t.noTargetGet?(p=r(u,h),f=p&&p.value):f=u[h],n=c(m?h:g+(v?".":"#")+h,t.forced),!n&&void 0!==f){if(typeof d===typeof f)continue;l(d,f)}(t.sham||f&&f.sham)&&o(d,"sham",!0),a(u,h,d,t)}}},"241c":function(t,e,n){var i=n("ca84"),r=n("7839"),o=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,o)}},2444:function(t,e,n){"use strict";(function(e){var i=n("c532"),r=n("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function s(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=n("b50d")),t}var l={adapter:s(),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],(function(t){l.headers[t]={}})),i.forEach(["post","put","patch"],(function(t){l.headers[t]=i.merge(o)})),t.exports=l}).call(this,n("4362"))},2474:function(t,e,n){var i=n("2b3e"),r=i.Uint8Array;t.exports=r},2478:function(t,e,n){var i=n("4245");function r(t){return i(this,t).get(t)}t.exports=r},2524:function(t,e,n){var i=n("6044"),r="__lodash_hash_undefined__";function o(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?r:e,this}t.exports=o},2532:function(t,e,n){"use strict";var i=n("23e7"),r=n("5a34"),o=n("1d80"),a=n("ab13");i({target:"String",proto:!0,forced:!a("includes")},{includes:function(t){return!!~String(o(this)).indexOf(r(t),arguments.length>1?arguments[1]:void 0)}})},"253c":function(t,e,n){var i=n("3729"),r=n("1310"),o="[object Arguments]";function a(t){return r(t)&&i(t)==o}t.exports=a},"25cb":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcEllipse=e.util.createClass(e.Ellipse,{type:"ecEllipse",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcEllipse.fromObject=function(t,n){n&&n(new e.EcEllipse(t))},e.EcEllipse.async=!0}).call(this,n("c8ba"))},"25f0":function(t,e,n){"use strict";var i=n("6eeb"),r=n("825a"),o=n("d039"),a=n("ad6d"),s="toString",l=RegExp.prototype,c=l[s],u=o((function(){return"/a/b"!=c.call({source:"a",flags:"b"})})),h=c.name!=s;(u||h)&&i(RegExp.prototype,s,(function(){var t=r(this),e=String(t.source),n=t.flags,i=String(void 0===n&&t instanceof RegExp&&!("flags"in l)?a.call(t):n);return"/"+e+"/"+i}),{unsafe:!0})},2626:function(t,e,n){"use strict";var i=n("d066"),r=n("9bf2"),o=n("b622"),a=n("83ab"),s=o("species");t.exports=function(t){var e=i(t),n=r.f;a&&e&&!e[s]&&n(e,s,{configurable:!0,get:function(){return this}})}},"26e8":function(t,e){function n(t,e){return null!=t&&e in Object(t)}t.exports=n},"282b":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("6d8b");function r(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(n,r,o){for(var a={},s=0;s<t.length;s++){var l=t[s][1];if(!(r&&i["r"](r,l)>=0||o&&i["r"](o,l)<0)){var c=n.getShallow(l,e);null!=c&&(a[t[s][0]]=c)}}return a}}},"28c9":function(t,e){function n(){this.__data__=[],this.size=0}t.exports=n},"29f3":function(t,e){var n=Object.prototype,i=n.toString;function r(t){return i.call(t)}t.exports=r},"2a1c":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcWave=e.util.createClass(e.Object,{type:"ecWave",initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.customRender(),0!==this.width&&0!==this.height&&this.visible},customRender:function(){this.ctx.save();var t=-this.width/2,e=-this.height/2;this.drawRect(this.ctx,t,e),this.drawSin(this.ctx,t,e),this.ctx.restore()},drawRect:function(t,e,n){t.beginPath(),t.moveTo(e,n),t.lineTo(e,-n),t.lineTo(-e,-n),t.lineTo(-e,n),t.stroke(),t.closePath()},drawSin:function(t,e,n){t.beginPath(),t.stroke()}}),e.EcWave.fromObject=function(t,n){n&&n(new e.EcWave(t))},e.EcWave.async=!0}).call(this,n("c8ba"))},"2a62":function(t,e,n){var i=n("825a");t.exports=function(t){var e=t["return"];if(void 0!==e)return i(e.call(t)).value}},"2b03":function(t,e){function n(t,e,n,i){var r=t.length,o=n+(i?1:-1);while(i?o--:++o<r)if(e(t[o],o,t))return o;return-1}t.exports=n},"2b17":function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"c",(function(){return g})),n.d(e,"b",(function(){return y})),n.d(e,"d",(function(){return x})),n.d(e,"e",(function(){return S}));var i,r,o,a,s,l=n("6d8b"),c=n("e0d3"),u=n("ec6f"),h=n("07fd"),f=function(){function t(t,e){var n=Object(u["e"])(t)?t:Object(u["c"])(t);this._source=n;var i=this._data=n.data;n.sourceFormat===h["g"]&&(this._offset=0,this._dimSize=e,this._data=i),s(this,i,n)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(t,e){},t.prototype.appendData=function(t){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var t;s=function(t,r,o){var s=o.sourceFormat,c=o.seriesLayoutBy,u=o.startIndex,f=o.dimensionsDefine,d=a[w(s,c)];if(Object(l["m"])(t,d),s===h["g"])t.getItem=e,t.count=i,t.fillStorage=n;else{var p=g(s,c);t.getItem=Object(l["c"])(p,null,r,u,f);var m=y(s,c);t.count=Object(l["c"])(m,null,r,u,f)}};var e=function(t,e){t-=this._offset,e=e||[];for(var n=this._data,i=this._dimSize,r=i*t,o=0;o<i;o++)e[o]=n[r+o];return e},n=function(t,e,n,i){for(var r=this._data,o=this._dimSize,a=0;a<o;a++){for(var s=i[a],l=null==s[0]?1/0:s[0],c=null==s[1]?-1/0:s[1],u=e-t,h=n[a],f=0;f<u;f++){var d=r[f*o+a];h[t+f]=d,d<l&&(l=d),d>c&&(c=d)}s[0]=l,s[1]=c}},i=function(){return this._data?this._data.length/this._dimSize:0};function r(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}t={},t[h["c"]+"_"+h["a"]]={pure:!0,appendData:r},t[h["c"]+"_"+h["b"]]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[h["e"]]={pure:!0,appendData:r},t[h["d"]]={pure:!0,appendData:function(t){var e=this._data;Object(l["k"])(t,(function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])}))}},t[h["f"]]={appendData:r},t[h["g"]]={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},a=t}(),t}(),d=function(t,e,n,i){return t[i]},p=(i={},i[h["c"]+"_"+h["a"]]=function(t,e,n,i){return t[i+e]},i[h["c"]+"_"+h["b"]]=function(t,e,n,i,r){i+=e;for(var o=r||[],a=t,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[i]:null}return o},i[h["e"]]=d,i[h["d"]]=function(t,e,n,i,r){for(var o=r||[],a=0;a<n.length;a++){var s=n[a].name;0;var l=t[s];o[a]=l?l[i]:null}return o},i[h["f"]]=d,i);function g(t,e){var n=p[w(t,e)];return n}var m=function(t,e,n){return t.length},v=(r={},r[h["c"]+"_"+h["a"]]=function(t,e,n){return Math.max(0,t.length-e)},r[h["c"]+"_"+h["b"]]=function(t,e,n){var i=t[0];return i?Math.max(0,i.length-e):0},r[h["e"]]=m,r[h["d"]]=function(t,e,n){var i=n[0].name;var r=t[i];return r?r.length:0},r[h["f"]]=m,r);function y(t,e){var n=v[w(t,e)];return n}var _=function(t,e,n){return t[e]},b=(o={},o[h["c"]]=_,o[h["e"]]=function(t,e,n){return t[n]},o[h["d"]]=_,o[h["f"]]=function(t,e,n){var i=Object(c["h"])(t);return i instanceof Array?i[e]:i},o[h["g"]]=_,o);function x(t){var e=b[t];return e}function w(t,e){return t===h["c"]?t+"_"+e:t}function S(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r=t.getStore(),o=r.getSource().sourceFormat;if(null!=n){var a=t.getDimensionIndex(n),s=r.getDimensionProperty(a);return x(o)(i,a,s)}var l=i;return o===h["f"]&&(l=Object(c["h"])(i)),l}}}},"2b3e":function(t,e,n){var i=n("585a"),r="object"==typeof self&&self&&self.Object===Object&&self,o=i||r||Function("return this")();t.exports=o},"2c66":function(t,e,n){var i=n("d612"),r=n("8db3"),o=n("5edf"),a=n("c584"),s=n("750a"),l=n("ac41"),c=200;function u(t,e,n){var u=-1,h=r,f=t.length,d=!0,p=[],g=p;if(n)d=!1,h=o;else if(f>=c){var m=e?null:s(t);if(m)return l(m);d=!1,h=a,g=new i}else g=e?[]:p;t:while(++u<f){var v=t[u],y=e?e(v):v;if(v=n||0!==v?v:0,d&&y===y){var _=g.length;while(_--)if(g[_]===y)continue t;e&&g.push(y),p.push(v)}else h(g,y,n)||(g!==p&&g.push(y),p.push(v))}return p}t.exports=u},"2cf4":function(t,e,n){"use strict";n.d(e,"e",(function(){return r})),n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l}));var i=1;"undefined"!==typeof window&&(i=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var r=i,o=.4,a="#333",s="#ccc",l="#eee"},"2cf49":function(t,e,n){var i,r,o,a=n("da84"),s=n("d039"),l=n("0366"),c=n("1be4"),u=n("cc12"),h=n("1cdc"),f=n("605d"),d=a.location,p=a.setImmediate,g=a.clearImmediate,m=a.process,v=a.MessageChannel,y=a.Dispatch,_=0,b={},x="onreadystatechange",w=function(t){if(b.hasOwnProperty(t)){var e=b[t];delete b[t],e()}},S=function(t){return function(){w(t)}},T=function(t){w(t.data)},O=function(t){a.postMessage(t+"",d.protocol+"//"+d.host)};p&&g||(p=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return b[++_]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},i(_),_},g=function(t){delete b[t]},f?i=function(t){m.nextTick(S(t))}:y&&y.now?i=function(t){y.now(S(t))}:v&&!h?(r=new v,o=r.port2,r.port1.onmessage=T,i=l(o.postMessage,o,1)):a.addEventListener&&"function"==typeof postMessage&&!a.importScripts&&d&&"file:"!==d.protocol&&!s(O)?(i=O,a.addEventListener("message",T,!1)):i=x in u("script")?function(t){c.appendChild(u("script"))[x]=function(){c.removeChild(this),w(t)}}:function(t){setTimeout(S(t),0)}),t.exports={set:p,clear:g}},"2d00":function(t,e,n){var i,r,o=n("da84"),a=n("342f"),s=o.process,l=s&&s.versions,c=l&&l.v8;c?(i=c.split("."),r=i[0]+i[1]):a&&(i=a.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=a.match(/Chrome\/(\d+)/),i&&(r=i[1]))),t.exports=r&&+r},"2d7c":function(t,e){function n(t,e){var n=-1,i=null==t?0:t.length,r=0,o=[];while(++n<i){var a=t[n];e(a,n,t)&&(o[r++]=a)}return o}t.exports=n},"2d83":function(t,e,n){"use strict";var i=n("387f");t.exports=function(t,e,n,r,o){var a=new Error(t);return i(a,e,n,r,o)}},"2dc5":function(t,e,n){"use strict";var i=n("21a1"),r=n("6d8b"),o=n("d5b7"),a=n("9850"),s=function(t){function e(e){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return Object(i["a"])(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){if(t&&(t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),t.__hostTarget))throw"This elemenet has been used as an attachment";return this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,e){var n=r["r"](this._children,t);return n>=0&&this.replaceAt(e,n),this},e.prototype.replaceAt=function(t,e){var n=this._children,i=n[e];if(t&&t!==this&&t.parent!==this&&t!==i){n[e]=t,i.parent=null;var r=this.__zr;r&&i.removeSelfFromZr(r),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,n=this._children,i=r["r"](n,t);return i<0||(n.splice(i,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh()),this},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,n=0;n<t.length;n++){var i=t[n];e&&i.removeSelfFromZr(e),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},e.prototype.traverse=function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n],r=t.call(e,i);i.isGroup&&!r&&i.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(e)}},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(e)}},e.prototype.getBoundingRect=function(t){for(var e=new a["a"](0,0,0,0),n=t||this._children,i=[],r=null,o=0;o<n.length;o++){var s=n[o];if(!s.ignore&&!s.invisible){var l=s.getBoundingRect(),c=s.getLocalTransform(i);c?(a["a"].applyTransform(e,l,c),r=r||e.clone(),r.union(e)):(r=r||l.clone(),r.union(l))}}return r||e},e}(o["a"]);s.prototype.type="group",e["a"]=s},"2e67":function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"2f1f":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a}));var i=n("6d8b"),r=Object(i["g"])();function o(t,e){Object(i["b"])(null==r.get(t)&&e),r.set(t,e)}function a(t,e,n){var i=r.get(e);if(!i)return n;var o=i(t);return o?n.concat(o):n}},"2f45":function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return l}));var i=n("6d8b"),r=n("07fd"),o=function(){function t(t,e){this._encode=t,this._schema=e}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function a(t,e){var n={},a=n.encode={},l=Object(i["g"])(),u=[],h=[],f={};Object(i["k"])(t.dimensions,(function(e){var n=t.getDimensionInfo(e),i=n.coordDim;if(i){0;var o=n.coordDimIndex;s(a,i)[o]=e,n.isExtraCoord||(l.set(i,1),c(n.type)&&(u[0]=e),s(f,i)[o]=t.getDimensionIndex(n.name)),n.defaultTooltip&&h.push(e)}r["i"].each((function(t,e){var i=s(a,e),r=n.otherDims[e];null!=r&&!1!==r&&(i[r]=n.name)}))}));var d=[],p={};l.each((function(t,e){var n=a[e];p[e]=n[0],d=d.concat(n)})),n.dataDimsOnCoord=d,n.dataDimIndicesOnCoord=Object(i["H"])(d,(function(e){return t.getDimensionInfo(e).storeDimIndex})),n.encodeFirstDimNotExtra=p;var g=a.label;g&&g.length&&(u=g.slice());var m=a.tooltip;return m&&m.length?h=m.slice():h.length||(h=u.slice()),a.defaultedLabel=u,a.defaultedTooltip=h,n.userOutput=new o(f,e),n}function s(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function l(t){return"category"===t?"ordinal":"time"===t?"time":"float"}function c(t){return!("ordinal"===t||"time"===t)}},"2fcc":function(t,e){function n(t){var e=this.__data__,n=e["delete"](t);return this.size=e.size,n}t.exports=n},"30b5":function(t,e,n){"use strict";var i=n("c532");function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,(function(t,e){null!==t&&"undefined"!==typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,(function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))})))})),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},"30c9":function(t,e,n){var i=n("9520"),r=n("b218");function o(t){return null!=t&&r(t.length)&&!i(t)}t.exports=o},"313e":function(t,e,n){"use strict";n.d(e,"a",(function(){return r["p"]}));var i=n("22b4"),r=n("aa74"),o=n("f95e"),a=n("41ef");function s(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function l(t){var e;if(t&&"transparent"!==t){if("string"===typeof t&&t.indexOf("rgba")>-1){var n=Object(a["parse"])(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}}else t="none";return{color:t,opacity:null==e?1:e}}var c=n("6d8b"),u=n("cbe5"),h=n("0da8"),f=n("dd4f");function d(t,e,n){n||(n=function(t,e){return t===e}),t=t.slice(),e=e.slice();var i=e.length,r=t.length,o=1,a=i+r,s=[{newPos:-1,components:[]}],l=p(s[0],e,t,0,n);if(s[0].newPos+1>=i&&l+1>=r){for(var c=[],u=0;u<e.length;u++)c.push(u);return[{indices:c,count:e.length,added:!1,removed:!1}]}function h(){for(var a=-1*o;a<=o;a+=2){var l,c=s[a-1],u=s[a+1],h=(u?u.newPos:0)-a;c&&(s[a-1]=void 0);var f=c&&c.newPos+1<i,d=u&&0<=h&&h<r;if(f||d){if(!f||d&&c.newPos<u.newPos?(l=v(u),g(l.components,!1,!0)):(l=c,l.newPos++,g(l.components,!0,!1)),h=p(l,e,t,a,n),l.newPos+1>=i&&h+1>=r)return m(l.components);s[a]=l}else s[a]=void 0}o++}while(o<=a){var f=h();if(f)return f}}function p(t,e,n,i,r){var o=e.length,a=n.length,s=t.newPos,l=s-i,c=0;while(s+1<o&&l+1<a&&r(e[s+1],n[l+1]))s++,l++,c++;return c&&t.components.push({count:c,added:!1,removed:!1,indices:[]}),t.newPos=s,l}function g(t,e,n){var i=t[t.length-1];i&&i.added===e&&i.removed===n?t[t.length-1]={count:i.count+1,added:e,removed:n,indices:[]}:t.push({count:1,added:e,removed:n,indices:[]})}function m(t){for(var e=0,n=t.length,i=0,r=0;e<n;e++){var o=t[e];if(o.removed){for(s=r;s<r+o.count;s++)o.indices.push(s);r+=o.count}else{for(var a=[],s=i;s<i+o.count;s++)a.push(s);o.indices=a,i+=o.count,o.added||(r+=o.count)}}return t}function v(t){return{newPos:t.newPos,components:t.components.slice(0)}}function y(t,e,n){return d(t,e,n)}var _=n("21a1"),b=n("e86a"),x=n("608a"),w="none",S=Math.round,T=Math.sin,O=Math.cos,C=Math.PI,M=2*Math.PI,A=180/C,D=1e-4;function E(t){return S(1e3*t)/1e3}function I(t){return S(1e4*t)/1e4}function P(t){return t<D&&t>-D}function L(t){var e=t.fill;return null!=e&&e!==w}function k(t){var e=t.stroke;return null!=e&&e!==w}function j(t,e){e&&R(t,"transform","matrix("+E(e[0])+","+E(e[1])+","+E(e[2])+","+E(e[3])+","+I(e[4])+","+I(e[5])+")")}function R(t,e,n){(!n||"linear"!==n.type&&"radial"!==n.type)&&t.setAttribute(e,n)}function N(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function B(t,e,n){t.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,n)}function F(t,e,n){var i=null==e.opacity?1:e.opacity;if(n instanceof h["a"])R(t,"opacity",i+"");else{if(L(e)){var r=l(e.fill);R(t,"fill",r.color),R(t,"fill-opacity",(null!=e.fillOpacity?e.fillOpacity*r.opacity*i:r.opacity*i)+"")}else R(t,"fill",w);if(k(e)){var o=l(e.stroke);R(t,"stroke",o.color);var a=e.lineWidth,s=e.strokeNoScale?n.getLineScale():1;R(t,"stroke-width",(s?a/s:0)+""),R(t,"paint-order",e.strokeFirst?"stroke":"fill"),R(t,"stroke-opacity",(null!=e.strokeOpacity?e.strokeOpacity*o.opacity*i:o.opacity*i)+"");var u=e.lineDash&&a>0&&Object(x["a"])(e.lineDash,a);if(u){var f=e.lineDashOffset;s&&1!==s&&(u=Object(c["H"])(u,(function(t){return t/s})),f&&(f/=s,f=S(f))),R(t,"stroke-dasharray",u.join(",")),R(t,"stroke-dashoffset",(f||0)+"")}else R(t,"stroke-dasharray",w);e.lineCap&&R(t,"stroke-linecap",e.lineCap),e.lineJoin&&R(t,"stroke-linejoin",e.lineJoin),e.miterLimit&&R(t,"stroke-miterlimit",e.miterLimit+"")}else R(t,"stroke",w)}}var z=function(){function t(){}return t.prototype.reset=function(){this._d=[],this._str=""},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){this._add("C",t,e,n,i,r,o)},t.prototype.quadraticCurveTo=function(t,e,n,i){this._add("Q",t,e,n,i)},t.prototype.arc=function(t,e,n,i,r,o){this.ellipse(t,e,n,n,0,i,r,o)},t.prototype.ellipse=function(t,e,n,i,r,o,a,s){var l=0===this._d.length,c=a-o,u=!s,h=Math.abs(c),f=P(h-M)||(u?c>=M:-c>=M),d=c>0?c%M:c%M+M,p=!1;p=!!f||!P(h)&&d>=C===!!u;var g=I(t+n*O(o)),m=I(e+i*T(o));f&&(c=u?M-1e-4:1e-4-M,p=!0,l&&this._d.push("M",g,m));var v=I(t+n*O(o+c)),y=I(e+i*T(o+c));if(isNaN(g)||isNaN(m)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(A)||isNaN(v)||isNaN(y))return"";this._d.push("A",I(n),I(i),S(r*A),+p,+u,v,y)},t.prototype.rect=function(t,e,n,i){this._add("M",t,e),this._add("L",t+n,e),this._add("L",t+n,e+i),this._add("L",t,e+i),this._add("L",t,e),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,n,i,r,o,a,s,l){this._d.push(t);for(var c=1;c<arguments.length;c++){var u=arguments[c];if(isNaN(u))return void(this._invalid=!0);this._d.push(I(u))}},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(" "),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),V={brush:function(t){var e=t.style,n=t.__svgEl;n||(n=s("path"),t.__svgEl=n),t.path||t.createPathProxy();var i=t.path;t.shapeChanged()&&(i.beginPath(),t.buildPath(i,t.shape),t.pathUpdated());var r=i.getVersion(),o=t,a=o.__svgPathBuilder;(o.__svgPathVersion!==r||!a||t.style.strokePercent<1)&&(a||(a=o.__svgPathBuilder=new z),a.reset(),i.rebuildPath(a,t.style.strokePercent),a.generateStr(),o.__svgPathVersion=r),R(n,"d",a.getStr()),F(n,e,t),j(n,t.transform)}},H={brush:function(t){var e=t.style,n=e.image;if(n instanceof HTMLImageElement?n=n.src:n instanceof HTMLCanvasElement&&(n=n.toDataURL()),n){var i=e.x||0,r=e.y||0,o=e.width,a=e.height,l=t.__svgEl;l||(l=s("image"),t.__svgEl=l),n!==t.__imageSrc&&(N(l,"href",n),t.__imageSrc=n),R(l,"width",o+""),R(l,"height",a+""),R(l,"x",i+""),R(l,"y",r+""),F(l,e,t),j(l,t.transform)}}},G={left:"start",right:"end",center:"middle",middle:"middle"};function U(t,e,n){return"top"===n?t+=e/2:"bottom"===n&&(t-=e/2),t}var W={brush:function(t){var e=t.style,n=e.text;if(null!=n&&(n+=""),n&&!isNaN(e.x)&&!isNaN(e.y)){var i=t.__svgEl;i||(i=s("text"),B(i,"xml:space","preserve"),t.__svgEl=i);var r=e.font||b["a"],o=i.style;o.font=r,i.textContent=n,F(i,e,t),j(i,t.transform);var a=e.x||0,l=U(e.y||0,Object(b["f"])(r),e.textBaseline),c=G[e.textAlign]||e.textAlign;R(i,"dominant-baseline","central"),R(i,"text-anchor",c),R(i,"x",a+""),R(i,"y",l+"")}}},X="0",Y="1",q=function(){function t(t,e,n,i,r){this.nextId=0,this._domName="_dom",this.createElement=s,this._zrId=t,this._svgRoot=e,this._tagNames="string"===typeof n?[n]:n,this._markLabel=i,r&&(this._domName=r)}return t.prototype.getDefs=function(t){var e=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");if(0===n.length){if(t){var i=e.insertBefore(this.createElement("defs"),e.firstChild);return i.contains||(i.contains=function(t){var e=i.children;if(!e)return!1;for(var n=e.length-1;n>=0;--n)if(e[n]===t)return!0;return!1}),i}return null}return n[0]},t.prototype.doUpdate=function(t,e){if(t){var n=this.getDefs(!1);if(t[this._domName]&&n.contains(t[this._domName]))"function"===typeof e&&e(t);else{var i=this.add(t);i&&(t[this._domName]=i)}}},t.prototype.add=function(t){return null},t.prototype.addDom=function(t){var e=this.getDefs(!0);t.parentNode!==e&&e.appendChild(t)},t.prototype.removeDom=function(t){var e=this.getDefs(!1);e&&t[this._domName]&&(e.removeChild(t[this._domName]),t[this._domName]=null)},t.prototype.getDoms=function(){var t=this.getDefs(!1);if(!t)return[];var e=[];return c["k"](this._tagNames,(function(n){for(var i=t.getElementsByTagName(n),r=0;r<i.length;r++)e.push(i[r])})),e},t.prototype.markAllUnused=function(){var t=this.getDoms(),e=this;c["k"](t,(function(t){t[e._markLabel]=X}))},t.prototype.markDomUsed=function(t){t&&(t[this._markLabel]=Y)},t.prototype.markDomUnused=function(t){t&&(t[this._markLabel]=X)},t.prototype.isDomUnused=function(t){return t&&t[this._markLabel]!==Y},t.prototype.removeUnused=function(){var t=this,e=this.getDefs(!1);if(e){var n=this.getDoms();c["k"](n,(function(n){t.isDomUnused(n)&&e.removeChild(n)}))}},t.prototype.getSvgProxy=function(t){return t instanceof u["b"]?V:t instanceof h["a"]?H:t instanceof f["a"]?W:V},t.prototype.getSvgElement=function(t){return t.__svgEl},t}(),Z=q;function K(t){return"linear"===t.type}function $(t){return"radial"===t.type}function J(t){return t&&("linear"===t.type||"radial"===t.type)}var Q=function(t){function e(e,n){return t.call(this,e,n,["linearGradient","radialGradient"],"__gradient_in_use__")||this}return Object(_["a"])(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c["k"](["fill","stroke"],(function(i){var r=e.style[i];if(J(r)){var o=r,a=n.getDefs(!0),s=void 0;o.__dom?(s=o.__dom,a.contains(o.__dom)||n.addDom(s)):s=n.add(o),n.markUsed(e);var l=s.getAttribute("id");t.setAttribute(i,"url(#"+l+")")}}))}},e.prototype.add=function(t){var e;if(K(t))e=this.createElement("linearGradient");else{if(!$(t))return c["G"]("Illegal gradient type."),null;e=this.createElement("radialGradient")}return t.id=t.id||this.nextId++,e.setAttribute("id","zr"+this._zrId+"-gradient-"+t.id),this.updateDom(t,e),this.addDom(e),e},e.prototype.update=function(t){if(J(t)){var e=this;this.doUpdate(t,(function(){var n=t.__dom;if(n){var i=n.tagName,r=t.type;"linear"===r&&"linearGradient"===i||"radial"===r&&"radialGradient"===i?e.updateDom(t,t.__dom):(e.removeDom(t),e.add(t))}}))}},e.prototype.updateDom=function(t,e){if(K(t))e.setAttribute("x1",t.x+""),e.setAttribute("y1",t.y+""),e.setAttribute("x2",t.x2+""),e.setAttribute("y2",t.y2+"");else{if(!$(t))return void c["G"]("Illegal gradient type.");e.setAttribute("cx",t.x+""),e.setAttribute("cy",t.y+""),e.setAttribute("r",t.r+"")}t.global?e.setAttribute("gradientUnits","userSpaceOnUse"):e.setAttribute("gradientUnits","objectBoundingBox"),e.innerHTML="";for(var n=t.colorStops,i=0,r=n.length;i<r;++i){var o=this.createElement("stop");o.setAttribute("offset",100*n[i].offset+"%");var s=n[i].color;if(s.indexOf("rgba")>-1){var l=a["parse"](s)[3],u=a["toHex"](s);o.setAttribute("stop-color","#"+u),o.setAttribute("stop-opacity",l+"")}else o.setAttribute("stop-color",n[i].color);e.appendChild(o)}t.__dom=e},e.prototype.markUsed=function(e){if(e.style){var n=e.style.fill;n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom),n=e.style.stroke,n&&n.__dom&&t.prototype.markDomUsed.call(this,n.__dom)}},e}(Z),tt=Q,et=n("5e76"),nt=n("4755");function it(t){return t&&(!!t.image||!!t.svgElement)}var rt=new nt["a"],ot=function(t){function e(e,n){return t.call(this,e,n,["pattern"],"__pattern_in_use__")||this}return Object(_["a"])(e,t),e.prototype.addWithoutUpdate=function(t,e){if(e&&e.style){var n=this;c["k"](["fill","stroke"],(function(i){var r=e.style[i];if(it(r)){var o=n.getDefs(!0),a=rt.get(r);a?o.contains(a)||n.addDom(a):a=n.add(r),n.markUsed(e);var s=a.getAttribute("id");t.setAttribute(i,"url(#"+s+")")}}))}},e.prototype.add=function(t){if(it(t)){var e=this.createElement("pattern");return t.id=null==t.id?this.nextId++:t.id,e.setAttribute("id","zr"+this._zrId+"-pattern-"+t.id),e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("patternUnits","userSpaceOnUse"),this.updateDom(t,e),this.addDom(e),e}},e.prototype.update=function(t){if(it(t)){var e=this;this.doUpdate(t,(function(){var n=rt.get(t);e.updateDom(t,n)}))}},e.prototype.updateDom=function(t,e){var n=t.svgElement;if(n instanceof SVGElement)n.parentNode!==e&&(e.innerHTML="",e.appendChild(n),e.setAttribute("width",t.svgWidth+""),e.setAttribute("height",t.svgHeight+""));else{var i=void 0,r=e.getElementsByTagName("image");if(r.length){if(!t.image)return void e.removeChild(r[0]);i=r[0]}else t.image&&(i=this.createElement("image"));if(i){var o=void 0,a=t.image;if("string"===typeof a?o=a:a instanceof HTMLImageElement?o=a.src:a instanceof HTMLCanvasElement&&(o=a.toDataURL()),o){i.setAttribute("href",o),i.setAttribute("x","0"),i.setAttribute("y","0");var s={dirty:function(){}},l=Object(et["a"])(o,i,s,(function(t){e.setAttribute("width",t.width+""),e.setAttribute("height",t.height+"")}));l&&l.width&&l.height&&(e.setAttribute("width",l.width+""),e.setAttribute("height",l.height+"")),e.appendChild(i)}}}var c=t.x||0,u=t.y||0,h=(t.rotation||0)/Math.PI*180,f=t.scaleX||1,d=t.scaleY||1,p="translate("+c+", "+u+") rotate("+h+") scale("+f+", "+d+")";e.setAttribute("patternTransform",p),rt.set(t,e)},e.prototype.markUsed=function(e){e.style&&(it(e.style.fill)&&t.prototype.markDomUsed.call(this,rt.get(e.style.fill)),it(e.style.stroke)&&t.prototype.markDomUsed.call(this,rt.get(e.style.stroke)))},e}(Z),at=ot,st=n("3437");function lt(t){var e=[];if(t)for(var n=0;n<t.length;n++){var i=t[n];e.push(i.id)}return e.join(",")}function ct(t){var e=t.__clipPaths;return e&&e.length>0}var ut=function(t){function e(e,n){var i=t.call(this,e,n,"clipPath","__clippath_in_use__")||this;return i._refGroups={},i._keyDuplicateCount={},i}return Object(_["a"])(e,t),e.prototype.markAllUnused=function(){t.prototype.markAllUnused.call(this);var e=this._refGroups;for(var n in e)e.hasOwnProperty(n)&&this.markDomUnused(e[n]);this._keyDuplicateCount={}},e.prototype._getClipPathGroup=function(t,e){if(ct(t)){var n=t.__clipPaths,i=this._keyDuplicateCount,r=lt(n);return Object(st["b"])(n,e&&e.__clipPaths)&&(i[r]=i[r]||0,i[r]&&(r+="-"+i[r]),i[r]++),this._refGroups[r]||(this._refGroups[r]=this.createElement("g"))}},e.prototype.update=function(t,e){var n=this._getClipPathGroup(t,e);return n&&(this.markDomUsed(n),this.updateDom(n,t.__clipPaths)),n},e.prototype.updateDom=function(t,e){if(e&&e.length>0){var n=this.getDefs(!0),i=e[0],r=void 0,o=void 0;i._dom?(o=i._dom.getAttribute("id"),r=i._dom,n.contains(r)||n.appendChild(r)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,r=this.createElement("clipPath"),r.setAttribute("id",o),n.appendChild(r),i._dom=r);var a=this.getSvgProxy(i);a.brush(i);var s=this.getSvgElement(i);r.innerHTML="",r.appendChild(s),t.setAttribute("clip-path","url(#"+o+")"),e.length>1&&this.updateDom(r,e.slice(1))}else t&&t.setAttribute("clip-path","none")},e.prototype.markUsed=function(e){var n=this;e.__clipPaths&&c["k"](e.__clipPaths,(function(e){e._dom&&t.prototype.markDomUsed.call(n,e._dom)}))},e.prototype.removeUnused=function(){t.prototype.removeUnused.call(this);var e={},n=this._refGroups;for(var i in n)if(n.hasOwnProperty(i)){var r=n[i];this.isDomUnused(r)?r.parentNode&&r.parentNode.removeChild(r):e[i]=r}this._refGroups=e},e}(Z),ht=ut,ft=function(t){function e(e,n){var i=t.call(this,e,n,["filter"],"__filter_in_use__","_shadowDom")||this;return i._shadowDomMap={},i._shadowDomPool=[],i}return Object(_["a"])(e,t),e.prototype._getFromPool=function(){var t=this._shadowDomPool.pop();if(!t){t=this.createElement("filter"),t.setAttribute("id","zr"+this._zrId+"-shadow-"+this.nextId++);var e=this.createElement("feDropShadow");t.appendChild(e),this.addDom(t)}return t},e.prototype.update=function(t,e){var n=e.style;if(pt(n)){var i=gt(e),r=e._shadowDom=this._shadowDomMap[i];r||(r=this._getFromPool(),this._shadowDomMap[i]=r),this.updateDom(t,e,r)}else this.remove(t,e)},e.prototype.remove=function(t,e){null!=e._shadowDom&&(e._shadowDom=null,t.removeAttribute("filter"))},e.prototype.updateDom=function(t,e,n){var i=n.children[0],r=e.style,o=e.getGlobalScale(),a=o[0],s=o[1];if(a&&s){var c=r.shadowOffsetX||0,u=r.shadowOffsetY||0,h=r.shadowBlur,f=l(r.shadowColor);i.setAttribute("dx",c/a+""),i.setAttribute("dy",u/s+""),i.setAttribute("flood-color",f.color),i.setAttribute("flood-opacity",f.opacity+"");var d=h/2/a,p=h/2/s,g=d+" "+p;i.setAttribute("stdDeviation",g),n.setAttribute("x","-100%"),n.setAttribute("y","-100%"),n.setAttribute("width","300%"),n.setAttribute("height","300%"),e._shadowDom=n;var m=n.getAttribute("id");t.setAttribute("filter","url(#"+m+")")}},e.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this._shadowDomPool,n=this._shadowDomMap;for(var i in n)n.hasOwnProperty(i)&&e.push(n[i]);this._shadowDomMap={}}},e}(Z),dt=ft;function pt(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}function gt(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}function mt(t){return parseInt(t,10)}function vt(t){return t instanceof u["b"]?V:t instanceof h["a"]?H:t instanceof f["a"]?W:V}function yt(t,e){return e&&t&&e.parentNode!==t}function _t(t,e,n){if(yt(t,e)&&n){var i=n.nextSibling;i?t.insertBefore(e,i):t.appendChild(e)}}function bt(t,e){if(yt(t,e)){var n=t.firstChild;n?t.insertBefore(e,n):t.appendChild(e)}}function xt(t,e){e&&t&&e.parentNode===t&&t.removeChild(e)}function wt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function St(t){return t.__svgEl}var Tt=function(){function t(t,e,n,i){this.type="svg",this.refreshHover=Ot("refreshHover"),this.pathToImage=Ot("pathToImage"),this.configLayer=Ot("configLayer"),this.root=t,this.storage=e,this._opts=n=c["m"]({},n||{});var r=s("svg");r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns","http://www.w3.org/2000/svg"),r.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),r.setAttribute("version","1.1"),r.setAttribute("baseProfile","full"),r.style.cssText="user-select:none;position:absolute;left:0;top:0;";var o=s("g");r.appendChild(o);var a=s("g");r.appendChild(a),this._gradientManager=new tt(i,a),this._patternManager=new at(i,a),this._clipPathManager=new ht(i,a),this._shadowManager=new dt(i,a);var l=document.createElement("div");l.style.cssText="overflow:hidden;position:relative",this._svgDom=r,this._svgRoot=a,this._backgroundRoot=o,this._viewport=l,t.appendChild(l),l.appendChild(r),this.resize(n.width,n.height),this._visibleList=[]}return t.prototype.getType=function(){return"svg"},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.getSvgRoot=function(){return this._svgRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(){var t=this.storage.getDisplayList(!0);this._paintList(t)},t.prototype.setBackgroundColor=function(t){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var e=s("rect");e.setAttribute("width",this.getWidth()),e.setAttribute("height",this.getHeight()),e.setAttribute("x",0),e.setAttribute("y",0),e.setAttribute("id",0);var n=l(t),i=n.color,r=n.opacity;e.setAttribute("fill",i),e.setAttribute("fill-opacity",r),this._backgroundRoot.appendChild(e),this._backgroundNode=e},t.prototype.createSVGElement=function(t){return s(t)},t.prototype.paintOne=function(t){var e=vt(t);return e&&e.brush(t),St(t)},t.prototype._paintList=function(t){var e=this._gradientManager,n=this._patternManager,i=this._clipPathManager,r=this._shadowManager;e.markAllUnused(),n.markAllUnused(),i.markAllUnused(),r.markAllUnused();for(var o=this._svgRoot,a=this._visibleList,s=t.length,l=[],c=0;c<s;c++){var u=t[c],h=vt(u),f=St(u);u.invisible||(!u.__dirty&&f||(h&&h.brush(u),f=St(u),f&&u.style&&(e.update(u.style.fill),e.update(u.style.stroke),n.update(u.style.fill),n.update(u.style.stroke),r.update(f,u)),u.__dirty=0),f&&l.push(u))}var d,p,g,m,v=y(a,l);for(c=0;c<v.length;c++){var _=v[c];if(_.removed)for(var b=0;b<_.count;b++){u=a[_.indices[b]],f=St(u);ct(u)?wt(f):xt(o,f)}}for(c=0;c<v.length;c++){_=v[c];if(!_.removed)for(b=0;b<_.count;b++){u=l[_.indices[b]];var x=i.update(u,g);x!==m&&(d=p,x&&(d?_t(o,x,d):bt(o,x),p=x,d=null),m=x);f=St(u);d?_t(m||o,f,d):bt(m||o,f),d=f||d,m||(p=d),e.markUsed(u),e.addWithoutUpdate(f,u),n.markUsed(u),n.addWithoutUpdate(f,u),i.markUsed(u),g=u}}e.removeUnused(),n.removeUnused(),i.removeUnused(),r.removeUnused(),this._visibleList=l},t.prototype.resize=function(t,e){var n=this._viewport;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||this._height!==e){this._width=t,this._height=e;var r=n.style;r.width=t+"px",r.height=e+"px";var o=this._svgDom;o.setAttribute("width",t+""),o.setAttribute("height",e+"")}this._backgroundNode&&(this._backgroundNode.setAttribute("width",t),this._backgroundNode.setAttribute("height",e))},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||mt(s[n])||mt(a.style[n]))-(mt(s[r])||0)-(mt(s[o])||0)|0},t.prototype.dispose=function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},t.prototype.clear=function(){var t=this._viewport;t&&t.parentNode&&t.parentNode.removeChild(t)},t.prototype.toDataURL=function(){this.refresh();var t=this._svgDom,e=t.outerHTML||(t.parentNode&&t.parentNode).innerHTML,n=encodeURIComponent(e.replace(/></g,">\n\r<"));return"data:image/svg+xml;charset=UTF-8,"+n},t}();function Ot(t){return function(){c["G"]('In SVG mode painter not support method "'+t+'"')}}var Ct=Tt;function Mt(t){t.registerPainter("svg",Ct)}var At=n("7fae"),Dt=n("1830"),Et=n("4f85"),It=n("a15a"),Pt=n("2dc5"),Lt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t){return Object(Dt["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new Pt["a"],n=Object(It["a"])("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===i?"circle":i,a=.8*t.itemHeight,s=Object(It["a"])(o,(t.itemWidth-a)/2,(t.itemHeight-a)/2,a,a,t.itemStyle.fill);e.add(s),s.setStyle(t.itemStyle);var l="inherit"===t.iconRotate?r:t.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={zlevel:0,z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0,lineStyle:{width:"bolder"}},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(Et["b"]),kt=Lt,jt=n("deab"),Rt=n("861c"),Nt=n("7d6c"),Bt=n("2b17");function Ft(t,e){var n=t.mapDimensionsAll("defaultedLabel"),i=n.length;if(1===i){var r=Object(Bt["e"])(t,e,n[0]);return null!=r?r+"":null}if(i){for(var o=[],a=0;a<n.length;a++)o.push(Object(Bt["e"])(t,e,n[a]));return o.join(" ")}}function zt(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Object(c["t"])(e))return e+"";for(var i=[],r=0;r<n.length;r++){var o=t.getDimensionIndex(n[r]);o>=0&&i.push(e[o])}return i.join(" ")}var Vt=n("7837"),Ht=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.updateData(e,n,i,r),o}return Object(At["b"])(e,t),e.prototype._createSymbol=function(t,e,n,i,r){this.removeAll();var o=Object(It["a"])(t,-1,-1,2,2,null,r);o.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),o.drift=Gt,this._symbolType=t,this.add(o)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Object(Nt["r"])(this.childAt(0))},e.prototype.downplay=function(){Object(Nt["C"])(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t){var e=this.childAt(0);e.draggable=t,e.cursor=t?"move":e.cursor},e.prototype.updateData=function(t,n,i,r){this.silent=!1;var o=t.getItemVisual(n,"symbol")||"circle",a=t.hostModel,s=e.getSymbolSize(t,n),l=o!==this._symbolType,c=r&&r.disableAnimation;if(l){var u=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,t,n,s,u)}else{var h=this.childAt(0);h.silent=!1;var f={scaleX:s[0]/2,scaleY:s[1]/2};c?h.attr(f):jt["h"](h,f,a,n),Object(jt["g"])(h)}if(this._updateCommon(t,n,s,i,r),l){h=this.childAt(0);if(!c){f={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,jt["c"](h,f,a,n)}}c&&this.childAt(0).stopAnimation("remove"),this._seriesModel=a},e.prototype._updateCommon=function(t,e,n,i,r){var o,a,s,l,u,f,d,p,g=this.childAt(0),m=t.hostModel;if(i&&(o=i.emphasisItemStyle,a=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,u=i.blurScope,f=i.labelStatesModels,d=i.hoverScale,p=i.cursorStyle),!i||t.hasItemOption){var v=i&&i.itemModel?i.itemModel:t.getItemModel(e),y=v.getModel("emphasis");o=y.getModel("itemStyle").getItemStyle(),s=v.getModel(["select","itemStyle"]).getItemStyle(),a=v.getModel(["blur","itemStyle"]).getItemStyle(),l=y.get("focus"),u=y.get("blurScope"),f=Object(Vt["e"])(v),d=y.getShallow("scale"),p=v.getShallow("cursor")}var _=t.getItemVisual(e,"symbolRotate");g.attr("rotation",(_||0)*Math.PI/180||0);var b=Object(It["b"])(t.getItemVisual(e,"symbolOffset"),n);b&&(g.x=b[0],g.y=b[1]),p&&g.attr("cursor",p);var x=t.getItemVisual(e,"style"),w=x.fill;if(g instanceof h["a"]){var S=g.style;g.useStyle(Object(c["m"])({image:S.image,x:S.x,y:S.y,width:S.width,height:S.height},x))}else g.__isEmptyBrush?g.useStyle(Object(c["m"])({},x)):g.useStyle(x),g.style.decal=null,g.setColor(w,r&&r.symbolInnerColor),g.style.strokeNoScale=!0;var T=t.getItemVisual(e,"liftZ"),O=this._z2;null!=T?null==O&&(this._z2=g.z2,g.z2+=T):null!=O&&(g.z2=O,this._z2=null);var C=r&&r.useNameLabel;function M(e){return C?t.getName(e):Ft(t,e)}Object(Vt["g"])(g,f,{labelFetcher:m,labelDataIndex:e,defaultText:M,inheritColor:w,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var A=g.ensureState("emphasis");if(A.style=o,g.ensureState("select").style=s,g.ensureState("blur").style=a,d){var D=Math.max(1.1,3/this._sizeY);A.scaleX=this._sizeX*D,A.scaleY=this._sizeY*D}this.setSymbolScale(1),Object(Nt["o"])(this,l,u)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e){var n=this.childAt(0),i=this._seriesModel,r=Object(Rt["a"])(this).dataIndex,o=e&&e.animation;if(this.silent=n.silent=!0,e&&e.fadeLabel){var a=n.getTextContent();a&&jt["e"](a,{style:{opacity:0}},i,{dataIndex:r,removeOpt:o,cb:function(){n.removeTextContent()}})}else n.removeTextContent();jt["e"](n,{style:{opacity:0},scaleX:0,scaleY:0},i,{dataIndex:r,cb:t,removeOpt:o})},e.getSymbolSize=function(t,e){return Object(It["c"])(t.getItemVisual(e,"symbolSize"))},e}(Pt["a"]);function Gt(t,e){this.parent.drift(t,e)}var Ut=Ht;function Wt(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function Xt(t){return null==t||Object(c["A"])(t)||(t={isIgnore:t}),t||{}}function Yt(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),hoverScale:n.get("scale"),labelStatesModels:Object(Vt["e"])(e),cursorStyle:e.get("cursor")}}var qt=function(){function t(t){this.group=new Pt["a"],this._SymbolCtor=t||Ut}return t.prototype.updateData=function(t,e){e=Xt(e);var n=this.group,i=t.hostModel,r=this._data,o=this._SymbolCtor,a=e.disableAnimation,s=Yt(t),l={disableAnimation:a},c=e.getSymbolPoint||function(e){return t.getItemLayout(e)};r||n.removeAll(),t.diff(r).add((function(i){var r=c(i);if(Wt(t,r,i,e)){var a=new o(t,i,s,l);a.setPosition(r),t.setItemGraphicEl(i,a),n.add(a)}})).update((function(u,h){var f=r.getItemGraphicEl(h),d=c(u);if(Wt(t,d,u,e)){var p=t.getItemVisual(u,"symbol")||"circle",g=f&&f.getSymbolType&&f.getSymbolType();if(!f||g&&g!==p)n.remove(f),f=new o(t,u,s,l),f.setPosition(d);else{f.updateData(t,u,s,l);var m={x:d[0],y:d[1]};a?f.attr(m):jt["h"](f,m,i)}n.add(f),t.setItemGraphicEl(u,f)}else n.remove(f)})).remove((function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}))})).execute(),this._getSymbolPoint=c,this._data=t},t.prototype.isPersistent=function(){return!0},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,n){var i=t._getSymbolPoint(n);e.setPosition(i),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Yt(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}n=Xt(n);for(var r=t.start;r<t.end;r++){var o=e.getItemLayout(r);if(Wt(e,o,r,n)){var a=new this._SymbolCtor(e,r,this._seriesScope);a.traverse(i),a.setPosition(o),this.group.add(a),e.setItemGraphicEl(r,a)}}},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}))})):e.removeAll()},t}(),Zt=qt,Kt=n("ee1a");function $t(t,e,n){var i=t.getBaseAxis(),r=t.getOtherAxis(i),o=Jt(r,n),a=i.dim,s=r.dim,l=e.mapDimension(s),u=e.mapDimension(a),h="x"===s||"radius"===s?1:0,f=Object(c["H"])(t.dimensions,(function(t){return e.mapDimension(t)})),d=!1,p=e.getCalculationInfo("stackResultDimension");return Object(Kt["c"])(e,f[0])&&(d=!0,f[0]=p),Object(Kt["c"])(e,f[1])&&(d=!0,f[1]=p),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!d,valueDim:l,baseDim:u,baseDataOffset:h,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Jt(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}function Qt(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,a=[];return a[o]=n.get(t.baseDim,i),a[1-o]=r,e.dataToPoint(a)}var te="undefined"!==typeof Float32Array,ee=te?Float32Array:Array;function ne(t){return Object(c["t"])(t)?te?new Float32Array(t):t:new ee(t)}function ie(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}function re(t,e,n,i,r,o,a,s){for(var l=ie(t,e),c=[],u=[],h=[],f=[],d=[],p=[],g=[],m=$t(r,e,a),v=t.getLayout("points")||[],y=e.getLayout("points")||[],_=0;_<l.length;_++){var b=l[_],x=!0,w=void 0,S=void 0;switch(b.cmd){case"=":w=2*b.idx,S=2*b.idx1;var T=v[w],O=v[w+1],C=y[S],M=y[S+1];(isNaN(T)||isNaN(O))&&(T=C,O=M),c.push(T,O),u.push(C,M),h.push(n[w],n[w+1]),f.push(i[S],i[S+1]),g.push(e.getRawIndex(b.idx1));break;case"+":var A=b.idx,D=m.dataDimsForPoint,E=r.dataToPoint([e.get(D[0],A),e.get(D[1],A)]);S=2*A,c.push(E[0],E[1]),u.push(y[S],y[S+1]);var I=Qt(m,r,e,A);h.push(I[0],I[1]),f.push(i[S],i[S+1]),g.push(e.getRawIndex(A));break;case"-":x=!1}x&&(d.push(b),p.push(p.length))}p.sort((function(t,e){return g[t]-g[e]}));var P=c.length,L=ne(P),k=ne(P),j=ne(P),R=ne(P),N=[];for(_=0;_<p.length;_++){var B=p[_],F=2*_,z=2*B;L[F]=c[z],L[F+1]=c[z+1],k[F]=u[z],k[F+1]=u[z+1],j[F]=h[z],j[F+1]=h[z+1],R[F]=f[z],R[F+1]=f[z+1],N[_]=d[B]}return{current:L,next:k,stackedOnCurrent:j,stackedOnNext:R,status:N}}var oe=n("48a9"),ae=n("76a5"),se=n("e0d3"),le=n("20c8"),ce=n("4a3f"),ue=Math.min,he=Math.max;function fe(t,e){return isNaN(t)||isNaN(e)}function de(t,e,n,i,r,o,a,s,l){for(var c,u,h,f,d,p,g=n,m=0;m<i;m++){var v=e[2*g],y=e[2*g+1];if(g>=r||g<0)break;if(fe(v,y)){if(l){g+=o;continue}break}if(g===n)t[o>0?"moveTo":"lineTo"](v,y),h=v,f=y;else{var _=v-c,b=y-u;if(_*_+b*b<.5){g+=o;continue}if(a>0){var x=g+o,w=e[2*x],S=e[2*x+1];while(w===v&&S===y&&m<i)m++,x+=o,g+=o,w=e[2*x],S=e[2*x+1],v=e[2*g],y=e[2*g+1],_=v-c,b=y-u;var T=m+1;if(l)while(fe(w,S)&&T<i)T++,x+=o,w=e[2*x],S=e[2*x+1];var O=.5,C=0,M=0,A=void 0,D=void 0;if(T>=i||fe(w,S))d=v,p=y;else{C=w-c,M=S-u;var E=v-c,I=w-v,P=y-u,L=S-y,k=void 0,j=void 0;"x"===s?(k=Math.abs(E),j=Math.abs(I),d=v-k*a,p=y,A=v+k*a,D=y):"y"===s?(k=Math.abs(P),j=Math.abs(L),d=v,p=y-k*a,A=v,D=y+k*a):(k=Math.sqrt(E*E+P*P),j=Math.sqrt(I*I+L*L),O=j/(j+k),d=v-C*a*(1-O),p=y-M*a*(1-O),A=v+C*a*O,D=y+M*a*O,A=ue(A,he(w,v)),D=ue(D,he(S,y)),A=he(A,ue(w,v)),D=he(D,ue(S,y)),C=A-v,M=D-y,d=v-C*k/j,p=y-M*k/j,d=ue(d,he(c,v)),p=ue(p,he(u,y)),d=he(d,ue(c,v)),p=he(p,ue(u,y)),C=v-d,M=y-p,A=v+C*j/k,D=y+M*j/k)}t.bezierCurveTo(h,f,d,p,v,y),h=A,f=D}else t.lineTo(v,y)}c=v,u=y,g+=o}return m}var pe=function(){function t(){this.smooth=0,this.smoothConstraint=!0}return t}(),ge=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return Object(At["b"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new pe},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0;r--)if(!fe(n[2*r-2],n[2*r-1]))break;for(;i<r;i++)if(!fe(n[2*i],n[2*i+1]))break}while(i<r)i+=de(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,i,r=this.path,o=r.data,a=le["a"].CMD,s="x"===e,l=[],c=0;c<o.length;){var u=o[c++],h=void 0,f=void 0,d=void 0,p=void 0,g=void 0,m=void 0,v=void 0;switch(u){case a.M:n=o[c++],i=o[c++];break;case a.L:if(h=o[c++],f=o[c++],v=s?(t-n)/(h-n):(t-i)/(f-i),v<=1&&v>=0){var y=s?(f-i)*v+i:(h-n)*v+n;return s?[t,y]:[y,t]}n=h,i=f;break;case a.C:h=o[c++],f=o[c++],d=o[c++],p=o[c++],g=o[c++],m=o[c++];var _=s?Object(ce["f"])(n,h,d,g,t,l):Object(ce["f"])(i,f,p,m,t,l);if(_>0)for(var b=0;b<_;b++){var x=l[b];if(x<=1&&x>=0){y=s?Object(ce["a"])(i,f,p,m,x):Object(ce["a"])(n,h,d,g,x);return s?[t,y]:[y,t]}}n=g,i=m;break}}},e}(u["b"]),me=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e}(pe),ve=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new me},e.prototype.buildPath=function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,o=n.length/2,a=e.smoothMonotone;if(e.connectNulls){for(;o>0;o--)if(!fe(n[2*o-2],n[2*o-1]))break;for(;r<o;r++)if(!fe(n[2*r],n[2*r+1]))break}while(r<o){var s=de(t,n,r,o,o,1,e.smooth,a,e.connectNulls);de(t,i,r+s-1,s,o,-1,e.stackedOnSmooth,a,e.connectNulls),r+=s+1,t.closePath()}},e}(u["b"]),ye=n("e887"),_e=n("c7a2"),be=n("4aa2"),xe=n("3842");function we(t,e,n,i,r){var o=t.getArea(),a=o.x,s=o.y,l=o.width,c=o.height,u=n.get(["lineStyle","width"])||2;a-=u/2,s-=u/2,l+=u,c+=u,a=Math.floor(a),l=Math.round(l);var h=new _e["a"]({shape:{x:a,y:s,width:l,height:c}});if(e){var f=t.getBaseAxis(),d=f.isHorizontal(),p=f.inverse;d?(p&&(h.shape.x+=l),h.shape.width=0):(p||(h.shape.y+=c),h.shape.height=0);var g="function"===typeof r?function(t){r(t,h)}:null;jt["c"](h,{shape:{width:l,height:c,x:a,y:s}},n,null,i,g)}return h}function Se(t,e,n){var i=t.getArea(),r=Object(xe["v"])(i.r0,1),o=Object(xe["v"])(i.r,1),a=new be["a"]({shape:{cx:Object(xe["v"])(t.cx,1),cy:Object(xe["v"])(t.cy,1),r0:r,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});if(e){var s="angle"===t.getBaseAxis().dim;s?a.shape.endAngle=i.startAngle:a.shape.r=r,jt["c"](a,{shape:{endAngle:i.endAngle,r:o}},n)}return a}function Te(t,e,n,i,r){return t?"polar"===t.type?Se(t,e,n):"cartesian2d"===t.type?we(t,e,n,i,r):null:null}function Oe(t,e){return t.type===e}var Ce=n("eda2");function Me(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function Ae(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0;o<t.length;){var a=t[o++],s=t[o++];isNaN(a)||(e=Math.min(a,e),i=Math.max(a,i)),isNaN(s)||(n=Math.min(s,n),r=Math.max(s,r))}return[[e,n],[i,r]]}function De(t,e){var n=Ae(t),i=n[0],r=n[1],o=Ae(e),a=o[0],s=o[1];return Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]),Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]))}function Ee(t){return"number"===typeof t?t:t?.5:0}function Ie(t,e,n){if(!n.valueDim)return[];for(var i=e.count(),r=ne(2*i),o=0;o<i;o++){var a=Qt(n,t,e,o);r[2*o]=a[0],r[2*o+1]=a[1]}return r}function Pe(t,e,n){for(var i=e.getBaseAxis(),r="x"===i.dim||"radius"===i.dim?0:1,o=[],a=0,s=[],l=[],c=[];a<t.length-2;a+=2)switch(c[0]=t[a+2],c[1]=t[a+3],l[0]=t[a],l[1]=t[a+1],o.push(l[0],l[1]),n){case"end":s[r]=c[r],s[1-r]=l[1-r],o.push(s[0],s[1]);break;case"middle":var u=(l[r]+c[r])/2,h=[];s[r]=h[r]=u,s[1-r]=l[1-r],h[1-r]=c[1-r],o.push(s[0],s[1]),o.push(h[0],h[1]);break;default:s[r]=l[r],s[1-r]=c[1-r],o.push(s[0],s[1])}return o.push(t[a++],t[a++]),o}function Le(t,e){var n,i,r=[],o=t.length;function s(t,e,n){var i=t.coord,r=(n-i)/(e.coord-i),o=Object(a["lerp"])(r,[t.color,e.color]);return{coord:n,color:o}}for(var l=0;l<o;l++){var c=t[l],u=c.coord;if(u<0)n=c;else{if(u>e){i?r.push(s(i,c,e)):n&&r.push(s(n,c,0),s(n,c,e));break}n&&(r.push(s(n,c,0)),n=null),r.push(c),i=c}}return r}function ke(t,e,n){var i=t.getVisual("visualMeta");if(i&&i.length&&t.count()&&"cartesian2d"===e.type){for(var r,o,a=i.length-1;a>=0;a--){var s=t.getDimensionInfo(i[a].dimension);if(r=s&&s.coordDim,"x"===r||"y"===r){o=i[a];break}}if(o){var l=e.getAxis(r),u=c["H"](o.stops,(function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}})),h=u.length,f=o.outerColors.slice();h&&u[0].coord>u[h-1].coord&&(u.reverse(),f.reverse());var d=Le(u,"x"===r?n.getWidth():n.getHeight()),p=d.length;if(!p&&h)return u[0].coord<0?f[1]?f[1]:u[h-1].color:f[0]?f[0]:u[0].color;var g=10,m=d[0].coord-g,v=d[p-1].coord+g,y=v-m;if(y<.001)return"transparent";c["k"](d,(function(t){t.offset=(t.coord-m)/y})),d.push({offset:p?d[p-1].offset:.5,color:f[1]||"transparent"}),d.unshift({offset:p?d[0].offset:.5,color:f[0]||"transparent"});var _=new oe["a"](0,0,0,0,d,!0);return _[r]=m,_[r+"2"]=v,_}}}function je(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var o=n.getAxesByScale("ordinal")[0];if(o&&(!r||!Re(o,e))){var a=e.mapDimension(o.dim),s={};return c["k"](o.getViewLabels(),(function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);s[e]=1})),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}function Re(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),o=Math.max(1,Math.round(r/5)),a=0;a<r;a+=o)if(1.5*Ut.getSymbolSize(e,a)[t.isHorizontal()?1:0]>i)return!1;return!0}function Ne(t,e){return isNaN(t)||isNaN(e)}function Be(t){for(var e=t.length/2;e>0;e--)if(!Ne(t[2*e-2],t[2*e-1]))break;return e-1}function Fe(t,e){return[t[2*e],t[2*e+1]]}function ze(t,e,n){for(var i,r,o=t.length/2,a="x"===n?0:1,s=0,l=-1,c=0;c<o;c++)if(r=t[2*c+a],!isNaN(r)&&!isNaN(t[2*c+1-a]))if(0!==c){if(i<=e&&r>=e||i>=e&&r<=e){l=c;break}s=c,i=r}else i=r;return{range:[s,l],t:(e-i)/(r-i)}}function Ve(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<Nt["g"].length;e++)if(t.get([Nt["g"][e],"endLabel","show"]))return!0;return!1}function He(t,e,n,i){if(Oe(e,"cartesian2d")){var r=i.getModel("endLabel"),o=r.get("valueAnimation"),a=i.getData(),s={lastFrameIndex:0},l=Ve(i)?function(n,i){t._endLabelOnDuring(n,i,a,s,o,r,e)}:null,c=e.getBaseAxis().isHorizontal(),u=we(e,n,i,(function(){var e=t._endLabel;e&&n&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})}),l);if(!i.get("clip",!0)){var h=u.shape,f=Math.max(h.width,h.height);c?(h.y-=f,h.height+=2*f):(h.x-=f,h.width+=2*f)}return l&&l(1,u),u}return Se(e,n,i)}function Ge(t,e){var n=e.getBaseAxis(),i=n.isHorizontal(),r=n.inverse,o=i?r?"right":"left":"center",a=i?"middle":r?"top":"bottom";return{normal:{align:t.get("align")||o,verticalAlign:t.get("verticalAlign")||a}}}var Ue=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.init=function(){var t=new Pt["a"],e=new Zt;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var i=this,r=t.coordinateSystem,o=this.group,a=t.getData(),s=t.getModel("lineStyle"),l=t.getModel("areaStyle"),u=a.getLayout("points")||[],h="polar"===r.type,f=this._coordSys,d=this._symbolDraw,p=this._polyline,g=this._polygon,m=this._lineGroup,v=t.get("animation"),y=!l.isEmpty(),_=l.get("origin"),b=$t(r,a,_),x=y&&Ie(r,a,b),w=t.get("showSymbol"),S=w&&!h&&je(t,a,r),T=this._data;T&&T.eachItemGraphicEl((function(t,e){t.__temp&&(o.remove(t),T.setItemGraphicEl(e,null))})),w||d.remove(),o.add(m);var O,C=!h&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(O=r.getArea(),null!=O.width?(O.x-=.1,O.y-=.1,O.width+=.2,O.height+=.2):O.r0&&(O.r0-=.5,O.r+=.5)),this._clipShapeForSymbol=O;var M=ke(a,r,n)||a.getVisual("style")[a.getVisual("drawType")];if(p&&f.type===r.type&&C===this._step){y&&!g?g=this._newPolygon(u,x):g&&!y&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(t,r,Object(Ce["c"])(M));var A=m.getClipPath();if(A){var D=He(this,r,!1,t);jt["c"](A,{shape:D.shape},t)}else m.setClipPath(He(this,r,!0,t));w&&d.updateData(a,{isIgnore:S,clipShape:O,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),Me(this._stackedOnPoints,x)&&Me(this._points,u)||(v?this._doUpdateAnimation(a,x,r,n,C,_):(C&&(u=Pe(u,r,C),x&&(x=Pe(x,r,C))),p.setShape({points:u}),g&&g.setShape({points:u,stackedOnPoints:x})))}else w&&d.updateData(a,{isIgnore:S,clipShape:O,disableAnimation:!0,getSymbolPoint:function(t){return[u[2*t],u[2*t+1]]}}),v&&this._initSymbolLabelAnimation(a,r,O),C&&(u=Pe(u,r,C),x&&(x=Pe(x,r,C))),p=this._newPolyline(u),y&&(g=this._newPolygon(u,x)),h||this._initOrUpdateEndLabel(t,r,Object(Ce["c"])(M)),m.setClipPath(He(this,r,!0,t));var E=t.get(["emphasis","focus"]),I=t.get(["emphasis","blurScope"]);if(p.useStyle(c["j"](s.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"})),Object(Nt["I"])(p,t,"lineStyle"),p.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])){var P=p.getState("emphasis").style;P.lineWidth=+p.style.lineWidth+1}Object(Rt["a"])(p).seriesIndex=t.seriesIndex,Object(Nt["o"])(p,E,I);var L=Ee(t.get("smooth")),k=t.get("smoothMonotone"),j=t.get("connectNulls");if(p.setShape({smooth:L,smoothMonotone:k,connectNulls:j}),g){var R=a.getCalculationInfo("stackedOnSeries"),N=0;g.useStyle(c["j"](l.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),R&&(N=Ee(R.get("smooth"))),g.setShape({smooth:L,stackedOnSmooth:N,smoothMonotone:k,connectNulls:j}),Object(Nt["I"])(g,t,"areaStyle"),Object(Rt["a"])(g).seriesIndex=t.seriesIndex,Object(Nt["o"])(g,E,I)}var B=function(t){i._changePolyState(t)};a.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=B)})),this._polyline.onHoverStateChange=B,this._data=a,this._coordSys=r,this._stackedOnPoints=x,this._points=u,this._step=C,this._valueOrigin=_,t.get("triggerLineEvent")&&(this.packEventData(t,p),g&&this.packEventData(t,g))},e.prototype.packEventData=function(t,e){Object(Rt["a"])(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,i){var r=t.getData(),o=se["u"](r,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var a=r.getLayout("points"),s=r.getItemGraphicEl(o);if(!s){var l=a[2*o],c=a[2*o+1];if(isNaN(l)||isNaN(c))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,c))return;var u=t.get("zlevel"),h=t.get("z");s=new Ut(r,o),s.x=l,s.y=c,s.setZ(u,h);var f=s.getSymbolPath().getTextContent();f&&(f.zlevel=u,f.z=h,f.z2=this._polyline.z2+1),s.__temp=!0,r.setItemGraphicEl(o,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else ye["a"].prototype.highlight.call(this,t,e,n,i)},e.prototype.downplay=function(t,e,n,i){var r=t.getData(),o=se["u"](r,i);if(this._changePolyState("normal"),null!=o&&o>=0){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else ye["a"].prototype.downplay.call(this,t,e,n,i)},e.prototype._changePolyState=function(t){var e=this._polygon;Object(Nt["H"])(this._polyline,t),e&&Object(Nt["H"])(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new ge({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new ve({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,e,n){var i,r,o=e.getBaseAxis(),a=o.inverse;"cartesian2d"===e.type?(i=o.isHorizontal(),r=!1):"polar"===e.type&&(i="angle"===o.dim,r=!0);var s=t.hostModel,l=s.get("animationDuration");"function"===typeof l&&(l=l(null));var c=s.get("animationDelay")||0,u="function"===typeof c?c(null):c;t.eachItemGraphicEl((function(t,o){var s=t;if(s){var h=[t.x,t.y],f=void 0,d=void 0,p=void 0;if(n)if(r){var g=n,m=e.pointToCoord(h);i?(f=g.startAngle,d=g.endAngle,p=-m[1]/180*Math.PI):(f=g.r0,d=g.r,p=m[0])}else{var v=n;i?(f=v.x,d=v.x+v.width,p=t.x):(f=v.y+v.height,d=v.y,p=t.y)}var y=d===f?0:(p-f)/(d-f);a&&(y=1-y);var _="function"===typeof c?c(o):l*y+u,b=s.getSymbolPath(),x=b.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:_}),x&&x.animateFrom({style:{opacity:0}},{duration:300,delay:_}),b.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var i=t.getModel("endLabel");if(Ve(t)){var r=t.getData(),o=this._polyline,a=this._endLabel;a||(a=this._endLabel=new ae["a"]({z2:200}),a.ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var s=Be(r.getLayout("points"));s>=0&&(Object(Vt["g"])(o,Object(Vt["e"])(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:s,defaultText:function(t,e,n){return null!=n?zt(r,n):Ft(r,t)},enableTextSetter:!0},Ge(i,e)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,n,i,r,o,a){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var c=n.getLayout("points"),u=n.hostModel,h=u.get("connectNulls"),f=o.get("precision"),d=o.get("distance")||0,p=a.getBaseAxis(),g=p.isHorizontal(),m=p.inverse,v=e.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,_=(g?d:0)*(m?-1:1),b=(g?0:-d)*(m?-1:1),x=g?"x":"y",w=ze(c,y,x),S=w.range,T=S[1]-S[0],O=void 0;if(T>=1){if(T>1&&!h){var C=Fe(c,S[0]);s.attr({x:C[0]+_,y:C[1]+b}),r&&(O=u.getRawValue(S[0]))}else{C=l.getPointOn(y,x);C&&s.attr({x:C[0]+_,y:C[1]+b});var M=u.getRawValue(S[0]),A=u.getRawValue(S[1]);r&&(O=se["k"](n,f,M,A,w.t))}i.lastFrameIndex=S[0]}else{var D=1===t||i.lastFrameIndex>0?S[0]:0;C=Fe(c,D);r&&(O=u.getRawValue(D)),s.attr({x:C[0]+_,y:C[1]+b})}r&&Object(Vt["f"])(s).setLabelText(O)}},e.prototype._doUpdateAnimation=function(t,e,n,i,r,o){var a=this._polyline,s=this._polygon,l=t.hostModel,c=re(this._data,t,this._stackedOnPoints,e,this._coordSys,n,this._valueOrigin,o),u=c.current,h=c.stackedOnCurrent,f=c.next,d=c.stackedOnNext;if(r&&(u=Pe(c.current,n,r),h=Pe(c.stackedOnCurrent,n,r),f=Pe(c.next,n,r),d=Pe(c.stackedOnNext,n,r)),De(u,f)>3e3||s&&De(h,d)>3e3)return a.stopAnimation(),a.setShape({points:f}),void(s&&(s.stopAnimation(),s.setShape({points:f,stackedOnPoints:d})));a.shape.__points=c.current,a.shape.points=u;var p={shape:{points:f}};c.current!==u&&(p.shape.__points=c.next),a.stopAnimation(),jt["h"](a,p,l),s&&(s.setShape({points:u,stackedOnPoints:h}),s.stopAnimation(),jt["h"](s,{shape:{stackedOnPoints:d}},l),a.shape.points!==s.shape.points&&(s.shape.points=a.shape.points));for(var g=[],m=c.status,v=0;v<m.length;v++){var y=m[v].cmd;if("="===y){var _=t.getItemGraphicEl(m[v].idx1);_&&g.push({el:_,ptIdx:v})}}a.animators&&a.animators.length&&a.animators[0].during((function(){s&&s.dirtyShape();for(var t=a.shape.__points,e=0;e<g.length;e++){var n=g[e].el,i=2*g[e].ptIdx;n.x=t[i],n.y=t[i+1],n.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(ye["a"]),We=Ue,Xe=n("cccd");function Ye(t,e){return{seriesType:t,plan:Object(Xe["a"])(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(i){var a=Object(c["H"])(i.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=a.length,l=n.getCalculationInfo("stackResultDimension");Object(Kt["c"])(n,a[0])&&(a[0]=l),Object(Kt["c"])(n,a[1])&&(a[1]=l);var u=n.getStore(),h=n.getDimensionIndex(a[0]),f=n.getDimensionIndex(a[1]);return s&&{progress:function(t,e){for(var n=t.end-t.start,r=o&&ne(n*s),a=[],l=[],c=t.start,d=0;c<t.end;c++){var p=void 0;if(1===s){var g=u.get(h,c);p=i.dataToPoint(g,null,l)}else a[0]=u.get(h,c),a[1]=u.get(f,c),p=i.dataToPoint(a,null,l);o?(r[d++]=p[0],r[d++]=p[1]):e.setItemLayout(c,p.slice())}o&&e.setLayout("points",r)}}}}}}var qe={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},nearest:function(t){return t[0]}},Ze=function(t){return Math.round(t.length/2)};function Ke(t){return{seriesType:t,reset:function(t,e,n){var i=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,a=i.count();if(a>10&&"cartesian2d"===o.type&&r){var s=o.getBaseAxis(),l=o.getOtherAxis(s),c=s.getExtent(),u=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(u||1),f=Math.round(a/h);if(f>1){"lttb"===r&&t.setData(i.lttbDownSample(i.mapDimension(l.dim),1/f));var d=void 0;"string"===typeof r?d=qe[r]:"function"===typeof r&&(d=r),d&&t.setData(i.downSample(i.mapDimension(l.dim),1/f,d,Ze))}}}}}function $e(t){t.registerChartView(We),t.registerSeriesModel(kt),t.registerLayout(Ye("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Ke("line"))}var Je=n("9d57"),Qe=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t){var e=this.coordinateSystem;if(e&&e.clampData){var n=e.dataToPoint(e.clampData(t)),i=this.getData(),r=i.getLayout("offset"),o=i.getLayout("size"),a=e.getBaseAxis().isHorizontal()?0:1;return n[a]+=r+o/2,n}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(Et["b"]);Et["b"].registerClass(Qe);var tn=Qe,en=n("8918"),nn=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(){return Object(Dt["a"])(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=Object(en["d"])(tn.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(tn),rn=nn,on=n("88b3"),an=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return t}(),sn=function(t){function e(e){var n=t.call(this,e)||this;return n.type="sausage",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new an},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=.5*(o-r),s=r+a,l=e.startAngle,c=e.endAngle,u=e.clockwise,h=Math.cos(l),f=Math.sin(l),d=Math.cos(c),p=Math.sin(c),g=u?c-l<2*Math.PI:l-c<2*Math.PI;g&&(t.moveTo(h*r+n,f*r+i),t.arc(h*s+n,f*s+i,a,-Math.PI+l,l,!u)),t.arc(n,i,o,l,c,!u),t.moveTo(d*o+n,p*o+i),t.arc(d*s+n,p*s+i,a,c-2*Math.PI,c-Math.PI,!u),0!==r&&(t.arc(n,i,r,c,l,u),t.moveTo(h*r+n,p*r+i)),t.closePath()},e}(u["b"]),ln=sn;function cn(t,e){e=e||{};var n=e.isRoundCap;return function(e,i,r){var o=i.position;if(!o||o instanceof Array)return Object(b["d"])(e,i,r);var a=t(o),s=null!=i.distance?i.distance:5,l=this.shape,c=l.cx,u=l.cy,h=l.r,f=l.r0,d=(h+f)/2,p=l.startAngle,g=l.endAngle,m=(p+g)/2,v=n?Math.abs(h-f)/2:0,y=Math.cos,_=Math.sin,x=c+h*y(p),w=u+h*_(p),S="left",T="top";switch(a){case"startArc":x=c+(f-s)*y(m),w=u+(f-s)*_(m),S="center",T="top";break;case"insideStartArc":x=c+(f+s)*y(m),w=u+(f+s)*_(m),S="center",T="bottom";break;case"startAngle":x=c+d*y(p)+hn(p,s+v,!1),w=u+d*_(p)+fn(p,s+v,!1),S="right",T="middle";break;case"insideStartAngle":x=c+d*y(p)+hn(p,-s+v,!1),w=u+d*_(p)+fn(p,-s+v,!1),S="left",T="middle";break;case"middle":x=c+d*y(m),w=u+d*_(m),S="center",T="middle";break;case"endArc":x=c+(h+s)*y(m),w=u+(h+s)*_(m),S="center",T="bottom";break;case"insideEndArc":x=c+(h-s)*y(m),w=u+(h-s)*_(m),S="center",T="top";break;case"endAngle":x=c+d*y(g)+hn(g,s+v,!0),w=u+d*_(g)+fn(g,s+v,!0),S="left",T="middle";break;case"insideEndAngle":x=c+d*y(g)+hn(g,-s+v,!0),w=u+d*_(g)+fn(g,-s+v,!0),S="right",T="middle";break;default:return Object(b["d"])(e,i,r)}return e=e||{},e.x=x,e.y=w,e.align=S,e.verticalAlign=T,e}}function un(t,e,n,i){if("number"!==typeof i)if(Object(c["t"])(e))t.setTextConfig({rotation:0});else{var r,o=t.shape,a=o.clockwise?o.startAngle:o.endAngle,s=o.clockwise?o.endAngle:o.startAngle,l=(a+s)/2,u=n(e);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":r=l;break;case"startAngle":case"insideStartAngle":r=a;break;case"endAngle":case"insideEndAngle":r=s;break;default:return void t.setTextConfig({rotation:0})}var h=1.5*Math.PI-r;"middle"===u&&h>Math.PI/2&&h<1.5*Math.PI&&(h-=Math.PI),t.setTextConfig({rotation:h})}else t.setTextConfig({rotation:i})}function hn(t,e,n){return e*Math.sin(t)*(n?-1:1)}function fn(t,e,n){return e*Math.cos(t)*(n?1:-1)}var dn=[0,0],pn=Math.max,gn=Math.min;function mn(t,e){var n=t.getArea&&t.getArea();if(Oe(t,"cartesian2d")){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=r,n.width+=2*r):(n.y-=r,n.height+=2*r)}}return n}var vn=function(t){function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var r=t.get("coordinateSystem");("cartesian2d"===r||"polar"===r)&&(this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._incrementalRenderLarge(t,e)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,n,i){var r,o=this.group,a=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis();"cartesian2d"===l.type?r=c.isHorizontal():"polar"===l.type&&(r="angle"===c.dim);var u=t.isAnimationEnabled()?t:null,h=bn(t,l);h&&this._enableRealtimeSort(h,a,n);var f=t.get("clip",!0)||h,d=mn(l,a);o.removeClipPath();var p=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],_=this._backgroundEls,b=i&&i.isInitSort,x=i&&"changeAxisOrder"===i.type;function w(t){var e=Cn[l.type](a,t),n=Fn(l,r,e);return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type&&n.setShape("r",v),y[t]=n,n}a.diff(s).add((function(e){var n=a.getItemModel(e),i=Cn[l.type](a,e,n);if(g&&w(e),a.hasValue(e)&&On[l.type](i)){var s=!1;f&&(s=yn[l.type](d,i));var m=_n[l.type](t,a,e,i,r,u,c.model,!1,p);h&&(m.forceLabelAnimation=!0),Dn(m,a,e,n,i,t,r,"polar"===l.type),b?m.attr({shape:i}):h?xn(h,u,m,i,e,r,!1,!1):Object(jt["c"])(m,{shape:i},t,e),a.setItemGraphicEl(e,m),o.add(m),m.ignore=s}})).update((function(e,n){var i=a.getItemModel(e),S=Cn[l.type](a,e,i);if(g){var T=void 0;0===_.length?T=w(n):(T=_[n],T.useStyle(m.getItemStyle()),"cartesian2d"===l.type&&T.setShape("r",v),y[e]=T);var O=Cn[l.type](a,e),C=Bn(r,O,l);Object(jt["h"])(T,{shape:C},u,e)}var M=s.getItemGraphicEl(n);if(a.hasValue(e)&&On[l.type](S)){var A=!1;if(f&&(A=yn[l.type](d,S),A&&o.remove(M)),M?Object(jt["g"])(M):M=_n[l.type](t,a,e,S,r,u,c.model,!!M,p),h&&(M.forceLabelAnimation=!0),x){var D=M.getTextContent();if(D){var E=Object(Vt["f"])(D);null!=E.prevValue&&(E.prevValue=E.value)}}x||Dn(M,a,e,i,S,t,r,"polar"===l.type),b?M.attr({shape:S}):h?xn(h,u,M,S,e,r,!0,x):Object(jt["h"])(M,{shape:S},t,e,null),a.setItemGraphicEl(e,M),M.ignore=A,o.add(M)}else o.remove(M)})).remove((function(e){var n=s.getItemGraphicEl(e);n&&Object(jt["f"])(n,t,e)})).execute();var S=this._backgroundGroup||(this._backgroundGroup=new Pt["a"]);S.removeAll();for(var T=0;T<y.length;++T)S.add(y[T]);o.add(S),this._backgroundEls=y,this._data=a},e.prototype._renderLarge=function(t,e,n){this._clear(),Ln(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),Ln(e,this.group,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)?Te(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,n){var i=this;if(e.count()){var r=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var o=function(t){var n=e.getItemGraphicEl(t);if(n){var i=n.shape;return(r.isHorizontal()?Math.abs(i.height):Math.abs(i.width))||0}return 0};this._onRendered=function(){i._updateSortWithinSameData(e,o,r,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,n){var i=[];return t.each(t.mapDimension(e.dim),(function(t,e){var r=n(e);r=null==r?NaN:r,i.push({dataIndex:e,mappedValue:r,ordinalNumber:t})})),i.sort((function(t,e){return e.mappedValue-t.mappedValue})),{ordinalNumbers:Object(c["H"])(i,(function(t){return t.ordinalNumber}))}},e.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var i=n.scale,r=t.mapDimension(n.dim),o=Number.MAX_VALUE,a=0,s=i.getOrdinalMeta().categories.length;a<s;++a){var l=t.rawIndexOf(r,i.getRawOrdinalNumber(a)),c=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(c>o)return!0;o=c}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,i=n.getExtent(),r=Math.max(0,i[0]),o=Math.min(i[1],n.getOrdinalMeta().categories.length-1);r<=o;++r)if(t.ordinalNumbers[r]!==n.getRawOrdinalNumber(r))return!0},e.prototype._updateSortWithinSameData=function(t,e,n,i){if(this._isOrderChangedWithinSameData(t,e,n)){var r=this._dataSort(t,n,e);this._isOrderDifferentInView(r,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:r}))}},e.prototype._dispatchInitSort=function(t,e,n){var i=e.baseAxis,r=this._dataSort(t,i,(function(n){return t.get(t.mapDimension(e.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:r})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(e){Object(jt["f"])(e,t,Object(Rt["a"])(e).dataIndex)}))):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(ye["a"]),yn={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=t.x+t.width,o=t.y+t.height,a=pn(e.x,t.x),s=gn(e.x+e.width,r),l=pn(e.y,t.y),c=gn(e.y+e.height,o),u=s<a,h=c<l;return e.x=u&&a>r?s:a,e.y=h&&l>o?c:l,e.width=u?0:s-a,e.height=h?0:c-l,n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}var r=gn(e.r,t.r),o=pn(e.r0,t.r0);e.r=r,e.r0=o;var a=r-o<0;if(n<0){i=e.r;e.r=e.r0,e.r0=i}return a}},_n={cartesian2d:function(t,e,n,i,r,o,a,s,l){var u=new _e["a"]({shape:Object(c["m"])({},i),z2:1});if(u.__dataIndex=n,u.name="item",o){var h=u.shape,f=r?"height":"width";h[f]=0}return u},polar:function(t,e,n,i,r,o,a,s,l){var c=!r&&l?ln:be["a"],u=new c({shape:i,z2:1});u.name="item";var h=An(r);if(u.calculateTextPosition=cn(h,{isRoundCap:c===ln}),o){var f=u.shape,d=r?"r":"endAngle",p={};f[d]=r?0:i.startAngle,p[d]=i[d],(s?jt["h"]:jt["c"])(u,{shape:p},o)}return u}};function bn(t,e){var n=t.get("realtimeSort",!0),i=e.getBaseAxis();if(n&&"category"===i.type&&"cartesian2d"===e.type)return{baseAxis:i,otherAxis:e.getOtherAxis(i)}}function xn(t,e,n,i,r,o,a,s){var l,c;o?(c={x:i.x,width:i.width},l={y:i.y,height:i.height}):(c={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(a?jt["h"]:jt["c"])(n,{shape:l},e,r,null);var u=e?t.baseAxis.model:null;(a?jt["h"]:jt["c"])(n,{shape:c},u,r)}function wn(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var Sn=["x","y","width","height"],Tn=["cx","cy","r","startAngle","endAngle"],On={cartesian2d:function(t){return!wn(t,Sn)},polar:function(t){return!wn(t,Tn)}},Cn={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=n?En(n,i):0,o=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+o*r/2,y:i.y+a*r/2,width:i.width-o*r,height:i.height-a*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function Mn(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}function An(t){return function(t){var e=t?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(t)}function Dn(t,e,n,i,r,o,a,s){var l=e.getItemVisual(n,"style");s||t.setShape("r",i.get(["itemStyle","borderRadius"])||0),t.useStyle(l);var u=i.getShallow("cursor");u&&t.attr("cursor",u);var h=s?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",f=Object(Vt["e"])(i);Object(Vt["g"])(t,f,{labelFetcher:o,labelDataIndex:n,defaultText:Ft(o.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:h});var d=t.getTextContent();if(s&&d){var p=i.get(["label","position"]);t.textConfig.inside="middle"===p||null,un(t,"outside"===p?h:p,An(a),i.get(["label","rotate"]))}Object(Vt["h"])(d,f,o.getRawValue(n),(function(t){return zt(e,t)}));var g=i.getModel(["emphasis"]);Object(Nt["o"])(t,g.get("focus"),g.get("blurScope")),Object(Nt["I"])(t,i),Mn(r)&&(t.style.fill="none",t.style.stroke="none",Object(c["k"])(t.states,(function(t){t.style&&(t.style.fill=t.style.stroke="none")})))}function En(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var i=t.get(["itemStyle","borderWidth"])||0,r=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),o=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(i,r,o)}var In=function(){function t(){}return t}(),Pn=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeBar",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new In},e.prototype.buildPath=function(t,e){for(var n=e.points,i=this.__startPoint,r=this.__baseDimIdx,o=0;o<n.length;o+=2)i[r]=n[o+r],t.moveTo(i[0],i[1]),t.lineTo(n[o],n[o+1])},e}(u["b"]);function Ln(t,e,n){var i=t.getData(),r=[],o=i.getLayout("valueAxisHorizontal")?1:0;r[1-o]=i.getLayout("valueAxisStart");var a=i.getLayout("largeDataIndices"),s=i.getLayout("barWidth"),l=t.getModel("backgroundStyle"),c=t.get("showBackground",!0);if(c){var u=i.getLayout("largeBackgroundPoints"),h=[];h[1-o]=i.getLayout("backgroundStart");var f=new Pn({shape:{points:u},incremental:!!n,silent:!0,z2:0});f.__startPoint=h,f.__baseDimIdx=o,f.__largeDataIndices=a,f.__barWidth=s,Nn(f,l,i),e.add(f)}var d=new Pn({shape:{points:i.getLayout("largePoints")},incremental:!!n});d.__startPoint=r,d.__baseDimIdx=o,d.__largeDataIndices=a,d.__barWidth=s,e.add(d),Rn(d,t,i),Object(Rt["a"])(d).seriesIndex=t.seriesIndex,t.get("silent")||(d.on("mousedown",kn),d.on("mousemove",kn))}var kn=Object(on["c"])((function(t){var e=this,n=jn(e,t.offsetX,t.offsetY);Object(Rt["a"])(e).dataIndex=n>=0?n:null}),30,!1);function jn(t,e,n){var i=t.__baseDimIdx,r=1-i,o=t.shape.points,a=t.__largeDataIndices,s=Math.abs(t.__barWidth/2),l=t.__startPoint[r];dn[0]=e,dn[1]=n;for(var c=dn[i],u=dn[1-i],h=c-s,f=c+s,d=0,p=o.length/2;d<p;d++){var g=2*d,m=o[g+i],v=o[g+r];if(m>=h&&m<=f&&(l<=v?u>=l&&u<=v:u>=v&&u<=l))return a[d]}return-1}function Rn(t,e,n){var i=n.getVisual("style");t.useStyle(Object(c["m"])({},i)),t.style.fill=null,t.style.stroke=i.fill,t.style.lineWidth=n.getLayout("barWidth")}function Nn(t,e,n){var i=e.get("borderColor")||e.get("color"),r=e.getItemStyle();t.useStyle(r),t.style.fill=null,t.style.stroke=i,t.style.lineWidth=n.getLayout("barWidth")}function Bn(t,e,n){if(Oe(n,"cartesian2d")){var i=e,r=n.getArea();return{x:t?i.x:r.x,y:t?r.y:i.y,width:t?i.width:r.width,height:t?r.height:i.height}}r=n.getArea();var o=e;return{cx:r.cx,cy:r.cy,r0:t?r.r0:o.r0,r:t?r.r:o.r,startAngle:t?o.startAngle:0,endAngle:t?o.endAngle:2*Math.PI}}function Fn(t,e,n){var i="polar"===t.type?be["a"]:_e["a"];return new i({shape:Bn(e,n,t),silent:!0,z2:0})}var zn=vn;function Vn(t){t.registerChartView(zn),t.registerSeriesModel(rn),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,c["i"](Je["c"],"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Je["b"]),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,Ke("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},(function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)}))}))}var Hn=n("f3bb"),Gn=n("f934"),Un=2*Math.PI,Wn=Math.PI/180;function Xn(t,e){return Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Yn(t,e){var n=Xn(t,e),i=t.get("center"),r=t.get("radius");c["t"](r)||(r=[0,r]),c["t"](i)||(i=[i,i]);var o=Object(xe["p"])(n.width,e.getWidth()),a=Object(xe["p"])(n.height,e.getHeight()),s=Math.min(o,a),l=Object(xe["p"])(i[0],o)+n.x,u=Object(xe["p"])(i[1],a)+n.y,h=Object(xe["p"])(r[0],s/2),f=Object(xe["p"])(r[1],s/2);return{cx:l,cy:u,r0:h,r:f}}function qn(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.getData(),i=e.mapDimension("value"),r=Xn(t,n),o=Yn(t,n),a=o.cx,s=o.cy,l=o.r,c=o.r0,u=-t.get("startAngle")*Wn,h=t.get("minAngle")*Wn,f=0;e.each(i,(function(t){!isNaN(t)&&f++}));var d=e.getSum(i),p=Math.PI/(d||f)*2,g=t.get("clockwise"),m=t.get("roseType"),v=t.get("stillShowZeroSum"),y=e.getDataExtent(i);y[0]=0;var _=Un,b=0,x=u,w=g?1:-1;if(e.setLayout({viewRect:r,r:l}),e.each(i,(function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:g,cx:a,cy:s,r0:c,r:m?NaN:l});else{i="area"!==m?0===d&&v?p:t*p:Un/f,i<h?(i=h,_-=h):b+=t;var r=x+w*i;e.setItemLayout(n,{angle:i,startAngle:x,endAngle:r,clockwise:g,cx:a,cy:s,r0:c,r:m?Object(xe["l"])(t,y,[c,l]):l}),x=r}})),_<Un&&f)if(_<=.001){var S=Un/f;e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=S,i.startAngle=u+w*n*S,i.endAngle=u+w*(n+1)*S}}))}else p=_/b,x=u,e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===h?h:t*p;i.startAngle=x,i.endAngle=x+w*r,x+=w*r}}))}))}function Zn(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf((function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0}))}}}}var Kn=n("d498"),$n=n("dce8"),Jn=n("89b6"),Qn=n("2355"),ti=Math.PI/180;function ei(t,e,n,i,r,o,a,s,l,c){if(!(t.length<2)){for(var u=t.length,h=0;h<u;h++)if("outer"===t[h].position&&"labelLine"===t[h].labelAlignTo){var f=t[h].label.x-c;t[h].linePoints[1][0]+=f,t[h].label.x=c}Object(Qn["d"])(t,l,l+a)&&p(t)}function d(t){for(var o=t.rB,a=o*o,s=0;s<t.list.length;s++){var l=t.list[s],c=Math.abs(l.label.y-n),u=i+l.len,h=u*u,f=Math.sqrt((1-Math.abs(c*c/a))*h);l.label.x=e+(f+l.len2)*r}}function p(t){for(var o={list:[],maxY:0},a={list:[],maxY:0},s=0;s<t.length;s++)if("none"===t[s].labelAlignTo){var l=t[s],c=l.label.y>n?a:o,u=Math.abs(l.label.y-n);if(u>c.maxY){var h=l.label.x-e-l.len2*r,f=i+l.len,p=Math.abs(h)<f?Math.sqrt(u*u/(1-h*h/f/f)):f;c.rB=p,c.maxY=u}c.list.push(l)}d(o),d(a)}}function ni(t,e,n,i,r,o,a,s){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,f=0;f<t.length;f++){var d=t[f].label;ii(t[f])||(d.x<e?(u=Math.min(u,d.x),l.push(t[f])):(h=Math.max(h,d.x),c.push(t[f])))}ei(c,e,n,i,1,r,o,a,s,h),ei(l,e,n,i,-1,r,o,a,s,u);for(f=0;f<t.length;f++){var p=t[f];d=p.label;if(!ii(p)){var g=p.linePoints;if(g){var m="edge"===p.labelAlignTo,v=p.rect.width,y=void 0;y=m?d.x<e?g[2][0]-p.labelDistance-a-p.edgeDistance:a+r-p.edgeDistance-g[2][0]-p.labelDistance:d.x<e?d.x-a-p.bleedMargin:a+r-d.x-p.bleedMargin,y<p.rect.width&&(p.label.style.width=y,"edge"===p.labelAlignTo&&(v=y));var _=g[1][0]-g[2][0];m?d.x<e?g[2][0]=a+p.edgeDistance+v+p.labelDistance:g[2][0]=a+r-p.edgeDistance-v-p.labelDistance:(d.x<e?g[2][0]=d.x+p.labelDistance:g[2][0]=d.x-p.labelDistance,g[1][0]=g[2][0]+_),g[1][1]=g[2][1]=d.y}}}}function ii(t){return"center"===t.position}function ri(t){var e,n,i=t.getData(),r=[],o=!1,a=(t.get("minShowLabelAngle")||0)*ti,s=i.getLayout("viewRect"),l=i.getLayout("r"),u=s.width,h=s.x,f=s.y,d=s.height;function p(t){t.ignore=!0}function g(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}i.each((function(t){var s=i.getItemGraphicEl(t),f=s.shape,d=s.getTextContent(),m=s.getTextGuideLine(),v=i.getItemModel(t),y=v.getModel("label"),_=y.get("position")||v.get(["emphasis","label","position"]),b=y.get("distanceToLabelLine"),x=y.get("alignTo"),w=Object(xe["p"])(y.get("edgeDistance"),u),S=y.get("bleedMargin"),T=v.getModel("labelLine"),O=T.get("length");O=Object(xe["p"])(O,u);var C=T.get("length2");if(C=Object(xe["p"])(C,u),Math.abs(f.endAngle-f.startAngle)<a)return Object(c["k"])(d.states,p),void(d.ignore=!0);if(g(d)){var M,A,D,E,I=(f.startAngle+f.endAngle)/2,P=Math.cos(I),L=Math.sin(I);e=f.cx,n=f.cy;var k,j="inside"===_||"inner"===_;if("center"===_)M=f.cx,A=f.cy,E="center";else{var R=(j?(f.r+f.r0)/2*P:f.r*P)+e,N=(j?(f.r+f.r0)/2*L:f.r*L)+n;if(M=R+3*P,A=N+3*L,!j){var B=R+P*(O+l-f.r),F=N+L*(O+l-f.r),z=B+(P<0?-1:1)*C,V=F;M="edge"===x?P<0?h+w:h+u-w:z+(P<0?-b:b),A=V,D=[[R,N],[B,F],[z,V]]}E=j?"center":"edge"===x?P>0?"right":"left":P>0?"left":"right"}var H=y.get("rotate");if("number"===typeof H)k=H*(Math.PI/180);else if("center"===_)k=0;else{var G=P<0?-I+Math.PI:-I;"radial"===H||!0===H?k=G:"tangential"===H&&"outside"!==_&&"outer"!==_?(k=G+Math.PI/2,k>Math.PI/2&&(k-=Math.PI)):k=0}if(o=!!k,d.x=M,d.y=A,d.rotation=k,d.setStyle({verticalAlign:"middle"}),j){d.setStyle({align:E});var U=d.states.select;U&&(U.x+=d.x,U.y+=d.y)}else{var W=d.getBoundingRect().clone();W.applyTransform(d.getComputedTransform());var X=(d.style.margin||0)+2.1;W.y-=X/2,W.height+=X,r.push({label:d,labelLine:m,position:_,len:O,len2:C,minTurnAngle:T.get("minTurnAngle"),maxSurfaceAngle:T.get("maxSurfaceAngle"),surfaceNormal:new $n["a"](P,L),linePoints:D,textAlign:E,labelDistance:b,labelAlignTo:x,edgeDistance:w,bleedMargin:S,rect:W})}s.setTextConfig({inside:j})}})),!o&&t.get("avoidLabelOverlap")&&ni(r,e,n,l,u,d,h,f);for(var m=0;m<r.length;m++){var v=r[m],y=v.label,_=v.labelLine,b=isNaN(y.x)||isNaN(y.y);if(y){y.setStyle({align:v.textAlign}),b&&(Object(c["k"])(y.states,p),y.ignore=!0);var x=y.states.select;x&&(x.x+=y.x,x.y+=y.y)}if(_){var w=v.linePoints;b||!w?(Object(c["k"])(_.states,p),_.ignore=!0):(Object(Jn["c"])(w,v.minTurnAngle),Object(Jn["b"])(w,v.surfaceNormal,v.maxSurfaceAngle),_.setShape({points:w}),y.__hostTarget.textGuideLineConfig={anchor:new $n["a"](w[0][0],w[0][1])})}}}function oi(t,e,n){var i=t.get("borderRadius");return null==i?n?{innerCornerRadius:0,cornerRadius:0}:null:(Object(c["t"])(i)||(i=[i,i]),{innerCornerRadius:Object(b["h"])(i[0],e.r0),cornerRadius:Object(b["h"])(i[1],e.r)})}var ai=function(t){function e(e,n,i){var r=t.call(this)||this;r.z2=2;var o=new ae["a"];return r.setTextContent(o),r.updateData(e,n,i,!0),r}return Object(At["b"])(e,t),e.prototype.updateData=function(t,e,n,i){var r=this,o=t.hostModel,a=t.getItemModel(e),s=a.getModel("emphasis"),l=t.getItemLayout(e),u=Object(c["m"])(oi(a.getModel("itemStyle"),l,!0),l);if(isNaN(u.startAngle))r.setShape(u);else{if(i){r.setShape(u);var h=o.getShallow("animationType");"scale"===h?(r.shape.r=l.r0,jt["c"](r,{shape:{r:l.r}},o,e)):null!=n?(r.setShape({startAngle:n,endAngle:n}),jt["c"](r,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},o,e)):(r.shape.endAngle=l.startAngle,jt["h"](r,{shape:{endAngle:l.endAngle}},o,e))}else Object(jt["g"])(r),jt["h"](r,{shape:u},o,e);r.useStyle(t.getItemVisual(e,"style")),Object(Nt["I"])(r,a);var f=(l.startAngle+l.endAngle)/2,d=o.get("selectedOffset"),p=Math.cos(f)*d,g=Math.sin(f)*d,m=a.getShallow("cursor");m&&r.attr("cursor",m),this._updateLabel(o,t,e),r.ensureState("emphasis").shape=Object(At["a"])({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},oi(s.getModel("itemStyle"),l)),Object(c["m"])(r.ensureState("select"),{x:p,y:g,shape:oi(a.getModel(["select","itemStyle"]),l)}),Object(c["m"])(r.ensureState("blur"),{shape:oi(a.getModel(["blur","itemStyle"]),l)});var v=r.getTextGuideLine(),y=r.getTextContent();v&&Object(c["m"])(v.ensureState("select"),{x:p,y:g}),Object(c["m"])(y.ensureState("select"),{x:p,y:g}),Object(Nt["o"])(this,s.get("focus"),s.get("blurScope"))}},e.prototype._updateLabel=function(t,e,n){var i=this,r=e.getItemModel(n),o=r.getModel("labelLine"),a=e.getItemVisual(n,"style"),s=a&&a.fill,l=a&&a.opacity;Object(Vt["g"])(i,Object(Vt["e"])(r),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:l,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var u=i.getTextContent();i.setTextConfig({position:null,rotation:null}),u.attr({z2:10});var h=t.get(["label","position"]);if("outside"!==h&&"outer"!==h)i.removeTextGuideLine();else{var f=this.getTextGuideLine();f||(f=new Kn["a"],this.setTextGuideLine(f)),Object(Jn["d"])(this,Object(Jn["a"])(r),{stroke:s,opacity:Object(c["Q"])(o.get(["lineStyle","opacity"]),l,1)})}},e}(be["a"]),si=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return Object(At["b"])(e,t),e.prototype.init=function(){var t=new Pt["a"];this._sectorGroup=t},e.prototype.render=function(t,e,n,i){var r,o=t.getData(),a=this._data,s=this.group;if(!a&&o.count()>0){for(var l=o.getItemLayout(0),c=1;isNaN(l&&l.startAngle)&&c<o.count();++c)l=o.getItemLayout(c);l&&(r=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var u=new be["a"]({shape:Yn(t,n)});u.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,s.add(u)}o.diff(a).add((function(t){var e=new ai(o,t,r);o.setItemGraphicEl(t,e),s.add(e)})).update((function(t,e){var n=a.getItemGraphicEl(e);n.updateData(o,t,r),n.off("click"),s.add(n),o.setItemGraphicEl(t,n)})).remove((function(e){var n=a.getItemGraphicEl(e);jt["f"](n,t,e)})).execute(),ri(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var n=e.getData(),i=n.getItemLayout(0);if(i){var r=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(r*r+o*o);return a<=i.r&&a>=i.r0}},e.type="pie",e}(ye["a"]),li=si,ci=n("b1d4"),ui=n("b682");function hi(t,e,n){e=Object(c["t"])(e)&&{coordDimensions:e}||Object(c["m"])({encodeDefine:t.getEncode()},e);var i=t.getSource(),r=Object(ci["b"])(i,e).dimensions,o=new ui["a"](r,t);return o.initData(i,n),o}var fi=n("0f99"),di=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){var e=this._getRawData();return e.indexOfName(t)>=0},t.prototype.indexOfName=function(t){var e=this._getDataWithEncodedVisual();return e.indexOfName(t)},t.prototype.getItemVisual=function(t,e){var n=this._getDataWithEncodedVisual();return n.getItemVisual(t,e)},t}(),pi=di,gi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new pi(c["c"](this.getData,this),c["c"](this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return hi(this,{coordDimensions:["value"],encodeDefaulter:c["i"](fi["d"],this)})},e.prototype.getDataParams=function(e){var n=this.getData(),i=t.prototype.getDataParams.call(this,e),r=[];return n.each(n.mapDimension("value"),(function(t){r.push(t)})),i.percent=Object(xe["e"])(r,e,n.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},e.prototype._defaultLabelLine=function(t){se["f"](t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={zlevel:0,z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(Et["b"]),mi=gi;function vi(t){return{seriesType:t,reset:function(t,e){var n=t.getData();n.filterSelf((function(t){var e=n.mapDimension("value"),i=n.get(e,t);return!("number"===typeof i&&!isNaN(i)&&i<0)}))}}}function yi(t){t.registerChartView(li),t.registerSeriesModel(mi),Object(Hn["a"])("pie",t.registerAction),t.registerLayout(Object(c["i"])(qn,"pie")),t.registerProcessor(Zn("pie")),t.registerProcessor(vi("pie"))}var _i=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(Et["b"]),bi=_i,xi=n("392f"),wi=4,Si=function(){function t(){}return t}(),Ti=function(t){function e(e){return t.call(this,e)||this}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new Si},e.prototype.buildPath=function(t,e){var n=e.points,i=e.size,r=this.symbolProxy,o=r.shape,a=t.getContext?t.getContext():t,s=a&&i[0]<wi;if(s)this._ctx=a;else{this._ctx=null;for(var l=0;l<n.length;){var c=n[l++],u=n[l++];isNaN(c)||isNaN(u)||(this.softClipShape&&!this.softClipShape.contain(c,u)||(o.x=c-i[0]/2,o.y=u-i[1]/2,o.width=i[0],o.height=i[1],r.buildPath(t,o,!0)))}}},e.prototype.afterBrush=function(){var t=this.shape,e=t.points,n=t.size,i=this._ctx;if(i)for(var r=0;r<e.length;){var o=e[r++],a=e[r++];isNaN(o)||isNaN(a)||(this.softClipShape&&!this.softClipShape.contain(o,a)||i.fillRect(o-n[0]/2,a-n[1]/2,n[0],n[1]))}},e.prototype.findDataIndex=function(t,e){for(var n=this.shape,i=n.points,r=n.size,o=Math.max(r[0],4),a=Math.max(r[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,c=i[l]-o/2,u=i[l+1]-a/2;if(t>=c&&e>=u&&t<=c+o&&e<=u+a)return s}return-1},e}(u["b"]),Oi=function(){function t(){this.group=new Pt["a"]}return t.prototype.isPersistent=function(){return!this._incremental},t.prototype.updateData=function(t,e){this.group.removeAll();var n=new Ti({rectHover:!0,cursor:"default"});n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,!1,e),this.group.add(n),this._incremental=null},t.prototype.updateLayout=function(t){if(!this._incremental){var e=t.getLayout("points");this.group.eachChild((function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),i=4*t.startIndex*2;e=new Float32Array(e.buffer,i,n)}t.setShape("points",e)}))}},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>2e6?(this._incremental||(this._incremental=new xi["a"]({silent:!0})),this.group.add(this._incremental)):this._incremental=null},t.prototype.incrementalUpdate=function(t,e,n){var i;this._incremental?(i=new Ti,this._incremental.addDisplayable(i,!0)):(i=new Ti({rectHover:!0,cursor:"default",startIndex:t.start,endIndex:t.end}),i.incremental=!0,this.group.add(i)),i.setShape({points:e.getLayout("points")}),this._setCommon(i,e,!!this._incremental,n)},t.prototype._setCommon=function(t,e,n,i){var r=e.hostModel;i=i||{};var o=e.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=i.clipShape||null,t.symbolProxy=Object(It["a"])(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<wi;t.useStyle(r.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=e.getVisual("style"),l=s&&s.fill;if(l&&t.setColor(l),!n){var c=Object(Rt["a"])(t);c.seriesIndex=r.seriesIndex,t.on("mousemove",(function(e){c.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>=0&&(c.dataIndex=n+(t.startIndex||0))}))}},t.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},t.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},t}(),Ci=Oi,Mi=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData(),r=this._updateSymbolDraw(i,t);r.incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4||!this._symbolDraw.isPersistent())return{update:!0};var r=Ye("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype._updateSymbolDraw=function(t,e){var n=this._symbolDraw,i=e.pipelineContext,r=i.large;return n&&r===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=r?new Ci:new Zt,this._isLargeDraw=r,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(ye["a"]),Ai=Mi,Di=n("b12f"),Ei=n("6cb7"),Ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Ei["a"]),Pi=Ii,Li=n("2023"),ki=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",se["b"]).models[0]},e.type="cartesian2dAxis",e}(Ei["a"]);c["K"](ki,Li["a"]);var ji={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Ri=c["I"]({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},ji),Ni=c["I"]({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},ji),Bi=c["I"]({scale:!0,splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},Ni),Fi=c["j"]({scale:!0,logBase:10},Ni),zi={category:Ri,value:Ni,time:Bi,log:Fi},Vi=n("8e43"),Hi={value:1,category:1,time:1,log:1};function Gi(t,e,n,i){Object(c["k"])(Hi,(function(r,o){var a=Object(c["I"])(Object(c["I"])({},zi[o],!0),i,!0),s=function(t){function n(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e+"Axis."+o,n}return Object(At["b"])(n,t),n.prototype.mergeDefaultAndTheme=function(t,e){var n=Object(Gn["d"])(this),i=n?Object(Gn["f"])(t):{},r=e.getTheme();Object(c["I"])(t,r.get(o+"Axis")),Object(c["I"])(t,this.getDefaultOption()),t.type=Ui(t),n&&Object(Gn["h"])(t,i,n)},n.prototype.optionUpdated=function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=Vi["a"].createByAxisModel(this))},n.prototype.getCategories=function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},n.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},n.type=e+"Axis."+o,n.defaultOption=a,n}(n);t.registerComponentModel(s)})),t.registerSubTypeDefaulter(e+"Axis",Ui)}function Ui(t){return t.type||(t.data?"category":"value")}var Wi=n("697e"),Xi=n("9850"),Yi=n("cf7e"),qi=n("1687"),Zi=n("401b"),Ki=["x","y"];function $i(t){return"interval"===t.type||"time"===t.type}var Ji=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Ki,e}return Object(At["b"])(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if($i(t)&&$i(e)){var n=t.getExtent(),i=e.getExtent(),r=this.dataToPoint([n[0],i[0]]),o=this.dataToPoint([n[1],i[1]]),a=n[1]-n[0],s=i[1]-i[0];if(a&&s){var l=(o[0]-r[0])/a,c=(o[1]-r[1])/s,u=r[0]-n[0]*l,h=r[1]-i[0]*c,f=this._transform=[l,0,0,c,u,h];this._invTransform=Object(qi["e"])([],f)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.dataToPoint=function(t,e,n){n=n||[];var i=t[0],r=t[1];if(this._transform&&null!=i&&isFinite(i)&&null!=r&&isFinite(r))return Object(Zi["b"])(n,t,this._transform);var o=this.getAxis("x"),a=this.getAxis("y");return n[0]=o.toGlobalCoord(o.dataToCoord(i,e)),n[1]=a.toGlobalCoord(a.dataToCoord(r,e)),n},e.prototype.clampData=function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),o=i.getExtent(),a=n.parse(t[0]),s=i.parse(t[1]);return e=e||[],e[0]=Math.min(Math.max(Math.min(r[0],r[1]),a),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e},e.prototype.pointToData=function(t,e){var n=[];if(this._invTransform)return Object(Zi["b"])(n,t,this._invTransform);var i=this.getAxis("x"),r=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),e),n[1]=r.coordToData(r.toLocalCoord(t[1]),e),n},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(){var t=this.getAxis("x").getGlobalExtent(),e=this.getAxis("y").getGlobalExtent(),n=Math.min(t[0],t[1]),i=Math.min(e[0],e[1]),r=Math.max(t[0],t[1])-n,o=Math.max(e[0],e[1])-i;return new Xi["a"](n,i,r,o)},e}(Yi["a"]),Qi=Ji,tr=n("84ce"),er=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.index=0,a.type=r||"value",a.position=o||"bottom",a}return Object(At["b"])(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(tr["a"]),nr=er;function ir(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,o={},a=r.getAxesOnZeroOf()[0],s=r.position,l=a?"onZero":s,u=r.dim,h=i.getRect(),f=[h.x,h.x+h.width,h.y,h.y+h.height],d={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,g="x"===u?[f[2]-p,f[3]+p]:[f[0]-p,f[1]+p];if(a){var m=a.toGlobalCoord(a.dataToCoord(0));g[d.onZero]=Math.max(Math.min(m,g[1]),g[0])}o.position=["y"===u?g[d[l]]:f[0],"x"===u?g[d[l]]:f[3]],o.rotation=Math.PI/2*("x"===u?0:1);var v={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=v[s],o.labelOffset=a?g[d[s]]-g[d.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),c["O"](n.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var y=e.get(["axisLabel","rotate"]);return o.labelRotate="top"===l?-y:y,o.z2=1,o}function rr(t){return"cartesian2d"===t.get("coordinateSystem")}function or(t){var e={xAxisModel:null,yAxisModel:null};return c["k"](e,(function(n,i){var r=i.replace(/Model$/,""),o=t.getReferringComponents(r,se["b"]).models[0];e[i]=o})),e}var ar=function(){function t(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Ki,this._initCartesian(t,e,n),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var n=this._axesMap;this._updateScale(t,this.model),Object(c["k"])(n.x,(function(t){Object(Wi["i"])(t.scale,t.model)})),Object(c["k"])(n.y,(function(t){Object(Wi["i"])(t.scale,t.model)}));var i={};Object(c["k"])(n.x,(function(t){lr(n,"y",t,i)})),Object(c["k"])(n.y,(function(t){lr(n,"x",t,i)})),this.resize(this.model,e)},t.prototype.resize=function(t,e,n){var i=t.getBoxLayoutParams(),r=!n&&t.get("containLabel"),o=Object(Gn["g"])(i,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var a=this._axesList;function s(){Object(c["k"])(a,(function(t){var e=t.isHorizontal(),n=e?[0,o.width]:[0,o.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),ur(t,e?o.x:o.y)}))}s(),r&&(Object(c["k"])(a,(function(t){if(!t.model.get(["axisLabel","inside"])){var e=Object(Wi["b"])(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get(["axisLabel","margin"]);o[n]-=e[n]+i,"top"===t.position?o.y+=e.height+i:"left"===t.position&&(o.x+=e.width+i)}}})),s()),Object(c["k"])(this._coordsList,(function(t){t.calcAffineTransform()}))},t.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n)return n[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}Object(c["A"])(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(t){var e,n,i=t.seriesModel,r=t.xAxisModel||i&&i.getReferringComponents("xAxis",se["b"]).models[0],o=t.yAxisModel||i&&i.getReferringComponents("yAxis",se["b"]).models[0],a=t.gridModel,s=this._coordsList;if(i)e=i.coordinateSystem,Object(c["r"])(s,e)<0&&(e=null);else if(r&&o)e=this.getCartesian(r.componentIndex,o.componentIndex);else if(r)n=this.getAxis("x",r.componentIndex);else if(o)n=this.getAxis("y",o.componentIndex);else if(a){var l=a.coordinateSystem;l===this&&(e=this._coordsList[0])}return{cartesian:e,axis:n}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,n){var i=this,r=this,o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};if(e.eachComponent("xAxis",l("x"),this),e.eachComponent("yAxis",l("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);function l(e){return function(n,i){if(sr(n,t)){var l=n.get("position");"x"===e?"top"!==l&&"bottom"!==l&&(l=o.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=o.left?"right":"left"),o[l]=!0;var c=new nr(e,Object(Wi["a"])(n),[0,0],n.get("type"),l),u="category"===c.type;c.onBand=u&&n.get("boundaryGap"),c.inverse=n.get("inverse"),n.axis=c,c.model=n,c.grid=r,c.index=i,r._axesList.push(c),a[e][i]=c,s[e]++}}}this._axesMap=a,Object(c["k"])(a.x,(function(e,n){Object(c["k"])(a.y,(function(r,o){var a="x"+n+"y"+o,s=new Qi(a);s.master=i,s.model=t,i._coordsMap[a]=s,i._coordsList.push(s),s.addAxis(e),s.addAxis(r)}))}))},t.prototype._updateScale=function(t,e){function n(t,e){Object(c["k"])(Object(Wi["d"])(t,e.dim),(function(n){e.scale.unionExtentFromData(t,n)}))}Object(c["k"])(this._axesList,(function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}})),t.eachSeries((function(t){if(rr(t)){var i=or(t),r=i.xAxisModel,o=i.yAxisModel;if(!sr(r,e)||!sr(o,e))return;var a=this.getCartesian(r.componentIndex,o.componentIndex),s=t.getData(),l=a.getAxis("x"),c=a.getAxis("y");"list"===s.type&&(n(s,l),n(s,c))}}),this)},t.prototype.getTooltipAxes=function(t){var e=[],n=[];return Object(c["k"])(this.getCartesians(),(function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(r);Object(c["r"])(e,r)<0&&e.push(r),Object(c["r"])(n,o)<0&&n.push(o)})),{baseAxes:e,otherAxes:n}},t.create=function(e,n){var i=[];return e.eachComponent("grid",(function(r,o){var a=new t(r,e,n);a.name="grid_"+o,a.resize(r,n,!0),r.coordinateSystem=a,i.push(a)})),e.eachSeries((function(t){if(rr(t)){var e=or(t),n=e.xAxisModel,i=e.yAxisModel,r=n.getCoordSysModel();0;var o=r.coordinateSystem;t.coordinateSystem=o.getCartesian(n.componentIndex,i.componentIndex)}})),i},t.dimensions=Ki,t}();function sr(t,e){return t.getCoordSysModel()===e}function lr(t,e,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,o=t[e],a=n.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)cr(o[l])&&(r=o[l]);else for(var c in o)if(o.hasOwnProperty(c)&&cr(o[c])&&!i[u(o[c])]){r=o[c];break}r&&(i[u(r)]=!0)}function u(t){return t.dim+"_"+t.index}}function cr(t){return t&&"category"!==t.type&&"time"!==t.type&&Object(Wi["g"])(t)}function ur(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}var hr=ar,fr=n("2306"),dr=n("cb11"),pr=n("4319"),gr=Math.PI,mr=function(){function t(t,e){this.group=new Pt["a"],this.opt=e,this.axisModel=t,Object(c["j"])(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Pt["a"]({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(t){return!!vr[t]},t.prototype.add=function(t){vr[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,n){var i,r,o=Object(xe["u"])(e-t);return Object(xe["k"])(o)?(r=n>0?"top":"bottom",i="center"):Object(xe["k"])(o-gr)?(r=n>0?"bottom":"top",i="center"):(r="middle",i=o>0&&o<gr?n>0?"right":"left":n>0?"left":"right"),{rotation:o,textAlign:i,textVerticalAlign:r}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),vr={axisLine:function(t,e,n,i){var r=e.get(["axisLine","show"]);if("auto"===r&&t.handleAutoShown&&(r=t.handleAutoShown("axisLine")),r){var o=e.axis.getExtent(),a=i.transform,s=[o[0],0],l=[o[1],0];a&&(Object(Zi["b"])(s,s,a),Object(Zi["b"])(l,l,a));var u=Object(c["m"])({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new dr["a"]({subPixelOptimize:!0,shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});h.anid="line",n.add(h);var f=e.get(["axisLine","symbol"]);if(null!=f){var d=e.get(["axisLine","symbolSize"]);"string"===typeof f&&(f=[f,f]),"string"!==typeof d&&"number"!==typeof d||(d=[d,d]);var p=Object(It["b"])(e.get(["axisLine","symbolOffset"])||0,d),g=d[0],m=d[1];Object(c["k"])([{rotate:t.rotation+Math.PI/2,offset:p[0],r:0},{rotate:t.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],(function(e,i){if("none"!==f[i]&&null!=f[i]){var r=Object(It["a"])(f[i],-g/2,-m/2,g,m,u.stroke,!0),o=e.r+e.offset;r.attr({rotation:e.rotate,x:s[0]+o*Math.cos(t.rotation),y:s[1]-o*Math.sin(t.rotation),silent:!0,z2:11}),n.add(r)}}))}}},axisTickLabel:function(t,e,n,i){var r=Tr(n,i,e,t),o=Cr(n,i,e,t);if(_r(e,o,r),Or(n,i,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])){var a=Object(Qn["b"])(Object(c["H"])(o,(function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}})));Object(Qn["a"])(a)}},axisName:function(t,e,n,i){var r=Object(c["O"])(t.axisName,e.get("name"));if(r){var o,a,s=e.get("nameLocation"),l=t.nameDirection,u=e.getModel("nameTextStyle"),h=e.get("nameGap")||0,f=e.axis.getExtent(),d=f[0]>f[1]?-1:1,p=["start"===s?f[0]-d*h:"end"===s?f[1]+d*h:(f[0]+f[1])/2,wr(s)?t.labelOffset+l*h:0],g=e.get("nameRotate");null!=g&&(g=g*gr/180),wr(s)?o=mr.innerTextLayout(t.rotation,null!=g?g:t.rotation,l):(o=yr(t.rotation,s,g||0,f),a=t.axisNameAvailableWidth,null!=a&&(a=Math.abs(a/Math.sin(o.rotation)),!isFinite(a)&&(a=null)));var m=u.getFont(),v=e.get("nameTruncate",!0)||{},y=v.ellipsis,_=Object(c["O"])(t.nameTruncateMaxWidth,v.maxWidth,a),b=new ae["a"]({x:p[0],y:p[1],rotation:o.rotation,silent:mr.isLabelSilent(e),style:Object(Vt["c"])(u,{text:r,font:m,overflow:"truncate",width:_,ellipsis:y,fill:u.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:u.get("align")||o.textAlign,verticalAlign:u.get("verticalAlign")||o.textVerticalAlign}),z2:1});if(fr["setTooltipConfig"]({el:b,componentModel:e,itemName:r}),b.__fullText=r,b.anid="name",e.get("triggerEvent")){var x=mr.makeAxisEventDataBase(e);x.targetType="axisName",x.name=r,Object(Rt["a"])(b).eventData=x}i.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function yr(t,e,n,i){var r,o,a=Object(xe["u"])(n-t),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;return Object(xe["k"])(a-gr/2)?(o=l?"bottom":"top",r="center"):Object(xe["k"])(a-1.5*gr)?(o=l?"top":"bottom",r="center"):(o="middle",r=a<1.5*gr&&a>gr/2?l?"left":"right":l?"right":"left"),{rotation:a,textAlign:r,textVerticalAlign:o}}function _r(t,e,n){if(!Object(Wi["j"])(t.axis)){var i=t.get(["axisLabel","showMinLabel"]),r=t.get(["axisLabel","showMaxLabel"]);e=e||[],n=n||[];var o=e[0],a=e[1],s=e[e.length-1],l=e[e.length-2],c=n[0],u=n[1],h=n[n.length-1],f=n[n.length-2];!1===i?(br(o),br(c)):xr(o,a)&&(i?(br(a),br(u)):(br(o),br(c))),!1===r?(br(s),br(h)):xr(l,s)&&(r?(br(l),br(f)):(br(s),br(h)))}}function br(t){t&&(t.ignore=!0)}function xr(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var r=qi["d"]([]);return qi["g"](r,r,-t.rotation),n.applyTransform(qi["f"]([],r,t.getLocalTransform())),i.applyTransform(qi["f"]([],r,e.getLocalTransform())),n.intersect(i)}}function wr(t){return"middle"===t||"center"===t}function Sr(t,e,n,i,r){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var c=t[l].coord;a[0]=c,a[1]=0,s[0]=c,s[1]=n,e&&(Object(Zi["b"])(a,a,e),Object(Zi["b"])(s,s,e));var u=new dr["a"]({subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});u.anid=r+"_"+t[l].tickValue,o.push(u)}return o}function Tr(t,e,n,i){var r=n.axis,o=n.getModel("axisTick"),a=o.get("show");if("auto"===a&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),a&&!r.scale.isBlank()){for(var s=o.getModel("lineStyle"),l=i.tickDirection*o.get("length"),u=r.getTicksCoords(),h=Sr(u,e.transform,l,Object(c["j"])(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<h.length;f++)t.add(h[f]);return h}}function Or(t,e,n,i){var r=n.axis,o=n.getModel("minorTick");if(o.get("show")&&!r.scale.isBlank()){var a=r.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=i*o.get("length"),u=Object(c["j"])(s.getLineStyle(),Object(c["j"])(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),h=0;h<a.length;h++)for(var f=Sr(a[h],e.transform,l,u,"minorticks_"+h),d=0;d<f.length;d++)t.add(f[d])}}function Cr(t,e,n,i){var r=n.axis,o=Object(c["O"])(i.axisLabelShow,n.get(["axisLabel","show"]));if(o&&!r.scale.isBlank()){var a=n.getModel("axisLabel"),s=a.get("margin"),l=r.getViewLabels(),u=(Object(c["O"])(i.labelRotate,a.get("rotate"))||0)*gr/180,h=mr.innerTextLayout(i.rotation,u,i.labelDirection),f=n.getCategories&&n.getCategories(!0),d=[],p=mr.isLabelSilent(n),g=n.get("triggerEvent");return Object(c["k"])(l,(function(o,l){var u="ordinal"===r.scale.type?r.scale.getRawOrdinalNumber(o.tickValue):o.tickValue,m=o.formattedLabel,v=o.rawLabel,y=a;if(f&&f[u]){var _=f[u];Object(c["A"])(_)&&_.textStyle&&(y=new pr["a"](_.textStyle,a,n.ecModel))}var b=y.getTextColor()||n.get(["axisLine","lineStyle","color"]),x=r.dataToCoord(u),w=new ae["a"]({x:x,y:i.labelOffset+i.labelDirection*s,rotation:h.rotation,silent:p,z2:10+(o.level||0),style:Object(Vt["c"])(y,{text:m,align:y.getShallow("align",!0)||h.textAlign,verticalAlign:y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||h.textVerticalAlign,fill:"function"===typeof b?b("category"===r.type?v:"value"===r.type?u+"":u,l):b})});if(w.anid="label_"+u,g){var S=mr.makeAxisEventDataBase(n);S.targetType="axisLabel",S.value=v,Object(Rt["a"])(w).eventData=S}e.add(w),w.updateTransform(),d.push(w),t.add(w),w.decomposeTransform()})),d}}var Mr=mr;function Ar(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return Dr(n,t,e),n.seriesInvolved&&Ir(n,t),n}function Dr(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),o=r.get("link",!0)||[],a=[];Object(c["k"])(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var s=Br(n.model),l=t.coordSysAxesInfo[s]={};t.coordSysMap[s]=n;var u=n.model,h=u.getModel("tooltip",i);if(Object(c["k"])(n.getAxes(),Object(c["i"])(g,!1,null)),n.getTooltipAxes&&i&&h.get("show")){var f="axis"===h.get("trigger"),d="cross"===h.get(["axisPointer","type"]),p=n.getTooltipAxes(h.get(["axisPointer","axis"]));(f||d)&&Object(c["k"])(p.baseAxes,Object(c["i"])(g,!d||"cross",f)),d&&Object(c["k"])(p.otherAxes,Object(c["i"])(g,"cross",!1))}}function g(i,s,c){var u=c.model.getModel("axisPointer",r),f=u.get("show");if(f&&("auto"!==f||i||Nr(u))){null==s&&(s=u.get("triggerTooltip")),u=i?Er(c,h,r,e,i,s):u;var d=u.get("snap"),p=Br(c.model),g=s||d||"category"===c.type,m=t.axesInfo[p]={key:p,axis:c,coordSys:n,axisPointerModel:u,triggerTooltip:s,involveSeries:g,snap:d,useHandle:Nr(u),seriesModels:[],linkGroup:null};l[p]=m,t.seriesInvolved=t.seriesInvolved||g;var v=Pr(o,c);if(null!=v){var y=a[v]||(a[v]={axesInfo:{}});y.axesInfo[p]=m,y.mapper=o[v].mapper,m.linkGroup=y}}}}))}function Er(t,e,n,i,r,o){var a=e.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};Object(c["k"])(s,(function(t){l[t]=Object(c["d"])(a.get(t))})),l.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(l.type="line");var u=l.label||(l.label={});if(null==u.show&&(u.show=!1),"cross"===r){var h=a.get(["label","show"]);if(u.show=null==h||h,!o){var f=l.lineStyle=a.get("crossStyle");f&&Object(c["j"])(u,f.textStyle)}}return t.model.getModel("axisPointer",new pr["a"](l,n,i))}function Ir(t,e){e.eachSeries((function(e){var n=e.coordinateSystem,i=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get(["axisPointer","show"],!0)&&Object(c["k"])(t.coordSysAxesInfo[Br(n.model)],(function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())}))}))}function Pr(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(Lr(o[i+"AxisId"],n.id)||Lr(o[i+"AxisIndex"],n.componentIndex)||Lr(o[i+"AxisName"],n.name))return r}}function Lr(t,e){return"all"===t||Object(c["t"])(t)&&Object(c["r"])(t,e)>=0||t===e}function kr(t){var e=jr(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,o=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=Nr(n);null==o&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function jr(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[Br(t)]}function Rr(t){var e=jr(t);return e&&e.axisPointerModel}function Nr(t){return!!t.get(["handle","show"])}function Br(t){return t.type+"||"+t.id}var Fr={},zr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(e,n,i,r){this.axisPointerClass&&kr(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,i,!0)},e.prototype.updateAxisPointer=function(t,e,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,e){var n=this._axisPointer;n&&n.remove(e)},e.prototype.dispose=function(e,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,i){var r=e.getAxisPointerClass(this.axisPointerClass);if(r){var o=Rr(t);o?(this._axisPointer||(this._axisPointer=new r)).render(t,o,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){Fr[t]=e},e.getAxisPointerClass=function(t){return t&&Fr[t]},e.type="axis",e}(Di["a"]),Vr=zr,Hr=Object(se["o"])();function Gr(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),u=r.getTicksCoords({tickModel:o,clamp:!0});if(u.length){var h=s.length,f=Hr(t).splitAreaColors,d=c["g"](),p=0;if(f)for(var g=0;g<u.length;g++){var m=f.get(u[g].tickValue);if(null!=m){p=(m+(h-1)*g)%h;break}}var v=r.toGlobalCoord(u[0].coord),y=a.getAreaStyle();s=c["t"](s)?s:[s];for(g=1;g<u.length;g++){var _=r.toGlobalCoord(u[g].coord),b=void 0,x=void 0,w=void 0,S=void 0;r.isHorizontal()?(b=v,x=l.y,w=_-b,S=l.height,v=b+w):(b=l.x,x=v,w=l.width,S=_-x,v=x+S);var T=u[g-1].tickValue;null!=T&&d.set(T,p),e.add(new _e["a"]({anid:null!=T?"area_"+T:null,shape:{x:b,y:x,width:w,height:S},style:c["j"]({fill:s[p]},y),autoBatch:!0,silent:!0})),p=(p+1)%h}Hr(t).splitAreaColors=d}}}function Ur(t){Hr(t).splitAreaColors=null}var Wr=["axisLine","axisTickLabel","axisName"],Xr=["splitArea","splitLine","minorSplitLine"],Yr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return Object(At["b"])(e,t),e.prototype.render=function(e,n,i,r){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Pt["a"],this.group.add(this._axisGroup),e.get("show")){var a=e.getCoordSysModel(),s=ir(a,e),l=new Mr(e,c["m"]({handleAutoShown:function(t){for(var n=a.coordinateSystem.getCartesians(),i=0;i<n.length;i++){var r=n[i].getOtherAxis(e.axis).type;if("value"===r||"log"===r)return!0}return!1}},s));c["k"](Wr,l.add,l),this._axisGroup.add(l.getGroup()),c["k"](Xr,(function(t){e.get([t,"show"])&&qr[t](this,this._axisGroup,e,a)}),this);var u=r&&"changeAxisOrder"===r.type&&r.isInitSort;u||fr["groupTransition"](o,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)}},e.prototype.remove=function(){Ur(this)},e.type="cartesianAxis",e}(Vr),qr={splitLine:function(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=c["t"](s)?s:[s];for(var l=i.coordinateSystem.getRect(),u=r.isHorizontal(),h=0,f=r.getTicksCoords({tickModel:o}),d=[],p=[],g=a.getLineStyle(),m=0;m<f.length;m++){var v=r.toGlobalCoord(f[m].coord);u?(d[0]=v,d[1]=l.y,p[0]=v,p[1]=l.y+l.height):(d[0]=l.x,d[1]=v,p[0]=l.x+l.width,p[1]=v);var y=h++%s.length,_=f[m].tickValue;e.add(new dr["a"]({anid:null!=_?"line_"+f[m].tickValue:null,subPixelOptimize:!0,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:c["j"]({stroke:s[y]},g),silent:!0}))}}},minorSplitLine:function(t,e,n,i){var r=n.axis,o=n.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=i.coordinateSystem.getRect(),l=r.isHorizontal(),c=r.getMinorTicksCoords();if(c.length)for(var u=[],h=[],f=a.getLineStyle(),d=0;d<c.length;d++)for(var p=0;p<c[d].length;p++){var g=r.toGlobalCoord(c[d][p].coord);l?(u[0]=g,u[1]=s.y,h[0]=g,h[1]=s.y+s.height):(u[0]=s.x,u[1]=g,h[0]=s.x+s.width,h[1]=g),e.add(new dr["a"]({anid:"minor_line_"+c[d][p].tickValue,subPixelOptimize:!0,autoBatch:!0,shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:f,silent:!0}))}},splitArea:function(t,e,n,i){Gr(t,e,n,i)}},Zr=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="xAxis",e}(Yr),Kr=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=Zr.type,e}return Object(At["b"])(e,t),e.type="yAxis",e}(Yr),$r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return Object(At["b"])(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new _e["a"]({shape:t.coordinateSystem.getRect(),style:Object(c["j"])({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(Di["a"]),Jr={offset:0};function Qr(t){t.registerComponentView($r),t.registerComponentModel(Pi),t.registerCoordinateSystem("cartesian2d",hr),Gi(t,"x",ki,Jr),Gi(t,"y",ki,Jr),t.registerComponentView(Zr),t.registerComponentView(Kr),t.registerPreprocessor((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}))}function to(t){Object(i["a"])(Qr),t.registerSeriesModel(bi),t.registerChartView(Ai),t.registerLayout(Ye("scatter"))}function eo(t){t.eachSeriesByType("radar",(function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var r=i.getIndicatorAxes();c["k"](r,(function(t,o){e.each(e.mapDimension(r[o].dim),(function(t,e){n[e]=n[e]||[];var r=i.dataToPoint(t,o);n[e][o]=no(r)?r:io(i)}))})),e.each((function(t){var r=c["o"](n[t],(function(t){return no(t)}))||io(i);n[t].push(r.slice()),e.setItemLayout(t,n[t])}))}}))}function no(t){return!isNaN(t[0])&&!isNaN(t[1])}function io(t){return[t.cx,t.cy]}function ro(t){var e=t.polar;if(e){c["t"](e)||(e=[e]);var n=[];c["k"](e,(function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],c["t"](t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)})),t.polar=n}c["k"](t.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var oo=n("87b1"),ao=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.coordinateSystem,r=this.group,o=t.getData(),a=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle";if("none"!==n){var i=It["c"](t.getItemVisual(e,"symbolSize")),r=It["a"](n,-1,-1,2,2),o=t.getItemVisual(e,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:o*Math.PI/180||0}),r}}function l(e,n,i,r,o,a){i.removeAll();for(var l=0;l<n.length-1;l++){var c=s(r,o);c&&(c.__dimIdx=l,e[l]?(c.setPosition(e[l]),fr[a?"initProps":"updateProps"](c,{x:n[l][0],y:n[l][1]},t,o)):c.setPosition(n[l]),i.add(c))}}function u(t){return c["H"](t,(function(t){return[i.cx,i.cy]}))}o.diff(a).add((function(e){var n=o.getItemLayout(e);if(n){var i=new oo["a"],r=new Kn["a"],a={shape:{points:n}};i.shape.points=u(n),r.shape.points=u(n),jt["c"](i,a,t,e),jt["c"](r,a,t,e);var s=new Pt["a"],c=new Pt["a"];s.add(r),s.add(i),s.add(c),l(r.shape.points,n,c,o,e,!0),o.setItemGraphicEl(e,s)}})).update((function(e,n){var i=a.getItemGraphicEl(n),r=i.childAt(0),s=i.childAt(1),c=i.childAt(2),u={shape:{points:o.getItemLayout(e)}};u.shape.points&&(l(r.shape.points,u.shape.points,c,o,e,!1),Object(jt["g"])(s),Object(jt["g"])(r),jt["h"](r,u,t),jt["h"](s,u,t),o.setItemGraphicEl(e,i))})).remove((function(t){r.remove(a.getItemGraphicEl(t))})).execute(),o.eachItemGraphicEl((function(t,e){var n=o.getItemModel(e),i=t.childAt(0),a=t.childAt(1),s=t.childAt(2),l=o.getItemVisual(e,"style"),u=l.fill;r.add(t),i.useStyle(c["j"](n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:u})),Object(Nt["I"])(i,n,"lineStyle"),Object(Nt["I"])(a,n,"areaStyle");var f=n.getModel("areaStyle"),d=f.isEmpty()&&f.parentModel.isEmpty();a.ignore=d,c["k"](["emphasis","select","blur"],(function(t){var e=n.getModel([t,"areaStyle"]),i=e.isEmpty()&&e.parentModel.isEmpty();a.ensureState(t).ignore=i&&d})),a.useStyle(c["j"](f.getAreaStyle(),{fill:u,opacity:.7,decal:l.decal}));var p=n.getModel("emphasis"),g=p.getModel("itemStyle").getItemStyle();s.eachChild((function(t){if(t instanceof h["a"]){var i=t.style;t.useStyle(c["m"]({image:i.image,x:i.x,y:i.y,width:i.width,height:i.height},l))}else t.useStyle(l),t.setColor(u),t.style.strokeNoScale=!0;var r=t.ensureState("emphasis");r.style=c["d"](g);var a=o.getStore().get(o.getDimensionIndex(t.__dimIdx),e);(null==a||isNaN(a))&&(a=""),Object(Vt["g"])(t,Object(Vt["e"])(n),{labelFetcher:o.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:a,inheritColor:u,defaultOpacity:l.opacity})})),Object(Nt["o"])(t,p.get("focus"),p.get("blurScope"))})),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(ye["a"]),so=ao,lo=n("217c"),co=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(At["b"])(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new pi(c["c"](this.getData,this),c["c"](this.getRawData,this))},e.prototype.getInitialData=function(t,e){return hi(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.coordinateSystem,o=r.getIndicatorAxes(),a=this.getData().getName(t),s=""===a?this.name:a,l=Object(lo["e"])(this,t);return Object(lo["c"])("section",{header:s,sortBlocks:!0,blocks:c["H"](o,(function(e){var n=i.get(i.mapDimension(e.dim),t);return Object(lo["c"])("nameValue",{markerType:"subItem",markerColor:l,name:e.name,value:n,sortParam:n})}))})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(c["H"](n.dimensions,(function(t){return e.mapDimension(t)})),t),r=0,o=i.length;r<o;r++)if(!isNaN(i[r])){var a=n.getIndicatorAxes();return n.coordToPoint(a[r].dataToCoord(i[r]),r)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={zlevel:0,z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(Et["b"]),uo=co,ho=zi.value;function fo(t,e){return c["j"]({show:e},t)}var po=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisLabel"),a=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),u=this.get("axisNameGap"),h=this.get("triggerEvent"),f=c["H"](this.get("indicator")||[],(function(f){null!=f.max&&f.max>0&&!f.min?f.min=0:null!=f.min&&f.min<0&&!f.max&&(f.max=0);var d=a;null!=f.color&&(d=c["j"]({color:f.color},a));var p=c["I"](c["d"](f),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisLabel:o,name:f.text,nameLocation:"end",nameGap:u,nameTextStyle:d,triggerEvent:h},!1);if(s||(p.name=""),"string"===typeof l){var g=p.name;p.name=l.replace("{value}",null!=g?g:"")}else"function"===typeof l&&(p.name=l(p.name,p));var m=new pr["a"](p,null,this.ecModel);return c["K"](m,Li["a"].prototype),m.mainType="radar",m.componentIndex=this.componentIndex,m}),this);this._indicatorModels=f},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:c["I"]({lineStyle:{color:"#bbb"}},ho.axisLine),axisLabel:fo(ho.axisLabel,!1),axisTick:fo(ho.axisTick,!1),splitLine:fo(ho.splitLine,!0),splitArea:fo(ho.splitArea,!0),indicator:[]},e}(Ei["a"]),go=po,mo=n("d9fc"),vo=n("4573"),yo=["axisLine","axisTickLabel","axisName"],_o=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=this.group;i.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes(),i=c["H"](n,(function(t){var n=new Mr(t.model,{position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1});return n}));c["k"](i,(function(t){c["k"](yo,t.add,t),this.group.add(t.getGroup())}),this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),r=t.getModel("splitLine"),o=t.getModel("splitArea"),a=r.getModel("lineStyle"),s=o.getModel("areaStyle"),l=r.get("show"),u=o.get("show"),h=a.get("color"),f=s.get("color"),d=c["t"](h)?h:[h],p=c["t"](f)?f:[f],g=[],m=[];if("circle"===i)for(var v=n[0].getTicksCoords(),y=e.cx,_=e.cy,b=0;b<v.length;b++){if(l){var x=D(g,d,b);g[x].push(new mo["a"]({shape:{cx:y,cy:_,r:v[b].coord}}))}if(u&&b<v.length-1){x=D(m,p,b);m[x].push(new vo["a"]({shape:{cx:y,cy:_,r0:v[b].coord,r:v[b+1].coord}}))}}else{var w,S=c["H"](n,(function(t,n){var i=t.getTicksCoords();return w=null==w?i.length-1:Math.min(i.length-1,w),c["H"](i,(function(t){return e.coordToPoint(t.coord,n)}))})),T=[];for(b=0;b<=w;b++){for(var O=[],C=0;C<n.length;C++)O.push(S[C][b]);if(O[0]&&O.push(O[0].slice()),l){x=D(g,d,b);g[x].push(new Kn["a"]({shape:{points:O}}))}if(u&&T){x=D(m,p,b-1);m[x].push(new oo["a"]({shape:{points:O.concat(T)}}))}T=O.slice().reverse()}}var M=a.getLineStyle(),A=s.getAreaStyle();c["k"](m,(function(t,e){this.group.add(fr["mergePath"](t,{style:c["j"]({stroke:"none",fill:p[e%p.length]},A),silent:!0}))}),this),c["k"](g,(function(t,e){this.group.add(fr["mergePath"](t,{style:c["j"]({fill:"none",stroke:d[e%d.length]},M),silent:!0}))}),this)}function D(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}},e.type="radar",e}(Di["a"]),bo=_o,xo=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.type="value",r.angle=0,r.name="",r}return Object(At["b"])(e,t),e}(tr["a"]),wo=xo,So=n("89e3"),To=n("538f"),Oo=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=Object(c["H"])(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,i=new wo(n,new So["a"]);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(n),i}),this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e],i=n.angle,r=this.cx+t*Math.cos(i),o=this.cy-t*Math.sin(i);return[r,o]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,o=Math.atan2(-n,e),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var c=this._indicatorAxes[l],u=Math.abs(o-c.angle);u<a&&(r=c,s=l,a=u)}return[s,+(r&&r.coordToData(i))]},t.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),o=Math.min(i,r)/2;this.cx=xe["p"](n[0],i),this.cy=xe["p"](n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");"string"!==typeof a&&"number"!==typeof a||(a=[0,a]),this.r0=xe["p"](a[0],o),this.r=xe["p"](a[1],o),Object(c["k"])(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;Object(c["k"])(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var o=e.getData();Object(c["k"])(n,(function(t){t.scale.unionExtentFromData(o,o.mapDimension(t.dim))}))}}),this);var r=i.get("splitNumber");function o(t){var e=Math.pow(10,Math.floor(Math.log(t)/Math.LN10)),n=t/e;return 2===n?n=5:n*=2,n*e}Object(c["k"])(n,(function(t,e){var n=Object(Wi["f"])(t.scale,t.model).extent;Object(Wi["i"])(t.scale,t.model);var i=t.model,a=t.scale,s=Object(To["b"])(a,i.get("min",!0)),l=Object(To["b"])(a,i.get("max",!0)),c=a.getInterval();if(null!=s&&null!=l)a.setExtent(+s,+l),a.setInterval((l-s)/r);else if(null!=s){var u=void 0;do{u=s+c*r,a.setExtent(+s,u),a.setInterval(c),c=o(c)}while(u<n[1]&&isFinite(u)&&isFinite(n[1]))}else if(null!=l){var h=void 0;do{h=l-c*r,a.setExtent(h,+l),a.setInterval(c),c=o(c)}while(h>n[0]&&isFinite(h)&&isFinite(n[0]))}else{var f=a.getTicks().length-1;f>r&&(c=o(c));u=Math.ceil(n[1]/c)*c,h=xe["v"](u-c*r);a.setExtent(h,u),a.setInterval(c)}}))},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var i=[];return e.eachComponent("radar",(function(r){var o=new t(r,e,n);i.push(o),r.coordinateSystem=o})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("radarIndex")||0])})),i},t.dimensions=[],t}(),Co=Oo;function Mo(t){t.registerCoordinateSystem("radar",Co),t.registerComponentModel(go),t.registerComponentView(bo),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each((function(t){e.setItemVisual(t,"legendIcon","roundRect")})),e.setVisual("legendIcon","roundRect")}})}function Ao(t){Object(i["a"])(Mo),t.registerChartView(so),t.registerSeriesModel(uo),t.registerLayout(eo),t.registerProcessor(Zn("radar")),t.registerPreprocessor(ro)}var Do=n("6fd3"),Eo=n("607d"),Io=n("1be7"),Po="\0_ec_interaction_mutex";function Lo(t,e,n){var i=Ro(t);i[e]=n}function ko(t,e,n){var i=Ro(t),r=i[e];r===n&&(i[e]=null)}function jo(t,e){return!!Ro(t)[e]}function Ro(t){return t[Po]||(t[Po]={})}Io["e"]({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){}));var No=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var i=Object(c["c"])(n._mousedownHandler,n),r=Object(c["c"])(n._mousemoveHandler,n),o=Object(c["c"])(n._mouseupHandler,n),a=Object(c["c"])(n._mousewheelHandler,n),s=Object(c["c"])(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=Object(c["j"])(Object(c["d"])(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",r),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",a),e.on("pinch",s))},n.disable=function(){e.off("mousedown",i),e.off("mousemove",r),e.off("mouseup",o),e.off("mousewheel",a),e.off("pinch",s)},n}return Object(At["b"])(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(Eo["d"](t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&zo("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!jo(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,o=e-i,a=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&Eo["g"](t.event),Fo(this,"pan","moveOnMouseMove",t,{dx:o,dy:a,oldX:i,oldY:r,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){Eo["d"](t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=zo("zoomOnMouseWheel",t,this._opt),n=zo("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,r=Math.abs(i),o=t.offsetX,a=t.offsetY;if(0!==i&&(e||n)){if(e){var s=r>3?1.4:r>1?1.2:1.1,l=i>0?s:1/s;Bo(this,"zoom","zoomOnMouseWheel",t,{scale:l,originX:o,originY:a,isAvailableBehavior:null})}if(n){var c=Math.abs(i),u=(i>0?1:-1)*(c>3?.4:c>1?.15:.05);Bo(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:u,originX:o,originY:a,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!jo(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;Bo(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(Do["a"]);function Bo(t,e,n,i,r){t.pointerChecker&&t.pointerChecker(i,r.originX,r.originY)&&(Eo["g"](i.event),Fo(t,e,n,i,r))}function Fo(t,e,n,i,r){r.isAvailableBehavior=Object(c["c"])(zo,null,n,i),t.trigger(e,r)}function zo(t,e,n){var i=n[t];return!t||i&&(!Object(c["C"])(i)||e.event[i+"Key"])}var Vo=No;function Ho(t,e,n){var i=t.target;i.x+=e,i.y+=n,i.dirty()}function Go(t,e,n,i){var r=t.target,o=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var c=a/t.zoom;t.zoom=a,r.x-=(n-r.x)*(c-1),r.y-=(i-r.y)*(c-1),r.scaleX*=c,r.scaleY*=c,r.dirty()}var Uo={axisPointer:1,tooltip:1,brush:1};function Wo(t,e,n){var i=e.getComponentByElement(t.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!Uo.hasOwnProperty(i.mainType)&&r&&r.model!==n}var Xo=n("d4c6"),Yo=n("5b87"),qo=n("b3c1"),Zo=n("19eb"),Ko=["rect","circle","line","ellipse","polygon","polyline","path"],$o=c["g"](Ko),Jo=c["g"](Ko.concat(["g"])),Qo=c["g"](Ko.concat(["g"])),ta=Object(se["o"])();function ea(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}var na=function(){function t(t){var e=new Pt["a"];this.uid=Object(en["c"])("ec_map_draw"),this._controller=new Vo(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Pt["a"]),e.add(this._svgGroup=new Pt["a"])}return t.prototype.draw=function(t,e,n,i,r){var o="geo"===t.mainType,a=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},(function(e){a||e.getHostGeoModel()!==t||(a=e.getData())}));var s=t.coordinateSystem,l=this._regionsGroup,c=this.group,u=s.getTransformInfo(),h=u.raw,f=u.roam,d=!l.childAt(0)||r;d?(c.x=f.x,c.y=f.y,c.scaleX=f.scaleX,c.scaleY=f.scaleY,c.dirty()):jt["h"](c,f,t);var p=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,g={api:n,geo:s,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:p,isGeo:o,transformInfoRaw:h};"geoJSON"===s.resourceType?this._buildGeoJSON(g):"geoSVG"===s.resourceType&&this._buildSVG(g),this._updateController(t,e,n),this._updateMapSelectHandler(t,l,n,i)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=c["g"](),n=c["g"](),i=this._regionsGroup,r=t.transformInfoRaw,o=t.mapOrGeoModel,a=t.data,s=function(t){return[t[0]*r.scaleX+r.x,t[1]*r.scaleY+r.y]};i.removeAll(),c["k"](t.geo.regions,(function(r){var l=r.name,u=e.get(l),h=n.get(l)||{},f=h.dataIdx,d=h.regionModel;u||(u=e.set(l,new Pt["a"]),i.add(u),f=a?a.indexOfName(l):null,d=t.isGeo?o.getRegionModel(l):a?a.getItemModel(f):null,n.set(l,{dataIdx:f,regionModel:d}));var p=new Xo["a"]({segmentIgnoreThreshold:1,shape:{paths:[]}});u.add(p),c["k"](r.geometries,(function(t){if("polygon"===t.type){for(var e=[],n=0;n<t.exterior.length;++n)e.push(s(t.exterior[n]));p.shape.paths.push(new oo["a"]({segmentIgnoreThreshold:1,shape:{points:e}}));for(n=0;n<(t.interiors?t.interiors.length:0);++n){for(var i=t.interiors[n],r=[],o=0;o<i.length;++o)r.push(s(i[o]));p.shape.paths.push(new oo["a"]({segmentIgnoreThreshold:1,shape:{points:r}}))}}})),ia(t,p,f,d),p instanceof Zo["c"]&&(p.culling=!0);var g=s(r.getCenter());ra(t,p,l,d,o,f,g)})),e.each((function(e,i){var r=n.get(i),a=r.dataIdx,s=r.regionModel;oa(t,e,i,s,o,a),aa(t,e,i,s,o),sa(t,e,i,s,o)}),this)},t.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var i=this._svgDispatcherMap=c["g"](),r=!1;c["k"](this._svgGraphicRecord.named,(function(e){var n=e.name,o=t.mapOrGeoModel,a=t.data,s=e.svgNodeTagLower,l=e.el,c=a?a.indexOfName(n):null,u=o.getRegionModel(n);if(null!=$o.get(s)&&l instanceof Zo["c"]&&ia(t,l,c,u),l instanceof Zo["c"]&&(l.culling=!0),l.z2EmphasisLift=0,!e.namedFrom&&(null!=Qo.get(s)&&ra(t,l,n,u,o,c,null),oa(t,l,n,u,o,c),aa(t,l,n,u,o),null!=Jo.get(s))){var h=sa(t,l,n,u,o);"self"===h&&(r=!0);var f=i.get(n)||i.set(n,[]);f.push(l)}}),this),this._enableBlurEntireSVG(r,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle(),i=n.opacity;this._svgGraphicRecord.root.traverse((function(t){if(!t.isGroup){Object(Nt["G"])(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=i&&(e.opacity=i),t.ensureState("emphasis")}}))}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var n=e.coordinateSystem;if("geoJSON"===n.resourceType){var i=this._regionsGroupByName;if(i){var r=i.get(t);return r?[r]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=Yo["a"].getGeoResource(t);if(e&&"geoSVG"===e.type){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=Yo["a"].getGeoResource(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,n){var i=t.coordinateSystem,r=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=i.getZoom(),r.enable(t.get("roam")||!1);var a=t.mainType;function s(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}r.off("pan").on("pan",(function(t){this._mouseDownFlag=!1,Ho(o,t.dx,t.dy),n.dispatchAction(c["m"](s(),{dx:t.dx,dy:t.dy}))}),this),r.off("zoom").on("zoom",(function(t){this._mouseDownFlag=!1,Go(o,t.scale,t.originX,t.originY),n.dispatchAction(c["m"](s(),{zoom:t.scale,originX:t.originX,originY:t.originY}))}),this),r.setPointerChecker((function(e,r,o){return i.containPoint([r,o])&&!Wo(e,n,t)}))},t.prototype.resetForLabelLayout=function(){this.group.traverse((function(t){var e=t.getTextContent();e&&(e.ignore=ta(e).ignore)}))},t.prototype._updateMapSelectHandler=function(t,e,n,i){var r=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",(function(){r._mouseDownFlag=!0})),e.on("click",(function(t){r._mouseDownFlag&&(r._mouseDownFlag=!1)})))},t}();function ia(t,e,n,i){var r=i.getModel("itemStyle"),o=i.getModel(["emphasis","itemStyle"]),a=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=ea(r),c=ea(o),u=ea(s),h=ea(a),f=t.data;if(f){var d=f.getItemVisual(n,"style"),p=f.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&d.fill&&(l.fill=d.fill),p&&(l.decal=Object(qo["a"])(p,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=h,Object(Nt["G"])(e)}function ra(t,e,n,i,r,o,a){var s=t.data,l=t.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),o)),u=s&&s.getItemLayout(o);if(l||c||u&&u.showLabel){var h=l?n:o,f=void 0;(!s||o>=0)&&(f=r);var d=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Object(Vt["g"])(e,Object(Vt["e"])(i),{labelFetcher:f,labelDataIndex:h,defaultText:n},d);var p=e.getTextContent();if(p&&(ta(p).ignore=p.ignore,e.textConfig&&a)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function oa(t,e,n,i,r,o){t.data?t.data.setItemGraphicEl(o,e):Object(Rt["a"])(e).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:n,region:i&&i.option||{}}}function aa(t,e,n,i,r){t.data||fr["setTooltipConfig"]({el:e,componentModel:r,itemName:n,itemTooltipOption:i.get("tooltip")})}function sa(t,e,n,i,r){e.highDownSilentOnTouch=!!r.get("selectedMode");var o=i.getModel("emphasis"),a=o.get("focus");return Object(Nt["o"])(e,a,o.get("blurScope")),t.isGeo&&Object(Nt["n"])(e,r,n),a}var la=na,ca=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id){o=this._mapDraw;o&&r.add(o.group)}else if(t.needsDrawMap){var o=this._mapDraw||new la(n);r.add(o.group),o.draw(t,e,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,e,n){var i=t.originalData,r=this.group;i.each(i.mapDimension("value"),(function(e,n){if(!isNaN(e)){var o=i.getItemLayout(n);if(o&&o.point){var a=o.point,s=o.offset,l=new mo["a"]({style:{fill:t.getData().getVisual("style").fill},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:Nt["j"]+1)});if(!s){var c=t.mainSeries.getData(),u=i.getName(n),h=c.indexOfName(u),f=i.getItemModel(n),d=f.getModel("label"),p=c.getItemGraphicEl(h);Object(Vt["g"])(l,Object(Vt["e"])(f),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(h,n)}}}),l.disableLabelAnimation=!0,d.get("position")||l.setTextConfig({position:"bottom"}),p.onHoverStateChange=function(t){Object(Nt["H"])(l,t)}}r.add(l)}}}))},e.type="map",e}(ye["a"]),ua=ca,ha=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.getCenter())}},n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t){for(var e=hi(this,{coordDimensions:["value"],encodeDefaulter:c["i"](fi["d"],this)}),n=c["g"](),i=[],r=0,o=e.count();r<o;r++){var a=e.getName(r);n.set(a,!0)}var s=Yo["a"].load(this.getMapType(),this.option.nameMap,this.option.nameProperty);return c["k"](s.regions,(function(t){var e=t.name;n.get(e)||i.push(e)})),e.appendValues([],i),e},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},e.prototype.formatTooltip=function(t,e,n){for(var i=this.getData(),r=this.getRawValue(t),o=i.getName(t),a=this.seriesGroup,s=[],l=0;l<a.length;l++){var c=a[l].originalData.indexOfName(o),u=i.mapDimension("value");isNaN(a[l].originalData.get(u,c))||s.push(a[l].name)}return Object(lo["c"])("section",{header:s.join(", "),noHeader:!s.length,blocks:[Object(lo["c"])("nameValue",{name:o,value:r})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var e=t.icon||"roundRect",n=Object(It["a"])(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(Et["b"]),fa=ha;function da(t,e){var n={};return c["k"](t,(function(t){t.each(t.mapDimension("value"),(function(e,i){var r="ec-"+t.getName(i);n[r]=n[r]||[],isNaN(e)||n[r].push(e)}))})),t[0].map(t[0].mapDimension("value"),(function(i,r){for(var o,a="ec-"+t[0].getName(r),s=0,l=1/0,c=-1/0,u=n[a].length,h=0;h<u;h++)l=Math.min(l,n[a][h]),c=Math.max(c,n[a][h]),s+=n[a][h];return o="min"===e?l:"max"===e?c:"average"===e?s/u:s,0===u?NaN:o}))}function pa(t){var e={};t.eachSeriesByType("map",(function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)})),c["k"](e,(function(t,e){for(var n=da(c["H"](t,(function(t){return t.getData()})),t[0].get("mapValueCalculation")),i=0;i<t.length;i++)t[i].originalData=t[i].getData();for(i=0;i<t.length;i++)t[i].seriesGroup=t,t[i].needsDrawMap=0===i&&!t[i].getHostGeoModel(),t[i].setData(n.cloneShallow()),t[i].mainSeries=t[0]}))}function ga(t){var e={};t.eachSeriesByType("map",(function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var r={};c["k"](n.seriesGroup,(function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),(function(t,e){var o=i.getName(e),a=n.getRegion(o);if(a&&!isNaN(t)){var s=r[o]||0,l=n.dataToPoint(a.getCenter());r[o]=s+1,i.setItemLayout(e,{point:l,offset:s})}}))}));var o=n.getData();o.each((function(t){var e=o.getName(t),n=o.getItemLayout(t)||{};n.showLabel=!r[e],o.setItemLayout(t,n)})),e[i]=!0}}))}var ma=n("8582"),va=Zi["b"],ya=function(t){function e(e){var n=t.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new ma["a"],n._rawTransformable=new ma["a"],n.name=e,n}return Object(At["b"])(e,t),e.prototype.setBoundingRect=function(t,e,n,i){return this._rect=new Xi["a"](t,e,n,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,e,n,i){this._transformTo(t,e,n,i),this._viewRect=new Xi["a"](t,e,n,i)},e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=this._rawTransformable;o.transform=r.calculateTransform(new Xi["a"](t,e,n,i));var a=o.parent;o.parent=null,o.decomposeTransform(),o.parent=a,this._updateTransform()},e.prototype.setCenter=function(t){t&&(this._center=t,this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect(),e=t.x+t.width/2,n=t.y+t.height/2;return[e,n]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=Zi["b"]([],i,t),n=Zi["b"]([],n,t),e.originX=i[0],e.originY=i[1],e.x=n[0]-i[0],e.y=n[1]-i[1],e.scaleX=e.scaleY=r,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),qi["b"](this.transform||(this.transform=[]),e.transform||qi["c"]()),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],qi["e"](this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,e=this._roamTransformable,n=new ma["a"];return n.transform=e.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?va(n,t,i):Zi["d"](n,t)},e.prototype.pointToData=function(t){var e=this.invTransform;return e?va([],t,e):[t[0],t[1]]},e.prototype.convertToPixel=function(t,e,n){var i=_a(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=_a(e);return i===this?i.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(ma["a"]);function _a(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var ba=ya,xa={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},wa=["lng","lat"],Sa=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.dimensions=wa,r.type="geo",r._nameCoordMap=c["g"](),r.map=n;var o=Yo["a"].load(n,i.nameMap,i.nameProperty),a=Yo["a"].getGeoResource(n);r.resourceType=a?a.type:null;var s=xa[a.type];r._regionsMap=o.regionsMap,r._invertLongitute=s.invertLongitute,r.regions=o.regions,r.aspectScale=c["P"](i.aspectScale,s.aspectScale);var l=o.boundingRect;return r.setBoundingRect(l.x,l.y,l.width,l.height),r}return Object(At["b"])(e,t),e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=this._invertLongitute;r=r.clone(),o&&(r.y=-r.y-r.height);var a=this._rawTransformable;a.transform=r.calculateTransform(new Xi["a"](t,e,n,i));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,o&&(a.scaleY=-a.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var e=this.regions,n=0;n<e.length;n++){var i=e[n];if("geoJSON"===i.type&&i.contain(t))return e[n]}},e.prototype.addGeoCoord=function(t,e){this._nameCoordMap.set(t,e)},e.prototype.getGeoCoord=function(t){var e=this._regionsMap.get(t);return this._nameCoordMap.get(t)||e&&e.getCenter()},e.prototype.dataToPoint=function(t,e,n){if("string"===typeof t&&(t=this.getGeoCoord(t)),t)return ba.prototype.dataToPoint.call(this,t,e,n)},e.prototype.convertToPixel=function(t,e,n){var i=Ta(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=Ta(e);return i===this?i.pointToData(n):null},e}(ba);function Ta(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",se["b"]).models[0]||{}).coordinateSystem:null}c["K"](Sa,ba);var Oa=Sa;function Ca(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];isNaN(i[0])||isNaN(i[1])||isNaN(r[0])||isNaN(r[1])||this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}var o,a,s,l=this.getBoundingRect(),c=t.get("layoutCenter"),u=t.get("layoutSize"),h=e.getWidth(),f=e.getHeight(),d=l.width/l.height*this.aspectScale,p=!1;if(c&&u&&(o=[xe["p"](c[0],h),xe["p"](c[1],f)],a=xe["p"](u,Math.min(h,f)),isNaN(o[0])||isNaN(o[1])||isNaN(a)||(p=!0)),p)s={},d>1?(s.width=a,s.height=a/d):(s.height=a,s.width=a*d),s.y=o[1]-s.height/2,s.x=o[0]-s.width/2;else{var g=t.getBoxLayoutParams();g.aspect=d,s=Gn["g"](g,{width:h,height:f})}this.setViewRect(s.x,s.y,s.width,s.height),this.setCenter(t.get("center")),this.setZoom(t.get("zoom"))}function Ma(t,e){c["k"](e.get("geoCoord"),(function(e,n){t.addGeoCoord(n,e)}))}var Aa=function(){function t(){this.dimensions=wa}return t.prototype.create=function(t,e){var n=[];t.eachComponent("geo",(function(t,i){var r=t.get("map"),o=new Oa(r+i,r,{nameMap:t.get("nameMap"),nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale")});o.zoomLimit=t.get("scaleLimit"),n.push(o),t.coordinateSystem=o,o.model=t,o.resize=Ca,o.resize(t,e)})),t.eachSeries((function(t){var e=t.get("coordinateSystem");if("geo"===e){var i=t.get("geoIndex")||0;t.coordinateSystem=n[i]}}));var i={};return t.eachSeriesByType("map",(function(t){if(!t.getHostGeoModel()){var e=t.getMapType();i[e]=i[e]||[],i[e].push(t)}})),c["k"](i,(function(t,i){var r=c["H"](t,(function(t){return t.get("nameMap")})),o=new Oa(i,i,{nameMap:c["J"](r),nameProperty:t[0].get("nameProperty"),aspectScale:t[0].get("aspectScale")});o.zoomLimit=c["O"].apply(null,c["H"](t,(function(t){return t.get("scaleLimit")}))),n.push(o),o.resize=Ca,o.resize(t[0],e),c["k"](t,(function(t){t.coordinateSystem=o,Ma(o,t)}))})),n},t.prototype.getFilledRegions=function(t,e,n,i){for(var r=(t||[]).slice(),o=c["g"](),a=0;a<r.length;a++)o.set(r[a].name,r[a]);var s=Yo["a"].load(e,n,i);return c["k"](s.regions,(function(t){var e=t.name;!o.get(e)&&r.push({name:e})})),r},t}(),Da=new Aa,Ea=Da,Ia=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){var i=Yo["a"].getGeoResource(t.map);if(i&&"geoJSON"===i.type){var r=t.itemStyle=t.itemStyle||{};"color"in r||(r.color="#eee")}this.mergeDefaultAndTheme(t,n),se["f"](t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,e=this.option;e.regions=Ea.getFilledRegions(e.regions,e.map,e.nameMap,e.nameProperty);var n={};this._optionModelMap=c["N"](e.regions||[],(function(e,i){var r=i.name;return r&&(e.set(r,new pr["a"](i,t,t.ecModel)),i.selected&&(n[r]=!0)),e}),c["g"]()),e.selectedMap||(e.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new pr["a"](null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,e){var n=this.getRegionModel(t),i="normal"===e?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),r={name:t};return"function"===typeof i?(r.status=e,i(r)):"string"===typeof i?i.replace("{a}",null!=t?t:""):void 0},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var e=this.option,n=e.selectedMode;if(n){"multiple"!==n&&(e.selectedMap=null);var i=e.selectedMap||(e.selectedMap={});i[t]=!0}},e.prototype.unSelect=function(t){var e=this.option.selectedMap;e&&(e[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var e=this.option.selectedMap;return!(!e||!e[t])},e.type="geo",e.layoutMode="box",e.defaultOption={zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Ei["a"]),Pa=Ia;function La(t,e,n){var i=t.getZoom(),r=t.getCenter(),o=e.zoom,a=t.dataToPoint(r);if(null!=e.dx&&null!=e.dy&&(a[0]-=e.dx,a[1]-=e.dy,t.setCenter(t.pointToData(a))),null!=o){if(n){var s=n.min||0,l=n.max||1/0;o=Math.max(Math.min(i*o,l),s)/i}t.scaleX*=o,t.scaleY*=o;var c=(e.originX-t.x)*(o-1),u=(e.originY-t.y)*(o-1);t.x-=c,t.y-=u,t.updateTransform(),t.setCenter(t.pointToData(a)),t.setZoom(o*i)}return{center:t.getCenter(),zoom:t.getZoom()}}var ka=n("fadd"),ja=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this._api=e},e.prototype.render=function(t,e,n,i){if(this._model=t,!t.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new la(n));var r=this._mapDraw;r.draw(t,e,n,this,i),r.group.on("click",this._handleRegionClick,this),r.group.silent=t.get("silent"),this.group.add(r.group),this.updateSelectStatus(t,e,n)},e.prototype._handleRegionClick=function(t){var e;Object(ka["a"])(t.target,(function(t){return null!=(e=Object(Rt["a"])(t).eventData)}),!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,n){var i=this;this._mapDraw.group.traverse((function(t){var e=Object(Rt["a"])(t).eventData;if(e)return i._model.isSelected(e.name)?n.enterSelect(t):n.leaveSelect(t),!0}))},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(Di["a"]),Ra=ja;function Na(t){function e(e,n){n.update="geo:updateSelectStatus",t.registerAction(n,(function(t,n){var i={},r=[];return n.eachComponent({mainType:"geo",query:t},(function(n){n[e](t.name);var o=n.coordinateSystem;Object(c["k"])(o.regions,(function(t){i[t.name]=n.isSelected(t.name)||!1}));var a=[];Object(c["k"])(i,(function(t,e){i[e]&&a.push(e)})),r.push({geoIndex:n.componentIndex,name:a})})),{selected:i,allSelected:r,name:t.name}}))}t.registerCoordinateSystem("geo",Ea),t.registerComponentModel(Pa),t.registerComponentView(Ra),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},(function(e){var i=e.coordinateSystem;if("geo"===i.type){var r=La(i,t,e.get("scaleLimit"));e.setCenter&&e.setCenter(r.center),e.setZoom&&e.setZoom(r.zoom),"series"===n&&Object(c["k"])(e.seriesGroup,(function(t){t.setCenter(r.center),t.setZoom(r.zoom)}))}}))}))}function Ba(t){Object(i["a"])(Na),t.registerChartView(ua),t.registerSeriesModel(fa),t.registerLayout(ga),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,pa),Object(Hn["a"])("map",t.registerAction)}var Fa=n("ac0f");function za(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};var n,i,r=[e];while(n=r.pop())if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Va(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){Xa(t);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-o):t.hierNode.prelim=o}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=Ya(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)}function Ha(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function Ga(t){return arguments.length?t:Ja}function Ua(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function Wa(t,e){return Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Xa(t){var e=t.children,n=e.length,i=0,r=0;while(--n>=0){var o=e[n];o.hierNode.prelim+=i,o.hierNode.modifier+=i,r+=o.hierNode.change,i+=o.hierNode.shift+r}}function Ya(t,e,n,i){if(e){var r=t,o=t,a=o.parentNode.children[0],s=e,l=r.hierNode.modifier,c=o.hierNode.modifier,u=a.hierNode.modifier,h=s.hierNode.modifier;while(s=qa(s),o=Za(o),s&&o){r=qa(r),a=Za(a),r.hierNode.ancestor=t;var f=s.hierNode.prelim+h-o.hierNode.prelim-c+i(s,o);f>0&&($a(Ka(s,t,n),t,f),c+=f,l+=f),h+=s.hierNode.modifier,c+=o.hierNode.modifier,l+=r.hierNode.modifier,u+=a.hierNode.modifier}s&&!qa(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=h-l),o&&!Za(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=c-u,n=t)}return n}function qa(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function Za(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function Ka(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function $a(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function Ja(t,e){return t.parentNode===e.parentNode?1:2}var Qa=n("e263"),ts=function(){function t(){this.parentPoint=[],this.childPoints=[]}return t}(),es=function(t){function e(e){return t.call(this,e)||this}return Object(At["b"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new ts},e.prototype.buildPath=function(t,e){var n=e.childPoints,i=n.length,r=e.parentPoint,o=n[0],a=n[i-1];if(1===i)return t.moveTo(r[0],r[1]),void t.lineTo(o[0],o[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,c=1-l,u=Object(xe["p"])(e.forkPosition,1),h=[];h[l]=r[l],h[c]=r[c]+(a[c]-r[c])*u,t.moveTo(r[0],r[1]),t.lineTo(h[0],h[1]),t.moveTo(o[0],o[1]),h[l]=o[l],t.lineTo(h[0],h[1]),h[l]=a[l],t.lineTo(h[0],h[1]),t.lineTo(a[0],a[1]);for(var f=1;f<i-1;f++){var d=n[f];t.moveTo(d[0],d[1]),h[l]=d[l],t.lineTo(h[0],h[1])}},e}(u["b"]),ns=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new Pt["a"],n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this._controller=new Vo(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var i=t.getData(),r=t.layoutInfo,o=this._mainGroup,a=t.get("layout");"radial"===a?(o.x=r.x+r.width/2,o.y=r.y+r.height/2):(o.x=r.x,o.y=r.y),this._updateViewCoordSys(t),this._updateController(t,e,n);var s=this._data;i.diff(s).add((function(e){is(i,e)&&rs(i,e,null,o,t)})).update((function(e,n){var r=s.getItemGraphicEl(n);is(i,e)?rs(i,e,r,o,t):r&&ls(s,n,r,o,t)})).remove((function(e){var n=s.getItemGraphicEl(e);n&&ls(s,e,n,o,t)})).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&i.eachItemGraphicEl((function(e,i){e.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})}))})),this._data=i},e.prototype._updateViewCoordSys=function(t){var e=t.getData(),n=[];e.each((function(t){var i=e.getItemLayout(t);!i||isNaN(i.x)||isNaN(i.y)||n.push([+i.x,+i.y])}));var i=[],r=[];Qa["d"](n,i,r);var o=this._min,a=this._max;r[0]-i[0]===0&&(i[0]=o?o[0]:i[0]-1,r[0]=a?a[0]:r[0]+1),r[1]-i[1]===0&&(i[1]=o?o[1]:i[1]-1,r[1]=a?a[1]:r[1]+1);var s=t.coordinateSystem=new ba;s.zoomLimit=t.get("scaleLimit"),s.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1]),s.setCenter(t.get("center")),s.setZoom(t.get("zoom")),this.group.attr({x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY}),this._min=i,this._max=r},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,o=this._controllerHost,a=this.group;r.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!Wo(e,n,t)})),r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){Ho(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){Go(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(t),n.updateLabelLayout()}))},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),n=this._getNodeGlobalScale(t);e.eachItemGraphicEl((function(t,e){t.setSymbolScale(n)}))},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scaleX||1,r=e.getZoom(),o=(r-1)*n+1;return o/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(ye["a"]);function is(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function rs(t,e,n,i,r){var o=!n,a=t.tree.getNodeByDataIndex(e),s=a.getModel(),l=a.getVisual("style").fill,c=!1===a.isExpand&&0!==a.children.length?l:"#fff",u=t.tree.root,h=a.parentNode===u?a:a.parentNode||a,f=t.getItemGraphicEl(h.dataIndex),d=h.getLayout(),p=f?{x:f.__oldX,y:f.__oldY,rawX:f.__radialOldRawX,rawY:f.__radialOldRawY}:d,g=a.getLayout();o?(n=new Ut(t,e,null,{symbolInnerColor:c,useNameLabel:!0}),n.x=p.x,n.y=p.y):n.updateData(t,e,null,{symbolInnerColor:c,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,i.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,jt["h"](n,{x:g.x,y:g.y},r);var m=n.getSymbolPath();if("radial"===r.get("layout")){var v=u.children[0],y=v.getLayout(),_=v.children.length,b=void 0,x=void 0;if(g.x===y.x&&!0===a.isExpand){var w={x:(v.children[0].getLayout().x+v.children[_-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[_-1].getLayout().y)/2};b=Math.atan2(w.y-y.y,w.x-y.x),b<0&&(b=2*Math.PI+b),x=w.x<y.x,x&&(b-=Math.PI)}else b=Math.atan2(g.y-y.y,g.x-y.x),b<0&&(b=2*Math.PI+b),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(x=g.x<y.x,x&&(b-=Math.PI)):(x=g.x>y.x,x||(b-=Math.PI));var S=x?"left":"right",T=s.getModel("label"),O=T.get("rotate"),C=O*(Math.PI/180),M=m.getTextContent();M&&(m.setTextConfig({position:T.get("position")||S,rotation:null==O?-b:C,origin:"center"}),M.setStyle("verticalAlign","middle"))}var A=s.get(["emphasis","focus"]),D="ancestor"===A?a.getAncestorsIndices():"descendant"===A?a.getDescendantIndices():null;D&&(Object(Rt["a"])(n).focus=D),os(r,a,u,n,p,d,g,i),n.__edge&&(n.onHoverStateChange=function(e){if("blur"!==e){var i=a.parentNode&&t.getItemGraphicEl(a.parentNode.dataIndex);i&&i.hoverState===Nt["d"]||Object(Nt["H"])(n.__edge,e)}})}function os(t,e,n,i,r,o,a,s){var l=e.getModel(),u=t.get("edgeShape"),h=t.get("layout"),f=t.getOrient(),d=t.get(["lineStyle","curveness"]),p=t.get("edgeForkPosition"),g=l.getModel("lineStyle").getLineStyle(),m=i.__edge;if("curve"===u)e.parentNode&&e.parentNode!==n&&(m||(m=i.__edge=new Fa["a"]({shape:cs(h,f,d,r,r)})),jt["h"](m,{shape:cs(h,f,d,o,a)},t));else if("polyline"===u)if("orthogonal"===h){if(e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var v=e.children,y=[],_=0;_<v.length;_++){var b=v[_].getLayout();y.push([b.x,b.y])}m||(m=i.__edge=new es({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:p}})),jt["h"](m,{shape:{parentPoint:[a.x,a.y],childPoints:y}},t)}}else 0;m&&(m.useStyle(c["j"]({strokeNoScale:!0,fill:null},g)),Object(Nt["I"])(m,l,"lineStyle"),Object(Nt["G"])(m),s.add(m))}function as(t,e,n,i,r){var o=e.tree.root,a=ss(o,t),s=a.source,l=a.sourceLayout,c=e.getItemGraphicEl(t.dataIndex);if(c){var u=e.getItemGraphicEl(s.dataIndex),h=u.__edge,f=c.__edge||(!1===s.isExpand||1===s.children.length?h:void 0),d=i.get("edgeShape"),p=i.get("layout"),g=i.get("orient"),m=i.get(["lineStyle","curveness"]);f&&("curve"===d?jt["e"](f,{shape:cs(p,g,m,l,l),style:{opacity:0}},i,{cb:function(){n.remove(f)},removeOpt:r}):"polyline"===d&&"orthogonal"===i.get("layout")&&jt["e"](f,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},i,{cb:function(){n.remove(f)},removeOpt:r}))}}function ss(t,e){var n,i=e.parentNode===t?e:e.parentNode||e;while(n=i.getLayout(),null==n)i=i.parentNode===t?i:i.parentNode||i;return{source:i,sourceLayout:n}}function ls(t,e,n,i,r){var o=t.tree.getNodeByDataIndex(e),a=t.tree.root,s=ss(a,o).sourceLayout,l={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};jt["e"](n,{x:s.x+1,y:s.y+1},r,{cb:function(){i.remove(n),t.setItemGraphicEl(e,null)},removeOpt:l}),n.fadeOut(null,{fadeLabel:!0,animation:l}),o.children.forEach((function(e){as(e,t,i,r,l)})),as(o,t,i,r,l)}function cs(t,e,n,i,r){var o,a,s,l,c,u,h,f;if("radial"===t){c=i.rawX,h=i.rawY,u=r.rawX,f=r.rawY;var d=Ua(c,h),p=Ua(c,h+(f-h)*n),g=Ua(u,f+(h-f)*n),m=Ua(u,f);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:g.x||0,cpy2:g.y||0}}return c=i.x,h=i.y,u=r.x,f=r.y,"LR"!==e&&"RL"!==e||(o=c+(u-c)*n,a=h,s=u+(c-u)*n,l=f),"TB"!==e&&"BT"!==e||(o=c,a=h+(f-h)*n,s=u,l=f+(h-f)*n),{x1:c,y1:h,x2:u,y2:f,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var us=ns,hs=n("6a2f"),fs=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){"function"===typeof t&&(n=e,e=t,t=null),t=t||{},c["C"](t)&&(t={order:t});var i,r=t.order||"preorder",o=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var a=0;!i&&a<o.length;a++)o[a].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},t.prototype.getAncestors=function(t){var e=[],n=t?this:this.parentNode;while(n)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){var t=[],e=this;while(e)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode((function(e){t.push(e.dataIndex)})),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostTree,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(t){var e=t.parentNode;while(e){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),ds=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,i){var r=new t(n),o=[],a=1;function s(t,e){var n=t.value;a=Math.max(a,c["t"](n)?n.length:1),o.push(t);var i=new fs(Object(se["e"])(t.name,""),r);e?ps(i,e):r.root=i,r._nodes.push(i);var l=t.children;if(l)for(var u=0;u<l.length;u++)s(l[u],i)}s(e),r.root.updateDepthAndHeight(0);var l=Object(ci["b"])(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new ui["a"](l,n);return u.initData(o),i&&i(u),Object(hs["a"])({mainData:u,struct:r,structAttr:"tree"}),r.update(),r},t}();function ps(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}var gs=ds;function ms(t,e,n){if(t&&c["r"](e,t.type)>=0){var i=n.getData().tree.root,r=t.targetNode;if("string"===typeof r&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var o=t.targetNodeId;if(null!=o&&(r=i.getNodeById(o)))return{node:r}}}function vs(t){var e=[];while(t)t=t.parentNode,t&&e.push(t);return e.reverse()}function ys(t,e){var n=vs(t);return c["r"](n,e)>=0}function _s(t,e){var n=[];while(t){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}var bs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},n=t.leaves||{},i=new pr["a"](n,this,this.ecModel),r=gs.createTree(e,this,o);function o(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e);return n&&n.children.length&&n.isExpand||(t.parentModel=i),t}))}var a=0;r.eachNode("preorder",(function(t){t.depth>a&&(a=t.depth)}));var s=t.expandAndCollapse,l=s&&t.initialTreeDepth>=0?t.initialTreeDepth:a;return r.root.eachNode("preorder",(function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=l})),r.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,n){var i=this.getData().tree,r=i.root.children[0],o=i.getNodeByDataIndex(t),a=o.getValue(),s=o.name;while(o&&o!==r)s=o.parentNode.name+"."+s,o=o.parentNode;return Object(lo["c"])("nameValue",{name:s,value:a,noValue:isNaN(a)||null==a})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=_s(i,this),n},e.type="series.tree",e.layoutMode="box",e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(Et["b"]),xs=bs;function ws(t,e,n){var i,r=[t],o=[];while(i=r.pop())if(o.push(i),i.isExpand){var a=i.children;if(a.length)for(var s=0;s<a.length;s++)r.push(a[s])}while(i=o.pop())e(i,n)}function Ss(t,e){var n,i=[t];while(n=i.pop())if(e(n),n.isExpand){var r=n.children;if(r.length)for(var o=r.length-1;o>=0;o--)i.push(r[o])}}function Ts(t,e){t.eachSeriesByType("tree",(function(t){Os(t,e)}))}function Os(t,e){var n=Wa(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,o=0,a=null;"radial"===i?(r=2*Math.PI,o=Math.min(n.height,n.width)/2,a=Ga((function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth}))):(r=n.width,o=n.height,a=Ga());var s=t.getData().tree.root,l=s.children[0];if(l){za(s),ws(l,Va,a),s.hierNode.modifier=-l.hierNode.prelim,Ss(l,Ha);var c=l,u=l,h=l;Ss(l,(function(t){var e=t.getLayout().x;e<c.getLayout().x&&(c=t),e>u.getLayout().x&&(u=t),t.depth>h.depth&&(h=t)}));var f=c===u?1:a(c,u)/2,d=f-c.getLayout().x,p=0,g=0,m=0,v=0;if("radial"===i)p=r/(u.getLayout().x+f+d),g=o/(h.depth-1||1),Ss(l,(function(t){m=(t.getLayout().x+d)*p,v=(t.depth-1)*g;var e=Ua(m,v);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)}));else{var y=t.getOrient();"RL"===y||"LR"===y?(g=o/(u.getLayout().x+f+d),p=r/(h.depth-1||1),Ss(l,(function(t){v=(t.getLayout().x+d)*g,m="LR"===y?(t.depth-1)*p:r-(t.depth-1)*p,t.setLayout({x:m,y:v},!0)}))):"TB"!==y&&"BT"!==y||(p=r/(u.getLayout().x+f+d),g=o/(h.depth-1||1),Ss(l,(function(t){m=(t.getLayout().x+d)*p,v="TB"===y?(t.depth-1)*g:o-(t.depth-1)*g,t.setLayout({x:m,y:v},!0)})))}}}function Cs(t){t.eachSeriesByType("tree",(function(t){var e=t.getData(),n=e.tree;n.eachNode((function(t){var n=t.getModel(),i=n.getModel("itemStyle").getItemStyle(),r=e.ensureUniqueItemVisual(t.dataIndex,"style");Object(c["m"])(r,i)}))}))}function Ms(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=t.dataIndex,i=e.getData().tree,r=i.getNodeByDataIndex(n);r.isExpand=!r.isExpand}))})),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=e.coordinateSystem,i=La(n,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))}function As(t){t.registerChartView(us),t.registerSeriesModel(xs),t.registerLayout(Ts),t.registerVisual(Cs),Ms(t)}var Ds=function(){},Es=["treemapZoomToNode","treemapRender","treemapMove"];function Is(t){for(var e=0;e<Es.length;e++)t.registerAction({type:Es[e],update:"updateView"},Ds);t.registerAction({type:"treemapRootToNode",update:"updateView"},(function(t,e){function n(e,n){var i=["treemapZoomToNode","treemapRootToNode"],r=ms(t,i,e);if(r){var o=e.getViewRoot();o&&(t.direction=ys(o,r.node)?"rollUp":"drillDown"),e.resetViewRoot(r.node)}}e.eachComponent({mainType:"series",subType:"treemap",query:t},n)}))}var Ps=n("4041");function Ls(t){var e=t.getData(),n=e.tree,i={};n.eachNode((function(e){var n=e;while(n&&n.depth>1)n=n.parentNode;var r=Object(Ps["b"])(t.ecModel,n.name||n.dataIndex+"",i);e.setVisual("decal",r)}))}var ks=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};js(n);var i=t.levels||[],r=this.designatedVisualItemStyle={},o=new pr["a"]({itemStyle:r},this,e);i=t.levels=Rs(i,e);var a=c["H"](i||[],(function(t){return new pr["a"](t,o,e)}),this),s=gs.createTree(n,this,l);function l(t){t.wrapMethod("getItemModel",(function(t,e){var n=s.getNodeByDataIndex(e),i=n?a[n.depth]:null;return t.parentModel=i||o,t}))}return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),o=i.getName(t);return Object(lo["c"])("nameValue",{name:o,value:r})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=_s(i,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},c["m"](this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=c["g"](),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){Ls(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(Et["b"]);function js(t){var e=0;c["k"](t.children,(function(t){js(t);var n=t.value;c["t"](n)&&(n=n[0]),e+=n}));var n=t.value;c["t"](n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),c["t"](t.value)?t.value[0]=n:t.value=n}function Rs(t,e){var n=Object(se["r"])(e.get("color")),i=Object(se["r"])(e.get(["aria","decal","decals"]));if(n){var r,o;t=t||[],c["k"](t,(function(t){var e=new pr["a"](t),n=e.get("color"),i=e.get("decal");(e.get(["itemStyle","color"])||n&&"none"!==n)&&(r=!0),(e.get(["itemStyle","decal"])||i&&"none"!==i)&&(o=!0)}));var a=t[0]||(t[0]={});return r||(a.color=n.slice()),!o&&i&&(a.decal=i.slice()),t}}var Ns=ks,Bs=n("80f0"),Fs=8,zs=8,Vs=5,Hs=function(){function t(t){this.group=new Pt["a"],t.add(this.group)}return t.prototype.render=function(t,e,n,i){var r=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),r.get("show")&&n){var a=r.getModel("itemStyle"),s=a.getModel("textStyle"),l={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,l,s),this._renderContent(t,l,a,s,i),Gn["i"](o,l.pos,l.box)}},t.prototype._prepare=function(t,e,n){for(var i=t;i;i=i.parentNode){var r=Object(se["e"])(i.getModel().get("name"),""),o=n.getTextRect(r),a=Math.max(o.width+2*Fs,e.emptyItemWidth);e.totalWidth+=a+zs,e.renderList.push({node:i,text:r,width:a})}},t.prototype._renderContent=function(t,e,n,i,r){for(var o=0,a=e.emptyItemWidth,s=t.get(["breadcrumb","height"]),l=Gn["e"](e.pos,e.box),u=e.totalWidth,h=e.renderList,f=h.length-1;f>=0;f--){var d=h[f],p=d.node,g=d.width,m=d.text;u>l.width&&(u-=g-a,g=a,m=null);var v=new oo["a"]({shape:{points:Gs(o,0,g,s,f===h.length-1,0===f)},style:Object(c["j"])(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new ae["a"]({style:{text:m,fill:i.getTextColor(),font:i.getFont()}}),textConfig:{position:"inside"},z2:1e4*Nt["j"],onclick:Object(c["i"])(r,p)});v.disableLabelAnimation=!0,this.group.add(v),Us(v,t,p),o+=g+zs}},t.prototype.remove=function(){this.group.removeAll()},t}();function Gs(t,e,n,i,r,o){var a=[[r?t:t-Vs,e],[t+n,e],[t+n,e+i],[r?t:t-Vs,e+i]];return!o&&a.splice(2,0,[t+n+Vs,e+i/2]),!r&&a.push([t,e+i/2]),a}function Us(t,e,n){Object(Rt["a"])(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&_s(n,e)}}var Ws=Hs,Xs=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,n,i,r){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:i,easing:r}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){e--,e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,r=this._storage.length;i<r;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},t}();function Ys(){return new Xs}var qs=n("282b"),Zs=Pt["a"],Ks=_e["a"],$s=3,Js="label",Qs="upperLabel",tl=10*Nt["j"],el=2*Nt["j"],nl=3*Nt["j"],il=Object(qs["a"])([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),rl=function(t){var e=il(t);return e.stroke=e.fill=e.lineWidth=null,e},ol=Object(se["o"])(),al=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage=sl(),n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){var r=e.findComponents({mainType:"series",subType:"treemap",query:i});if(!(Object(c["r"])(r,t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var o=["treemapZoomToNode","treemapRootToNode"],a=ms(i,o,t),s=i&&i.type,l=t.layoutInfo,u=!this._oldTree,h=this._storage,f="treemapRootToNode"===s&&a&&h?{rootNodeGroup:h.nodeGroup[a.node.getRawIndex()],direction:i.direction}:null,d=this._giveContainerGroup(l),p=t.get("animation"),g=this._doRender(d,t,f);!p||u||s&&"treemapZoomToNode"!==s&&"treemapRootToNode"!==s?g.renderFinally():this._doAnimation(d,g,t,f),this._resetController(n),this._renderBreadcrumb(t,n,a)}},e.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new Zs,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},e.prototype._doRender=function(t,e,n){var i=e.getData().tree,r=this._oldTree,o=sl(),a=sl(),s=this._storage,l=[];function u(t,i,r,c){return ll(e,a,s,n,o,l,t,i,r,c)}f(i.root?[i.root]:[],r&&r.root?[r.root]:[],t,i===r||!r,0);var h=d(s);return this._oldTree=i,this._storage=a,{lastsForAnimation:o,willDeleteEls:h,renderFinally:p};function f(t,e,n,i,r){function o(t){return t.getId()}function a(o,a){var s=null!=o?t[o]:null,l=null!=a?e[a]:null,c=u(s,l,n,r);c&&f(s&&s.viewChildren||[],l&&l.viewChildren||[],c,i,r+1)}i?(e=t,Object(c["k"])(t,(function(t,e){!t.isRemoved()&&a(e,e)}))):new Bs["a"](e,t,o,o).add(a).update(a).remove(Object(c["i"])(a,null)).execute()}function d(t){var e=sl();return t&&Object(c["k"])(t,(function(t,n){var i=e[n];Object(c["k"])(t,(function(t){t&&(i.push(t),ol(t).willDelete=!0)}))})),e}function p(){Object(c["k"])(h,(function(t){Object(c["k"])(t,(function(t){t.parent&&t.parent.remove(t)}))})),Object(c["k"])(l,(function(t){t.invisible=!0,t.dirty()}))}},e.prototype._doAnimation=function(t,e,n,i){var r=n.get("animationDurationUpdate"),o=n.get("animationEasing"),a=(Object(c["w"])(r)?0:r)||0,s=(Object(c["w"])(o)?null:o)||"cubicOut",l=Ys();Object(c["k"])(e.willDeleteEls,(function(t,e){Object(c["k"])(t,(function(t,n){if(!t.invisible){var r,o=t.parent,c=ol(o);if(i&&"drillDown"===i.direction)r=o===i.rootNodeGroup?{shape:{x:0,y:0,width:c.nodeWidth,height:c.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;c.willDelete||(u=c.nodeWidth/2,h=c.nodeHeight/2),r="nodeGroup"===e?{x:u,y:h,style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}r&&l.add(t,r,a,0,s)}}))})),Object(c["k"])(this._storage,(function(t,n){Object(c["k"])(t,(function(t,i){var r=e.lastsForAnimation[n][i],o={};r&&(t instanceof Pt["a"]?null!=r.oldX&&(o.x=t.x,o.y=t.y,t.x=r.oldX,t.y=r.oldY):(r.oldShape&&(o.shape=Object(c["m"])({},t.shape),t.setShape(r.oldShape)),r.fadein?(t.setStyle("opacity",0),o.style={opacity:1}):1!==t.style.opacity&&(o.style={opacity:1})),l.add(t,o,a,0,s))}))}),this),this._state="animating",l.finished(Object(c["c"])((function(){this._state="ready",e.renderFinally()}),this)).start()},e.prototype._resetController=function(t){var e=this._controller;e||(e=this._controller=new Vo(t.getZr()),e.enable(this.seriesModel.get("roam")),e.on("pan",Object(c["c"])(this._onPan,this)),e.on("zoom",Object(c["c"])(this._onZoom,this)));var n=new Xi["a"](0,0,t.getWidth(),t.getHeight());e.setPointerChecker((function(t,e,i){return n.contain(e,i)}))},e.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>$s||Math.abs(t.dy)>$s)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var o=new Xi["a"](r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo;e-=a.x,n-=a.y;var s=qi["c"]();qi["i"](s,s,[-e,-n]),qi["h"](s,s,[t.scale,t.scale]),qi["i"](s,s,[e,n]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},e.prototype._initEvents=function(t){var e=this;t.on("click",(function(t){if("ready"===e._state){var n=e.seriesModel.get("nodeClick",!0);if(n){var i=e.findTarget(t.offsetX,t.offsetY);if(i){var r=i.node;if(r.getLayout().isLeafRoot)e._rootToNode(i);else if("zoomToNode"===n)e._zoomToNode(i);else if("link"===n){var o=r.hostTree.data.getItemModel(r.dataIndex),a=o.get("link",!0),s=o.get("target",!0)||"blank";a&&Object(Ce["l"])(a,s)}}}}}),this)},e.prototype._renderBreadcrumb=function(t,e,n){var i=this;n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2),n||(n={node:t.getData().tree.root})),(this._breadcrumb||(this._breadcrumb=new Ws(this.group))).render(t,e,n.node,(function(e){"animating"!==i._state&&(ys(t.getViewRoot(),e)?i._rootToNode({node:e}):i._zoomToNode({node:e}))}))},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage=sl(),this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,e){var n,i=this.seriesModel.getViewRoot();return i.eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var o=r.transformCoordToLocal(t,e),a=r.shape;if(!(a.x<=o[0]&&o[0]<=a.x+a.width&&a.y<=o[1]&&o[1]<=a.y+a.height))return!1;n={node:i,offsetX:o[0],offsetY:o[1]}}}),this),n},e.type="treemap",e}(ye["a"]);function sl(){return{nodeGroup:[],background:[],content:[]}}function ll(t,e,n,i,r,o,a,s,l,u){if(a){var h=a.getLayout(),f=t.getData(),d=a.getModel();if(f.setItemGraphicEl(a.dataIndex,null),h&&h.isInView){var p=h.width,g=h.height,m=h.borderWidth,v=h.invisible,y=a.getRawIndex(),_=s&&s.getRawIndex(),b=a.viewChildren,x=h.upperHeight,w=b&&b.length,S=d.getModel("itemStyle"),T=d.getModel(["emphasis","itemStyle"]),O=d.getModel(["blur","itemStyle"]),C=d.getModel(["select","itemStyle"]),M=S.get("borderRadius")||0,A=F("nodeGroup",Zs);if(A){if(l.add(A),A.x=h.x||0,A.y=h.y||0,A.markRedraw(),ol(A).nodeWidth=p,ol(A).nodeHeight=g,h.isAboveViewRoot)return A;var D=F("background",Ks,u,el);D&&k(A,D,w&&h.upperLabelHeight);var E=d.get(["emphasis","focus"]),I=d.get(["emphasis","blurScope"]),P="ancestor"===E?a.getAncestorsIndices():"descendant"===E?a.getDescendantIndices():E;if(w)Object(Nt["y"])(A)&&Object(Nt["F"])(A,!1),D&&(Object(Nt["F"])(D,!0),f.setItemGraphicEl(a.dataIndex,D),Object(Nt["p"])(D,P,I));else{var L=F("content",Ks,u,nl);L&&j(A,L),D.disableMorphing=!0,D&&Object(Nt["y"])(D)&&Object(Nt["F"])(D,!1),Object(Nt["F"])(A,!0),f.setItemGraphicEl(a.dataIndex,A),Object(Nt["p"])(A,P,I)}return A}}}function k(e,n,i){var r=Object(Rt["a"])(n);if(r.dataIndex=a.dataIndex,r.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:p,height:g,r:M}),v)R(n);else{n.invisible=!1;var o=a.getVisual("style"),s=o.stroke,l=rl(S);l.fill=s;var c=il(T);c.fill=T.get("borderColor");var u=il(O);u.fill=O.get("borderColor");var h=il(C);if(h.fill=C.get("borderColor"),i){var f=p-2*m;N(n,s,o.opacity,{x:m,y:0,width:f,height:x})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=c,n.ensureState("blur").style=u,n.ensureState("select").style=h,Object(Nt["G"])(n)}e.add(n)}function j(e,n){var i=Object(Rt["a"])(n);i.dataIndex=a.dataIndex,i.seriesIndex=t.seriesIndex;var r=Math.max(p-2*m,0),o=Math.max(g-2*m,0);if(n.culling=!0,n.setShape({x:m,y:m,width:r,height:o,r:M}),v)R(n);else{n.invisible=!1;var s=a.getVisual("style"),l=s.fill,c=rl(S);c.fill=l,c.decal=s.decal;var u=il(T),h=il(O),f=il(C);N(n,l,s.opacity,null),n.setStyle(c),n.ensureState("emphasis").style=u,n.ensureState("blur").style=h,n.ensureState("select").style=f,Object(Nt["G"])(n)}e.add(n)}function R(t){!t.invisible&&o.push(t)}function N(e,n,i,r){var o=d.getModel(r?Qs:Js),s=Object(se["e"])(d.get("name"),null),l=o.getShallow("show");Object(Vt["g"])(e,Object(Vt["e"])(d,r?Qs:Js),{defaultText:l?s:null,inheritColor:n,defaultOpacity:i,labelFetcher:t,labelDataIndex:a.dataIndex});var u=e.getTextContent();if(u){var f=u.style,p=Object(c["M"])(f.padding||0);r&&(e.setTextConfig({layoutRect:r}),u.disableLabelLayout=!0),u.beforeUpdate=function(){var t=Math.max((r?r.width:e.shape.width)-p[1]-p[3],0),n=Math.max((r?r.height:e.shape.height)-p[0]-p[2],0);f.width===t&&f.height===n||u.setStyle({width:t,height:n})},f.truncateMinChar=2,f.lineOverflow="truncate",B(f,r,h);var g=u.getState("emphasis");B(g?g.style:null,r,h)}}function B(e,n,i){var r=e?e.text:null;if(!n&&i.isLeafRoot&&null!=r){var o=t.get("drillDownIcon",!0);e.text=o?o+" "+r:r}}function F(t,i,o,a){var s=null!=_&&n[t][_],l=r[t];return s?(n[t][_]=null,z(l,s)):v||(s=new i,s instanceof Zo["c"]&&(s.z2=cl(o,a)),V(l,s)),e[t][y]=s}function z(t,e){var n=t[y]={};e instanceof Zs?(n.oldX=e.x,n.oldY=e.y):n.oldShape=Object(c["m"])({},e.shape)}function V(t,e){var n=t[y]={},o=a.parentNode,s=e instanceof Pt["a"];if(o&&(!i||"drillDown"===i.direction)){var l=0,c=0,u=r.background[o.getRawIndex()];!i&&u&&u.oldShape&&(l=u.oldShape.width,c=u.oldShape.height),s?(n.oldX=0,n.oldY=c):n.oldShape={x:l,y:c,width:0,height:0}}n.fadein=!s}}function cl(t,e){return t*tl+e}var ul=al,hl=c["k"],fl=c["A"],dl=-1,pl=function(){function t(e){var n=e.mappingMethod,i=e.type,r=this.option=c["d"](e);this.type=i,this.mappingMethod=n,this._normalizeData=Cl[n];var o=t.visualHandlers[i];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[n],"piecewise"===n?(vl(r),gl(r)):"category"===n?r.categories?ml(r):vl(r,!0):(c["b"]("linear"!==n||r.dataExtent),vl(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return c["c"](this._normalizeData,this)},t.listVisualTypes=function(){return c["F"](t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){c["A"](t)?c["k"](t,e,n):e.call(n,t)},t.mapVisual=function(e,n,i){var r,o=c["t"](e)?[]:c["A"](e)?{}:(r=!0,null);return t.eachVisual(e,(function(t,e){var a=n.call(i,t,e);r?o=a:o[e]=a})),o},t.retrieveVisuals=function(e){var n,i={};return e&&hl(t.visualHandlers,(function(t,r){e.hasOwnProperty(r)&&(i[r]=e[r],n=!0)})),n?i:null},t.prepareVisualTypes=function(t){if(c["t"](t))t=t.slice();else{if(!fl(t))return[];var e=[];hl(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var i,r=1/0,o=0,a=e.length;o<a;o++){var s=e[o].value;if(null!=s){if(s===t||"string"===typeof s&&s===t+"")return o;n&&h(s,o)}}for(o=0,a=e.length;o<a;o++){var l=e[o],c=l.interval,u=l.close;if(c){if(c[0]===-1/0){if(Ml(u[1],t,c[1]))return o}else if(c[1]===1/0){if(Ml(u[0],c[0],t))return o}else if(Ml(u[0],c[0],t)&&Ml(u[1],t,c[1]))return o;n&&h(c[0],o),n&&h(c[1],o)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function h(e,n){var o=Math.abs(e-t);o<r&&(r=o,i=n)}},t.visualHandlers={color:{applyVisual:bl("color"),getColorMapper:function(){var t=this.option;return c["c"]("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),xl.call(this,t)}:function(e,n,i){var r=!!i;return!n&&(e=this._normalizeData(e)),i=a["fastLerp"](e,t.parsedVisual,i),r?i:a["stringify"](i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return a["stringify"](a["fastLerp"](t,this.option.parsedVisual),"rgba")},category:xl,piecewise:function(t,e){var n=Tl.call(this,e);return null==n&&(n=a["stringify"](a["fastLerp"](t,this.option.parsedVisual),"rgba")),n},fixed:wl}},colorHue:yl((function(t,e){return a["modifyHSL"](t,e)})),colorSaturation:yl((function(t,e){return a["modifyHSL"](t,null,e)})),colorLightness:yl((function(t,e){return a["modifyHSL"](t,null,null,e)})),colorAlpha:yl((function(t,e){return a["modifyAlpha"](t,e)})),decal:{applyVisual:bl("decal"),_normalizedToVisual:{linear:null,category:xl,piecewise:null,fixed:null}},opacity:{applyVisual:bl("opacity"),_normalizedToVisual:Sl([0,1])},liftZ:{applyVisual:bl("liftZ"),_normalizedToVisual:{linear:wl,category:wl,piecewise:wl,fixed:wl}},symbol:{applyVisual:function(t,e,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:_l,category:xl,piecewise:function(t,e){var n=Tl.call(this,e);return null==n&&(n=_l.call(this,t)),n},fixed:wl}},symbolSize:{applyVisual:bl("symbolSize"),_normalizedToVisual:Sl([0,1])}},t}();function gl(t){var e=t.pieceList;t.hasSpecialVisual=!1,c["k"](e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}function ml(t){var e=t.categories,n=t.categoryMap={},i=t.visual;if(hl(e,(function(t,e){n[t]=e})),!c["t"](i)){var r=[];c["A"](i)?hl(i,(function(t,e){var i=n[e];r[null!=i?i:dl]=t})):r[dl]=i,i=Ol(t,r)}for(var o=e.length-1;o>=0;o--)null==i[o]&&(delete n[e[o]],e.pop())}function vl(t,e){var n=t.visual,i=[];c["A"](n)?hl(n,(function(t){i.push(t)})):null!=n&&i.push(n);var r={color:1,symbol:1};e||1!==i.length||r.hasOwnProperty(t.type)||(i[1]=i[0]),Ol(t,i)}function yl(t){return{applyVisual:function(e,n,i){var r=this.mapValueToVisual(e);i("color",t(n("color"),r))},_normalizedToVisual:Sl([0,1])}}function _l(t){var e=this.option.visual;return e[Math.round(Object(xe["l"])(t,[0,1],[0,e.length-1],!0))]||{}}function bl(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function xl(t){var e=this.option.visual;return e[this.option.loop&&t!==dl?t%e.length:t]}function wl(){return this.option.visual[0]}function Sl(t){return{linear:function(e){return Object(xe["l"])(e,t,this.option.visual,!0)},category:xl,piecewise:function(e,n){var i=Tl.call(this,n);return null==i&&(i=Object(xe["l"])(e,t,this.option.visual,!0)),i},fixed:wl}}function Tl(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=pl.findPieceIndex(t,n),r=n[i];if(r&&r.visual)return r.visual[this.type]}}function Ol(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=c["H"](e,(function(t){return a["parse"](t)}))),e}var Cl={linear:function(t){return Object(xe["l"])(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=pl.findPieceIndex(t,e,!0);if(null!=n)return Object(xe["l"])(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?dl:e},fixed:c["L"]};function Ml(t,e,n){return t?e<=n:e<n}var Al=pl,Dl="itemStyle",El=Object(se["o"])(),Il={seriesType:"treemap",reset:function(t){var e=t.getData().tree,n=e.root;n.isRemoved()||Pl(n,{},t.getViewRoot().getAncestors(),t)}};function Pl(t,e,n,i){var r=t.getModel(),o=t.getLayout(),a=t.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,l=r.getModel(Dl),u=Ll(l,e,i),h=a.ensureUniqueItemVisual(t.dataIndex,"style"),f=l.get("borderColor"),d=l.get("borderColorSaturation");null!=d&&(s=kl(u),f=jl(d,s)),h.stroke=f;var p=t.viewChildren;if(p&&p.length){var g=Nl(t,r,o,l,u,p);Object(c["k"])(p,(function(t,e){if(t.depth>=n.length||t===n[t.depth]){var o=Fl(r,u,t,e,g,i);Pl(t,o,n,i)}}))}else s=kl(u),h.fill=s}}function Ll(t,e,n){var i=Object(c["m"])({},e),r=n.designatedVisualItemStyle;return Object(c["k"])(["color","colorAlpha","colorSaturation"],(function(n){r[n]=e[n];var o=t.get(n);r[n]=null,null!=o&&(i[n]=o)})),i}function kl(t){var e=Rl(t,"color");if(e){var n=Rl(t,"colorAlpha"),i=Rl(t,"colorSaturation");return i&&(e=Object(a["modifyHSL"])(e,null,null,i)),n&&(e=Object(a["modifyAlpha"])(e,n)),e}}function jl(t,e){return null!=e?Object(a["modifyHSL"])(e,null,null,t):null}function Rl(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function Nl(t,e,n,i,r,o){if(o&&o.length){var a=Bl(e,"color")||null!=r.color&&"none"!==r.color&&(Bl(e,"colorAlpha")||Bl(e,"colorSaturation"));if(a){var s=e.get("visualMin"),l=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=l&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),h={type:a.name,dataExtent:c,visual:a.range};"color"!==h.type||"index"!==u&&"id"!==u?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var f=new Al(h);return El(f).drColorMappingBy=u,f}}}function Bl(t,e){var n=t.get(e);return Object(c["t"])(n)&&n.length?{name:e,range:n}:null}function Fl(t,e,n,i,r,o){var a=Object(c["m"])({},e);if(r){var s=r.type,l="color"===s&&El(r).drColorMappingBy,u="index"===l?i:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[s]=r.mapValueToVisual(u)}return a}var zl=Math.max,Vl=Math.min,Hl=c["O"],Gl=c["k"],Ul=["itemStyle","borderWidth"],Wl=["itemStyle","gapWidth"],Xl=["upperLabel","show"],Yl=["upperLabel","height"],ql={seriesType:"treemap",reset:function(t,e,n,i){var r=n.getWidth(),o=n.getHeight(),a=t.option,s=Gn["g"](t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],u=Object(xe["p"])(Hl(s.width,l[0]),r),h=Object(xe["p"])(Hl(s.height,l[1]),o),f=i&&i.type,d=["treemapZoomToNode","treemapRootToNode"],p=ms(i,d,t),g="treemapRender"===f||"treemapMove"===f?i.rootRect:null,m=t.getViewRoot(),v=vs(m);if("treemapMove"!==f){var y="treemapZoomToNode"===f?nc(t,p,m,u,h):g?[g.width,g.height]:[u,h],_=a.sort;_&&"asc"!==_&&"desc"!==_&&(_="desc");var b={squareRatio:a.squareRatio,sort:_,leafDepth:a.leafDepth};m.hostTree.clearLayouts();var x={x:0,y:0,width:y[0],height:y[1],area:y[0]*y[1]};m.setLayout(x),Zl(m,b,!1,0),x=m.getLayout(),Gl(v,(function(t,e){var n=(v[e+1]||m).getValue();t.setLayout(c["m"]({dataExtent:[n,n],borderWidth:0,upperHeight:0},x))}))}var w=t.getData().tree.root;w.setLayout(ic(s,g,p),!0),t.setLayoutInfo(s),rc(w,new Xi["a"](-s.x,-s.y,r,o),v,m,0)}};function Zl(t,e,n,i){var r,o;if(!t.isRemoved()){var a=t.getLayout();r=a.width,o=a.height;var s=t.getModel(),l=s.get(Ul),c=s.get(Wl)/2,u=oc(s),h=Math.max(l,u),f=l-c,d=h-c;t.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:u},!0),r=zl(r-2*f,0),o=zl(o-f-d,0);var p=r*o,g=Kl(t,s,p,e,n,i);if(g.length){var m={x:f,y:d,width:r,height:o},v=Vl(r,o),y=1/0,_=[];_.area=0;for(var b=0,x=g.length;b<x;){var w=g[b];_.push(w),_.area+=w.getLayout().area;var S=tc(_,v,e.squareRatio);S<=y?(b++,y=S):(_.area-=_.pop().getLayout().area,ec(_,v,m,c,!1),v=Vl(m.width,m.height),_.length=_.area=0,y=1/0)}if(_.length&&ec(_,v,m,c,!0),!n){var T=s.get("childrenVisibleMin");null!=T&&p<T&&(n=!0)}for(b=0,x=g.length;b<x;b++)Zl(g[b],e,n,i+1)}}}function Kl(t,e,n,i,r,o){var a=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=o;if(r&&!l)return t.viewChildren=[];a=c["n"](a,(function(t){return!t.isRemoved()})),Jl(a,s);var u=Ql(e,a,s);if(0===u.sum)return t.viewChildren=[];if(u.sum=$l(e,n,u.sum,s,a),0===u.sum)return t.viewChildren=[];for(var h=0,f=a.length;h<f;h++){var d=a[h].getValue()/u.sum*n;a[h].setLayout({area:d})}return l&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:u.dataExtent},!0),a}function $l(t,e,n,i,r){if(!i)return n;for(var o=t.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var c=r["asc"===i?a-l-1:l].getValue();c/n*e<o&&(s=l,n-=c)}return"asc"===i?r.splice(0,a-s):r.splice(s,a-s),n}function Jl(t,e){return e&&t.sort((function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i})),t}function Ql(t,e,n){for(var i=0,r=0,o=e.length;r<o;r++)i+=e[r].getValue();var a,s=t.get("visualDimension");return e&&e.length?"value"===s&&n?(a=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&a.reverse()):(a=[1/0,-1/0],Gl(e,(function(t){var e=t.getValue(s);e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e)}))):a=[NaN,NaN],{sum:i,dataExtent:a}}function tc(t,e,n){for(var i=0,r=1/0,o=0,a=void 0,s=t.length;o<s;o++)a=t[o].getLayout().area,a&&(a<r&&(r=a),a>i&&(i=a));var l=t.area*t.area,c=e*e*n;return l?zl(c*i/l,l/(c*r)):1/0}function ec(t,e,n,i,r){var o=e===n.width?0:1,a=1-o,s=["x","y"],l=["width","height"],c=n[s[o]],u=e?t.area/e:0;(r||u>n[l[a]])&&(u=n[l[a]]);for(var h=0,f=t.length;h<f;h++){var d=t[h],p={},g=u?d.getLayout().area/u:0,m=p[l[a]]=zl(u-2*i,0),v=n[s[o]]+n[l[o]]-c,y=h===f-1||v<g?v:g,_=p[l[o]]=zl(y-2*i,0);p[s[a]]=n[s[a]]+Vl(i,m/2),p[s[o]]=c+Vl(i,_/2),c+=y,d.setLayout(p,!0)}n[s[a]]+=u,n[l[a]]-=u}function nc(t,e,n,i,r){var o,a=(e||{}).node,s=[i,r];if(!a||a===n)return s;var l=i*r,c=l*t.option.zoomToNodeRatio;while(o=a.parentNode){for(var u=0,h=o.children,f=0,d=h.length;f<d;f++)u+=h[f].getValue();var p=a.getValue();if(0===p)return s;c*=u/p;var g=o.getModel(),m=g.get(Ul),v=Math.max(m,oc(g));c+=4*m*m+(3*m+v)*Math.pow(c,.5),c>xe["a"]&&(c=xe["a"]),a=o}c<l&&(c=l);var y=Math.pow(c/l,.5);return[i*y,r*y]}function ic(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,o=r.getLayout();if(!o)return i;var a=[o.width/2,o.height/2],s=r;while(s){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}function rc(t,e,n,i,r){var o=t.getLayout(),a=n[r],s=a&&a===t;if(!(a&&!s||r===n.length&&t!==i)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(o),isAboveViewRoot:s},!0);var l=new Xi["a"](e.x-o.x,e.y-o.y,e.width,e.height);Gl(t.viewChildren||[],(function(t){rc(t,l,n,i,r+1)}))}}function oc(t){return t.get(Xl)?t.get(Yl):0}function ac(t){t.registerSeriesModel(Ns),t.registerChartView(ul),t.registerVisual(Il),t.registerLayout(ql),Is(t)}function sc(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getGraph(),r=i.data,o=n.mapArray(n.getName);r.filterSelf((function(t){var n=r.getItemModel(t),i=n.getShallow("category");if(null!=i){"number"===typeof i&&(i=o[i]);for(var a=0;a<e.length;a++)if(!e[a].isSelected(i))return!1}return!0}))}))}function lc(t){var e={};t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each((function(i){var o=n.getName(i);r["ec-"+o]=i;var a=n.getItemModel(i),s=a.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(o,e)),n.setItemVisual(i,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],c=0;c<l.length;c++){var u=a.getShallow(l[c],!0);null!=u&&n.setItemVisual(i,l[c],u)}})),n.count()&&i.each((function(t){var e=i.getItemModel(t),o=e.getShallow("category");if(null!=o){"string"===typeof o&&(o=r["ec-"+o]);var a=n.getItemVisual(o,"style"),s=i.ensureUniqueItemVisual(t,"style");Object(c["m"])(s,a);for(var l=["symbol","symbolSize","symbolKeepAspect"],u=0;u<l.length;u++)i.setItemVisual(t,l[u],n.getItemVisual(o,l[u]))}}))}))}function cc(t){return t instanceof Array||(t=[t,t]),t}function uc(t){t.eachSeriesByType("graph",(function(t){var e=t.getGraph(),n=t.getEdgeData(),i=cc(t.get("edgeSymbol")),r=cc(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each((function(t){var i=n.getItemModel(t),r=e.getEdgeByIndex(t),o=cc(i.getShallow("symbol",!0)),a=cc(i.getShallow("symbolSize",!0)),s=i.getModel("lineStyle").getLineStyle(),l=n.ensureUniqueItemVisual(t,"style");switch(Object(c["m"])(l,s),l.stroke){case"source":var u=r.node1.getVisual("style");l.stroke=u&&u.fill;break;case"target":u=r.node2.getVisual("style");l.stroke=u&&u.fill;break}o[0]&&r.setVisual("fromSymbol",o[0]),o[1]&&r.setVisual("toSymbol",o[1]),a[0]&&r.setVisual("fromSymbolSize",a[0]),a[1]&&r.setVisual("toSymbolSize",a[1])}))}))}var hc="--\x3e",fc=function(t){return t.get("autoCurveness")||null},dc=function(t,e){var n=fc(t),i=20,r=[];if("number"===typeof n)i=n;else if(c["t"](n))return void(t.__curvenessList=n);e>i&&(i=e);var o=i%2?i+2:i+3;r=[];for(var a=0;a<o;a++)r.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=r},pc=function(t,e,n){var i=[t.id,t.dataIndex].join("."),r=[e.id,e.dataIndex].join(".");return[n.uid,i,r].join(hc)},gc=function(t){var e=t.split(hc);return[e[0],e[2],e[1]].join(hc)},mc=function(t,e){var n=pc(t.node1,t.node2,e);return e.__edgeMap[n]},vc=function(t,e){var n=yc(pc(t.node1,t.node2,e),e),i=yc(pc(t.node2,t.node1,e),e);return n+i},yc=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function _c(t){fc(t)&&(t.__curvenessList=[],t.__edgeMap={},dc(t))}function bc(t,e,n,i){if(fc(n)){var r=pc(t,e,n),o=n.__edgeMap,a=o[gc(r)];o[r]&&!a?o[r].isForward=!0:a&&o[r]&&(a.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(i)}}function xc(t,e,n,i){var r=fc(e),o=c["t"](r);if(!r)return null;var a=mc(t,e);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var u=vc(t,e);dc(e,u),t.lineStyle=t.lineStyle||{};var h=pc(t.node1,t.node2,e),f=e.__curvenessList,d=o||u%2?0:1;if(a.isForward)return f[d+s];var p=gc(h),g=yc(p,e),m=f[s+g+d];return i?o?r&&0===r[0]?(g+d)%2?m:-m:((g%2?0:1)+d)%2?m:-m:(g+d)%2?m:-m:f[s+g+d]}function wc(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode((function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])})),Sc(n,t)}}function Sc(t,e){t.eachEdge((function(t,n){var i=c["Q"](t.getModel().get(["lineStyle","curveness"]),-xc(t,e,n,!0),0),r=Zi["c"](t.node1.getLayout()),o=Zi["c"](t.node2.getLayout()),a=[r,o];+i&&a.push([(r[0]+o[0])/2-(r[1]-o[1])*i,(r[1]+o[1])/2-(o[0]-r[0])*i]),t.setLayout(a)}))}function Tc(t,e){t.eachSeriesByType("graph",(function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];Object(c["k"])(n.dimensions,(function(t){r=r.concat(i.mapDimensionsAll(t))}));for(var o=0;o<i.count();o++){for(var a=[],s=!1,l=0;l<r.length;l++){var u=i.get(r[l],o);isNaN(u)||(s=!0),a.push(u)}s?i.setItemLayout(o,n.dataToPoint(a)):i.setItemLayout(o,[NaN,NaN])}Sc(i.graph,t)}else e&&"none"!==e||wc(t)}))}function Oc(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scaleX,r=e.getZoom(),o=(r-1)*n+1;return o/i}function Cc(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var Mc=Math.PI,Ac=[];function Dc(t,e){var n=t.coordinateSystem;if(!n||"view"===n.type){var i=n.getBoundingRect(),r=t.getData(),o=r.graph,a=i.width/2+i.x,s=i.height/2+i.y,l=Math.min(i.width,i.height)/2,u=r.count();r.setLayout({cx:a,cy:s}),u&&(Ec[e](t,o,r,l,a,s,u),o.eachEdge((function(e,n){var i,r=c["Q"](e.getModel().get(["lineStyle","curveness"]),xc(e,t,n),0),o=Zi["c"](e.node1.getLayout()),l=Zi["c"](e.node2.getLayout()),u=(o[0]+l[0])/2,h=(o[1]+l[1])/2;+r&&(r*=3,i=[a*r+u*(1-r),s*r+h*(1-r)]),e.setLayout([o,l,i])})))}}var Ec={value:function(t,e,n,i,r,o,a){var s=0,l=n.getSum("value"),c=2*Math.PI/(l||a);e.eachNode((function(t){var e=t.getValue("value"),n=c*(l?e:1)/2;s+=n,t.setLayout([i*Math.cos(s)+r,i*Math.sin(s)+o]),s+=n}))},symbolSize:function(t,e,n,i,r,o,a){var s=0;Ac.length=a;var l=Oc(t);e.eachNode((function(t){var e=Cc(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=l;var n=Math.asin(e/2/i);isNaN(n)&&(n=Mc/2),Ac[t.dataIndex]=n,s+=2*n}));var c=(2*Mc-s)/a/2,u=0;e.eachNode((function(t){var e=c+Ac[t.dataIndex];u+=e,t.setLayout([i*Math.cos(u)+r,i*Math.sin(u)+o]),u+=e}))}};function Ic(t){t.eachSeriesByType("graph",(function(t){"circular"===t.get("layout")&&Dc(t,"symbolSize")}))}var Pc=Zi["o"];function Lc(t,e,n){for(var i=t,r=e,o=n.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],c=null==n.gravity?.1:n.gravity,u=0;u<i.length;u++){var h=i[u];h.p||(h.p=Zi["e"](a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=Zi["c"](h.p),h.edges=null}var f,d,p=null==n.friction?.6:n.friction,g=p;return{warmUp:function(){g=.8*p},setFixed:function(t){i[t].fixed=!0},setUnfixed:function(t){i[t].fixed=!1},beforeStep:function(t){f=t},afterStep:function(t){d=t},step:function(t){f&&f(i,r);for(var e=[],n=i.length,o=0;o<r.length;o++){var a=r[o];if(!a.ignoreForceLayout){var s=a.n1,u=a.n2;Zi["q"](e,u.p,s.p);var h=Zi["i"](e)-a.d,p=u.w/(s.w+u.w);isNaN(p)&&(p=0),Zi["m"](e,e),!s.fixed&&Pc(s.p,s.p,e,p*h*g),!u.fixed&&Pc(u.p,u.p,e,-(1-p)*h*g)}}for(o=0;o<n;o++){var m=i[o];m.fixed||(Zi["q"](e,l,m.p),Pc(m.p,m.p,e,c*g))}for(o=0;o<n;o++){s=i[o];for(var v=o+1;v<n;v++){u=i[v];Zi["q"](e,u.p,s.p);h=Zi["i"](e);0===h&&(Zi["p"](e,Math.random()-.5,Math.random()-.5),h=1);var y=(s.rep+u.rep)/h/h;!s.fixed&&Pc(s.pp,s.pp,e,y),!u.fixed&&Pc(u.pp,u.pp,e,-y)}}var _=[];for(o=0;o<n;o++){m=i[o];m.fixed||(Zi["q"](_,m.p,m.pp),Pc(m.p,m.p,_,g),Zi["d"](m.pp,m.p))}g*=.992;var b=g<.01;d&&d(i,r,b),t&&t(b)}}}function kc(t){t.eachSeriesByType("graph",(function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),r=i.data,o=i.edgeData,a=t.getModel("force"),s=a.get("initLayout");t.preservedPoints?r.each((function(t){var e=r.getId(t);r.setItemLayout(t,n[e]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&Dc(t,"value"):wc(t);var l=r.getDataExtent("value"),u=o.getDataExtent("value"),h=a.get("repulsion"),f=a.get("edgeLength"),d=c["t"](h)?h:[h,h],p=c["t"](f)?f:[f,f];p=[p[1],p[0]];var g=r.mapArray("value",(function(t,e){var n=r.getItemLayout(e),i=Object(xe["l"])(t,l,d);return isNaN(i)&&(i=(d[0]+d[1])/2),{w:i,rep:i,fixed:r.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),m=o.mapArray("value",(function(e,n){var r=i.getEdgeByIndex(n),o=Object(xe["l"])(e,u,p);isNaN(o)&&(o=(p[0]+p[1])/2);var a=r.getModel(),s=c["Q"](r.getModel().get(["lineStyle","curveness"]),-xc(r,t,n,!0),0);return{n1:g[r.node1.dataIndex],n2:g[r.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}})),v=e.getBoundingRect(),y=Lc(g,m,{rect:v,gravity:a.get("gravity"),friction:a.get("friction")});y.beforeStep((function(t,e){for(var n=0,r=t.length;n<r;n++)t[n].fixed&&Zi["d"](t[n].p,i.getNodeByIndex(n).getLayout())})),y.afterStep((function(t,e,o){for(var a=0,s=t.length;a<s;a++)t[a].fixed||i.getNodeByIndex(a).setLayout(t[a].p),n[r.getId(a)]=t[a].p;for(a=0,s=e.length;a<s;a++){var l=e[a],c=i.getEdgeByIndex(a),u=l.n1.p,h=l.n2.p,f=c.getLayout();f=f?f.slice():[],f[0]=f[0]||[],f[1]=f[1]||[],Zi["d"](f[0],u),Zi["d"](f[1],h),+l.curveness&&(f[2]=[(u[0]+h[0])/2-(u[1]-h[1])*l.curveness,(u[1]+h[1])/2-(h[0]-u[0])*l.curveness]),c.setLayout(f)}})),t.forceLayout=y,t.preservedPoints=n,y.step()}else t.forceLayout=null}))}function jc(t,e,n){var i=Object(c["m"])(t.getBoxLayoutParams(),{aspect:n});return Object(Gn["g"])(i,{width:e.getWidth(),height:e.getHeight()})}function Rc(t,e){var n=[];return t.eachSeriesByType("graph",(function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var r=t.getData(),o=r.mapArray((function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]})),a=[],s=[];Qa["d"](o,a,s),s[0]-a[0]===0&&(s[0]+=1,a[0]-=1),s[1]-a[1]===0&&(s[1]+=1,a[1]-=1);var l=(s[0]-a[0])/(s[1]-a[1]),c=jc(t,e,l);isNaN(l)&&(a=[c.x,c.y],s=[c.x+c.width,c.y+c.height]);var u=s[0]-a[0],h=s[1]-a[1],f=c.width,d=c.height,p=t.coordinateSystem=new ba;p.zoomLimit=t.get("scaleLimit"),p.setBoundingRect(a[0],a[1],u,h),p.setViewRect(c.x,c.y,f,d),p.setCenter(t.get("center")),p.setZoom(t.get("zoom")),n.push(p)}})),n}var Nc=dr["a"].prototype,Bc=Fa["a"].prototype,Fc=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}();(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}Object(At["b"])(e,t)})(Fc);function zc(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}var Vc=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return Object(At["b"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Fc},e.prototype.buildPath=function(t,e){zc(e)?Nc.buildPath.call(this,t,e):Bc.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return zc(this.shape)?Nc.pointAt.call(this,t):Bc.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,n=zc(e)?[e.x2-e.x1,e.y2-e.y1]:Bc.tangentAt.call(this,t);return Zi["m"](n,n)},e}(u["b"]),Hc=Vc,Gc=["fromSymbol","toSymbol"];function Uc(t){return"_"+t+"Type"}function Wc(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var r=e.getItemVisual(n,t+"Size"),o=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=It["c"](r),c=It["b"](a||0,l),u=It["a"](i,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=null==o||isNaN(o)?void 0:+o*Math.PI/180||0,u.name=t,u}}function Xc(t){var e=new Hc({name:"line",subPixelOptimize:!0});return Yc(e.shape,t),e}function Yc(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var qc=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createLine(e,n,i),r}return Object(At["b"])(e,t),e.prototype._createLine=function(t,e,n){var i=t.hostModel,r=t.getItemLayout(e),o=Xc(r);o.shape.percent=0,jt["c"](o,{shape:{percent:1}},i,e),this.add(o),Object(c["k"])(Gc,(function(n){var i=Wc(n,t,e);this.add(i),this[Uc(n)]=t.getItemVisual(e,n)}),this),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),o=t.getItemLayout(e),a={shape:{}};Yc(a.shape,o),jt["h"](r,a,i,e),Object(c["k"])(Gc,(function(n){var i=t.getItemVisual(e,n),r=Uc(n);if(this[r]!==i){this.remove(this.childOfName(n));var o=Wc(n,t,e);this.add(o)}this[r]=i}),this),this._updateCommonStl(t,e,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),o=n&&n.emphasisLineStyle,a=n&&n.blurLineStyle,s=n&&n.selectLineStyle,l=n&&n.labelStatesModels;if(!n||t.hasItemOption){var u=t.getItemModel(e);o=u.getModel(["emphasis","lineStyle"]).getLineStyle(),a=u.getModel(["blur","lineStyle"]).getLineStyle(),s=u.getModel(["select","lineStyle"]).getLineStyle(),l=Object(Vt["e"])(u)}var h=t.getItemVisual(e,"style"),f=h.stroke;r.useStyle(h),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=o,r.ensureState("blur").style=a,r.ensureState("select").style=s,Object(c["k"])(Gc,(function(t){var e=this.childOfName(t);if(e){e.setColor(f),e.style.opacity=h.opacity;for(var n=0;n<Nt["g"].length;n++){var i=Nt["g"][n],o=r.getState(i);if(o){var a=o.style||{},s=e.ensureState(i),l=s.style||(s.style={});null!=a.stroke&&(l[e.__isEmptyBrush?"stroke":"fill"]=a.stroke),null!=a.opacity&&(l.opacity=a.opacity)}}e.markRedraw()}}),this);var d=i.getRawValue(e);Object(Vt["g"])(this,l,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,n){return i.getFormattedLabel(e,n,t.dataType)}},inheritColor:f||"#000",defaultOpacity:h.opacity,defaultText:(null==d?t.getName(e):isFinite(d)?Object(xe["v"])(d):d)+""});var p=this.getTextContent();if(p){var g=l.normal;p.__align=p.style.align,p.__verticalAlign=p.style.verticalAlign,p.__position=g.get("position")||"middle";var m=g.get("distance");Object(c["t"])(m)||(m=[m,m]),p.__labelDistance=m}this.setTextConfig({position:null,local:!0,inside:!1}),Object(Nt["o"])(this)},e.prototype.highlight=function(){Object(Nt["r"])(this)},e.prototype.downplay=function(){Object(Nt["C"])(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");Yc(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(e||n||i&&!i.ignore){var r=1,o=this.parent;while(o)o.scaleX&&(r/=o.scaleX),o=o.parent;var a=t.childOfName("line");if(this.__dirty||a.__dirty){var s=a.shape.percent,l=a.pointAt(0),c=a.pointAt(s),u=Zi["q"]([],c,l);if(Zi["m"](u,u),e&&(e.setPosition(l),S(e,0),e.scaleX=e.scaleY=r*s,e.markRedraw()),n&&(n.setPosition(c),S(n,1),n.scaleX=n.scaleY=r*s,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var h=void 0,f=void 0,d=i.__labelDistance,p=d[0]*r,g=d[1]*r,m=s/2,v=a.tangentAt(m),y=[v[1],-v[0]],_=a.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var b=v[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var x=-Math.atan2(v[1],v[0]);c[0]<l[0]&&(x=Math.PI+x),i.rotation=x}var w=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-g,f="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=g,f="top";break;default:w=0,f="middle"}switch(i.__position){case"end":i.x=u[0]*p+c[0],i.y=u[1]*g+c[1],h=u[0]>.8?"left":u[0]<-.8?"right":"center",f=u[1]>.8?"top":u[1]<-.8?"bottom":"middle";break;case"start":i.x=-u[0]*p+l[0],i.y=-u[1]*g+l[1],h=u[0]>.8?"right":u[0]<-.8?"left":"center",f=u[1]>.8?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=p*b+l[0],i.y=l[1]+w,h=v[0]<0?"right":"left",i.originX=-p*b,i.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=_[0],i.y=_[1]+w,h="center",i.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-p*b+c[0],i.y=c[1]+w,h=v[0]>=0?"right":"left",i.originX=p*b,i.originY=-w;break}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||f,align:i.__align||h})}}}function S(t,e){var n=t.__specifiedRotation;if(null==n){var i=a.tangentAt(e);t.attr("rotation",(1===e?-1:1)*Math.PI/2-Math.atan2(i[1],i[0]))}else t.attr("rotation",n)}},e}(Pt["a"]),Zc=qc,Kc=function(){function t(t){this.group=new Pt["a"],this._LineCtor=t||Zc}return t.prototype.isPersistent=function(){return!0},t.prototype.updateData=function(t){var e=this,n=this,i=n.group,r=n._lineData;n._lineData=t,r||i.removeAll();var o=Jc(t);t.diff(r).add((function(n){e._doAdd(t,n,o)})).update((function(n,i){e._doUpdate(r,t,i,n,o)})).remove((function(t){i.remove(r.getItemGraphicEl(t))})).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl((function(e,n){e.updateLayout(t,n)}),this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Jc(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function n(t){t.isGroup||$c(t)||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var r=e.getItemLayout(i);if(tu(r)){var o=new this._LineCtor(e,i,this._seriesScope);o.traverse(n),this.group.add(o),e.setItemGraphicEl(i,o)}}},t.prototype.remove=function(){this.group.removeAll()},t.prototype._doAdd=function(t,e,n){var i=t.getItemLayout(e);if(tu(i)){var r=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,r),this.group.add(r)}},t.prototype._doUpdate=function(t,e,n,i,r){var o=t.getItemGraphicEl(n);tu(e.getItemLayout(i))?(o?o.updateData(e,i,r):o=new this._LineCtor(e,i,r),e.setItemGraphicEl(i,o),this.group.add(o)):this.group.remove(o)},t}();function $c(t){return t.animators&&t.animators.length>0}function Jc(t){var e=t.hostModel;return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["emphasis","lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),labelStatesModels:Object(Vt["e"])(e)}}function Qc(t){return isNaN(t[0])||isNaN(t[1])}function tu(t){return!Qc(t[0])&&!Qc(t[1])}var eu=Kc,nu=[],iu=[],ru=[],ou=ce["h"],au=Zi["g"],su=Math.abs;function lu(t,e,n){for(var i,r=t[0],o=t[1],a=t[2],s=1/0,l=n*n,c=.1,u=.1;u<=.9;u+=.1){nu[0]=ou(r[0],o[0],a[0],u),nu[1]=ou(r[1],o[1],a[1],u);var h=su(au(nu,e)-l);h<s&&(s=h,i=u)}for(var f=0;f<32;f++){var d=i+c;iu[0]=ou(r[0],o[0],a[0],i),iu[1]=ou(r[1],o[1],a[1],i),ru[0]=ou(r[0],o[0],a[0],d),ru[1]=ou(r[1],o[1],a[1],d);h=au(iu,e)-l;if(su(h)<.01)break;var p=au(ru,e)-l;c/=2,h<0?p>=0?i+=c:i-=c:p>=0?i-=c:i+=c}return i}function cu(t,e){var n=[],i=ce["n"],r=[[],[],[]],o=[[],[]],a=[];e/=2,t.eachEdge((function(t,s){var l=t.getLayout(),c=t.getVisual("fromSymbol"),u=t.getVisual("toSymbol");l.__original||(l.__original=[Zi["c"](l[0]),Zi["c"](l[1])],l[2]&&l.__original.push(Zi["c"](l[2])));var h=l.__original;if(null!=l[2]){if(Zi["d"](r[0],h[0]),Zi["d"](r[1],h[2]),Zi["d"](r[2],h[1]),c&&"none"!==c){var f=Cc(t.node1),d=lu(r,h[0],f*e);i(r[0][0],r[1][0],r[2][0],d,n),r[0][0]=n[3],r[1][0]=n[4],i(r[0][1],r[1][1],r[2][1],d,n),r[0][1]=n[3],r[1][1]=n[4]}if(u&&"none"!==u){f=Cc(t.node2),d=lu(r,h[1],f*e);i(r[0][0],r[1][0],r[2][0],d,n),r[1][0]=n[1],r[2][0]=n[2],i(r[0][1],r[1][1],r[2][1],d,n),r[1][1]=n[1],r[2][1]=n[2]}Zi["d"](l[0],r[0]),Zi["d"](l[1],r[2]),Zi["d"](l[2],r[1])}else{if(Zi["d"](o[0],h[0]),Zi["d"](o[1],h[1]),Zi["q"](a,o[1],o[0]),Zi["m"](a,a),c&&"none"!==c){f=Cc(t.node1);Zi["o"](o[0],o[0],a,f*e)}if(u&&"none"!==u){f=Cc(t.node2);Zi["o"](o[1],o[1],a,-f*e)}Zi["d"](l[0],o[0]),Zi["d"](l[1],o[1])}}))}function uu(t){return"view"===t.type}var hu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){var n=new Zt,i=new eu,r=this.group;this._controller=new Vo(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(t,e,n){var i=this,r=t.coordinateSystem;this._model=t;var o=this._symbolDraw,a=this._lineDraw,s=this.group;if(uu(r)){var l={x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY};this._firstRender?s.attr(l):jt["h"](s,l,t)}cu(t.getGraph(),Oc(t));var u=t.getData();o.updateData(u);var h=t.getEdgeData();a.updateData(h),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var f=t.forceLayout,d=t.get(["force","layoutAnimation"]);f&&this._startForceLayoutIteration(f,d),u.graph.eachNode((function(t){var e=t.dataIndex,n=t.getGraphicEl(),r=t.getModel();n.off("drag").off("dragend");var o=r.get("draggable");o&&n.on("drag",(function(){f&&(f.warmUp(),!i._layouting&&i._startForceLayoutIteration(f,d),f.setFixed(e),u.setItemLayout(e,[n.x,n.y]))})).on("dragend",(function(){f&&f.setUnfixed(e)})),n.setDraggable(o&&!!f);var a=r.get(["emphasis","focus"]);"adjacency"===a&&(Object(Rt["a"])(n).focus=t.getAdjacentDataIndices())})),u.graph.eachEdge((function(t){var e=t.getGraphicEl(),n=t.getModel().get(["emphasis","focus"]);"adjacency"===n&&(Object(Rt["a"])(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})}));var p="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),g=u.getLayout("cx"),m=u.getLayout("cy");u.eachItemGraphicEl((function(t,e){var n=u.getItemModel(e),i=n.get(["label","rotate"])||0,r=t.getSymbolPath();if(p){var o=u.getItemLayout(e),a=Math.atan2(o[1]-m,o[0]-g);a<0&&(a=2*Math.PI+a);var s=o[0]<g;s&&(a-=Math.PI);var l=s?"left":"right";r.setTextConfig({rotation:-a,position:l,origin:"center"});var h=r.ensureState("emphasis");c["m"](h.textConfig||(h.textConfig={}),{position:l})}else r.setTextConfig({rotation:i*=Math.PI/180})})),this._firstRender=!1},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e){var n=this;(function i(){t.step((function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())}))})()},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,o=this._controllerHost,a=this.group;r.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!Wo(e,n,t)})),uu(t.coordinateSystem)?(r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){Ho(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){Go(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(),cu(t.getGraph(),Oc(t)),i._lineDraw.updateLayout(),n.updateLabelLayout()}))):r.disable()},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),n=Oc(t);e.eachItemGraphicEl((function(t,e){t.setSymbolScale(n)}))},e.prototype.updateLayout=function(t){cu(t.getGraph(),Oc(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(ye["a"]),fu=hu,du=n("7368"),pu=n("1f39");function gu(t,e,n,i,r){for(var o=new du["a"](i),a=0;a<t.length;a++)o.addNode(c["O"](t[a].id,t[a].name,a),a);var s=[],l=[],u=0;for(a=0;a<e.length;a++){var h=e[a],f=h.source,d=h.target;o.addEdge(f,d,u)&&(l.push(h),s.push(c["O"](Object(se["e"])(h.id,null),f+" > "+d)),u++)}var p,g=n.get("coordinateSystem");if("cartesian2d"===g||"polar"===g)p=Object(Dt["a"])(t,n);else{var m=pu["a"].get(g),v=m&&m.dimensions||[];c["r"](v,"value")<0&&v.concat(["value"]);var y=Object(ci["b"])(t,{coordDimensions:v,encodeDefine:n.getEncode()}).dimensions;p=new ui["a"](y,n),p.initData(t)}var _=new ui["a"](["value"],n);return _.initData(l,s),r&&r(p,_),Object(hs["a"])({mainData:p,struct:o,structAttr:"graph",datas:{node:p,edge:_},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}var mu=n("f6d8"),vu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(At["b"])(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new pi(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),Object(se["f"])(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],r=this;if(i&&n){_c(this);var o=gu(i,n,this,!0,a);return c["k"](o.edges,(function(t){bc(t.node1,t.node2,this,t.dataIndex)}),this),o.data}function a(t,e){t.wrapMethod("getItemModel",(function(t){var e=r._categoriesModels,n=t.getShallow("category"),i=e[n];return i&&(i.parentModel=t.parentModel,t.parentModel=i),t}));var n=pr["a"].prototype.getModel;function i(t,e){var i=n.call(this,t,e);return i.resolveParentPath=o,i}function o(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",(function(t){return t.resolveParentPath=o,t.getModel=i,t}))}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,n){if("edge"===n){var i=this.getData(),r=this.getDataParams(t,n),o=i.graph.getEdgeByIndex(t),a=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),Object(lo["c"])("nameValue",{name:l.join(" > "),value:r.value,noValue:null==r.value})}var c=Object(mu["a"])({series:this,dataIndex:t,multipleSeries:e});return c},e.prototype._updateCategoriesData=function(){var t=c["H"](this.option.categories||[],(function(t){return null!=t.value?t:c["m"]({value:0},t)})),e=new ui["a"](["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray((function(t){return e.getItemModel(t)}))},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Et["b"]),yu=vu,_u={type:"graphRoam",event:"graphRoam",update:"none"};function bu(t){t.registerChartView(fu),t.registerSeriesModel(yu),t.registerProcessor(sc),t.registerVisual(lc),t.registerVisual(uc),t.registerLayout(Tc),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,Ic),t.registerLayout(kc),t.registerCoordinateSystem("graphView",{dimensions:ba.dimensions,create:Rc}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},(function(){})),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},(function(){})),t.registerAction(_u,(function(t,e){e.eachComponent({mainType:"series",query:t},(function(e){var n=e.coordinateSystem,i=La(n,t);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))}var xu=function(){function t(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0}return t}(),wu=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointer",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new xu},e.prototype.buildPath=function(t,e){var n=Math.cos,i=Math.sin,r=e.r,o=e.width,a=e.angle,s=e.x-n(a)*o*(o>=r/3?1:2),l=e.y-i(a)*o*(o>=r/3?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(a)*o,e.y+i(a)*o),t.lineTo(e.x+n(e.angle)*r,e.y+i(e.angle)*r),t.lineTo(e.x-n(a)*o,e.y-i(a)*o),t.lineTo(s,l)},e}(u["b"]),Su=wu;function Tu(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),o=Math.min(i,r),a=Object(xe["p"])(n[0],e.getWidth()),s=Object(xe["p"])(n[1],e.getHeight()),l=Object(xe["p"])(t.get("radius"),o/2);return{cx:a,cy:s,r:l}}function Ou(t,e){var n=null==t?"":t+"";return e&&("string"===typeof e?n=e.replace("{value}",n):"function"===typeof e&&(n=e(t))),n}var Cu=2*Math.PI,Mu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),r=Tu(t,n);this._renderMain(t,e,n,i,r),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,e,n,i,r){for(var o=this.group,a=t.get("clockwise"),s=-t.get("startAngle")/180*Math.PI,l=-t.get("endAngle")/180*Math.PI,c=t.getModel("axisLine"),u=c.get("roundCap"),h=u?ln:be["a"],f=c.get("show"),d=c.getModel("lineStyle"),p=d.get("width"),g=(l-s)%Cu||l===s?(l-s)%Cu:Cu,m=s,v=0;f&&v<i.length;v++){var y=Math.min(Math.max(i[v][0],0),1);l=s+g*y;var _=new h({shape:{startAngle:m,endAngle:l,cx:r.cx,cy:r.cy,clockwise:a,r0:r.r-p,r:r.r},silent:!0});_.setStyle({fill:i[v][1]}),_.setStyle(d.getLineStyle(["color","width"])),o.add(_),m=l}var b=function(t){if(t<=0)return i[0][1];var e;for(e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]};if(!a){var x=s;s=l,l=x}this._renderTicks(t,e,n,b,r,s,l,a,p),this._renderTitleAndDetail(t,e,n,b,r),this._renderAnchor(t,r),this._renderPointer(t,e,n,b,r,s,l,a,p)},e.prototype._renderTicks=function(t,e,n,i,r,o,a,s,l){for(var c,u,h=this.group,f=r.cx,d=r.cy,p=r.r,g=+t.get("min"),m=+t.get("max"),v=t.getModel("splitLine"),y=t.getModel("axisTick"),_=t.getModel("axisLabel"),b=t.get("splitNumber"),x=y.get("splitNumber"),w=Object(xe["p"])(v.get("length"),p),S=Object(xe["p"])(y.get("length"),p),T=o,O=(a-o)/b,C=O/x,M=v.getModel("lineStyle").getLineStyle(),A=y.getModel("lineStyle").getLineStyle(),D=v.get("distance"),E=0;E<=b;E++){if(c=Math.cos(T),u=Math.sin(T),v.get("show")){var I=D?D+l:l,P=new dr["a"]({shape:{x1:c*(p-I)+f,y1:u*(p-I)+d,x2:c*(p-w-I)+f,y2:u*(p-w-I)+d},style:M,silent:!0});"auto"===M.stroke&&P.setStyle({stroke:i(E/b)}),h.add(P)}if(_.get("show")){I=_.get("distance")+D;var L=Ou(Object(xe["v"])(E/b*(m-g)+g),_.get("formatter")),k=i(E/b);h.add(new ae["a"]({style:Object(Vt["c"])(_,{text:L,x:c*(p-w-I)+f,y:u*(p-w-I)+d,verticalAlign:u<-.8?"top":u>.8?"bottom":"middle",align:c<-.4?"left":c>.4?"right":"center"},{inheritColor:k}),silent:!0}))}if(y.get("show")&&E!==b){I=y.get("distance");I=I?I+l:l;for(var j=0;j<=x;j++){c=Math.cos(T),u=Math.sin(T);var R=new dr["a"]({shape:{x1:c*(p-I)+f,y1:u*(p-I)+d,x2:c*(p-S-I)+f,y2:u*(p-S-I)+d},silent:!0,style:A});"auto"===A.stroke&&R.setStyle({stroke:i((E+j/x)/b)}),h.add(R),T+=C}T-=C}else T+=O}},e.prototype._renderPointer=function(t,e,n,i,r,o,a,s,l){var u=this.group,f=this._data,d=this._progressEls,p=[],g=t.get(["pointer","show"]),m=t.getModel("progress"),v=m.get("show"),y=t.getData(),_=y.mapDimension("value"),b=+t.get("min"),x=+t.get("max"),w=[b,x],S=[o,a];function T(e,n){var i,o=y.getItemModel(e),a=o.getModel("pointer"),s=Object(xe["p"])(a.get("width"),r.r),l=Object(xe["p"])(a.get("length"),r.r),c=t.get(["pointer","icon"]),u=a.get("offsetCenter"),h=Object(xe["p"])(u[0],r.r),f=Object(xe["p"])(u[1],r.r),d=a.get("keepAspect");return i=c?Object(It["a"])(c,h-s/2,f-l,s,l,null,d):new Su({shape:{angle:-Math.PI/2,width:s,r:l,x:h,y:f}}),i.rotation=-(n+Math.PI/2),i.x=r.cx,i.y=r.cy,i}function O(t,e){var n=m.get("roundCap"),i=n?ln:be["a"],a=m.get("overlap"),c=a?m.get("width"):l/y.count(),u=a?r.r-c:r.r-(t+1)*c,h=a?r.r:r.r-t*c,f=new i({shape:{startAngle:o,endAngle:e,cx:r.cx,cy:r.cy,clockwise:s,r0:u,r:h}});return a&&(f.z2=x-y.get(_,t)%x),f}(v||g)&&(y.diff(f).add((function(e){if(g){var n=T(e,o);jt["c"](n,{rotation:-(Object(xe["l"])(y.get(_,e),w,S,!0)+Math.PI/2)},t),u.add(n),y.setItemGraphicEl(e,n)}if(v){var i=O(e,o),r=m.get("clip");jt["c"](i,{shape:{endAngle:Object(xe["l"])(y.get(_,e),w,S,r)}},t),u.add(i),Object(Rt["b"])(t.seriesIndex,y.dataType,e,i),p[e]=i}})).update((function(e,n){if(g){var i=f.getItemGraphicEl(n),r=i?i.rotation:o,a=T(e,r);a.rotation=r,jt["h"](a,{rotation:-(Object(xe["l"])(y.get(_,e),w,S,!0)+Math.PI/2)},t),u.add(a),y.setItemGraphicEl(e,a)}if(v){var s=d[n],l=s?s.shape.endAngle:o,c=O(e,l),h=m.get("clip");jt["h"](c,{shape:{endAngle:Object(xe["l"])(y.get(_,e),w,S,h)}},t),u.add(c),Object(Rt["b"])(t.seriesIndex,y.dataType,e,c),p[e]=c}})).execute(),y.each((function(t){var e=y.getItemModel(t),n=e.getModel("emphasis");if(g){var r=y.getItemGraphicEl(t),o=y.getItemVisual(t,"style"),a=o.fill;if(r instanceof h["a"]){var s=r.style;r.useStyle(Object(c["m"])({image:s.image,x:s.x,y:s.y,width:s.width,height:s.height},o))}else r.useStyle(o),"pointer"!==r.type&&r.setColor(a);r.setStyle(e.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===r.style.fill&&r.setStyle("fill",i(Object(xe["l"])(y.get(_,t),w,[0,1],!0))),r.z2EmphasisLift=0,Object(Nt["I"])(r,e),Object(Nt["o"])(r,n.get("focus"),n.get("blurScope"))}if(v){var l=p[t];l.useStyle(y.getItemVisual(t,"style")),l.setStyle(e.getModel(["progress","itemStyle"]).getItemStyle()),l.z2EmphasisLift=0,Object(Nt["I"])(l,e),Object(Nt["o"])(l,n.get("focus"),n.get("blurScope"))}})),this._progressEls=p)},e.prototype._renderAnchor=function(t,e){var n=t.getModel("anchor"),i=n.get("show");if(i){var r=n.get("size"),o=n.get("icon"),a=n.get("offsetCenter"),s=n.get("keepAspect"),l=Object(It["a"])(o,e.cx-r/2+Object(xe["p"])(a[0],e.r),e.cy-r/2+Object(xe["p"])(a[1],e.r),r,r,null,s);l.z2=n.get("showAbove")?1:0,l.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(l)}},e.prototype._renderTitleAndDetail=function(t,e,n,i,r){var o=this,a=t.getData(),s=a.mapDimension("value"),l=+t.get("min"),c=+t.get("max"),u=new Pt["a"],h=[],f=[],d=t.isAnimationEnabled(),p=t.get(["pointer","showAbove"]);a.diff(this._data).add((function(t){h[t]=new ae["a"]({silent:!0}),f[t]=new ae["a"]({silent:!0})})).update((function(t,e){h[t]=o._titleEls[e],f[t]=o._detailEls[e]})).execute(),a.each((function(e){var n=a.getItemModel(e),o=a.get(s,e),g=new Pt["a"],m=i(Object(xe["l"])(o,[l,c],[0,1],!0)),v=n.getModel("title");if(v.get("show")){var y=v.get("offsetCenter"),_=r.cx+Object(xe["p"])(y[0],r.r),b=r.cy+Object(xe["p"])(y[1],r.r),x=h[e];x.attr({z2:p?0:2,style:Object(Vt["c"])(v,{x:_,y:b,text:a.getName(e),align:"center",verticalAlign:"middle"},{inheritColor:m})}),g.add(x)}var w=n.getModel("detail");if(w.get("show")){var S=w.get("offsetCenter"),T=r.cx+Object(xe["p"])(S[0],r.r),O=r.cy+Object(xe["p"])(S[1],r.r),C=Object(xe["p"])(w.get("width"),r.r),M=Object(xe["p"])(w.get("height"),r.r),A=t.get(["progress","show"])?a.getItemVisual(e,"style").fill:m,D=(x=f[e],w.get("formatter"));x.attr({z2:p?0:2,style:Object(Vt["c"])(w,{x:T,y:O,text:Ou(o,D),width:isNaN(C)?null:C,height:isNaN(M)?null:M,align:"center",verticalAlign:"middle"},{inheritColor:A})}),Object(Vt["h"])(x,{normal:w},o,(function(t){return Ou(t,D)})),d&&Object(Vt["a"])(x,e,a,t,{getFormattedLabel:function(t,e,n,i,r,a){return Ou(a?a.interpolatedValue:o,D)}}),g.add(x)}u.add(g)})),this.group.add(u),this._titleEls=h,this._detailEls=f},e.type="gauge",e}(ye["a"]),Au=Mu,Du=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return hi(this,["value"])},e.type="series.gauge",e.defaultOption={zlevel:0,z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(Et["b"]),Eu=Du;function Iu(t){t.registerChartView(Au),t.registerSeriesModel(Eu)}var Pu=["itemStyle","opacity"],Lu=function(t){function e(e,n){var i=t.call(this)||this,r=i,o=new Kn["a"],a=new ae["a"];return r.setTextContent(a),i.setTextGuideLine(o),i.updateData(e,n,!0),i}return Object(At["b"])(e,t),e.prototype.updateData=function(t,e,n){var i=this,r=t.hostModel,o=t.getItemModel(e),a=t.getItemLayout(e),s=o.getModel("emphasis"),l=o.get(Pu);l=null==l?1:l,n||Object(jt["g"])(i),i.useStyle(t.getItemVisual(e,"style")),i.style.lineJoin="round",n?(i.setShape({points:a.points}),i.style.opacity=0,jt["c"](i,{style:{opacity:l}},r,e)):jt["h"](i,{style:{opacity:l},shape:{points:a.points}},r,e),Object(Nt["I"])(i,o),this._updateLabel(t,e),Object(Nt["o"])(this,s.get("focus"),s.get("blurScope"))},e.prototype._updateLabel=function(t,e){var n=this,i=this.getTextGuideLine(),r=n.getTextContent(),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e),l=s.label,c=t.getItemVisual(e,"style"),u=c.fill;Object(Vt["g"])(r,Object(Vt["e"])(a),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:c.opacity,defaultText:t.getName(e)},{normal:{align:l.textAlign,verticalAlign:l.verticalAlign}}),n.setTextConfig({local:!0,inside:!!l.inside,insideStroke:u,outsideFill:u});var h=l.linePoints;i.setShape({points:h}),n.textGuideLineConfig={anchor:h?new $n["a"](h[0][0],h[0][1]):null},jt["h"](r,{style:{x:l.x,y:l.y}},o,e),r.attr({rotation:l.rotation,originX:l.x,originY:l.y,z2:10}),Object(Jn["d"])(n,Object(Jn["a"])(a),{stroke:u})},e}(oo["a"]),ku=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._data,o=this.group;i.diff(r).add((function(t){var e=new Lu(i,t);i.setItemGraphicEl(t,e),o.add(e)})).update((function(t,e){var n=r.getItemGraphicEl(e);n.updateData(i,t),o.add(n),i.setItemGraphicEl(t,n)})).remove((function(e){var n=r.getItemGraphicEl(e);jt["f"](n,t,e)})).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(ye["a"]),ju=ku,Ru=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new pi(c["c"](this.getData,this),c["c"](this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return hi(this,{coordDimensions:["value"],encodeDefaulter:c["i"](fi["d"],this)})},e.prototype._defaultLabelLine=function(t){Object(se["f"])(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var n=this.getData(),i=t.prototype.getDataParams.call(this,e),r=n.mapDimension("value"),o=n.getSum(r);return i.percent=o?+(n.get(r,e)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={zlevel:0,z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(Et["b"]),Nu=Ru;function Bu(t,e){return Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function Fu(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,(function(t){return t})),r=[],o="ascending"===e,a=0,s=t.count();a<s;a++)r[a]=a;return"function"===typeof e?r.sort(e):"none"!==e&&r.sort((function(t,e){return o?i[t]-i[e]:i[e]-i[t]})),r}function zu(t){var e=t.hostModel,n=e.get("orient");t.each((function(e){var i,r,o,a,s=t.getItemModel(e),l=s.getModel("label"),c=l.get("position"),u=s.getModel("labelLine"),h=t.getItemLayout(e),f=h.points,d="inner"===c||"inside"===c||"center"===c||"insideLeft"===c||"insideRight"===c;if(d)"insideLeft"===c?(r=(f[0][0]+f[3][0])/2+5,o=(f[0][1]+f[3][1])/2,i="left"):"insideRight"===c?(r=(f[1][0]+f[2][0])/2-5,o=(f[1][1]+f[2][1])/2,i="right"):(r=(f[0][0]+f[1][0]+f[2][0]+f[3][0])/4,o=(f[0][1]+f[1][1]+f[2][1]+f[3][1])/4,i="center"),a=[[r,o],[r,o]];else{var p=void 0,g=void 0,m=void 0,v=void 0,y=u.get("length");0,"left"===c?(p=(f[3][0]+f[0][0])/2,g=(f[3][1]+f[0][1])/2,m=p-y,r=m-5,i="right"):"right"===c?(p=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,m=p+y,r=m+5,i="left"):"top"===c?(p=(f[3][0]+f[0][0])/2,g=(f[3][1]+f[0][1])/2,v=g-y,o=v-5,i="center"):"bottom"===c?(p=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,v=g+y,o=v+5,i="center"):"rightTop"===c?(p="horizontal"===n?f[3][0]:f[1][0],g="horizontal"===n?f[3][1]:f[1][1],"horizontal"===n?(v=g-y,o=v-5,i="center"):(m=p+y,r=m+5,i="top")):"rightBottom"===c?(p=f[2][0],g=f[2][1],"horizontal"===n?(v=g+y,o=v+5,i="center"):(m=p+y,r=m+5,i="bottom")):"leftTop"===c?(p=f[0][0],g="horizontal"===n?f[0][1]:f[1][1],"horizontal"===n?(v=g-y,o=v-5,i="center"):(m=p-y,r=m-5,i="right")):"leftBottom"===c?(p="horizontal"===n?f[1][0]:f[3][0],g="horizontal"===n?f[1][1]:f[2][1],"horizontal"===n?(v=g+y,o=v+5,i="center"):(m=p-y,r=m-5,i="right")):(p=(f[1][0]+f[2][0])/2,g=(f[1][1]+f[2][1])/2,"horizontal"===n?(v=g+y,o=v+5,i="center"):(m=p+y,r=m+5,i="left")),"horizontal"===n?(m=p,r=m):(v=g,o=v),a=[[p,g],[m,v]]}h.label={linePoints:a,x:r,y:o,verticalAlign:"middle",textAlign:i,inside:d}}))}function Vu(t,e){t.eachSeriesByType("funnel",(function(t){var n=t.getData(),i=n.mapDimension("value"),r=t.get("sort"),o=Bu(t,e),a=t.get("orient"),s=o.width,l=o.height,c=Fu(n,r),u=o.x,h=o.y,f="horizontal"===a?[Object(xe["p"])(t.get("minSize"),l),Object(xe["p"])(t.get("maxSize"),l)]:[Object(xe["p"])(t.get("minSize"),s),Object(xe["p"])(t.get("maxSize"),s)],d=n.getDataExtent(i),p=t.get("min"),g=t.get("max");null==p&&(p=Math.min(d[0],0)),null==g&&(g=d[1]);var m=t.get("funnelAlign"),v=t.get("gap"),y="horizontal"===a?s:l,_=(y-v*(n.count()-1))/n.count(),b=function(t,e){if("horizontal"===a){var r=n.get(i,t)||0,o=Object(xe["l"])(r,[p,g],f,!0),c=void 0;switch(m){case"top":c=h;break;case"center":c=h+(l-o)/2;break;case"bottom":c=h+(l-o);break}return[[e,c],[e,c+o]]}var d,v=n.get(i,t)||0,y=Object(xe["l"])(v,[p,g],f,!0);switch(m){case"left":d=u;break;case"center":d=u+(s-y)/2;break;case"right":d=u+s-y;break}return[[d,e],[d+y,e]]};"ascending"===r&&(_=-_,v=-v,"horizontal"===a?u+=s:h+=l,c=c.reverse());for(var x=0;x<c.length;x++){var w=c[x],S=c[x+1],T=n.getItemModel(w);if("horizontal"===a){var O=T.get(["itemStyle","width"]);null==O?O=_:(O=Object(xe["p"])(O,s),"ascending"===r&&(O=-O));var C=b(w,u),M=b(S,u+O);u+=O+v,n.setItemLayout(w,{points:C.concat(M.slice().reverse())})}else{var A=T.get(["itemStyle","height"]);null==A?A=_:(A=Object(xe["p"])(A,l),"ascending"===r&&(A=-A));C=b(w,h),M=b(S,h+A);h+=A+v,n.setItemLayout(w,{points:C.concat(M.slice().reverse())})}}zu(n)}))}function Hu(t){t.registerChartView(ju),t.registerSeriesModel(Nu),t.registerLayout(Vu),t.registerProcessor(Zn("funnel"))}var Gu=.3,Uu=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new Pt["a"],n._initialized=!1,n}return Object(At["b"])(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,n,i){var r=this._dataGroup,o=t.getData(),a=this._data,s=t.coordinateSystem,l=s.dimensions,c=qu(t);function u(t){var e=Yu(o,r,t,l,s);Zu(e,o,t,c)}function h(e,n){var i=a.getItemGraphicEl(n),r=Xu(o,e,l,s);o.setItemGraphicEl(e,i),jt["h"](i,{shape:{points:r}},t,e),Object(jt["g"])(i),Zu(i,o,e,c)}function f(t){var e=a.getItemGraphicEl(t);r.remove(e)}if(o.diff(a).add(u).update(h).remove(f).execute(),!this._initialized){this._initialized=!0;var d=Wu(s,t,(function(){setTimeout((function(){r.removeClipPath()}))}));r.setClipPath(d)}this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,o=r.dimensions,a=qu(e),s=t.start;s<t.end;s++){var l=Yu(i,this._dataGroup,s,o,r);l.incremental=!0,Zu(l,i,s,a)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(ye["a"]);function Wu(t,e,n){var i=t.model,r=t.getRect(),o=new _e["a"]({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),a="horizontal"===i.get("layout")?"width":"height";return o.setShape(a,0),jt["c"](o,{shape:{width:r.width,height:r.height}},e,n),o}function Xu(t,e,n,i){for(var r=[],o=0;o<n.length;o++){var a=n[o],s=t.get(t.mapDimension(a),e);Ku(s,i.getAxis(a).type)||r.push(i.dataToPoint(s,a))}return r}function Yu(t,e,n,i,r){var o=Xu(t,n,i,r),a=new Kn["a"]({shape:{points:o},z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function qu(t){var e=t.get("smooth",!0);return!0===e&&(e=Gu),e=Object(xe["n"])(e),Object(c["l"])(e)&&(e=0),{smooth:e}}function Zu(t,e,n,i){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",i.smooth);var r=e.getItemModel(n),o=r.getModel("emphasis");Object(Nt["I"])(t,r,"lineStyle"),Object(Nt["o"])(t,o.get("focus"),o.get("blurScope"))}function Ku(t,e){return"category"===e?null==t:null==t||isNaN(t)}var $u=Uu,Ju=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this,{useEncodeDefaulter:Object(c["c"])(Qu,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,(function(e,r){t===e&&i.push(n.getRawIndex(r))})),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(Et["b"]);function Qu(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return Object(c["k"])(e.dimensions,(function(t){var e=th(t);n[t]=e})),n}}function th(t){return+t.replace("dim","")}var eh=Ju,nh=["lineStyle","opacity"],ih={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,i={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){n.eachActiveState(e,(function(t,n){var r=i[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(n).get(nh,!0);null!=o&&(r=o)}var a=e.ensureUniqueItemVisual(n,"style");a.opacity=r}),t.start,t.end)}}}},rh=ih;function oh(t){ah(t),sh(t)}function ah(t){if(!t.parallel){var e=!1;c["k"](t.series,(function(t){t&&"parallel"===t.type&&(e=!0)})),e&&(t.parallel=[{}])}}function sh(t){var e=se["r"](t.parallelAxis);c["k"](e,(function(e){if(c["A"](e)){var n=e.parallelIndex||0,i=se["r"](t.parallel)[n];i&&i.parallelAxisDefault&&c["I"](e,i.parallelAxisDefault,!1)}}))}var lh=5,ch=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},Object(c["k"])(uh,(function(t,e){n.getZr().on(e,this._handlers[e]=Object(c["c"])(t,this))}),this)),Object(on["b"])(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){Object(c["k"])(this._handlers,(function(t,n){e.getZr().off(n,t)})),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(Object(c["m"])({type:"parallelAxisExpand"},t))},e.type="parallel",e}(Di["a"]),uh={mousedown:function(t){hh(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(hh(this,"click")&&e){var n=[t.offsetX,t.offsetY],i=Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2);if(i>lh)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&hh(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function hh(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var fh=ch,dh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&c["I"](e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){c["k"](["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])}),this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[],n=c["n"](this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(t){return(t.get("parallelIndex")||0)===this.componentIndex}),this);c["k"](n,(function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)}))},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Ei["a"]),ph=dh,gh=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.type=r||"value",a.axisIndex=o,a}return Object(At["b"])(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}(tr["a"]),mh=gh;function vh(t,e,n,i,r,o){t=t||0;var a=n[1]-n[0];if(null!=r&&(r=_h(r,[0,a])),null!=o&&(o=Math.max(o,null!=r?r:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=_h(s,[0,a]),r=o=_h(s,[r,o]),i=0}e[0]=_h(e[0],n),e[1]=_h(e[1],n);var l=yh(e,i);e[i]+=t;var c,u=r||0,h=n.slice();return l.sign<0?h[0]+=u:h[1]-=u,e[i]=_h(e[i],h),c=yh(e,i),null!=r&&(c.sign!==l.sign||c.span<r)&&(e[1-i]=e[i]+l.sign*r),c=yh(e,i),null!=o&&c.span>o&&(e[1-i]=e[i]+c.sign*o),e}function yh(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function _h(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var bh=c["k"],xh=Math.min,wh=Math.max,Sh=Math.floor,Th=Math.ceil,Oh=xe["v"],Ch=Math.PI,Mh=function(){function t(t,e,n){this.type="parallel",this._axesMap=c["g"](),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=t.dimensions,r=t.parallelAxisIndex;bh(i,(function(t,n){var i=r[n],o=e.getComponent("parallelAxis",i),a=this._axesMap.set(t,new mh(t,Wi["a"](o),[0,0],o.get("type"),i)),s="category"===a.type;a.onBand=s&&o.get("boundaryGap"),a.inverse=o.get("inverse"),o.axis=a,a.model=o,a.coordinateSystem=o.coordinateSystem=this}),this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,o=t[1-r],a=t[r];return o>=n&&o<=n+e.axisLength&&a>=i&&a<=i+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries((function(n){if(t.contains(n,e)){var i=n.getData();bh(this.dimensions,(function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),Wi["i"](e.scale,e.model)}),this)}}),this)},t.prototype.resize=function(t,e){this._rect=Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,n=this._rect,i=["x","y"],r=["width","height"],o=e.get("layout"),a="horizontal"===o?0:1,s=n[r[a]],l=[0,s],c=this.dimensions.length,u=Ah(e.get("axisExpandWidth"),l),h=Ah(e.get("axisExpandCount")||0,[0,c]),f=e.get("axisExpandable")&&c>3&&c>h&&h>1&&u>0&&s>0,d=e.get("axisExpandWindow");if(d)t=Ah(d[1]-d[0],l),d[1]=d[0]+t;else{t=Ah(u*(h-1),l);var p=e.get("axisExpandCenter")||Sh(c/2);d=[u*p-t/2],d[1]=d[0]+t}var g=(s-t)/(c-h);g<3&&(g=0);var m=[Sh(Oh(d[0]/u,1))+1,Th(Oh(d[1]/u,1))-1],v=g/u*d[0];return{layout:o,pixelDimIndex:a,layoutBase:n[i[a]],layoutLength:s,axisBase:n[i[1-a]],axisLength:n[r[1-a]],axisExpandable:f,axisExpandWidth:u,axisCollapseWidth:g,axisExpandWindow:d,axisCount:c,winInnerIndices:m,axisExpandWindow0Pos:v}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each((function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])})),bh(n,(function(e,n){var o=(i.axisExpandable?Eh:Dh)(n,i),a={horizontal:{x:o.position,y:i.axisLength},vertical:{x:0,y:o.position}},s={horizontal:Ch/2,vertical:0},l=[a[r].x+t.x,a[r].y+t.y],c=s[r],u=qi["c"]();qi["g"](u,u,c),qi["i"](u,u,l),this._axesLayout[e]={position:l,rotation:c,transform:u,axisNameAvailableWidth:o.axisNameAvailableWidth,axisLabelShow:o.axisLabelShow,nameTruncateMaxWidth:o.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,o=this.dimensions,a=[],s=[];c["k"](o,(function(e){a.push(t.mapDimension(e)),s.push(r.get(e).model)}));for(var l=this.hasAxisBrushed(),u=n;u<i;u++){var h=void 0;if(l){h="active";for(var f=t.getValues(a,u),d=0,p=o.length;d<p;d++){var g=s[d].getActiveState(f[d]);if("inactive"===g){h="inactive";break}}}else h="normal";e(h,u)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},t.prototype.axisCoordToPoint=function(t,e){var n=this._axesLayout[e];return fr["applyTransform"]([t,0],n.transform)},t.prototype.getAxisLayout=function(t){return c["d"](this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var a,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",c=e.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),h=null!=u[0];if(c)h&&c&&s<r*u[0]?(l="jump",a=s-r*u[2]):h&&c&&s>r*(1-u[0])?(l="jump",a=s-r*(1-u[2])):(a=s-r*u[1])>=0&&(a=s-r*(1-u[1]))<=0&&(a=0),a*=e.axisExpandWidth/c,a?vh(a,i,o,"all"):l="none";else{var f=i[1]-i[0],d=o[1]*s/f;i=[wh(0,d-f/2)],i[1]=xh(o[1],i[0]+f),i[0]=i[1]-f}return{axisExpandWindow:i,behavior:l}},t}();function Ah(t,e){return xh(wh(t,e[0]),e[1])}function Dh(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function Eh(t,e){var n,i,r=e.layoutLength,o=e.axisExpandWidth,a=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,c=s,u=!1;return t<l[0]?(n=t*s,i=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],c=o,u=!0):(n=r-(a-1-t)*s,i=s),{position:n,axisNameAvailableWidth:c,axisLabelShow:u,nameTruncateMaxWidth:i}}var Ih=Mh;function Ph(t,e){var n=[];return t.eachComponent("parallel",(function(i,r){var o=new Ih(i,t,e);o.name="parallel_"+r,o.resize(i,e),i.coordinateSystem=o,o.model=i,n.push(o)})),t.eachSeries((function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",se["b"]).models[0];t.coordinateSystem=e.coordinateSystem}})),n}var Lh={create:Ph},kh=Lh,jh=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return Object(At["b"])(e,t),e.prototype.getAreaSelectStyle=function(){return Object(qs["a"])([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=c["d"](t);if(e)for(var n=e.length-1;n>=0;n--)xe["c"](e[n])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"},e}(Ei["a"]);c["K"](jh,Li["a"]);var Rh=jh,Nh=!0,Bh=Math.min,Fh=Math.max,zh=Math.pow,Vh=1e4,Hh=6,Gh=6,Uh="globalPan",Wh={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Xh={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Yh={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},qh=0,Zh=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Pt["a"],n._uid="brushController_"+qh++,Object(c["k"])(Af,(function(t,e){this._handlers[e]=Object(c["c"])(t,this)}),n),n}return Object(At["b"])(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||Lo(e,Uh,this._uid),Object(c["k"])(this._handlers,(function(t,n){e.on(n,t)})),this._brushType=t.brushType,this._brushOption=Object(c["I"])(Object(c["d"])(Yh),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;ko(t,Uh,this._uid),Object(c["k"])(this._handlers,(function(e,n){t.off(n,e)})),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};Object(c["k"])(t,(function(t){e[t.panelId]=Object(c["d"])(t)}))}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=Object(c["H"])(t,(function(t){return Object(c["I"])(Object(c["d"])(Yh),t,!0)}));var e="\0-brush-index-",n=this._covers,i=this._covers=[],r=this,o=this._creatingCover;return new Bs["a"](n,t,s,a).add(l).update(l).remove(u).execute(),this;function a(t,n){return(null!=t.id?t.id:e+n)+"-"+t.brushType}function s(t,e){return a(t.__brushOption,e)}function l(e,a){var s=t[e];if(null!=a&&n[a]===o)i[e]=n[a];else{var l=i[e]=null!=a?(n[a].__brushOption=s,n[a]):$h(r,Kh(r,s));tf(r,l)}}function u(t){n[t]!==o&&r.group.remove(n[t])}},e.prototype.unmount=function(){return this.enableBrush(!1),of(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Do["a"]);function Kh(t,e){var n=If[e.brushType].createCover(t,e);return n.__brushOption=e,Qh(n,e),t.group.add(n),n}function $h(t,e){var n=ef(e);return n.endCreating&&(n.endCreating(t,e),Qh(e,e.__brushOption)),e}function Jh(t,e){var n=e.__brushOption;ef(e).updateCoverShape(t,e,n.range,n)}function Qh(t,e){var n=e.z;null==n&&(n=Vh),t.traverse((function(t){t.z=n,t.z2=n}))}function tf(t,e){ef(e).updateCommon(t,e),Jh(t,e)}function ef(t){return If[t.__brushOption.brushType]}function nf(t,e,n){var i,r=t._panels;if(!r)return Nh;var o=t._transform;return Object(c["k"])(r,(function(t){t.isTargetByCursor(e,n,o)&&(i=t)})),i}function rf(t,e){var n=t._panels;if(!n)return Nh;var i=e.__brushOption.panelId;return null!=i?n[i]:Nh}function of(t){var e=t._covers,n=e.length;return Object(c["k"])(e,(function(e){t.group.remove(e)}),t),e.length=0,!!n}function af(t,e){var n=Object(c["H"])(t._covers,(function(t){var e=t.__brushOption,n=Object(c["d"])(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}}));t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function sf(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],o=n[1]-i[1],a=zh(r*r+o*o,.5);return a>Hh}function lf(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function cf(t,e,n,i){var r=new Pt["a"];return r.add(new _e["a"]({name:"main",style:df(n),silent:!0,draggable:!0,cursor:"move",drift:Object(c["i"])(yf,t,e,r,["n","s","w","e"]),ondragend:Object(c["i"])(af,e,{isEnd:!0})})),Object(c["k"])(i,(function(n){r.add(new _e["a"]({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Object(c["i"])(yf,t,e,r,n),ondragend:Object(c["i"])(af,e,{isEnd:!0})}))})),r}function uf(t,e,n,i){var r=i.brushStyle.lineWidth||0,o=Fh(r,Gh),a=n[0][0],s=n[1][0],l=a-r/2,c=s-r/2,u=n[0][1],h=n[1][1],f=u-o+r/2,d=h-o+r/2,p=u-a,g=h-s,m=p+r,v=g+r;ff(t,e,"main",a,s,p,g),i.transformable&&(ff(t,e,"w",l,c,o,v),ff(t,e,"e",f,c,o,v),ff(t,e,"n",l,c,m,o),ff(t,e,"s",l,d,m,o),ff(t,e,"nw",l,c,o,o),ff(t,e,"ne",f,c,o,o),ff(t,e,"sw",l,d,o,o),ff(t,e,"se",f,d,o,o))}function hf(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(df(n)),r.attr({silent:!i,cursor:i?"move":"default"}),Object(c["k"])([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var r=e.childOfName(n.join("")),o=1===n.length?mf(t,n[0]):vf(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?Xh[o]+"-resize":null})}))}function ff(t,e,n,i,r,o,a){var s=e.childOfName(n);s&&s.setShape(wf(xf(t,e,[[i,r],[i+o,r+a]])))}function df(t){return Object(c["j"])({strokeNoScale:!0},t.brushStyle)}function pf(t,e,n,i){var r=[Bh(t,n),Bh(e,i)],o=[Fh(t,n),Fh(e,i)];return[[r[0],o[0]],[r[1],o[1]]]}function gf(t){return fr["getTransform"](t.group)}function mf(t,e){var n={w:"left",e:"right",n:"top",s:"bottom"},i={left:"w",right:"e",top:"n",bottom:"s"},r=fr["transformDirection"](n[e],gf(t));return i[r]}function vf(t,e){var n=[mf(t,e[0]),mf(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}function yf(t,e,n,i,r,o){var a=n.__brushOption,s=t.toRectRange(a.range),l=bf(e,r,o);Object(c["k"])(i,(function(t){var e=Wh[t];s[e[0]][e[1]]+=l[e[0]]})),a.range=t.fromRectRange(pf(s[0][0],s[1][0],s[0][1],s[1][1])),tf(e,n),af(e,{isEnd:!1})}function _f(t,e,n,i){var r=e.__brushOption.range,o=bf(t,n,i);Object(c["k"])(r,(function(t){t[0]+=o[0],t[1]+=o[1]})),tf(t,e),af(t,{isEnd:!1})}function bf(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),o=i.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function xf(t,e,n){var i=rf(t,e);return i&&i!==Nh?i.clipPath(n,t._transform):Object(c["d"])(n)}function wf(t){var e=Bh(t[0][0],t[1][0]),n=Bh(t[0][1],t[1][1]),i=Fh(t[0][0],t[1][0]),r=Fh(t[0][1],t[1][1]);return{x:e,y:n,width:i-e,height:r-n}}function Sf(t,e,n){if(t._brushType&&!Ef(t,e.offsetX,e.offsetY)){var i=t._zr,r=t._covers,o=nf(t,e,n);if(!t._dragging)for(var a=0;a<r.length;a++){var s=r[a].__brushOption;if(o&&(o===Nh||s.panelId===o.panelId)&&If[s.brushType].contain(r[a],n[0],n[1]))return}o&&i.setCursorStyle("crosshair")}}function Tf(t){var e=t.event;e.preventDefault&&e.preventDefault()}function Of(t,e,n){return t.childOfName("main").contain(e,n)}function Cf(t,e,n,i){var r,o=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),sf(t)||o){if(a&&!o){"single"===s.brushMode&&of(t);var l=Object(c["d"])(s);l.brushType=Mf(l.brushType,a),l.panelId=a===Nh?null:a.panelId,o=t._creatingCover=Kh(t,l),t._covers.push(o)}if(o){var u=If[Mf(t._brushType,a)],h=o.__brushOption;h.range=u.getCreatingRange(xf(t,o,t._track)),i&&($h(t,o),u.updateCommon(t,o)),Jh(t,o),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&nf(t,e,n)&&of(t)&&(r={isEnd:i,removeOnClick:!0});return r}function Mf(t,e){return"auto"===t?e.defaultBrushType:t}var Af={mousedown:function(t){if(this._dragging)Df(this,t);else if(!t.target||!t.target.draggable){Tf(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null;var n=this._creatingPanel=nf(this,t,e);n&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(Sf(this,t,i),this._dragging){Tf(t);var r=Cf(this,t,i,!1);r&&af(this,r)}},mouseup:function(t){Df(this,t)}};function Df(t,e){if(t._dragging){Tf(e);var n=e.offsetX,i=e.offsetY,r=t.group.transformCoordToLocal(n,i),o=Cf(t,e,r,!0);t._dragging=!1,t._track=[],t._creatingCover=null,o&&af(t,o)}}function Ef(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}var If={lineX:Pf(0),lineY:Pf(1),rect:{createCover:function(t,e){function n(t){return t}return cf({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=lf(t);return pf(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){uf(t,e,n,i)},updateCommon:hf,contain:Of},polygon:{createCover:function(t,e){var n=new Pt["a"];return n.add(new Kn["a"]({name:"main",style:df(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new oo["a"]({name:"main",draggable:!0,drift:Object(c["i"])(_f,t,e),ondragend:Object(c["i"])(af,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:xf(t,e,n)})},updateCommon:hf,contain:Of}};function Pf(t){return{createCover:function(e,n){return cf({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=lf(e),i=Bh(n[0][t],n[1][t]),r=Fh(n[0][t],n[1][t]);return[i,r]},updateCoverShape:function(e,n,i,r){var o,a=rf(e,n);if(a!==Nh&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(t);else{var s=e._zr;o=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,o];t&&l.reverse(),uf(e,n,l,r)},updateCommon:hf,contain:Of}}var Lf=Zh;function kf(t){return t=Nf(t),function(e){return fr["clipPointsByRect"](e,t)}}function jf(t,e){return t=Nf(t),function(n){var i=null!=e?e:n,r=i?t.width:t.height,o=i?t.x:t.y;return[o,o+(r||0)]}}function Rf(t,e,n){var i=Nf(t);return function(t,r){return i.contain(r[0],r[1])&&!Wo(t,e,n)}}function Nf(t){return Xi["a"].create(t)}var Bf=["axisLine","axisTickLabel","axisName"],Ff=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new Lf(n.getZr())).on("brush",c["c"](this._onBrush,this))},e.prototype.render=function(t,e,n,i){if(!zf(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Pt["a"],this.group.add(this._axisGroup),t.get("show")){var o=Hf(t,e),a=o.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,u=t.axis.dim,h=a.getAxisLayout(u),f=c["m"]({strokeContainThreshold:l},h),d=new Mr(t,f);c["k"](Bf,d.add,d),this._axisGroup.add(d.getGroup()),this._refreshBrushController(f,s,t,o,l,n),fr["groupTransition"](r,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,n,i,r,o){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),c=Xi["a"].create({x:a[0],y:-r/2,width:s,height:r});c.x-=l,c.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:kf(c),isTargetByCursor:Rf(c,o,i),getLinearBrushOtherExtent:jf(c,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(Vf(n))},e.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,i=n.axis,r=c["H"](e,(function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]}));(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(Di["a"]);function zf(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}function Vf(t){var e=t.axis;return c["H"](t.activeIntervals,(function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}}))}function Hf(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}var Gf=Ff,Uf={type:"axisAreaSelect",event:"axisAreaSelected"};function Wf(t){t.registerAction(Uf,(function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},(function(e){e.axis.model.setActiveIntervals(t.intervals)}))})),t.registerAction("parallelAxisExpand",(function(t,e){e.eachComponent({mainType:"parallel",query:t},(function(e){e.setAxisExpand(t)}))}))}var Xf={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function Yf(t){t.registerComponentView(fh),t.registerComponentModel(ph),t.registerCoordinateSystem("parallel",kh),t.registerPreprocessor(oh),t.registerComponentModel(Rh),t.registerComponentView(Gf),Gi(t,"parallel",Rh,Xf),Wf(t)}function qf(t){Object(i["a"])(Yf),t.registerChartView($u),t.registerSeriesModel(eh),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,rh)}var Zf=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0}return t}(),Kf=function(t){function e(e){return t.call(this,e)||this}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new Zf},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){Object(Nt["r"])(this)},e.prototype.downplay=function(){Object(Nt["C"])(this)},e}(u["b"]),$f=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=this,r=t.getGraph(),o=this.group,a=t.layoutInfo,s=a.width,l=a.height,c=t.getData(),u=t.getData("edge"),h=t.get("orient");this._model=t,o.removeAll(),o.x=a.x,o.y=a.y,r.eachEdge((function(e){var n=new Kf,i=Object(Rt["a"])(n);i.dataIndex=e.dataIndex,i.seriesIndex=t.seriesIndex,i.dataType="edge";var r,a,c,f,d,p,g,m,v=e.getModel(),y=v.getModel("lineStyle"),_=y.get("curveness"),b=e.node1.getLayout(),x=e.node1.getModel(),w=x.get("localX"),S=x.get("localY"),T=e.node2.getLayout(),O=e.node2.getModel(),C=O.get("localX"),M=O.get("localY"),A=e.getLayout();switch(n.shape.extent=Math.max(1,A.dy),n.shape.orient=h,"vertical"===h?(r=(null!=w?w*s:b.x)+A.sy,a=(null!=S?S*l:b.y)+b.dy,c=(null!=C?C*s:T.x)+A.ty,f=null!=M?M*l:T.y,d=r,p=a*(1-_)+f*_,g=c,m=a*_+f*(1-_)):(r=(null!=w?w*s:b.x)+b.dx,a=(null!=S?S*l:b.y)+A.sy,c=null!=C?C*s:T.x,f=(null!=M?M*l:T.y)+A.ty,d=r*(1-_)+c*_,p=a,g=r*_+c*(1-_),m=f),n.setShape({x1:r,y1:a,x2:c,y2:f,cpx1:d,cpy1:p,cpx2:g,cpy2:m}),n.useStyle(y.getItemStyle()),n.style.fill){case"source":n.style.fill=e.node1.getVisual("color"),n.style.decal=e.node1.getVisual("style").decal;break;case"target":n.style.fill=e.node2.getVisual("color"),n.style.decal=e.node2.getVisual("style").decal;break;case"gradient":var D=e.node1.getVisual("color"),E=e.node2.getVisual("color");"string"===typeof D&&"string"===typeof E&&(n.style.fill=new oe["a"](0,0,+("horizontal"===h),+("vertical"===h),[{color:D,offset:0},{color:E,offset:1}]))}var I=v.getModel("emphasis");Object(Nt["I"])(n,v,"lineStyle",(function(t){return t.getItemStyle()})),o.add(n),u.setItemGraphicEl(e.dataIndex,n);var P=I.get("focus");Object(Nt["o"])(n,"adjacency"===P?e.getAdjacentDataIndices():P,I.get("blurScope")),Object(Rt["a"])(n).dataType="edge"})),r.eachNode((function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),a=i.get("localY"),u=i.getModel("emphasis"),h=new _e["a"]({shape:{x:null!=r?r*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle(),z2:10});Object(Vt["g"])(h,Object(Vt["e"])(i),{labelFetcher:t,labelDataIndex:e.dataIndex,defaultText:e.id}),h.disableLabelAnimation=!0,h.setStyle("fill",e.getVisual("color")),h.setStyle("decal",e.getVisual("style").decal),Object(Nt["I"])(h,i),o.add(h),c.setItemGraphicEl(e.dataIndex,h),Object(Rt["a"])(h).dataType="node";var f=u.get("focus");Object(Nt["o"])(h,"adjacency"===f?e.getAdjacentDataIndices():f,u.get("blurScope"))})),c.eachItemGraphicEl((function(e,r){var o=c.getItemModel(r);o.get("draggable")&&(e.drift=function(e,o){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=o,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:c.getRawIndex(r),localX:this.shape.x/s,localY:this.shape.y/l})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")})),!this._data&&t.isAnimationEnabled()&&o.setClipPath(Jf(o.getBoundingRect(),t,(function(){o.removeClipPath()}))),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(ye["a"]);function Jf(t,e,n){var i=new _e["a"]({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return jt["c"](i,{shape:{width:t.width+20}},e,n),i}var Qf=$f,td=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links,i=t.data||t.nodes,r=t.levels;this.levelModels=[];for(var o=this.levelModels,a=0;a<r.length;a++)null!=r[a].depth&&r[a].depth>=0&&(o[r[a].depth]=new pr["a"](r[a],this,e));if(i&&n){var s=gu(i,n,this,!0,l);return s.data}function l(t,e){t.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getData().getItemLayout(e);if(i){var r=i.depth,o=n.levelModels[r];o&&(t.parentModel=o)}return t})),e.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getGraph().getEdgeByIndex(e),r=i.node1.getLayout();if(r){var o=r.depth,a=n.levelModels[o];a&&(t.parentModel=a)}return t}))}},e.prototype.setNodePosition=function(t,e){var n=this.option.data||this.option.nodes,i=n[t];i.localX=e[0],i.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function i(t){return isNaN(t)||null==t}if("edge"===n){var r=this.getDataParams(t,n),o=r.data,a=r.value,s=o.source+" -- "+o.target;return Object(lo["c"])("nameValue",{name:s,value:a,noValue:i(a)})}var l=this.getGraph().getNodeByIndex(t),c=l.getLayout().value,u=this.getDataParams(t,n).data.name;return Object(lo["c"])("nameValue",{name:null!=u?u+"":null,value:c,noValue:i(c)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var i=t.prototype.getDataParams.call(this,e,n);if(null==i.value&&"node"===n){var r=this.getGraph().getNodeByIndex(e),o=r.getLayout().value;i.value=o}return i},e.type="series.sankey",e.defaultOption={zlevel:0,z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(Et["b"]),ed=td;function nd(t,e){t.eachSeriesByType("sankey",(function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),r=id(t,e);t.layoutInfo=r;var o=r.width,a=r.height,s=t.getGraph(),l=s.nodes,u=s.edges;od(l);var h=c["n"](l,(function(t){return 0===t.getLayout().value})),f=0!==h.length?0:t.get("layoutIterations"),d=t.get("orient"),p=t.get("nodeAlign");rd(l,u,n,i,o,a,f,d,p)}))}function id(t,e){return Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function rd(t,e,n,i,r,o,a,s,l){ad(t,e,n,r,o,s,l),hd(t,e,o,r,i,a,s),Td(t,s)}function od(t){c["k"](t,(function(t){var e=wd(t.outEdges,xd),n=wd(t.inEdges,xd),i=t.getValue()||0,r=Math.max(e,n,i);t.setLayout({value:r},!0)}))}function ad(t,e,n,i,r,o,a){for(var s=[],l=[],c=[],u=[],h=0,f=0;f<e.length;f++)s[f]=1;for(f=0;f<t.length;f++)l[f]=t[f].inEdges.length,0===l[f]&&c.push(t[f]);var d=-1;while(c.length){for(var p=0;p<c.length;p++){var g=c[p],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>d&&(d=m.depth),g.setLayout({depth:v?m.depth:h},!0),"vertical"===o?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var _=g.outEdges[y],b=e.indexOf(_);s[b]=0;var x=_.node2,w=t.indexOf(x);0===--l[w]&&u.indexOf(x)<0&&u.push(x)}}++h,c=u,u=[]}for(f=0;f<s.length;f++)if(1===s[f])throw new Error("Sankey is a DAG, the original data has cycle!");var S=d>h-1?d:h-1;a&&"left"!==a&&ld(t,a,o,S);var T="vertical"===o?(r-n)/S:(i-n)/S;ud(t,T,o)}function sd(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function ld(t,e,n,i){if("right"===e){var r=[],o=t,a=0;while(o.length){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var u=0;u<l.inEdges.length;u++){var h=l.inEdges[u];r.indexOf(h.node1)<0&&r.push(h.node1)}}o=r,r=[],++a}c["k"](t,(function(t){sd(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)}))}else"justify"===e&&cd(t,i)}function cd(t,e){c["k"](t,(function(t){sd(t)||t.outEdges.length||t.setLayout({depth:e},!0)}))}function ud(t,e,n){c["k"](t,(function(t){var i=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:i},!0):t.setLayout({x:i},!0)}))}function hd(t,e,n,i,r,o,a){var s=fd(t,a);dd(s,e,n,i,r,a),pd(s,r,n,i,a);for(var l=1;o>0;o--)l*=.99,gd(s,l,a),pd(s,r,n,i,a),Sd(s,l,a),pd(s,r,n,i,a)}function fd(t,e){var n=[],i="vertical"===e?"y":"x",r=Object(se["j"])(t,(function(t){return t.getLayout()[i]}));return r.keys.sort((function(t,e){return t-e})),c["k"](r.keys,(function(t){n.push(r.buckets.get(t))})),n}function dd(t,e,n,i,r,o){var a=1/0;c["k"](t,(function(t){var e=t.length,s=0;c["k"](t,(function(t){s+=t.getLayout().value}));var l="vertical"===o?(i-(e-1)*r)/s:(n-(e-1)*r)/s;l<a&&(a=l)})),c["k"](t,(function(t){c["k"](t,(function(t,e){var n=t.getLayout().value*a;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))}))})),c["k"](e,(function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)}))}function pd(t,e,n,i,r){var o="vertical"===r?"x":"y";c["k"](t,(function(t){var a,s,l;t.sort((function(t,e){return t.getLayout()[o]-e.getLayout()[o]}));for(var c=0,u=t.length,h="vertical"===r?"dx":"dy",f=0;f<u;f++)s=t[f],l=c-s.getLayout()[o],l>0&&(a=s.getLayout()[o]+l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[o]+s.getLayout()[h]+e;var d="vertical"===r?i:n;if(l=c-e-d,l>0){a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0),c=a;for(f=u-2;f>=0;--f)s=t[f],l=s.getLayout()[o]+s.getLayout()[h]+e-c,l>0&&(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[o]}}))}function gd(t,e,n){c["k"](t.slice().reverse(),(function(t){c["k"](t,(function(t){if(t.outEdges.length){var i=wd(t.outEdges,md,n)/wd(t.outEdges,xd);if(isNaN(i)){var r=t.outEdges.length;i=r?wd(t.outEdges,vd,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-bd(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-bd(t,n))*e;t.setLayout({y:a},!0)}}}))}))}function md(t,e){return bd(t.node2,e)*t.getValue()}function vd(t,e){return bd(t.node2,e)}function yd(t,e){return bd(t.node1,e)*t.getValue()}function _d(t,e){return bd(t.node1,e)}function bd(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function xd(t){return t.getValue()}function wd(t,e,n){var i=0,r=t.length,o=-1;while(++o<r){var a=+e(t[o],n);isNaN(a)||(i+=a)}return i}function Sd(t,e,n){c["k"](t,(function(t){c["k"](t,(function(t){if(t.inEdges.length){var i=wd(t.inEdges,yd,n)/wd(t.inEdges,xd);if(isNaN(i)){var r=t.inEdges.length;i=r?wd(t.inEdges,_d,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-bd(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-bd(t,n))*e;t.setLayout({y:a},!0)}}}))}))}function Td(t,e){var n="vertical"===e?"x":"y";c["k"](t,(function(t){t.outEdges.sort((function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]})),t.inEdges.sort((function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]}))})),c["k"](t,(function(t){var e=0,n=0;c["k"](t.outEdges,(function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy})),c["k"](t.inEdges,(function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy}))}))}function Od(t){t.eachSeriesByType("sankey",(function(t){var e=t.getGraph(),n=e.nodes;if(n.length){var i=1/0,r=-1/0;c["k"](n,(function(t){var e=t.getLayout().value;e<i&&(i=e),e>r&&(r=e)})),c["k"](n,(function(e){var n=new Al({type:"color",mappingMethod:"linear",dataExtent:[i,r],visual:t.get("color")}),o=n.mapValueToVisual(e.getLayout().value),a=e.getModel().get(["itemStyle","color"]);null!=a?(e.setVisual("color",a),e.setVisual("style",{fill:a})):(e.setVisual("color",o),e.setVisual("style",{fill:o}))}))}}))}function Cd(t){t.registerChartView(Qf),t.registerSeriesModel(ed),t.registerLayout(nd),t.registerVisual(Od),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},(function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])}))}))}var Md=n("2f45"),Ad=function(){function t(){}return t.prototype.getInitialData=function(t,e){var n,i,r=e.getComponent("xAxis",this.get("xAxisIndex")),o=e.getComponent("yAxis",this.get("yAxisIndex")),a=r.get("type"),s=o.get("type");"category"===a?(t.layout="horizontal",n=r.getOrdinalMeta(),i=!0):"category"===s?(t.layout="vertical",n=o.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var l=["x","y"],u="horizontal"===t.layout?0:1,h=this._baseAxisDim=l[u],f=l[1-u],d=[r,o],p=d[u].get("type"),g=d[1-u].get("type"),m=t.data;if(m&&i){var v=[];c["k"](m,(function(t,e){var n;c["t"](t)?(n=t.slice(),t.unshift(e)):c["t"](t.value)?(n=c["m"]({},t),n.value=n.value.slice(),t.value.unshift(e)):n=t,v.push(n)})),t.data=v}var y=this.defaultValueDimensions,_=[{name:h,type:Object(Md["a"])(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:f,type:Object(Md["a"])(g),dimsDef:y.slice()}];return hi(this,{coordDimensions:_,dimensionsCount:y.length+1,encodeDefaulter:c["i"](fi["c"],_,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),Dd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return Object(At["b"])(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(Et["b"]);Object(c["K"])(Dd,Ad,!0);var Ed=Dd,Id=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this.group,o=this._data;this._data||r.removeAll();var a="horizontal"===t.get("layout")?1:0;i.diff(o).add((function(t){if(i.hasValue(t)){var e=i.getItemLayout(t),n=kd(e,i,t,a,!0);i.setItemGraphicEl(t,n),r.add(n)}})).update((function(t,e){var n=o.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?(Object(jt["g"])(n),jd(s,n,i,t)):n=kd(s,i,t,a),r.add(n),i.setItemGraphicEl(t,n)}else r.remove(n)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&r.remove(e)})).execute(),this._data=i},e.prototype.remove=function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(t){t&&e.remove(t)}))},e.type="boxplot",e}(ye["a"]),Pd=function(){function t(){}return t}(),Ld=function(t){function e(e){var n=t.call(this,e)||this;return n.type="boxplotBoxPath",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new Pd},e.prototype.buildPath=function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])},e}(u["b"]);function kd(t,e,n,i,r){var o=t.ends,a=new Ld({shape:{points:r?Rd(o,i,t):o}});return jd(t,a,e,n,r),a}function jd(t,e,n,i,r){var o=n.hostModel,a=fr[r?"initProps":"updateProps"];a(e,{shape:{points:t.ends}},o,i),e.useStyle(n.getItemVisual(i,"style")),e.style.strokeNoScale=!0,e.z2=100;var s=n.getItemModel(i);Object(Nt["I"])(e,s),Object(Nt["o"])(e,s.get(["emphasis","focus"]),s.get(["emphasis","blurScope"]))}function Rd(t,e,n){return c["H"](t,(function(t){return t=t.slice(),t[e]=n.initBaseline,t}))}var Nd=Id;function Bd(t,e){}var Fd=c["k"];function zd(t){var e=Vd(t);Fd(e,(function(t){var e=t.seriesModels;e.length&&(Hd(t),Fd(e,(function(e,n){Gd(e,t.boxOffsetList[n],t.boxWidthList[n])})))}))}function Vd(t){var e=[],n=[];return t.eachSeriesByType("boxplot",(function(t){var i=t.getBaseAxis(),r=c["r"](n,i);r<0&&(r=n.length,n[r]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)})),e}function Hd(t){var e,n,i=t.axis,r=t.seriesModels,o=r.length,a=t.boxWidthList=[],s=t.boxOffsetList=[],l=[];if("category"===i.type)n=i.getBandWidth();else{var u=0;Fd(r,(function(t){u=Math.max(u,t.getData().count())})),e=i.getExtent(),Math.abs(e[1]-e[0])}Fd(r,(function(t){var e=t.get("boxWidth");c["t"](e)||(e=[e,e]),l.push([Object(xe["p"])(e[0],n)||0,Object(xe["p"])(e[1],n)||0])}));var h=.8*n-2,f=h/o*.3,d=(h-f*(o-1))/o,p=d/2-h/2;Fd(r,(function(t,e){s.push(p),p+=f+d,a.push(Math.min(Math.max(d,l[e][0]),l[e][1]))}))}function Gd(t,e,n){var i=t.coordinateSystem,r=t.getData(),o=n/2,a="horizontal"===t.get("layout")?0:1,s=1-a,l=["x","y"],c=r.mapDimension(l[a]),u=r.mapDimensionsAll(l[s]);if(!(null==c||u.length<5))for(var h=0;h<r.count();h++){var f=r.get(c,h),d=_(f,u[2],h),p=_(f,u[0],h),g=_(f,u[1],h),m=_(f,u[3],h),v=_(f,u[4],h),y=[];b(y,g,!1),b(y,m,!0),y.push(p,g,v,m),x(y,p),x(y,v),x(y,d),r.setItemLayout(h,{initBaseline:d[s],ends:y})}function _(t,n,o){var l,c=r.get(n,o),u=[];return u[a]=t,u[s]=c,isNaN(t)||isNaN(c)?l=[NaN,NaN]:(l=i.dataToPoint(u),l[a]+=e),l}function b(t,e,n){var i=e.slice(),r=e.slice();i[a]+=o,r[a]-=o,n?t.push(i,r):t.push(r,i)}function x(t,e){var n=e.slice(),i=e.slice();n[a]-=o,i[a]+=o,t.push(n,i)}}function Ud(t,e){e=e||{};for(var n=[],i=[],r=e.boundIQR,o="none"===r||0===r,a=0;a<t.length;a++){var s=Object(xe["c"])(t[a].slice()),l=Object(xe["q"])(s,.25),u=Object(xe["q"])(s,.5),h=Object(xe["q"])(s,.75),f=s[0],d=s[s.length-1],p=(null==r?1.5:r)*(h-l),g=o?f:Math.max(f,l-p),m=o?d:Math.min(d,h+p),v=e.itemNameFormatter,y=Object(c["w"])(v)?v({value:a}):Object(c["C"])(v)?v.replace("{value}",a+""):a+"";n.push([y,g,l,u,h,m]);for(var _=0;_<s.length;_++){var b=s[_];if(b<g||b>m){var x=[y,b];i.push(x)}}}return{boxData:n,outliers:i}}var Wd=n("edae"),Xd=n("07fd"),Yd={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Xd["c"]){var n="";0,Object(Wd["c"])(n)}var i=Ud(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:i.boxData},{data:i.outliers}]}};function qd(t){t.registerSeriesModel(Ed),t.registerChartView(Nd),t.registerVisual(Bd),t.registerLayout(zd),t.registerTransform(Yd)}var Zd=["color","borderColor"],Kd=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){this.group.removeClipPath(),this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,n,i){this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),n=this._data,i=this.group,r=e.getLayout("isSimpleBox"),o=t.get("clip",!0),a=t.coordinateSystem,s=a.getArea&&a.getArea();this._data||i.removeAll(),e.diff(n).add((function(n){if(e.hasValue(n)){var a=e.getItemLayout(n);if(o&&tp(s,a))return;var l=Qd(a,n,!0);jt["c"](l,{shape:{points:a.ends}},t,n),ep(l,e,n,r),i.add(l),e.setItemGraphicEl(n,l)}})).update((function(a,l){var c=n.getItemGraphicEl(l);if(e.hasValue(a)){var u=e.getItemLayout(a);o&&tp(s,u)?i.remove(c):(c?(jt["h"](c,{shape:{points:u.ends}},t,a),Object(jt["g"])(c)):c=Qd(u,a),ep(c,e,a,r),i.add(c),e.setItemGraphicEl(a,c))}else i.remove(c)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)})).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),op(t,this.group);var e=t.get("clip",!0)?Te(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){var n,i=e.getData(),r=i.getLayout("isSimpleBox");while(null!=(n=t.next())){var o=i.getItemLayout(n),a=Qd(o,n);ep(a,i,n,r),a.incremental=!0,this.group.add(a)}},e.prototype._incrementalRenderLarge=function(t,e){op(e,this.group,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(ye["a"]),$d=function(){function t(){}return t}(),Jd=function(t){function e(e){var n=t.call(this,e)||this;return n.type="normalCandlestickBox",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new $d},e.prototype.buildPath=function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(u["b"]);function Qd(t,e,n){var i=t.ends;return new Jd({shape:{points:n?np(i,t):i},z2:100})}function tp(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function ep(t,e,n,i){var r=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=i,Object(Nt["I"])(t,r)}function np(t,e){return c["H"](t,(function(t){return t=t.slice(),t[1]=e.initBaseline,t}))}var ip=function(){function t(){}return t}(),rp=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeCandlestickBox",n}return Object(At["b"])(e,t),e.prototype.getDefaultShape=function(){return new ip},e.prototype.buildPath=function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3},e}(u["b"]);function op(t,e,n){var i=t.getData(),r=i.getLayout("largePoints"),o=new rp({shape:{points:r},__sign:1});e.add(o);var a=new rp({shape:{points:r},__sign:-1});e.add(a),ap(1,o,t,i),ap(-1,a,t,i),n&&(o.incremental=!0,a.incremental=!0)}function ap(t,e,n,i){var r=n.get(["itemStyle",t>0?"borderColor":"borderColor0"])||n.get(["itemStyle",t>0?"color":"color0"]),o=n.getModel("itemStyle").getItemStyle(Zd);e.useStyle(o),e.style.fill=null,e.style.stroke=r}var sp=Kd,lp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return Object(At["b"])(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(Et["b"]);Object(c["K"])(lp,Ad,!0);var cp=lp;function up(t){t&&c["t"](t.series)&&c["k"](t.series,(function(t){c["A"](t)&&"k"===t.type&&(t.type="candlestick")}))}var hp=["itemStyle","borderColor"],fp=["itemStyle","borderColor0"],dp=["itemStyle","color"],pp=["itemStyle","color0"],gp={seriesType:"candlestick",plan:Object(Xe["a"])(),performRawSeries:!0,reset:function(t,e){function n(t,e){return e.get(t>0?dp:pp)}function i(t,e){return e.get(t>0?hp:fp)}if(!e.isSeriesFiltered(t)){var r=t.pipelineContext.large;return!r&&{progress:function(t,e){var r;while(null!=(r=t.next())){var o=e.getItemModel(r),a=e.getItemLayout(r).sign,s=o.getItemStyle();s.fill=n(a,o),s.stroke=i(a,o)||s.fill;var l=e.ensureUniqueItemVisual(r,"style");Object(c["m"])(l,s)}}}}}},mp=gp,vp="undefined"!==typeof Float32Array?Float32Array:Array,yp={seriesType:"candlestick",plan:Object(Xe["a"])(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=bp(t,n),r=0,o=1,a=["x","y"],s=n.getDimensionIndex(n.mapDimension(a[r])),l=Object(c["H"])(n.mapDimensionsAll(a[o]),n.getDimensionIndex,n),u=l[0],h=l[1],f=l[2],d=l[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(s<0||l.length<4))return{progress:t.pipelineContext.large?g:p};function p(t,n){var a,l=n.getStore();while(null!=(a=t.next())){var c=l.get(s,a),p=l.get(u,a),g=l.get(h,a),m=l.get(f,a),v=l.get(d,a),y=Math.min(p,g),_=Math.max(p,g),b=O(y,c),x=O(_,c),w=O(m,c),S=O(v,c),T=[];C(T,x,0),C(T,b,1),T.push(A(S),A(x),A(w),A(b)),n.setItemLayout(a,{sign:_p(l,a,p,g,h),initBaseline:p>g?x[o]:b[o],ends:T,brushRect:M(m,v,c)})}function O(t,n){var i=[];return i[r]=n,i[o]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function C(t,e,n){var o=e.slice(),a=e.slice();o[r]=Object(fr["subPixelOptimize"])(o[r]+i/2,1,!1),a[r]=Object(fr["subPixelOptimize"])(a[r]-i/2,1,!0),n?t.push(o,a):t.push(a,o)}function M(t,e,n){var a=O(t,n),s=O(e,n);return a[r]-=i/2,s[r]-=i/2,{x:a[0],y:a[1],width:o?i:s[0]-a[0],height:o?s[1]-a[1]:i}}function A(t){return t[r]=Object(fr["subPixelOptimize"])(t[r],1),t}}function g(t,n){var i,a,l=new vp(4*t.count),c=0,p=[],g=[],m=n.getStore();while(null!=(a=t.next())){var v=m.get(s,a),y=m.get(u,a),_=m.get(h,a),b=m.get(f,a),x=m.get(d,a);isNaN(v)||isNaN(b)||isNaN(x)?(l[c++]=NaN,c+=3):(l[c++]=_p(m,a,y,_,h),p[r]=v,p[o]=b,i=e.dataToPoint(p,null,g),l[c++]=i?i[0]:NaN,l[c++]=i?i[1]:NaN,p[o]=x,i=e.dataToPoint(p,null,g),l[c++]=i?i[1]:NaN)}n.setLayout("largePoints",l)}}};function _p(t,e,n,i,r){var o;return o=n>i?-1:n<i?1:e>0?t.get(r,e-1)<=i?1:-1:1,o}function bp(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),o=Object(xe["p"])(Object(c["P"])(t.get("barMaxWidth"),r),r),a=Object(xe["p"])(Object(c["P"])(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?Object(xe["p"])(s,r):Math.max(Math.min(r/2,o),a)}var xp=yp;function wp(t){t.registerChartView(sp),t.registerSeriesModel(cp),t.registerPreprocessor(up),t.registerVisual(mp),t.registerLayout(xp)}function Sp(t,e){var n=e.rippleEffectColor||e.color;t.eachChild((function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})}))}var Tp=function(t){function e(e,n){var i=t.call(this)||this,r=new Ut(e,n),o=new Pt["a"];return i.add(r),i.add(o),i.updateData(e,n),i}return Object(At["b"])(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=t.rippleNumber,r=this.childAt(1),o=0;o<i;o++){var a=Object(It["a"])(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-o/i*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),r.add(a)}Sp(r,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],r=0;r<i.length;r++){var o=i[r];if(e[o]!==t[o])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}Sp(n,t)},e.prototype.highlight=function(){Object(Nt["r"])(this)},e.prototype.downplay=function(){Object(Nt["C"])(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,e){var n=this,i=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=Object(It["c"])(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"style"),c=l&&l.fill;r.setScale(s),r.traverse((function(t){t.setStyle("fill",c)}));var u=Object(It["b"])(t.getItemVisual(e,"symbolOffset"),s);u&&(r.x=u[0],r.y=u[1]);var h=t.getItemVisual(e,"symbolRotate");r.rotation=(h||0)*Math.PI/180||0;var f={};f.showEffectOn=i.get("showEffectOn"),f.rippleScale=o.get(["rippleEffect","scale"]),f.brushType=o.get(["rippleEffect","brushType"]),f.period=1e3*o.get(["rippleEffect","period"]),f.effectOffset=e/t.count(),f.z=i.getShallow("z")||0,f.zlevel=i.getShallow("zlevel")||0,f.symbolType=a,f.color=c,f.rippleEffectColor=o.get(["rippleEffect","color"]),f.rippleNumber=o.get(["rippleEffect","number"]),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===f.showEffectOn?(this._effectCfg?this.updateEffectAnimation(f):this.startEffectAnimation(f),this._effectCfg=f):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==f.showEffectOn&&n.startEffectAnimation(f):"normal"===t&&"render"!==f.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=f,Object(Nt["o"])(this)},e.prototype.fadeOut=function(t){this.off("mouseover").off("mouseout"),t&&t()},e}(Pt["a"]),Op=Tp,Cp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(){this._symbolDraw=new Zt(Op)},e.prototype.render=function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(r.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,e,n){var i=t.getData();this.group.dirty();var r=Ye("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=qi["a"](e.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(ye["a"]),Mp=Cp,Ap=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(Et["b"]),Dp=Ap;function Ep(t){t.registerChartView(Mp),t.registerSeriesModel(Dp),t.registerLayout(Ye("effectScatter"))}var Ip=function(t){function e(e,n,i){var r=t.call(this)||this;return r.add(r.createLine(e,n,i)),r._updateEffectSymbol(e,n),r}return Object(At["b"])(e,t),e.prototype.createLine=function(t,e,n){return new Zc(t,e,n)},e.prototype._updateEffectSymbol=function(t,e){var n=t.getItemModel(e),i=n.getModel("effect"),r=i.get("symbolSize"),o=i.get("symbol");c["t"](r)||(r=[r,r]);var a=t.getItemVisual(e,"style"),s=i.get("color")||a&&a.stroke,l=this.childAt(1);this._symbolType!==o&&(this.remove(l),l=Object(It["a"])(o,-.5,-.5,1,1,s),l.z2=100,l.culling=!0,this.add(l)),l&&(l.setStyle("shadowColor",s),l.setStyle(i.getItemStyle(["color"])),l.scaleX=r[0],l.scaleY=r[1],l.setColor(s),this._symbolType=o,this._symbolScale=r,this._updateEffectAnimation(t,i,e))},e.prototype._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=this,o=t.getItemLayout(n),a=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),u=c["O"](e.get("delay"),(function(e){return e/t.count()*a/3}));if(i.ignore=!0,this._updateAnimationPoints(i,o),l>0&&(a=this._getLineLength(i)/l*1e3),(a!==this._period||s!==this._loop)&&(i.stopAnimation(),a>0)){var h=void 0;h="function"===typeof u?u(n):u,i.__t>0&&(h=-a*i.__t),i.__t=0;var f=i.animate("",s).when(a,{__t:1}).delay(h).during((function(){r._updateSymbolPosition(i)}));s||f.done((function(){r.remove(i)})),f.start()}this._period=a,this._loop=s}},e.prototype._getLineLength=function(t){return Zi["f"](t.__p1,t.__cp1)+Zi["f"](t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t,o=[t.x,t.y],a=o.slice(),s=ce["h"],l=ce["i"];o[0]=s(e[0],i[0],n[0],r),o[1]=s(e[1],i[1],n[1],r);var c=l(e[0],i[0],n[0],r),u=l(e[1],i[1],n[1],r);t.rotation=-Math.atan2(u,c)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*Zi["f"](a,o),1===r&&(o[0]=a[0]+(o[0]-a[0])/2,o[1]=a[1]+(o[1]-a[1])/2)):1===t.__lastT?t.scaleY=2*Zi["f"](e,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},e}(Pt["a"]),Pp=Ip,Lp=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createPolyline(e,n,i),r}return Object(At["b"])(e,t),e.prototype._createPolyline=function(t,e,n){var i=t.getItemLayout(e),r=new Kn["a"]({shape:{points:i}});this.add(r),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel,r=this.childAt(0),o={shape:{points:t.getItemLayout(e)}};jt["h"](r,o,i,e),this._updateCommonStl(t,e,n)},e.prototype._updateCommonStl=function(t,e,n){var i=this.childAt(0),r=t.getItemModel(e),o=n&&n.emphasisLineStyle;n&&!t.hasItemOption||(o=r.getModel(["emphasis","lineStyle"]).getLineStyle()),i.useStyle(t.getItemVisual(e,"style")),i.style.fill=null,i.style.strokeNoScale=!0;var a=i.ensureState("emphasis");a.style=o,Object(Nt["o"])(this)},e.prototype.updateLayout=function(t,e){var n=this.childAt(0);n.setShape("points",t.getItemLayout(e))},e}(Pt["a"]),kp=Lp,jp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return Object(At["b"])(e,t),e.prototype.createLine=function(t,e,n){return new kp(t,e,n)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++){var o=e[r-1],a=e[r];i+=Zi["f"](o,a),n.push(i)}if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}else this._length=0},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e=t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var o,a=this._lastFrame;if(e<this._lastFramePercent){var s=Math.min(a+1,r-1);for(o=s;o>=0;o--)if(i[o]<=e)break;o=Math.min(o,r-2)}else{for(o=a;o<r;o++)if(i[o]>e)break;o=Math.min(o-1,r-2)}var l=(e-i[o])/(i[o+1]-i[o]),c=n[o],u=n[o+1];t.x=c[0]*(1-l)+l*u[0],t.y=c[1]*(1-l)+l*u[1];var h=u[0]-c[0],f=u[1]-c[1];t.rotation=-Math.atan2(f,h)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},e}(Pp),Rp=jp,Np=n("9680"),Bp=n("68ab"),Fp=function(){function t(){this.polyline=!1,this.curveness=0,this.segs=[]}return t}(),zp=function(t){function e(e){return t.call(this,e)||this}return Object(At["b"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Fp},e.prototype.buildPath=function(t,e){var n=e.segs,i=e.curveness;if(e.polyline)for(var r=0;r<n.length;){var o=n[r++];if(o>0){t.moveTo(n[r++],n[r++]);for(var a=1;a<o;a++)t.lineTo(n[r++],n[r++])}}else for(r=0;r<n.length;){var s=n[r++],l=n[r++],c=n[r++],u=n[r++];if(t.moveTo(s,l),i>0){var h=(s+c)/2-(l-u)*i,f=(l+u)/2-(c-s)*i;t.quadraticCurveTo(h,f,c,u)}else t.lineTo(c,u)}},e.prototype.findDataIndex=function(t,e){var n=this.shape,i=n.segs,r=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var a=0,s=0;s<i.length;){var l=i[s++];if(l>0)for(var c=i[s++],u=i[s++],h=1;h<l;h++){var f=i[s++],d=i[s++];if(Np["a"](c,u,f,d,o,t,e))return a}a++}else for(a=0,s=0;s<i.length;){c=i[s++],u=i[s++],f=i[s++],d=i[s++];if(r>0){var p=(c+f)/2-(u-d)*r,g=(u+d)/2-(f-c)*r;if(Bp["a"](c,u,p,g,f,d,o,t,e))return a}else if(Np["a"](c,u,f,d,o,t,e))return a;a++}return-1},e}(u["b"]),Vp=function(){function t(){this.group=new Pt["a"]}return t.prototype.isPersistent=function(){return!this._incremental},t.prototype.updateData=function(t){this.group.removeAll();var e=new zp({rectHover:!0,cursor:"default"});e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t),this.group.add(e),this._incremental=null},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clearIncremental(),t.count()>5e5?(this._incremental||(this._incremental=new xi["a"]({silent:!0})),this.group.add(this._incremental)):this._incremental=null},t.prototype.incrementalUpdate=function(t,e){var n=new zp;n.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(n,e,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=t.start,this.group.add(n))},t.prototype.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},t.prototype._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("style");if(r&&r.stroke&&t.setStyle("stroke",r.stroke),t.setStyle("fill",null),!n){var o=Object(Rt["a"])(t);o.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){o.dataIndex=null;var n=t.findDataIndex(e.offsetX,e.offsetY);n>0&&(o.dataIndex=n+t.__startIndex)}))}},t.prototype._clearIncremental=function(){var t=this._incremental;t&&t.clearDisplaybles()},t}(),Hp=Vp,Gp={seriesType:"lines",plan:Object(Xe["a"])(),reset:function(t){var e=t.coordinateSystem,n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(r,o){var a=[];if(i){var s=void 0,l=r.end-r.start;if(n){for(var c=0,u=r.start;u<r.end;u++)c+=t.getLineCoordsCount(u);s=new Float32Array(l+2*c)}else s=new Float32Array(4*l);var h=0,f=[];for(u=r.start;u<r.end;u++){var d=t.getLineCoords(u,a);n&&(s[h++]=d);for(var p=0;p<d;p++)f=e.dataToPoint(a[p],!1,f),s[h++]=f[0],s[h++]=f[1]}o.setLayout("linesPoints",s)}else for(u=r.start;u<r.end;u++){var g=o.getItemModel(u),m=(d=t.getLineCoords(u,a),[]);if(n)for(var v=0;v<d;v++)m.push(e.dataToPoint(a[v]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var y=g.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}o.setItemLayout(u,m)}}}}},Up=Gp,Wp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),o=t.get("zlevel"),a=t.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();(l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a)&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)}));r.updateData(i);var c=t.get("clip",!0)&&Te(t.coordinateSystem,!1,t);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t);r.incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var o=Up.reset(t,e,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),o=e.pipelineContext,a=o.large;return n&&i===this._hasEffet&&r===this._isPolyline&&a===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=a?new Hp:new eu(r?i?Rp:kp:i?Pp:Zc),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=a),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr(),n="svg"===e.painter.getType();n||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.type="lines",e}(ye["a"]),Xp=Wp,Yp="undefined"===typeof Uint32Array?Array:Uint32Array,qp="undefined"===typeof Float64Array?Array:Float64Array;function Zp(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=Object(c["H"])(e,(function(t){var e=[t[0].coord,t[1].coord],n={coords:e};return t[0].name&&(n.fromName=t[0].name),t[1].name&&(n.toName=t[1].name),Object(c["J"])([n,t[0],t[1]])})))}var Kp=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return Object(At["b"])(e,t),e.prototype.init=function(e){e.data=e.data||[],Zp(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(Zp(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=Object(c["e"])(this._flatCoords,e.flatCoords),this._flatCoordsOffset=Object(c["e"])(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t),n=e.option instanceof Array?e.option:e.getShallow("coords");return n},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var o=this._getCoordsFromItemModel(t);for(r=0;r<o.length;r++)e[r]=e[r]||[],e[r][0]=o[r][0],e[r][1]=o[r][1];return o.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"===typeof t[0]){for(var n=t.length,i=new Yp(n),r=new qp(n),o=0,a=0,s=0,l=0;l<n;){s++;var c=t[l++];i[a++]=o+e,i[a++]=c;for(var u=0;u<c;u++){var h=t[l++],f=t[l++];r[o++]=h,r[o++]=f}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var n=new ui["a"](["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0})),n},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=i.getItemModel(t),o=r.get("name");if(o)return o;var a=r.get("fromName"),s=r.get("toName"),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),Object(lo["c"])("nameValue",{name:l.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(Et["b"]),$p=Kp;function Jp(t){return t instanceof Array||(t=[t,t]),t}var Qp={seriesType:"lines",reset:function(t){var e=Jp(t.get("symbol")),n=Jp(t.get("symbolSize")),i=t.getData();function r(t,e){var n=t.getItemModel(e),i=Jp(n.getShallow("symbol",!0)),r=Jp(n.getShallow("symbolSize",!0));i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1])}return i.setVisual("fromSymbol",e&&e[0]),i.setVisual("toSymbol",e&&e[1]),i.setVisual("fromSymbolSize",n&&n[0]),i.setVisual("toSymbolSize",n&&n[1]),{dataEach:i.hasItemOption?r:null}}},tg=Qp;function eg(t){t.registerChartView(Xp),t.registerSeriesModel($p),t.registerLayout(Up),t.registerVisual(tg)}var ng=256,ig=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=c["f"]();this.canvas=t}return t.prototype.update=function(t,e,n,i,r,o){var a=this._getBrush(),s=this._getGradient(r,"inRange"),l=this._getGradient(r,"outOfRange"),c=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),f=t.length;u.width=e,u.height=n;for(var d=0;d<f;++d){var p=t[d],g=p[0],m=p[1],v=p[2],y=i(v);h.globalAlpha=y,h.drawImage(a,g-c,m-c)}if(!u.width||!u.height)return u;var _=h.getImageData(0,0,u.width,u.height),b=_.data,x=0,w=b.length,S=this.minOpacity,T=this.maxOpacity,O=T-S;while(x<w){y=b[x+3]/256;var C=4*Math.floor(y*(ng-1));if(y>0){var M=o(y)?s:l;y>0&&(y=y*O+S),b[x++]=M[C],b[x++]=M[C+1],b[x++]=M[C+2],b[x++]=M[C+3]*y*256}else x+=4}return h.putImageData(_,0,0),u},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=c["f"]()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,i=n[e]||(n[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],o=0,a=0;a<256;a++)t[e](a/255,!0,r),i[o++]=r[0],i[o++]=r[1],i[o++]=r[2],i[o++]=r[3];return i},t}(),rg=ig;function og(t,e,n){var i=t[1]-t[0];e=c["H"](e,(function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}}));var r=e.length,o=0;return function(t){var i;for(i=o;i<r;i++){var a=e[i].interval;if(a[0]<=t&&t<=a[1]){o=i;break}}if(i===r)for(i=o-1;i>=0;i--){a=e[i].interval;if(a[0]<=t&&t<=a[1]){o=i;break}}return i>=0&&i<r&&n[i]}}function ag(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}function sg(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var lg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(i=e)}))})),this.group.removeAll(),this._incrementalDisplayable=null;var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):sg(r)&&this._renderOnGeo(r,t,i,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,i){var r=e.coordinateSystem;r&&(sg(r)?this.render(e,n,i):this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0))},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,i,r){var o,a,s,l,c=t.coordinateSystem;if(Oe(c,"cartesian2d")){var u=c.getAxis("x"),h=c.getAxis("y");0,o=u.getBandWidth(),a=h.getBandWidth(),s=u.scale.getExtent(),l=h.scale.getExtent()}for(var f=this.group,d=t.getData(),p=t.getModel(["emphasis","itemStyle"]).getItemStyle(),g=t.getModel(["blur","itemStyle"]).getItemStyle(),m=t.getModel(["select","itemStyle"]).getItemStyle(),v=Object(Vt["e"])(t),y=t.get(["emphasis","focus"]),_=t.get(["emphasis","blurScope"]),b=Oe(c,"cartesian2d")?[d.mapDimension("x"),d.mapDimension("y"),d.mapDimension("value")]:[d.mapDimension("time"),d.mapDimension("value")],x=n;x<i;x++){var w=void 0,S=d.getItemVisual(x,"style");if(Oe(c,"cartesian2d")){var T=d.get(b[0],x),O=d.get(b[1],x);if(isNaN(d.get(b[2],x))||T<s[0]||T>s[1]||O<l[0]||O>l[1])continue;var C=c.dataToPoint([T,O]);w=new _e["a"]({shape:{x:Math.floor(Math.round(C[0])-o/2),y:Math.floor(Math.round(C[1])-a/2),width:Math.ceil(o),height:Math.ceil(a)},style:S})}else{if(isNaN(d.get(b[1],x)))continue;w=new _e["a"]({z2:1,shape:c.dataToRect([d.get(b[0],x)]).contentShape,style:S})}var M=d.getItemModel(x);if(d.hasItemOption){var A=M.getModel("emphasis");p=A.getModel("itemStyle").getItemStyle(),g=M.getModel(["blur","itemStyle"]).getItemStyle(),m=M.getModel(["select","itemStyle"]).getItemStyle(),y=A.get("focus"),_=A.get("blurScope"),v=Object(Vt["e"])(M)}var D=t.getRawValue(x),E="-";D&&null!=D[2]&&(E=D[2]+""),Object(Vt["g"])(w,v,{labelFetcher:t,labelDataIndex:x,defaultOpacity:S.opacity,defaultText:E}),w.ensureState("emphasis").style=p,w.ensureState("blur").style=g,w.ensureState("select").style=m,Object(Nt["o"])(w,y,_),w.incremental=r,r&&(w.states.emphasis.hoverLayer=!0),f.add(w),d.setItemGraphicEl(x,w)}},e.prototype._renderOnGeo=function(t,e,n,i){var r=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,a=e.getData(),s=this._hmLayer||this._hmLayer||new rg;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),c=t.getRoamTransform();l.applyTransform(c);var u=Math.max(l.x,0),f=Math.max(l.y,0),d=Math.min(l.width+l.x,i.getWidth()),p=Math.min(l.height+l.y,i.getHeight()),g=d-u,m=p-f,v=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],y=a.mapArray(v,(function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=u,r[1]-=f,r.push(i),r})),_=n.getExtent(),b="visualMap.continuous"===n.type?ag(_,n.option.range):og(_,n.getPieceList(),n.option.selected);s.update(y,g,m,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:o.color.getColorMapper()},b);var x=new h["a"]({style:{width:g,height:m,x:u,y:f,image:s.canvas},silent:!0});this.group.add(x)},e.type="heatmap",e}(ye["a"]),cg=lg,ug=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=pu["a"].get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(Et["b"]),hg=ug;function fg(t){t.registerChartView(cg),t.registerSeriesModel(hg)}var dg=["itemStyle","borderWidth"],pg=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],gg=new mo["a"],mg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=this.group,r=t.getData(),o=this._data,a=t.coordinateSystem,s=a.getBaseAxis(),l=s.isHorizontal(),c=a.master.getRect(),u={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[c.x,c.x+c.width],[c.y,c.y+c.height]],isHorizontal:l,valueDim:pg[+l],categoryDim:pg[1-+l]};return r.diff(o).add((function(t){if(r.hasValue(t)){var e=Ag(r,t),n=vg(r,t,e,u),o=Ig(r,u,n);r.setItemGraphicEl(t,o),i.add(o),Ng(o,u,n)}})).update((function(t,e){var n=o.getItemGraphicEl(e);if(r.hasValue(t)){var a=Ag(r,t),s=vg(r,t,a,u),l=kg(r,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),r.setItemGraphicEl(t,null),n=null),n?Pg(n,u,s):n=Ig(r,u,s,!0),r.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),Ng(n,u,s)}else i.remove(n)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&Lg(o,t,e.__pictorialSymbolMeta.animationModel,e)})).execute(),this._data=r,this.group},e.prototype.remove=function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl((function(e){Lg(i,Object(Rt["a"])(e).dataIndex,t,e)})):n.removeAll()},e.type="pictorialBar",e}(ye["a"]);function vg(t,e,n,i){var r=t.getItemLayout(e),o=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=n.get("symbolRotate"),c=(l||0)*Math.PI/180||0,u=n.get("symbolPatternSize")||2,h=n.isAnimationEnabled(),f={dataIndex:e,layout:r,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:a,symbolRepeat:o,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:u,rotation:c,animationModel:h?n:null,hoverScale:h&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};yg(n,o,r,i,f),bg(t,e,r,o,a,f.boundingLength,f.pxSign,u,i,f),xg(n,f.symbolScale,c,i,f);var d=f.symbolSize,p=Object(It["b"])(n.get("symbolOffset"),d);return wg(n,d,r,o,a,p,s,f.valueLineWidth,f.boundingLength,f.repeatCutLength,i,f),f}function yg(t,e,n,i,r){var o,a=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),u=l.toGlobalCoord(l.dataToCoord(0)),h=1-+(n[a.wh]<=0);if(c["t"](s)){var f=[_g(l,s[0])-u,_g(l,s[1])-u];f[1]<f[0]&&f.reverse(),o=f[h]}else o=null!=s?_g(l,s)-u:e?i.coordSysExtent[a.index][h]-u:n[a.wh];r.boundingLength=o,e&&(r.repeatCutLength=n[a.wh]),r.pxSign=o>0?1:o<0?-1:0}function _g(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function bg(t,e,n,i,r,o,a,s,l,u){var h,f=l.valueDim,d=l.categoryDim,p=Math.abs(n[d.wh]),g=t.getItemVisual(e,"symbolSize");h=c["t"](g)?g.slice():null==g?["100%","100%"]:[g,g],h[d.index]=Object(xe["p"])(h[d.index],p),h[f.index]=Object(xe["p"])(h[f.index],i?p:Math.abs(o)),u.symbolSize=h;var m=u.symbolScale=[h[0]/s,h[1]/s];m[f.index]*=(l.isHorizontal?-1:1)*a}function xg(t,e,n,i,r){var o=t.get(dg)||0;o&&(gg.attr({scaleX:e[0],scaleY:e[1],rotation:n}),gg.updateTransform(),o/=gg.getLineScale(),o*=e[i.valueDim.index]),r.valueLineWidth=o}function wg(t,e,n,i,r,o,a,s,l,u,h,f){var d=h.categoryDim,p=h.valueDim,g=f.pxSign,m=Math.max(e[p.index]+s,0),v=m;if(i){var y=Math.abs(l),_=c["O"](t.get("symbolMargin"),"15%")+"",b=!1;_.lastIndexOf("!")===_.length-1&&(b=!0,_=_.slice(0,_.length-1));var x=Object(xe["p"])(_,e[p.index]),w=Math.max(m+2*x,0),S=b?0:2*x,T=Object(xe["j"])(i),O=T?i:Bg((y+S)/w),C=y-O*m;x=C/2/(b?O:Math.max(O-1,1)),w=m+2*x,S=b?0:2*x,T||"fixed"===i||(O=u?Bg((Math.abs(u)+S)/w):0),v=O*w-S,f.repeatTimes=O,f.symbolMargin=x}var M=g*(v/2),A=f.pathPosition=[];A[d.index]=n[d.wh]/2,A[p.index]="start"===a?M:"end"===a?l-M:l/2,o&&(A[0]+=o[0],A[1]+=o[1]);var D=f.bundlePosition=[];D[d.index]=n[d.xy],D[p.index]=n[p.xy];var E=f.barRectShape=c["m"]({},n);E[p.wh]=g*Math.max(Math.abs(n[p.wh]),Math.abs(A[p.index]+M)),E[d.wh]=n[d.wh];var I=f.clipShape={};I[d.xy]=-n[d.xy],I[d.wh]=h.ecSize[d.wh],I[p.xy]=0,I[p.wh]=n[p.wh]}function Sg(t){var e=t.symbolPatternSize,n=Object(It["a"])(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function Tg(t,e,n,i){var r=t.__pictorialBundle,o=n.symbolSize,a=n.valueLineWidth,s=n.pathPosition,l=e.valueDim,c=n.repeatTimes||0,u=0,h=o[e.valueDim.index]+a+2*n.symbolMargin;for(jg(t,(function(t){t.__pictorialAnimationIndex=u,t.__pictorialRepeatTimes=c,u<c?Rg(t,null,p(u),n,i):Rg(t,null,{scaleX:0,scaleY:0},n,i,(function(){r.remove(t)})),u++}));u<c;u++){var f=Sg(n);f.__pictorialAnimationIndex=u,f.__pictorialRepeatTimes=c,r.add(f);var d=p(u);Rg(f,{x:d.x,y:d.y,scaleX:0,scaleY:0},{scaleX:d.scaleX,scaleY:d.scaleY,rotation:d.rotation},n,i)}function p(t){var e=s.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?i>0:i<0)&&(r=c-1-t),e[l.index]=h*(r-c/2+.5)+s[l.index],{x:e[0],y:e[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function Og(t,e,n,i){var r=t.__pictorialBundle,o=t.__pictorialMainPath;o?Rg(o,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,i):(o=t.__pictorialMainPath=Sg(n),r.add(o),Rg(o,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,i))}function Cg(t,e,n){var i=c["m"]({},e.barRectShape),r=t.__pictorialBarRect;r?Rg(r,null,{shape:i},e,n):(r=t.__pictorialBarRect=new _e["a"]({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),r.disableMorphing=!0,t.add(r))}function Mg(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,o=c["m"]({},n.clipShape),a=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)jt["h"](r,{shape:o},s,l);else{o[a.wh]=0,r=new _e["a"]({shape:o}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var u={};u[a.wh]=n.clipShape[a.wh],fr[i?"updateProps":"initProps"](r,{shape:u},s,l)}}}function Ag(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=Dg,n.isAnimationEnabled=Eg,n}function Dg(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function Eg(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ig(t,e,n,i){var r=new Pt["a"],o=new Pt["a"];return r.add(o),r.__pictorialBundle=o,o.x=n.bundlePosition[0],o.y=n.bundlePosition[1],n.symbolRepeat?Tg(r,e,n):Og(r,e,n),Cg(r,n,i),Mg(r,e,n,i),r.__pictorialShapeStr=kg(t,n),r.__pictorialSymbolMeta=n,r}function Pg(t,e,n){var i=n.animationModel,r=n.dataIndex,o=t.__pictorialBundle;jt["h"](o,{x:n.bundlePosition[0],y:n.bundlePosition[1]},i,r),n.symbolRepeat?Tg(t,e,n,!0):Og(t,e,n,!0),Cg(t,n,!0),Mg(t,e,n,!0)}function Lg(t,e,n,i){var r=i.__pictorialBarRect;r&&r.removeTextContent();var o=[];jg(i,(function(t){o.push(t)})),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),c["k"](o,(function(t){jt["e"](t,{scaleX:0,scaleY:0},n,e,(function(){i.parent&&i.parent.remove(i)}))})),t.setItemGraphicEl(e,null)}function kg(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function jg(t,e,n){c["k"](t.__pictorialBundle.children(),(function(i){i!==t.__pictorialBarRect&&e.call(n,i)}))}function Rg(t,e,n,i,r,o){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&fr[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,o)}function Ng(t,e,n){var i=n.dataIndex,r=n.itemModel,o=r.getModel("emphasis"),a=o.getModel("itemStyle").getItemStyle(),s=r.getModel(["blur","itemStyle"]).getItemStyle(),l=r.getModel(["select","itemStyle"]).getItemStyle(),u=r.getShallow("cursor"),f=o.get("focus"),d=o.get("blurScope"),p=o.get("scale");jg(t,(function(t){if(t instanceof h["a"]){var e=t.style;t.useStyle(c["m"]({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},n.style))}else t.useStyle(n.style);var i=t.ensureState("emphasis");i.style=a,p&&(i.scaleX=1.1*t.scaleX,i.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=l,u&&(t.cursor=u),t.z2=n.z2}));var g=e.valueDim.posDesc[+(n.boundingLength>0)],m=t.__pictorialBarRect;Object(Vt["g"])(m,Object(Vt["e"])(r),{labelFetcher:e.seriesModel,labelDataIndex:i,defaultText:Ft(e.seriesModel.getData(),i),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:g}),Object(Nt["o"])(t,f,d)}function Bg(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var Fg=mg,zg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=Object(en["d"])(tn.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(tn),Vg=zg;function Hg(t){t.registerChartView(Fg),t.registerSeriesModel(Vg),t.registerLayout(Object(c["i"])(Je["c"],"pictorialBar"))}var Gg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this,o=this.group,a=t.getLayerSeries(),s=i.getLayout("layoutInfo"),l=s.rect,u=s.boundaryGap;function h(t){return t.name}o.x=0,o.y=l.y+u[0];var f=new Bs["a"](this._layersSeries||[],a,h,h),d=[];function p(e,n,s){var l=r._layers;if("remove"!==e){for(var c,u,h=[],f=[],p=a[n].indices,g=0;g<p.length;g++){var m=i.getItemLayout(p[g]),v=m.x,y=m.y0,_=m.y;h.push(v,y),f.push(v,y+_),c=i.getItemVisual(p[g],"style")}var b=i.getItemLayout(p[0]),x=t.getModel("label"),w=x.get("margin"),S=t.getModel("emphasis");if("add"===e){var T=d[n]=new Pt["a"];u=new ve({shape:{points:h,stackedOnPoints:f,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),T.add(u),o.add(T),t.isAnimationEnabled()&&u.setClipPath(Ug(u.getBoundingRect(),t,(function(){u.removeClipPath()})))}else{T=l[s];u=T.childAt(0),o.add(T),d[n]=T,jt["h"](u,{shape:{points:h,stackedOnPoints:f}},t),Object(jt["g"])(u)}Object(Vt["g"])(u,Object(Vt["e"])(t),{labelDataIndex:p[g-1],defaultText:i.getName(p[g-1]),inheritColor:c.fill},{normal:{verticalAlign:"middle"}}),u.setTextConfig({position:null,local:!0});var O=u.getTextContent();O&&(O.x=b.x-w,O.y=b.y0+b.y/2),u.useStyle(c),i.setItemGraphicEl(n,u),Object(Nt["I"])(u,t),Object(Nt["o"])(u,S.get("focus"),S.get("blurScope"))}else o.remove(l[n])}f.add(Object(c["c"])(p,this,"add")).update(Object(c["c"])(p,this,"update")).remove(Object(c["c"])(p,this,"remove")).execute(),this._layersSeries=a,this._layers=d},e.type="themeRiver",e}(ye["a"]);function Ug(t,e,n){var i=new _e["a"]({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return jt["c"](i,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,n),i}var Wg=Gg,Xg=2,Yg=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new pi(c["c"](this.getData,this),c["c"](this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,n={},i=Object(se["j"])(t,(function(t){return n.hasOwnProperty(t[0]+"")||(n[t[0]+""]=-1),t[2]})),r=[];i.buckets.each((function(t,e){r.push({name:e,dataList:t})}));for(var o=r.length,a=0;a<o;++a){for(var s=r[a].name,l=0;l<r[a].dataList.length;++l){var c=r[a].dataList[l][0]+"";n[c]=a}for(var c in n)n.hasOwnProperty(c)&&n[c]!==a&&(n[c]=a,t[e]=[c,0,s],e++)}return t},e.prototype.getInitialData=function(t,e){for(var n=this.getReferringComponents("singleAxis",se["b"]).models[0],i=n.get("type"),r=c["n"](t.data,(function(t){return void 0!==t[2]})),o=this.fixData(r||[]),a=[],s=this.nameMap=c["g"](),l=0,u=0;u<o.length;++u)a.push(o[u][Xg]),s.get(o[u][Xg])||(s.set(o[u][Xg],l),l++);var h=Object(ci["b"])(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Object(Md["a"])(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,f=new ui["a"](h,this);return f.initData(o),f},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var r=t.mapDimension("single"),o=Object(se["j"])(n,(function(e){return t.get("name",e)})),a=[];return o.buckets.each((function(e,n){e.sort((function(e,n){return t.get(r,e)-t.get(r,n)})),a.push({name:n,indices:e})})),a},e.prototype.getAxisTooltipData=function(t,e,n){c["t"](t)||(t=t?[t]:[]);for(var i,r=this.getData(),o=this.getLayerSeries(),a=[],s=o.length,l=0;l<s;++l){for(var u=Number.MAX_VALUE,h=-1,f=o[l].indices.length,d=0;d<f;++d){var p=r.get(t[0],o[l].indices[d]),g=Math.abs(p-e);g<=u&&(i=p,u=g,h=o[l].indices[d])}a.push(h)}return{dataIndices:a,nestestValue:i}},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=i.getName(t),o=i.get(i.mapDimension("value"),t);return Object(lo["c"])("nameValue",{name:r,value:o})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={zlevel:0,z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(Et["b"]),qg=Yg;function Zg(t,e){t.eachSeriesByType("themeRiver",(function(t){var e=t.getData(),n=t.coordinateSystem,i={},r=n.getRect();i.rect=r;var o=t.get("boundaryGap"),a=n.getAxis();if(i.boundaryGap=o,"horizontal"===a.orient){o[0]=xe["p"](o[0],r.height),o[1]=xe["p"](o[1],r.height);var s=r.height-o[0]-o[1];Kg(e,t,s)}else{o[0]=xe["p"](o[0],r.width),o[1]=xe["p"](o[1],r.width);var l=r.width-o[0]-o[1];Kg(e,t,l)}e.setLayout("layoutInfo",i)}))}function Kg(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,o=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),l=c["H"](o,(function(e){return c["H"](e.indices,(function(e){var n=r.dataToPoint(t.get(a,e));return n[1]=t.get(s,e),n}))})),u=$g(l),h=u.y0,f=n/u.max,d=o.length,p=o[0].indices.length,g=0;g<p;++g){i=h[g]*f,t.setItemLayout(o[0].indices[g],{layerIndex:0,x:l[0][g][0],y0:i,y:l[0][g][1]*f});for(var m=1;m<d;++m)i+=l[m-1][g][1]*f,t.setItemLayout(o[m].indices[g],{layerIndex:m,x:l[m][g][0],y0:i,y:l[m][g][1]*f})}}function $g(t){for(var e=t.length,n=t[0].length,i=[],r=[],o=0,a=0;a<n;++a){for(var s=0,l=0;l<e;++l)s+=t[l][a][1];s>o&&(o=s),i.push(s)}for(var c=0;c<n;++c)r[c]=(o-i[c])/2;o=0;for(var u=0;u<n;++u){var h=i[u]+r[u];h>o&&(o=h)}return{y0:r,max:o}}function Jg(t){t.registerChartView(Wg),t.registerSeriesModel(qg),t.registerLayout(Zg),t.registerProcessor(Zn("themeRiver"))}var Qg=2,tm=4,em=function(t){function e(e,n,i,r){var o=t.call(this)||this;o.z2=Qg,o.textConfig={inside:!0},Object(Rt["a"])(o).seriesIndex=n.seriesIndex;var a=new ae["a"]({z2:tm,silent:e.getModel().get(["label","silent"])});return o.setTextContent(a),o.updateData(!0,e,n,i,r),o}return Object(At["b"])(e,t),e.prototype.updateData=function(t,e,n,i,r){this.node=e,e.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var o=this;Object(Rt["a"])(o).dataIndex=e.dataIndex;var a=e.getModel(),s=a.getModel("emphasis"),l=e.getLayout(),u=c["m"]({},l);u.label=null;var h=e.getVisual("style");h.lineJoin="bevel";var f=e.getVisual("decal");f&&(h.decal=Object(qo["a"])(f,r));var d=oi(a.getModel("itemStyle"),u,!0);c["m"](u,d),c["k"](Nt["g"],(function(t){var e=o.ensureState(t),n=a.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var i=oi(n,u);i&&(e.shape=i)})),t?(o.setShape(u),o.shape.r=l.r0,jt["h"](o,{shape:{r:l.r}},n,e.dataIndex)):(jt["h"](o,{shape:u},n),Object(jt["g"])(o)),o.useStyle(h),this._updateLabel(n);var p=a.getShallow("cursor");p&&o.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var g=s.get("focus"),m="ancestor"===g?e.getAncestorsIndices():"descendant"===g?e.getDescendantIndices():g;Object(Nt["o"])(this,m,s.get("blurScope"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),i=n.getModel("label"),r=this.node.getLayout(),o=r.endAngle-r.startAngle,a=(r.startAngle+r.endAngle)/2,s=Math.cos(a),l=Math.sin(a),u=this,h=u.getTextContent(),f=this.node.dataIndex,d=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(null!=d&&Math.abs(o)<d);function g(t,e){var n=t.get(e);return null==n?i.get(e):n}h.ignore=!p,c["k"](Nt["a"],(function(i){var o="normal"===i?n.getModel("label"):n.getModel([i,"label"]),c="normal"===i,d=c?h:h.ensureState(i),p=t.getFormattedLabel(f,i);c&&(p=p||e.node.name),d.style=Object(Vt["c"])(o,{},null,"normal"!==i,!0),p&&(d.style.text=p);var m=o.get("show");null==m||c||(d.ignore=!m);var v,y=g(o,"position"),_=c?u:u.states[i],b=_.style.fill;_.textConfig={outsideFill:"inherit"===o.get("color")?b:null,inside:"outside"!==y};var x=g(o,"distance")||0,w=g(o,"align");"outside"===y?(v=r.r+x,w=a>Math.PI/2?"right":"left"):w&&"center"!==w?"left"===w?(v=r.r0+x,a>Math.PI/2&&(w="right")):"right"===w&&(v=r.r-x,a>Math.PI/2&&(w="left")):(v=(r.r+r.r0)/2,w="center"),d.style.align=w,d.style.verticalAlign=g(o,"verticalAlign")||"middle",d.x=v*s+r.cx,d.y=v*l+r.cy;var S=g(o,"rotate"),T=0;"radial"===S?(T=-a,T<-Math.PI/2&&(T+=Math.PI)):"tangential"===S?(T=Math.PI/2-a,T>Math.PI/2?T-=Math.PI:T<-Math.PI/2&&(T+=Math.PI)):"number"===typeof S&&(T=S*Math.PI/180),d.rotation=T})),h.dirtyStyle()},e}(be["a"]),nm=em,im="sunburstRootToNode",rm="sunburstHighlight",om="sunburstUnhighlight";function am(t){t.registerAction({type:im,update:"updateView"},(function(t,e){function n(e,n){var i=ms(t,[im],e);if(i){var r=e.getViewRoot();r&&(t.direction=ys(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}e.eachComponent({mainType:"series",subType:"sunburst",query:t},n)})),t.registerAction({type:rm,update:"none"},(function(t,e,n){function i(e){var n=ms(t,[rm],e);n&&(t.dataIndex=n.node.dataIndex)}t=Object(c["m"])({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},i),n.dispatchAction(Object(c["m"])(t,{type:"highlight"}))})),t.registerAction({type:om,update:"updateView"},(function(t,e,n){t=Object(c["m"])({},t),n.dispatchAction(Object(c["m"])(t,{type:"downplay"}))}))}var sm=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){var r=this;this.seriesModel=t,this.api=n,this.ecModel=e;var o=t.getData(),a=o.tree.root,s=t.getViewRoot(),l=this.group,u=t.get("renderLabelForZeroData"),h=[];s.eachNode((function(t){h.push(t)}));var f=this._oldChildren||[];function d(t,e){function n(t){return t.getId()}function i(n,i){var r=null==n?null:t[n],o=null==i?null:e[i];p(r,o)}0===t.length&&0===e.length||new Bs["a"](e,t,n,n).add(i).update(i).remove(c["i"](i,null)).execute()}function p(i,r){if(u||!i||i.getValue()||(i=null),i!==a&&r!==a)if(r&&r.piece)i?(r.piece.updateData(!1,i,t,e,n),o.setItemGraphicEl(i.dataIndex,r.piece)):g(r);else if(i){var s=new nm(i,t,e,n);l.add(s),o.setItemGraphicEl(i.dataIndex,s)}}function g(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}function m(i,o){o.depth>0?(r.virtualPiece?r.virtualPiece.updateData(!1,i,t,e,n):(r.virtualPiece=new nm(i,t,e,n),l.add(r.virtualPiece)),o.piece.off("click"),r.virtualPiece.on("click",(function(t){r._rootToNode(o.parentNode)}))):r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null)}d(h,f),m(a,s),this._initEvents(),this._oldChildren=h},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",(function(e){var n=!1,i=t.seriesModel.getViewRoot();i.eachNode((function(i){if(!n&&i.piece&&i.piece===e.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(i);else if("link"===r){var o=i.getModel(),a=o.get("link");if(a){var s=o.get("target",!0)||"_blank";Object(Ce["l"])(a,s)}}n=!0}}))}))},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:im,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData(),i=n.getItemLayout(0);if(i){var r=t[0]-i.cx,o=t[1]-i.cy,a=Math.sqrt(r*r+o*o);return a<=i.r&&a>=i.r0}},e.type="sunburst",e}(ye["a"]),lm=sm,cm=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return Object(At["b"])(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};um(n);var i=this._levelModels=c["H"](t.levels||[],(function(t){return new pr["a"](t,this,e)}),this),r=gs.createTree(n,this,o);function o(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e),o=i[n.depth];return o&&(t.parentModel=o),t}))}return r.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=_s(i,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){Ls(this)},e.type="series.sunburst",e.defaultOption={zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(Et["b"]);function um(t){var e=0;c["k"](t.children,(function(t){um(t);var n=t.value;c["t"](n)&&(n=n[0]),e+=n}));var n=t.value;c["t"](n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),c["t"](t.value)?t.value[0]=n:t.value=n}var hm=cm,fm=Math.PI/180;function dm(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.get("center"),i=t.get("radius");c["t"](i)||(i=[0,i]),c["t"](e)||(e=[e,e]);var r=n.getWidth(),o=n.getHeight(),a=Math.min(r,o),s=Object(xe["p"])(e[0],r),l=Object(xe["p"])(e[1],o),u=Object(xe["p"])(i[0],a/2),h=Object(xe["p"])(i[1],a/2),f=-t.get("startAngle")*fm,d=t.get("minAngle")*fm,p=t.getData().tree.root,g=t.getViewRoot(),m=g.depth,v=t.get("sort");null!=v&&pm(g,v);var y=0;c["k"](g.children,(function(t){!isNaN(t.getValue())&&y++}));var _=g.getValue(),b=Math.PI/(_||y)*2,x=g.depth>0,w=g.height-(x?-1:1),S=(h-u)/(w||1),T=t.get("clockwise"),O=t.get("stillShowZeroSum"),C=T?1:-1,M=function(e,n){if(e){var i=n;if(e!==p){var r=e.getValue(),o=0===_&&O?b:r*b;o<d&&(o=d),i=n+C*o;var h=e.depth-m-(x?-1:1),f=u+S*h,g=u+S*(h+1),v=t.getLevelModel(e);if(v){var y=v.get("r0",!0),w=v.get("r",!0),A=v.get("radius",!0);null!=A&&(y=A[0],w=A[1]),null!=y&&(f=Object(xe["p"])(y,a/2)),null!=w&&(g=Object(xe["p"])(w,a/2))}e.setLayout({angle:o,startAngle:n,endAngle:i,clockwise:T,cx:s,cy:l,r0:f,r:g})}if(e.children&&e.children.length){var D=0;c["k"](e.children,(function(t){D+=M(t,n+D)}))}return i-n}};if(x){var A=u,D=u+S,E=2*Math.PI;p.setLayout({angle:E,startAngle:f,endAngle:f+E,clockwise:T,cx:s,cy:l,r0:A,r:D})}M(g,f)}))}function pm(t,e){var n=t.children||[];t.children=gm(n,e),n.length&&c["k"](t.children,(function(t){pm(t,e)}))}function gm(t,e){if("function"===typeof e){var n=c["H"](t,(function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}}));return n.sort((function(t,n){return e(t.params,n.params)})),c["H"](n,(function(e){return t[e.index]}))}var i="asc"===e;return t.sort((function(t,e){var n=(t.getValue()-e.getValue())*(i?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(i?-1:1):n}))}function mm(t){var e={};function n(t,n,i){var r=t;while(r&&r.depth>1)r=r.parentNode;var o=n.getColorFromPalette(r.name||r.dataIndex+"",e);return t.depth>1&&"string"===typeof o&&(o=Object(a["lift"])(o,(t.depth-1)/(i-1)*.5)),o}t.eachSeriesByType("sunburst",(function(t){var e=t.getData(),i=e.tree;i.eachNode((function(r){var o=r.getModel(),a=o.getModel("itemStyle").getItemStyle();a.fill||(a.fill=n(r,t,i.root.height));var s=e.ensureUniqueItemVisual(r.dataIndex,"style");Object(c["m"])(s,a)}))}))}function vm(t){t.registerChartView(lm),t.registerSeriesModel(hm),t.registerLayout(Object(c["i"])(dm,"sunburst")),t.registerProcessor(Object(c["i"])(Zn,"sunburst")),t.registerVisual(mm),am(t)}var ym={x:1,y:1,scaleX:1,scaleY:1,originX:1,originY:1,rotation:1},_m={color:"fill",borderColor:"stroke"},bm={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},xm=Object(se["o"])(),wm=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return Object(Dt["a"])(null,this)},e.prototype.getDataParams=function(e,n,i){var r=t.prototype.getDataParams.call(this,e,n);return i&&(r.info=xm(i).info),r},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,clip:!1},e}(Et["b"]),Sm=wm;function Tm(t,e){return e=e||[0,0],c["H"](["x","y"],(function(n,i){var r=this.getAxis(n),o=e[i],a=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))}),this)}function Om(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:c["c"](Tm,t)}}}function Cm(t,e){return e=e||[0,0],c["H"]([0,1],(function(n){var i=e[n],r=t[n]/2,o=[],a=[];return o[n]=i-r,a[n]=i+r,o[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(a)[n])}),this)}function Mm(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:c["c"](Cm,t)}}}function Am(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function Dm(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:Object(c["c"])(Am,t)}}}function Em(t,e){return e=e||[0,0],c["H"](["Radius","Angle"],(function(n,i){var r="get"+n+"Axis",o=this[r](),a=e[i],s=t[i]/2,l="category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return"Angle"===n&&(l=l*Math.PI/180),l}),this)}function Im(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:function(i){var r=e.dataToRadius(i[0]),o=n.dataToAngle(i[1]),a=t.coordToPoint([r,o]);return a.push(r,o*Math.PI/180),a},size:c["c"](Em,t)}}}function Pm(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}function Lm(t,e,n,i){return t&&(t.legacy||!1!==t.legacy&&!n&&!i&&"tspan"!==e&&("text"===e||Object(c["q"])(t,"text")))}function km(t,e,n){var i,r,o,a=t;if("text"===e)o=a;else{o={},Object(c["q"])(a,"text")&&(o.text=a.text),Object(c["q"])(a,"rich")&&(o.rich=a.rich),Object(c["q"])(a,"textFill")&&(o.fill=a.textFill),Object(c["q"])(a,"textStroke")&&(o.stroke=a.textStroke),Object(c["q"])(a,"fontFamily")&&(o.fontFamily=a.fontFamily),Object(c["q"])(a,"fontSize")&&(o.fontSize=a.fontSize),Object(c["q"])(a,"fontStyle")&&(o.fontStyle=a.fontStyle),Object(c["q"])(a,"fontWeight")&&(o.fontWeight=a.fontWeight),r={type:"text",style:o,silent:!0},i={};var s=Object(c["q"])(a,"textPosition");n?i.position=s?a.textPosition:"inside":s&&(i.position=a.textPosition),Object(c["q"])(a,"textPosition")&&(i.position=a.textPosition),Object(c["q"])(a,"textOffset")&&(i.offset=a.textOffset),Object(c["q"])(a,"textRotation")&&(i.rotation=a.textRotation),Object(c["q"])(a,"textDistance")&&(i.distance=a.textDistance)}return jm(o,t),Object(c["k"])(o.rich,(function(t){jm(t,t)})),{textConfig:i,textContent:r}}function jm(t,e){e&&(e.font=e.textFont||e.font,Object(c["q"])(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),Object(c["q"])(e,"textAlign")&&(t.align=e.textAlign),Object(c["q"])(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),Object(c["q"])(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),Object(c["q"])(e,"textWidth")&&(t.width=e.textWidth),Object(c["q"])(e,"textHeight")&&(t.height=e.textHeight),Object(c["q"])(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),Object(c["q"])(e,"textPadding")&&(t.padding=e.textPadding),Object(c["q"])(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),Object(c["q"])(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),Object(c["q"])(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),Object(c["q"])(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),Object(c["q"])(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),Object(c["q"])(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),Object(c["q"])(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function Rm(t,e,n){var i=t;i.textPosition=i.textPosition||n.position||"inside",null!=n.offset&&(i.textOffset=n.offset),null!=n.rotation&&(i.textRotation=n.rotation),null!=n.distance&&(i.textDistance=n.distance);var r=i.textPosition.indexOf("inside")>=0,o=t.fill||"#000";Nm(i,e);var a=null==i.textFill;return r?a&&(i.textFill=n.insideFill||"#fff",!i.textStroke&&n.insideStroke&&(i.textStroke=n.insideStroke),!i.textStroke&&(i.textStroke=o),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(a&&(i.textFill=t.fill||n.outsideFill||"#000"),!i.textStroke&&n.outsideStroke&&(i.textStroke=n.outsideStroke)),i.text=e.text,i.rich=e.rich,Object(c["k"])(e.rich,(function(t){Nm(t,t)})),i}function Nm(t,e){e&&(Object(c["q"])(e,"fill")&&(t.textFill=e.fill),Object(c["q"])(e,"stroke")&&(t.textStroke=e.fill),Object(c["q"])(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),Object(c["q"])(e,"font")&&(t.font=e.font),Object(c["q"])(e,"fontStyle")&&(t.fontStyle=e.fontStyle),Object(c["q"])(e,"fontWeight")&&(t.fontWeight=e.fontWeight),Object(c["q"])(e,"fontSize")&&(t.fontSize=e.fontSize),Object(c["q"])(e,"fontFamily")&&(t.fontFamily=e.fontFamily),Object(c["q"])(e,"align")&&(t.textAlign=e.align),Object(c["q"])(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),Object(c["q"])(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),Object(c["q"])(e,"width")&&(t.textWidth=e.width),Object(c["q"])(e,"height")&&(t.textHeight=e.height),Object(c["q"])(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),Object(c["q"])(e,"padding")&&(t.textPadding=e.padding),Object(c["q"])(e,"borderColor")&&(t.textBorderColor=e.borderColor),Object(c["q"])(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),Object(c["q"])(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),Object(c["q"])(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),Object(c["q"])(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),Object(c["q"])(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),Object(c["q"])(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),Object(c["q"])(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),Object(c["q"])(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),Object(c["q"])(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),Object(c["q"])(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var Bm=n("06ad"),Fm={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]};function zm(t,e,n){var i=t[n],r=Fm[n];i&&(e[r[0]]=i[0],e[r[1]]=i[1])}function Vm(t,e,n){null!=t[n]&&(e[n]=t[n])}function Hm(t,e,n){n&&(t[e]=n[e])}function Gm(t,e,n,i,r){var o=n[t];if(o){var a,s=e[t],l=o.enterFrom;if(r&&l){!a&&(a=i[t]={});for(var u=Object(c["F"])(l),h=0;h<u.length;h++){var f=u[h];a[f]=l[f]}}if(!r&&s)if(o.transition){!a&&(a=i[t]={});var d=Object(se["r"])(o.transition);for(h=0;h<d.length;h++){f=d[h];var p=s[f];0,a[f]=p}}else if(Object(c["r"])(n.transition,t)>=0){!a&&(a=i[t]={});var g=Object(c["F"])(s);for(h=0;h<g.length;h++){f=g[h],p=s[f];qm(o[f],p)&&(a[f]=p)}}var m=o.leaveTo;if(m){var v=Zm(e),y=v[t]||(v[t]={}),_=Object(c["F"])(m);for(h=0;h<_.length;h++){f=_[h];y[f]=m[f]}}}}function Um(t,e,n){var i=e[t];if(i)for(var r=n[t]={},o=Object(c["F"])(i),a=0;a<o.length;a++){var s=o[a];r[s]=Object(Bm["a"])(i[s])}}function Wm(t,e,n,i){var r=e.enterFrom;if(i&&r)for(var o=Object(c["F"])(r),a=0;a<o.length;a++){var s=o[a];0,n[s]=r[s]}if(!i)if(e.transition){var l=Object(se["r"])(e.transition);for(a=0;a<l.length;a++){s=l[a];if("style"!==s&&"shape"!==s&&"extra"!==s){var u=t[s];0,n[s]=u}}}else Hm(n,"x",t),Hm(n,"y",t);var h=e.leaveTo;if(h){var f=Zm(t),d=Object(c["F"])(h);for(a=0;a<d.length;a++){s=d[a];0,f[s]=h[s]}}}function Xm(t,e,n){zm(e,n,"position"),zm(e,n,"scale"),zm(e,n,"origin"),Vm(e,n,"x"),Vm(e,n,"y"),Vm(e,n,"scaleX"),Vm(e,n,"scaleY"),Vm(e,n,"originX"),Vm(e,n,"originY"),Vm(e,n,"rotation")}function Ym(t,e,n,i,r){if(n){var o,a=t.style,s=n.enterFrom;if(r&&s){var l=Object(c["F"])(s);!o&&(o=i.style={});for(var u=0;u<l.length;u++){var h=l[u];o[h]=s[h]}}if(!r&&a)if(n.transition){var f=Object(se["r"])(n.transition);!o&&(o=i.style={});for(u=0;u<f.length;u++){h=f[u];var d=a[h];o[h]=d}}else if(t.getAnimationStyleProps&&Object(c["r"])(e.transition,"style")>=0){var p=t.getAnimationStyleProps(),g=p?p.style:null;if(g){!o&&(o=i.style={});var m=Object(c["F"])(n);for(u=0;u<m.length;u++){h=m[u];if(g[h]){d=a[h];o[h]=d}}}}var v=n.leaveTo;if(v){var y=Object(c["F"])(v),_=Zm(t),b=_.style||(_.style={});for(u=0;u<y.length;u++){h=y[u];b[h]=v[h]}}}}function qm(t,e){return Object(c["u"])(t)?t!==e:null!=t&&isFinite(t)}function Zm(t){var e=xm(t);return e.leaveToProps||(e.leaveToProps={})}Object(c["F"])(ym).join(", ");var Km="emphasis",$m="normal",Jm="blur",Qm="select",tv=[$m,Km,Jm,Qm],ev={normal:["itemStyle"],emphasis:[Km,"itemStyle"],blur:[Jm,"itemStyle"],select:[Qm,"itemStyle"]},nv={normal:["label"],emphasis:[Km,"label"],blur:[Jm,"label"],select:[Qm,"label"]},iv="e\0\0",rv={normal:{},emphasis:{},blur:{},select:{}},ov={cartesian2d:Om,geo:Mm,singleAxis:Dm,polar:Im,calendar:Pm};function av(t){return t instanceof u["b"]}function sv(t){return t instanceof Zo["c"]}function lv(t,e){e.copyTransform(t),sv(e)&&sv(t)&&(e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel,e.invisible=t.invisible,e.ignore=t.ignore,av(e)&&av(t)&&e.setShape(t.shape))}var cv=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){var r=this._data,o=t.getData(),a=this.group,s=wv(t,o,e,n);r||a.removeAll(),o.diff(r).add((function(e){Tv(n,null,e,s(e,i),t,a,o)})).remove((function(e){Nv(r.getItemGraphicEl(e),t,a)})).update((function(e,l){var c=r.getItemGraphicEl(l);Tv(n,c,e,s(e,i),t,a,o)})).execute();var l=t.get("clip",!0)?Te(t.coordinateSystem,!1,t):null;l?a.setClipPath(l):a.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,n,i,r){var o=e.getData(),a=wv(e,o,n,i);function s(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var l=t.start;l<t.end;l++){var c=Tv(null,null,l,a(l,r),e,this.group,o);c&&c.traverse(s)}},e.prototype.filterForExposedEvent=function(t,e,n,i){var r=e.element;if(null==r||n.name===r)return!0;while((n=n.__hostTarget||n.parent)&&n!==this.group)if(n.name===r)return!0;return!1},e.type="custom",e}(ye["a"]),uv=cv;function hv(t){var e,n=t.type;if("path"===n){var i=t.shape,r=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=Bv(i);e=fr["makePath"](o,null,r,i.layout||"center"),xm(e).customPathData=o}else if("image"===n)e=new h["a"]({}),xm(e).customImagePath=t.style.image;else if("text"===n)e=new ae["a"]({});else if("group"===n)e=new Pt["a"];else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var a=fr["getShapeClass"](n);if(!a){var s="";0,Object(Wd["c"])(s)}e=new a}return xm(e).customGraphicType=n,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function fv(t,e,n,i,r,o,a,s){var l=r&&r.normal.cfg;l&&e.setTextConfig(l);var u=i&&i.style;if(u){if("text"===e.type){var h=u;Object(c["q"])(h,"textFill")&&(h.fill=h.textFill),Object(c["q"])(h,"textStroke")&&(h.stroke=h.textStroke)}var f=void 0,d=av(e)?u.decal:null;t&&d&&(d.dirty=!0,f=Object(qo["a"])(d,t)),u.__decalPattern=f}var p=xm(e);p.userDuring=i.during;var g={},m={};Gm("shape",e,i,g,a),Um("shape",i,m),Wm(e,i,g,a),Xm(e,i,m),Gm("extra",e,i,g,a),Um("extra",i,m),Ym(e,i,u,g,a),m.style=u,pv(e,m),gv(e,n,o,g,a),dv(e,i,s),u?e.dirty():e.markRedraw()}function dv(t,e,n){Object(c["q"])(e,"silent")&&(t.silent=e.silent),Object(c["q"])(e,"ignore")&&(t.ignore=e.ignore),sv(t)&&Object(c["q"])(e,"invisible")&&(t.invisible=e.invisible),av(t)&&Object(c["q"])(e,"autoBatch")&&(t.autoBatch=e.autoBatch),n||Object(c["q"])(e,"info")&&(xm(t).info=e.info)}function pv(t,e){var n=t.isGroup?null:t,i=e.style;if(n&&i){n.useStyle(i);var r=i.__decalPattern;r&&(n.style.decal=r);for(var o=n.animators,a=0;a<o.length;a++){var s=o[a];"style"===s.targetName&&s.changeTarget(n.style)}}e&&(e.style=null,e&&t.attr(e),e.style=i)}function gv(t,e,n,i,r){if(i){var o=xm(t).userDuring,a=o?Object(c["c"])(yv,{el:t,userDuring:o}):null,s={dataIndex:e,isFrom:!0,during:a};r?jt["c"](t,i,n,s):jt["h"](t,i,n,s)}}var mv={},vv={setTransform:function(t,e){return mv.el[t]=e,this},getTransform:function(t){return mv.el[t]},setShape:function(t,e){var n=mv.el.shape||(mv.el.shape={});return n[t]=e,mv.isShapeDirty=!0,this},getShape:function(t){var e=mv.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=mv.el.style;return n&&(n[t]=e,mv.isStyleDirty=!0),this},getStyle:function(t){var e=mv.el.style;if(e)return e[t]},setExtra:function(t,e){var n=mv.el.extra||(mv.el.extra={});return n[t]=e,this},getExtra:function(t){var e=mv.el.extra;if(e)return e[t]}};function yv(){var t=this,e=t.el;if(e){var n=xm(e).userDuring,i=t.userDuring;n===i?(mv.el=e,mv.isShapeDirty=!1,mv.isStyleDirty=!1,i(vv),mv.isShapeDirty&&e.dirtyShape&&e.dirtyShape(),mv.isStyleDirty&&e.dirtyStyle&&e.dirtyStyle()):t.el=t.userDuring=null}}function _v(t,e,n,i,r,o,a){var s=e.isGroup?null:e,l=r&&r[t].cfg;if(s){var c=s.ensureState(t);if(!1===i){var u=s.getState(t);u&&(u.style=null)}else c.style=i||null;l&&(c.textConfig=l),Object(Nt["G"])(s)}}function bv(t,e,n){if(!t.isGroup){var i=t,r=n.currentZ,o=n.currentZLevel;i.z=r,i.zlevel=o;var a=e.z2;null!=a&&(i.z2=a||0);for(var s=0;s<tv.length;s++)xv(i,e,tv[s])}}function xv(t,e,n){var i,r=n===$m,o=r?e:Ev(e,n),a=o?o.z2:null;null!=a&&(i=r?t:t.ensureState(n),i.z2=a||0)}function wv(t,e,n,i){var r=t.get("renderItem"),o=t.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):ov[o.type](o));for(var s,l,u=Object(c["j"])({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:x,style:S,ordinalRawValue:w,styleEmphasis:T,visual:M,barLayout:A,currentSeriesIndices:D,font:E},a.api||{}),h={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:Sv(t.getData())},f={},d={},p={},g={},m=0;m<tv.length;m++){var v=tv[m];p[v]=t.getModel(ev[v]),g[v]=t.getModel(nv[v])}function y(t){return t===s?l||(l=e.getItemModel(t)):e.getItemModel(t)}function _(t,n){return e.hasItemOption?t===s?f[n]||(f[n]=y(t).getModel(ev[n])):y(t).getModel(ev[n]):p[n]}function b(t,n){return e.hasItemOption?t===s?d[n]||(d[n]=y(t).getModel(nv[n])):y(t).getModel(nv[n]):g[n]}return function(t,n){return s=t,l=null,f={},d={},r&&r(Object(c["j"])({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},h),u)};function x(t,n){return null==n&&(n=s),e.getStore().get(e.getDimensionIndex(t||0),n)}function w(t,n){null==n&&(n=s),t=t||0;var i=e.getDimensionInfo(t);if(!i){var r=e.getDimensionIndex(t);return r>=0?e.getStore().get(r,n):void 0}var o=e.get(i.name,n),a=i&&i.ordinalMeta;return a?a.categories[o]:o}function S(n,i){null==i&&(i=s);var r=e.getItemVisual(i,"style"),o=r&&r.fill,a=r&&r.opacity,l=_(i,$m).getItemStyle();null!=o&&(l.fill=o),null!=a&&(l.opacity=a);var u={inheritColor:Object(c["C"])(o)?o:"#000"},h=b(i,$m),f=Vt["c"](h,null,u,!1,!0);f.text=h.getShallow("show")?Object(c["P"])(t.getFormattedLabel(i,$m),Ft(e,i)):null;var d=Vt["b"](h,u,!1);return C(n,l),l=Rm(l,f,d),n&&O(l,n),l.legacy=!0,l}function T(n,i){null==i&&(i=s);var r=_(i,Km).getItemStyle(),o=b(i,Km),a=Vt["c"](o,null,null,!0,!0);a.text=o.getShallow("show")?Object(c["Q"])(t.getFormattedLabel(i,Km),t.getFormattedLabel(i,$m),Ft(e,i)):null;var l=Vt["b"](o,null,!0);return C(n,r),r=Rm(r,a,l),n&&O(r,n),r.legacy=!0,r}function O(t,e){for(var n in e)Object(c["q"])(e,n)&&(t[n]=e[n])}function C(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}function M(t,n){if(null==n&&(n=s),Object(c["q"])(_m,t)){var i=e.getItemVisual(n,"style");return i?i[_m[t]]:null}if(Object(c["q"])(bm,t))return e.getItemVisual(n,t)}function A(t){if("cartesian2d"===o.type){var e=o.getBaseAxis();return Object(Je["a"])(Object(c["j"])({axis:e},t))}}function D(){return n.getCurrentSeriesIndices()}function E(t){return Vt["d"](t,n)}}function Sv(t){var e={};return Object(c["k"])(t.dimensions,(function(n){var i=t.getDimensionInfo(n);if(!i.isExtraCoord){var r=i.coordDim,o=e[r]=e[r]||[];o[i.coordDimIndex]=t.getDimensionIndex(n)}})),e}function Tv(t,e,n,i,r,o,a){if(i){var s=Ov(t,e,n,i,r,o,!0);return s&&a.setItemGraphicEl(n,s),s&&Object(Nt["o"])(s,i.focus,i.blurScope),s}o.remove(e)}function Ov(t,e,n,i,r,o,a){var s=-1,l=e;e&&Cv(e,i,r)&&(s=Object(c["r"])(o.childrenRef(),e),e=null);var u=!e,h=e;h?h.clearStates():(h=hv(i),l&&lv(l,h)),!1===i.morph?h.disableMorphing=!0:h.disableMorphing&&(h.disableMorphing=!1),rv.normal.cfg=rv.normal.conOpt=rv.emphasis.cfg=rv.emphasis.conOpt=rv.blur.cfg=rv.blur.conOpt=rv.select.cfg=rv.select.conOpt=null,rv.isLegacy=!1,Av(h,n,i,r,u,rv),Mv(h,n,i,r,u),fv(t,h,n,i,rv,r,u,!1);for(var f=0;f<tv.length;f++){var d=tv[f];if(d!==$m){var p=Ev(i,d),g=Iv(i,p,d);_v(d,h,p,g,rv,a,!1)}}return bv(h,i,r),"group"===i.type&&Pv(t,h,n,i,r),s>=0?o.replaceAt(h,s):o.add(h),h}function Cv(t,e,n){var i=xm(t),r=e.type,o=e.shape,a=e.style;return n.isUniversalTransitionEnabled()||null!=r&&r!==i.customGraphicType||"path"===r&&Fv(o)&&Bv(o)!==i.customPathData||"image"===r&&Object(c["q"])(a,"image")&&a.image!==i.customImagePath}function Mv(t,e,n,i,r){var o=n.clipPath;if(!1===o)t&&t.getClipPath()&&t.removeClipPath();else if(o){var a=t.getClipPath();a&&Cv(a,o,i)&&(a=null),a||(a=hv(o),t.setClipPath(a)),fv(null,a,e,o,null,i,r,!1)}}function Av(t,e,n,i,r,o){if(!t.isGroup){Dv(n,null,o),Dv(n,Km,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,c=o.select.conOpt;if(null!=a||null!=s||null!=c||null!=l){var u=t.getTextContent();if(!1===a)u&&t.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},u?u.clearStates():(u=hv(a),t.setTextContent(u)),fv(null,u,e,a,null,i,r,!0);for(var h=a&&a.style,f=0;f<tv.length;f++){var d=tv[f];if(d!==$m){var p=o[d].conOpt;_v(d,u,p,Iv(a,p,d),null,!1,!0)}}h?u.dirty():u.markRedraw()}}}}function Dv(t,e,n){var i=e?Ev(t,e):t,r=e?Iv(t,i,Km):t.style,o=t.type,a=i?i.textConfig:null,s=t.textContent,l=s?e?Ev(s,e):s:null;if(r&&(n.isLegacy||Lm(r,o,!!a,!!l))){n.isLegacy=!0;var c=km(r,o,!e);!a&&c.textConfig&&(a=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var h=e?n[e]:n.normal;h.cfg=a,h.conOpt=l}function Ev(t,e){return e?t?t[e]:null:t}function Iv(t,e,n){var i=e&&e.style;return null==i&&n===Km&&t&&(i=t.styleEmphasis),i}function Pv(t,e,n,i,r){var o=i.children,a=o?o.length:0,s=i.$mergeChildren,l="byName"===s||i.diffChildrenByName,c=!1===s;if(a||l||c)if(l)Lv({api:t,oldChildren:e.children()||[],newChildren:o||[],dataIndex:n,seriesModel:r,group:e});else{c&&e.removeAll();for(var u=0;u<a;u++)o[u]&&Ov(t,e.childAt(u),n,o[u],r,e,!1);for(var h=e.childCount()-1;h>=u;h--)Nv(e.childAt(h),r,e)}}function Lv(t){new Bs["a"](t.oldChildren,t.newChildren,kv,kv,t).add(jv).update(jv).remove(Rv).execute()}function kv(t,e){var n=t&&t.name;return null!=n?n:iv+e}function jv(t,e){var n=this.context,i=null!=t?n.newChildren[t]:null,r=null!=e?n.oldChildren[e]:null;Ov(n.api,r,n.dataIndex,i,n.seriesModel,n.group,!1)}function Rv(t){var e=this.context,n=e.oldChildren[t];Nv(n,e.seriesModel,e.group)}function Nv(t,e,n){if(t){var i=xm(t).leaveToProps;i?jt["h"](t,i,e,{cb:function(){n.remove(t)}}):n.remove(t)}}function Bv(t){return t&&(t.pathData||t.d)}function Fv(t){return t&&(Object(c["q"])(t,"pathData")||Object(c["q"])(t,"d"))}function zv(t){t.registerChartView(uv),t.registerSeriesModel(Sm)}var Vv=Object(se["o"])(),Hv=c["d"],Gv=c["c"],Uv=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,n,i){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,n);var u=l.graphicKey;u!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=u;var h=this._moveAnimation=this.determineAnimation(t,e);if(a){var f=c["i"](Wv,e,h);this.updatePointerEl(a,l,f),this.updateLabelEl(a,l,f,e)}else a=this._group=new Pt["a"],this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),n.getZr().add(a);Zv(a,e,!0),this._renderHandle(r)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(r&&i.getBandWidth()>a)return!0;if(o){var s=jr(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},t.prototype.makeElOption=function(t,e,n,i,r){},t.prototype.createPointerEl=function(t,e,n,i){var r=e.pointer;if(r){var o=Vv(t).pointerEl=new fr[r.type](Hv(e.pointer));t.add(o)}},t.prototype.createLabelEl=function(t,e,n,i){if(e.label){var r=Vv(t).labelEl=new ae["a"](Hv(e.label));t.add(r),Yv(r,i)}},t.prototype.updatePointerEl=function(t,e,n){var i=Vv(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,n,i){var r=Vv(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{x:e.label.x,y:e.label.y}),Yv(r,i))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||"hide"===a)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=fr["createIcon"](o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){Eo["g"](t.event)},onmousedown:Gv(this._onHandleDragMove,this,0,0),drift:Gv(this._onHandleDragMove,this),ondragend:Gv(this._onHandleDragEnd,this)}),i.add(r)),Zv(r,n,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");c["t"](s)||(s=[s,s]),r.scaleX=s[0]/2,r.scaleY=s[1]/2,on["b"](this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){Wv(this._axisPointerModel,!e&&this._moveAnimation,this._handle,qv(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(qv(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(qv(i)),Vv(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(t){var e=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(t){var e=this._axisPointerModel.get("value");this._moveHandleToValue(e),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null)},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}},t}();function Wv(t,e,n,i){Xv(Vv(n).lastProp,i)||(Vv(n).lastProp=i,e?jt["h"](n,i,t):(n.stopAnimation(),n.attr(i)))}function Xv(t,e){if(c["A"](t)&&c["A"](e)){var n=!0;return c["k"](e,(function(e,i){n=n&&Xv(t[i],e)})),!!n}return t===e}function Yv(t,e){t[e.get(["label","show"])?"show":"hide"]()}function qv(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function Zv(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse((function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)}))}var Kv=Uv;function $v(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle(),e.fill=null):"shadow"===n&&(e=i.getAreaStyle(),e.stroke=null),e}function Jv(t,e,n,i,r){var o=n.get("value"),a=ty(o,e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),s=n.getModel("label"),l=Ce["j"](s.get("padding")||0),c=s.getFont(),u=b["e"](a,c),h=r.position,f=u.width+l[1]+l[3],d=u.height+l[0]+l[2],p=r.align;"right"===p&&(h[0]-=f),"center"===p&&(h[0]-=f/2);var g=r.verticalAlign;"bottom"===g&&(h[1]-=d),"middle"===g&&(h[1]-=d/2),Qv(h,f,d,i);var m=s.get("backgroundColor");m&&"auto"!==m||(m=e.get(["axisLine","lineStyle","color"])),t.label={x:h[0],y:h[1],style:Object(Vt["c"])(s,{text:a,font:c,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function Qv(t,e,n,i){var r=i.getWidth(),o=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}function ty(t,e,n,i,r){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:r.precision}),a=r.formatter;if(a){var s={value:Wi["c"](e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};c["k"](i,(function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&s.seriesData.push(r)})),c["C"](a)?o=a.replace("{value}",o):c["w"](a)&&(o=a(s))}return o}function ey(t,e,n){var i=qi["c"]();return qi["g"](i,i,n.rotation),qi["i"](i,i,n.position),fr["applyTransform"]([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function ny(t,e,n,i,r,o){var a=Mr.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get(["label","margin"]),Jv(e,i,r,o,{position:ey(i.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function iy(t,e,n){return n=n||0,{x1:t[n],y1:t[1-n],x2:e[n],y2:e[1-n]}}function ry(t,e,n){return n=n||0,{x:t[n],y:t[1-n],width:e[n],height:e[1-n]}}function oy(t,e,n,i,r,o){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:o,clockwise:!0}}var ay=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis,a=o.grid,s=i.get("type"),l=sy(a,o).getOtherAxis(o).getGlobalExtent(),c=o.toGlobalCoord(o.dataToCoord(e,!0));if(s&&"none"!==s){var u=$v(i),h=ly[s](o,c,l);h.style=u,t.graphicKey=h.type,t.pointer=h}var f=ir(a.model,n);ny(e,t,f,n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=ir(e.axis.grid.model,e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=ey(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,o=r.grid,a=r.getGlobalExtent(!0),s=sy(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,c=[t.x,t.y];c[l]+=e[l],c[l]=Math.min(a[1],c[l]),c[l]=Math.max(a[0],c[l]);var u=(s[1]+s[0])/2,h=[u,u];h[l]=c[l];var f=[{verticalAlign:"middle"},{align:"center"}];return{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:h,tooltipOption:f[l]}},e}(Kv);function sy(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var ly={line:function(t,e,n){var i=iy([e,n[0]],[e,n[1]],cy(t));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth()),r=n[1]-n[0];return{type:"Rect",shape:ry([e-i/2,n[0]],[i,r],cy(t))}}};function cy(t){return"x"===t.dim?0:1}var uy=ay,hy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="axisPointer",e.defaultOption={show:"auto",zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Ei["a"]),fy=hy,dy=n("22d1"),py=Object(se["o"])(),gy=c["k"];function my(t,e,n){if(!dy["a"].node){var i=e.getZr();py(i).records||(py(i).records={}),vy(i,e);var r=py(i).records[t]||(py(i).records[t]={});r.handler=n}}function vy(t,e){function n(n,i){t.on(n,(function(n){var r=xy(e);gy(py(t).records,(function(t){t&&i(t,n,r.dispatchAction)})),yy(r.pendings,e)}))}py(t).initialized||(py(t).initialized=!0,n("click",c["i"](by,"click")),n("mousemove",c["i"](by,"mousemove")),n("globalout",_y))}function yy(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}function _y(t,e,n){t.handler("leave",null,n)}function by(t,e,n,i){e.handler(t,n,i)}function xy(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}function wy(t,e){if(!dy["a"].node){var n=e.getZr(),i=(py(n).records||{})[t];i&&(py(n).records[t]=null)}}var Sy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";my("axisPointer",n,(function(t,e,n){"none"!==r&&("leave"===t||r.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}))},e.prototype.remove=function(t,e){wy("axisPointer",e)},e.prototype.dispose=function(t,e){wy("axisPointer",e)},e.type="axisPointer",e}(Di["a"]),Ty=Sy;function Oy(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),a=se["u"](o,t);if(null==a||a<0||c["t"](a))return{point:[]};var s=o.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(t.isStacked){var u=l.getBaseAxis(),h=l.getOtherAxis(u),f=h.dim,d=u.dim,p="x"===f||"radius"===f?1:0,g=o.mapDimension(d),m=[];m[p]=o.get(g,a),m[1-p]=o.get(o.getCalculationInfo("stackResultDimension"),a),i=l.dataToPoint(m)||[]}else i=l.dataToPoint(o.getValues(c["H"](l.dimensions,(function(t){return o.mapDimension(t)})),a))||[];else if(s){var v=s.getBoundingRect().clone();v.applyTransform(s.transform),i=[v.x+v.width/2,v.y+v.height/2]}return{point:i,el:s}}var Cy=Object(se["o"])();function My(t,e,n){var i=t.currTrigger,r=[t.x,t.y],o=t,a=t.dispatchAction||Object(c["c"])(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){Ny(r)&&(r=Oy({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},e).point);var l=Ny(r),u=o.axesInfo,h=s.axesInfo,f="leave"===i||Ny(r),d={},p={},g={list:[],map:{}},m={showPointer:Object(c["i"])(Ey,p),showTooltip:Object(c["i"])(Iy,g)};Object(c["k"])(s.coordSysMap,(function(t,e){var n=l||t.containPoint(r);Object(c["k"])(s.coordSysAxesInfo[e],(function(t,e){var i=t.axis,o=jy(u,t);if(!f&&n&&(!u||o)){var a=o&&o.value;null!=a||l||(a=i.pointToData(r)),null!=a&&Ay(t,a,m,!1,d)}}))}));var v={};return Object(c["k"])(h,(function(t,e){var n=t.linkGroup;n&&!p[e]&&Object(c["k"])(n.axesInfo,(function(e,i){var r=p[i];if(e!==t&&r){var o=r.value;n.mapper&&(o=t.axis.scale.parse(n.mapper(o,Ry(e),Ry(t)))),v[t.key]=o}}))})),Object(c["k"])(v,(function(t,e){Ay(h[e],t,m,!0,d)})),Py(p,h,d),Ly(g,r,t,a),ky(h,a,n),d}}function Ay(t,e,n,i,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var a=Dy(e,t),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==r.seriesIndex&&Object(c["m"])(r,s[0]),!i&&t.snap&&o.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,s),n.showTooltip(t,a,l)}else n.showPointer(t,e)}function Dy(t,e){var n=e.axis,i=n.dim,r=t,o=[],a=Number.MAX_VALUE,s=-1;return Object(c["k"])(e.seriesModels,(function(e,l){var u,h,f=e.getData().mapDimensionsAll(i);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(f,t,n);h=d.dataIndices,u=d.nestestValue}else{if(h=e.getData().indicesOfNearest(f[0],t,"category"===n.type?.5:null),!h.length)return;u=e.getData().get(f[0],h[0])}if(null!=u&&isFinite(u)){var p=t-u,g=Math.abs(p);g<=a&&((g<a||p>=0&&s<0)&&(a=g,s=p,r=u,o.length=0),Object(c["k"])(h,(function(t){o.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})))}})),{payloadBatch:o,snapToValue:r}}function Ey(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function Iy(t,e,n,i){var r=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,c=Br(l),u=t.map[c];u||(u=t.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function Py(t,e,n){var i=n.axesInfo=[];Object(c["k"])(e,(function(e,n){var r=e.axisPointerModel.option,o=t[n];o?(!e.useHandle&&(r.status="show"),r.value=o.value,r.seriesDataIndices=(o.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})}))}function Ly(t,e,n,i){if(!Ny(e)&&t.list.length){var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}else i({type:"hideTip"})}function ky(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",o=Cy(i)[r]||{},a=Cy(i)[r]={};Object(c["k"])(t,(function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&Object(c["k"])(n.seriesDataIndices,(function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t}))}));var s=[],l=[];Object(c["k"])(o,(function(t,e){!a[e]&&l.push(t)})),Object(c["k"])(a,(function(t,e){!o[e]&&s.push(t)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function jy(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}function Ry(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function Ny(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function By(t){Vr.registerAxisPointerClass("CartesianAxisPointer",uy),t.registerComponentModel(fy),t.registerComponentView(Ty),t.registerPreprocessor((function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!Object(c["t"])(e)&&(t.axisPointer.link=[e])}})),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,(function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=Ar(t,e)})),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},My)}function Fy(t){Object(i["a"])(Qr),Object(i["a"])(By)}var zy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var a=o.polar,s=a.getOtherAxis(o),l=s.getExtent(),c=o.dataToCoord(e),u=i.get("type");if(u&&"none"!==u){var h=$v(i),f=Hy[u](o,a,c,l);f.style=h,t.graphicKey=f.type,t.pointer=f}var d=i.get(["label","margin"]),p=Vy(e,n,i,a,d);Jv(t,n,i,r,p)},e}(Kv);function Vy(t,e,n,i,r){var o=e.axis,a=o.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,c,u,h=i.getRadiusAxis().getExtent();if("radius"===o.dim){var f=qi["c"]();qi["g"](f,f,s),qi["i"](f,f,[i.cx,i.cy]),l=fr["applyTransform"]([a,-r],f);var d=e.getModel("axisLabel").get("rotate")||0,p=Mr.innerTextLayout(s,d*Math.PI/180,-1);c=p.textAlign,u=p.textVerticalAlign}else{var g=h[1];l=i.coordToPoint([g+r,a]);var m=i.cx,v=i.cy;c=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",u=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:c,verticalAlign:u}}var Hy={line:function(t,e,n,i){return"angle"===t.dim?{type:"Line",shape:iy(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i){var r=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:oy(e.cx,e.cy,i[0],i[1],(-n-r/2)*o,(r/2-n)*o)}:{type:"Sector",shape:oy(e.cx,e.cy,n-r/2,n+r/2,0,2*Math.PI)}}},Gy=zy,Uy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.findAxisModel=function(t){var e,n=this.ecModel;return n.eachComponent(t,(function(t){t.getCoordSysModel()===this&&(e=t)}),this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={zlevel:0,z:0,center:["50%","50%"],radius:"80%"},e}(Ei["a"]),Wy=Uy,Xy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",se["b"]).models[0]},e.type="polarAxis",e}(Ei["a"]);c["K"](Xy,Li["a"]);var Yy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="angleAxis",e}(Xy),qy=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="radiusAxis",e}(Xy),Zy=function(t){function e(e,n){return t.call(this,"radius",e,n)||this}return Object(At["b"])(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}(tr["a"]);Zy.prototype.dataToRadius=tr["a"].prototype.dataToCoord,Zy.prototype.radiusToData=tr["a"].prototype.coordToData;var Ky=Zy,$y=Object(se["o"])(),Jy=function(t){function e(e,n){return t.call(this,"angle",e,n||[0,360])||this}return Object(At["b"])(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),n=t.scale,i=n.getExtent(),r=n.count();if(i[1]-i[0]<1)return 0;var o=i[0],a=t.dataToCoord(o+1)-t.dataToCoord(o),s=Math.abs(a),l=b["e"](null==o?"":o+"",e.getFont(),"center","top"),c=Math.max(l.height,7),u=c/s;isNaN(u)&&(u=1/0);var h=Math.max(0,Math.floor(u)),f=$y(t.model),d=f.lastAutoInterval,p=f.lastTickCount;return null!=d&&null!=p&&Math.abs(d-h)<=1&&Math.abs(p-r)<=1&&d>h?h=d:(f.lastTickCount=r,f.lastAutoInterval=h),h},e}(tr["a"]);Jy.prototype.dataToAngle=tr["a"].prototype.dataToCoord,Jy.prototype.angleToData=tr["a"].prototype.coordToData;var Qy=Jy,t_=["radius","angle"],e_=function(){function t(t){this.dimensions=t_,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new Ky,this._angleAxis=new Qy,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){var e="_"+t+"Axis";return this[e]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},t.prototype.pointToData=function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);i.inverse?o=a-360:a=o+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;var l=Math.atan2(-n,e)/Math.PI*180,c=l<o?1:-1;while(l<o||l>a)l+=360*c;return[s,l]},t.prototype.coordToPoint=function(t){var e=t[0],n=t[1]/180*Math.PI,i=Math.cos(n)*e+this.cx,r=-Math.sin(n)*e+this.cy;return[i,r]},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis(),n=e.getExtent().slice();n[0]>n[1]&&n.reverse();var i=t.getExtent(),r=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:n[0],r:n[1],startAngle:-i[0]*r,endAngle:-i[1]*r,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,r=n*n+i*i,o=this.r,a=this.r0;return r<=o*o&&r>=a*a}}},t.prototype.convertToPixel=function(t,e,n){var i=n_(e);return i===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var i=n_(e);return i===this?this.pointToData(n):null},t}();function n_(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var i_=e_;function r_(t,e,n){var i=e.get("center"),r=n.getWidth(),o=n.getHeight();t.cx=Object(xe["p"])(i[0],r),t.cy=Object(xe["p"])(i[1],o);var a=t.getRadiusAxis(),s=Math.min(r,o)/2,l=e.get("radius");null==l?l=[0,"100%"]:c["t"](l)||(l=[0,l]);var u=[Object(xe["p"])(l[0],s),Object(xe["p"])(l[1],s)];a.inverse?a.setExtent(u[1],u[0]):a.setExtent(u[0],u[1])}function o_(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries((function(t){if(t.coordinateSystem===n){var e=t.getData();c["k"](Object(Wi["d"])(e,"radius"),(function(t){r.scale.unionExtentFromData(e,t)})),c["k"](Object(Wi["d"])(e,"angle"),(function(t){i.scale.unionExtentFromData(e,t)}))}})),Object(Wi["i"])(i.scale,i.model),Object(Wi["i"])(r.scale,r.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function a_(t){return"angleAxis"===t.mainType}function s_(t,e){if(t.type=e.get("type"),t.scale=Object(Wi["a"])(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),a_(e)){t.inverse=t.inverse!==e.get("clockwise");var n=e.get("startAngle");t.setExtent(n,n+(t.inverse?-360:360))}e.axis=t,t.model=e}var l_={dimensions:t_,create:function(t,e){var n=[];return t.eachComponent("polar",(function(t,i){var r=new i_(i+"");r.update=o_;var o=r.getRadiusAxis(),a=r.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");s_(o,s),s_(a,l),r_(r,t,e),n.push(r),t.coordinateSystem=r,r.model=t})),t.eachSeries((function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",se["b"]).models[0];0,t.coordinateSystem=e.coordinateSystem}})),n}},c_=l_,u_=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function h_(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function f_(t){var e=t.getRadiusAxis();return e.inverse?0:1}function d_(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var p_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return Object(At["b"])(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),o=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=c["H"](n.getViewLabels(),(function(t){t=c["d"](t);var e=n.scale,i="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(i),t}));d_(s),d_(o),c["k"](u_,(function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||g_[e](this.group,t,i,o,a,r,s)}),this)}},e.type="angleAxis",e}(Vr),g_={axisLine:function(t,e,n,i,r,o){var a,s=e.getModel(["axisLine","lineStyle"]),l=f_(n),c=l?0:1;a=0===o[c]?new mo["a"]({shape:{cx:n.cx,cy:n.cy,r:o[l]},style:s.getLineStyle(),z2:1,silent:!0}):new vo["a"]({shape:{cx:n.cx,cy:n.cy,r:o[l],r0:o[c]},style:s.getLineStyle(),z2:1,silent:!0}),a.style.fill=null,t.add(a)},axisTick:function(t,e,n,i,r,o){var a=e.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=o[f_(n)],u=c["H"](i,(function(t){return new dr["a"]({shape:h_(n,[l,l+s],t.coord)})}));t.add(fr["mergePath"](u,{style:c["j"](a.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,i,r,o){if(r.length){for(var a=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),u=o[f_(n)],h=[],f=0;f<r.length;f++)for(var d=0;d<r[f].length;d++)h.push(new dr["a"]({shape:h_(n,[u,u+l],r[f][d].coord)}));t.add(fr["mergePath"](h,{style:c["j"](s.getModel("lineStyle").getLineStyle(),c["j"](a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,i,r,o,a){var s=e.getCategories(!0),l=e.getModel("axisLabel"),u=l.get("margin"),h=e.get("triggerEvent");c["k"](a,(function(i,r){var a=l,f=i.tickValue,d=o[f_(n)],p=n.coordToPoint([d+u,i.coord]),g=n.cx,m=n.cy,v=Math.abs(p[0]-g)/d<.3?"center":p[0]>g?"left":"right",y=Math.abs(p[1]-m)/d<.3?"middle":p[1]>m?"top":"bottom";if(s&&s[f]){var _=s[f];c["A"](_)&&_.textStyle&&(a=new pr["a"](_.textStyle,l,l.ecModel))}var b=new ae["a"]({silent:Mr.isLabelSilent(e),style:Object(Vt["c"])(a,{x:p[0],y:p[1],fill:a.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:i.formattedLabel,align:v,verticalAlign:y})});if(t.add(b),h){var x=Mr.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=i.rawLabel,Object(Rt["a"])(b).eventData=x}}),this)},splitLine:function(t,e,n,i,r,o){var a=e.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],f=0;f<i.length;f++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new dr["a"]({shape:h_(n,o,i[f].coord)}))}for(f=0;f<h.length;f++)t.add(fr["mergePath"](h[f],{style:c["j"]({stroke:l[f%l.length]},s.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,i,r,o){if(r.length){for(var a=e.getModel("minorSplitLine"),s=a.getModel("lineStyle"),l=[],c=0;c<r.length;c++)for(var u=0;u<r[c].length;u++)l.push(new dr["a"]({shape:h_(n,o,r[c][u].coord)}));t.add(fr["mergePath"](l,{style:s.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,i,r,o){if(i.length){var a=e.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],f=Math.PI/180,d=-i[0].coord*f,p=Math.min(o[0],o[1]),g=Math.max(o[0],o[1]),m=e.get("clockwise"),v=1,y=i.length;v<=y;v++){var _=v===y?i[0].coord:i[v].coord,b=u++%l.length;h[b]=h[b]||[],h[b].push(new be["a"]({shape:{cx:n.cx,cy:n.cy,r0:p,r:g,startAngle:d,endAngle:-_*f,clockwise:m},silent:!0})),d=-_*f}for(v=0;v<h.length;v++)t.add(fr["mergePath"](h[v],{style:c["j"]({fill:l[v%l.length]},s.getAreaStyle()),silent:!0}))}}},m_=p_,v_=["axisLine","axisTickLabel","axisName"],y_=["splitLine","splitArea","minorSplitLine"],__=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return Object(At["b"])(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=this._axisGroup,i=this._axisGroup=new Pt["a"];this.group.add(i);var r=t.axis,o=r.polar,a=o.getAngleAxis(),s=r.getTicksCoords(),l=r.getMinorTicksCoords(),u=a.getExtent()[0],h=r.getExtent(),f=x_(o,t,u),d=new Mr(t,f);c["k"](v_,d.add,d),i.add(d.getGroup()),fr["groupTransition"](n,i,t),c["k"](y_,(function(e){t.get([e,"show"])&&!r.scale.isBlank()&&b_[e](this.group,t,o,u,h,s,l)}),this)}},e.type="radiusAxis",e}(Vr),b_={splitLine:function(t,e,n,i,r,o){var a=e.getModel("splitLine"),s=a.getModel("lineStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],f=0;f<o.length;f++){var d=u++%l.length;h[d]=h[d]||[],h[d].push(new mo["a"]({shape:{cx:n.cx,cy:n.cy,r:o[f].coord}}))}for(f=0;f<h.length;f++)t.add(fr["mergePath"](h[f],{style:c["j"]({stroke:l[f%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,i,r,o,a){if(a.length){for(var s=e.getModel("minorSplitLine"),l=s.getModel("lineStyle"),u=[],h=0;h<a.length;h++)for(var f=0;f<a[h].length;f++)u.push(new mo["a"]({shape:{cx:n.cx,cy:n.cy,r:a[h][f].coord}}));t.add(fr["mergePath"](u,{style:c["j"]({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,i,r,o){if(o.length){var a=e.getModel("splitArea"),s=a.getModel("areaStyle"),l=s.get("color"),u=0;l=l instanceof Array?l:[l];for(var h=[],f=o[0].coord,d=1;d<o.length;d++){var p=u++%l.length;h[p]=h[p]||[],h[p].push(new be["a"]({shape:{cx:n.cx,cy:n.cy,r0:f,r:o[d].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),f=o[d].coord}for(d=0;d<h.length;d++)t.add(fr["mergePath"](h[d],{style:c["j"]({fill:l[d%l.length]},s.getAreaStyle()),silent:!0}))}}};function x_(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}var w_=__;function S_(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function T_(t,e){return e.dim+t.model.componentIndex}function O_(t,e,n){var i={},r=C_(c["n"](e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type})));e.eachSeriesByType(t,(function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),a=T_(n,o),s=S_(t),l=r[a][s],c=l.offset,u=l.width,h=n.getOtherAxis(o),f=t.coordinateSystem.cx,d=t.coordinateSystem.cy,p=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=e.mapDimension(h.dim),v=e.mapDimension(o.dim),y=Object(Kt["c"])(e,m),_="radius"!==o.dim||!t.get("roundCap",!0),b=h.dataToCoord(0),x=0,w=e.count();x<w;x++){var S=e.get(m,x),T=e.get(v,x),O=S>=0?"p":"n",C=b;y&&(i[s][T]||(i[s][T]={p:b,n:b}),C=i[s][T][O]);var M=void 0,A=void 0,D=void 0,E=void 0;if("radius"===h.dim){var I=h.dataToCoord(S)-b,P=o.dataToCoord(T);Math.abs(I)<p&&(I=(I<0?-1:1)*p),M=C,A=C+I,D=P-c,E=D-u,y&&(i[s][T][O]=A)}else{var L=h.dataToCoord(S,_)-b,k=o.dataToCoord(T);Math.abs(L)<g&&(L=(L<0?-1:1)*g),M=k+c,A=M+u,D=C,E=C+L,y&&(i[s][T][O]=E)}e.setItemLayout(x,{cx:f,cy:d,r0:M,r:A,startAngle:-D*Math.PI/180,endAngle:-E*Math.PI/180,clockwise:D>=E})}}}))}function C_(t){var e={};c["k"](t,(function(t,n){var i=t.getData(),r=t.coordinateSystem,o=r.getBaseAxis(),a=T_(r,o),s=o.getExtent(),l="category"===o.type?o.getBandWidth():Math.abs(s[1]-s[0])/i.count(),c=e[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=c.stacks;e[a]=c;var h=S_(t);u[h]||c.autoWidthCount++,u[h]=u[h]||{width:0,maxWidth:0};var f=Object(xe["p"])(t.get("barWidth"),l),d=Object(xe["p"])(t.get("barMaxWidth"),l),p=t.get("barGap"),g=t.get("barCategoryGap");f&&!u[h].width&&(f=Math.min(c.remainedWidth,f),u[h].width=f,c.remainedWidth-=f),d&&(u[h].maxWidth=d),null!=p&&(c.gap=p),null!=g&&(c.categoryGap=g)}));var n={};return c["k"](e,(function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,o=Object(xe["p"])(t.categoryGap,r),a=Object(xe["p"])(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,u=(s-o)/(l+(l-1)*a);u=Math.max(u,0),c["k"](i,(function(t,e){var n=t.maxWidth;n&&n<u&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,l--)})),u=(s-o)/(l+(l-1)*a),u=Math.max(u,0);var h,f=0;c["k"](i,(function(t,e){t.width||(t.width=u),h=t,f+=t.width*(1+a)})),h&&(f-=h.width*a);var d=-f/2;c["k"](i,(function(t,i){n[e][i]=n[e][i]||{offset:d,width:t.width},d+=t.width*(1+a)}))})),n}var M_=O_,A_={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},D_={splitNumber:5},E_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="polar",e}(Di["a"]);function I_(t){Object(i["a"])(By),Vr.registerAxisPointerClass("PolarAxisPointer",Gy),t.registerCoordinateSystem("polar",c_),t.registerComponentModel(Wy),t.registerComponentView(E_),Gi(t,"angle",Yy,A_),Gi(t,"radius",qy,D_),t.registerComponentView(m_),t.registerComponentView(w_),t.registerLayout(Object(c["i"])(M_,"bar"))}function P_(t,e){e=e||{};var n=t.coordinateSystem,i=t.axis,r={},o=i.position,a=i.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],u={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===a?u.vertical[o]:l[0],"horizontal"===a?u.horizontal[o]:l[3]];var h={horizontal:0,vertical:1};r.rotation=Math.PI/2*h[a];var f={top:-1,bottom:1,right:1,left:-1};r.labelDirection=r.tickDirection=r.nameDirection=f[o],t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),c["O"](e.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var d=e.rotate;return null==d&&(d=t.get(["axisLabel","rotate"])),r.labelRotation="top"===o?-d:d,r.z2=1,r}var L_=["axisLine","axisTickLabel","axisName"],k_=["splitArea","splitLine"],j_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return Object(At["b"])(e,t),e.prototype.render=function(e,n,i,r){var o=this.group;o.removeAll();var a=this._axisGroup;this._axisGroup=new Pt["a"];var s=P_(e),l=new Mr(e,s);c["k"](L_,l.add,l),o.add(this._axisGroup),o.add(l.getGroup()),c["k"](k_,(function(t){e.get([t,"show"])&&R_[t](this,this.group,this._axisGroup,e)}),this),fr["groupTransition"](a,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)},e.prototype.remove=function(){Ur(this)},e.type="singleAxis",e}(Vr),R_={splitLine:function(t,e,n,i){var r=i.axis;if(!r.scale.isBlank()){var o=i.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=i.coordinateSystem.getRect(),u=r.isHorizontal(),h=[],f=0,d=r.getTicksCoords({tickModel:o}),p=[],g=[],m=0;m<d.length;++m){var v=r.toGlobalCoord(d[m].coord);u?(p[0]=v,p[1]=l.y,g[0]=v,g[1]=l.y+l.height):(p[0]=l.x,p[1]=v,g[0]=l.x+l.width,g[1]=v);var y=f++%s.length;h[y]=h[y]||[],h[y].push(new dr["a"]({subPixelOptimize:!0,shape:{x1:p[0],y1:p[1],x2:g[0],y2:g[1]},silent:!0}))}var _=a.getLineStyle(["color"]);for(m=0;m<h.length;++m)e.add(fr["mergePath"](h[m],{style:c["j"]({stroke:s[m%s.length]},_),silent:!0}))}},splitArea:function(t,e,n,i){Gr(t,n,i,i)}},N_=j_,B_=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Ei["a"]);Object(c["K"])(B_,Li["a"].prototype);var F_=B_,z_=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.type=r||"value",a.position=o||"bottom",a}return Object(At["b"])(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(tr["a"]),V_=z_,H_=["single"],G_=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=H_,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=this.dimension,r=new V_(i,Wi["a"](t),[0,0],t.get("type"),t.get("position")),o="category"===r.type;r.onBand=o&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},t.prototype.update=function(t,e){t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();Object(c["k"])(e.mapDimensionsAll(this.dimension),(function(t){this._axis.scale.unionExtentFromData(e,t)}),this),Wi["i"](this._axis.scale,this._axis.model)}}),this)},t.prototype.resize=function(t,e){this._rect=Object(Gn["g"])({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.reverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis(),i=n.orient;return"horizontal"===i?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0===r?n.y+n.height/2:n.x+n.width/2,i},t.prototype.convertToPixel=function(t,e,n){var i=U_(e);return i===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var i=U_(e);return i===this?this.pointToData(n):null},t}();function U_(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var W_=G_;function X_(t,e){var n=[];return t.eachComponent("singleAxis",(function(i,r){var o=new W_(i,t,e);o.name="single_"+r,o.resize(i,e),i.coordinateSystem=o,n.push(o)})),t.eachSeries((function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",se["b"]).models[0];t.coordinateSystem=e&&e.coordinateSystem}})),n}var Y_={create:X_,dimensions:H_},q_=Y_,Z_=["x","y"],K_=["width","height"],$_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis,a=o.coordinateSystem,s=tb(a,1-Q_(o)),l=a.dataToPoint(e)[0],c=i.get("type");if(c&&"none"!==c){var u=$v(i),h=J_[c](o,l,s);h.style=u,t.graphicKey=h.type,t.pointer=h}var f=P_(n);ny(e,t,f,n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=P_(e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=ey(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,o=r.coordinateSystem,a=Q_(r),s=tb(o,a),l=[t.x,t.y];l[a]+=e[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var c=tb(o,1-a),u=(c[1]+c[0])/2,h=[u,u];return h[a]=l[a],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(Kv),J_={line:function(t,e,n){var i=iy([e,n[0]],[e,n[1]],Q_(t));return{type:"Line",subPixelOptimize:!0,shape:i}},shadow:function(t,e,n){var i=t.getBandWidth(),r=n[1]-n[0];return{type:"Rect",shape:ry([e-i/2,n[0]],[i,r],Q_(t))}}};function Q_(t){return t.isHorizontal()?0:1}function tb(t,e){var n=t.getRect();return[n[Z_[e]],n[Z_[e]]+n[K_[e]]]}var eb=$_,nb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="single",e}(Di["a"]);function ib(t){Object(i["a"])(By),Vr.registerAxisPointerClass("SingleAxisPointer",eb),t.registerComponentView(nb),t.registerComponentView(N_),t.registerComponentModel(F_),Gi(t,"single",F_,F_.defaultOption),t.registerCoordinateSystem("single",q_)}var rb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(e,n,i){var r=Object(Gn["f"])(e);t.prototype.init.apply(this,arguments),ob(e,r)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),ob(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Ei["a"]);function ob(t,e){var n,i=t.cellSize;n=c["t"](i)?i:t.cellSize=[i,i],1===n.length&&(n[1]=n[0]);var r=c["H"]([0,1],(function(t){return Object(Gn["j"])(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]}));Object(Gn["h"])(t,e,{type:"box",ignoreSize:r})}var ab=rb,sb=n("ef59"),lb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,o=r.getRangeInfo(),a=r.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,o,i),this._renderLines(t,o,a,i),this._renderYearText(t,o,a,i),this._renderMonthText(t,s,a,i),this._renderWeekText(t,s,o,a,i)},e.prototype._renderDayRect=function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),a=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,c=new _e["a"]({shape:{x:l[0],y:l[1],width:o,height:a},cursor:"default",style:r});n.add(c)}},e.prototype._renderLines=function(t,e,n,i){var r=this,o=t.coordinateSystem,a=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){f(c.formatedDate),0===u&&(c=o.getDateInfo(e.start.y+"-"+e.start.m));var h=c.date;h.setMonth(h.getMonth()+1),c=o.getDateInfo(h)}function f(e){r._firstDayOfMonth.push(o.getDateInfo(e)),r._firstDayPoints.push(o.dataToRect([e],!1).tl);var l=r._getLinePointsOfOneWeek(t,e,n);r._tlpoints.push(l[0]),r._blpoints.push(l[l.length-1]),s&&r._drawSplitline(l,a,i)}f(o.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,n),a,i),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,n),a,i)},e.prototype._getEdgesPoints=function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},e.prototype._drawSplitline=function(t,e,n){var i=new Kn["a"]({z2:20,shape:{points:t},style:e});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var i=t.coordinateSystem,r=i.getDateInfo(e),o=[],a=0;a<7;a++){var s=i.getNextNDay(r.time,a),l=i.dataToRect([s.time],!1);o[2*s.day]=l.tl,o[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,e){return"string"===typeof t&&t?Object(Ce["g"])(t,e):"function"===typeof t?t(e):e.nameMap},e.prototype._yearTextPositionControl=function(t,e,n,i,r){var o=e[0],a=e[1],s=["center","bottom"];"bottom"===i?(a+=r,s=["center","top"]):"left"===i?o-=r:"right"===i?(o+=r,s=["center","top"]):a-=r;var l=0;return"left"!==i&&"right"!==i||(l=Math.PI/2),{rotation:l,x:o,y:a,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var o=r.get("margin"),a=r.get("position");a||(a="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===n?0:1,h={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},f=e.start.y;+e.end.y>+e.start.y&&(f=f+"-"+e.end.y);var d=r.get("formatter"),p={start:e.start.y,end:e.end.y,nameMap:f},g=this._formatterLabel(d,p),m=new ae["a"]({z2:30,style:Object(Vt["c"])(r,{text:g})});m.attr(this._yearTextPositionControl(m,h[a],n,a,o)),i.add(m)}},e.prototype._monthTextPositionControl=function(t,e,n,i,r){var o="left",a="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(o="center"),"start"===i&&(a="bottom")):(s+=r,e&&(a="middle"),"start"===i&&(o="right")),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderMonthText=function(t,e,n,i){var r=t.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),a=r.get("margin"),s=r.get("position"),l=r.get("align"),u=[this._tlpoints,this._blpoints];o&&!Object(c["C"])(o)||(o&&(e=Object(sb["d"])(o)||e),o=e.get(["time","monthAbbr"])||[]);var h="start"===s?0:1,f="horizontal"===n?0:1;a="start"===s?-a:a;for(var d="center"===l,p=0;p<u[h].length-1;p++){var g=u[h][p].slice(),m=this._firstDayOfMonth[p];if(d){var v=this._firstDayPoints[p];g[f]=(v[f]+u[0][p+1][f])/2}var y=r.get("formatter"),_=o[+m.m-1],b={yyyy:m.y,yy:(m.y+"").slice(2),MM:m.m,M:+m.m,nameMap:_},x=this._formatterLabel(y,b),w=new ae["a"]({z2:30,style:Object(c["m"])(Object(Vt["c"])(r,{text:x}),this._monthTextPositionControl(g,d,n,s,a))});i.add(w)}}},e.prototype._weekTextPositionControl=function(t,e,n,i,r){var o="center",a="middle",s=t[0],l=t[1],c="start"===n;return"horizontal"===e?(s=s+i+(c?1:-1)*r[0]/2,o=c?"right":"left"):(l=l+i+(c?1:-1)*r[1]/2,a=c?"bottom":"top"),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderWeekText=function(t,e,n,i,r){var o=t.getModel("dayLabel");if(o.get("show")){var a=t.coordinateSystem,s=o.get("position"),l=o.get("nameMap"),u=o.get("margin"),h=a.getFirstDayOfWeek();if(!l||Object(c["C"])(l)){l&&(e=Object(sb["d"])(l)||e);var f=e.get(["time","dayOfWeekShort"]);l=f||Object(c["H"])(e.get(["time","dayOfWeekAbbr"]),(function(t){return t[0]}))}var d=a.getNextNDay(n.end.time,7-n.lweek).time,p=[a.getCellWidth(),a.getCellHeight()];u=Object(xe["p"])(u,Math.min(p[1],p[0])),"start"===s&&(d=a.getNextNDay(n.start.time,-(7+n.fweek)).time,u=-u);for(var g=0;g<7;g++){var m=a.getNextNDay(d,g),v=a.dataToRect([m.time],!1).center,y=g;y=Math.abs((g+h)%7);var _=new ae["a"]({z2:30,style:Object(c["m"])(Object(Vt["c"])(o,{text:l[y]}),this._weekTextPositionControl(v,i,s,u,p))});r.add(_)}}},e.type="calendar",e}(Di["a"]),cb=lb,ub=864e5,hb=function(){function t(e,n,i){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){t=xe["o"](t);var e=t.getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,r=t.getDate(),o=r<10?"0"+r:""+r,a=t.getDay();return a=Math.abs((a+7-this.getFirstDayOfWeek())%7),{y:e+"",m:i,d:o,day:a,time:t.getTime(),formatedDate:e+"-"+i+"-"+o,date:t}},t.prototype.getNextNDay=function(t,e){return e=e||0,0===e||(t=new Date(this.getDateInfo(t).time),t.setDate(t.getDate()+e)),this.getDateInfo(t)},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],r=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];c["k"]([0,1],(function(t){u(r,t)&&(o[i[t]]=r[t]*a[t])}));var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=Gn["g"](o,s);function u(t,e){return null!=t[e]&&"auto"!==t[e]}c["k"]([0,1],(function(t){u(r,t)||(r[t]=l[i[t]]/a[t])})),this._sw=r[0],this._sh=r[1]},t.prototype.dataToPoint=function(t,e){c["t"](t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,r=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+ub))return[NaN,NaN];var o=n.day,a=this._getRangeInfo([i.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},t.prototype.convertToPixel=function(t,e,n){var i=fb(e);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var i=fb(e);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(c["t"](e)&&1===e.length&&(e=e[0]),c["t"](e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),r=i.date;r.setMonth(r.getMonth()+1);var o=this.getNextNDay(r,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var i=Math.floor(n[1].time/ub)-Math.floor(n[0].time/ub)+1,r=new Date(n[0].time),o=r.getDate(),a=n[1].date.getDate();r.setDate(o+i-1);var s=r.getDate();if(s!==a){var l=r.getTime()-n[1].time>0?1:-1;while((s=r.getDate())!==a&&(r.getTime()-n[1].time)*l>0)i-=l,r.setDate(s-l)}var c=Math.floor((i+n[0].day+6)/7),u=e?1-c:c-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:c,nthWeek:u,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return null;var r=7*(t-1)-i.fweek+e,o=new Date(i.start.time);return o.setDate(+i.start.d+r),this.getDateInfo(o)},t.create=function(e,n){var i=[];return e.eachComponent("calendar",(function(r){var o=new t(r,e,n);i.push(o),r.coordinateSystem=o})),e.eachSeries((function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("calendarIndex")||0])})),i},t.dimensions=["time","value"],t}();function fb(t){var e=t.calendarModel,n=t.seriesModel,i=e?e.coordinateSystem:n?n.coordinateSystem:null;return i}var db=hb;function pb(t){t.registerComponentModel(ab),t.registerComponentView(cb),t.registerCoordinateSystem("calendar",db)}var gb=se["o"](),mb={path:null,compoundPath:null,group:Pt["a"],image:h["a"],text:ae["a"]},vb=function(t){var e=t.graphic;c["t"](e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])},yb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return Object(At["b"])(e,t),e.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=i},e.prototype.optionUpdated=function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,o=[];this._flatten(i,o,null);var a=se["q"](r,o,"normalMerge"),s=this._elOptionsToUpdate=[];c["k"](a,(function(t,e){var n=t.newOption;n&&(s.push(n),Tb(t,n),Ob(r,e,n),Cb(r[e],n))}),this);for(var l=r.length-1;l>=0;l--)null==r[l]?r.splice(l,1):delete r[l].$action},e.prototype._flatten=function(t,e,n){c["k"](t,(function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;"group"===t.type&&i&&this._flatten(i,e,t),delete t.children}}),this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Ei["a"]),_b=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(){this._elMap=c["g"]()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group;c["k"](e,(function(e){var r=se["e"](e.id,null),o=null!=r?n.get(r):null,a=se["e"](e.parentId,null),s=null!=a?n.get(a):i,l=e.type,c=e.style;"text"===l&&c&&e.hv&&e.hv[1]&&(c.textVerticalAlign=c.textBaseline=c.verticalAlign=c.align=null);var u=e.textContent,h=e.textConfig;if(c&&Lm(c,l,!!h,!!u)){var f=km(c,l,!0);!h&&f.textConfig&&(h=e.textConfig=f.textConfig),!u&&f.textContent&&(u=f.textContent)}var d=wb(e);var p=e.$action||"merge";"merge"===p?o?o.attr(d):bb(r,s,d,n):"replace"===p?(xb(o,n),bb(r,s,d,n)):"remove"===p&&xb(o,n);var g=n.get(r);if(g&&u)if("merge"===p){var m=g.getTextContent();m?m.attr(u):g.setTextContent(new ae["a"](u))}else"replace"===p&&g.setTextContent(new ae["a"](u));if(g){var v=gb(g);v.__ecGraphicWidthOption=e.width,v.__ecGraphicHeightOption=e.height,Mb(g,t,e),fr["setTooltipConfig"]({el:g,componentModel:t,itemName:g.name,itemTooltipOption:e.tooltip})}}))}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,o=e.getWidth(),a=e.getHeight(),s=0;s<n.length;s++){var l=n[s],c=se["e"](l.id,null),u=null!=c?r.get(c):null;if(u&&u.isGroup){var h=u.parent,f=h===i,d=gb(u),p=gb(h);d.__ecGraphicWidth=Object(xe["p"])(d.__ecGraphicWidthOption,f?o:p.__ecGraphicWidth)||0,d.__ecGraphicHeight=Object(xe["p"])(d.__ecGraphicHeightOption,f?a:p.__ecGraphicHeight)||0}}for(s=n.length-1;s>=0;s--){l=n[s],c=se["e"](l.id,null),u=null!=c?r.get(c):null;if(u){h=u.parent,p=gb(h);var g=h===i?{width:o,height:a}:{width:p.__ecGraphicWidth,height:p.__ecGraphicHeight};Gn["i"](u,l,g,null,{hv:l.hv,boundingMode:l.bounding})}}},e.prototype._clear=function(){var t=this._elMap;t.each((function(e){xb(e,t)})),this._elMap=c["g"]()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(Di["a"]);function bb(t,e,n,i){var r=n.type;var o=c["q"](mb,r)?mb[r]:fr["getShapeClass"](r);var a=new o(n);e.add(a),i.set(t,a),gb(a).__ecGraphicId=t}function xb(t,e){var n=t&&t.parent;n&&("group"===t.type&&t.traverse((function(t){xb(t,e)})),e.removeKey(gb(t).__ecGraphicId),n.remove(t))}function wb(t){return t=c["m"]({},t),c["k"](["id","parentId","$action","hv","bounding","textContent"].concat(Gn["a"]),(function(e){delete t[e]})),t}function Sb(t,e){var n;return c["k"](e,(function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)})),n}function Tb(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}function Ob(t,e,n){var i=c["m"]({},n),r=t[e],o=n.$action||"merge";"merge"===o?r?(c["I"](r,i,!0),Gn["h"](r,i,{ignoreSize:!0}),Gn["c"](n,r)):t[e]=i:"replace"===o?t[e]=i:"remove"===o&&r&&(t[e]=null)}function Cb(t,e){if(t&&(t.hv=e.hv=[Sb(e,["left","right"]),Sb(e,["top","bottom"])],"group"===t.type)){var n=t,i=e;null==n.width&&(n.width=i.width=0),null==n.height&&(n.height=i.height=0)}}function Mb(t,e,n){var i=Object(Rt["a"])(t).eventData;t.silent||t.ignore||i||(i=Object(Rt["a"])(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),i&&(i.info=n.info)}function Ab(t){t.registerComponentModel(yb),t.registerComponentView(_b),t.registerPreprocessor(vb)}var Db=["x","y","radius","angle","single"],Eb=["cartesian2d","polar","singleAxis"];function Ib(t){var e=t.get("coordinateSystem");return Object(c["r"])(Eb,e)>=0}function Pb(t){return t+"Axis"}function Lb(t,e){var n,i=Object(c["g"])(),r=[],o=Object(c["g"])();t.eachComponent({mainType:"dataZoom",query:e},(function(t){o.get(t.uid)||s(t)}));do{n=!1,t.eachComponent("dataZoom",a)}while(n);function a(t){!o.get(t.uid)&&l(t)&&(s(t),n=!0)}function s(t){o.set(t.uid,!0),r.push(t),u(t)}function l(t){var e=!1;return t.eachTargetAxis((function(t,n){var r=i.get(t);r&&r[n]&&(e=!0)})),e}function u(t){t.eachTargetAxis((function(t,e){(i.get(t)||i.set(t,[]))[e]=!0}))}return r}function kb(t){var e=t.ecModel,n={infoList:[],infoMap:Object(c["g"])()};return t.eachTargetAxis((function(t,i){var r=e.getComponent(Pb(t),i);if(r){var o=r.getCoordSysModel();if(o){var a=o.uid,s=n.infoMap.get(a);s||(s={model:o,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(r)}}})),n}var jb=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),Rb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){var i=Nb(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var e=Nb(t);Object(c["I"])(this.option,t,!0),Object(c["I"])(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;Object(c["k"])([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=Object(c["g"])(),n=this._fillSpecifiedTargetAxis(e);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return Object(c["k"])(Db,(function(n){var i=this.getReferringComponents(Pb(n),se["a"]);if(i.specified){e=!0;var r=new jb;Object(c["k"])(i.models,(function(t){r.add(t.componentIndex)})),t.set(n,r)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,i=!0;if(i){var r="vertical"===e?"y":"x",o=n.findComponents({mainType:r+"Axis"});a(o,r)}if(i){o=n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}});a(o,"single")}function a(e,n){var r=e[0];if(r){var o=new jb;if(o.add(r.componentIndex),t.set(n,o),i=!1,"x"===n||"y"===n){var a=r.getReferringComponents("grid",se["b"]).models[0];a&&Object(c["k"])(e,(function(t){r.componentIndex!==t.componentIndex&&a===t.getReferringComponents("grid",se["b"]).models[0]&&o.add(t.componentIndex)}))}}}i&&Object(c["k"])(Db,(function(e){if(i){var r=n.findComponents({mainType:Pb(e),filter:function(t){return"category"===t.get("type",!0)}});if(r[0]){var o=new jb;o.add(r[0].componentIndex),t.set(e,o),i=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");Object(c["k"])([["start","startValue"],["end","endValue"]],(function(i,r){var o=null!=t[i[0]],a=null!=t[i[1]];o&&!a?e[r]="percent":!o&&a?e[r]="value":n?e[r]=n[r]:o&&(e[r]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(Pb(e),n))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,i){Object(c["k"])(n.indexList,(function(n){t.call(e,i,n)}))}))},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(Pb(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;Object(c["k"])([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;Object(c["k"])(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var r=n[i],o=this._targetAxisInfoMap.get(r),a=0;a<o.indexList.length;a++){var s=this.getAxisProxy(r,o.indexList[a]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},e}(Ei["a"]);function Nb(t){var e={};return Object(c["k"])(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}var Bb=Rb,Fb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="dataZoom.select",e}(Bb),zb=Fb,Vb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(Di["a"]),Hb=Vb,Gb=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="dataZoom.select",e}(Hb),Ub=Gb,Wb=c["k"],Xb=xe["c"],Yb=function(){function t(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(Ib(e)){var n=Pb(this._dimName),i=e.getReferringComponents(n,se["b"]).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return c["d"](this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,i=this.getAxisModel(),r=i.axis.scale,o=this._dataZoomModel.getRangePropMode(),a=[0,100],s=[],l=[];Wb(["start","end"],(function(i,c){var u=t[i],h=t[i+"Value"];"percent"===o[c]?(null==u&&(u=a[c]),h=r.parse(xe["l"](u,a,n))):(e=!0,h=null==h?n[c]:r.parse(h),u=xe["l"](h,n,a)),l[c]=h,s[c]=u})),Xb(l),Xb(s);var c=this._minMaxSpan;function u(t,e,n,i,o){var a=o?"Span":"ValueSpan";vh(0,t,n,"all",c["min"+a],c["max"+a]);for(var s=0;s<2;s++)e[s]=xe["l"](t[s],n,i,!0),o&&(e[s]=r.parse(e[s]))}return e?u(l,s,n,a,!1):u(s,l,a,n,!0),{valueWindow:l,percentWindow:s}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=qb(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=t.get("filterMode"),o=this._valueWindow;"none"!==r&&Wb(i,(function(t){var e=t.getData(),i=e.mapDimensionsAll(n);if(i.length){if("weakFilter"===r){var s=e.getStore(),l=c["H"](i,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,n,r,a=0;a<i.length;a++){var c=s.get(l[a],t),u=!isNaN(c),h=c<o[0],f=c>o[1];if(u&&!h&&!f)return!0;u&&(r=!0),h&&(e=!0),f&&(n=!0)}return r&&e&&n}))}else Wb(i,(function(n){if("empty"===r)t.setData(e=e.map(n,(function(t){return a(t)?t:NaN})));else{var i={};i[n]=o,e.selectRange(i)}}));Wb(i,(function(t){e.setApproximateExtent(o,t)}))}}))}function a(t){return t>=o[0]&&t<=o[1]}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;Wb(["min","max"],(function(i){var r=e.get(i+"Span"),o=e.get(i+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?r=xe["l"](n[0]+o,n,[0,100],!0):null!=r&&(o=xe["l"](r,[0,100],n,!0)-n[0]),t[i+"Span"]=r,t[i+"ValueSpan"]=o}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=xe["f"](n,[0,500]);i=Math.min(i,20);var r=t.axis.scale.rawExtentInfo;0!==e[0]&&r.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==e[1]&&r.setDeterminedMinMax("max",+n[1].toFixed(i)),r.freeze()}},t}();function qb(t,e,n){var i=[1/0,-1/0];Wb(n,(function(t){Object(Wi["k"])(i,t.getData(),e)}));var r=t.getAxisModel(),o=Object(To["a"])(r.axis.scale,r,i).calculate();return[o.min,o.max]}var Zb=Yb,Kb={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,r){var o=t.getComponent(Pb(i),r);e(i,r,o,n)}))}))}e((function(t,e,n,i){n.__dzAxisProxy=null}));var n=[];e((function(e,i,r,o){r.__dzAxisProxy||(r.__dzAxisProxy=new Zb(e,i,o,t),n.push(r.__dzAxisProxy))}));var i=Object(c["g"])();return Object(c["k"])(n,(function(t){Object(c["k"])(t.getTargetSeriesModels(),(function(t){i.set(t.uid,t)}))})),i},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,i){t.getAxisProxy(n,i).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}},$b=Kb;function Jb(t){t.registerAction("dataZoom",(function(t,e){var n=Lb(e,t);Object(c["k"])(n,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}var Qb=!1;function tx(t){Qb||(Qb=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,$b),Jb(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function ex(t){t.registerComponentModel(zb),t.registerComponentView(Ub),tx(t)}var nx=function(){function t(){}return t}(),ix={};function rx(t,e){ix[t]=e}function ox(t){return ix[t]}var ax=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;c["k"](this.option.feature,(function(t,n){var i=ox(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),c["I"](t,i.defaultOption))}))},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Ei["a"]),sx=ax;function lx(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),o={width:n.getWidth(),height:n.getHeight()},a=Object(Gn["g"])(i,o,r);Object(Gn["b"])(e.get("orient"),t,e.get("itemGap"),a.width,a.height),Object(Gn["i"])(t,i,o,r)}function cx(t,e){var n=Ce["j"](e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),t=new _e["a"]({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1}),t}var ux=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){var r=this.group;if(r.removeAll(),t.get("show")){var o=+t.get("itemSize"),a=t.get("feature")||{},s=this._features||(this._features={}),l=[];c["k"](a,(function(t,e){l.push(e)})),new Bs["a"](this._featureNames||[],l).add(u).update(u).remove(c["i"](u,null)).execute(),this._featureNames=l,lx(r,t,n),r.add(cx(r.getBoundingRect(),t)),r.eachChild((function(t){var e=t.__title,i=t.ensureState("emphasis"),a=i.textConfig||(i.textConfig={}),s=t.getTextContent(),l=s&&s.states.emphasis;if(l&&!c["w"](l)&&e){var u=l.style||(l.style={}),h=b["e"](e,ae["a"].makeFont(u)),f=t.x+r.x,d=t.y+r.y+o,p=!1;d+h.height>n.getHeight()&&(a.position="top",p=!0);var g=p?-5-h.height:o+8;f+h.width/2>n.getWidth()?(a.position=["100%",g],u.align="right"):f-h.width/2<0&&(a.position=[0,g],u.align="left")}}))}function u(r,o){var c,u=l[r],f=l[o],d=a[u],p=new pr["a"](d,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===u&&(d.title=i.newTitle),u&&!f){if(hx(u))c={onclick:p.option.onclick,featureName:u};else{var g=ox(u);if(!g)return;c=new g}s[u]=c}else if(c=s[f],!c)return;c.uid=Object(en["c"])("toolbox-feature"),c.model=p,c.ecModel=e,c.api=n;var m=c instanceof nx;u||!f?!p.get("show")||m&&c.unusable?m&&c.remove&&c.remove(e,n):(h(p,c,u),p.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&("emphasis"===e?Nt["r"]:Nt["C"])(i[t])},c instanceof nx&&c.render&&c.render(p,e,n,i)):m&&c.dispose&&c.dispose(e,n)}function h(i,a,s){var l,u,h=i.getModel("iconStyle"),f=i.getModel(["emphasis","iconStyle"]),d=a instanceof nx&&a.getIcons?a.getIcons():i.get("icon"),p=i.get("title")||{};"string"===typeof d?(l={},l[s]=d):l=d,"string"===typeof p?(u={},u[s]=p):u=p;var g=i.iconPaths={};c["k"](l,(function(s,l){var d=fr["createIcon"](s,{},{x:-o/2,y:-o/2,width:o,height:o});d.setStyle(h.getItemStyle());var p=d.ensureState("emphasis");p.style=f.getItemStyle();var m=new ae["a"]({style:{text:u[l],align:f.get("textAlign"),borderRadius:f.get("textBorderRadius"),padding:f.get("textPadding"),fill:null},ignore:!0});d.setTextContent(m),fr["setTooltipConfig"]({el:d,componentModel:t,itemName:l,formatterParamsExtra:{title:u[l]}}),d.__title=u[l],d.on("mouseover",(function(){var e=f.getItemStyle(),n="vertical"===t.get("orient")?null==t.get("right")?"right":"left":null==t.get("bottom")?"bottom":"top";m.setStyle({fill:f.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:f.get("textBackgroundColor")}),d.setTextConfig({position:f.get("textPosition")||n}),m.ignore=!t.get("showTitle"),Object(Nt["r"])(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",l])&&Object(Nt["C"])(this),m.hide()})),("emphasis"===i.get(["iconStatus",l])?Nt["r"]:Nt["C"])(d),r.add(d),d.on("click",c["c"](a.onclick,a,e,n,l)),g[l]=d}))}},e.prototype.updateView=function(t,e,n,i){c["k"](this._features,(function(t){t instanceof nx&&t.updateView&&t.updateView(t.model,e,n,i)}))},e.prototype.remove=function(t,e){c["k"](this._features,(function(n){n instanceof nx&&n.remove&&n.remove(t,e)})),this.group.removeAll()},e.prototype.dispose=function(t,e){c["k"](this._features,(function(n){n instanceof nx&&n.dispose&&n.dispose(t,e)}))},e.type="toolbox",e}(Di["a"]);function hx(t){return 0===t.indexOf("my")}var fx=ux,dx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",r="svg"===e.getZr().painter.getType(),o=r?"svg":n.get("type",!0)||"png",a=e.getConnectedDataURL({type:o,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!==typeof MouseEvent||!dy["a"].browser.newEdge&&(dy["a"].browser.ie||dy["a"].browser.edge))if(window.navigator.msSaveOrOpenBlob||r){var s=a.split(","),l=s[0].indexOf("base64")>-1,c=r?decodeURIComponent(s[1]):s[1];l&&(c=window.atob(c));var u=i+"."+o;if(window.navigator.msSaveOrOpenBlob){var h=c.length,f=new Uint8Array(h);while(h--)f[h]=c.charCodeAt(h);var d=new Blob([f]);window.navigator.msSaveOrOpenBlob(d,u)}else{var p=document.createElement("iframe");document.body.appendChild(p);var g=p.contentWindow,m=g.document;m.open("image/svg+xml","replace"),m.write(c),m.close(),g.focus(),m.execCommand("SaveAs",!0,u),document.body.removeChild(p)}}else{var v=n.get("lang"),y='<body style="margin:0;"><img src="'+a+'" style="max-width:100%;" title="'+(v&&v[0]||"")+'" /></body>',_=window.open();_.document.write(y),_.document.title=i}else{var b=document.createElement("a");b.download=i+"."+o,b.target="_blank",b.href=a;var x=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});b.dispatchEvent(x)}},e.getDefaultOption=function(t){var e={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])};return e},e}(nx);dx.prototype.unusable=!dy["a"].canvasSupported;var px=dx,gx="__ec_magicType_stack__",mx=[["line","bar"],["stack"]],vx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return c["k"](t.get("type"),(function(t){e[t]&&(n[t]=e[t])})),n},e.getDefaultOption=function(t){var e={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}};return e},e.prototype.onclick=function(t,e,n){var i=this.model,r=i.get(["seriesIndex",n]);if(yx[n]){var o,a={series:[]},s=function(t){var e=t.subType,r=t.id,o=yx[n](e,r,t,i);o&&(c["j"](o,t.option),a.series.push(o));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var u=l.dim,h=u+"Axis",f=t.getReferringComponents(h,se["b"]).models[0],d=f.componentIndex;a[h]=a[h]||[];for(var p=0;p<=d;p++)a[h][d]=a[h][d]||{};a[h][d].boundaryGap="bar"===n}}};c["k"](mx,(function(t){c["r"](t,n)>=0&&c["k"](t,(function(t){i.setIconStatus(t,"normal")}))})),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},s);var l=n;"stack"===n&&(o=c["I"]({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(l="tiled")),e.dispatchAction({type:"changeMagicType",currentType:l,newOption:a,newTitle:o,featureName:"magicType"})}},e}(nx),yx={line:function(t,e,n,i){if("bar"===t)return c["I"]({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(t,e,n,i){if("line"===t)return c["I"]({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(t,e,n,i){var r=n.get("stack")===gx;if("line"===t||"bar"===t)return i.setIconStatus("stack",r?"normal":"emphasis"),c["I"]({id:e,stack:r?"":gx},i.get(["option","stack"])||{},!0)}};Io["e"]({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)}));var _x=vx,bx=new Array(60).join("-"),xx="\t";function wx(t){var e={},n=[],i=[];return t.eachRawSeries((function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var o=r.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;e[a]||(e[a]={categoryAxis:o,valueAxis:r.getOtherAxis(o),series:[]},i.push({axisDim:o.dim,axisIndex:o.index})),e[a].series.push(t)}else n.push(t)}})),{seriesGroupByCategoryAxis:e,other:n,meta:i}}function Sx(t){var e=[];return c["k"](t,(function(t,n){var i=t.categoryAxis,r=t.valueAxis,o=r.dim,a=[" "].concat(c["H"](t.series,(function(t){return t.name}))),s=[i.model.getCategories()];c["k"](t.series,(function(t){var e=t.getRawData();s.push(t.getRawData().mapArray(e.mapDimension(o),(function(t){return t})))}));for(var l=[a.join(xx)],u=0;u<s[0].length;u++){for(var h=[],f=0;f<s.length;f++)h.push(s[f][u]);l.push(h.join(xx))}e.push(l.join("\n"))})),e.join("\n\n"+bx+"\n\n")}function Tx(t){return c["H"](t,(function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,r=arguments[t-1],o=e.getName(r),a=0;a<t-1;a++)i[a]=arguments[a];n.push((o?o+xx:"")+i.join(xx))})),n.join("\n")})).join("\n\n"+bx+"\n\n")}function Ox(t){var e=wx(t);return{value:c["n"]([Sx(e.seriesGroupByCategoryAxis),Tx(e.other)],(function(t){return!!t.replace(/[\n\t\s]/g,"")})).join("\n\n"+bx+"\n\n"),meta:e.meta}}function Cx(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function Mx(t){var e=t.slice(0,t.indexOf("\n"));if(e.indexOf(xx)>=0)return!0}var Ax=new RegExp("["+xx+"]+","g");function Dx(t){for(var e=t.split(/\n+/g),n=Cx(e.shift()).split(Ax),i=[],r=c["H"](n,(function(t){return{name:t,data:[]}})),o=0;o<e.length;o++){var a=Cx(e[o]).split(Ax);i.push(a.shift());for(var s=0;s<a.length;s++)r[s]&&(r[s].data[o]=a[s])}return{series:r,categories:i}}function Ex(t){for(var e=t.split(/\n+/g),n=Cx(e.shift()),i=[],r=0;r<e.length;r++){var o=Cx(e[r]);if(o){var a=o.split(Ax),s="",l=void 0,c=!1;isNaN(a[0])?(c=!0,s=a[0],a=a.slice(1),i[r]={name:s,value:[]},l=i[r].value):l=i[r]=[];for(var u=0;u<a.length;u++)l.push(+a[u]);1===l.length&&(c?i[r].value=l[0]:i[r]=l[0])}}return{name:n,data:i}}function Ix(t,e){var n=t.split(new RegExp("\n*"+bx+"\n*","g")),i={series:[]};return c["k"](n,(function(t,n){if(Mx(t)){var r=Dx(t),o=e[n],a=o.axisDim+"Axis";o&&(i[a]=i[a]||[],i[a][o.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else{r=Ex(t);i.series.push(r)}})),i}var Px=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.onclick=function(t,e){var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),a=i.get("lang")||[];o.innerHTML=a[0]||i.get("title"),o.style.cssText="margin: 10px 20px;",o.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var u=i.get("optionToContent"),h=i.get("contentToOption"),f=Ox(t);if("function"===typeof u){var d=u(e.getOption());"string"===typeof d?s.innerHTML=d:c["v"](d)&&s.appendChild(d)}else s.appendChild(l),l.readOnly=i.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=i.get("textColor"),l.style.borderColor=i.get("textareaBorderColor"),l.style.backgroundColor=i.get("textareaColor"),l.value=f.value;var p=f.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:0;left:0;right:0;";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var _=this;function b(){n.removeChild(r),_._dom=null}Object(Eo["a"])(v,"click",b),Object(Eo["a"])(y,"click",(function(){if(null==h&&null!=u||null!=h&&null==u)b();else{var t;try{t="function"===typeof h?h(s,e.getOption()):Ix(l.value,p)}catch(n){throw b(),new Error("Data view format error "+n)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),b()}})),v.innerHTML=a[1],y.innerHTML=a[2],y.style.cssText=m,v.style.cssText=m,!i.get("readOnly")&&g.appendChild(y),g.appendChild(v),r.appendChild(o),r.appendChild(s),r.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){var e={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"};return e},e}(nx);function Lx(t,e){return c["H"](t,(function(t,n){var i=e&&e[n];if(c["A"](i)&&!c["t"](i)){var r=c["A"](t)&&!c["t"](t);r||(t={value:t});var o=null!=i.name&&null==t.name;return t=c["j"](t,i),o&&delete t.name,t}return t}))}Io["e"]({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var n=[];c["k"](t.newOption.series,(function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:Lx(t.data,r)})}else n.push(c["m"]({type:"scatter"},t))})),e.mergeOption(c["j"]({series:n},t.newOption))}));var kx=Px,jx=c["k"],Rx=Object(se["o"])();function Nx(t,e){var n=Vx(t);jx(e,(function(e,i){for(var r=n.length-1;r>=0;r--){var o=n[r];if(o[i])break}if(r<0){var a=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(a){var s=a.getPercentRange();n[0][i]={dataZoomId:i,start:s[0],end:s[1]}}}})),n.push(e)}function Bx(t){var e=Vx(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return jx(n,(function(t,n){for(var r=e.length-1;r>=0;r--)if(t=e[r][n],t){i[n]=t;break}})),i}function Fx(t){Rx(t).snapshots=null}function zx(t){return Vx(t).length}function Vx(t){var e=Rx(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var Hx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.onclick=function(t,e){Fx(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){var e={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])};return e},e}(nx);Io["e"]({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")}));var Gx=Hx,Ux=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],Wx=function(){function t(t,e,n){var i=this;this._targetInfoList=[];var r=Yx(e,t);Object(c["k"])(qx,(function(t,e){(!n||!n.include||Object(c["r"])(n.include,e)>=0)&&t(r,i._targetInfoList)}))}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,(function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=$x[t.brushType](0,n,e);t.__rangeOffset={offset:Qx[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})),t},t.prototype.matchOutputRanges=function(t,e,n){Object(c["k"])(t,(function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&Object(c["k"])(i.coordSyses,(function(i){var r=$x[t.brushType](1,i,t.range,!0);n(t,r.values,i,e)}))}),this)},t.prototype.setInputRanges=function(t,e){Object(c["k"])(t,(function(t){var n=this.findTargetInfo(t,e);if(t.range=t.range||[],n&&!0!==n){t.panelId=n.panelId;var i=$x[t.brushType](0,n.coordSys,t.coordRange),r=t.__rangeOffset;t.range=r?Qx[t.brushType](i.values,r.offset,ew(i.xyMinMax,r.xyMinMax)):i.values}}),this)},t.prototype.makePanelOpts=function(t,e){return Object(c["H"])(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:kf(i),isTargetByCursor:Rf(i,t,n.coordSysModel),getLinearBrushOtherExtent:jf(i)}}))},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&Object(c["r"])(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=Yx(e,t),r=0;r<n.length;r++){var o=n[r],a=t.panelId;if(a){if(o.panelId===a)return o}else for(var s=0;s<Zx.length;s++)if(Zx[s](i,o))return o}return!0},t}();function Xx(t){return t[0]>t[1]&&t.reverse(),t}function Yx(t,e){return Object(se["s"])(t,e,{includeMainTypes:Ux})}var qx={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,o=Object(c["g"])(),a={},s={};(n||i||r)&&(Object(c["k"])(n,(function(t){var e=t.axis.grid.model;o.set(e.id,e),a[e.id]=!0})),Object(c["k"])(i,(function(t){var e=t.axis.grid.model;o.set(e.id,e),s[e.id]=!0})),Object(c["k"])(r,(function(t){o.set(t.id,t),a[t.id]=!0,s[t.id]=!0})),o.each((function(t){var r=t.coordinateSystem,o=[];Object(c["k"])(r.getCartesians(),(function(t,e){(Object(c["r"])(n,t.getAxis("x").model)>=0||Object(c["r"])(i,t.getAxis("y").model)>=0)&&o.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:o[0],coordSyses:o,getPanelRect:Kx.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){Object(c["k"])(t.geoModels,(function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:Kx.geo})}))}},Zx=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],Kx={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(fr["getTransform"](t)),e}},$x={lineX:Object(c["i"])(Jx,0),lineY:Object(c["i"])(Jx,1),rect:function(t,e,n,i){var r=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),o=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),a=[Xx([r[0],o[0]]),Xx([r[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,i){var r=[[1/0,-1/0],[1/0,-1/0]],o=Object(c["H"])(n,(function(n){var o=t?e.pointToData(n,i):e.dataToPoint(n,i);return r[0][0]=Math.min(r[0][0],o[0]),r[1][0]=Math.min(r[1][0],o[1]),r[0][1]=Math.max(r[0][1],o[0]),r[1][1]=Math.max(r[1][1],o[1]),o}));return{values:o,xyMinMax:r}}};function Jx(t,e,n,i){var r=n.getAxis(["x","y"][t]),o=Xx(Object(c["H"])([0,1],(function(t){return e?r.coordToData(r.toLocalCoord(i[t]),!0):r.toGlobalCoord(r.dataToCoord(i[t]))}))),a=[];return a[t]=o,a[1-t]=[NaN,NaN],{values:o,xyMinMax:a}}var Qx={lineX:Object(c["i"])(tw,0),lineY:Object(c["i"])(tw,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return Object(c["H"])(t,(function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]}))}};function tw(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function ew(t,e){var n=nw(t),i=nw(e),r=[n[0]/i[0],n[1]/i[1]];return isNaN(r[0])&&(r[0]=1),isNaN(r[1])&&(r[1]=1),r}function nw(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var iw=Wx,rw=n("2f1f"),ow=c["k"],aw=Object(se["p"])("toolbox-dataZoom_"),sw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new Lf(n.getZr()),this._brushController.on("brush",c["c"](this._onBrush,this)).mount()),hw(t,e,this,i,n),uw(t,e)},e.prototype.onclick=function(t,e,n){lw[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]);var r=new iw(cw(this.model),i,{include:["grid"]});r.matchOutputRanges(e,i,(function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(o("x",n,e[0]),o("y",n,e[1])):o({lineX:"x",lineY:"y"}[i],n,e)}})),Nx(i,n),this._dispatchZoomAction(n)}function o(t,e,r){var o=e.getAxis(t),s=o.model,l=a(t,s,i),c=l.findRepresentativeAxisProxy(s).getMinMaxSpan();null==c.minValueSpan&&null==c.maxValueSpan||(r=vh(0,r.slice(),o.scale.getExtent(),0,c.minValueSpan,c.maxValueSpan)),l&&(n[l.id]={dataZoomId:l.id,startValue:r[0],endValue:r[1]})}function a(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){var r=n.getAxisModel(t,e.componentIndex);r&&(i=n)})),i}},e.prototype._dispatchZoomAction=function(t){var e=[];ow(t,(function(t,n){e.push(c["d"](t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){var e={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}};return e},e}(nx),lw={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(Bx(this.ecModel))}};function cw(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}function uw(t,e){t.setIconStatus("back",zx(e)>1?"emphasis":"normal")}function hw(t,e,n,i,r){var o=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(o="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=o,t.setIconStatus("zoom",o?"emphasis":"normal");var a=new iw(cw(t),e,{include:["grid"]}),s=a.makePanelOpts(r,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(s).enableBrush(!(!o||!s.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}Object(rw["b"])("dataZoom",(function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),r=[],o=cw(i),a=Object(se["s"])(t,o);return ow(a.xAxisModels,(function(t){return s(t,"xAxis","xAxisIndex")})),ow(a.yAxisModels,(function(t){return s(t,"yAxis","yAxisIndex")})),r}function s(t,e,n){var o=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:aw+e+o};a[n]=o,r.push(a)}}));var fw=sw;function dw(t){t.registerComponentModel(sx),t.registerComponentView(fx),rx("saveAsImage",px),rx("magicType",_x),rx("dataView",kx),rx("dataZoom",fw),rx("restore",Gx),Object(i["a"])(ex)}var pw=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Ei["a"]),gw=pw,mw=n("65ed");function vw(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function yw(t){if(dy["a"].domSupported)for(var e=document.documentElement.style,n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n]}var _w=yw(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),bw=yw(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function xw(t,e){if(!t)return e;e=Object(Ce["k"])(e,!0);var n=t.indexOf(e);return t=-1===n?e:"-"+t.slice(0,n)+"-"+e,t.toLowerCase()}function ww(t,e){var n=t.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(t);return n?e?n[e]:n:null}var Sw=xw(bw,"transition"),Tw=xw(_w,"transform"),Ow="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(dy["a"].transform3dSupported?"will-change:transform;":"");function Cw(t){return t="left"===t?"right":"right"===t?"left":"top"===t?"bottom":"top",t}function Mw(t,e,n){if(!Object(c["C"])(n)||"inside"===n)return"";var i=t.get("backgroundColor"),r=t.get("borderWidth");e=Object(Ce["c"])(e);var o,a=Cw(n),s=Math.max(1.5*Math.round(r),6),l="",u=Tw+":";Object(c["r"])(["left","right"],a)>-1?(l+="top:50%",u+="translateY(-50%) rotate("+(o="left"===a?-225:-45)+"deg)"):(l+="left:50%",u+="translateX(-50%) rotate("+(o="top"===a?225:45)+"deg)");var h=o*Math.PI/180,f=s+r,d=f*Math.abs(Math.cos(h))+f*Math.abs(Math.sin(h)),p=Math.round(100*((d-Math.SQRT2*r)/2+Math.SQRT2*r-(d-f)/2))/100;l+=";"+a+":-"+p+"px";var g=e+" solid "+r+"px;",m=["position:absolute;width:"+s+"px;height:"+s+"px;",l+";"+u+";","border-bottom:"+g,"border-right:"+g,"background-color:"+i+";"];return'<div style="'+m.join("")+'"></div>'}function Aw(t,e){var n="cubic-bezier(0.23,1,0.32,1)",i=" "+t/2+"s "+n,r="opacity"+i+",visibility"+i;return e||(i=" "+t+"s "+n,r+=dy["a"].transformSupported?","+Tw+i:",left"+i+",top"+i),Sw+":"+r}function Dw(t,e,n){var i=t.toFixed(0)+"px",r=e.toFixed(0)+"px";if(!dy["a"].transformSupported)return n?"top:"+r+";left:"+i+";":[["top",r],["left",i]];var o=dy["a"].transform3dSupported,a="translate"+(o?"3d":"")+"("+i+","+r+(o?",0":"")+")";return n?"top:0;left:0;"+Tw+":"+a+";":[["top",0],["left",0],[_w,a]]}function Ew(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return r&&o&&e.push("text-shadow:"+a+"px "+s+"px "+o+"px "+r),Object(c["k"])(["decoration","align"],(function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)})),e.join(";")}function Iw(t,e,n){var i=[],r=t.get("transitionDuration"),o=t.get("backgroundColor"),s=t.get("shadowBlur"),l=t.get("shadowColor"),u=t.get("shadowOffsetX"),h=t.get("shadowOffsetY"),f=t.getModel("textStyle"),d=Object(lo["d"])(t,"html"),p=u+"px "+h+"px "+s+"px "+l;return i.push("box-shadow:"+p),e&&r&&i.push(Aw(r,n)),o&&(dy["a"].canvasSupported?i.push("background-color:"+o):(i.push("background-color:#"+Object(a["toHex"])(o)),i.push("filter:alpha(opacity=70)"))),Object(c["k"])(["width","color","radius"],(function(e){var n="border-"+e,r=Object(Ce["k"])(n),o=t.get(r);null!=o&&i.push(n+":"+o+("color"===e?"":"px"))})),i.push(Ew(f)),null!=d&&i.push("padding:"+Object(Ce["j"])(d).join("px ")+"px"),i.join(";")+";"}function Pw(t,e,n,i,r){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&Object(mw["c"])(t,a,document.body,i,r)}else{t[0]=i,t[1]=r;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Lw=function(){function t(t,e,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,dy["a"].wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var r=this._zr=e.getZr(),o=this._appendToBody=n&&n.appendToBody;Pw(this._styleCoord,r,o,e.getWidth()/2,e.getHeight()/2),o?document.body.appendChild(i):t.appendChild(i),this._container=t;var a=this;i.onmouseenter=function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0},i.onmousemove=function(t){if(t=t||window.event,!a._enterable){var e=r.handler,n=r.painter.getViewportRoot();Object(Eo["e"])(n,t,!0),e.dispatch("mousemove",t)}},i.onmouseleave=function(){a._inContent=!1,a._enterable&&a._show&&a.hideLater(a._hideDelay)}}return t.prototype.update=function(t){var e=this._container,n=ww(e,"position"),i=e.style;"absolute"!==i.position&&"absolute"!==n&&(i.position="relative");var r=t.get("alwaysShowContent");r&&this._moveIfResized(),this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,r=this._styleCoord;n.innerHTML?i.cssText=Ow+Iw(t,!this._firstShow,this._longHide)+Dw(r[0],r[1],!0)+"border-color:"+Object(Ce["c"])(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,n,i,r){var o=this.el;if(null!=t){var a="";if(Object(c["C"])(r)&&"item"===n.get("trigger")&&!vw(n)&&(a=Mw(n,i,r)),Object(c["C"])(t))o.innerHTML=t+a;else if(t){o.innerHTML="",Object(c["t"])(t)||(t=[t]);for(var s=0;s<t.length;s++)Object(c["v"])(t[s])&&t[s].parentNode!==o&&o.appendChild(t[s]);if(a&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=a,o.appendChild(l)}}}else o.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(Pw(n,this._zr,this._appendToBody,t,e),null!=n[0]&&null!=n[1]){var i=this.el.style,r=Dw(n[0],n[1]);Object(c["k"])(r,(function(t){i[t[0]]=t[1]}))}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",dy["a"].transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Object(c["c"])(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},t}(),kw=Lw,jw=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),Bw(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized()},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,i,r){c["A"](t)&&Object(Wd["c"])(""),this.el&&this._zr.remove(this.el);var o=n.getModel("textStyle");this.el=new ae["a"]({style:{rich:e.richTextStyles,text:t,lineHeight:22,backgroundColor:n.get("backgroundColor"),borderRadius:n.get("borderRadius"),borderWidth:1,borderColor:i,shadowColor:n.get("shadowColor"),shadowBlur:n.get("shadowBlur"),shadowOffsetX:n.get("shadowOffsetX"),shadowOffsetY:n.get("shadowOffsetY"),textShadowColor:o.get("textShadowColor"),textShadowBlur:o.get("textShadowBlur")||0,textShadowOffsetX:o.get("textShadowOffsetX")||0,textShadowOffsetY:o.get("textShadowOffsetY")||0,fill:n.get(["textStyle","color"]),padding:Object(lo["d"])(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),this._zr.add(this.el);var a=this;this.el.on("mouseover",(function(){a._enterable&&(clearTimeout(a._hideTimeout),a._show=!0),a._inContent=!0})),this.el.on("mouseout",(function(){a._enterable&&a._show&&a.hideLater(a._hideDelay),a._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=Nw(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;Bw(i,this._zr,t,e),t=i[0],e=i[1];var r=n.style,o=Rw(r.borderWidth||0),a=Nw(r);n.x=t+o+a.left,n.y=e+o+a.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(c["c"](this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function Rw(t){return Math.max(0,t)}function Nw(t){var e=Rw(t.shadowBlur||0),n=Rw(t.shadowOffsetX||0),i=Rw(t.shadowOffsetY||0);return{left:Rw(e-n),right:Rw(e+n),top:Rw(e-i),bottom:Rw(e+i)}}function Bw(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var Fw=jw,zw=n("f876"),Vw=n("38a2"),Hw=c["c"],Gw=c["k"],Uw=xe["p"],Ww=new _e["a"]({shape:{x:-1,y:-1,width:2,height:2}}),Xw=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){if(!dy["a"].node){var n=t.getComponent("tooltip"),i=n.get("renderMode");this._renderMode=Object(se["i"])(i),this._tooltipContent="richText"===this._renderMode?new Fw(e):new kw(e.getDom(),e,{appendToBody:n.get("appendToBody",!0)})}},e.prototype.render=function(t,e,n){if(!dy["a"].node){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n,this._alwaysShowContent=t.get("alwaysShowContent");var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),this._updatePosition="html"===this._renderMode?Object(on["c"])(Hw(this._doUpdatePosition,this),50):this._doUpdatePosition}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel,e=t.get("triggerOn");my("itemTooltip",this._api,Hw((function(t,n,i){"none"!==e&&(e.indexOf(t)>=0?this._tryShow(n,i):"leave"===t&&this._hide(i))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==t.get("triggerOn")){var i=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&i.manuallyShowTip(t,e,n,{x:i._lastX,y:i._lastY,dataByCoordSys:i._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,n,i){if(i.from!==this.uid&&!dy["a"].node){var r=qw(i,n);this._ticket="";var o=i.dataByCoordSys,a=Qw(i,e,n);if(a){var s=a.el.getBoundingRect().clone();s.applyTransform(a.el.transform),this._tryShow({offsetX:s.x+s.width/2,offsetY:s.y+s.height/2,target:a.el,position:i.position,positionDefault:"bottom"},r)}else if(i.tooltip&&null!=i.x&&null!=i.y){var l=Ww;l.x=i.x,l.y=i.y,l.update(),Object(Rt["a"])(l).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:l},r)}else if(o)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:o,tooltipOption:i.tooltipOption},r);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var c=Oy(i,e),u=c.point[0],h=c.point[1];null!=u&&null!=h&&this._tryShow({offsetX:u,offsetY:h,target:c.el,position:i.position,positionDefault:"bottom"},r)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},r))}},e.prototype.manuallyHideTip=function(t,e,n,i){var r=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(qw(i,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,i){var r=i.seriesIndex,o=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s){var l=s.getData(),c=Yw([l.getItemModel(o),s,(s.coordinateSystem||{}).model],this._tooltipModel);if("axis"===c.get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}}},e.prototype._tryShow=function(t,e){var n=t.target,i=this._tooltipModel;if(i){this._lastX=t.offsetX,this._lastY=t.offsetY;var r=t.dataByCoordSys;if(r&&r.length)this._showAxisTooltip(r,t);else if(n){var o,a;this._lastDataByCoordSys=null,Object(ka["a"])(n,(function(t){return null!=Object(Rt["a"])(t).dataIndex?(o=t,!0):null!=Object(Rt["a"])(t).tooltipConfig?(a=t,!0):void 0}),!0),o?this._showSeriesItemTooltip(t,o,e):a?this._showComponentItemTooltip(t,a,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=c["c"](e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,i=this._tooltipModel,r=[e.offsetX,e.offsetY],o=Yw([e.tooltipOption],i),a=this._renderMode,s=[],l=Object(lo["c"])("section",{blocks:[],noHeader:!0}),u=[],h=new lo["a"];Gw(t,(function(t){Gw(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),i=t.value;if(e&&null!=i){var r=ty(i,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),o=Object(lo["c"])("section",{header:r,noHeader:!c["T"](r),sortBlocks:!0,blocks:[]});l.blocks.push(o),c["k"](t.seriesDataIndices,(function(l){var c=n.getSeriesByIndex(l.seriesIndex),f=l.dataIndexInside,d=c.getDataParams(f);if(!(d.dataIndex<0)){d.axisDim=t.axisDim,d.axisIndex=t.axisIndex,d.axisType=t.axisType,d.axisId=t.axisId,d.axisValue=Wi["c"](e.axis,{value:i}),d.axisValueLabel=r,d.marker=h.makeTooltipMarker("item",Ce["c"](d.color),a);var p=Object(Vw["b"])(c.formatTooltip(f,!0,null));p.markupFragment&&o.blocks.push(p.markupFragment),p.markupText&&u.push(p.markupText),s.push(d)}}))}}))})),l.blocks.reverse(),u.reverse();var f=e.position,d=o.get("order"),p=Object(lo["b"])(l,h,a,d,n.get("useUTC"),o.get("textStyle"));p&&u.unshift(p);var g="richText"===a?"\n\n":"<br/>",m=u.join(g);this._showOrMove(o,(function(){this._updateContentNotChangedOnAxis(t,s)?this._updatePosition(o,f,r[0],r[1],this._tooltipContent,s):this._showTooltipContent(o,m,s,Math.random()+"",r[0],r[1],f,null,h)}))},e.prototype._showSeriesItemTooltip=function(t,e,n){var i=this._ecModel,r=Object(Rt["a"])(e),o=r.seriesIndex,a=i.getSeriesByIndex(o),s=r.dataModel||a,l=r.dataIndex,c=r.dataType,u=s.getData(c),h=this._renderMode,f=t.positionDefault,d=Yw([u.getItemModel(l),s,a&&(a.coordinateSystem||{}).model],this._tooltipModel,f?{position:f}:null),p=d.get("trigger");if(null==p||"item"===p){var g=s.getDataParams(l,c),m=new lo["a"];g.marker=m.makeTooltipMarker("item",Ce["c"](g.color),h);var v=Object(Vw["b"])(s.formatTooltip(l,!1,c)),y=d.get("order"),_=v.markupFragment?Object(lo["b"])(v.markupFragment,m,h,y,i.get("useUTC"),d.get("textStyle")):v.markupText,b="item_"+s.name+"_"+l;this._showOrMove(d,(function(){this._showTooltipContent(d,_,g,b,t.offsetX,t.offsetY,t.position,t.target,m)})),n({type:"showTip",dataIndexInside:l,dataIndex:u.getRawIndex(l),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var i=Object(Rt["a"])(e),r=i.tooltipConfig,o=r.option||{};if(c["C"](o)){var a=o;o={content:a,formatter:a}}var s=[o],l=this._ecModel.getComponent(i.componentMainType,i.componentIndex);l&&s.push(l),s.push({formatter:o.content});var u=t.positionDefault,h=Yw(s,this._tooltipModel,u?{position:u}:null),f=h.get("content"),d=Math.random()+"",p=new lo["a"];this._showOrMove(h,(function(){var n=c["d"](h.get("formatterParams")||{});this._showTooltipContent(h,f,n,d,t.offsetX,t.offsetY,t.position,e,p)})),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,i,r,o,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var u=this._tooltipContent,h=t.get("formatter");a=a||t.get("position");var f=e,d=this._getNearestPoint([r,o],n,t.get("trigger"),t.get("borderColor")),p=d.color;if(h)if(c["C"](h)){var g=t.ecModel.get("useUTC"),m=c["t"](n)?n[0]:n,v=m&&m.axisType&&m.axisType.indexOf("time")>=0;f=h,v&&(f=Object(zw["h"])(m.axisValue,f,g)),f=Ce["f"](f,n,!0)}else if(c["w"](h)){var y=Hw((function(e,i){e===this._ticket&&(u.setContent(i,l,t,p,a),this._updatePosition(t,a,r,o,u,n,s))}),this);this._ticket=i,f=h(n,i,y)}else f=h;u.setContent(f,l,t,p,a),u.show(t,p),this._updatePosition(t,a,r,o,u,n,s)}},e.prototype._getNearestPoint=function(t,e,n,i){return"axis"===n||c["t"](e)?{color:i||("html"===this._renderMode?"#fff":"none")}:c["t"](e)?void 0:{color:i||e.color||e.borderColor}},e.prototype._doUpdatePosition=function(t,e,n,i,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var u=r.getSize(),h=t.get("align"),f=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),c["w"](e)&&(e=e([n,i],o,r.el,d,{viewSize:[s,l],contentSize:u.slice()})),c["t"](e))n=Uw(e[0],s),i=Uw(e[1],l);else if(c["A"](e)){var p=e;p.width=u[0],p.height=u[1];var g=Gn["g"](p,{width:s,height:l});n=g.x,i=g.y,h=null,f=null}else if(c["C"](e)&&a){var m=$w(e,d,u,t.get("borderWidth"));n=m[0],i=m[1]}else{m=Zw(n,i,r,s,l,h?null:20,f?null:20);n=m[0],i=m[1]}if(h&&(n-=Jw(h)?u[0]/2:"right"===h?u[0]:0),f&&(i-=Jw(f)?u[1]/2:"bottom"===f?u[1]:0),vw(t)){m=Kw(n,i,r,s,l);n=m[0],i=m[1]}r.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,i=this._cbParamsList,r=!!n&&n.length===t.length;return r&&Gw(n,(function(n,o){var a=n.dataByAxis||[],s=t[o]||{},l=s.dataByAxis||[];r=r&&a.length===l.length,r&&Gw(a,(function(t,n){var o=l[n]||{},a=t.seriesDataIndices||[],s=o.seriesDataIndices||[];r=r&&t.value===o.value&&t.axisType===o.axisType&&t.axisId===o.axisId&&a.length===s.length,r&&Gw(a,(function(t,e){var n=s[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})),i&&c["k"](t.seriesDataIndices,(function(t){var n=t.seriesIndex,o=e[n],a=i[n];o&&a&&a.data!==o.data&&(r=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){dy["a"].node||(this._tooltipContent.dispose(),wy("itemTooltip",e))},e.type="tooltip",e}(Di["a"]);function Yw(t,e,n){var i,r=e.ecModel;n?(i=new pr["a"](n,r,r),i=new pr["a"](e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof pr["a"]&&(a=a.get("tooltip",!0)),c["C"](a)&&(a={formatter:a}),a&&(i=new pr["a"](a,i,r)))}return i}function qw(t,e){return t.dispatchAction||c["c"](e.dispatchAction,e)}function Zw(t,e,n,i,r,o,a){var s=n.getSize(),l=s[0],c=s[1];return null!=o&&(t+l+o+2>i?t-=l+o:t+=o),null!=a&&(e+c+a>r?e-=c+a:e+=a),[t,e]}function Kw(t,e,n,i,r){var o=n.getSize(),a=o[0],s=o[1];return t=Math.min(t+a,i)-a,e=Math.min(e+s,r)-s,t=Math.max(t,0),e=Math.max(e,0),[t,e]}function $w(t,e,n,i){var r=n[0],o=n[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,c=e.width,u=e.height;switch(t){case"inside":s=e.x+c/2-r/2,l=e.y+u/2-o/2;break;case"top":s=e.x+c/2-r/2,l=e.y-o-a;break;case"bottom":s=e.x+c/2-r/2,l=e.y+u+a;break;case"left":s=e.x-r-a,l=e.y+u/2-o/2;break;case"right":s=e.x+c+a,l=e.y+u/2-o/2}return[s,l]}function Jw(t){return"center"===t||"middle"===t}function Qw(t,e,n){var i=Object(se["t"])(t).queryOptionMap,r=i.keys()[0];if(r&&"series"!==r){var o=Object(se["v"])(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(a){var s,l=n.getViewOfComponentModel(a);return l.group.traverse((function(e){var n=Object(Rt["a"])(e).tooltipConfig;if(n&&n.name===t.name)return s=e,!0})),s?{componentMainType:r,componentIndex:a.componentIndex,el:s}:void 0}}}var tS=Xw;function eS(t){Object(i["a"])(By),t.registerComponentModel(gw),t.registerComponentView(tS),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},(function(){})),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},(function(){}))}var nS=["rect","polygon","keep","clear"];function iS(t,e){var n=Object(se["r"])(t?t.brush:[]);if(n.length){var i=[];c["k"](n,(function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))}));var r=t&&t.toolbox;c["t"](r)&&(r=r[0]),r||(r={feature:{}},t.toolbox=[r]);var o=r.feature||(r.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),rS(s),e&&!s.length&&s.push.apply(s,nS)}}function rS(t){var e={};c["k"](t,(function(t){e[t]=1})),t.length=0,c["k"](e,(function(e,n){t.push(n)}))}var oS=n("0924"),aS=c["k"];function sS(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function lS(t,e,n){var i={};return aS(e,(function(e){var o=i[e]=r();aS(t[e],(function(t,i){if(Al.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),o[i]=new Al(r),"opacity"===i&&(r=c["d"](r),r.type="colorAlpha",o.__hidden.__alphaForOpacity=new Al(r))}}))})),i;function r(){var t=function(){};t.prototype.__hidden=t.prototype;var e=new t;return e}}function cS(t,e,n){var i;c["k"](n,(function(t){e.hasOwnProperty(t)&&sS(e[t])&&(i=!0)})),i&&c["k"](n,(function(n){e.hasOwnProperty(n)&&sS(e[n])?t[n]=c["d"](e[n]):delete t[n]}))}function uS(t,e,n,i,r,o){var a,s={};function l(t){return Object(oS["a"])(n,a,t)}function u(t,e){Object(oS["c"])(n,a,t,e)}function h(t,c){a=null==o?t:c;var h=n.getRawDataItem(a);if(!h||!1!==h.visualMap)for(var f=i.call(r,t),d=e[f],p=s[f],g=0,m=p.length;g<m;g++){var v=p[g];d[v]&&d[v].applyVisual(t,l,u)}}c["k"](t,(function(t){var n=Al.prepareVisualTypes(e[t]);s[t]=n})),null==o?n.each(h):n.each([o],h)}function hS(t,e,n,i){var r={};return c["k"](t,(function(t){var n=Al.prepareVisualTypes(e[t]);r[t]=n})),{progress:function(t,o){var a,s;function l(t){return Object(oS["a"])(o,s,t)}function c(t,e){Object(oS["c"])(o,s,t,e)}null!=i&&(a=o.getDimensionIndex(i));var u=o.getStore();while(null!=(s=t.next())){var h=o.getRawDataItem(s);if(!h||!1!==h.visualMap)for(var f=null!=i?u.get(a,s):s,d=n(f),p=e[d],g=r[d],m=0,v=g.length;m<v;m++){var y=g[m];p[y]&&p[y].applyVisual(f,l,c)}}}}}var fS=n("0655");function dS(t){var e=t.brushType,n={point:function(i){return pS[e].point(i,n,t)},rect:function(i){return pS[e].rect(i,n,t)}};return n}var pS={lineX:gS(0),lineY:gS(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&fS["a"](n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,o=t.y,a=t.width,s=t.height,l=i[0];return!!(fS["a"](i,r,o)||fS["a"](i,r+a,o)||fS["a"](i,r,o+s)||fS["a"](i,r+a,o+s)||Xi["a"].create(t).contain(l[0],l[1])||Object(fr["linePolygonIntersect"])(r,o,r+a,o,i)||Object(fr["linePolygonIntersect"])(r,o,r,o+s,i)||Object(fr["linePolygonIntersect"])(r+a,o,r+a,o+s,i)||Object(fr["linePolygonIntersect"])(r,o+s,r+a,o+s,i))||void 0}}};function gS(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var r=i.range,o=e[t];return mS(o,r)}},rect:function(i,r,o){if(i){var a=o.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),mS(s[0],a)||mS(s[1],a)||mS(a[0],s)||mS(a[1],s)}}}}function mS(t,e){return e[0]<=t&&t<=e[1]}var vS=["inBrush","outOfBrush"],yS="__ecBrushSelect",_S="__ecInBrushSelectEvent";function bS(t){t.eachComponent({mainType:"brush"},(function(e){var n=e.brushTargetManager=new iw(e.option,t);n.setInputRanges(e.areas,t)}))}function xS(t,e,n){var i,r,o=[];t.eachComponent({mainType:"brush"},(function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})})),bS(t),t.eachComponent({mainType:"brush"},(function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:c["d"](e.areas),selected:[]};o.push(a);var s=e.option,l=s.brushLink,u=[],h=[],f=[],d=!1;n||(i=s.throttleType,r=s.throttleDelay);var p=c["H"](e.areas,(function(t){var e=CS[t.brushType],n=c["j"]({boundingRect:e?e(t):void 0},t);return n.selectors=dS(n),n})),g=lS(e.option,vS,(function(t){t.mappingMethod="fixed"}));function m(t){return"all"===l||!!u[t]}function v(t){return!!t.length}function y(t,e){var n=t.coordinateSystem;d=d||n.hasAxisBrushed(),m(e)&&n.eachActiveState(t.getData(),(function(t,e){"active"===t&&(h[e]=1)}))}function _(n,i,r){if(n.brushSelector&&!OS(e,i)&&(c["k"](p,(function(i){e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),d=d||v(r)})),m(i)&&v(r))){var o=n.getData();o.each((function(t){TS(n,r,o,t)&&(h[t]=1)}))}}c["t"](l)&&c["k"](l,(function(t){u[t]=1})),t.eachSeries((function(t,e){var n=f[e]=[];"parallel"===t.subType?y(t,e):_(t,e,n)})),t.eachSeries((function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var i=f[e],r=t.getData(),o=m(e)?function(t){return h[t]?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return TS(t,i,r,e)?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(m(e)?d:v(i))&&uS(vS,g,r,o)}))})),wS(e,i,r,o,n)}function wS(t,e,n,i,r){if(r){var o=t.getZr();if(!o[_S]){o[yS]||(o[yS]=SS);var a=on["b"](o,yS,n,e);a(t,i)}}}function SS(t,e){if(!t.isDisposed()){var n=t.getZr();n[_S]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[_S]=!1}}function TS(t,e,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(t.brushSelector(i,n,a.selectors,a))return!0}}function OS(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(c["t"](n)?c["r"](n,e)<0:e!==n)}var CS={rect:function(t){return MS(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var o=n[i];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&MS(e)}};function MS(t){return new Xi["a"](t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var AS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new Lf(e.getZr())).on("brush",c["c"](this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,i){this.model=t,this._updateController(t,e,n,i)},e.prototype.updateTransform=function(t,e,n,i){bS(e),this._updateController(t,e,n,i)},e.prototype.updateVisual=function(t,e,n,i){this.updateTransform(t,e,n,i)},e.prototype.updateView=function(t,e,n,i){this._updateController(t,e,n,i)},e.prototype._updateController=function(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:c["d"](n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:c["d"](n),$from:e})},e.type="brush",e}(Di["a"]),DS=AS,ES="#ddd",IS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&cS(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:ES},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=c["H"](t,(function(t){return PS(this.option,t)}),this))},e.prototype.setBrushOption=function(t){this.brushOption=PS(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Ei["a"]);function PS(t,e){return c["I"]({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new pr["a"](t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var LS=IS,kS=["rect","polygon","lineX","lineY","keep","clear"],jS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){var i,r,o;e.eachComponent({mainType:"brush"},(function(t){i=t.brushType,r=t.brushOption.brushMode||"single",o=o||!!t.areas.length})),this._brushType=i,this._brushMode=r,c["k"](t.get("type",!0),(function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?o:e===i)?"emphasis":"normal")}))},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return c["k"](t.get("type",!0),(function(t){e[t]&&(n[t]=e[t])})),n},e.prototype.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},e.getDefaultOption=function(t){var e={show:!0,type:kS.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])};return e},e}(nx),RS=jS;function NS(t){t.registerComponentView(DS),t.registerComponentModel(LS),t.registerPreprocessor(iS),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,xS),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},(function(t,e){e.eachComponent({mainType:"brush",query:t},(function(e){e.setAreas(t.areas)}))})),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},(function(){})),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},(function(){})),rx("brush",RS)}var BS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return Object(At["b"])(e,t),e.type="title",e.defaultOption={zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Ei["a"]),FS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=c["P"](t.get("textBaseline"),t.get("textVerticalAlign")),l=new ae["a"]({style:Object(Vt["c"])(r,{text:t.get("text"),fill:r.getTextColor()},{disableBox:!0}),z2:10}),u=l.getBoundingRect(),h=t.get("subtext"),f=new ae["a"]({style:Object(Vt["c"])(o,{text:h,fill:o.getTextColor(),y:u.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),p=t.get("sublink"),g=t.get("triggerEvent",!0);l.silent=!d&&!g,f.silent=!p&&!g,d&&l.on("click",(function(){Object(Ce["l"])(d,"_"+t.get("target"))})),p&&f.on("click",(function(){Object(Ce["l"])(p,"_"+t.get("subtarget"))})),Object(Rt["a"])(l).eventData=Object(Rt["a"])(f).eventData=g?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),h&&i.add(f);var m=i.getBoundingRect(),v=t.getBoxLayoutParams();v.width=m.width,v.height=m.height;var y=Object(Gn["g"])(v,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||(a=t.get("left")||t.get("right"),"middle"===a&&(a="center"),"right"===a?y.x+=y.width:"center"===a&&(y.x+=y.width/2)),s||(s=t.get("top")||t.get("bottom"),"center"===s&&(s="middle"),"bottom"===s?y.y+=y.height:"middle"===s&&(y.y+=y.height/2),s=s||"top"),i.x=y.x,i.y=y.y,i.markRedraw();var _={align:a,verticalAlign:s};l.setStyle(_),f.setStyle(_),m=i.getBoundingRect();var b=y.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var w=new _e["a"]({shape:{x:m.x-b[3],y:m.y-b[0],width:m.width+b[1]+b[3],height:m.height+b[0]+b[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});i.add(w)}},e.type="title",e}(Di["a"]);function zS(t){t.registerComponentModel(BS),t.registerComponentView(FS)}var VS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],i=e.axisType,r=this._names=[];"category"===i?(t=[],Object(c["k"])(n,(function(e,n){var i,o=Object(se["e"])(Object(se["h"])(e),"");Object(c["A"])(e)?(i=Object(c["d"])(e),i.value=n):i=n,t.push(i),r.push(o)}))):t=n;var o={category:"ordinal",time:"time",value:"number"}[i]||"number",a=this._data=new ui["a"]([{name:"value",type:o}],this);a.initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Ei["a"]),HS=VS,GS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="timeline.slider",e.defaultOption=Object(en["d"])(HS.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(HS);Object(c["K"])(GS,Vw["a"].prototype);var US=GS,WS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="timeline",e}(Di["a"]),XS=WS,YS=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;return o.type=r||"value",o}return Object(At["b"])(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(tr["a"]),qS=YS,ZS=n("18c0"),KS=n("216a"),$S=Math.PI,JS=Object(se["o"])(),QS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),r=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(i,t);t.formatTooltip=function(t){var e=a.scale.getLabel({value:t});return Object(lo["c"])("nameValue",{noName:!0,value:e})},Object(c["k"])(["AxisLine","AxisTick","Control","CurrentPointer"],(function(e){this["_render"+e](i,r,a,t)}),this),this._renderAxisLabel(i,o,a,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,i=t.get(["label","position"]),r=t.get("orient"),o=eT(t,e);n=null==i||"auto"===i?"horizontal"===r?o.y+o.height/2<e.getHeight()/2?"-":"+":o.x+o.width/2<e.getWidth()/2?"+":"-":Object(c["C"])(i)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[r][i]:i;var a,s,l,u={horizontal:"center",vertical:n>=0||"+"===n?"left":"right"},h={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:$S/2},d="vertical"===r?o.height:o.width,p=t.getModel("controlStyle"),g=p.get("show",!0),m=g?p.get("itemSize"):0,v=g?p.get("itemGap"):0,y=m+v,_=t.get(["label","rotate"])||0;_=_*$S/180;var b=p.get("position",!0),x=g&&p.get("showPlayBtn",!0),w=g&&p.get("showPrevBtn",!0),S=g&&p.get("showNextBtn",!0),T=0,O=d;"left"===b||"bottom"===b?(x&&(a=[0,0],T+=y),w&&(s=[T,0],T+=y),S&&(l=[O-m,0],O-=y)):(x&&(a=[O-m,0],O-=y),w&&(s=[0,0],T+=y),S&&(l=[O-m,0],O-=y));var C=[T,O];return t.get("inverse")&&C.reverse(),{viewRect:o,mainLength:d,orient:r,rotation:f[r],labelRotation:_,labelPosOpt:n,labelAlign:t.get(["label","align"])||u[r],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||h[r],playPosition:a,prevBtnPosition:s,nextBtnPosition:l,axisExtent:C,controlSize:m,controlGap:v}},e.prototype._position=function(t,e){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var o=qi["c"](),a=r.x,s=r.y+r.height;qi["i"](o,o,[-a,-s]),qi["g"](o,o,-$S/2),qi["i"](o,o,[a,s]),r=r.clone(),r.applyTransform(o)}var l=v(r),u=v(n.getBoundingRect()),h=v(i.getBoundingRect()),f=[n.x,n.y],d=[i.x,i.y];d[0]=f[0]=l[0][0];var p=t.labelPosOpt;if(null==p||Object(c["C"])(p)){var g="+"===p?0:1;y(f,u,l,1,g),y(d,h,l,1,1-g)}else{g=p>=0?0:1;y(f,u,l,1,g),d[1]=f[1]+p}function m(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function v(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function y(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}n.setPosition(f),i.setPosition(d),n.rotation=i.rotation=t.rotation,m(n),m(i)},e.prototype._createAxis=function(t,e){var n=e.getData(),i=e.get("axisType"),r=tT(e,i);r.getTicks=function(){return n.mapArray(["value"],(function(t){return{value:t}}))};var o=n.getDataExtent("value");r.setExtent(o[0],o[1]),r.niceTicks();var a=new qS("value",r,t.axisExtent,i);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new Pt["a"];return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var o=new dr["a"]({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:Object(c["m"])({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(o);var a=this._progressLine=new dr["a"]({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:Object(c["j"])({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(a)}},e.prototype._renderAxisTick=function(t,e,n,i){var r=this,o=i.getData(),a=n.scale.getTicks();this._tickSymbols=[],Object(c["k"])(a,(function(t){var a=n.dataToCoord(t.value),s=o.getItemModel(t.value),l=s.getModel("itemStyle"),u=s.getModel(["emphasis","itemStyle"]),h=s.getModel(["progress","itemStyle"]),f={x:a,y:0,onclick:Object(c["c"])(r._changeTimeline,r,t.value)},d=iT(s,l,e,f);d.ensureState("emphasis").style=u.getItemStyle(),d.ensureState("progress").style=h.getItemStyle(),Object(Nt["o"])(d);var p=Object(Rt["a"])(d);s.get("tooltip")?(p.dataIndex=t.value,p.dataModel=i):p.dataIndex=p.dataModel=null,r._tickSymbols.push(d)}))},e.prototype._renderAxisLabel=function(t,e,n,i){var r=this,o=n.getLabelModel();if(o.get("show")){var a=i.getData(),s=n.getViewLabels();this._tickLabels=[],Object(c["k"])(s,(function(i){var o=i.tickValue,s=a.getItemModel(o),l=s.getModel("label"),u=s.getModel(["emphasis","label"]),h=s.getModel(["progress","label"]),f=n.dataToCoord(i.tickValue),d=new ae["a"]({x:f,y:0,rotation:t.labelRotation-t.rotation,onclick:Object(c["c"])(r._changeTimeline,r,o),silent:!1,style:Object(Vt["c"])(l,{text:i.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});d.ensureState("emphasis").style=Object(Vt["c"])(u),d.ensureState("progress").style=Object(Vt["c"])(h),e.add(d),Object(Nt["o"])(d),JS(d).dataIndex=o,r._tickLabels.push(d)}))}},e.prototype._renderControl=function(t,e,n,i){var r=t.controlSize,o=t.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel(["emphasis","controlStyle"]).getItemStyle(),l=i.getPlayState(),u=i.get("inverse",!0);function h(t,n,l,u){if(t){var h=Object(b["h"])(Object(c["P"])(i.get(["controlStyle",n+"BtnSize"]),r),r),f=[0,-h/2,h,h],d=nT(i,n+"Icon",f,{x:t[0],y:t[1],originX:r/2,originY:0,rotation:u?-o:0,rectHover:!0,style:a,onclick:l});d.ensureState("emphasis").style=s,e.add(d),Object(Nt["o"])(d)}}h(t.nextBtnPosition,"next",Object(c["c"])(this._changeTimeline,this,u?"-":"+")),h(t.prevBtnPosition,"prev",Object(c["c"])(this._changeTimeline,this,u?"+":"-")),h(t.playPosition,l?"stop":"play",Object(c["c"])(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,n,i){var r=i.getData(),o=i.getCurrentIndex(),a=r.getItemModel(o).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=Object(c["c"])(s._handlePointerDrag,s),t.ondragend=Object(c["c"])(s._handlePointerDragend,s),rT(t,s._progressLine,o,n,i,!0)},onUpdate:function(t){rT(t,s._progressLine,o,n,i)}};this._currentPointer=iT(a,a,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],i=this._axis,r=xe["c"](i.getExtent().slice());n>r[1]&&(n=r[1]),n<r[0]&&(n=r[0]),this._currentPointer.x=n,this._currentPointer.markRedraw(),this._progressLine.shape.x2=n,this._progressLine.dirty();var o=this._findNearestTick(n),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){var e=this._mainGroup.getLocalTransform();return fr["applyTransform"](t,e,!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],(function(n,o){var a=r.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=o)})),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var i=0;i<e.length;i++)e&&e[i]&&e[i].toggleState("progress",i<t);if(n)for(i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",JS(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(XS);function tT(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new ZS["a"]({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new KS["a"]({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new So["a"]}}function eT(t,e){return Gn["g"](t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}function nT(t,e,n,i){var r=i.style,o=fr["createIcon"](t.get(["controlStyle",e]),i||{},new Xi["a"](n[0],n[1],n[2],n[3]));return r&&o.setStyle(r),o}function iT(t,e,n,i,r,o){var a=e.get("color");if(r)r.setColor(a),n.add(r),o&&o.onUpdate(r);else{var s=t.get("symbol");r=Object(It["a"])(s,-1,-1,2,2,a),r.setStyle("strokeNoScale",!0),n.add(r),o&&o.onCreate(r)}var l=e.getItemStyle(["color"]);r.setStyle(l),i=Object(c["I"])({rectHover:!0,z2:100},i,!0);var u=Object(It["c"])(t.get("symbolSize"));i.scaleX=u[0]/2,i.scaleY=u[1]/2;var h=Object(It["b"])(t.get("symbolOffset"),u);h&&(i.x=(i.x||0)+h[0],i.y=(i.y||0)+h[1]);var f=t.get("symbolRotate");return i.rotation=(f||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function rT(t,e,n,i,r,o){if(!t.dragging){var a=r.getModel("checkpointStyle"),s=i.dataToCoord(r.getData().get("value",n));if(o||!a.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}var oT=QS;function aT(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(t,e,n){var i=e.getComponent("timeline");return i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Object(c["j"])({currentIndex:i.option.currentIndex},t)})),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)}))}function sT(t){var e=t&&t.timeline;c["t"](e)||(e=e?[e]:[]),c["k"](e,(function(t){t&&lT(t)}))}function lT(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),cT(t),uT(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});uT(i,"position")||(i.position=t.controlPosition),"none"!==i.position||uT(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}c["k"](t.data||[],(function(t){c["A"](t)&&!c["t"](t)&&(!uT(t,"value")&&uT(t,"name")&&(t.value=t.name),cT(t))}))}function cT(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};c["k"](i,(function(t,e){o[e]||uT(r,e)||(r[e]=t)})),n.label&&!uT(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function uT(t,e){return t.hasOwnProperty(e)}function hT(t){t.registerComponentModel(US),t.registerComponentView(oT),t.registerSubTypeDefaulter("timeline",(function(){return"slider"})),aT(t),t.registerPreprocessor(sT)}function fT(t,e){if(!t)return!1;for(var n=Object(c["t"])(t)?t:[t],i=0;i<n.length;i++)if(n[i]&&n[i][e])return!0;return!1}function dT(t){Object(se["f"])(t,"label",["show"])}var pT=Object(se["o"])(),gT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(dy["a"].node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,i){var r=this.mainType;n||e.eachSeries((function(t){var n=t.get(this.mainType,!0),o=pT(t)[r];n&&n.data?(o?o._mergeOption(n,e,!0):(i&&dT(n),c["k"](n.data,(function(t){t instanceof Array?(dT(t[0]),dT(t[1])):dT(t)})),o=this.createMarkerModelFromSeries(n,this,e),c["m"](o,{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),pT(t)[r]=o):pT(t)[r]=null}),this)},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),o=i.getName(t);return Object(lo["c"])("section",{header:this.name,blocks:[Object(lo["c"])("nameValue",{name:o,value:r,noName:!o,noValue:null==r})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,e){return pT(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Ei["a"]);c["K"](gT,Vw["a"].prototype);var mT=gT,vT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markPoint",e.defaultOption={zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(mT),yT=vT,_T=n("b7d9");function bT(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function xT(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}function wT(t,e,n,i,r,o){var a=[],s=Object(Kt["c"])(e,i),l=s?e.getCalculationInfo("stackResultDimension"):i,c=DT(e,l,t),u=e.indicesOfNearest(l,c)[0];a[r]=e.get(n,u),a[o]=e.get(l,u);var h=e.get(i,u),f=xe["g"](e.get(i,u));return f=Math.min(f,20),f>=0&&(a[o]=+a[o].toFixed(f)),[a,h]}var ST={min:Object(c["i"])(wT,"min"),max:Object(c["i"])(wT,"max"),average:Object(c["i"])(wT,"average"),median:Object(c["i"])(wT,"median")};function TT(t,e){var n=t.getData(),i=t.coordinateSystem;if(e&&!xT(e)&&!Object(c["t"])(e.coord)&&i){var r=i.dimensions,o=OT(e,n,i,t);if(e=Object(c["d"])(e),e.type&&ST[e.type]&&o.baseAxis&&o.valueAxis){var a=Object(c["r"])(r,o.baseAxis.dim),s=Object(c["r"])(r,o.valueAxis.dim),l=ST[e.type](n,o.baseDataDim,o.valueDataDim,a,s);e.coord=l[0],e.value=l[1]}else{for(var u=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis],h=0;h<2;h++)ST[u[h]]&&(u[h]=DT(n,n.mapDimension(r[h]),u[h]));e.coord=u}}return e}function OT(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(CT(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function CT(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}function MT(t,e){return!(t&&t.containData&&e.coord&&!bT(e))||t.containData(e.coord)}function AT(t,e){return t?function(t,n,i,r){var o=r<2?t.coord&&t.coord[r]:t.value;return Object(_T["d"])(o,e[r])}:function(t,n,i,r){return Object(_T["d"])(t.value,e[r])}}function DT(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,(function(t,e){isNaN(t)||(i+=t,r++)})),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var ET=Object(se["o"])(),IT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.init=function(){this.markerGroupMap=Object(c["g"])()},e.prototype.render=function(t,e,n){var i=this,r=this.markerGroupMap;r.each((function(t){ET(t).keep=!1})),e.eachSeries((function(t){var r=mT.getMarkerModelFromSeries(t,i.type);r&&i.renderSeries(t,r,e,n)})),r.each((function(t){!ET(t).keep&&i.group.remove(t.group)}))},e.prototype.markKeep=function(t){ET(t).keep=!0},e.prototype.blurSeries=function(t){var e=this;Object(c["k"])(t,(function(t){var n=mT.getMarkerModelFromSeries(t,e.type);if(n){var i=n.getData();i.eachItemGraphicEl((function(t){t&&Object(Nt["q"])(t)}))}}))},e.type="marker",e}(Di["a"]),PT=IT;function LT(t,e,n){var i=e.coordinateSystem;t.each((function(r){var o,a=t.getItemModel(r),s=xe["p"](a.get("x"),n.getWidth()),l=xe["p"](a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var c=t.get(i.dimensions[0],r),u=t.get(i.dimensions[1],r);o=i.dataToPoint([c,u])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(r,o)}))}var kT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=mT.getMarkerModelFromSeries(t,"markPoint");e&&(LT(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new Zt),u=jT(r,t,e);e.setData(u),LT(e.getData(),t,i),u.each((function(t){var n=u.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),o=n.getShallow("symbolRotate"),s=n.getShallow("symbolOffset"),l=n.getShallow("symbolKeepAspect");if(Object(c["w"])(i)||Object(c["w"])(r)||Object(c["w"])(o)||Object(c["w"])(s)){var h=e.getRawValue(t),f=e.getDataParams(t);Object(c["w"])(i)&&(i=i(h,f)),Object(c["w"])(r)&&(r=r(h,f)),Object(c["w"])(o)&&(o=o(h,f)),Object(c["w"])(s)&&(s=s(h,f))}var d=n.getModel("itemStyle").getItemStyle(),p=Object(oS["b"])(a,"color");d.fill||(d.fill=p),u.setItemVisual(t,{symbol:i,symbolSize:r,symbolRotate:o,symbolOffset:s,symbolKeepAspect:l,style:d})})),l.updateData(u),this.group.add(l.group),u.eachItemGraphicEl((function(t){t.traverse((function(t){Object(Rt["a"])(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(PT);function jT(t,e,n){var i;i=t?Object(c["H"])(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Object(c["m"])(Object(c["m"])({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new ui["a"](i,n),o=Object(c["H"])(n.get("data"),Object(c["i"])(TT,e));t&&(o=Object(c["n"])(o,Object(c["i"])(MT,t)));var a=AT(!!t,i);return r.initData(o,null,a),r}var RT=kT;function NT(t){t.registerComponentModel(yT),t.registerComponentView(RT),t.registerPreprocessor((function(t){fT(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})}))}var BT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markLine",e.defaultOption={zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(mT),FT=BT,zT=Object(se["o"])(),VT=function(t,e,n,i){var r,o=t.getData();if(Object(c["t"])(i))r=i;else{var a=i.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis){var s=void 0,l=void 0;if(null!=i.yAxis||null!=i.xAxis)s=e.getAxis(null!=i.yAxis?"y":"x"),l=Object(c["O"])(i.yAxis,i.xAxis);else{var u=OT(i,o,e,t);s=u.valueAxis;var h=Object(Kt["b"])(o,u.valueDataDim);l=DT(o,h,a)}var f="x"===s.dim?0:1,d=1-f,p=Object(c["d"])(i),g={coord:[]};p.type=null,p.coord=[],p.coord[d]=-1/0,g.coord[d]=1/0;var m=n.get("precision");m>=0&&"number"===typeof l&&(l=+l.toFixed(Math.min(m,20))),p.coord[f]=g.coord[f]=l,r=[p,g,{type:a,valueIndex:i.valueIndex,value:l}]}else r=[]}var v=[TT(t,r[0]),TT(t,r[1]),Object(c["m"])({},r[2])];return v[2].type=v[2].type||null,Object(c["I"])(v[2],v[0]),Object(c["I"])(v[2],v[1]),v};function HT(t){return!isNaN(t)&&!isFinite(t)}function GT(t,e,n,i){var r=1-t,o=i.dimensions[t];return HT(e[r])&&HT(n[r])&&e[t]===n[t]&&i.getAxis(o).containData(e[t])}function UT(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(GT(1,n,i,t)||GT(0,n,i,t)))return!0}return MT(t,e[0])&&MT(t,e[1])}function WT(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=xe["p"](s.get("x"),r.getWidth()),c=xe["p"](s.get("y"),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=a.dimensions,h=t.get(u[0],e),f=t.get(u[1],e);o=a.dataToPoint([h,f])}if(Oe(a,"cartesian2d")){var d=a.getAxis("x"),p=a.getAxis("y");u=a.dimensions;HT(t.get(u[0],e))?o[0]=d.toGlobalCoord(d.getExtent()[n?0:1]):HT(t.get(u[1],e))&&(o[1]=p.toGlobalCoord(p.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}else o=[l,c];t.setItemLayout(e,o)}var XT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=mT.getMarkerModelFromSeries(t,"markLine");if(e){var i=e.getData(),r=zT(e).from,o=zT(e).to;r.each((function(e){WT(r,e,!0,t,n),WT(o,e,!1,t,n)})),i.each((function(t){i.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])})),this.markerGroupMap.get(t.id).updateLayout()}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new eu);this.group.add(l.group);var u=YT(r,t,e),h=u.from,f=u.to,d=u.line;zT(e).from=h,zT(e).to=f,e.setData(d);var p=e.get("symbol"),g=e.get("symbolSize"),m=e.get("symbolRotate"),v=e.get("symbolOffset");function y(e,n,r){var o=e.getItemModel(n);WT(e,n,r,t,i);var s=o.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=Object(oS["b"])(a,"color")),e.setItemVisual(n,{symbolKeepAspect:o.get("symbolKeepAspect"),symbolOffset:Object(c["P"])(o.get("symbolOffset",!0),v[r?0:1]),symbolRotate:Object(c["P"])(o.get("symbolRotate",!0),m[r?0:1]),symbolSize:Object(c["P"])(o.get("symbolSize"),g[r?0:1]),symbol:Object(c["P"])(o.get("symbol",!0),p[r?0:1]),style:s})}Object(c["t"])(p)||(p=[p,p]),Object(c["t"])(g)||(g=[g,g]),Object(c["t"])(m)||(m=[m,m]),Object(c["t"])(v)||(v=[v,v]),u.from.each((function(t){y(h,t,!0),y(f,t,!1)})),d.each((function(t){var e=d.getItemModel(t).getModel("lineStyle").getLineStyle();d.setItemLayout(t,[h.getItemLayout(t),f.getItemLayout(t)]),null==e.stroke&&(e.stroke=h.getItemVisual(t,"style").fill),d.setItemVisual(t,{fromSymbolKeepAspect:h.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(t,"symbolOffset"),fromSymbolRotate:h.getItemVisual(t,"symbolRotate"),fromSymbolSize:h.getItemVisual(t,"symbolSize"),fromSymbol:h.getItemVisual(t,"symbol"),toSymbolKeepAspect:f.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:f.getItemVisual(t,"symbolOffset"),toSymbolRotate:f.getItemVisual(t,"symbolRotate"),toSymbolSize:f.getItemVisual(t,"symbolSize"),toSymbol:f.getItemVisual(t,"symbol"),style:e})})),l.updateData(d),u.line.eachItemGraphicEl((function(t,n){t.traverse((function(t){Object(Rt["a"])(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(PT);function YT(t,e,n){var i;i=t?Object(c["H"])(t&&t.dimensions,(function(t){var n=e.getData().getDimensionInfo(e.getData().mapDimension(t))||{};return Object(c["m"])(Object(c["m"])({},n),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new ui["a"](i,n),o=new ui["a"](i,n),a=new ui["a"]([],n),s=Object(c["H"])(n.get("data"),Object(c["i"])(VT,e,t,n));t&&(s=Object(c["n"])(s,Object(c["i"])(UT,t)));var l=AT(!!t,i);return r.initData(Object(c["H"])(s,(function(t){return t[0]})),null,l),o.initData(Object(c["H"])(s,(function(t){return t[1]})),null,l),a.initData(Object(c["H"])(s,(function(t){return t[2]}))),a.hasItemOption=!0,{from:r,to:o,line:a}}var qT=XT;function ZT(t){t.registerComponentModel(FT),t.registerComponentView(qT),t.registerPreprocessor((function(t){fT(t.series,"markLine")&&(t.markLine=t.markLine||{})}))}var KT=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markArea",e.defaultOption={zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(mT),$T=KT,JT=Object(se["o"])(),QT=function(t,e,n,i){var r=TT(t,i[0]),o=TT(t,i[1]),a=r.coord,s=o.coord;a[0]=Object(c["O"])(a[0],-1/0),a[1]=Object(c["O"])(a[1],-1/0),s[0]=Object(c["O"])(s[0],1/0),s[1]=Object(c["O"])(s[1],1/0);var l=Object(c["J"])([{},r,o]);return l.coord=[r.coord,o.coord],l.x0=r.x,l.y0=r.y,l.x1=o.x,l.y1=o.y,l};function tO(t){return!isNaN(t)&&!isFinite(t)}function eO(t,e,n,i){var r=1-t;return tO(e[r])&&tO(n[r])}function nO(t,e){var n=e.coord[0],i=e.coord[1];return!!(Oe(t,"cartesian2d")&&n&&i&&(eO(1,n,i,t)||eO(0,n,i,t)))||(MT(t,{coord:n,x:e.x0,y:e.y0})||MT(t,{coord:i,x:e.x1,y:e.y1}))}function iO(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=xe["p"](s.get(n[0]),r.getWidth()),c=xe["p"](s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(n,e));else{var u=t.get(n[0],e),h=t.get(n[1],e),f=[u,h];a.clampData&&a.clampData(f,f),o=a.dataToPoint(f,!0)}if(Oe(a,"cartesian2d")){var d=a.getAxis("x"),p=a.getAxis("y");u=t.get(n[0],e),h=t.get(n[1],e);tO(u)?o[0]=d.toGlobalCoord(d.getExtent()["x0"===n[0]?0:1]):tO(h)&&(o[1]=p.toGlobalCoord(p.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}else o=[l,c];return o}var rO=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],oO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=mT.getMarkerModelFromSeries(t,"markArea");if(e){var i=e.getData();i.each((function(e){var r=Object(c["H"])(rO,(function(r){return iO(i,e,r,t,n)}));i.setItemLayout(e,r);var o=i.getItemGraphicEl(e);o.setShape("points",r)}))}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,s=t.getData(),l=this.markerGroupMap,u=l.get(o)||l.set(o,{group:new Pt["a"]});this.group.add(u.group),this.markKeep(u);var h=aO(r,t,e);e.setData(h),h.each((function(e){var n=Object(c["H"])(rO,(function(n){return iO(h,e,n,t,i)})),o=r.getAxis("x").scale,l=r.getAxis("y").scale,u=o.getExtent(),f=l.getExtent(),d=[o.parse(h.get("x0",e)),o.parse(h.get("x1",e))],p=[l.parse(h.get("y0",e)),l.parse(h.get("y1",e))];xe["c"](d),xe["c"](p);var g=!(u[0]>d[1]||u[1]<d[0]||f[0]>p[1]||f[1]<p[0]),m=!g;h.setItemLayout(e,{points:n,allClipped:m});var v=h.getItemModel(e).getModel("itemStyle").getItemStyle(),y=Object(oS["b"])(s,"color");v.fill||(v.fill=y,"string"===typeof v.fill&&(v.fill=a["modifyAlpha"](v.fill,.4))),v.stroke||(v.stroke=y),h.setItemVisual(e,"style",v)})),h.diff(JT(u).data).add((function(t){var e=h.getItemLayout(t);if(!e.allClipped){var n=new oo["a"]({shape:{points:e.points}});h.setItemGraphicEl(t,n),u.group.add(n)}})).update((function(t,n){var i=JT(u).data.getItemGraphicEl(n),r=h.getItemLayout(t);r.allClipped?i&&u.group.remove(i):(i?jt["h"](i,{shape:{points:r.points}},e,t):i=new oo["a"]({shape:{points:r.points}}),h.setItemGraphicEl(t,i),u.group.add(i))})).remove((function(t){var e=JT(u).data.getItemGraphicEl(t);u.group.remove(e)})).execute(),h.eachItemGraphicEl((function(t,n){var i=h.getItemModel(n),r=h.getItemVisual(n,"style");t.useStyle(h.getItemVisual(n,"style")),Object(Vt["g"])(t,Object(Vt["e"])(i),{labelFetcher:e,labelDataIndex:n,defaultText:h.getName(n)||"",inheritColor:"string"===typeof r.fill?a["modifyAlpha"](r.fill,1):"#000"}),Object(Nt["I"])(t,i),Object(Nt["o"])(t),Object(Rt["a"])(t).dataModel=e})),JT(u).data=h,u.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(PT);function aO(t,e,n){var i,r,o=["x0","y0","x1","y1"];if(t){var a=Object(c["H"])(t&&t.dimensions,(function(t){var n=e.getData(),i=n.getDimensionInfo(n.mapDimension(t))||{};return Object(c["m"])(Object(c["m"])({},i),{name:t,ordinalMeta:null})}));r=Object(c["H"])(o,(function(t,e){return{name:t,type:a[e%2].type}})),i=new ui["a"](r,n)}else r=[{name:"value",type:"float"}],i=new ui["a"](r,n);var s=Object(c["H"])(n.get("data"),Object(c["i"])(QT,e,t,n));t&&(s=Object(c["n"])(s,Object(c["i"])(nO,t)));var l=t?function(t,e,n,i){var o=t.coord[Math.floor(i/2)][i%2];return Object(_T["d"])(o,r[i])}:function(t,e,n,i){return Object(_T["d"])(t.value,r[i])};return i.initData(s,null,l),i.hasItemOption=!0,i}var sO=oO;function lO(t){t.registerComponentModel($T),t.registerComponentView(sO),t.registerPreprocessor((function(t){fT(t.series,"markArea")&&(t.markArea=t.markArea||{})}))}var cO=function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0},uO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,n=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),c["t"](e)&&c["k"](e,(function(t,i){c["C"](t)&&(t={type:t}),e[i]=c["I"](t,cO(n,t.type))}))},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries((function(i){var r,o=i.name;if(n.push(o),i.legendVisualProvider){var a=i.legendVisualProvider,s=a.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(s)),s.length?e=e.concat(s):r=!0}else r=!0;r&&Object(se["n"])(i)&&e.push(i.name)})),this._availableNames=n;var i=this.get("data")||e,r=c["H"](i,(function(t){return"string"!==typeof t&&"number"!==typeof t||(t={name:t}),new pr["a"](t,this,this.ecModel)}),this);this._data=r},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected,n=this.get("selectedMode");if("single"===n){var i=this._data;c["k"](i,(function(t){e[t.get("name")]=!1}))}e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;c["k"](t,(function(t){e[t.get("name",!0)]=!0}))},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;c["k"](t,(function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]}))},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&c["r"](this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Ei["a"]),hO=uO,fO=c["i"],dO=c["k"],pO=Pt["a"],gO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return Object(At["b"])(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new pO),this.group.add(this._selectorGroup=new pO),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(r,t,e,n,a,o,s);var l=t.getBoxLayoutParams(),u={width:n.getWidth(),height:n.getHeight()},h=t.get("padding"),f=Gn["g"](l,u,h),d=this.layoutInner(t,r,f,i,a,s),p=Gn["g"](c["j"]({width:d.width,height:d.height},l),u,h);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=cx(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,i,r,o,s){var l=this.getContentGroup(),u=c["g"](),h=e.get("selectedMode"),f=[];n.eachRawSeries((function(t){!t.get("legendHoverLink")&&f.push(t.id)})),dO(e.getData(),(function(r,o){var s=r.get("name");if(!this.newlineDisabled&&(""===s||"\n"===s)){var c=new pO;return c.newline=!0,void l.add(c)}var d=n.getSeriesByName(s)[0];if(!u.get(s)){if(d){var p=d.getData(),g=p.getVisual("legendLineStyle")||{},m=p.getVisual("legendIcon"),v=p.getVisual("style"),y=this._createItem(d,s,o,r,e,t,g,v,m,h);y.on("click",fO(yO,s,null,i,f)).on("mouseover",fO(bO,d.name,null,i,f)).on("mouseout",fO(xO,d.name,null,i,f)),u.set(s,!0)}else n.eachRawSeries((function(n){if(!u.get(s)&&n.legendVisualProvider){var l=n.legendVisualProvider;if(!l.containName(s))return;var c=l.indexOfName(s),d=l.getItemVisual(c,"style"),p=l.getItemVisual(c,"legendIcon"),g=Object(a["parse"])(d.fill);g&&0===g[3]&&(g[3]=.2,d.fill=Object(a["stringify"])(g,"rgba"));var m=this._createItem(n,s,o,r,e,t,{},d,p,h);m.on("click",fO(yO,null,s,i,f)).on("mouseover",fO(bO,null,s,i,f)).on("mouseout",fO(xO,null,s,i,f)),u.set(s,!0)}}),this);0}}),this),r&&this._createSelector(r,e,i,o,s)},e.prototype._createSelector=function(t,e,n,i,r){var o=this.getSelectorGroup();dO(t,(function(t){var i=t.type,r=new ae["a"]({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});o.add(r);var a=e.getModel("selectorLabel"),s=e.getModel(["emphasis","selectorLabel"]);Object(Vt["g"])(r,{normal:a,emphasis:s},{defaultText:t.title}),Object(Nt["o"])(r)}))},e.prototype._createItem=function(t,e,n,i,r,o,a,s,l,c){var u=t.visualDrawType,h=r.get("itemWidth"),f=r.get("itemHeight"),d=r.isSelected(e),p=i.get("symbolRotate"),g=i.get("symbolKeepAspect"),m=i.get("icon");l=m||l||"roundRect";var v=mO(l,i,a,s,u,d),y=new pO,_=i.getModel("textStyle");if("function"!==typeof t.getLegendIcon||m&&"inherit"!==m){var b="inherit"===m&&t.getData().getVisual("symbol")?"inherit"===p?t.getData().getVisual("symbolRotate"):p:0;y.add(vO({itemWidth:h,itemHeight:f,icon:l,iconRotate:b,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:g}))}else y.add(t.getLegendIcon({itemWidth:h,itemHeight:f,icon:l,iconRotate:p,itemStyle:v.itemStyle,lineStyle:v.lineStyle,symbolKeepAspect:g}));var x="left"===o?h+5:-5,w=o,S=r.get("formatter"),T=e;"string"===typeof S&&S?T=S.replace("{name}",null!=e?e:""):"function"===typeof S&&(T=S(e));var O=i.get("inactiveColor");y.add(new ae["a"]({style:Object(Vt["c"])(_,{text:T,x:x,y:f/2,fill:d?_.getTextColor():O,align:w,verticalAlign:"middle"})}));var C=new _e["a"]({shape:y.getBoundingRect(),invisible:!0}),M=i.getModel("tooltip");return M.get("show")&&fr["setTooltipConfig"]({el:C,componentModel:r,itemName:e,itemTooltipOption:M.option}),y.add(C),y.eachChild((function(t){t.silent=!0})),C.silent=!c,this.getContentGroup().add(y),Object(Nt["o"])(y),y.__legendDataIndex=n,y},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();Gn["b"](t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),c=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),r){Gn["b"]("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),h=[-u.x,-u.y],f=t.get("selectorButtonGap",!0),d=t.getOrient().index,p=0===d?"width":"height",g=0===d?"height":"width",m=0===d?"y":"x";"end"===o?h[d]+=l[p]+f:c[d]+=u[p]+f,h[1-d]+=l[g]/2-u[g]/2,s.x=h[0],s.y=h[1],a.x=c[0],a.y=c[1];var v={x:0,y:0};return v[p]=l[p]+f+u[p],v[g]=Math.max(l[g],u[g]),v[m]=Math.min(0,u[m]+h[1-d]),v}return a.x=c[0],a.y=c[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(Di["a"]);function mO(t,e,n,i,r,o){function a(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),dO(t,(function(n,i){"inherit"===t[i]&&(t[i]=e[i])}))}var s=e.getModel("itemStyle"),l=s.getItemStyle(),c=0===t.lastIndexOf("empty",0)?"fill":"stroke";l.decal=i.decal,"inherit"===l.fill&&(l.fill=i[r]),"inherit"===l.stroke&&(l.stroke=i[c]),"inherit"===l.opacity&&(l.opacity=("fill"===r?i:n).opacity),a(l,i);var u=e.getModel("lineStyle"),h=u.getLineStyle();if(a(h,n),"auto"===l.fill&&(l.fill=i.fill),"auto"===l.stroke&&(l.stroke=i.fill),"auto"===h.stroke&&(h.stroke=i.fill),!o){var f=e.get("inactiveBorderWidth"),d=l[c];l.lineWidth="auto"===f?i.lineWidth>0&&d?2:0:l.lineWidth,l.fill=e.get("inactiveColor"),l.stroke=e.get("inactiveBorderColor"),h.stroke=u.get("inactiveColor"),h.lineWidth=u.get("inactiveWidth")}return{itemStyle:l,lineStyle:h}}function vO(t){var e=t.icon||"roundRect",n=Object(It["a"])(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function yO(t,e,n,i){xO(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),bO(t,e,n,i)}function _O(t){var e,n=t.getZr().storage.getDisplayList(),i=0,r=n.length;while(i<r&&!(e=n[i].states.emphasis))i++;return e&&e.hoverLayer}function bO(t,e,n,i){_O(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function xO(t,e,n,i){_O(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}var wO=gO;function SO(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0}))}function TO(t,e,n){var i,r={},o="toggleSelected"===t;return n.eachComponent("legend",(function(n){o&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name));var a=n.getData();Object(c["k"])(a,(function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}}))})),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}function OO(t){t.registerAction("legendToggleSelect","legendselectchanged",Object(c["i"])(TO,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",Object(c["i"])(TO,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",Object(c["i"])(TO,"inverseSelect")),t.registerAction("legendSelect","legendselected",Object(c["i"])(TO,"select")),t.registerAction("legendUnSelect","legendunselected",Object(c["i"])(TO,"unSelect"))}function CO(t){t.registerComponentModel(hO),t.registerComponentView(wO),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,SO),t.registerSubTypeDefaulter("legend",(function(){return"plain"})),OO(t)}var MO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,i){var r=Object(Gn["f"])(e);t.prototype.init.call(this,e,n,i),AO(this,e,r)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),AO(this,this.option,e)},e.type="legend.scroll",e.defaultOption=Object(en["d"])(hO.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(hO);function AO(t,e,n){var i=t.getOrient(),r=[1,1];r[i.index]=0,Object(Gn["h"])(e,n,{type:"box",ignoreSize:!!r})}var DO=MO,EO=Pt["a"],IO=["width","height"],PO=["x","y"],LO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return Object(At["b"])(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new EO),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new EO)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,i,r,o,a,s){var l=this;t.prototype.renderInner.call(this,e,n,i,r,o,a,s);var u=this._controllerGroup,h=n.get("pageIconSize",!0),f=c["t"](h)?h:[h,h];p("pagePrev",0);var d=n.getModel("pageTextStyle");function p(t,e){var i=t+"DataIndex",o=fr["createIcon"](n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:c["c"](l._pageGo,l,i,n,r)},{x:-f[0]/2,y:-f[1]/2,width:f[0],height:f[1]});o.name=t,u.add(o)}u.add(new ae["a"]({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getSelectorGroup(),s=t.getOrient().index,l=IO[s],u=PO[s],h=IO[1-s],f=PO[1-s];r&&Gn["b"]("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=a.getBoundingRect(),g=[-p.x,-p.y],m=c["d"](n);r&&(m[l]=n[l]-p[l]-d);var v=this._layoutContentAndController(t,i,m,s,l,h,f,u);if(r){if("end"===o)g[s]+=v[l]+d;else{var y=p[l]+d;g[s]-=y,v[u]-=y}v[l]+=p[l]+d,g[1-s]+=v[f]+v[h]/2-p[h]/2,v[h]=Math.max(v[h],p[h]),v[f]=Math.min(v[f],p[f]+g[1-s]),a.x=g[0],a.y=g[1],a.markRedraw()}return v},e.prototype._layoutContentAndController=function(t,e,n,i,r,o,a,s){var l=this.getContentGroup(),u=this._containerGroup,h=this._controllerGroup;Gn["b"](t.get("orient"),l,t.get("itemGap"),i?n.width:null,i?null:n.height),Gn["b"]("horizontal",h,t.get("pageButtonItemGap",!0));var f=l.getBoundingRect(),d=h.getBoundingRect(),p=this._showController=f[r]>n[r],g=[-f.x,-f.y];e||(g[i]=l[s]);var m=[0,0],v=[-d.x,-d.y],y=c["P"](t.get("pageButtonGap",!0),t.get("itemGap",!0));if(p){var _=t.get("pageButtonPosition",!0);"end"===_?v[i]+=n[r]-d[r]:m[i]+=d[r]+y}v[1-i]+=f[o]/2-d[o]/2,l.setPosition(g),u.setPosition(m),h.setPosition(v);var b={x:0,y:0};if(b[r]=p?n[r]:f[r],b[o]=Math.max(f[o],d[o]),b[a]=Math.min(0,d[a]+v[1-i]),u.__rectSize=n[r],p){var x={x:0,y:0};x[r]=Math.max(n[r]-d[r]-y,0),x[o]=b[o],u.setClipPath(new _e["a"]({shape:x})),u.__rectSize=x[r]}else h.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var w=this._getPageInfo(t);return null!=w.pageIndex&&jt["h"](l,{x:w.contentPosition[0],y:w.contentPosition[1]},p?t:null),this._updatePageInfoView(t,w),b},e.prototype._pageGo=function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;c["k"](["pagePrev","pageNext"],(function(i){var r=i+"DataIndex",o=null!=e[r],a=n.childOfName(i);a&&(a.setStyle("fill",o?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),a.cursor=o?"pointer":"default")}));var i=n.childOfName("pageText"),r=t.get("pageFormatter"),o=e.pageIndex,a=null!=o?o+1:0,s=e.pageCount;i&&r&&i.setStyle("text",c["C"](r)?r.replace("{current}",null==a?"":a+"").replace("{total}",null==s?"":s+""):r({current:a,total:s}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=t.getOrient().index,o=IO[r],a=PO[r],s=this._findTargetItemIndex(e),l=n.children(),c=l[s],u=l.length,h=u?1:0,f={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return f;var d=y(c);f.contentPosition[r]=-d.s;for(var p=s+1,g=d,m=d,v=null;p<=u;++p)v=y(l[p]),(!v&&m.e>g.s+i||v&&!_(v,g.s))&&(g=m.i>g.i?m:v,g&&(null==f.pageNextDataIndex&&(f.pageNextDataIndex=g.i),++f.pageCount)),m=v;for(p=s-1,g=d,m=d,v=null;p>=-1;--p)v=y(l[p]),v&&_(m,v.s)||!(g.i<m.i)||(m=g,null==f.pagePrevDataIndex&&(f.pagePrevDataIndex=g.i),++f.pageCount,++f.pageIndex),g=v;return f;function y(t){if(t){var e=t.getBoundingRect(),n=e[a]+t[a];return{s:n,e:n+e[o],i:t.__legendDataIndex}}}function _(t,e){return t.e>=e&&t.s<=e+i}},e.prototype._findTargetItemIndex=function(t){if(!this._showController)return 0;var e,n,i=this.getContentGroup();return i.eachChild((function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===t&&(e=r)})),null!=e?e:n},e.type="legend.scroll",e}(wO),kO=LO;function jO(t){t.registerAction("legendScroll","legendscroll",(function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(n)}))}))}function RO(t){Object(i["a"])(CO),t.registerComponentModel(DO),t.registerComponentView(kO),jO(t)}function NO(t){Object(i["a"])(CO),Object(i["a"])(RO)}var BO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="dataZoom.inside",e.defaultOption=Object(en["d"])(Bb.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(Bb),FO=BO,zO=Object(se["o"])();function VO(t,e,n){zO(t).coordSysRecordMap.each((function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)}))}function HO(t,e){for(var n=zO(t).coordSysRecordMap,i=n.keys(),r=0;r<i.length;r++){var o=i[r],a=n.get(o),s=a.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||GO(n,a))}}}function GO(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function UO(t,e){var n={model:e,containsPoint:Object(c["i"])(XO,e),dispatchAction:Object(c["i"])(WO,t),dataZoomInfoMap:null,controller:null},i=n.controller=new Vo(t.getZr());return Object(c["k"])(["pan","zoom","scrollMove"],(function(t){i.on(t,(function(e){var i=[];n.dataZoomInfoMap.each((function(r){if(e.isAvailableBehavior(r.model.option)){var o=(r.getRange||{})[t],a=o&&o(r.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!r.model.get("disabled",!0)&&a&&i.push({dataZoomId:r.model.id,start:a[0],end:a[1]})}})),i.length&&n.dispatchAction(i)}))})),n}function WO(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function XO(t,e,n,i){return t.coordinateSystem.containPoint([n,i])}function YO(t){var e,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return t.each((function(t){var o=t.model,a=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");i[n+a]>i[n+e]&&(e=a),r=r&&o.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}function qO(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var n=zO(e),i=n.coordSysRecordMap||(n.coordSysRecordMap=Object(c["g"])());i.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var n=kb(t);Object(c["k"])(n.infoList,(function(n){var r=n.model.uid,o=i.get(r)||i.set(r,UO(e,n.model)),a=o.dataZoomInfoMap||(o.dataZoomInfoMap=Object(c["g"])());a.set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})}))})),i.each((function(t){var e,n=t.controller,r=t.dataZoomInfoMap;if(r){var o=r.keys()[0];null!=o&&(e=r.get(o))}if(e){var a=YO(r);n.enable(a.controlType,a.opt),n.setPointerChecker(t.containsPoint),on["b"](t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else GO(i,t)}))}))}var ZO=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return Object(At["b"])(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),VO(i,e,{pan:Object(c["c"])(KO.pan,this),zoom:Object(c["c"])(KO.zoom,this),scrollMove:Object(c["c"])(KO.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){HO(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(Hb),KO={zoom:function(t,e,n,i){var r=this.range,o=r.slice(),a=t.axisModels[0];if(a){var s=JO[e](null,[i.originX,i.originY],a,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],c=Math.max(1/i.scale,0);o[0]=(o[0]-l)*c+l,o[1]=(o[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return vh(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:$O((function(t,e,n,i,r,o){var a=JO[i]([o.oldX,o.oldY],[o.newX,o.newY],e,r,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength})),scrollMove:$O((function(t,e,n,i,r,o){var a=JO[i]([0,0],[o.scrollDelta,o.scrollDelta],e,r,n);return a.signal*(t[1]-t[0])*o.scrollDelta}))};function $O(t){return function(e,n,i,r){var o=this.range,a=o.slice(),s=e.axisModels[0];if(s){var l=t(a,s,e,n,i,r);return vh(l,a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}}}var JO={grid:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=o.inverse?-1:1),a},singleAxis:function(t,e,n,i,r){var o=n.axis,a=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}},QO=ZO;function tC(t){tx(t),t.registerComponentModel(FO),t.registerComponentView(QO),qO(t)}var eC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Object(en["d"])(Bb.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(Bb),nC=eC,iC=_e["a"],rC=7,oC=1,aC=30,sC=7,lC="horizontal",cC="vertical",uC=5,hC=["line","bar","candlestick","scatter"],fC={easing:"cubicOut",duration:100,delay:0},dC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=Object(c["c"])(this._onBrush,this),this._onBrushEnd=Object(c["c"])(this._onBrushEnd,this)},e.prototype.render=function(e,n,i,r){if(t.prototype.render.apply(this,arguments),on["b"](this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){on["a"](this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new Pt["a"];this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect"),i=n?sC:0,r=this._findCoordRect(),o={width:e.getWidth(),height:e.getHeight()},a=this._orient===lC?{right:o.width-r.x-r.width,top:o.height-aC-rC-i,width:r.width,height:aC}:{right:rC,top:r.y,width:aC,height:r.height},s=Gn["f"](t.option);Object(c["k"])(["right","top","width","height"],(function(t){"ph"===s[t]&&(s[t]=a[t])}));var l=Gn["g"](s,o);this._location={x:l.x,y:l.y},this._size=[l.width,l.height],this._orient===cC&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),o=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==lC||r?n===lC&&r?{scaleY:a?1:-1,scaleX:-1}:n!==cC||r?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=t.getBoundingRect([o]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new iC({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new iC({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:Object(c["c"])(this._onClickPanel,this)}),o=this.api.getZr();i?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=t.series,i=n.getRawData(),r=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=r){var o=i.getDataExtent(r),a=.3*(o[1]-o[0]);o=[o[0]-a,o[1]+a];var s,l=[0,e[1]],c=[0,e[0]],u=[[e[0],0],[0,0]],h=[],f=c[1]/(i.count()-1),d=0,p=Math.round(i.count()/e[0]);i.each([r],(function(t,e){if(p>0&&e%p)d+=f;else{var n=null==t||isNaN(t)||""===t,i=n?0:Object(xe["l"])(t,o,l,!0);n&&!s&&e?(u.push([u[u.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&s&&(u.push([d,0]),h.push([d,0])),u.push([d,i]),h.push([d,i]),d+=f,s=n}}));for(var g=this.dataZoomModel,m=0;m<3;m++){var v=y(1===m);this._displayables.sliderGroup.add(v),this._displayables.dataShadowSegs.push(v)}}}function y(t){var e=g.getModel(t?"selectedDataBackground":"dataBackground"),n=new Pt["a"],i=new oo["a"]({shape:{points:u},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),r=new Kn["a"]({shape:{points:h},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(i),n.add(r),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis((function(r,o){var a=t.getAxisProxy(r,o).getTargetSeriesModels();Object(c["k"])(a,(function(t){if(!n&&!(!0!==e&&Object(c["r"])(hC,t.get("type"))<0)){var a,s=i.getComponent(Pb(r),o).axis,l=pC(r),u=t.coordinateSystem;null!=l&&u.getOtherAxis&&(a=u.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r,otherDim:l,otherAxisInverse:a}}}),this)}),this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],i=e.handleLabels=[null,null],r=this._displayables.sliderGroup,o=this._size,a=this.dataZoomModel,s=this.api,l=a.get("borderRadius")||0,u=a.get("brushSelect"),h=e.filler=new iC({silent:u,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});r.add(h),r.add(new iC({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:l},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:oC,fill:"rgba(0,0,0,0)"}})),Object(c["k"])([0,1],(function(e){var o=a.get("handleIcon");!It["d"][o]&&o.indexOf("path://")<0&&o.indexOf("image://")<0&&(o="path://"+o);var s=Object(It["a"])(o,-1,0,2,2,null,!0);s.attr({cursor:gC(this._orient),draggable:!0,drift:Object(c["c"])(this._onDragMove,this,e),ondragend:Object(c["c"])(this._onDragEnd,this),onmouseover:Object(c["c"])(this._showDataInfo,this,!0),onmouseout:Object(c["c"])(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),u=a.get("handleSize");this._handleHeight=Object(xe["p"])(u,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(a.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(Nt["o"])(s);var h=a.get("handleColor");null!=h&&(s.style.fill=h),r.add(n[e]=s);var f=a.getModel("textStyle");t.add(i[e]=new ae["a"]({silent:!0,invisible:!0,style:Object(Vt["c"])(f,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:f.getTextColor(),font:f.getFont()}),z2:10}))}),this);var f=h;if(u){var d=Object(xe["p"])(a.get("moveHandleSize"),o[1]),p=e.moveHandle=new _e["a"]({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:d}}),g=.8*d,m=e.moveHandleIcon=Object(It["a"])(a.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=o[1]+d/2-.5,p.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(o[1]/2,Math.max(d,10));f=e.moveZone=new _e["a"]({invisible:!0,shape:{y:o[1]-v,height:d+v}}),f.on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),r.add(p),r.add(m),r.add(f)}f.attr({draggable:!0,cursor:gC(this._orient),drift:Object(c["c"])(this._onDragMove,this,"all"),ondragstart:Object(c["c"])(this._showDataInfo,this,!0),ondragend:Object(c["c"])(this._onDragEnd,this),onmouseover:Object(c["c"])(this._showDataInfo,this,!0),onmouseout:Object(c["c"])(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Object(xe["l"])(t[0],[0,100],e,!0),Object(xe["l"])(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];vh(e,i,r,n.get("zoomLock")?"all":t,null!=o.minSpan?Object(xe["l"])(o.minSpan,a,r,!0):null,null!=o.maxSpan?Object(xe["l"])(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=Object(xe["c"])([Object(xe["l"])(i[0],r,a,!0),Object(xe["l"])(i[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,i=Object(xe["c"])(n.slice()),r=this._size;Object(c["k"])([0,1],(function(t){var i=e.handles[t],o=this._handleHeight;i.attr({scaleX:o/2,scaleY:o/2,x:n[t]+(t?-1:1),y:r[1]/2-o/2})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]});var o={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(o),e.moveZone.setShape(o),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",o.x+o.width/2));for(var a=e.dataShadowSegs,s=[0,i[0],i[1],r[0]],l=0;l<a.length;l++){var u=a[l],h=u.getClipPath();h||(h=new _e["a"],u.setClipPath(h)),h.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,o=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,c=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();o=[this._formatLabel(c[0],s),this._formatLabel(c[1],s)]}}var u=Object(xe["c"])(this._handleEnds.slice());function h(t){var e=fr["getTransform"](n.handles[t].parent,this.group),a=fr["transformDirection"](0===t?"right":"left",e),s=this._handleWidth/2+uC,l=fr["applyTransform"]([u[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:r===lC?"middle":a,align:r===lC?a:"center",text:o[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var o=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return Object(c["w"])(i)?i(t,o):Object(c["C"])(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,i){this._dragging=!0,Eo["g"](i.event);var r=this._displayables.sliderGroup.getLocalTransform(),o=fr["applyTransform"]([e,n],r,!0),a=this._updateInterval(t,o[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),a&&s&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,o=this._updateInterval("all",n[0]-r);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new $n["a"](e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape,i=+new Date;if(!(i-this._brushStartTime<200&&Math.abs(n.width)<5)){var r=this._getViewExtent(),o=[0,100];this._range=Object(xe["c"])([Object(xe["l"])(n.x,r,o,!0),Object(xe["l"])(n.x+n.width,r,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(Eo["g"](t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,i=this.dataZoomModel,r=n.brushRect;r||(r=n.brushRect=new iC({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(r)),r.attr("ignore",!1);var o=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(t,e),l=a.transformCoordToLocal(o.x,o.y),c=this._size;s[0]=Math.max(Math.min(c[0],s[0]),0),r.setShape({x:l[0],y:0,width:s[0]-l[0],height:c[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?fC:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=kb(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),r=this.api.getHeight();t={x:.2*i,y:.2*r,width:.6*i,height:.6*r}}return t},e.type="dataZoom.slider",e}(Hb);function pC(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function gC(t){return"vertical"===t?"ns-resize":"ew-resize"}var mC=dC;function vC(t){t.registerComponentModel(nC),t.registerComponentView(mC),tx(t)}function yC(t){Object(i["a"])(tC),Object(i["a"])(vC)}var _C={get:function(t,e,n){var i=c["d"]((bC[t]||{})[e]);return n&&c["t"](i)?i[i.length-1]:i}},bC={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},xC=_C,wC=Al.mapVisual,SC=Al.eachVisual,TC=c["t"],OC=c["k"],CC=xe["c"],MC=xe["l"],AC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return Object(At["b"])(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,e){var n=this.option;dy["a"].canvasSupported||(n.realtime=!1),!e&&cS(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=c["c"](t,this),this.controllerVisuals=lS(this.option.controller,e,t),this.targetVisuals=lS(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=se["r"](t),e},e.prototype.eachTargetSeries=function(t,e){c["k"](this.getTargetSeriesIndices(),(function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(e,i)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var i,r=this.option,o=r.precision,a=this.dataBound,s=r.formatter;n=n||["<",">"],c["t"](t)&&(t=t.slice(),i=!0);var l=e?t:i?[u(t[0]),u(t[1])]:u(t);return c["C"](s)?s.replace("{value}",i?l[0]:l).replace("{value2}",i?l[1]:l):c["w"](s)?i?s(t[0],t[1]):s(t):i?t[0]===a[0]?n[0]+" "+l[1]:t[1]===a[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function u(t){return t===a[0]?"min":t===a[1]?"max":(+t).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,e=CC([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(null!=e)return t.getDimensionIndex(e);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var r=n[i],o=t.getDimensionInfo(r);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),r=e.controller||(e.controller={});c["I"](i,n),c["I"](r,n);var o=this.isCategory();function a(n){TC(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}function s(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},OC(i,(function(t,e){if(Al.isValidType(e)){var n=xC.get(e,"inactive",o);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}})))}function l(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),r=this.getItemSymbol(),a=r||"roundRect";OC(this.stateList,(function(r){var s=this.itemSize,l=t[r];l||(l=t[r]={color:o?i:[i]}),null==l.symbol&&(l.symbol=e&&c["d"](e)||(o?a:[a])),null==l.symbolSize&&(l.symbolSize=n&&c["d"](n)||(o?s[0]:[s[0],s[0]])),l.symbol=wC(l.symbol,(function(t){return"none"===t?a:t}));var u=l.symbolSize;if(null!=u){var h=-1/0;SC(u,(function(t){t>h&&(h=t)})),l.symbolSize=wC(u,(function(t){return MC(t,[0,h],[0,s[0]],!0)}))}}),this)}a.call(this,i),a.call(this,r),s.call(this,i,"inRange","outOfRange"),l.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Ei["a"]),DC=AC,EC=[20,140],IC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=EC[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=EC[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):c["t"](e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),c["k"](this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=xe["c"]((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var i=[],r=n.getData();r.each(this.getDataDimensionIndex(r),(function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)}),this),e.push({seriesId:n.id,dataIndex:i})}),this),e},e.prototype.getVisualMeta=function(t){var e=PC(this,"outOfRange",this.getExtent()),n=PC(this,"inRange",this.option.range.slice()),i=[];function r(e,n){i.push({value:e,color:t(e,n)})}for(var o=0,a=0,s=n.length,l=e.length;a<l&&(!n.length||e[a]<=n[0]);a++)e[a]<n[o]&&r(e[a],"outOfRange");for(var c=1;o<s;o++,c=0)c&&i.length&&r(n[o],"outOfRange"),r(n[o],"inRange");for(c=1;a<l;a++)(!n.length||n[n.length-1]<e[a])&&(c&&(i.length&&r(i[i.length-1].value,"outOfRange"),c=0),r(e[a],"outOfRange"));var u=i.length;return{stops:i,outerColors:[u?i[0].color:"transparent",u?i[u-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=Object(en["d"])(DC.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(DC);function PC(t,e,n){if(n[0]===n[1])return n.slice();for(var i=200,r=(n[1]-n[0])/i,o=n[0],a=[],s=0;s<=i&&o<n[1];s++)a.push(o),o+=r;return a.push(n[1]),a}var LC=IC,kC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return Object(At["b"])(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,i):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=Ce["j"](e.get("padding")||0),i=t.getBoundingRect();t.add(new _e["a"]({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){n=n||{};var i=n.forceState,r=this.visualMapModel,o={};if("color"===e){var a=r.get("contentColor");o.color=a}function s(t){return o[t]}function l(t,e){o[t]=e}var u=r.controllerVisuals[i||r.getValueState(t)],h=Al.prepareVisualTypes(u);return c["k"](h,(function(i){var r=u[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=u.__alphaForOpacity),Al.dependsOn(i,e)&&r&&r.applyVisual(t,s,l)})),o[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;Gn["i"](t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,i){},e.type="visualMap",e}(Di["a"]),jC=kC,RC=[["left","right","width"],["top","bottom","height"]];function NC(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var o={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,s=RC[a],l=[0,null,10],c={},u=0;u<3;u++)c[RC[1-a][u]]=l[u],c[s[u]]=2===u?n[0]:i[s[u]];var h=[["x","width",3],["y","height",0]][a],f=Object(Gn["g"])(c,o,i.padding);return s[(f.margin[h[2]]||0)+f[h[0]]+.5*f[h[1]]<.5*o[h[1]]?0:1]}function BC(t,e){return c["k"](t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var FC=xe["l"],zC=c["k"],VC=Math.min,HC=Math.max,GC=12,UC=6,WC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return Object(At["b"])(e,t),e.prototype.doRender=function(t,e,n,i){this._api=n,i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-o:a[1]+o],s),c=this._applyTransform(0===n?"bottom":"top",s),u=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new ae["a"]({style:{x:l[0],y:l[1],verticalAlign:"horizontal"===u?"middle":c,align:"horizontal"===u?c:"center",text:i,font:h.getFont(),fill:h.getTextColor()}}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,o=this._useHandle,a=NC(e,this.api,i),s=n.mainGroup=this._createBarGroup(a),l=new Pt["a"];s.add(l),l.add(n.outOfRange=XC()),l.add(n.inRange=XC(null,o?ZC(this._orient):null,c["c"](this._dragHandle,this,"all",!1),c["c"](this._dragHandle,this,"all",!0))),l.setClipPath(new _e["a"]({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var u=e.textStyleModel.getTextRect("国"),h=HC(u.width,u.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,s,0,i,h,r),this._createHandle(e,s,1,i,h,r)),this._createIndicator(e,s,i,h,r),t.add(s)},e.prototype._createHandle=function(t,e,n,i,r,o){var a=c["c"](this._dragHandle,this,n,!1),s=c["c"](this._dragHandle,this,n,!0),l=Object(b["h"])(t.get("handleSize"),i[0]),u=Object(It["a"])(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),h=ZC(this._orient);u.attr({cursor:h,draggable:!0,drift:a,ondragend:s,onmousemove:function(t){Eo["g"](t.event)}}),u.x=i[0]/2,u.useStyle(t.getModel("handleStyle").getItemStyle()),u.setStyle({strokeNoScale:!0,strokeFirst:!0}),u.style.lineWidth*=2,u.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(Nt["F"])(u,!0),e.add(u);var f=this.visualMapModel.textStyleModel,d=new ae["a"]({cursor:h,draggable:!0,drift:a,onmousemove:function(t){Eo["g"](t.event)},ondragend:s,style:{x:0,y:0,text:"",font:f.getFont(),fill:f.getTextColor()}});d.ensureState("blur").style={opacity:.1},d.stateTransition={duration:200},this.group.add(d);var p=[l,0],g=this._shapes;g.handleThumbs[n]=u,g.handleLabelPoints[n]=p,g.handleLabels[n]=d},e.prototype._createIndicator=function(t,e,n,i,r){var o=Object(b["h"])(t.get("indicatorSize"),n[0]),a=Object(It["a"])(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=t.getModel("indicatorStyle").getItemStyle();if(a instanceof h["a"]){var l=a.style;a.useStyle(c["m"]({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);e.add(a);var u=this.visualMapModel.textStyleModel,f=new ae["a"]({silent:!0,invisible:!0,style:{x:0,y:0,text:"",font:u.getFont(),fill:u.getTextColor()}});this.group.add(f);var d=[("horizontal"===r?i/2:UC)+n[0]/2,0],p=this._shapes;p.indicator=a,p.indicatorLabel=f,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():qC(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[FC(e[0],n,i,!0),FC(e[1],n,i,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];vh(e,i,r,t,0);var o=n.getExtent();this._dataInterval=[FC(i[0],r,o,!0),FC(i[1],r,o,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(o,a)},e.prototype._createBarVisual=function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,a);return{barColor:new oe["a"](0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=100,i=[],r=(t[1]-t[0])/n;i.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var o=1;o<n;o++){var a=t[0]+r*o;if(a>t[1])break;i.push({color:this.getControllerVisual(a,"color",e),offset:o/n})}return i.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),i},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Pt["a"]("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,o=n.handleLabels,a=i.itemSize,s=i.getExtent();zC([0,1],(function(l){var c=r[l];c.setStyle("fill",e.handlesColor[l]),c.y=t[l];var u=FC(t[l],[0,a[1]],s,!0),h=this.getControllerVisual(u,"symbolSize");c.scaleX=c.scaleY=h/a[0],c.x=a[0]-h/2;var f=fr["applyTransform"](n.handleLabelPoints[l],fr["getTransform"](c,this.group));o[l].setStyle({x:f[0],y:f[1],text:i.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,i){var r=this.visualMapModel,o=r.getExtent(),a=r.itemSize,s=[0,a[1]],l=this._shapes,c=l.indicator;if(c){c.attr("invisible",!1);var u={convertOpacityToAlpha:!0},h=this.getControllerVisual(t,"color",u),f=this.getControllerVisual(t,"symbolSize"),d=FC(t,o,s,!0),p=a[0]-f/2,g={x:c.x,y:c.y};c.y=d,c.x=p;var m=fr["applyTransform"](l.indicatorLabelPoint,fr["getTransform"](c,this.group)),v=l.indicatorLabel;v.attr("invisible",!1);var y=this._applyTransform("left",l.mainGroup),_=this._orient,b="horizontal"===_;v.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:b?y:"middle",align:b?"center":y});var x={x:p,y:d,style:{fill:h}},w={style:{x:m[0],y:m[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var S={duration:100,easing:"cubicInOut",additive:!0};c.x=g.x,c.y=g.y,c.animateTo(x,S),v.animateTo(w,S)}else c.attr(x),v.attr(w);this._firstShowIndicator=!1;var T=this._shapes.handleLabels;if(T)for(var O=0;O<T.length;O++)this._api.enterBlur(T[O])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);i[1]=VC(HC(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],o=n.getExtent();t=VC(HC(r[0],t),r[1]);var a=YC(n,o,r),s=[t-a,t+a],l=FC(t,r,o,!0),c=[FC(s[0],r,o,!0),FC(s[1],r,o,!0)];s[0]<r[0]&&(c[0]=-1/0),s[1]>r[1]&&(c[1]=1/0),e&&(c[0]===-1/0?this._showIndicator(l,c[1],"< ",a):c[1]===1/0?this._showIndicator(l,c[0],"> ",a):this._showIndicator(l,l,"≈ ",a));var u=this._hoverLinkDataIndices,h=[];(e||qC(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var f=se["d"](u,h);this._dispatchHighDown("downplay",BC(f[0],n)),this._dispatchHighDown("highlight",BC(f[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e=t.target,n=this.visualMapModel;if(e&&null!=Object(Rt["a"])(e).dataIndex){var i=Object(Rt["a"])(e),r=this.ecModel.getSeriesByIndex(i.seriesIndex);if(n.isTargetSeries(r)){var o=r.getData(i.dataType),a=o.getStore().get(n.getDataDimensionIndex(o),i.dataIndex);isNaN(a)||this._showIndicator(a,a)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this._api.leaveBlur(e[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",BC(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,n,i){var r=fr["getTransform"](e,i?null:this.group);return c["t"](t)?fr["applyTransform"](t,r,n):fr["transformDirection"](t,r,n)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(jC);function XC(t,e,n,i){return new oo["a"]({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){Eo["g"](t.event)},ondragend:i})}function YC(t,e,n){var i=GC/2,r=t.get("hoverLinkDataSize");return r&&(i=FC(r,e,n,!0)/2),i}function qC(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function ZC(t){return"vertical"===t?"ns-resize":"ew-resize"}var KC=WC,$C={type:"selectDataRange",event:"dataRangeSelected",update:"update"},JC=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},QC=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var i=t.pipelineContext;!e.isTargetSeries(t)||i&&i.large||n.push(hS(e.stateList,e.targetVisuals,c["c"](e.getValueState,e),e.getDataDimensionIndex(t.getData())))})),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(c["c"](tM,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimensionIndex(n);o>=0&&(r.dimension=o,i.push(r))}})),t.getData().setVisual("visualMeta",i)}}];function tM(t,e,n,i){for(var r=e.targetVisuals[i],o=Al.prepareVisualTypes(r),a={color:Object(oS["b"])(t.getData(),"color")},s=0,l=o.length;s<l;s++){var c=o[s],u=r["opacity"===c?"__alphaForOpacity":c];u&&u.applyVisual(n,h,f)}return a.color;function h(t){return a[t]}function f(t,e){a[t]=e}}var eM=c["k"];function nM(t){var e=t&&t.visualMap;c["t"](e)||(e=e?[e]:[]),eM(e,(function(t){if(t){iM(t,"splitList")&&!iM(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&c["t"](e)&&eM(e,(function(t){c["A"](t)&&(iM(t,"start")&&!iM(t,"min")&&(t.min=t.start),iM(t,"end")&&!iM(t,"max")&&(t.max=t.end))}))}}))}function iM(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var rM=!1;function oM(t){rM||(rM=!0,t.registerSubTypeDefaulter("visualMap",(function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"})),t.registerAction($C,JC),Object(c["k"])(QC,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(nM))}function aM(t){t.registerComponentModel(LC),t.registerComponentView(KC),oM(t)}var sM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return Object(At["b"])(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],lM[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual((function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=c["d"](r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=c["H"](this._pieceList,(function(t){return t=c["d"](t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var e=this.option,n={},i=Al.listVisualTypes(),r=this.isCategory();function o(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}c["k"](e.pieces,(function(t){c["k"](i,(function(e){t.hasOwnProperty(e)&&(n[e]=1)}))})),c["k"](n,(function(t,n){var i=!1;c["k"](this.stateList,(function(t){i=i||o(e,t,n)||o(e.target,t,n)}),this),!i&&c["k"](this.stateList,(function(t){(e[t]||(e[t]={}))[n]=xC.get(n,"inRange"===t?"active":"inactive",r)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,c["k"](i,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var o=!1;c["k"](i,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(o?r[n]=!1:o=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=c["d"](t)},e.prototype.getValueState=function(t){var e=Al.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(i){var r=[],o=i.getData();o.each(this.getDataDimensionIndex(o),(function(e,i){var o=Al.findPieceIndex(e,n);o===t&&r.push(i)}),this),e.push({seriesId:i.id,dataIndex:r})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],i=this,r=this._pieceList.slice();if(r.length){var o=r[0].interval[0];o!==-1/0&&r.unshift({interval:[-1/0,o]}),o=r[r.length-1].interval[1],o!==1/0&&r.push({interval:[o,1/0]})}else r.push({interval:[-1/0,1/0]});var a=-1/0;return c["k"](r,(function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])}),this),{stops:e,outerColors:n}}function s(r,o){var a=i.getRepresentValue({interval:r});o||(o=i.getValueState(a));var s=t(a,o);r[0]===-1/0?n[0]=s:r[1]===1/0?n[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=Object(en["d"])(DC.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(DC),lM={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),i=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;var o=(i[1]-i[0])/r;while(+o.toFixed(n)!==o&&n<5)n++;e.precision=n,o=+o.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<r;s+=o,a++){var l=a===r-1?i[1]:s+o;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),Object(xe["t"])(t),c["k"](t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;c["k"](e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),cM(e,t)},pieces:function(t){var e=this.option;c["k"](e.pieces,(function(e,n){c["A"](e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var r=i.value=e.value;i.interval=[r,r],i.close=[1,1]}else{for(var o=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],u=[],h=0;h<2;h++){for(var f=[["gte","gt","min"],["lte","lt","max"]][h],d=0;d<3&&null==o[h];d++)o[h]=e[f[d]],a[h]=s[d],u[h]=2===d;null==o[h]&&(o[h]=l[h])}u[0]&&o[1]===1/0&&(a[0]=0),u[1]&&o[0]===-1/0&&(a[1]=0),o[0]===o[1]&&a[0]&&a[1]&&(i.value=o[0])}i.visual=Al.retrieveVisuals(e),t.push(i)}),this),cM(e,t),Object(xe["t"])(t),c["k"](t,(function(t){var e=t.close,n=[["<","≤"][e[1]],[">","≥"][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function cM(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var uM=sM,hM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(At["b"])(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),o=i.getTextColor(),a=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),u=l.endsText,h=c["O"](e.get("showLabel",!0),!u);u&&this._renderEndsText(t,u[0],s,h,a),c["k"](l.viewPieceList,(function(i){var l=i.piece,u=new Pt["a"];u.onclick=c["c"](this._onItemClick,this,l),this._enableHoverLink(u,i.indexInModelPieceList);var f=e.getRepresentValue(l);if(this._createItemSymbol(u,f,[0,0,s[0],s[1]]),h){var d=this.visualMapModel.getValueState(f);u.add(new ae["a"]({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:a,font:r,fill:o,opacity:"outOfRange"===d?.5:1}}))}t.add(u)}),this),u&&this._renderEndsText(t,u[1],s,h,a),Gn["b"](e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return i("highlight")})).on("mouseout",(function(){return i("downplay")}));var i=function(t){var i=n.visualMapModel;i.option.hoverLink&&n.api.dispatchAction({type:t,batch:BC(i.findTargetDataIndices(e),i)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return NC(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,i,r){if(e){var o=new Pt["a"],a=this.visualMapModel.textStyleModel;o.add(new ae["a"]({style:{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?r:"center",text:e,font:a.getFont(),fill:a.getTextColor()}})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=c["H"](t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(Object(It["a"])(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,i=c["d"](n.selected),r=e.getSelectedMapKey(t);"single"===n.selectedMode?(i[r]=!0,c["k"](i,(function(t,e){i[e]=e===r}))):i[r]=!i[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:i})},e.type="visualMap.piecewise",e}(jC),fM=hM;function dM(t){t.registerComponentModel(uM),t.registerComponentView(fM),oM(t)}function pM(t){Object(i["a"])(aM),Object(i["a"])(dM)}var gM={label:{enabled:!0},decal:{show:!1}},mM=Object(se["o"])(),vM={};function yM(t,e){var n=t.getModel("aria");if(n.get("enabled")){var i=c["d"](gM);c["I"](i.label,t.getLocaleModel().get("aria"),!1),c["I"](n.option,i,!1),r(),o()}function r(){var e=n.getModel("decal"),i=e.get("show");if(i){var r=c["g"]();t.eachSeries((function(t){if(!t.isColorBySeries()){var e=r.get(t.type);e||(e={},r.set(t.type,e)),mM(t).scope=e}})),t.eachRawSeries((function(e){if(!t.isSeriesFiltered(e))if("function"!==typeof e.enableAriaDecal){var n=e.getData();if(e.isColorBySeries()){var i=Object(Ps["b"])(e.ecModel,e.name,vM,t.getSeriesCount()),r=n.getVisual("decal");n.setVisual("decal",u(r,i))}else{var o=e.getRawData(),a={},s=mM(e).scope;n.each((function(t){var e=n.getRawIndex(t);a[e]=t}));var l=o.count();o.each((function(t){var i=a[t],r=o.getName(t)||t+"",c=Object(Ps["b"])(e.ecModel,r,s,l),h=n.getItemVisual(i,"decal");n.setItemVisual(i,"decal",u(h,c))}))}}else e.enableAriaDecal();function u(t,e){var n=t?c["m"](c["m"]({},e),t):e;return n.dirty=!0,n}}))}}function o(){var i=t.getLocaleModel().get("aria"),r=n.getModel("label");if(r.option=c["j"](r.option,i),r.get("enabled")){var o=e.getZr().dom;if(r.get("description"))o.setAttribute("aria-label",r.get("description"));else{var u,h=t.getSeriesCount(),f=r.get(["data","maxCount"])||10,d=r.get(["series","maxCount"])||10,p=Math.min(h,d);if(!(h<1)){var g=s();if(g){var m=r.get(["general","withTitle"]);u=a(m,{title:g})}else u=r.get(["general","withoutTitle"]);var v=[],y=h>1?r.get(["series","multiple","prefix"]):r.get(["series","single","prefix"]);u+=a(y,{seriesCount:h}),t.eachSeries((function(t,e){if(e<p){var n=void 0,i=t.get("name"),o=i?"withName":"withoutName";n=h>1?r.get(["series","multiple",o]):r.get(["series","single",o]),n=a(n,{seriesId:t.seriesIndex,seriesName:t.get("name"),seriesType:l(t.subType)});var s=t.getData();if(s.count()>f){var c=r.get(["data","partialData"]);n+=a(c,{displayCnt:f})}else n+=r.get(["data","allData"]);for(var u=r.get(["data","separator","middle"]),d=r.get(["data","separator","end"]),g=[],m=0;m<s.count();m++)if(m<f){var y=s.getName(m),_=s.getValues(m),b=r.get(["data",y?"withName":"withoutName"]);g.push(a(b,{name:y,value:_.join(u)}))}n+=g.join(u)+d,v.push(n)}}));var _=r.getModel(["series","multiple","separator"]),b=_.get("middle"),x=_.get("end");u+=v.join(b)+x,o.setAttribute("aria-label",u)}}}}function a(t,e){if("string"!==typeof t)return t;var n=t;return c["k"](e,(function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)})),n}function s(){var e=t.get("title");return e&&e.length&&(e=e[0]),e&&e.text}function l(e){return t.getLocaleModel().get(["series","typeNames"])[e]||"自定义图"}}function _M(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},c["k"](["description","general","series","data"],(function(t){null!=e[t]&&(e.label[t]=e[t])}))}}function bM(t){t.registerPreprocessor(_M),t.registerVisual(t.PRIORITY.VISUAL.ARIA,yM)}var xM={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},wM=function(){function t(t){var e=this._condVal=Object(c["C"])(t)?new RegExp(t):Object(c["B"])(t)?t:null;if(null==e){var n="";0,Object(Wd["c"])(n)}}return t.prototype.evaluate=function(t){var e=typeof t;return"string"===e?this._condVal.test(t):"number"===e&&this._condVal.test(t+"")},t}(),SM=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),TM=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),OM=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),CM=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),MM=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=this.getValue,n=e(this.valueGetterParam),i=t?this.valueParser(n):null,r=0;r<this.subCondList.length;r++)if(!this.subCondList[r].evaluate(t?i:n))return!1;return!0},t}();function AM(t,e){if(!0===t||!1===t){var n=new SM;return n.value=t,n}var i="";return PM(t)||Object(Wd["c"])(i),t.and?DM("and",t,e):t.or?DM("or",t,e):t.not?EM(t,e):IM(t,e)}function DM(t,e,n){var i=e[t],r="";Object(c["t"])(i)||Object(Wd["c"])(r),i.length||Object(Wd["c"])(r);var o="and"===t?new TM:new OM;return o.children=Object(c["H"])(i,(function(t){return AM(t,n)})),o.children.length||Object(Wd["c"])(r),o}function EM(t,e){var n=t.not,i="";PM(n)||Object(Wd["c"])(i);var r=new CM;return r.child=AM(n,e),r.child||Object(Wd["c"])(i),r}function IM(t,e){for(var n="",i=e.prepareGetValue(t),r=[],o=Object(c["F"])(t),a=t.parser,s=a?Object(_T["c"])(a):null,l=0;l<o.length;l++){var u=o[l];if("parser"!==u&&!e.valueGetterAttrMap.get(u)){var h=Object(c["q"])(xM,u)?xM[u]:u,f=t[u],d=s?s(f):f,p=Object(_T["b"])(h,d)||"reg"===h&&new wM(d);p||Object(Wd["c"])(n),r.push(p)}}r.length||Object(Wd["c"])(n);var g=new MM;return g.valueGetterParam=i,g.valueParser=s,g.getValue=e.getValue,g.subCondList=r,g}function PM(t){return Object(c["A"])(t)&&!Object(c["u"])(t)}var LM=function(){function t(t,e){this._cond=AM(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}();function kM(t,e){return new LM(t,e)}var jM={type:"echarts:filter",transform:function(t){for(var e,n=t.upstream,i=kM(t.config,{valueGetterAttrMap:Object(c["g"])({dimension:!0}),prepareGetValue:function(t){var e="",i=t.dimension;Object(c["q"])(t,"dimension")||Object(Wd["c"])(e);var r=n.getDimensionInfo(i);return r||Object(Wd["c"])(e),{dimIdx:r.index}},getValue:function(t){return n.retrieveValueFromItem(e,t.dimIdx)}}),r=[],o=0,a=n.count();o<a;o++)e=n.getRawDataItem(o),i.evaluate()&&r.push(e);return{data:r}}};var RM={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,i="",r=Object(se["r"])(n);r.length||Object(Wd["c"])(i);var o=[];Object(c["k"])(r,(function(t){var n=t.dimension,r=t.order,a=t.parser,s=t.incomparable;if(null==n&&Object(Wd["c"])(i),"asc"!==r&&"desc"!==r&&Object(Wd["c"])(i),s&&"min"!==s&&"max"!==s){var l="";0,Object(Wd["c"])(l)}if("asc"!==r&&"desc"!==r){var c="";0,Object(Wd["c"])(c)}var u=e.getDimensionInfo(n);u||Object(Wd["c"])(i);var h=a?Object(_T["c"])(a):null;a&&!h&&Object(Wd["c"])(i),o.push({dimIdx:u.index,parser:h,comparator:new _T["a"](r,s)})}));var a=e.sourceFormat;a!==Xd["c"]&&a!==Xd["e"]&&Object(Wd["c"])(i);for(var s=[],l=0,u=e.count();l<u;l++)s.push(e.getRawDataItem(l));return s.sort((function(t,n){for(var i=0;i<o.length;i++){var r=o[i],a=e.retrieveValueFromItem(t,r.dimIdx),s=e.retrieveValueFromItem(n,r.dimIdx);r.parser&&(a=r.parser(a),s=r.parser(s));var l=r.comparator.evaluate(a,s);if(0!==l)return l}return 0})),{data:s}}};function NM(t){t.registerTransform(jM),t.registerTransform(RM)}var BM=n("5e81"),FM=n("342d"),zM=le["a"].CMD;function VM(t,e){return Math.abs(t-e)<1e-5}function HM(t){var e,n,i,r,o,a=t.data,s=t.len(),l=[],c=0,u=0,h=0,f=0;function d(t,n){e&&e.length>2&&l.push(e),e=[t,n]}function p(t,n,i,r){VM(t,i)&&VM(n,r)||e.push(t,n,i,r,i,r)}function g(t,n,i,r,o,a){var s=Math.abs(n-t),l=4*Math.tan(s/4)/3,c=n<t?-1:1,u=Math.cos(t),h=Math.sin(t),f=Math.cos(n),d=Math.sin(n),p=u*o+i,g=h*a+r,m=f*o+i,v=d*a+r,y=o*l*c,_=a*l*c;e.push(p-y*h,g+_*u,m+y*d,v-_*f,m,v)}for(var m=0;m<s;){var v=a[m++],y=1===m;switch(y&&(c=a[m],u=a[m+1],h=c,f=u,v!==zM.L&&v!==zM.C&&v!==zM.Q||(e=[h,f])),v){case zM.M:c=h=a[m++],u=f=a[m++],d(h,f);break;case zM.L:n=a[m++],i=a[m++],p(c,u,n,i),c=n,u=i;break;case zM.C:e.push(a[m++],a[m++],a[m++],a[m++],c=a[m++],u=a[m++]);break;case zM.Q:n=a[m++],i=a[m++],r=a[m++],o=a[m++],e.push(c+2/3*(n-c),u+2/3*(i-u),r+2/3*(n-r),o+2/3*(i-o),r,o),c=r,u=o;break;case zM.A:var _=a[m++],b=a[m++],x=a[m++],w=a[m++],S=a[m++],T=a[m++]+S;m+=1;var O=!a[m++];n=Math.cos(S)*x+_,i=Math.sin(S)*w+b,y?(h=n,f=i,d(h,f)):p(c,u,n,i),c=Math.cos(T)*x+_,u=Math.sin(T)*w+b;for(var C=(O?-1:1)*Math.PI/2,M=S;O?M>T:M<T;M+=C){var A=O?Math.max(M+C,T):Math.min(M+C,T);g(M,A,_,b,x,w)}break;case zM.R:h=c=a[m++],f=u=a[m++],n=h+a[m++],i=f+a[m++],d(n,f),p(n,f,n,i),p(n,i,h,i),p(h,i,h,f),p(h,f,n,f);break;case zM.Z:e&&p(c,u,h,f),c=h,u=f;break}}return e&&e.length>2&&l.push(e),l}function GM(t,e,n,i,r,o,a,s,l,c){if(VM(t,n)&&VM(e,i)&&VM(r,a)&&VM(o,s))l.push(a,s);else{var u=2/c,h=u*u,f=a-t,d=s-e,p=Math.sqrt(f*f+d*d);f/=p,d/=p;var g=n-t,m=i-e,v=r-a,y=o-s,_=g*g+m*m,b=v*v+y*y;if(_<h&&b<h)l.push(a,s);else{var x=f*g+d*m,w=-f*v-d*y,S=_-x*x,T=b-w*w;if(S<h&&x>=0&&T<h&&w>=0)l.push(a,s);else{var O=[],C=[];Object(ce["g"])(t,n,r,a,.5,O),Object(ce["g"])(e,i,o,s,.5,C),GM(O[0],C[0],O[1],C[1],O[2],C[2],O[3],C[3],l,c),GM(O[4],C[4],O[5],C[5],O[6],C[6],O[7],C[7],l,c)}}}}function UM(t,e){var n=HM(t),i=[];e=e||1;for(var r=0;r<n.length;r++){var o=n[r],a=[],s=o[0],l=o[1];a.push(s,l);for(var c=2;c<o.length;){var u=o[c++],h=o[c++],f=o[c++],d=o[c++],p=o[c++],g=o[c++];GM(s,l,u,h,f,d,p,g,a,e),s=p,l=g}i.push(a)}return i}function WM(t,e,n){var i=t[e],r=t[1-e],o=Math.abs(i/r),a=Math.ceil(Math.sqrt(o*n)),s=Math.floor(n/a);0===s&&(s=1,a=n);for(var l=[],c=0;c<a;c++)l.push(s);var u=a*s,h=n-u;if(h>0)for(c=0;c<h;c++)l[c%a]+=1;return l}function XM(t,e,n){for(var i=t.r0,r=t.r,o=t.startAngle,a=t.endAngle,s=Math.abs(a-o),l=s*r,c=r-i,u=l>Math.abs(c),h=WM([l,c],u?0:1,e),f=(u?s:c)/h.length,d=0;d<h.length;d++)for(var p=(u?c:s)/h[d],g=0;g<h[d];g++){var m={};u?(m.startAngle=o+f*d,m.endAngle=o+f*(d+1),m.r0=i+p*g,m.r=i+p*(g+1)):(m.startAngle=o+p*g,m.endAngle=o+p*(g+1),m.r0=i+f*d,m.r=i+f*(d+1)),m.clockwise=t.clockwise,m.cx=t.cx,m.cy=t.cy,n.push(m)}}function YM(t,e,n){for(var i=t.width,r=t.height,o=i>r,a=WM([i,r],o?0:1,e),s=o?"width":"height",l=o?"height":"width",c=o?"x":"y",u=o?"y":"x",h=t[s]/a.length,f=0;f<a.length;f++)for(var d=t[l]/a[f],p=0;p<a[f];p++){var g={};g[c]=f*h,g[u]=p*d,g[s]=h,g[l]=d,g.x+=t.x,g.y+=t.y,n.push(g)}}function qM(t,e,n,i){return t*i-n*e}function ZM(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,f=qM(u,h,l,c);if(Math.abs(f)<1e-6)return null;var d=t-r,p=e-o,g=qM(d,p,u,h)/f;return g<0||g>1?null:new $n["a"](g*l+t,g*c+e)}function KM(t,e,n){var i=new $n["a"];$n["a"].sub(i,n,e),i.normalize();var r=new $n["a"];$n["a"].sub(r,t,e);var o=r.dot(i);return o}function $M(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function JM(t,e,n){for(var i=t.length,r=[],o=0;o<i;o++){var a=t[o],s=t[(o+1)%i],l=ZM(a[0],a[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&r.push({projPt:KM(l,e,n),pt:l,idx:o})}if(r.length<2)return[{points:t},{points:t}];r.sort((function(t,e){return t.projPt-e.projPt}));var c=r[0],u=r[r.length-1];if(u.idx<c.idx){var h=c;c=u,u=h}var f=[c.pt.x,c.pt.y],d=[u.pt.x,u.pt.y],p=[f],g=[d];for(o=c.idx+1;o<=u.idx;o++)$M(p,t[o].slice());$M(p,d),$M(p,f);for(o=u.idx+1;o<=c.idx+i;o++)$M(g,t[o%i].slice());return $M(g,f),$M(g,d),[{points:p},{points:g}]}function QM(t){var e=t.points,n=[],i=[];Object(Qa["d"])(e,n,i);var r=new Xi["a"](n[0],n[1],i[0]-n[0],i[1]-n[1]),o=r.width,a=r.height,s=r.x,l=r.y,c=new $n["a"],u=new $n["a"];return o>a?(c.x=u.x=s+o/2,c.y=l,u.y=l+a):(c.y=u.y=l+a/2,c.x=s,u.x=s+o),JM(e,c,u)}function tA(t,e,n,i){if(1===n)i.push(e);else{var r=Math.floor(n/2),o=t(e);tA(t,o[0],r,i),tA(t,o[1],n-r,i)}return i}function eA(t,e){for(var n=[],i=0;i<e;i++)n.push(Object(FM["a"])(t));return n}function nA(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function iA(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}function rA(t,e){var n,i=[],r=t.shape;switch(t.type){case"rect":YM(r,e,i),n=_e["a"];break;case"sector":XM(r,e,i),n=be["a"];break;case"circle":XM({r0:0,r:r.r,startAngle:0,endAngle:2*Math.PI,cx:r.cx,cy:r.cy},e,i),n=be["a"];break;default:var o=t.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=Object(c["H"])(UM(t.getUpdatedPathProxy(),a),(function(t){return iA(t)})),l=s.length;if(0===l)tA(QM,{points:s[0]},e,i);else if(l===e)for(var u=0;u<l;u++)i.push({points:s[u]});else{var h=0,f=Object(c["H"])(s,(function(t){var e=[],n=[];Object(Qa["d"])(t,e,n);var i=(n[1]-e[1])*(n[0]-e[0]);return h+=i,{poly:t,area:i}}));f.sort((function(t,e){return e.area-t.area}));var d=e;for(u=0;u<l;u++){var p=f[u];if(d<=0)break;var g=u===l-1?d:Math.ceil(p.area/h*e);g<0||(tA(QM,{points:p.poly},g,i),d-=g)}}n=oo["a"];break}if(!n)return eA(t,e);var m=[];for(u=0;u<i.length;u++){var v=new n;v.setShape(i[u]),nA(t,v),m.push(v)}return m}function oA(t,e){var n=t.length,i=e.length;if(n===i)return[t,e];for(var r=[],o=[],a=n<i?t:e,s=Math.min(n,i),l=Math.abs(i-n)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,h=[a[0],a[1]],f=l,d=2;d<s;){var p=a[d-2],g=a[d-1],m=a[d++],v=a[d++],y=a[d++],_=a[d++],b=a[d++],x=a[d++];if(f<=0)h.push(m,v,y,_,b,x);else{for(var w=Math.min(f,u-1)+1,S=1;S<=w;S++){var T=S/w;Object(ce["g"])(p,m,y,b,T,r),Object(ce["g"])(g,v,_,x,T,o),p=r[3],g=o[3],h.push(r[1],o[1],r[2],o[2],p,g),m=r[5],v=o[5],y=r[6],_=o[6]}f-=w-1}}return a===t?[h,e]:[t,h]}function aA(t,e){for(var n=t.length,i=t[n-2],r=t[n-1],o=[],a=0;a<e.length;)o[a++]=i,o[a++]=r;return o}function sA(t,e){for(var n,i,r,o=[],a=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],c=e[s],u=void 0,h=void 0;l?c?(n=oA(l,c),u=n[0],h=n[1],i=u,r=h):(h=aA(r||l,l),u=l):(u=aA(i||c,c),h=c),o.push(u),a.push(h)}return[o,a]}function lA(t){for(var e=0,n=0,i=0,r=t.length,o=0,a=r-2;o<r;a=o,o+=2){var s=t[a],l=t[a+1],c=t[o],u=t[o+1],h=s*u-c*l;e+=h,n+=(s+c)*h,i+=(l+u)*h}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,i/e/3,e]}function cA(t,e,n,i){for(var r=(t.length-2)/6,o=1/0,a=0,s=t.length,l=s-2,c=0;c<r;c++){for(var u=6*c,h=0,f=0;f<s;f+=2){var d=0===f?u:(u+f-2)%l+2,p=t[d]-n[0],g=t[d+1]-n[1],m=e[f]-i[0],v=e[f+1]-i[1],y=m-p,_=v-g;h+=y*y+_*_}h<o&&(o=h,a=c)}return a}function uA(t){for(var e=[],n=t.length,i=0;i<n;i+=2)e[i]=t[n-i-2],e[i+1]=t[n-i-1];return e}function hA(t,e,n,i){for(var r,o=[],a=0;a<t.length;a++){var s=t[a],l=e[a],c=lA(s),u=lA(l);null==r&&(r=c[2]<0!==u[2]<0);var h=[],f=[],d=0,p=1/0,g=[],m=s.length;r&&(s=uA(s));for(var v=6*cA(s,l,c,u),y=m-2,_=0;_<y;_+=2){var b=(v+_)%y+2;h[_+2]=s[b]-c[0],h[_+3]=s[b+1]-c[1]}if(h[0]=s[v]-c[0],h[1]=s[v+1]-c[1],n>0)for(var x=i/n,w=-i/2;w<=i/2;w+=x){var S=Math.sin(w),T=Math.cos(w),O=0;for(_=0;_<s.length;_+=2){var C=h[_],M=h[_+1],A=l[_]-u[0],D=l[_+1]-u[1],E=A*T-D*S,I=A*S+D*T;g[_]=E,g[_+1]=I;var P=E-C,L=I-M;O+=P*P+L*L}if(O<p){p=O,d=w;for(var k=0;k<g.length;k++)f[k]=g[k]}}else for(var j=0;j<m;j+=2)f[j]=l[j]-u[0],f[j+1]=l[j+1]-u[1];o.push({from:h,to:f,fromCp:c,toCp:u,rotation:-d})}return o}function fA(t){return t.__isCombineMorphing}var dA="__mOriginal_";function pA(t,e,n){var i=dA+e,r=t[i]||t[e];t[i]||(t[i]=t[e]);var o=n.replace,a=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=o?o.apply(this,e):r.apply(this,e),a&&a.apply(this,e),t}}function gA(t,e){var n=dA+e;t[n]&&(t[e]=t[n],t[n]=null)}function mA(t,e){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;){var o=i[r],a=i[r+1];i[r++]=e[0]*o+e[2]*a+e[4],i[r++]=e[1]*o+e[3]*a+e[5]}}function vA(t,e){var n=t.getUpdatedPathProxy(),i=e.getUpdatedPathProxy(),r=sA(HM(n),HM(i)),o=r[0],a=r[1],s=t.getComputedTransform(),l=e.getComputedTransform();function c(){this.transform=null}s&&mA(o,s),l&&mA(a,l),pA(e,"updateTransform",{replace:c}),e.transform=null;var u=hA(o,a,10,Math.PI),h=[];pA(e,"buildPath",{replace:function(t){for(var n=e.__morphT,i=1-n,r=[],o=0;o<u.length;o++){var a=u[o],s=a.from,l=a.to,c=a.rotation*n,f=a.fromCp,d=a.toCp,p=Math.sin(c),g=Math.cos(c);Object(Zi["j"])(r,f,d,n);for(var m=0;m<s.length;m+=2){var v=s[m],y=s[m+1],_=l[m],b=l[m+1],x=v*i+_*n,w=y*i+b*n;h[m]=x*g-w*p+r[0],h[m+1]=x*p+w*g+r[1]}var S=h[0],T=h[1];t.moveTo(S,T);for(m=2;m<s.length;){_=h[m++],b=h[m++];var O=h[m++],C=h[m++],M=h[m++],A=h[m++];S===_&&T===b&&O===M&&C===A?t.lineTo(M,A):t.bezierCurveTo(_,b,O,C,M,A),S=M,T=A}}}})}function yA(t,e,n){if(!t||!e)return e;var i=n.done,r=n.during;function o(){gA(e,"buildPath"),gA(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape()}return vA(t,e),e.__morphT=0,e.animateTo({__morphT:1},Object(c["j"])({during:function(t){e.dirtyShape(),r&&r(t)},done:function(){o(),i&&i()}},n)),e}function _A(t,e,n,i,r,o){var a=16;t=r===n?0:Math.round(32767*(t-n)/(r-n)),e=o===i?0:Math.round(32767*(e-i)/(o-i));for(var s,l=0,c=(1<<a)/2;c>0;c/=2){var u=0,h=0;(t&c)>0&&(u=1),(e&c)>0&&(h=1),l+=c*c*(3*u^h),0===h&&(1===u&&(t=c-1-t,e=c-1-e),s=t,t=e,e=s)}return l}function bA(t){var e=1/0,n=1/0,i=-1/0,r=-1/0,o=Object(c["H"])(t,(function(t){var o=t.getBoundingRect(),a=t.getComputedTransform(),s=o.x+o.width/2+(a?a[4]:0),l=o.y+o.height/2+(a?a[5]:0);return e=Math.min(s,e),n=Math.min(l,n),i=Math.max(s,i),r=Math.max(l,r),[s,l]})),a=Object(c["H"])(o,(function(o,a){return{cp:o,z:_A(o[0],o[1],e,n,i,r),path:t[a]}}));return a.sort((function(t,e){return t.z-e.z})).map((function(t){return t.path}))}function xA(t){return rA(t.path,t.count)}function wA(){return{fromIndividuals:[],toIndividuals:[],count:0}}function SA(t,e,n){var i=[];function r(t){for(var e=0;e<t.length;e++){var n=t[e];fA(n)?r(n.childrenRef()):n instanceof u["b"]&&i.push(n)}}r(t);var o=i.length;if(!o)return wA();var a=n.dividePath||xA,s=a({path:e,count:o});if(s.length!==o)return console.error("Invalid morphing: unmatched splitted path"),wA();i=bA(i),s=bA(s);for(var l=n.done,h=n.during,f=n.individualDelay,d=new ma["a"],p=0;p<o;p++){var g=i[p],m=s[p];m.parent=e,m.copyTransform(d),f||vA(g,m)}function v(t){for(var e=0;e<s.length;e++)s[e].addSelfToZr(t)}function y(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,gA(e,"addSelfToZr"),gA(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return s},pA(e,"addSelfToZr",{after:function(t){v(t)}}),pA(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<s.length;e++)s[e].removeSelfFromZr(t)}});var _=s.length;if(f){var b=_,x=function(){b--,0===b&&(y(),l&&l())};for(p=0;p<_;p++){var w=f?Object(c["j"])({delay:(n.delay||0)+f(p,_,i[p],s[p]),done:x},n):n;yA(i[p],s[p],w)}}else e.__morphT=0,e.animateTo({__morphT:1},Object(c["j"])({during:function(t){for(var n=0;n<_;n++){var i=s[n];i.__morphT=e.__morphT,i.dirtyShape()}h&&h(t)},done:function(){y();for(var e=0;e<t.length;e++)gA(t[e],"updateTransform");l&&l()}},n));return e.__zr&&v(e.__zr),{fromIndividuals:i,toIndividuals:s,count:_}}function TA(t,e,n){var i=e.length,r=[],o=n.dividePath||xA;function a(t){for(var e=0;e<t.length;e++){var n=t[e];fA(n)?a(n.childrenRef()):n instanceof u["b"]&&r.push(n)}}if(fA(t)){a(t.childrenRef());var s=r.length;if(s<i)for(var l=0,h=s;h<i;h++)r.push(Object(FM["a"])(r[l++%s]));r.length=i}else{r=o({path:t,count:i});var f=t.getComputedTransform();for(h=0;h<r.length;h++)r[h].setLocalTransform(f);if(r.length!==i)return console.error("Invalid morphing: unmatched splitted path"),wA()}r=bA(r),e=bA(e);var d=n.individualDelay;for(h=0;h<i;h++){var p=d?Object(c["j"])({delay:(n.delay||0)+d(h,i,r[h],e[h])},n):n;yA(r[h],e[h],p)}return{fromIndividuals:r,toIndividuals:e,count:e.length}}function OA(t){return Object(c["t"])(t[0])}function CA(t,e){for(var n=[],i=t.length,r=0;r<i;r++)n.push({one:t[r],many:[]});for(r=0;r<e.length;r++){var o=e[r].length,a=void 0;for(a=0;a<o;a++)n[a%i].many.push(e[r][a])}var s=0;for(r=i-1;r>=0;r--)if(!n[r].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}o=l.length;var c=Math.ceil(o/2);n[r].many=l.slice(c,o),n[s].many=l.slice(0,c),s++}return n}var MA={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),i=0;i<t.count;i++){var r=Object(FM["a"])(t.path);r.setStyle("opacity",n),e.push(r)}return e},split:null};function AA(t,e,n,i,r,o){if(t.length&&e.length){var a=Object(jt["a"])("update",i,r);if(a&&a.duration>0){var s,l,u=i.getModel("universalTransition").get("delay"),h=Object.assign({setToFinal:!0},a);OA(t)&&(s=t,l=e),OA(e)&&(s=e,l=t);for(var f=s?s===t:t.length>e.length,d=s?CA(l,s):CA(f?e:t,[f?t:e]),p=0,g=0;g<d.length;g++)p+=d[g].many.length;var m=0;for(g=0;g<d.length;g++)v(d[g],f,m,p),m+=d[g].many.length}}function v(t,e,i,r,a){var s=t.many,l=t.one;if(1!==s.length||a)for(var f=Object(c["j"])({dividePath:MA[n],individualDelay:u&&function(t,e,n,o){return u(t+i,r)}},h),d=e?SA(s,l,f):TA(l,s,f),p=d.fromIndividuals,g=d.toIndividuals,m=p.length,y=0;y<m;y++){x=u?Object(c["j"])({delay:u(y,m)},h):h;o(p[y],g[y],e?s[y]:t.one,e?t.one:s[y],x)}else{var _=e?s[0]:l,b=e?l:s[0];if(fA(_))v({many:[_],one:b},!0,i,r,!0);else{var x=u?Object(c["j"])({delay:u(i,r)},h):h;yA(_,b,x),o(_,b,_,b,x)}}}}function DA(t){if(!t)return[];if(Object(c["t"])(t)){for(var e=[],n=0;n<t.length;n++)e.push(DA(t[n]));return e}var i=[];return t.traverse((function(t){t instanceof u["b"]&&!t.disableMorphing&&!t.invisible&&!t.ignore&&i.push(t)})),i}var EA=1e4,IA=Object(se["o"])();function PA(t){for(var e=t.dimensions,n=0;n<e.length;n++){var i=t.getDimensionInfo(e[n]);if(i&&0===i.otherDims.itemGroupId)return e[n]}}function LA(t){var e=[];return Object(c["k"])(t,(function(t){var n=t.data;if(!(n.count()>EA))for(var i=n.getIndices(),r=PA(n),o=0;o<i.length;o++)e.push({data:n,dim:t.dim||r,divide:t.divide,dataIndex:o})})),e}function kA(t,e,n){t.traverse((function(t){t instanceof u["b"]&&Object(jt["c"])(t,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})}))}function jA(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function RA(t){t.stopAnimation(),t.isGroup&&t.traverse((function(t){t.stopAnimation()}))}function NA(t,e,n){var i=Object(jt["a"])("update",n,e);i&&t.traverse((function(t){if(t instanceof Zo["c"]){var e=Object(jt["b"])(t);e&&t.animateFrom({style:e},i)}}))}function BA(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++){var r=t[i],o=e[i];if(r.data.getId(r.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}function FA(t,e,n){var i=LA(t),r=LA(e);function o(t,e,n,i,r){(n||t)&&e.animateFrom({style:(n||t).style},r)}function a(t){for(var e=0;e<t.length;e++)if(t[e].dim)return t[e].dim}var s=a(i),l=a(r),h=!1;function f(t,e){return function(n){var i=n.data,r=n.dataIndex;if(e)return i.getId(r);var o=i.hostModel&&i.hostModel.get("dataGroupId"),a=t?s||l:l||s,c=a&&i.getDimensionInfo(a),u=c&&c.ordinalMeta;if(c){var h=i.get(c.name,r);return u&&u.categories[h]||h+""}var f=i.getRawDataItem(r);return f&&f.groupId?f.groupId+"":o||i.getId(r)}}var d=BA(i,r),p={};if(!d)for(var g=0;g<r.length;g++){var m=r[g],v=m.data.getItemGraphicEl(m.dataIndex);v&&(p[v.id]=!0)}function y(t,e){var n=i[e],a=r[t],s=a.data.hostModel,l=n.data.getItemGraphicEl(n.dataIndex),c=a.data.getItemGraphicEl(a.dataIndex);l!==c?l&&p[l.id]||c&&(RA(c),l?(RA(l),jA(l),h=!0,AA(DA(l),DA(c),a.divide,s,t,o)):kA(c,s,t)):c&&NA(c,a.dataIndex,s)}new Bs["a"](i,r,f(!0,d),f(!1,d),null,"multiple").update(y).updateManyToOne((function(t,e){var n=r[t],a=n.data,s=a.hostModel,l=a.getItemGraphicEl(n.dataIndex),u=Object(c["n"])(Object(c["H"])(e,(function(t){return i[t].data.getItemGraphicEl(i[t].dataIndex)})),(function(t){return t&&t!==l&&!p[t.id]}));l&&(RA(l),u.length?(Object(c["k"])(u,(function(t){RA(t),jA(t)})),h=!0,AA(DA(u),DA(l),n.divide,s,t,o)):kA(l,s,n.dataIndex))})).updateOneToMany((function(t,e){var n=i[e],a=n.data.getItemGraphicEl(n.dataIndex);if(!a||!p[a.id]){var s=Object(c["n"])(Object(c["H"])(t,(function(t){return r[t].data.getItemGraphicEl(r[t].dataIndex)})),(function(t){return t&&t!==a})),l=r[t[0]].data.hostModel;s.length&&(Object(c["k"])(s,(function(t){return RA(t)})),a?(RA(a),jA(a),h=!0,AA(DA(a),DA(s),n.divide,l,t[0],o)):Object(c["k"])(s,(function(e){return kA(e,l,t[0])})))}})).updateManyToMany((function(t,e){new Bs["a"](e,t,(function(t){return i[t].data.getId(i[t].dataIndex)}),(function(t){return r[t].data.getId(r[t].dataIndex)})).update((function(n,i){y(t[n],e[i])})).execute()})).execute(),h&&Object(c["k"])(e,(function(t){var e=t.data,i=e.hostModel,r=i&&n.getViewOfSeriesModel(i),o=Object(jt["a"])("update",i,0);r&&i.isAnimationEnabled()&&o&&o.duration>0&&r.group.traverse((function(t){t instanceof u["b"]&&!t.animators.length&&t.animateFrom({style:{opacity:0}},o)}))}))}function zA(t){var e=t.getModel("universalTransition").get("seriesKey");return e||t.id}function VA(t){return Object(c["t"])(t)?t.sort().join(","):t}function HA(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function GA(t,e){var n=Object(c["g"])(),i=Object(c["g"])(),r=Object(c["g"])();return Object(c["k"])(t.oldSeries,(function(e,n){var o=t.oldData[n],a=zA(e),s=VA(a);i.set(s,o),Object(c["t"])(a)&&Object(c["k"])(a,(function(t){r.set(t,{data:o,key:s})}))})),Object(c["k"])(e.updatedSeries,(function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.getData(),o=zA(t),a=VA(o),s=i.get(a);if(s)n.set(a,{oldSeries:[{divide:HA(s),data:s}],newSeries:[{divide:HA(e),data:e}]});else if(Object(c["t"])(o)){0;var l=[];Object(c["k"])(o,(function(t){var e=i.get(t);e&&l.push({divide:HA(e),data:e})})),l.length&&n.set(a,{oldSeries:l,newSeries:[{data:e,divide:HA(e)}]})}else{var u=r.get(o);if(u){var h=n.get(u.key);h||(h={oldSeries:[{data:u.data,divide:HA(u.data)}],newSeries:[]},n.set(u.key,h)),h.newSeries.push({data:e,divide:HA(e)})}}}})),n}function UA(t,e){for(var n=0;n<t.length;n++){var i=null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id;if(i)return n}}function WA(t,e,n,i){var r=[],o=[];Object(c["k"])(Object(se["r"])(t.from),(function(t){var n=UA(e.oldSeries,t);n>=0&&r.push({data:e.oldData[n],divide:HA(e.oldData[n]),dim:t.dimension})})),Object(c["k"])(Object(se["r"])(t.to),(function(t){var e=UA(n.updatedSeries,t);if(e>=0){var i=n.updatedSeries[e].getData();o.push({data:i,divide:HA(i),dim:t.dimension})}})),r.length>0&&o.length>0&&FA(r,o,i)}function XA(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){Object(c["k"])(Object(se["r"])(n.seriesTransition),(function(t){Object(c["k"])(Object(se["r"])(t.to),(function(t){for(var e=n.updatedSeries,i=0;i<e.length;i++)(null!=t.seriesIndex&&t.seriesIndex===e[i].seriesIndex||null!=t.seriesId&&t.seriesId===e[i].id)&&(e[i][Et["a"]]=!0)}))}))})),t.registerUpdateLifecycle("series:transition",(function(t,e,n){var i=IA(e);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var r=n.seriesTransition;if(r)Object(c["k"])(Object(se["r"])(r),(function(t){WA(t,i,n,e)}));else{var o=GA(i,n);Object(c["k"])(o.keys(),(function(t){var n=o.get(t);FA(n.oldSeries,n.newSeries,e)}))}Object(c["k"])(n.updatedSeries,(function(t){t[Et["a"]]&&(t[Et["a"]]=!1)}))}for(var a=t.getSeries(),s=i.oldSeries=[],l=i.oldData=[],u=0;u<a.length;u++){var h=a[u].getData();h.count()<EA&&(s.push(a[u]),l.push(h))}}))}var YA=n("ee29");Object(i["a"])([o["a"]]),Object(i["a"])([Mt]),Object(i["a"])([$e,Vn,yi,to,Ao,Ba,As,ac,bu,Iu,Hu,qf,Cd,qd,wp,Ep,eg,fg,Hg,Jg,vm,zv]),Object(i["a"])(Fy),Object(i["a"])(I_),Object(i["a"])(Na),Object(i["a"])(ib),Object(i["a"])(Yf),Object(i["a"])(pb),Object(i["a"])(Ab),Object(i["a"])(dw),Object(i["a"])(eS),Object(i["a"])(By),Object(i["a"])(NS),Object(i["a"])(zS),Object(i["a"])(hT),Object(i["a"])(NT),Object(i["a"])(ZT),Object(i["a"])(lO),Object(i["a"])(NO),Object(i["a"])(yC),Object(i["a"])(tC),Object(i["a"])(vC),Object(i["a"])(pM),Object(i["a"])(aM),Object(i["a"])(dM),Object(i["a"])(bM),Object(i["a"])(NM),Object(i["a"])(BM["a"]),Object(i["a"])(XA),Object(i["a"])(YA["a"])},"322a":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcCircle=e.util.createClass(e.Circle,{type:"ecCircle",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcCircle.fromObject=function(t,n){n&&n(new e.EcCircle(t))},e.EcCircle.async=!0}).call(this,n("c8ba"))},"32f4":function(t,e,n){var i=n("2d7c"),r=n("d327"),o=Object.prototype,a=o.propertyIsEnumerable,s=Object.getOwnPropertySymbols,l=s?function(t){return null==t?[]:(t=Object(t),i(s(t),(function(e){return a.call(t,e)})))}:r;t.exports=l},"342d":function(t,e,n){"use strict";n.d(e,"b",(function(){return M})),n.d(e,"c",(function(){return A})),n.d(e,"d",(function(){return D})),n.d(e,"a",(function(){return E}));var i=n("21a1"),r=n("cbe5"),o=n("20c8"),a=n("401b"),s=o["a"].CMD,l=[[],[],[]],c=Math.sqrt,u=Math.atan2;function h(t,e){if(e){var n,i,r,o,h,f,d=t.data,p=t.len(),g=s.M,m=s.C,v=s.L,y=s.R,_=s.A,b=s.Q;for(r=0,o=0;r<p;){switch(n=d[r++],o=r,i=0,n){case g:i=1;break;case v:i=1;break;case m:i=3;break;case b:i=2;break;case _:var x=e[4],w=e[5],S=c(e[0]*e[0]+e[1]*e[1]),T=c(e[2]*e[2]+e[3]*e[3]),O=u(-e[1]/T,e[0]/S);d[r]*=S,d[r++]+=x,d[r]*=T,d[r++]+=w,d[r++]*=S,d[r++]*=T,d[r++]+=O,d[r++]+=O,r+=2,o=r;break;case y:f[0]=d[r++],f[1]=d[r++],Object(a["b"])(f,f,e),d[o++]=f[0],d[o++]=f[1],f[0]+=d[r++],f[1]+=d[r++],Object(a["b"])(f,f,e),d[o++]=f[0],d[o++]=f[1]}for(h=0;h<i;h++){var C=l[h];C[0]=d[r++],C[1]=d[r++],Object(a["b"])(C,C,e),d[o++]=C[0],d[o++]=C[1]}}t.increaseVersion()}}var f=n("6d8b"),d=Math.sqrt,p=Math.sin,g=Math.cos,m=Math.PI;function v(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function y(t,e){return(t[0]*e[0]+t[1]*e[1])/(v(t)*v(e))}function _(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(y(t,e))}function b(t,e,n,i,r,o,a,s,l,c,u){var h=l*(m/180),f=g(h)*(t-n)/2+p(h)*(e-i)/2,v=-1*p(h)*(t-n)/2+g(h)*(e-i)/2,b=f*f/(a*a)+v*v/(s*s);b>1&&(a*=d(b),s*=d(b));var x=(r===o?-1:1)*d((a*a*(s*s)-a*a*(v*v)-s*s*(f*f))/(a*a*(v*v)+s*s*(f*f)))||0,w=x*a*v/s,S=x*-s*f/a,T=(t+n)/2+g(h)*w-p(h)*S,O=(e+i)/2+p(h)*w+g(h)*S,C=_([1,0],[(f-w)/a,(v-S)/s]),M=[(f-w)/a,(v-S)/s],A=[(-1*f-w)/a,(-1*v-S)/s],D=_(M,A);if(y(M,A)<=-1&&(D=m),y(M,A)>=1&&(D=0),D<0){var E=Math.round(D/m*1e6)/1e6;D=2*m+E%2*m}u.addData(c,T,O,a,s,C,D,h,o)}var x=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,w=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function S(t){var e=new o["a"];if(!t)return e;var n,i=0,r=0,a=i,s=r,l=o["a"].CMD,c=t.match(x);if(!c)return e;for(var u=0;u<c.length;u++){for(var h=c[u],f=h.charAt(0),d=void 0,p=h.match(w)||[],g=p.length,m=0;m<g;m++)p[m]=parseFloat(p[m]);var v=0;while(v<g){var y=void 0,_=void 0,S=void 0,T=void 0,O=void 0,C=void 0,M=void 0,A=i,D=r,E=void 0,I=void 0;switch(f){case"l":i+=p[v++],r+=p[v++],d=l.L,e.addData(d,i,r);break;case"L":i=p[v++],r=p[v++],d=l.L,e.addData(d,i,r);break;case"m":i+=p[v++],r+=p[v++],d=l.M,e.addData(d,i,r),a=i,s=r,f="l";break;case"M":i=p[v++],r=p[v++],d=l.M,e.addData(d,i,r),a=i,s=r,f="L";break;case"h":i+=p[v++],d=l.L,e.addData(d,i,r);break;case"H":i=p[v++],d=l.L,e.addData(d,i,r);break;case"v":r+=p[v++],d=l.L,e.addData(d,i,r);break;case"V":r=p[v++],d=l.L,e.addData(d,i,r);break;case"C":d=l.C,e.addData(d,p[v++],p[v++],p[v++],p[v++],p[v++],p[v++]),i=p[v-2],r=p[v-1];break;case"c":d=l.C,e.addData(d,p[v++]+i,p[v++]+r,p[v++]+i,p[v++]+r,p[v++]+i,p[v++]+r),i+=p[v-2],r+=p[v-1];break;case"S":y=i,_=r,E=e.len(),I=e.data,n===l.C&&(y+=i-I[E-4],_+=r-I[E-3]),d=l.C,A=p[v++],D=p[v++],i=p[v++],r=p[v++],e.addData(d,y,_,A,D,i,r);break;case"s":y=i,_=r,E=e.len(),I=e.data,n===l.C&&(y+=i-I[E-4],_+=r-I[E-3]),d=l.C,A=i+p[v++],D=r+p[v++],i+=p[v++],r+=p[v++],e.addData(d,y,_,A,D,i,r);break;case"Q":A=p[v++],D=p[v++],i=p[v++],r=p[v++],d=l.Q,e.addData(d,A,D,i,r);break;case"q":A=p[v++]+i,D=p[v++]+r,i+=p[v++],r+=p[v++],d=l.Q,e.addData(d,A,D,i,r);break;case"T":y=i,_=r,E=e.len(),I=e.data,n===l.Q&&(y+=i-I[E-4],_+=r-I[E-3]),i=p[v++],r=p[v++],d=l.Q,e.addData(d,y,_,i,r);break;case"t":y=i,_=r,E=e.len(),I=e.data,n===l.Q&&(y+=i-I[E-4],_+=r-I[E-3]),i+=p[v++],r+=p[v++],d=l.Q,e.addData(d,y,_,i,r);break;case"A":S=p[v++],T=p[v++],O=p[v++],C=p[v++],M=p[v++],A=i,D=r,i=p[v++],r=p[v++],d=l.A,b(A,D,i,r,C,M,S,T,O,d,e);break;case"a":S=p[v++],T=p[v++],O=p[v++],C=p[v++],M=p[v++],A=i,D=r,i+=p[v++],r+=p[v++],d=l.A,b(A,D,i,r,C,M,S,T,O,d,e);break}}"z"!==f&&"Z"!==f||(d=l.Z,e.addData(d),i=a,r=s),n=d}return e.toStatic(),e}var T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["a"])(e,t),e.prototype.applyTransform=function(t){},e}(r["b"]);function O(t){return null!=t.setData}function C(t,e){var n=S(t),i=Object(f["m"])({},e);return i.buildPath=function(t){if(O(t)){t.setData(n.data);var e=t.getContext();e&&t.rebuildPath(e,1)}else{e=t;n.rebuildPath(e,1)}},i.applyTransform=function(t){h(n,t),this.dirtyShape()},i}function M(t,e){return new T(C(t,e))}function A(t,e){var n=C(t,e),r=function(t){function e(e){var i=t.call(this,e)||this;return i.applyTransform=n.applyTransform,i.buildPath=n.buildPath,i}return Object(i["a"])(e,t),e}(T);return r}function D(t,e){for(var n=[],i=t.length,o=0;o<i;o++){var a=t[o];n.push(a.getUpdatedPathProxy(!0))}var s=new r["b"](e);return s.createPathProxy(),s.buildPath=function(t){if(O(t)){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e,1)}},s}function E(t,e){e=e||{};var n=new r["b"];return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?h(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}},"342f":function(t,e,n){var i=n("d066");t.exports=i("navigator","userAgent")||""},3437:function(t,e,n){"use strict";function i(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;e.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),i=isNaN(i)?0:i,r=isNaN(r)?1:r,o=isNaN(o)?0:o,a=isNaN(a)?0:a;var s=t.createLinearGradient(i,o,r,a);return s}function r(t,e,n){var i=n.width,r=n.height,o=Math.min(i,r),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;e.global||(a=a*i+n.x,s=s*r+n.y,l*=o);var c=t.createRadialGradient(a,s,0,a,s,l);return c}function o(t,e,n){for(var o="radial"===e.type?r(t,e,n):i(t,e,n),a=e.colorStops,s=0;s<a.length;s++)o.addColorStop(a[s].offset,a[s].color);return o}function a(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return a}))},3461:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcNumber=e.util.createClass(e.Text,{type:"ecNumber",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t)}}),e.EcNumber.fromObject=function(t,n){n&&n(new e.EcNumber(t.text,t))},e.EcNumber.async=!0}).call(this,n("c8ba"))},"34ac":function(t,e,n){var i=n("9520"),r=n("1368"),o=n("1a8c"),a=n("dc57"),s=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,f=u.hasOwnProperty,d=RegExp("^"+h.call(f).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(t){if(!o(t)||r(t))return!1;var e=i(t)?d:l;return e.test(a(t))}t.exports=p},"35a1":function(t,e,n){var i=n("f5df"),r=n("3f8c"),o=n("b622"),a=o("iterator");t.exports=function(t){if(void 0!=t)return t[a]||t["@@iterator"]||r[i(t)]}},3698:function(t,e){function n(t,e){return null==t?void 0:t[e]}t.exports=n},3711:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcLine=e.util.createClass(e.Line,{type:"ecLine",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcLine.fromObject=function(t,n){n&&n(new e.EcLine([t.x1,t.y1,t.x2,t.y2],t))},e.EcLine.async=!0}).call(this,n("c8ba"))},3729:function(t,e,n){var i=n("9e69"),r=n("00fd"),o=n("29f3"),a="[object Null]",s="[object Undefined]",l=i?i.toStringTag:void 0;function c(t){return null==t?void 0===t?s:a:l&&l in Object(t)?r(t):o(t)}t.exports=c},"37e8":function(t,e,n){var i=n("83ab"),r=n("9bf2"),o=n("825a"),a=n("df75");t.exports=i?Object.defineProperties:function(t,e){o(t);var n,i=a(e),s=i.length,l=0;while(s>l)r.f(t,n=i[l++],e[n]);return t}},3842:function(t,e,n){"use strict";n.d(e,"l",(function(){return s})),n.d(e,"p",(function(){return l})),n.d(e,"v",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"g",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"f",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return m})),n.d(e,"u",(function(){return v})),n.d(e,"k",(function(){return y})),n.d(e,"o",(function(){return b})),n.d(e,"r",(function(){return x})),n.d(e,"s",(function(){return w})),n.d(e,"m",(function(){return S})),n.d(e,"q",(function(){return T})),n.d(e,"t",(function(){return O})),n.d(e,"n",(function(){return C})),n.d(e,"j",(function(){return M})),n.d(e,"i",(function(){return A})),n.d(e,"d",(function(){return E}));var i=n("6d8b"),r=1e-4,o=20;function a(t){return t.replace(/^\s+|\s+$/g,"")}function s(t,e,n,i){var r=e[0],o=e[1],a=n[0],s=n[1],l=o-r,c=s-a;if(0===l)return 0===c?a:(a+s)/2;if(i)if(l>0){if(t<=r)return a;if(t>=o)return s}else{if(t>=r)return a;if(t<=o)return s}else{if(t===r)return a;if(t===o)return s}return(t-r)/l*c+a}function l(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%";break}return"string"===typeof t?a(t).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t}function c(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),o),t=(+t).toFixed(e),n?t:+t}function u(t){return t.sort((function(t,e){return t-e})),t}function h(t){if(t=+t,isNaN(t))return 0;if(t>1e-14)for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n;return f(t)}function f(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),i=n>0?+e.slice(n+1):0,r=n>0?n:e.length,o=e.indexOf("."),a=o<0?0:r-1-o;return Math.max(0,a-i)}function d(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),o=Math.round(n(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20}function p(t,e,n){if(!t[e])return 0;var r=i["N"](t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===r)return 0;var o=Math.pow(10,n),a=i["H"](t,(function(t){return(isNaN(t)?0:t)/r*o*100})),s=100*o,l=i["H"](a,(function(t){return Math.floor(t)})),c=i["N"](l,(function(t,e){return t+e}),0),u=i["H"](a,(function(t,e){return t-l[e]}));while(c<s){for(var h=Number.NEGATIVE_INFINITY,f=null,d=0,p=u.length;d<p;++d)u[d]>h&&(h=u[d],f=d);++l[f],u[f]=0,++c}return l[e]/o}function g(t,e){var n=Math.max(h(t),h(e)),i=t+e;return n>o?i:c(i,n)}var m=9007199254740991;function v(t){var e=2*Math.PI;return(t%e+e)%e}function y(t){return t>-r&&t<r}var _=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function b(t){if(t instanceof Date)return t;if("string"===typeof t){var e=_.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}return null==t?new Date(NaN):new Date(Math.round(t))}function x(t){return Math.pow(10,w(t))}function w(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function S(t,e){var n,i=w(t),r=Math.pow(10,i),o=t/r;return n=e?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10,t=n*r,i>=-20?+t.toFixed(i<0?-i:0):t}function T(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r}function O(t){t.sort((function(t,e){return s(t,e,0)?-1:1}));for(var e=-1/0,n=1,i=0;i<t.length;){for(var r=t[i].interval,o=t[i].close,a=0;a<2;a++)r[a]<=e&&(r[a]=e,o[a]=a?1:1-n),e=r[a],n=o[a];r[0]===r[1]&&o[0]*o[1]!==1?t.splice(i,1):i++}return t;function s(t,e,n){return t.interval[n]<e.interval[n]||t.interval[n]===e.interval[n]&&(t.close[n]-e.close[n]===(n?-1:1)||!n&&s(t,e,1))}}function C(t){var e=parseFloat(t);return e==t&&(0!==e||"string"!==typeof t||t.indexOf("x")<=0)?e:NaN}function M(t){return!isNaN(C(t))}function A(){return Math.round(9*Math.random())}function D(t,e){return 0===e?t:D(e,t%e)}function E(t,e){return null==t?e:null==e?t:t*e/D(t,e)}},"387f":function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},"38a2":function(t,e,n){"use strict";n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l}));var i=n("6d8b"),r=n("2b17"),o=n("eda2"),a=/\{@(.+?)\}/g,s=function(){function t(){}return t.prototype.getDataParams=function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),o=n.getName(t),a=n.getRawDataItem(t),s=n.getItemVisual(t,"style"),l=s&&s[n.getItemVisual(t,"drawType")||"fill"],c=s&&s.stroke,u=this.mainType,h="series"===u,f=n.userOutput&&n.userOutput.get();return{componentType:u,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:r,data:a,dataType:e,value:i,color:l,borderColor:c,dimensionNames:f?f.fullDimensions:null,encode:f?f.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,e,n,s,l,c){e=e||"normal";var u=this.getData(n),h=this.getDataParams(t,n);if(c&&(h.value=c.interpolatedValue),null!=s&&i["t"](h.value)&&(h.value=h.value[s]),!l){var f=u.getItemModel(t);l=f.get("normal"===e?["label","formatter"]:[e,"label","formatter"])}if("function"===typeof l)return h.status=e,h.dimensionIndex=s,l(h);if("string"===typeof l){var d=Object(o["f"])(l,h);return d.replace(a,(function(e,n){var o=n.length,a=n;"["===a.charAt(0)&&"]"===a.charAt(o-1)&&(a=+a.slice(1,o-1));var s=Object(r["e"])(u,t,a);if(c&&i["t"](c.interpolatedValue)){var l=u.getDimensionIndex(a);l>=0&&(s=c.interpolatedValue[l])}return null!=s?s+"":""}))}},t.prototype.getRawValue=function(t,e){return Object(r["e"])(this.getData(e),t)},t.prototype.formatTooltip=function(t,e,n){},t}();function l(t){var e,n;return i["A"](t)?t.type&&(n=t):e=t,{markupText:e,markupFragment:n}}},"38d6":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcPolygon=e.util.createClass(e.Polygon,{type:"ecPolygon",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcPolygon.fromObject=function(t,n){n&&n(new e.EcPolygon(t.points,t))},e.EcPolygon.async=!0}).call(this,n("c8ba"))},3901:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var i=n("282b"),r=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],o=Object(i["a"])(r),a=function(){function t(){}return t.prototype.getLineStyle=function(t){return o(this,t)},t}()},"392f":function(t,e,n){"use strict";var i=n("21a1"),r=n("19eb"),o=n("9850"),a=[],s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return Object(i["a"])(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++){var e=this._displayables[t];e.parent=this,e.update(),e.parent=null}for(t=0;t<this._temporaryDisplayables.length;t++){e=this._temporaryDisplayables[t];e.parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new o["a"](1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(a)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();if(i.contain(n[0],n[1]))for(var r=0;r<this._displayables.length;r++){var o=this._displayables[r];if(o.contain(t,e))return!0}return!1},e}(r["c"]);e["a"]=s},3934:function(t,e,n){"use strict";var i=n("c532");t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},"39ff":function(t,e,n){var i=n("0b07"),r=n("2b3e"),o=i(r,"WeakMap");t.exports=o},"3bb4":function(t,e,n){var i=n("08cc"),r=n("ec69");function o(t){var e=r(t),n=e.length;while(n--){var o=e[n],a=t[o];e[n]=[o,a,i(a)]}return e}t.exports=o},"3bbe":function(t,e,n){var i=n("861d");t.exports=function(t){if(!i(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype");return t}},"3bc6":function(t,e,n){"use strict";(function(t){n("99af");var e=n("313e"),i=(n("e39c"),t.fabric||(t.fabric={}));i.EcEcharts=i.util.createClass(i.Rect,{type:"ecEcharts",superType:"element",stateProperties:i.Object.prototype.stateProperties.concat(["chartOption"]),cacheProperties:i.Object.prototype.stateProperties.concat(["chartOption"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e,{notMerge:!0})},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({xAxis:{},yAxis:{},series:[{type:"bar",data:[[0,1],[1,2],[2,3],[3,4]]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return i.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var r=this.id,o=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=this.canvas.getZoom(),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*o*f-s)/2,m=(l*a*f-l)/2,v=i.util.makeElement("div",{id:"".concat(r,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(o*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=i.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element)}}}),i.EcEcharts.fromObject=function(t,e){return e(new i.EcEcharts(t.chartOption,t))},i.EcEcharts.async=!0}).call(this,n("c8ba"))},"3ca3":function(t,e,n){"use strict";var i=n("6547").charAt,r=n("69f3"),o=n("7dd0"),a="String Iterator",s=r.set,l=r.getterFor(a);o(String,"String",(function(t){s(this,{type:a,string:String(t),index:0})}),(function(){var t,e=l(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=i(n,r),e.index+=t.length,{value:t,done:!1})}))},"3cca":function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcBubbleRound=e.util.createClass(e.Path,{type:"ecBubbleRound",stateProperties:e.Object.prototype.stateProperties.concat(["pipe"]),cacheProperties:e.Object.prototype.stateProperties.concat(["pipe"]),fill:"transparent",stroke:"rgba(250, 213, 10, 1)",strokeWidth:2,path:"M 0 30 A 30 30 0 0 1 30 0 L 270 0 A 30 30 0 0 1 300 30 L 300 170 A 30 30 0 0 1 270 200 L 140 200 L 110 250 L 70 200 L 30 200 A 30 30 0 0 1 0 170 Z",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.ctx=t,this.callSuper("_render",t)}}),e.EcBubbleRound.fromObject=function(t,n){n&&n(new e.EcBubbleRound(t.path,t))},e.EcBubbleRound.async=!0}).call(this,n("c8ba"))},"3db9":function(t,e,n){"use strict";function i(t){var e=new XMLHttpRequest;e.open("get",t.url),e.responseType=t.responseType||"text",t.onprogress&&(e.onprogress=function(e){if(e.lengthComputable){var n=e.loaded/e.total;t.onprogress(n,e.loaded,e.total)}else t.onprogress(null)}),e.onload=function(n){e.status>=400?t.onerror&&t.onerror():t.onload&&t.onload(e.response)},t.onerror&&(e.onerror=t.onerror),e.send(null)}e["a"]={get:i}},"3eba":function(t,e,n){"use strict";var i=n("aa74");n.d(e,"a",(function(){return i["a"]})),n.d(e,"b",(function(){return i["b"]})),n.d(e,"c",(function(){return i["c"]})),n.d(e,"d",(function(){return i["d"]})),n.d(e,"e",(function(){return i["e"]})),n.d(e,"f",(function(){return i["f"]})),n.d(e,"g",(function(){return i["g"]})),n.d(e,"h",(function(){return i["h"]})),n.d(e,"i",(function(){return i["i"]})),n.d(e,"j",(function(){return i["j"]})),n.d(e,"k",(function(){return i["k"]})),n.d(e,"l",(function(){return i["l"]})),n.d(e,"m",(function(){return i["m"]})),n.d(e,"n",(function(){return i["n"]})),n.d(e,"o",(function(){return i["o"]})),n.d(e,"p",(function(){return i["q"]})),n.d(e,"q",(function(){return i["r"]})),n.d(e,"r",(function(){return i["s"]})),n.d(e,"s",(function(){return i["t"]})),n.d(e,"t",(function(){return i["u"]})),n.d(e,"u",(function(){return i["v"]})),n.d(e,"v",(function(){return i["w"]})),n.d(e,"w",(function(){return i["x"]})),n.d(e,"x",(function(){return i["y"]})),n.d(e,"y",(function(){return i["z"]}));var r=n("22b4"),o=(n("1be7"),n("f95e")),a=n("5e81"),s=n("ee29");Object(r["a"])([o["a"],a["a"]]);Object(r["a"])(s["a"])},"3f8c":function(t,e){t.exports={}},"401b":function(t,e,n){"use strict";function i(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function r(t,e){return t[0]=e[0],t[1]=e[1],t}function o(t){return[t[0],t[1]]}function a(t,e,n){return t[0]=e,t[1]=n,t}function s(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function l(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function c(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function u(t){return Math.sqrt(h(t))}n.d(e,"e",(function(){return i})),n.d(e,"d",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"p",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"o",(function(){return l})),n.d(e,"q",(function(){return c})),n.d(e,"i",(function(){return u})),n.d(e,"n",(function(){return f})),n.d(e,"m",(function(){return d})),n.d(e,"h",(function(){return p})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return v})),n.d(e,"j",(function(){return y})),n.d(e,"b",(function(){return _})),n.d(e,"l",(function(){return b})),n.d(e,"k",(function(){return x}));function h(t){return t[0]*t[0]+t[1]*t[1]}function f(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function d(t,e){var n=u(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function p(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var g=p;function m(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var v=m;function y(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function _(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function b(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function x(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}},4041:function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var i=n("e0d3"),r=Object(i["o"])(),o=Object(i["o"])(),a=function(){function t(){}return t.prototype.getColorFromPalette=function(t,e,n){var o=Object(i["r"])(this.get("color",!0)),a=this.get("colorLayer",!0);return c(this,r,o,a,t,e,n)},t.prototype.clearColorPalette=function(){u(this,r)},t}();function s(t,e,n,r){var a=Object(i["r"])(t.get(["aria","decal","decals"]));return c(t,o,a,null,e,n,r)}function l(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}function c(t,e,n,i,r,o,a){o=o||t;var s=e(o),c=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(r))return u[r];var h=null!=a&&i?l(i,a):n;if(h=h||n,h&&h.length){var f=h[c];return r&&(u[r]=f),s.paletteIdx=(c+1)%h.length,f}}function u(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}},"408a":function(t,e,n){var i=n("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=i(t))throw TypeError("Incorrect invocation");return+t}},"41ef":function(t,e,n){"use strict";n.r(e),n.d(e,"parse",(function(){return v})),n.d(e,"lift",(function(){return b})),n.d(e,"toHex",(function(){return x})),n.d(e,"fastLerp",(function(){return w})),n.d(e,"fastMapToColor",(function(){return S})),n.d(e,"lerp",(function(){return T})),n.d(e,"mapToColor",(function(){return O})),n.d(e,"modifyHSL",(function(){return C})),n.d(e,"modifyAlpha",(function(){return M})),n.d(e,"stringify",(function(){return A})),n.d(e,"lum",(function(){return D})),n.d(e,"random",(function(){return E}));var i=n("d51b"),r={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(t){return t=Math.round(t),t<0?0:t>255?255:t}function a(t){return t=Math.round(t),t<0?0:t>360?360:t}function s(t){return t<0?0:t>1?1:t}function l(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?o(parseFloat(e)/100*255):o(parseInt(e,10))}function c(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?s(parseFloat(e)/100):s(parseFloat(e))}function u(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function h(t,e,n){return t+(e-t)*n}function f(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var p=new i["a"](20),g=null;function m(t,e){g&&d(g,e),g=p.put(t,g||e.slice())}function v(t,e){if(t){e=e||[];var n=p.get(t);if(n)return d(e,n);t+="";var i=t.replace(/ /g,"").toLowerCase();if(i in r)return d(e,r[i]),m(t,e),e;var o=i.length;if("#"!==i.charAt(0)){var a=i.indexOf("("),s=i.indexOf(")");if(-1!==a&&s+1===o){var u=i.substr(0,a),h=i.substr(a+1,s-(a+1)).split(","),g=1;switch(u){case"rgba":if(4!==h.length)return 3===h.length?f(e,+h[0],+h[1],+h[2],1):f(e,0,0,0,1);g=c(h.pop());case"rgb":return 3!==h.length?void f(e,0,0,0,1):(f(e,l(h[0]),l(h[1]),l(h[2]),g),m(t,e),e);case"hsla":return 4!==h.length?void f(e,0,0,0,1):(h[3]=c(h[3]),y(h,e),m(t,e),e);case"hsl":return 3!==h.length?void f(e,0,0,0,1):(y(h,e),m(t,e),e);default:return}}f(e,0,0,0,1)}else{if(4===o||5===o){var v=parseInt(i.slice(1,4),16);return v>=0&&v<=4095?(f(e,(3840&v)>>4|(3840&v)>>8,240&v|(240&v)>>4,15&v|(15&v)<<4,5===o?parseInt(i.slice(4),16)/15:1),m(t,e),e):void f(e,0,0,0,1)}if(7===o||9===o){v=parseInt(i.slice(1,7),16);return v>=0&&v<=16777215?(f(e,(16711680&v)>>16,(65280&v)>>8,255&v,9===o?parseInt(i.slice(7),16)/255:1),m(t,e),e):void f(e,0,0,0,1)}}}}function y(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=c(t[1]),r=c(t[2]),a=r<=.5?r*(i+1):r+i-r*i,s=2*r-a;return e=e||[],f(e,o(255*u(s,a,n+1/3)),o(255*u(s,a,n)),o(255*u(s,a,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function _(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a,c=(s+a)/2;if(0===l)e=0,n=0;else{n=c<.5?l/(s+a):l/(2-s-a);var u=((s-i)/6+l/2)/l,h=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l;i===s?e=f-h:r===s?e=1/3+u-f:o===s&&(e=2/3+h-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,c];return null!=t[3]&&d.push(t[3]),d}}function b(t,e){var n=v(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,n[i]>255?n[i]=255:n[i]<0&&(n[i]=0);return A(n,4===n.length?"rgba":"rgb")}}function x(t){var e=v(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)}function w(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),l=e[r],c=e[a],u=i-r;return n[0]=o(h(l[0],c[0],u)),n[1]=o(h(l[1],c[1],u)),n[2]=o(h(l[2],c[2],u)),n[3]=s(h(l[3],c[3],u)),n}}var S=w;function T(t,e,n){if(e&&e.length&&t>=0&&t<=1){var i=t*(e.length-1),r=Math.floor(i),a=Math.ceil(i),l=v(e[r]),c=v(e[a]),u=i-r,f=A([o(h(l[0],c[0],u)),o(h(l[1],c[1],u)),o(h(l[2],c[2],u)),s(h(l[3],c[3],u))],"rgba");return n?{color:f,leftIndex:r,rightIndex:a,value:i}:f}}var O=T;function C(t,e,n,i){var r=v(t);if(t)return r=_(r),null!=e&&(r[0]=a(e)),null!=n&&(r[1]=c(n)),null!=i&&(r[2]=c(i)),A(y(r),"rgba")}function M(t,e){var n=v(t);if(n&&null!=e)return n[3]=s(e),A(n,"rgba")}function A(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function D(t,e){var n=v(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}function E(){var t=Math.round(255*Math.random()),e=Math.round(255*Math.random()),n=Math.round(255*Math.random());return"rgb("+t+","+e+","+n+")"}},4245:function(t,e,n){var i=n("1290");function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}t.exports=r},4284:function(t,e){function n(t,e){var n=-1,i=null==t?0:t.length;while(++n<i)if(e(t[n],n,t))return!0;return!1}t.exports=n},"428f":function(t,e,n){var i=n("da84");t.exports=i},"42a2":function(t,e,n){var i=n("b5a7"),r=n("79bc"),o=n("1cec"),a=n("c869"),s=n("39ff"),l=n("3729"),c=n("dc57"),u="[object Map]",h="[object Object]",f="[object Promise]",d="[object Set]",p="[object WeakMap]",g="[object DataView]",m=c(i),v=c(r),y=c(o),_=c(a),b=c(s),x=l;(i&&x(new i(new ArrayBuffer(1)))!=g||r&&x(new r)!=u||o&&x(o.resolve())!=f||a&&x(new a)!=d||s&&x(new s)!=p)&&(x=function(t){var e=l(t),n=e==h?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case m:return g;case v:return u;case y:return f;case _:return d;case b:return p}return e}),t.exports=x},"42e5":function(t,e,n){"use strict";var i=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}();e["a"]=i},4319:function(t,e,n){"use strict";var i=n("22d1"),r=n("625e"),o=n("282b"),a=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],s=Object(o["a"])(a),l=function(){function t(){}return t.prototype.getAreaStyle=function(t,e){return s(this,t,e)},t}(),c=n("7837"),u=n("76a5"),h=["textStyle","color"],f=new u["a"],d=function(){function t(){}return t.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(h):null)},t.prototype.getFont=function(){return Object(c["d"])({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(t){return f.useStyle({text:t,fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily"),verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline"),padding:this.getShallow("padding"),lineHeight:this.getShallow("lineHeight"),rich:this.getShallow("rich")}),f.update(),f.getBoundingRect()},t}(),p=d,g=n("3901"),m=n("551f"),v=n("6d8b"),y=function(){function t(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return t.prototype.init=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r]},t.prototype.mergeOption=function(t,e){Object(v["I"])(this.option,t,!0)},t.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},t.prototype.getShallow=function(t,e){var n=this.option,i=null==n?n:n[t];if(null==i&&!e){var r=this.parentModel;r&&(i=r.getShallow(t))}return i},t.prototype.getModel=function(e,n){var i=null!=e,r=i?this.parsePath(e):null,o=i?this._doGet(r):this.option;return n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),new t(o,n,this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){var t=this.constructor;return new t(Object(v["d"])(this.option))},t.prototype.parsePath=function(t){return"string"===typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!i["a"].node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var i=0;i<t.length;i++)if(t[i]&&(n=n&&"object"===typeof n?n[t[i]]:null,null==n))break;return null==n&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},t}();Object(r["b"])(y),Object(r["a"])(y),Object(v["K"])(y,g["b"]),Object(v["K"])(y,m["b"]),Object(v["K"])(y,l),Object(v["K"])(y,p);e["a"]=y},4362:function(t,e,n){e.nextTick=function(t){var e=Array.prototype.slice.call(arguments);e.shift(),setTimeout((function(){t.apply(null,e)}),0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,i="/";e.cwd=function(){return i},e.chdir=function(e){t||(t=n("df7c")),i=t.resolve(e,i)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"44ad":function(t,e,n){var i=n("d039"),r=n("c6b6"),o="".split;t.exports=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==r(t)?o.call(t,""):Object(t)}:Object},"44d2":function(t,e,n){var i=n("b622"),r=n("7c73"),o=n("9bf2"),a=i("unscopables"),s=Array.prototype;void 0==s[a]&&o.f(s,a,{configurable:!0,value:r(null)}),t.exports=function(t){s[a][t]=!0}},"44de":function(t,e,n){var i=n("da84");t.exports=function(t,e){var n=i.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}},"44e7":function(t,e,n){var i=n("861d"),r=n("c6b6"),o=n("b622"),a=o("match");t.exports=function(t){var e;return i(t)&&(void 0!==(e=t[a])?!!e:"RegExp"==r(t))}},4573:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return t}(),a=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)},e}(r["b"]);a.prototype.type="ring",e["a"]=a},"466d":function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),o=n("50c4"),a=n("1d80"),s=n("8aa5"),l=n("14c3");i("match",1,(function(t,e,n){return[function(e){var n=a(this),i=void 0==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var a=r(t),c=String(this);if(!a.global)return l(a,c);var u=a.unicode;a.lastIndex=0;var h,f=[],d=0;while(null!==(h=l(a,c))){var p=String(h[0]);f[d]=p,""===p&&(a.lastIndex=s(c,o(a.lastIndex),u)),d++}return 0===d?null:f}]}))},"467f":function(t,e,n){"use strict";var i=n("2d83");t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},4755:function(t,e,n){"use strict";var i=Math.round(9*Math.random()),r="function"===typeof Object.defineProperty,o=function(){function t(){this._id="__ec_inner_"+i++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var n=this._guard(t);return r?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},t.prototype["delete"]=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}();e["a"]=o},"47f5":function(t,e,n){var i=n("2b03"),r=n("d9a8"),o=n("099a");function a(t,e,n){return e===e?o(t,e,n):i(t,r,n)}t.exports=a},4840:function(t,e,n){var i=n("825a"),r=n("1c0b"),o=n("b622"),a=o("species");t.exports=function(t,e){var n,o=i(t).constructor;return void 0===o||void 0==(n=i(o)[a])?e:r(n)}},"48a9":function(t,e,n){"use strict";var i=n("21a1"),r=n("42e5"),o=function(t){function e(e,n,i,r,o,a){var s=t.call(this,o)||this;return s.x=null==e?0:e,s.y=null==n?0:n,s.x2=null==i?1:i,s.y2=null==r?0:r,s.type="linear",s.global=a||!1,s}return Object(i["a"])(e,t),e}(r["a"]);e["a"]=o},4930:function(t,e,n){var i=n("605d"),r=n("2d00"),o=n("d039");t.exports=!!Object.getOwnPropertySymbols&&!o((function(){return!Symbol.sham&&(i?38===r:r>37&&r<41)}))},"498a":function(t,e,n){"use strict";var i=n("23e7"),r=n("58a8").trim,o=n("c8d2");i({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},"49f4":function(t,e,n){var i=n("6044");function r(){this.__data__=i?i(null):{},this.size=0}t.exports=r},"4a3f":function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"b",(function(){return m})),n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"g",(function(){return _})),n.d(e,"e",(function(){return b})),n.d(e,"d",(function(){return x})),n.d(e,"h",(function(){return w})),n.d(e,"i",(function(){return S})),n.d(e,"m",(function(){return T})),n.d(e,"j",(function(){return O})),n.d(e,"n",(function(){return C})),n.d(e,"l",(function(){return M})),n.d(e,"k",(function(){return A}));var i=n("401b"),r=Math.pow,o=Math.sqrt,a=1e-8,s=1e-4,l=o(3),c=1/3,u=Object(i["e"])(),h=Object(i["e"])(),f=Object(i["e"])();function d(t){return t>-a&&t<a}function p(t){return t>a||t<-a}function g(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function m(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}function v(t,e,n,i,a,s){var u=i+3*(e-n)-t,h=3*(n-2*e+t),f=3*(e-t),p=t-a,g=h*h-3*u*f,m=h*f-9*u*p,v=f*f-3*h*p,y=0;if(d(g)&&d(m))if(d(h))s[0]=0;else{var _=-f/h;_>=0&&_<=1&&(s[y++]=_)}else{var b=m*m-4*g*v;if(d(b)){var x=m/g,w=(_=-h/u+x,-x/2);_>=0&&_<=1&&(s[y++]=_),w>=0&&w<=1&&(s[y++]=w)}else if(b>0){var S=o(b),T=g*h+1.5*u*(-m+S),O=g*h+1.5*u*(-m-S);T=T<0?-r(-T,c):r(T,c),O=O<0?-r(-O,c):r(O,c);_=(-h-(T+O))/(3*u);_>=0&&_<=1&&(s[y++]=_)}else{var C=(2*g*h-3*u*m)/(2*o(g*g*g)),M=Math.acos(C)/3,A=o(g),D=Math.cos(M),E=(_=(-h-2*A*D)/(3*u),w=(-h+A*(D+l*Math.sin(M)))/(3*u),(-h+A*(D-l*Math.sin(M)))/(3*u));_>=0&&_<=1&&(s[y++]=_),w>=0&&w<=1&&(s[y++]=w),E>=0&&E<=1&&(s[y++]=E)}}return y}function y(t,e,n,i,r){var a=6*n-12*e+6*t,s=9*e+3*i-3*t-9*n,l=3*e-3*t,c=0;if(d(s)){if(p(a)){var u=-l/a;u>=0&&u<=1&&(r[c++]=u)}}else{var h=a*a-4*s*l;if(d(h))r[0]=-a/(2*s);else if(h>0){var f=o(h),g=(u=(-a+f)/(2*s),(-a-f)/(2*s));u>=0&&u<=1&&(r[c++]=u),g>=0&&g<=1&&(r[c++]=g)}}return c}function _(t,e,n,i,r,o){var a=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,c=(s-a)*r+a,u=(l-s)*r+s,h=(u-c)*r+c;o[0]=t,o[1]=a,o[2]=c,o[3]=h,o[4]=h,o[5]=u,o[6]=l,o[7]=i}function b(t,e,n,r,a,l,c,d,p,m,v){var y,_,b,x,w,S=.005,T=1/0;u[0]=p,u[1]=m;for(var O=0;O<1;O+=.05)h[0]=g(t,n,a,c,O),h[1]=g(e,r,l,d,O),x=Object(i["g"])(u,h),x<T&&(y=O,T=x);T=1/0;for(var C=0;C<32;C++){if(S<s)break;_=y-S,b=y+S,h[0]=g(t,n,a,c,_),h[1]=g(e,r,l,d,_),x=Object(i["g"])(h,u),_>=0&&x<T?(y=_,T=x):(f[0]=g(t,n,a,c,b),f[1]=g(e,r,l,d,b),w=Object(i["g"])(f,u),b<=1&&w<T?(y=b,T=w):S*=.5)}return v&&(v[0]=g(t,n,a,c,y),v[1]=g(e,r,l,d,y)),o(T)}function x(t,e,n,i,r,o,a,s,l){for(var c=t,u=e,h=0,f=1/l,d=1;d<=l;d++){var p=d*f,m=g(t,n,r,a,p),v=g(e,i,o,s,p),y=m-c,_=v-u;h+=Math.sqrt(y*y+_*_),c=m,u=v}return h}function w(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function S(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function T(t,e,n,i,r){var a=t-2*e+n,s=2*(e-t),l=t-i,c=0;if(d(a)){if(p(s)){var u=-l/s;u>=0&&u<=1&&(r[c++]=u)}}else{var h=s*s-4*a*l;if(d(h)){u=-s/(2*a);u>=0&&u<=1&&(r[c++]=u)}else if(h>0){var f=o(h),g=(u=(-s+f)/(2*a),(-s-f)/(2*a));u>=0&&u<=1&&(r[c++]=u),g>=0&&g<=1&&(r[c++]=g)}}return c}function O(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}function C(t,e,n,i,r){var o=(e-t)*i+t,a=(n-e)*i+e,s=(a-o)*i+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=n}function M(t,e,n,r,a,l,c,d,p){var g,m=.005,v=1/0;u[0]=c,u[1]=d;for(var y=0;y<1;y+=.05){h[0]=w(t,n,a,y),h[1]=w(e,r,l,y);var _=Object(i["g"])(u,h);_<v&&(g=y,v=_)}v=1/0;for(var b=0;b<32;b++){if(m<s)break;var x=g-m,S=g+m;h[0]=w(t,n,a,x),h[1]=w(e,r,l,x);_=Object(i["g"])(h,u);if(x>=0&&_<v)g=x,v=_;else{f[0]=w(t,n,a,S),f[1]=w(e,r,l,S);var T=Object(i["g"])(f,u);S<=1&&T<v?(g=S,v=T):m*=.5}}return p&&(p[0]=w(t,n,a,g),p[1]=w(e,r,l,g)),o(v)}function A(t,e,n,i,r,o,a){for(var s=t,l=e,c=0,u=1/a,h=1;h<=a;h++){var f=h*u,d=w(t,n,r,f),p=w(e,i,o,f),g=d-s,m=p-l;c+=Math.sqrt(g*g+m*m),s=d,l=p}return c}},"4a7b":function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e){e=e||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function c(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(t[r],e[r])}i.forEach(r,(function(t){i.isUndefined(e[t])||(n[t]=l(void 0,e[t]))})),i.forEach(o,c),i.forEach(a,(function(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(void 0,e[r])})),i.forEach(s,(function(i){i in e?n[i]=l(t[i],e[i]):i in t&&(n[i]=l(void 0,t[i]))}));var u=r.concat(o).concat(a).concat(s),h=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===u.indexOf(t)}));return i.forEach(h,c),n}},"4aa2":function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=n("20c8"),a=Math.PI,s=2*a,l=Math.sin,c=Math.cos,u=Math.acos,h=Math.atan2,f=Math.abs,d=Math.sqrt,p=Math.max,g=Math.min,m=1e-4;function v(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,f=h*l-u*c;if(!(f*f<m))return f=(u*(e-o)-h*(t-r))/f,[t+f*l,e+f*c]}function y(t,e,n,i,r,o,a){var s=t-n,l=e-i,c=(a?o:-o)/d(s*s+l*l),u=c*l,h=-c*s,f=t+u,g=e+h,m=n+u,v=i+h,y=(f+m)/2,_=(g+v)/2,b=m-f,x=v-g,w=b*b+x*x,S=r-o,T=f*v-m*g,O=(x<0?-1:1)*d(p(0,S*S*w-T*T)),C=(T*x-b*O)/w,M=(-T*b-x*O)/w,A=(T*x+b*O)/w,D=(-T*b+x*O)/w,E=C-y,I=M-_,P=A-y,L=D-_;return E*E+I*I>P*P+L*L&&(C=A,M=D),{cx:C,cy:M,x01:-u,y01:-h,x11:C*(r/S-1),y11:M*(r/S-1)}}function _(t,e){var n=p(e.r,0),i=p(e.r0||0,0),r=n>0,_=i>0;if(r||_){if(r||(n=i,i=0),i>n){var b=n;n=i,i=b}var x,w=!!e.clockwise,S=e.startAngle,T=e.endAngle;if(S===T)x=0;else{var O=[S,T];Object(o["b"])(O,!w),x=f(O[0]-O[1])}var C=e.cx,M=e.cy,A=e.cornerRadius||0,D=e.innerCornerRadius||0;if(n>m)if(x>s-m)t.moveTo(C+n*c(S),M+n*l(S)),t.arc(C,M,n,S,T,!w),i>m&&(t.moveTo(C+i*c(T),M+i*l(T)),t.arc(C,M,i,T,S,w));else{var E=f(n-i)/2,I=g(E,A),P=g(E,D),L=P,k=I,j=n*c(S),R=n*l(S),N=i*c(T),B=i*l(T),F=void 0,z=void 0,V=void 0,H=void 0;if((I>m||P>m)&&(F=n*c(T),z=n*l(T),V=i*c(S),H=i*l(S),x<a)){var G=v(j,R,V,H,F,z,N,B);if(G){var U=j-G[0],W=R-G[1],X=F-G[0],Y=z-G[1],q=1/l(u((U*X+W*Y)/(d(U*U+W*W)*d(X*X+Y*Y)))/2),Z=d(G[0]*G[0]+G[1]*G[1]);L=g(P,(i-Z)/(q-1)),k=g(I,(n-Z)/(q+1))}}if(x>m)if(k>m){var K=y(V,H,j,R,n,k,w),$=y(F,z,N,B,n,k,w);t.moveTo(C+K.cx+K.x01,M+K.cy+K.y01),k<I?t.arc(C+K.cx,M+K.cy,k,h(K.y01,K.x01),h($.y01,$.x01),!w):(t.arc(C+K.cx,M+K.cy,k,h(K.y01,K.x01),h(K.y11,K.x11),!w),t.arc(C,M,n,h(K.cy+K.y11,K.cx+K.x11),h($.cy+$.y11,$.cx+$.x11),!w),t.arc(C+$.cx,M+$.cy,k,h($.y11,$.x11),h($.y01,$.x01),!w))}else t.moveTo(C+j,M+R),t.arc(C,M,n,S,T,!w);else t.moveTo(C+j,M+R);if(i>m&&x>m)if(L>m){K=y(N,B,F,z,i,-L,w),$=y(j,R,V,H,i,-L,w);t.lineTo(C+K.cx+K.x01,M+K.cy+K.y01),L<P?t.arc(C+K.cx,M+K.cy,L,h(K.y01,K.x01),h($.y01,$.x01),!w):(t.arc(C+K.cx,M+K.cy,L,h(K.y01,K.x01),h(K.y11,K.x11),!w),t.arc(C,M,i,h(K.cy+K.y11,K.cx+K.x11),h($.cy+$.y11,$.cx+$.x11),w),t.arc(C+$.cx,M+$.cy,L,h($.y11,$.x11),h($.y01,$.x01),!w))}else t.lineTo(C+N,M+B),t.arc(C,M,i,T,S,w);else t.lineTo(C+N,M+B)}else t.moveTo(C,M);t.closePath()}}var b=function(){function t(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0,this.innerCornerRadius=0}return t}(),x=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new b},e.prototype.buildPath=function(t,e){_(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(r["b"]);x.prototype.type="sector";e["a"]=x},"4bc4":function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"b",(function(){return o}));var i=1,r=2,o=4},"4cd3":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcPath=e.util.createClass(e.Path,{type:"ecPath",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcPath.fromObject=function(t,n){n&&n(new e.EcPath(t.path,t))},e.EcPath.async=!0}).call(this,n("c8ba"))},"4d64":function(t,e,n){var i=n("fc6a"),r=n("50c4"),o=n("23cb"),a=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},"4de4":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").filter,o=n("1dde"),a=o("filter");i({target:"Array",proto:!0,forced:!a},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},"4df4":function(t,e,n){"use strict";var i=n("0366"),r=n("7b0b"),o=n("9bdd"),a=n("e95a"),s=n("50c4"),l=n("8418"),c=n("35a1");t.exports=function(t){var e,n,u,h,f,d,p=r(t),g="function"==typeof this?this:Array,m=arguments.length,v=m>1?arguments[1]:void 0,y=void 0!==v,_=c(p),b=0;if(y&&(v=i(v,m>2?arguments[2]:void 0,2)),void 0==_||g==Array&&a(_))for(e=s(p.length),n=new g(e);e>b;b++)d=y?v(p[b],b):p[b],l(n,b,d);else for(h=_.call(p),f=h.next,n=new g;!(u=f.call(h)).done;b++)d=y?o(h,v,[u.value,b],!0):u.value,l(n,b,d);return n.length=b,n}},"4ec9":function(t,e,n){"use strict";var i=n("6d61"),r=n("6566");t.exports=i("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),r)},"4f85":function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));var i=n("7fae"),r=n("6d8b"),o=n("22d1"),a=n("e0d3"),s=n("6cb7"),l=n("4041"),c=n("38a2"),u=n("f934"),h=n("9fbc"),f=n("625e"),d=n("f72b"),p=n("f6d8"),g=a["o"]();function m(t,e){return t.getName(e)||t.getId(e)}var v="__universalTransitionEnabled",y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return Object(i["b"])(e,t),e.prototype.init=function(t,e,n){this.seriesIndex=this.componentIndex,this.dataTask=Object(h["a"])({count:x,reset:w}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n);var i=g(this).sourceManager=new d["a"](this);i.prepareSource();var r=this.getInitialData(t,n);T(r,this),this.dataTask.context.data=r,g(this).dataBeforeProcessed=r,_(this),this._initSelectedMapFromData(r)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=Object(u["d"])(this),i=n?Object(u["f"])(t):{},o=this.subType;s["a"].hasClass(o)&&(o+="Series"),r["I"](t,e.getTheme().get(this.subType)),r["I"](t,this.getDefaultOption()),a["f"](t,"label",["show"]),this.fillDataTextStyle(t.data),n&&Object(u["h"])(t,i,n)},e.prototype.mergeOption=function(t,e){t=r["I"](this.option,t,!0),this.fillDataTextStyle(t.data);var n=Object(u["d"])(this);n&&Object(u["h"])(this.option,t,n);var i=g(this).sourceManager;i.dirty(),i.prepareSource();var o=this.getInitialData(t,e);T(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,g(this).dataBeforeProcessed=o,_(this),this._initSelectedMapFromData(o)},e.prototype.fillDataTextStyle=function(t){if(t&&!r["E"](t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&a["f"](t[n],"label",e)},e.prototype.getInitialData=function(t,e){},e.prototype.appendData=function(t){var e=this.getRawData();e.appendData(t.data)},e.prototype.getData=function(t){var e=C(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return g(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var e=C(this);if(e){var n=e.context;n.outputData=t,e!==this.dataTask&&(n.data=t)}g(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return r["g"](t)},e.prototype.getSourceManager=function(){return g(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return g(this).dataBeforeProcessed},e.prototype.getColorBy=function(){var t=this.get("colorBy");return t||"series"},e.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,e,n){return Object(p["a"])({series:this,dataIndex:t,multipleSeries:e})},e.prototype.isAnimationEnabled=function(){if(o["a"].node)return!1;var t=this.getShallow("animation");return t&&this.getData().count()>this.getShallow("animationThreshold")&&(t=!1),!!t},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,e,n){var i=this.ecModel,r=l["a"].prototype.getColorFromPalette.call(this,t,e,n);return r||(r=i.getColorFromPalette(t,e,n)),r},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,e){this._innerSelect(this.getData(e),t)},e.prototype.unselect=function(t,e){var n=this.option.selectedMap;if(n)for(var i=this.getData(e),r=0;r<t.length;r++){var o=t[r],a=m(i,o);n[a]=!1,this._selectedDataIndicesMap[a]=-1}},e.prototype.toggleSelect=function(t,e){for(var n=[],i=0;i<t.length;i++)n[0]=t[i],this.isSelected(t[i],e)?this.unselect(n,e):this.select(n,e)},e.prototype.getSelectedDataIndices=function(){for(var t=this._selectedDataIndicesMap,e=r["F"](t),n=[],i=0;i<e.length;i++){var o=t[e[i]];o>=0&&n.push(o)}return n},e.prototype.isSelected=function(t,e){var n=this.option.selectedMap;if(!n)return!1;var i=this.getData(e),r=m(i,t);return n[r]||!1},e.prototype.isUniversalTransitionEnabled=function(){if(this[v])return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},e.prototype._innerSelect=function(t,e){var n,i,r=this.option.selectedMode,o=e.length;if(r&&o)if("multiple"===r)for(var a=this.option.selectedMap||(this.option.selectedMap={}),s=0;s<o;s++){var l=e[s],c=m(t,l);a[c]=!0,this._selectedDataIndicesMap[c]=t.getRawIndex(l)}else if("single"===r||!0===r){var u=e[o-1];c=m(t,u);this.option.selectedMap=(n={},n[c]=!0,n),this._selectedDataIndicesMap=(i={},i[c]=t.getRawIndex(u),i)}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var e=[];t.hasItemOption&&t.each((function(n){var i=t.getRawDataItem(n);i&&i.selected&&e.push(n)})),e.length>0&&this._innerSelect(t,e)}},e.registerClass=function(t){return s["a"].registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(s["a"]);function _(t){var e=t.name;a["n"](t)||(t.name=b(t)||e)}function b(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),i=[];return r["k"](n,(function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)})),i.join(" ")}function x(t){return t.model.getRawData().count()}function w(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),S}function S(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function T(t,e){r["k"](r["e"](t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),(function(n){t.wrapMethod(n,r["i"](O,e))}))}function O(t,e){var n=C(t);return n&&n.setOutputEnd((e||this).count()),e}function C(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}r["K"](y,c["a"]),r["K"](y,l["a"]),Object(f["e"])(y,s["a"]),e["b"]=y},"4fac":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("401b");function r(t,e,n,i,r,o,a){var s=.5*(n-t),l=.5*(i-e);return(2*(e-n)+s+l)*a+(-3*(e-n)-2*s-l)*o+s*r+e}function o(t,e){for(var n=t.length,o=[],a=0,s=1;s<n;s++)a+=Object(i["h"])(t[s-1],t[s]);var l=a/2;l=l<n?n:l;for(s=0;s<l;s++){var c=s/(l-1)*(e?n:n-1),u=Math.floor(c),h=c-u,f=void 0,d=t[u%n],p=void 0,g=void 0;e?(f=t[(u-1+n)%n],p=t[(u+1)%n],g=t[(u+2)%n]):(f=t[0===u?u:u-1],p=t[u>n-2?n-1:u+1],g=t[u>n-3?n-1:u+2]);var m=h*h,v=h*m;o.push([r(f[0],d[0],p[0],g[0],h,m,v),r(f[1],d[1],p[1],g[1],h,m,v)])}return o}function a(t,e,n,r){var o,a,s,l,c=[],u=[],h=[],f=[];if(r){s=[1/0,1/0],l=[-1/0,-1/0];for(var d=0,p=t.length;d<p;d++)Object(i["l"])(s,s,t[d]),Object(i["k"])(l,l,t[d]);Object(i["l"])(s,s,r[0]),Object(i["k"])(l,l,r[1])}for(d=0,p=t.length;d<p;d++){var g=t[d];if(n)o=t[d?d-1:p-1],a=t[(d+1)%p];else{if(0===d||d===p-1){c.push(Object(i["c"])(t[d]));continue}o=t[d-1],a=t[d+1]}Object(i["q"])(u,a,o),Object(i["n"])(u,u,e);var m=Object(i["h"])(g,o),v=Object(i["h"])(g,a),y=m+v;0!==y&&(m/=y,v/=y),Object(i["n"])(h,u,-m),Object(i["n"])(f,u,v);var _=Object(i["a"])([],g,h),b=Object(i["a"])([],g,f);r&&(Object(i["k"])(_,_,s),Object(i["l"])(_,_,l),Object(i["k"])(b,b,s),Object(i["l"])(b,b,l)),c.push(_),c.push(b)}return n&&c.push(c.shift()),c}function s(t,e,n){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i&&"spline"!==i){var s=a(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var l=r.length,c=0;c<(n?l:l-1);c++){var u=s[2*c],h=s[2*c+1],f=r[(c+1)%l];t.bezierCurveTo(u[0],u[1],h[0],h[1],f[0],f[1])}}else{"spline"===i&&(r=o(r,n)),t.moveTo(r[0][0],r[0][1]);c=1;for(var d=r.length;c<d;c++)t.lineTo(r[c][0],r[c][1])}n&&t.closePath()}}},"50c4":function(t,e,n){var i=n("a691"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"50d8":function(t,e){function n(t,e){var n=-1,i=Array(t);while(++n<t)i[n]=e(n);return i}t.exports=n},5135:function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},5210:function(t,e,n){"use strict";n.d(e,"c",(function(){return x})),n.d(e,"b",(function(){return z})),n.d(e,"a",(function(){return V}));var i=n("19eb"),r=n("20c8"),o=n("5e76"),a=n("3437"),s=n("cbe5"),l=n("0da8"),c=n("dd4f"),u=n("e86a"),h=n("6d8b"),f=n("608a"),d=n("392f"),p=n("4bc4"),g=new r["a"](!0);function m(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function v(t){return"string"===typeof t&&"none"!==t}function y(t){var e=t.fill;return null!=e&&"none"!==e}function _(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function b(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function x(t,e,n){var i=Object(o["a"])(e.image,e.__image,n);if(Object(o["c"])(i)){var r=t.createPattern(i,e.repeat||"repeat");if("function"===typeof DOMMatrix&&r.setTransform){var a=new DOMMatrix;a.rotateSelf(0,0,(e.rotation||0)/Math.PI*180),a.scaleSelf(e.scaleX||1,e.scaleY||1),a.translateSelf(e.x||0,e.y||0),r.setTransform(a)}return r}}function w(t,e,n,i){var r=m(n),o=y(n),s=n.strokePercent,l=s<1,c=!e.path;e.silent&&!l||!c||e.createPathProxy();var u=e.path||g;if(!i){var d=n.fill,v=n.stroke,w=o&&!!d.colorStops,S=r&&!!v.colorStops,T=o&&!!d.image,O=r&&!!v.image,C=void 0,M=void 0,A=void 0,D=void 0,E=void 0;(w||S)&&(E=e.getBoundingRect()),w&&(C=e.__dirty?Object(a["a"])(t,d,E):e.__canvasFillGradient,e.__canvasFillGradient=C),S&&(M=e.__dirty?Object(a["a"])(t,v,E):e.__canvasStrokeGradient,e.__canvasStrokeGradient=M),T&&(A=e.__dirty||!e.__canvasFillPattern?x(t,d,e):e.__canvasFillPattern,e.__canvasFillPattern=A),O&&(D=e.__dirty||!e.__canvasStrokePattern?x(t,v,e):e.__canvasStrokePattern,e.__canvasStrokePattern=A),w?t.fillStyle=C:T&&(A?t.fillStyle=A:o=!1),S?t.strokeStyle=M:O&&(D?t.strokeStyle=D:r=!1)}var I=n.lineDash&&n.lineWidth>0&&Object(f["a"])(n.lineDash,n.lineWidth),P=n.lineDashOffset,L=!!t.setLineDash,k=e.getGlobalScale();if(u.setScale(k[0],k[1],e.segmentIgnoreThreshold),I){var j=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;j&&1!==j&&(I=Object(h["H"])(I,(function(t){return t/j})),P/=j)}var R=!0;(c||e.__dirty&p["b"]||I&&!L&&r)&&(u.setDPR(t.dpr),l?u.setContext(null):(u.setContext(t),R=!1),u.reset(),I&&!L&&(u.setLineDash(I),u.setLineDashOffset(P)),e.buildPath(u,e.shape,i),u.toStatic(),e.pathUpdated()),R&&u.rebuildPath(t,l?s:1),I&&L&&(t.setLineDash(I),t.lineDashOffset=P),i||(n.strokeFirst?(r&&b(t,n),o&&_(t,n)):(o&&_(t,n),r&&b(t,n))),I&&L&&t.setLineDash([])}function S(t,e,n){var i=e.__image=Object(o["a"])(n.image,e.__image,e,e.onload);if(i&&Object(o["c"])(i)){var r=n.x||0,a=n.y||0,s=e.getWidth(),l=e.getHeight(),c=i.width/i.height;if(null==s&&null!=l?s=l*c:null==l&&null!=s?l=s/c:null==s&&null==l&&(s=i.width,l=i.height),n.sWidth&&n.sHeight){var u=n.sx||0,h=n.sy||0;t.drawImage(i,u,h,n.sWidth,n.sHeight,r,a,s,l)}else if(n.sx&&n.sy){u=n.sx,h=n.sy;var f=s-u,d=l-h;t.drawImage(i,u,h,f,d,r,a,s,l)}else t.drawImage(i,r,a,s,l)}}function T(t,e,n){var i=n.text;if(null!=i&&(i+=""),i){t.font=n.font||u["a"],t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var r=void 0;if(t.setLineDash){var o=n.lineDash&&n.lineWidth>0&&Object(f["a"])(n.lineDash,n.lineWidth),a=n.lineDashOffset;if(o){var s=n.strokeNoScale&&e.getLineScale?e.getLineScale():1;s&&1!==s&&(o=Object(h["H"])(o,(function(t){return t/s})),a/=s),t.setLineDash(o),t.lineDashOffset=a,r=!0}}n.strokeFirst?(m(n)&&t.strokeText(i,n.x,n.y),y(n)&&t.fillText(i,n.x,n.y)):(y(n)&&t.fillText(i,n.x,n.y),m(n)&&t.strokeText(i,n.x,n.y)),r&&t.setLineDash([])}}var O=["shadowBlur","shadowOffsetX","shadowOffsetY"],C=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function M(t,e,n,r,o){var a=!1;if(!r&&(n=n||{},e===n))return!1;if(r||e.opacity!==n.opacity){a||(B(t,o),a=!0);var s=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(s)?i["b"].opacity:s}(r||e.blend!==n.blend)&&(a||(B(t,o),a=!0),t.globalCompositeOperation=e.blend||i["b"].blend);for(var l=0;l<O.length;l++){var c=O[l];(r||e[c]!==n[c])&&(a||(B(t,o),a=!0),t[c]=t.dpr*(e[c]||0))}return(r||e.shadowColor!==n.shadowColor)&&(a||(B(t,o),a=!0),t.shadowColor=e.shadowColor||i["b"].shadowColor),a}function A(t,e,n,i,r){var o=F(e,r.inHover),a=i?null:n&&F(n,r.inHover)||{};if(o===a)return!1;var s=M(t,o,a,i,r);if((i||o.fill!==a.fill)&&(s||(B(t,r),s=!0),v(o.fill)&&(t.fillStyle=o.fill)),(i||o.stroke!==a.stroke)&&(s||(B(t,r),s=!0),v(o.stroke)&&(t.strokeStyle=o.stroke)),(i||o.opacity!==a.opacity)&&(s||(B(t,r),s=!0),t.globalAlpha=null==o.opacity?1:o.opacity),e.hasStroke()){var l=o.lineWidth,c=l/(o.strokeNoScale&&e&&e.getLineScale?e.getLineScale():1);t.lineWidth!==c&&(s||(B(t,r),s=!0),t.lineWidth=c)}for(var u=0;u<C.length;u++){var h=C[u],f=h[0];(i||o[f]!==a[f])&&(s||(B(t,r),s=!0),t[f]=o[f]||h[1])}return s}function D(t,e,n,i,r){return M(t,F(e,r.inHover),n&&F(n,r.inHover),i,r)}function E(t,e){var n=e.transform,i=t.dpr||1;n?t.setTransform(i*n[0],i*n[1],i*n[2],i*n[3],i*n[4],i*n[5]):t.setTransform(i,0,0,i,0,0)}function I(t,e,n){for(var i=!1,r=0;r<t.length;r++){var o=t[r];i=i||o.isZeroArea(),E(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=i}function P(t,e){return t&&e?t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3]||t[4]!==e[4]||t[5]!==e[5]:!(!t&&!e)}var L=1,k=2,j=3,R=4;function N(t){var e=y(t),n=m(t);return!(t.lineDash||!(+e^+n)||e&&"string"!==typeof t.fill||n&&"string"!==typeof t.stroke||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}function B(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function F(t,e){return e&&t.__hoverStyle||t.style}function z(t,e){V(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function V(t,e,n,i){var r=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return e.__dirty&=~p["a"],void(e.__isRendered=!1);var o=e.__clipPaths,u=n.prevElClipPaths,h=!1,f=!1;if(u&&!Object(a["b"])(o,u)||(u&&u.length&&(B(t,n),t.restore(),f=h=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),o&&o.length&&(B(t,n),t.save(),I(o,t,n),h=!0),n.prevElClipPaths=o),n.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var g=n.prevEl;g||(f=h=!0);var m=e instanceof s["b"]&&e.autoBatch&&N(e.style);h||P(r,g.transform)?(B(t,n),E(t,e)):m||B(t,n);var v=F(e,n.inHover);e instanceof s["b"]?(n.lastDrawType!==L&&(f=!0,n.lastDrawType=L),A(t,e,g,f,n),m&&(n.batchFill||n.batchStroke)||t.beginPath(),w(t,e,v,m),m&&(n.batchFill=v.fill||"",n.batchStroke=v.stroke||"")):e instanceof c["a"]?(n.lastDrawType!==j&&(f=!0,n.lastDrawType=j),A(t,e,g,f,n),T(t,e,v)):e instanceof l["a"]?(n.lastDrawType!==k&&(f=!0,n.lastDrawType=k),D(t,e,g,f,n),S(t,e,v)):e instanceof d["a"]&&(n.lastDrawType!==R&&(f=!0,n.lastDrawType=R),H(t,e,n)),m&&i&&B(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}}function H(t,e,n){var i=e.getDisplayables(),r=e.getTemporalDisplayables();t.save();var o,a,s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(o=e.getCursor(),a=i.length;o<a;o++){var l=i[o];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),V(t,l,s,o===a-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}for(var c=0,u=r.length;c<u;c++){l=r[c];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),V(t,l,s,c===u-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),s.prevEl=l}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}},5270:function(t,e,n){"use strict";var i=n("c532"),r=n("c401"),o=n("2e67"),a=n("2444");function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){s(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]}));var e=t.adapter||a.adapter;return e(t).then((function(e){return s(t),e.data=r(e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},5319:function(t,e,n){"use strict";var i=n("d784"),r=n("825a"),o=n("50c4"),a=n("a691"),s=n("1d80"),l=n("8aa5"),c=n("0cb2"),u=n("14c3"),h=Math.max,f=Math.min,d=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var p=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,g=i.REPLACE_KEEPS_$0,m=p?"$":"$0";return[function(n,i){var r=s(this),o=void 0==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!p&&g||"string"===typeof i&&-1===i.indexOf(m)){var s=n(e,t,this,i);if(s.done)return s.value}var v=r(t),y=String(this),_="function"===typeof i;_||(i=String(i));var b=v.global;if(b){var x=v.unicode;v.lastIndex=0}var w=[];while(1){var S=u(v,y);if(null===S)break;if(w.push(S),!b)break;var T=String(S[0]);""===T&&(v.lastIndex=l(y,o(v.lastIndex),x))}for(var O="",C=0,M=0;M<w.length;M++){S=w[M];for(var A=String(S[0]),D=h(f(a(S.index),y.length),0),E=[],I=1;I<S.length;I++)E.push(d(S[I]));var P=S.groups;if(_){var L=[A].concat(E,D,y);void 0!==P&&L.push(P);var k=String(i.apply(void 0,L))}else k=c(A,y,D,E,P,i);D>=C&&(O+=y.slice(C,D)+k,C=D+A.length)}return O+y.slice(C)}]}))},"538f":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return c}));var i=n("6d8b"),r=n("e86a"),o=function(){function t(t,e,n){this._prepareParams(t,e,n)}return t.prototype._prepareParams=function(t,e,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var o=this._isOrdinal="ordinal"===t.type;this._needCrossZero=e.getNeedCrossZero&&e.getNeedCrossZero();var a=this._modelMinRaw=e.get("min",!0);Object(i["w"])(a)?this._modelMinNum=c(t,a({min:n[0],max:n[1]})):"dataMin"!==a&&(this._modelMinNum=c(t,a));var s=this._modelMaxRaw=e.get("max",!0);if(Object(i["w"])(s)?this._modelMaxNum=c(t,s({min:n[0],max:n[1]})):"dataMax"!==s&&(this._modelMaxNum=c(t,s)),o)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),u=Object(i["t"])(l)?l:[l||0,l||0];"boolean"===typeof u[0]||"boolean"===typeof u[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[Object(r["h"])(u[0],1),Object(r["h"])(u[1],1)]}},t.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,n=this._dataMax,r=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-e||Math.abs(e),s="dataMin"===this._modelMinRaw?e:this._modelMinNum,l="dataMax"===this._modelMaxRaw?n:this._modelMaxNum,c=null!=s,u=null!=l;null==s&&(s=t?r?0:NaN:e-o[0]*a),null==l&&(l=t?r?r-1:NaN:n+o[1]*a),(null==s||!isFinite(s))&&(s=NaN),(null==l||!isFinite(l))&&(l=NaN);var h=Object(i["l"])(s)||Object(i["l"])(l)||t&&!r;this._needCrossZero&&(s>0&&l>0&&!c&&(s=0),s<0&&l<0&&!u&&(l=0));var f=this._determinedMin,d=this._determinedMax;return null!=f&&(s=f,c=!0),null!=d&&(l=d,u=!0),{min:s,max:l,minFixed:c,maxFixed:u,isBlank:h}},t.prototype.modifyDataMinMax=function(t,e){this[s[t]]=e},t.prototype.setDeterminedMinMax=function(t,e){var n=a[t];this[n]=e},t.prototype.freeze=function(){this.frozen=!0},t}(),a={min:"_determinedMin",max:"_determinedMax"},s={min:"_dataMin",max:"_dataMax"};function l(t,e,n){var i=t.rawExtentInfo;return i||(i=new o(t,e,n),t.rawExtentInfo=i,i)}function c(t,e){return null==e?null:Object(i["l"])(e)?NaN:t.parse(e)}},"551f":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}));var i=n("282b"),r=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],o=Object(i["a"])(r),a=function(){function t(){}return t.prototype.getItemStyle=function(t,e){return o(this,t,e)},t}()},"55a3":function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},5692:function(t,e,n){var i=n("c430"),r=n("c6cd");(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.9.1",mode:i?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"56ef":function(t,e,n){var i=n("d066"),r=n("241c"),o=n("7418"),a=n("825a");t.exports=i("Reflect","ownKeys")||function(t){var e=r.f(a(t)),n=o.f;return n?e.concat(n(t)):e}},"57a5":function(t,e,n){var i=n("91e9"),r=i(Object.keys,Object);t.exports=r},"585a":function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n("c8ba"))},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,n){var i=n("1d80"),r=n("5899"),o="["+r+"]",a=RegExp("^"+o+o+"*"),s=RegExp(o+o+"*$"),l=function(t){return function(e){var n=String(i(e));return 1&t&&(n=n.replace(a,"")),2&t&&(n=n.replace(s,"")),n}};t.exports={start:l(1),end:l(2),trim:l(3)}},"5a0c":function(t,e,n){!function(e,n){t.exports=n()}(0,(function(){"use strict";var t="millisecond",e="second",n="minute",i="hour",r="day",o="week",a="month",s="quarter",l="year",c="date",u=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,h=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,f={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},d=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},p={s:d,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+d(i,2,"0")+":"+d(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,a),o=n-r<0,s=e.clone().add(i+(o?-1:1),a);return+(-(i+(n-r)/(o?r-s:s-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:a,y:l,w:o,d:r,D:c,h:i,m:n,s:e,ms:t,Q:s}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},g="en",m={};m[g]=f;var v=function(t){return t instanceof x},y=function(t,e,n){var i;if(!t)return g;if("string"==typeof t)m[t]&&(i=t),e&&(m[t]=e,i=t);else{var r=t.name;m[r]=t,i=r}return!n&&i&&(g=i),i||!n&&g},_=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new x(n)},b=p;b.l=y,b.i=v,b.w=function(t,e){return _(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var x=function(){function f(t){this.$L=y(t.locale,null,!0),this.parse(t)}var d=f.prototype;return d.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(b.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(u);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.$x=t.x||{},this.init()},d.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},d.$utils=function(){return b},d.isValid=function(){return!("Invalid Date"===this.$d.toString())},d.isSame=function(t,e){var n=_(t);return this.startOf(e)<=n&&n<=this.endOf(e)},d.isAfter=function(t,e){return _(t)<this.startOf(e)},d.isBefore=function(t,e){return this.endOf(e)<_(t)},d.$g=function(t,e,n){return b.u(t)?this[e]:this.set(n,t)},d.unix=function(){return Math.floor(this.valueOf()/1e3)},d.valueOf=function(){return this.$d.getTime()},d.startOf=function(t,s){var u=this,h=!!b.u(s)||s,f=b.p(t),d=function(t,e){var n=b.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return h?n:n.endOf(r)},p=function(t,e){return b.w(u.toDate()[t].apply(u.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(f){case l:return h?d(1,0):d(31,11);case a:return h?d(1,m):d(0,m+1);case o:var _=this.$locale().weekStart||0,x=(g<_?g+7:g)-_;return d(h?v-x:v+(6-x),m);case r:case c:return p(y+"Hours",0);case i:return p(y+"Minutes",1);case n:return p(y+"Seconds",2);case e:return p(y+"Milliseconds",3);default:return this.clone()}},d.endOf=function(t){return this.startOf(t,!1)},d.$set=function(o,s){var u,h=b.p(o),f="set"+(this.$u?"UTC":""),d=(u={},u[r]=f+"Date",u[c]=f+"Date",u[a]=f+"Month",u[l]=f+"FullYear",u[i]=f+"Hours",u[n]=f+"Minutes",u[e]=f+"Seconds",u[t]=f+"Milliseconds",u)[h],p=h===r?this.$D+(s-this.$W):s;if(h===a||h===l){var g=this.clone().set(c,1);g.$d[d](p),g.init(),this.$d=g.set(c,Math.min(this.$D,g.daysInMonth())).$d}else d&&this.$d[d](p);return this.init(),this},d.set=function(t,e){return this.clone().$set(t,e)},d.get=function(t){return this[b.p(t)]()},d.add=function(t,s){var c,u=this;t=Number(t);var h=b.p(s),f=function(e){var n=_(u);return b.w(n.date(n.date()+Math.round(e*t)),u)};if(h===a)return this.set(a,this.$M+t);if(h===l)return this.set(l,this.$y+t);if(h===r)return f(1);if(h===o)return f(7);var d=(c={},c[n]=6e4,c[i]=36e5,c[e]=1e3,c)[h]||1,p=this.$d.getTime()+t*d;return b.w(p,this)},d.subtract=function(t,e){return this.add(-1*t,e)},d.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var n=t||"YYYY-MM-DDTHH:mm:ssZ",i=b.z(this),r=this.$locale(),o=this.$H,a=this.$m,s=this.$M,l=r.weekdays,c=r.months,u=function(t,i,r,o){return t&&(t[i]||t(e,n))||r[i].substr(0,o)},f=function(t){return b.s(o%12||12,t,"0")},d=r.meridiem||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i},p={YY:String(this.$y).slice(-2),YYYY:this.$y,M:s+1,MM:b.s(s+1,2,"0"),MMM:u(r.monthsShort,s,c,3),MMMM:u(c,s),D:this.$D,DD:b.s(this.$D,2,"0"),d:String(this.$W),dd:u(r.weekdaysMin,this.$W,l,2),ddd:u(r.weekdaysShort,this.$W,l,3),dddd:l[this.$W],H:String(o),HH:b.s(o,2,"0"),h:f(1),hh:f(2),a:d(o,a,!0),A:d(o,a,!1),m:String(a),mm:b.s(a,2,"0"),s:String(this.$s),ss:b.s(this.$s,2,"0"),SSS:b.s(this.$ms,3,"0"),Z:i};return n.replace(h,(function(t,e){return e||p[t]||i.replace(":","")}))},d.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},d.diff=function(t,c,u){var h,f=b.p(c),d=_(t),p=6e4*(d.utcOffset()-this.utcOffset()),g=this-d,m=b.m(this,d);return m=(h={},h[l]=m/12,h[a]=m,h[s]=m/3,h[o]=(g-p)/6048e5,h[r]=(g-p)/864e5,h[i]=g/36e5,h[n]=g/6e4,h[e]=g/1e3,h)[f]||g,u?m:b.a(m)},d.daysInMonth=function(){return this.endOf(a).$D},d.$locale=function(){return m[this.$L]},d.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=y(t,e,!0);return i&&(n.$L=i),n},d.clone=function(){return b.w(this.$d,this)},d.toDate=function(){return new Date(this.valueOf())},d.toJSON=function(){return this.isValid()?this.toISOString():null},d.toISOString=function(){return this.$d.toISOString()},d.toString=function(){return this.$d.toUTCString()},f}(),w=x.prototype;return _.prototype=w,[["$ms",t],["$s",e],["$m",n],["$H",i],["$W",r],["$M",a],["$y",l],["$D",c]].forEach((function(t){w[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),_.extend=function(t,e){return t.$i||(t(e,x,_),t.$i=!0),_},_.locale=y,_.isDayjs=v,_.unix=function(t){return _(1e3*t)},_.en=m[g],_.Ls=m,_.p={},_}))},"5a34":function(t,e,n){var i=n("44e7");t.exports=function(t){if(i(t))throw TypeError("The method doesn't accept regular expressions");return t}},"5b87":function(t,e,n){"use strict";var i,r=n("6d8b"),o=n("2dc5"),a=n("0da8"),s=n("d9fc"),l=n("c7a2"),c=n("ae69"),u=n("cb11"),h=n("87b1"),f=n("d498"),d=n("1687"),p=n("342d"),g=n("48a9"),m=n("dded"),v=n("dd4f");function y(t){if(Object(r["C"])(t)){var e=new DOMParser;t=e.parseFromString(t,"text/xml")}var n=t;9===n.nodeType&&(n=n.firstChild);while("svg"!==n.nodeName.toLowerCase()||1!==n.nodeType)n=n.nextSibling;return n}var _={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},b=Object(r["F"])(_),x={"alignment-baseline":"textBaseline","stop-color":"stopColor"},w=Object(r["F"])(x),S=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var n=y(t);if(!n)throw new Error("Illegal svg");this._defsUsePending=[];var i=new o["a"];this._root=i;var r=[],a=n.getAttribute("viewBox")||"",s=parseFloat(n.getAttribute("width")||e.width),c=parseFloat(n.getAttribute("height")||e.height);isNaN(s)&&(s=null),isNaN(c)&&(c=null),D(n,i,null,!0,!1);var u,h,f=n.firstChild;while(f)this._parseNode(f,i,r,null,!1,!1),f=f.nextSibling;if(L(this._defs,this._defsUsePending),this._defsUsePending=[],a){var d=j(a);d.length>=4&&(u={x:parseFloat(d[0]||0),y:parseFloat(d[1]||0),width:parseFloat(d[2]),height:parseFloat(d[3])})}if(u&&null!=s&&null!=c&&(h=H(u,{x:0,y:0,width:s,height:c}),!e.ignoreViewBox)){var p=i;i=new o["a"],i.add(p),p.scaleX=p.scaleY=h.scale,p.x=h.x,p.y=h.y}return e.ignoreRootClip||null==s||null==c||i.setClipPath(new l["a"]({shape:{x:0,y:0,width:s,height:c}})),{root:i,width:s,height:c,viewBoxRect:u,viewBoxTransform:h,named:r}},t.prototype._parseNode=function(t,e,n,o,a,s){var l,c=t.nodeName.toLowerCase(),u=o;if("defs"===c&&(a=!0),"text"===c&&(s=!0),"defs"===c||"switch"===c)l=e;else{if(!a){var h=i[c];if(h&&Object(r["q"])(i,c)){l=h.call(this,t,e);var f=t.getAttribute("name");if(f){var d={name:f,namedFrom:null,svgNodeTagLower:c,el:l};n.push(d),"g"===c&&(u=d)}else o&&n.push({name:o.name,namedFrom:o,svgNodeTagLower:c,el:l});e.add(l)}}var p=T[c];if(p&&Object(r["q"])(T,c)){var g=p.call(this,t),m=t.getAttribute("id");m&&(this._defs[m]=g)}}if(l&&l.isGroup){var v=t.firstChild;while(v)1===v.nodeType?this._parseNode(v,l,n,u,a,s):3===v.nodeType&&s&&this._parseText(v,l),v=v.nextSibling}},t.prototype._parseText=function(t,e){var n=new v["a"]({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});M(e,n),D(t,n,this._defsUsePending,!1,!1),E(n,e);var i=n.style,r=i.fontSize;r&&r<9&&(i.fontSize=9,n.scaleX*=r/9,n.scaleY*=r/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var a=n.getBoundingRect();return this._textX+=a.width,e.add(n),n},t.internalField=function(){i={g:function(t,e){var n=new o["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new l["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new s["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new u["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new c["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n,i=t.getAttribute("points");i&&(n=A(i));var r=new h["a"]({shape:{points:n||[]},silent:!0});return M(e,r),D(t,r,this._defsUsePending,!1,!1),r},polyline:function(t,e){var n,i=t.getAttribute("points");i&&(n=A(i));var r=new f["a"]({shape:{points:n||[]},silent:!0});return M(e,r),D(t,r,this._defsUsePending,!1,!1),r},image:function(t,e){var n=new a["a"];return M(e,n),D(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",r=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(a);var s=new o["a"];return M(e,s),D(t,s,this._defsUsePending,!1,!0),s},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||"0",a=t.getAttribute("dy")||"0",s=new o["a"];return M(e,s),D(t,s,this._defsUsePending,!1,!0),this._textX+=parseFloat(r),this._textY+=parseFloat(a),s},path:function(t,e){var n=t.getAttribute("d")||"",i=Object(p["b"])(n);return M(e,i),D(t,i,this._defsUsePending,!1,!1),i.silent=!0,i}}}(),t}(),T={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),i=parseInt(t.getAttribute("x2")||"10",10),r=parseInt(t.getAttribute("y2")||"0",10),o=new g["a"](e,n,i,r);return O(t,o),C(t,o),o},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),i=parseInt(t.getAttribute("r")||"0",10),r=new m["a"](e,n,i);return O(t,r),C(t,r),r}};function O(t,e){var n=t.getAttribute("gradientUnits");"userSpaceOnUse"===n&&(e.global=!0)}function C(t,e){var n=t.firstChild;while(n){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var i=n.getAttribute("offset"),r=void 0;r=i&&i.indexOf("%")>0?parseInt(i,10)/100:i?parseFloat(i):0;var o={};z(n,o,o);var a=o.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:r,color:a})}n=n.nextSibling}}function M(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),Object(r["j"])(e.__inheritedStyle,t.__inheritedStyle))}function A(t){for(var e=j(t),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),o=parseFloat(e[i+1]);n.push([r,o])}return n}function D(t,e,n,i,o){var a=e,s=a.__inheritedStyle=a.__inheritedStyle||{},l={};1===t.nodeType&&(B(t,e),z(t,s,l),i||V(t,s,l)),a.style=a.style||{},null!=s.fill&&(a.style.fill=P(a,"fill",s.fill,n)),null!=s.stroke&&(a.style.stroke=P(a,"stroke",s.stroke,n)),Object(r["k"])(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){null!=s[t]&&(a.style[t]=parseFloat(s[t]))})),Object(r["k"])(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(t){null!=s[t]&&(a.style[t]=s[t])})),o&&(a.__selfStyle=l),s.lineDash&&(a.style.lineDash=Object(r["H"])(j(s.lineDash),(function(t){return parseFloat(t)}))),"hidden"!==s.visibility&&"collapse"!==s.visibility||(a.invisible=!0),"none"===s.display&&(a.ignore=!0)}function E(t,e){var n=e.__selfStyle;if(n){var i=n.textBaseline,r=i;i&&"auto"!==i?"baseline"===i?r="alphabetic":"before-edge"===i||"text-before-edge"===i?r="top":"after-edge"===i||"text-after-edge"===i?r="bottom":"central"!==i&&"mathematical"!==i||(r="middle"):r="alphabetic",t.style.textBaseline=r}var o=e.__inheritedStyle;if(o){var a=o.textAlign,s=a;a&&("middle"===a&&(s="center"),t.style.textAlign=s)}}var I=/^url\(\s*#(.*?)\)/;function P(t,e,n,i){var o=n&&n.match(I);if(!o)return"none"===n&&(n=null),n;var a=Object(r["T"])(o[1]);i.push([t,e,a])}function L(t,e){for(var n=0;n<e.length;n++){var i=e[n];i[0].style[i[1]]=t[i[2]]}}var k=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function j(t){return t.match(k)||[]}var R=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,N=Math.PI/180;function B(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=[],r=null;n.replace(R,(function(t,e,n){return i.push(e,n),""}));for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1],l=j(a);switch(r=r||d["c"](),s){case"translate":d["i"](r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":d["h"](r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":d["g"](r,r,-parseFloat(l[0])*N);break;case"skewX":var c=Math.tan(parseFloat(l[0])*N);d["f"](r,[1,0,c,1,0,0],r);break;case"skewY":var u=Math.tan(parseFloat(l[0])*N);d["f"](r,[1,u,0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5]);break}}e.setLocalTransform(r)}}var F=/([^\s:;]+)\s*:\s*([^:;]+)/g;function z(t,e,n){var i=t.getAttribute("style");if(i){var o;F.lastIndex=0;while(null!=(o=F.exec(i))){var a=o[1],s=Object(r["q"])(_,a)?_[a]:null;s&&(e[s]=o[2]);var l=Object(r["q"])(x,a)?x[a]:null;l&&(n[l]=o[2])}}}function V(t,e,n){for(var i=0;i<b.length;i++){var r=b[i],o=t.getAttribute(r);null!=o&&(e[_[r]]=o)}for(i=0;i<w.length;i++){r=w[i],o=t.getAttribute(r);null!=o&&(n[x[r]]=o)}}function H(t,e){var n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return{scale:r,x:-(t.x+t.width/2)*r+(e.x+e.width/2),y:-(t.y+t.height/2)*r+(e.y+e.height/2)}}function G(t,e){var n=new S;return n.parse(t,e)}var U=n("9850"),W=n("f279"),X=Object(r["g"])(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),Y=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=Object(r["g"])(),this._freedGraphics=[],this._mapName=t,this._parsedXML=y(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=Z(t.named),n=e.regions,i=e.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){var e,n;try{e=t&&G(t,{ignoreViewBox:!0,ignoreRootClip:!0})||{},n=e.root,Object(r["b"])(null!=n)}catch(y){throw new Error("Invalid svg format\n"+y.message)}var i=new o["a"];i.add(n),i.isGeoSVGGraphicRoot=!0;var a=e.width,s=e.height,c=e.viewBoxRect,u=this._boundingRect;if(!u){var h=void 0,f=void 0,d=void 0,p=void 0;if(null!=a?(h=0,d=a):c&&(h=c.x,d=c.width),null!=s?(f=0,p=s):c&&(f=c.y,p=c.height),null==h||null==f){var g=n.getBoundingRect();null==h&&(h=g.x,d=g.width),null==f&&(f=g.y,p=g.height)}u=this._boundingRect=new U["a"](h,f,d,p)}if(c){var m=H(c,u);n.scaleX=n.scaleY=m.scale,n.x=m.x,n.y=m.y}i.setClipPath(new l["a"]({shape:u.plain()}));var v=[];return Object(r["k"])(e.named,(function(t){null!=X.get(t.svgNodeTagLower)&&(v.push(t),q(t.el))})),{root:i,boundingRect:u,named:v}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},t}();function q(t){t.silent=!1,t.isGroup&&t.traverse((function(t){t.silent=!1}))}function Z(t){var e=[],n=Object(r["g"])();return Object(r["k"])(t,(function(t){if(null==t.namedFrom){var i=new W["b"](t.name,t.el);e.push(i),n.set(t.name,i)}})),{regions:e,regionsMap:n}}for(var K=n("bda7"),$=[126,25],J="南海诸岛",Q=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],tt=0;tt<Q.length;tt++)for(var et=0;et<Q[tt].length;et++)Q[tt][et][0]/=10.5,Q[tt][et][1]/=-14,Q[tt][et][0]+=$[0],Q[tt][et][1]+=$[1];function nt(t,e){if("china"===t){for(var n=0;n<e.length;n++)if(e[n].name===J)return;e.push(new W["a"](J,r["H"](Q,(function(t){return{type:"polygon",exterior:t}})),$))}}var it=n("1792"),rt=n("6bd4"),ot=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]];function at(t,e){"china"===t&&"台湾"===e.name&&e.geometries.push({type:"polygon",exterior:ot[0]})}var st="name",lt=function(){function t(t,e,n){this.type="geoJSON",this._parsedMap=Object(r["g"])(),this._mapName=t,this._specialAreas=n,this._geoJSON=ut(e)}return t.prototype.load=function(t,e){e=e||st;var n=this._parsedMap.get(e);if(!n){var i=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:i,boundingRect:ct(i)})}var o=Object(r["g"])(),a=[];return Object(r["k"])(n.regions,(function(e){var n=e.name;t&&t.hasOwnProperty(n)&&(e=e.cloneShallow(n=t[n])),a.push(e),o.set(n,e)})),{regions:a,boundingRect:n.boundingRect||new U["a"](0,0,0,0),regionsMap:o}},t.prototype._parseToRegions=function(t){var e,n=this._mapName,i=this._geoJSON;try{e=i?Object(K["a"])(i,t):[]}catch(o){throw new Error("Invalid geoJson format\n"+o.message)}return nt(n,e),Object(r["k"])(e,(function(t){var e=t.name;Object(it["a"])(n,t),Object(rt["a"])(n,t),at(n,t);var i=this._specialAreas&&this._specialAreas[e];i&&t.transformTo(i.left,i.top,i.width,i.height)}),this),e},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function ct(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();e=e||i.clone(),e.union(i)}return e}function ut(t){return Object(r["C"])(t)?"undefined"!==typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t}var ht=Object(r["g"])();e["a"]={registerMap:function(t,e,n){if(e.svg){var i=new Y(t,e.svg);ht.set(t,i)}else{var r=e.geoJson||e.geoJSON;r&&!e.features?n=e.specialAreas:r=e;i=new lt(t,r,n);ht.set(t,i)}},getGeoResource:function(t){return ht.get(t)},getMapForUser:function(t){var e=ht.get(t);return e&&"geoJSON"===e.type&&e.getMapForUser()},load:function(t,e,n){var i=ht.get(t);if(i)return i.load(e,n)}}},"5c6c":function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"5e2e":function(t,e,n){var i=n("28c9"),r=n("69d5"),o=n("b4c0"),a=n("fba5"),s=n("67ca");function l(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},"5e72":function(t,e,n){(function(t){n("fb6a"),n("d3b7"),n("25f0"),n("cb29");var e=t.fabric||(t.fabric={});e.EcCube=e.util.createClass(e.Object,{type:"ecCube",initialize:function(t){t=t||{},this.callSuper("initialize",t)},shadeColor:function(t,e){t=t.substr(1);var n=parseInt(t,16),i=Math.round(2.55*e),r=(n>>16)+i,o=(n>>8&255)+i,a=(255&n)+i;return"#"+(16777216+65536*(r<255?r<1?0:r:255)+256*(o<255?o<1?0:o:255)+(a<255?a<1?0:a:255)).toString(16).slice(1)},_render:function(t){var n=this.width,i=this.height,r=this.fill;r=new e.Color(r).toHex();var o=n/2,a=n/2,s=i/2,l=0,c=a;t.beginPath(),t.moveTo(l,c),t.lineTo(l-o,c-.5*o),t.lineTo(l-o,c-s-.5*o),t.lineTo(l,c-1*s),t.closePath(),t.fillStyle=this.shadeColor(r,-10),t.strokeStyle=r,t.stroke(),t.fill(),t.beginPath(),t.moveTo(l,c),t.lineTo(l+a,c-.5*a),t.lineTo(l+a,c-s-.5*a),t.lineTo(l,c-1*s),t.closePath(),t.fillStyle=this.shadeColor(r,10),t.strokeStyle=this.shadeColor(r,50),t.stroke(),t.fill(),t.beginPath(),t.moveTo(l,c-s),t.lineTo(l-o,c-s-.5*o),t.lineTo(l-o+a,c-s-(.5*o+.5*a)),t.lineTo(l+a,c-s-.5*a),t.closePath(),t.fillStyle=this.shadeColor(r,20),t.strokeStyle=this.shadeColor(r,60),t.stroke(),t.fill(),t.restore(),t.save()}}),e.EcCube.fromObject=function(t,n){n&&n(new e.EcCube(t))},e.EcTable.async=!0}).call(this,n("c8ba"))},"5e76":function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return l}));var i=n("d51b"),r=new i["a"](50);function o(t){if("string"===typeof t){var e=r.get(t);return e&&e.image}return t}function a(t,e,n,i,o){if(t){if("string"===typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var a=r.get(t),c={hostEl:n,cb:i,cbPayload:o};return a?(e=a.image,!l(e)&&a.pending.push(c)):(e=new Image,e.onload=e.onerror=s,r.put(t,e.__cachedImgObj={image:e,pending:[c]}),e.src=e.__zrImageSrc=t),e}return t}return e}function s(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function l(t){return t&&t.width&&t.height}},"5e81":function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i=n("7fae"),r=n("6cb7"),o=n("b12f"),a=n("07fd"),s=n("f72b"),l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(i["b"])(e,t),e.prototype.init=function(e,n,i){t.prototype.init.call(this,e,n,i),this._sourceManager=new s["a"](this),Object(s["b"])(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),Object(s["b"])(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:a["a"]},e}(r["a"]),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(i["b"])(e,t),e.type="dataset",e}(o["a"]);function u(t){t.registerComponentModel(l),t.registerComponentView(c)}},"5edf":function(t,e){function n(t,e,n){var i=-1,r=null==t?0:t.length;while(++i<r)if(n(e,t[i]))return!0;return!1}t.exports=n},"5f02":function(t,e,n){"use strict";t.exports=function(t){return"object"===typeof t&&!0===t.isAxiosError}},"5f9e":function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcIframe=e.util.createClass(e.Rect,{type:"ecIframe",superType:"element",stateProperties:e.Object.prototype.stateProperties.concat(["src"]),cacheProperties:e.Object.prototype.stateProperties.concat(["src"]),element:null,hasControls:!1,lockRotation:!0,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({src:t})},setSource:function(t){this.setSrc(t)},setSrc:function(t){var e=t.src;e&&(this.set({src:e}),this.iframeElement.src=e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t);var n=this.id,i=this.scaleX,r=this.scaleY,o=this.width,a=this.height,s=this.angle,l=this.src,c=this.editable,u=(this.dialog,this.canvas.getZoom()),h=this.aCoords.tl.x,f=this.aCoords.tl.y,d=(o*i*u-o)/2,p=(a*r*u-a)/2;if(!this.element){this.iframeElement=e.util.makeElement("iframe",{id:n,src:l,width:"100%",height:"100%",frameborder:0,scrolling:"none",allowfullscreen:!0});var g=e.util.wrapElement(this.iframeElement,"div",{id:"".concat(n,"_container"),class:"item__container",style:"\n\t\t\t\t\t\t\t\ttransform: rotate(".concat(s,"deg) scale(").concat(i*u,", ").concat(r*u,");\n\t\t\t\t\t\t\t\twidth: ").concat(o,"px;\n\t\t\t\t\t\t\t\theight: ").concat(a,"px;\n\t\t\t\t\t\t\t\tleft: ").concat(h+d,"px;\n                top: ").concat(f+p,"px;\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tuser-select: ").concat(c?"none":" auto ",";\n\t\t\t\t\t\t\t\tpointer-events: ").concat(c?"none":"auto",";")});this.element=e.util.makeElementSelectable(g);var m=document.getElementById(this.canvas.container);m.appendChild(this.element)}}}),e.EcIframe.fromObject=function(t,n){n&&n(new e.EcIframe(t.src,t))},e.EcIframe.async=!0}).call(this,n("c8ba"))},6044:function(t,e,n){var i=n("0b07"),r=i(Object,"create");t.exports=r},"605d":function(t,e,n){var i=n("c6b6"),r=n("da84");t.exports="process"==i(r.process)},"607d":function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"a",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"d",(function(){return m}));var i=n("22d1"),r=n("65ed"),o="undefined"!==typeof window&&!!window.addEventListener,a=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,s=[];function l(t,e,n,r){return n=n||{},r||!i["a"].canvasSupported?c(t,e,n):i["a"].browser.firefox&&i["a"].browser.version<"39"&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):c(t,e,n),n}function c(t,e,n){if(i["a"].domSupported&&t.getBoundingClientRect){var o=e.clientX,a=e.clientY;if(Object(r["a"])(t)){var l=t.getBoundingClientRect();return n.zrX=o-l.left,void(n.zrY=a-l.top)}if(Object(r["b"])(s,t,o,a))return n.zrX=s[0],void(n.zrY=s[1])}n.zrX=n.zrY=0}function u(t){return t||window.event}function h(t,e,n){if(e=u(e),null!=e.zrX)return e;var i=e.type,r=i&&i.indexOf("touch")>=0;if(r){var o="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];o&&l(t,o,e,n)}else{l(t,e,e,n);var s=f(e);e.zrDelta=s?s/120:-(e.detail||0)/3}var c=e.button;return null==e.which&&void 0!==c&&a.test(e.type)&&(e.which=1&c?1:2&c?3:4&c?2:0),e}function f(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,i=t.deltaY;if(null==n||null==i)return e;var r=0!==i?Math.abs(i):Math.abs(n),o=i>0?-1:i<0?1:n>0?-1:1;return 3*r*o}function d(t,e,n,i){o?t.addEventListener(e,n,i):t.attachEvent("on"+e,n)}function p(t,e,n,i){o?t.removeEventListener(e,n,i):t.detachEvent("on"+e,n)}var g=o?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0};function m(t){return 2===t.which||3===t.which}},"608a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("6d8b");function r(t,e){return t&&"solid"!==t&&e>0?(e=e||1,"dashed"===t?[4*e,2*e]:"dotted"===t?[e]:Object(i["z"])(t)?[t]:Object(i["t"])(t)?t:null):null}},"60da":function(t,e,n){"use strict";var i=n("83ab"),r=n("d039"),o=n("df75"),a=n("7418"),s=n("d1e7"),l=n("7b0b"),c=n("44ad"),u=Object.assign,h=Object.defineProperty;t.exports=!u||r((function(){if(i&&1!==u({b:1},u(h({},"a",{enumerable:!0,get:function(){h(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||o(u({},e)).join("")!=r}))?function(t,e){var n=l(t),r=arguments.length,u=1,h=a.f,f=s.f;while(r>u){var d,p=c(arguments[u++]),g=h?o(p).concat(h(p)):o(p),m=g.length,v=0;while(m>v)d=g[v++],i&&!f.call(p,d)||(n[d]=p[d])}return n}:u},"620a":function(t,e,n){"use strict";(function(t){var i,r=n("3db9"),o={supportWebGL:function(){if(null==i)try{var t=document.createElement("canvas"),e=t.getContext("webgl")||t.getContext("experimental-webgl");if(!e)throw new Error}catch(n){i=!1}return i}};o.Int8Array="undefined"===typeof Int8Array?Array:Int8Array,o.Uint8Array="undefined"===typeof Uint8Array?Array:Uint8Array,o.Uint16Array="undefined"===typeof Uint16Array?Array:Uint16Array,o.Uint32Array="undefined"===typeof Uint32Array?Array:Uint32Array,o.Int16Array="undefined"===typeof Int16Array?Array:Int16Array,o.Float32Array="undefined"===typeof Float32Array?Array:Float32Array,o.Float64Array="undefined"===typeof Float64Array?Array:Float64Array;var a={};"undefined"!==typeof window?a=window:"undefined"!==typeof t&&(a=t),o.requestAnimationFrame=a.requestAnimationFrame||a.msRequestAnimationFrame||a.mozRequestAnimationFrame||a.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},o.createCanvas=function(){return document.createElement("canvas")},o.createImage=function(){return new a.Image},o.request={get:r["a"].get},o.addEventListener=function(t,e,n,i){t.addEventListener(e,n,i)},o.removeEventListener=function(t,e,n){t.removeEventListener(e,n)},e["a"]=o}).call(this,n("c8ba"))},"625e":function(t,e,n){"use strict";n.d(e,"f",(function(){return l})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return h})),n.d(e,"e",(function(){return d})),n.d(e,"a",(function(){return g})),n.d(e,"c",(function(){return y}));var i=n("7fae"),r=n("6d8b"),o=".",a="___EC__COMPONENT__CONTAINER___",s="___EC__EXTENDED_CLASS___";function l(t){var e={main:"",sub:""};if(t){var n=t.split(o);e.main=n[0]||"",e.sub=n[1]||""}return e}function c(t){r["b"](/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(t),'componentType "'+t+'" illegal')}function u(t){return!(!t||!t[s])}function h(t,e){t.$constructor=t,t.extend=function(t){var e=this;function n(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(t.$constructor)t.$constructor.apply(this,arguments);else{if(f(e)){var s=r["h"](n.prototype,new(e.bind.apply(e,Object(i["c"])([void 0],o))));return s}e.apply(this,arguments)}}return n[s]=!0,r["m"](n.prototype,t),n.extend=this.extend,n.superCall=m,n.superApply=v,r["s"](n,this),n.superClass=e,n}}function f(t){return"function"===typeof t&&/^class\s/.test(Function.prototype.toString.call(t))}function d(t,e){t.extend=e.extend}var p=Math.round(10*Math.random());function g(t){var e=["__\0is_clz",p++].join("_");t.prototype[e]=!0,t.isInstance=function(t){return!(!t||!t[e])}}function m(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.superClass.prototype[e].apply(t,n)}function v(t,e,n){return this.superClass.prototype[e].apply(t,n)}function y(t){var e={};function n(t){var n=e[t.main];return n&&n[a]||(n=e[t.main]={},n[a]=!0),n}t.registerClass=function(t){var i=t.type||t.prototype.type;if(i){c(i),t.prototype.type=i;var r=l(i);if(r.sub){if(r.sub!==a){var o=n(r);o[r.sub]=t}}else e[r.main]=t}return t},t.getClass=function(t,n,i){var r=e[t];if(r&&r[a]&&(r=n?r[n]:null),i&&!r)throw new Error(n?"Component "+t+"."+(n||"")+" is used but not imported.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){var n=l(t),i=[],o=e[n.main];return o&&o[a]?r["k"](o,(function(t,e){e!==a&&i.push(t)})):i.push(o),i},t.hasClass=function(t){var n=l(t);return!!e[n.main]},t.getAllClassMainTypes=function(){var t=[];return r["k"](e,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){var n=l(t),i=e[n.main];return i&&i[a]}}},"62e4":function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},"642a":function(t,e,n){var i=n("966f"),r=n("3bb4"),o=n("20ec");function a(t){var e=r(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}t.exports=a},6547:function(t,e,n){var i=n("a691"),r=n("1d80"),o=function(t){return function(e,n){var o,a,s=String(r(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}};t.exports={codeAt:o(!1),charAt:o(!0)}},6566:function(t,e,n){"use strict";var i=n("9bf2").f,r=n("7c73"),o=n("e2cc"),a=n("0366"),s=n("19aa"),l=n("2266"),c=n("7dd0"),u=n("2626"),h=n("83ab"),f=n("f183").fastKey,d=n("69f3"),p=d.set,g=d.getterFor;t.exports={getConstructor:function(t,e,n,c){var u=t((function(t,i){s(t,u,e),p(t,{type:e,index:r(null),first:void 0,last:void 0,size:0}),h||(t.size=0),void 0!=i&&l(i,t[c],{that:t,AS_ENTRIES:n})})),d=g(e),m=function(t,e,n){var i,r,o=d(t),a=v(t,e);return a?a.value=n:(o.last=a={index:r=f(e,!0),key:e,value:n,previous:i=o.last,next:void 0,removed:!1},o.first||(o.first=a),i&&(i.next=a),h?o.size++:t.size++,"F"!==r&&(o.index[r]=a)),t},v=function(t,e){var n,i=d(t),r=f(e);if("F"!==r)return i.index[r];for(n=i.first;n;n=n.next)if(n.key==e)return n};return o(u.prototype,{clear:function(){var t=this,e=d(t),n=e.index,i=e.first;while(i)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete n[i.index],i=i.next;e.first=e.last=void 0,h?e.size=0:t.size=0},delete:function(t){var e=this,n=d(e),i=v(e,t);if(i){var r=i.next,o=i.previous;delete n.index[i.index],i.removed=!0,o&&(o.next=r),r&&(r.previous=o),n.first==i&&(n.first=r),n.last==i&&(n.last=o),h?n.size--:e.size--}return!!i},forEach:function(t){var e,n=d(this),i=a(t,arguments.length>1?arguments[1]:void 0,3);while(e=e?e.next:n.first){i(e.value,e.key,this);while(e&&e.removed)e=e.previous}},has:function(t){return!!v(this,t)}}),o(u.prototype,n?{get:function(t){var e=v(this,t);return e&&e.value},set:function(t,e){return m(this,0===t?0:t,e)}}:{add:function(t){return m(this,t=0===t?0:t,t)}}),h&&i(u.prototype,"size",{get:function(){return d(this).size}}),u},setStrong:function(t,e,n){var i=e+" Iterator",r=g(e),o=g(i);c(t,e,(function(t,e){p(this,{type:i,target:t,state:r(t),kind:e,last:void 0})}),(function(){var t=o(this),e=t.kind,n=t.last;while(n&&n.removed)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),u(e)}}},"656b":function(t,e,n){var i=n("e2e4"),r=n("f4d6");function o(t,e){e=i(e,t);var n=0,o=e.length;while(null!=t&&n<o)t=t[r(e[n++])];return n&&n==o?t:void 0}t.exports=o},"65ed":function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return d}));var i=n("22d1"),r=Math.log(2);function o(t,e,n,i,a,s){var l=i+"-"+a,c=t.length;if(s.hasOwnProperty(l))return s[l];if(1===e){var u=Math.round(Math.log((1<<c)-1&~a)/r);return t[n][u]}var h=i|1<<n,f=n+1;while(i&1<<f)f++;for(var d=0,p=0,g=0;p<c;p++){var m=1<<p;m&a||(d+=(g%2?-1:1)*t[n][p]*o(t,e-1,f,h,a|m,s),g++)}return s[l]=d,d}function a(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},r=o(n,8,0,0,0,i);if(0!==r){for(var a=[],s=0;s<8;s++)for(var l=0;l<8;l++)null==a[l]&&(a[l]=0),a[l]+=((s+l)%2?-1:1)*o(n,7,0===s?1:0,1<<s,1<<l,i)/r*e[s];return function(t,e,n){var i=e*a[6]+n*a[7]+1;t[0]=(e*a[0]+n*a[1]+a[2])/i,t[1]=(e*a[3]+n*a[4]+a[5])/i}}}var s="___zrEVENTSAVED",l=[];function c(t,e,n,i,r){return u(l,e,i,r,!0)&&u(t,n,l[0],l[1])}function u(t,e,n,r,o){if(e.getBoundingClientRect&&i["a"].domSupported&&!d(e)){var a=e[s]||(e[s]={}),l=h(e,a),c=f(l,a,o);if(c)return c(t,n,r),!0}return!1}function h(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],r=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,c=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[l]+":0",r[c]+":0",i[1-l]+":auto",r[1-c]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}function f(t,e,n){for(var i=n?"invTrans":"trans",r=e[i],o=e.srcCoords,s=[],l=[],c=!0,u=0;u<4;u++){var h=t[u].getBoundingClientRect(),f=2*u,d=h.left,p=h.top;s.push(d,p),c=c&&o&&d===o[f]&&p===o[f+1],l.push(t[u].offsetLeft,t[u].offsetTop)}return c&&r?r:(e.srcCoords=s,e[i]=n?a(l,s):a(s,l))}function d(t){return"CANVAS"===t.nodeName.toUpperCase()}},"65f0":function(t,e,n){var i=n("861d"),r=n("e8b5"),o=n("b622"),a=o("species");t.exports=function(t,e){var n;return r(t)&&(n=t.constructor,"function"!=typeof n||n!==Array&&!r(n.prototype)?i(n)&&(n=n[a],null===n&&(n=void 0)):n=void 0),new(void 0===n?Array:n)(0===e?0:e)}},6747:function(t,e){var n=Array.isArray;t.exports=n},"67ca":function(t,e,n){var i=n("cb5a");function r(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}t.exports=r},"68ab":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("4a3f");function r(t,e,n,r,o,a,s,l,c){if(0===s)return!1;var u=s;if(c>e+u&&c>r+u&&c>a+u||c<e-u&&c<r-u&&c<a-u||l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u)return!1;var h=Object(i["l"])(t,e,n,r,o,a,l,c,null);return h<=u/2}},"68f4":function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcTriangle=e.util.createClass(e.Triangle,{type:"ecTriangle",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcTriangle.fromObject=function(t,n){n&&n(new e.EcTriangle(t))},e.EcTriangle.async=!0}).call(this,n("c8ba"))},"697e":function(t,e,n){"use strict";n.d(e,"f",(function(){return C})),n.d(e,"i",(function(){return A})),n.d(e,"a",(function(){return D})),n.d(e,"g",(function(){return E})),n.d(e,"h",(function(){return I})),n.d(e,"c",(function(){return P})),n.d(e,"b",(function(){return L})),n.d(e,"e",(function(){return j})),n.d(e,"j",(function(){return R})),n.d(e,"d",(function(){return N})),n.d(e,"k",(function(){return B}));var i=n("6d8b"),r=n("18c0"),o=n("89e3"),a=n("e0d8"),s=n("9d57"),l=n("9850"),c=n("216a"),u=n("7fae"),h=n("3842"),f=n("944e"),d=a["a"].prototype,p=o["a"].prototype,g=h["v"],m=Math.floor,v=Math.ceil,y=Math.pow,_=Math.log,b=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new o["a"],e._interval=0,e}return Object(u["b"])(e,t),e.prototype.getTicks=function(t){var e=this._originalScale,n=this._extent,r=e.getExtent(),o=p.getTicks.call(this,t);return i["H"](o,(function(t){var e=t.value,i=h["v"](y(this.base,e));return i=e===n[0]&&this._fixMin?w(i,r[0]):i,i=e===n[1]&&this._fixMax?w(i,r[1]):i,{value:i}}),this)},e.prototype.setExtent=function(t,e){var n=this.base;t=_(t)/_(n),e=_(e)/_(n),p.setExtent.call(this,t,e)},e.prototype.getExtent=function(){var t=this.base,e=d.getExtent.call(this);e[0]=y(t,e[0]),e[1]=y(t,e[1]);var n=this._originalScale,i=n.getExtent();return this._fixMin&&(e[0]=w(e[0],i[0])),this._fixMax&&(e[1]=w(e[1],i[1])),e},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=_(t[0])/_(e),t[1]=_(t[1])/_(e),d.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.niceTicks=function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var i=h["r"](n),r=t/n*i;r<=.5&&(i*=10);while(!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0)i*=10;var o=[h["v"](v(e[0]/i)*i),h["v"](m(e[1]/i)*i)];this._interval=i,this._niceExtent=o}},e.prototype.niceExtent=function(t){p.niceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return t=_(t)/_(this.base),f["a"](t,this._extent)},e.prototype.normalize=function(t){return t=_(t)/_(this.base),f["d"](t,this._extent)},e.prototype.scale=function(t){return t=f["e"](t,this._extent),y(this.base,t)},e.type="log",e}(a["a"]),x=b.prototype;function w(t,e){return g(t,h["g"](e))}x.getMinorTicks=p.getMinorTicks,x.getLabel=p.getLabel,a["a"].registerClass(b);var S=b,T=n("ee1a"),O=n("538f");function C(t,e){var n=t.type,r=Object(O["a"])(t,e,t.getExtent()).calculate();t.setBlank(r.isBlank);var o=r.min,a=r.max,l=e.ecModel;if(l&&"time"===n){var c=Object(s["e"])("bar",l),u=!1;if(i["k"](c,(function(t){u=u||t.getBaseAxis()===e.axis})),u){var h=Object(s["d"])(c),f=M(o,a,e,h);o=f.min,a=f.max}}return{extent:[o,a],fixMin:r.minFixed,fixMax:r.maxFixed}}function M(t,e,n,r){var o=n.axis.getExtent(),a=o[1]-o[0],l=Object(s["f"])(r,n.axis);if(void 0===l)return{min:t,max:e};var c=1/0;i["k"](l,(function(t){c=Math.min(t.offset,c)}));var u=-1/0;i["k"](l,(function(t){u=Math.max(t.offset+t.width,u)})),c=Math.abs(c),u=Math.abs(u);var h=c+u,f=e-t,d=1-(c+u)/a,p=f/d-f;return e+=p*(u/h),t-=p*(c/h),{min:t,max:e}}function A(t,e){var n=e,i=C(t,n),r=i.extent,o=n.get("splitNumber");t instanceof S&&(t.base=n.get("logBase"));var a=t.type;t.setExtent(r[0],r[1]),t.niceExtent({splitNumber:o,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:"interval"===a||"time"===a?n.get("minInterval"):null,maxInterval:"interval"===a||"time"===a?n.get("maxInterval"):null});var s=n.get("interval");null!=s&&t.setInterval&&t.setInterval(s)}function D(t,e){if(e=e||t.get("type"),e)switch(e){case"category":return new r["a"]({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new c["a"]({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(a["a"].getClass(e)||o["a"])}}function E(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(n>0&&i>0||n<0&&i<0)}function I(t){var e=t.getLabelModel().get("formatter"),n="category"===t.type?t.scale.getExtent()[0]:null;return"time"===t.scale.type?function(e){return function(n,i){return t.scale.getFormattedLabel(n,i,e)}}(e):"string"===typeof e?function(e){return function(n){var i=t.scale.getLabel(n),r=e.replace("{value}",null!=i?i:"");return r}}(e):"function"===typeof e?function(e){return function(i,r){return null!=n&&(r=i.value-n),e(P(t,i),r,null!=i.level?{level:i.level}:null)}}(e):function(e){return t.scale.getLabel(e)}}function P(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}function L(t){var e=t.model,n=t.scale;if(e.get(["axisLabel","show"])&&!n.isBlank()){var i,o,a=n.getExtent();n instanceof r["a"]?o=n.count():(i=n.getTicks(),o=i.length);var s,l=t.getLabelModel(),c=I(t),u=1;o>40&&(u=Math.ceil(o/40));for(var h=0;h<o;h+=u){var f=i?i[h]:{value:a[0]+h},d=c(f,h),p=l.getTextRect(d),g=k(p,l.get("rotate")||0);s?s.union(g):s=g}return s}}function k(t,e){var n=e*Math.PI/180,i=t.width,r=t.height,o=i*Math.abs(Math.cos(n))+Math.abs(r*Math.sin(n)),a=i*Math.abs(Math.sin(n))+Math.abs(r*Math.cos(n)),s=new l["a"](t.x,t.y,o,a);return s}function j(t){var e=t.get("interval");return null==e?"auto":e}function R(t){return"category"===t.type&&0===j(t.getLabelModel())}function N(t,e){var n={};return i["k"](t.mapDimensionsAll(e),(function(e){n[Object(T["b"])(t,e)]=!0})),i["F"](n)}function B(t,e,n){e&&i["k"](N(e,n),(function(n){var i=e.getApproximateExtent(n);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])}))}},"697e7":function(t,e,n){"use strict";n.r(e),n.d(e,"init",(function(){return ft})),n.d(e,"dispose",(function(){return dt})),n.d(e,"disposeAll",(function(){return pt})),n.d(e,"getInstance",(function(){return gt})),n.d(e,"registerPainter",(function(){return mt})),n.d(e,"version",(function(){return vt}));var i=n("22d1"),r=n("6d8b"),o=n("21a1"),a=n("401b"),s=function(){function t(t,e){this.target=t,this.topTarget=e&&e.topTarget}return t}(),l=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){var e=t.target;while(e&&!e.draggable)e=e.parent;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new s(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(r,o,t),this.handler.dispatchToElement(new s(e,t),"drag",t.event);var a=this.handler.findHover(n,i,e).target,l=this._dropTarget;this._dropTarget=a,e!==a&&(l&&a!==l&&this.handler.dispatchToElement(new s(l,t),"dragleave",t.event),a&&a!==l&&this.handler.dispatchToElement(new s(a,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new s(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new s(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),c=l,u=n("6fd3"),h=n("607d"),f=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},o=0,a=i.length;o<a;o++){var s=i[o],l=h["b"](n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},t.prototype._recognize=function(t){for(var e in g)if(g.hasOwnProperty(e)){var n=g[e](this._track,t);if(n)return n}},t}();function d(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}function p(t){return[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]}var g={pinch:function(t,e){var n=t.length;if(n){var i=(t[n-1]||{}).points,r=(t[n-2]||{}).points||i;if(r&&r.length>1&&i&&i.length>1){var o=d(i)/d(r);!isFinite(o)&&(o=1),e.pinchScale=o;var a=p(i);return e.pinchX=a[0],e.pinchY=a[1],{type:"pinch",target:t[0].target,event:e}}}}},m="silent";function v(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:y}}function y(){h["g"](this.event)}var _=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return Object(o["a"])(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(u["a"]),b=function(){function t(t,e){this.x=t,this.y=e}return t}(),x=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],w=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o._hovered=new b(0,0),o.storage=e,o.painter=n,o.painterRoot=r,i=i||new _,o.proxy=null,o.setHandlerProxy(i),o._draggingMgr=new c(o),o}return Object(o["a"])(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(r["k"](x,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,n=t.zrY,i=T(this,e,n),r=this._hovered,o=r.target;o&&!o.__zr&&(r=this.findHover(r.x,r.y),o=r.target);var a=this._hovered=i?new b(e,n):this.findHover(e,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new b(0,0)},e.prototype.dispatch=function(t,e){var n=this[t];n&&n.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,n){t=t||{};var i=t.target;if(!i||!i.silent){var r="on"+e,o=v(e,t,n);while(i)if(i[r]&&(o.cancelBubble=!!i[r].call(i,o)),i.trigger(e,o),i=i.__hostTarget?i.__hostTarget:i.parent,o.cancelBubble)break;o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(t){"function"===typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)})))}},e.prototype.findHover=function(t,e,n){for(var i=this.storage.getDisplayList(),r=new b(t,e),o=i.length-1;o>=0;o--){var a=void 0;if(i[o]!==n&&!i[o].ignore&&(a=S(i[o],t,e))&&(!r.topTarget&&(r.topTarget=i[o]),a!==m)){r.target=i[o];break}}return r},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new f);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var r=i.type;t.gestureEvent=r;var o=new b;o.target=i.target,this.dispatchToElement(o,r,i.event)}},e}(u["a"]);function S(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){var i=t,r=void 0,o=!1;while(i){if(i.ignoreClip&&(o=!0),!o){var a=i.getClipPath();if(a&&!a.contain(e,n))return!1;i.silent&&(r=!0)}var s=i.__hostTarget;i=s||i.parent}return!r||m}return!1}function T(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}r["k"](["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){w.prototype[t]=function(e){var n,i,r=e.zrX,o=e.zrY,s=T(this,r,o);if("mouseup"===t&&s||(n=this.findHover(r,o),i=n.target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||a["f"](this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}));var O=w,C=n("04f6"),M=n("4bc4"),A=!1;function D(){A||(A=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function E(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var I=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=E}return t.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return!t&&n.length||this.updateDisplayList(e),n},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,r=0,o=e.length;r<o;r++)this._updateAndAddDisplayable(e[r],null,t);n.length=this._displayListLen,i["a"].canvasSupported&&Object(C["a"])(n,E)},t.prototype._updateAndAddDisplayable=function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)e=null;else if(i){e=e?e.slice():[];var r=i,o=t;while(r)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty|=M["a"]),this._updateAndAddDisplayable(l,e,n)}t.__dirty=0}else{var c=t;e&&e.length?c.__clipPaths=e:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(D(),c.z=0),isNaN(c.z2)&&(D(),c.z2=0),isNaN(c.zlevel)&&(D(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var u=t.getDecalElement&&t.getDecalElement();u&&this._updateAndAddDisplayable(u,e,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,e,n);var f=t.getTextContent();f&&this._updateAndAddDisplayable(f,e,n)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var i=r["r"](this._roots,t);i>=0&&this._roots.splice(i,1)}},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),P=I,L=n("98b7"),k=n("06ad"),j=function(t){function e(e){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n.onframe=e.onframe||function(){},n}return Object(o["a"])(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._clipsHead?(this._clipsTail.next=t,t.prev=this._clipsTail,t.next=null,this._clipsTail=t):this._clipsHead=this._clipsTail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,n=t.next;e?e.next=n:this._clipsHead=n,n?n.prev=e:this._clipsTail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){var e=(new Date).getTime()-this._pausedTime,n=e-this._time,i=this._clipsHead;while(i){var r=i.next,o=i.step(e,n);o?(i.ondestroy&&i.ondestroy(),this.removeClip(i),i=r):i=r}this._time=e,t||(this.onframe(n),this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;function e(){t._running&&(Object(L["a"])(e),!t._paused&&t.update())}this._running=!0,Object(L["a"])(e)},e.prototype.start=function(){this._running||(this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){var t=this._clipsHead;while(t){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._clipsHead=this._clipsTail=null},e.prototype.isFinished=function(){return null==this._clipsHead},e.prototype.animate=function(t,e){e=e||{},this.start();var n=new k["b"](t,e.loop);return this.addAnimator(n),n},e}(u["a"]),R=j,N=300,B=i["a"].domSupported,F=function(){var t=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],e=["touchstart","touchend","touchmove"],n={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},i=r["H"](t,(function(t){var e=t.replace("mouse","pointer");return n.hasOwnProperty(e)?e:t}));return{mouse:t,touch:e,pointer:i}}(),z={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},V=!1;function H(t){var e=t.pointerType;return"pen"===e||"touch"===e}function G(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}function U(t){t&&(t.zrByTouch=!0)}function W(t,e){return Object(h["e"])(t.dom,new Y(t,e),!0)}function X(t,e){var n=e,i=!1;while(n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot))n=n.parentNode;return i}var Y=function(){function t(t,e){this.stopPropagation=r["L"],this.stopImmediatePropagation=r["L"],this.preventDefault=r["L"],this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY}return t}(),q={mousedown:function(t){t=Object(h["e"])(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=Object(h["e"])(this.dom,t);var e=this.__mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=Object(h["e"])(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){t=Object(h["e"])(this.dom,t);var e=t.toElement||t.relatedTarget;X(this,e)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){V=!0,t=Object(h["e"])(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){V||(t=Object(h["e"])(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){t=Object(h["e"])(this.dom,t),U(t),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),q.mousemove.call(this,t),q.mousedown.call(this,t)},touchmove:function(t){t=Object(h["e"])(this.dom,t),U(t),this.handler.processGesture(t,"change"),q.mousemove.call(this,t)},touchend:function(t){t=Object(h["e"])(this.dom,t),U(t),this.handler.processGesture(t,"end"),q.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<N&&q.click.call(this,t)},pointerdown:function(t){q.mousedown.call(this,t)},pointermove:function(t){H(t)||q.mousemove.call(this,t)},pointerup:function(t){q.mouseup.call(this,t)},pointerout:function(t){H(t)||q.mouseout.call(this,t)}};r["k"](["click","dblclick","contextmenu"],(function(t){q[t]=function(e){e=Object(h["e"])(this.dom,e),this.trigger(t,e)}}));var Z={pointermove:function(t){H(t)||Z.mousemove.call(this,t)},pointerup:function(t){Z.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function K(t,e){var n=e.domHandlers;i["a"].pointerEventsSupported?r["k"](F.pointer,(function(i){J(e,i,(function(e){n[i].call(t,e)}))})):(i["a"].touchEventsSupported&&r["k"](F.touch,(function(i){J(e,i,(function(r){n[i].call(t,r),G(e)}))})),r["k"](F.mouse,(function(i){J(e,i,(function(r){r=Object(h["c"])(r),e.touching||n[i].call(t,r)}))})))}function $(t,e){function n(n){function i(i){i=Object(h["c"])(i),X(t,i.target)||(i=W(t,i),e.domHandlers[n].call(t,i))}J(e,n,i,{capture:!0})}i["a"].pointerEventsSupported?r["k"](z.pointer,n):i["a"].touchEventsSupported||r["k"](z.mouse,n)}function J(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,Object(h["a"])(t.domTarget,e,n,i)}function Q(t){var e=t.mounted;for(var n in e)e.hasOwnProperty(n)&&Object(h["f"])(t.domTarget,n,e[n],t.listenerOpts[n]);t.mounted={}}var tt=function(){function t(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e}return t}(),et=function(t){function e(e,n){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=e,i.painterRoot=n,i._localHandlerScope=new tt(e,q),B&&(i._globalHandlerScope=new tt(document,Z)),K(i,i._localHandlerScope),i}return Object(o["a"])(e,t),e.prototype.dispose=function(){Q(this._localHandlerScope),B&&Q(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,B&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?$(this,e):Q(e)}},e}(u["a"]),nt=et,it=n("41ef"),rt=n("2cf4"),ot=n("2dc5"),at=!i["a"].canvasSupported,st={},lt={};function ct(t){delete lt[t]}function ut(t){if(!t)return!1;if("string"===typeof t)return Object(it["lum"])(t,1)<rt["b"];if(t.colorStops){for(var e=t.colorStops,n=0,i=e.length,r=0;r<i;r++)n+=Object(it["lum"])(e[r].color,1);return n/=i,n<rt["b"]}return!1}var ht=function(){function t(t,e,n){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var a=new P,s=n.renderer||"canvas";if(at)throw new Error("IE8 support has been dropped since 5.0");if(st[s]||(s=r["F"](st)[0]),!st[s])throw new Error("Renderer '"+s+"' is not imported. Please import it first.");n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var l=new st[s](e,a,n,t);this.storage=a,this.painter=l;var c=i["a"].node||i["a"].worker?null:new nt(l.getViewportRoot(),l.root);this.handler=new O(a,l,c,l.root),this.animation=new R({stage:{update:function(){return o._flush(!0)}}}),this.animation.start()}return t.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh()},t.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=ut(t)},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},t.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},t.prototype.flush=function(){this._flush(!1)},t.prototype._flush=function(t){var e,n=(new Date).getTime();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var i=(new Date).getTime();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},t.prototype.addHover=function(t){},t.prototype.removeHover=function(t){},t.prototype.clearHover=function(){},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},t.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},t.prototype.clearAnimation=function(){this.animation.clear()},t.prototype.getWidth=function(){return this.painter.getWidth()},t.prototype.getHeight=function(){return this.painter.getHeight()},t.prototype.pathToImage=function(t,e){if(this.painter.pathToImage)return this.painter.pathToImage(t,e)},t.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){return this.handler.findHover(t,e)},t.prototype.on=function(t,e,n){return this.handler.on(t,e,n),this},t.prototype.off=function(t,e){this.handler.off(t,e)},t.prototype.trigger=function(t,e){this.handler.trigger(t,e)},t.prototype.clear=function(){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof ot["a"]&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},t.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,ct(this.id)},t}();function ft(t,e){var n=new ht(r["p"](),t,e);return lt[n.id]=n,n}function dt(t){t.dispose()}function pt(){for(var t in lt)lt.hasOwnProperty(t)&&lt[t].dispose();lt={}}function gt(t){return lt[t]}function mt(t,e){st[t]=e}var vt="5.2.1"},"69d5":function(t,e,n){var i=n("cb5a"),r=Array.prototype,o=r.splice;function a(t){var e=this.__data__,n=i(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():o.call(e,n,1),--this.size,!0}t.exports=a},"69f3":function(t,e,n){var i,r,o,a=n("7f9a"),s=n("da84"),l=n("861d"),c=n("9112"),u=n("5135"),h=n("c6cd"),f=n("f772"),d=n("d012"),p=s.WeakMap,g=function(t){return o(t)?r(t):i(t,{})},m=function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}};if(a){var v=h.state||(h.state=new p),y=v.get,_=v.has,b=v.set;i=function(t,e){return e.facade=t,b.call(v,t,e),e},r=function(t){return y.call(v,t)||{}},o=function(t){return _.call(v,t)}}else{var x=f("state");d[x]=!0,i=function(t,e){return e.facade=t,c(t,x,e),e},r=function(t){return u(t,x)?t[x]:{}},o=function(t){return u(t,x)}}t.exports={set:i,get:r,has:o,enforce:g,getterFor:m}},"6a2f":function(t,e,n){"use strict";var i=n("6d8b"),r=n("e0d3"),o=Object(r["o"])();function a(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,d(e,n,t),Object(i["k"])(n,(function(n){Object(i["k"])(e.TRANSFERABLE_METHODS,(function(e){n.wrapMethod(e,Object(i["i"])(s,t))}))})),e.wrapMethod("cloneShallow",Object(i["i"])(c,t)),Object(i["k"])(e.CHANGABLE_METHODS,(function(n){e.wrapMethod(n,Object(i["i"])(l,t))})),Object(i["b"])(n[e.dataType]===e)}function s(t,e){if(f(this)){var n=Object(i["m"])({},o(this).datas);n[this.dataType]=e,d(e,n,t)}else p(e,this.dataType,o(this).mainData,t);return e}function l(t,e){return t.struct&&t.struct.update(),e}function c(t,e){return Object(i["k"])(o(e).datas,(function(n,i){n!==e&&p(n.cloneShallow(),i,e,t)})),e}function u(t){var e=o(this).mainData;return null==t||null==e?e:o(e).datas[t]}function h(){var t=o(this).mainData;return null==t?[{data:t}]:Object(i["H"])(Object(i["F"])(o(t).datas),(function(e){return{type:e,data:o(t).datas[e]}}))}function f(t){return o(t).mainData===t}function d(t,e,n){o(t).datas={},Object(i["k"])(e,(function(e,i){p(e,i,t,n)}))}function p(t,e,n,i){o(n).datas[e]=t,o(t).mainData=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=u,t.getLinkedDataAll=h}e["a"]=a},"6a81":function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcGateFault=e.util.createClass(e.Object,{type:"ecGateFault",text:"断路器_故障",stateProperties:e.Object.prototype.stateProperties.concat(["text","left","top","gate","gateOn"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","left","top","gate","gateOn"]),gateOn:!1,gate:{dotColor:"#fa8814",onColor:"#ff0000",offColor:"#07ef2e"},updateScript:"function(value, item, data, components, dataObj){\n  var dataObj = {\n    Fault: 0,\n    On: 0\n  }\n  dataObj = E_GetObjValue(value, item, data, components, dataObj)\n  //根据得到的值进行判断\n  if(Number(dataObj['Fault'])) {\n    //故障黄色\n    item.set({\n      gateOn: false,\n      stroke: '#ff0'\n    })\n  } else {\n    if(Number(dataObj['On'])) {\n      //合闸红色\n      item.set({\n        gateOn: true,\n        stroke: '#f00'\n      })\n    } else {\n      //分闸绿色\n      item.set({\n        gateOn: false,\n        stroke: '#6BB93F'\n      })\n    }\n  }\n  return true\n}",initialize:function(t){t||(t={}),this.callSuper("initialize",t),this.setCoords()},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",["objectCaching"].concat(t)))},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawSwitch()},drawSwitch:function(){this.ctx.save();var t=this.width/2,e=this.height/1.5;this.ctx.lineWidth=this.strokeWidth,this.gateOn?(this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(-t,0),this.ctx.strokeStyle=this.stroke||this.gate.onColor,this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.moveTo(-t,0),this.ctx.lineTo(e,-e),this.ctx.strokeStyle=this.stroke||this.gate.offColor,this.ctx.stroke()),this.ctx.beginPath(),this.ctx.arc(-t,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle=this.gate.dotColor,this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle=this.gate.dotColor,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}),e.EcGateFault.fromObject=function(t,n){n&&n(new e.EcGateFault(t))},e.EcGateFault.async=!0}).call(this,n("c8ba"))},"6bd4":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]};function r(t,e){if("world"===t){var n=i[e.name];if(n){var r=[n[0],n[1]];e.setCenter(r)}}}},"6cb7":function(t,e,n){"use strict";var i=n("7fae"),r=n("6d8b"),o=n("4319"),a=n("8918"),s=n("625e"),l=n("e0d3"),c=n("f934"),u=Object(l["o"])(),h=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.uid=a["c"]("ec_cpt_model"),r}return Object(i["b"])(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=c["d"](this),i=n?c["f"](t):{},o=e.getTheme();r["I"](t,o.get(this.mainType)),r["I"](t,this.getDefaultOption()),n&&c["h"](t,i,n)},e.prototype.mergeOption=function(t,e){r["I"](this.option,t,!0);var n=c["d"](this);n&&c["h"](this.option,t,n)},e.prototype.optionUpdated=function(t,e){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!Object(s["d"])(t))return t.defaultOption;var e=u(this);if(!e.defaultOption){var n=[],i=t;while(i){var o=i.prototype.defaultOption;o&&n.push(o),i=i.superClass}for(var a={},l=n.length-1;l>=0;l--)a=r["I"](a,n[l],!0);e.defaultOption=a}return e.defaultOption},e.prototype.getReferringComponents=function(t,e){var n=t+"Index",i=t+"Id";return Object(l["v"])(this.ecModel,t,{index:this.get(n,!0),id:this.get(i,!0)},e)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(o["a"]);function f(t){var e=[];return r["k"](h.getClassesByMainType(t),(function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])})),e=r["H"](e,(function(t){return Object(s["f"])(t).main})),"dataset"!==t&&r["r"](e,"dataset")<=0&&e.unshift("dataset"),e}Object(s["e"])(h,o["a"]),Object(s["c"])(h),a["a"](h),a["b"](h,f),e["a"]=h},"6d61":function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("f183"),l=n("2266"),c=n("19aa"),u=n("861d"),h=n("d039"),f=n("1c7e"),d=n("d44e"),p=n("7156");t.exports=function(t,e,n){var g=-1!==t.indexOf("Map"),m=-1!==t.indexOf("Weak"),v=g?"set":"add",y=r[t],_=y&&y.prototype,b=y,x={},w=function(t){var e=_[t];a(_,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return m&&!u(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(m&&!u(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})},S=o(t,"function"!=typeof y||!(m||_.forEach&&!h((function(){(new y).entries().next()}))));if(S)b=n.getConstructor(e,t,g,v),s.REQUIRED=!0;else if(o(t,!0)){var T=new b,O=T[v](m?{}:-0,1)!=T,C=h((function(){T.has(1)})),M=f((function(t){new y(t)})),A=!m&&h((function(){var t=new y,e=5;while(e--)t[v](e,e);return!t.has(-0)}));M||(b=e((function(e,n){c(e,b,t);var i=p(new y,e,b);return void 0!=n&&l(n,i[v],{that:i,AS_ENTRIES:g}),i})),b.prototype=_,_.constructor=b),(C||A)&&(w("delete"),w("has"),g&&w("get")),(A||O)&&w(v),m&&_.clear&&delete _.clear}return x[t]=b,i({global:!0,forced:b!=y},x),d(b,t),m||n.setStrong(b,t,g),b}},"6d8b":function(t,e,n){"use strict";n.d(e,"a",(function(){return g})),n.d(e,"p",(function(){return v})),n.d(e,"G",(function(){return y})),n.d(e,"d",(function(){return _})),n.d(e,"I",(function(){return b})),n.d(e,"J",(function(){return x})),n.d(e,"m",(function(){return w})),n.d(e,"j",(function(){return S})),n.d(e,"f",(function(){return T})),n.d(e,"r",(function(){return O})),n.d(e,"s",(function(){return C})),n.d(e,"K",(function(){return M})),n.d(e,"u",(function(){return A})),n.d(e,"k",(function(){return D})),n.d(e,"H",(function(){return E})),n.d(e,"N",(function(){return I})),n.d(e,"n",(function(){return P})),n.d(e,"o",(function(){return L})),n.d(e,"F",(function(){return k})),n.d(e,"c",(function(){return R})),n.d(e,"i",(function(){return N})),n.d(e,"t",(function(){return B})),n.d(e,"w",(function(){return F})),n.d(e,"C",(function(){return z})),n.d(e,"D",(function(){return V})),n.d(e,"z",(function(){return H})),n.d(e,"A",(function(){return G})),n.d(e,"E",(function(){return W})),n.d(e,"v",(function(){return X})),n.d(e,"x",(function(){return Y})),n.d(e,"y",(function(){return q})),n.d(e,"B",(function(){return Z})),n.d(e,"l",(function(){return K})),n.d(e,"O",(function(){return $})),n.d(e,"P",(function(){return J})),n.d(e,"Q",(function(){return Q})),n.d(e,"S",(function(){return tt})),n.d(e,"M",(function(){return et})),n.d(e,"b",(function(){return nt})),n.d(e,"T",(function(){return it})),n.d(e,"R",(function(){return ot})),n.d(e,"g",(function(){return lt})),n.d(e,"e",(function(){return ct})),n.d(e,"h",(function(){return ut})),n.d(e,"q",(function(){return ht})),n.d(e,"L",(function(){return ft}));var i={"[object Function]":!0,"[object RegExp]":!0,"[object Date]":!0,"[object Error]":!0,"[object CanvasGradient]":!0,"[object CanvasPattern]":!0,"[object Image]":!0,"[object Canvas]":!0},r={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0},o=Object.prototype.toString,a=Array.prototype,s=a.forEach,l=a.filter,c=a.slice,u=a.map,h=function(){}.constructor,f=h?h.prototype:null,d="__proto__",p={};function g(t,e){p[t]=e}var m=2311;function v(){return m++}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!==typeof console&&console.error.apply(console,t)}function _(t){if(null==t||"object"!==typeof t)return t;var e=t,n=o.call(t);if("[object Array]"===n){if(!at(t)){e=[];for(var a=0,s=t.length;a<s;a++)e[a]=_(t[a])}}else if(r[n]){if(!at(t)){var l=t.constructor;if(l.from)e=l.from(t);else{e=new l(t.length);for(a=0,s=t.length;a<s;a++)e[a]=_(t[a])}}}else if(!i[n]&&!at(t)&&!X(t))for(var c in e={},t)t.hasOwnProperty(c)&&c!==d&&(e[c]=_(t[c]));return e}function b(t,e,n){if(!G(e)||!G(t))return n?_(e):t;for(var i in e)if(e.hasOwnProperty(i)&&i!==d){var r=t[i],o=e[i];!G(o)||!G(r)||B(o)||B(r)||X(o)||X(r)||U(o)||U(r)||at(o)||at(r)?!n&&i in t||(t[i]=_(e[i])):b(r,o,n)}return t}function x(t,e){for(var n=t[0],i=1,r=t.length;i<r;i++)n=b(n,t[i],e);return n}function w(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==d&&(t[n]=e[n]);return t}function S(t,e,n){for(var i=k(e),r=0;r<i.length;r++){var o=i[r];(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}return t}var T=function(){return p.createCanvas()};function O(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function C(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.prototype.constructor=t,t.superClass=e}function M(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var o=i[r];"constructor"!==o&&(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}else S(t,e,n)}function A(t){return!!t&&("string"!==typeof t&&"number"===typeof t.length)}function D(t,e,n){if(t&&e)if(t.forEach&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function E(t,e,n){if(!t)return[];if(!e)return tt(t);if(t.map&&t.map===u)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}function I(t,e,n,i){if(t&&e){for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}}function P(t,e,n){if(!t)return[];if(!e)return tt(t);if(t.filter&&t.filter===l)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}function L(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]}function k(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}function j(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return function(){return t.apply(e,n.concat(c.call(arguments)))}}p.createCanvas=function(){return document.createElement("canvas")};var R=f&&F(f.bind)?f.call.bind(f.bind):j;function N(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(c.call(arguments)))}}function B(t){return Array.isArray?Array.isArray(t):"[object Array]"===o.call(t)}function F(t){return"function"===typeof t}function z(t){return"string"===typeof t}function V(t){return"[object String]"===o.call(t)}function H(t){return"number"===typeof t}function G(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function U(t){return!!i[o.call(t)]}function W(t){return!!r[o.call(t)]}function X(t){return"object"===typeof t&&"number"===typeof t.nodeType&&"object"===typeof t.ownerDocument}function Y(t){return null!=t.colorStops}function q(t){return null!=t.image}function Z(t){return"[object RegExp]"===o.call(t)}function K(t){return t!==t}function $(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t.length;n<i;n++)if(null!=t[n])return t[n]}function J(t,e){return null!=t?t:e}function Q(t,e,n){return null!=t?t:null!=e?e:n}function tt(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return c.apply(t,e)}function et(t){if("number"===typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function nt(t,e){if(!t)throw new Error(e)}function it(t){return null==t?null:"function"===typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var rt="__ec_primitive__";function ot(t){t[rt]=!0}function at(t){return t[rt]}var st=function(){function t(e){this.data={};var n=B(e);this.data={};var i=this;function r(t,e){n?i.set(t,e):i.set(e,t)}e instanceof t?e.each(r):e&&D(e,r)}return t.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},t.prototype.set=function(t,e){return this.data[t]=e},t.prototype.each=function(t,e){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(e,this.data[n],n)},t.prototype.keys=function(){return k(this.data)},t.prototype.removeKey=function(t){delete this.data[t]},t}();function lt(t){return new st(t)}function ct(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n}function ut(t,e){var n;if(Object.create)n=Object.create(t);else{var i=function(){};i.prototype=t,n=new i}return e&&w(n,e),n}function ht(t,e){return t.hasOwnProperty(e)}function ft(){}},"6e59":function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcSwitch=e.util.createClass(e.Object,{type:"ecSwitch",stateProperties:e.Object.prototype.stateProperties.concat(["text","fill"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","fill"]),text:"开关",switch:"0",rx:20,ry:20,threshold:0,initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){t.save(),this.switch=+this.text,this.ctx=t,this.callSuper("_render",t);var e=-this.width/2,n=-this.height/2,i=-this.width/4;t.beginPath(),this.switch<this.threshold?t.fillStyle="#f00":t.fillStyle="#13ce66";var r=this.rx?Math.min(this.rx,this.width/2):0,o=this.ry?Math.min(this.ry,this.height/2):0,a=this.width,s=this.height,l=0!==r||0!==o,c=.4477152502;t.moveTo(e+r,n),t.lineTo(e+a-r,n),l&&t.bezierCurveTo(e+a-c*r,n,e+a,n+c*o,e+a,n+o),t.lineTo(e+a,n+s-o),l&&t.bezierCurveTo(e+a,n+s-c*o,e+a-c*r,n+s,e+a-r,n+s),t.lineTo(e+r,n+s),l&&t.bezierCurveTo(e+c*r,n+s,e,n+s-c*o,e,n+s-o),t.lineTo(e,n+o),l&&t.bezierCurveTo(e,n+c*o,e+c*r,n,e+r,n),t.fill(),t.closePath(),t.beginPath(),t.fillStyle="#fff",this.switch<this.threshold?t.arc(i-5,0,15,0*Math.PI/180,360*Math.PI/180):t.arc(5-i,0,15,0*Math.PI/180,360*Math.PI/180),t.fill(),t.closePath(),t.restore()}}),e.EcSwitch.fromObject=function(t,n){n&&n(new e.EcSwitch(t))}}).call(this,n("c8ba"))},"6eeb":function(t,e,n){var i=n("da84"),r=n("9112"),o=n("5135"),a=n("ce4e"),s=n("8925"),l=n("69f3"),c=l.get,u=l.enforce,h=String(String).split("String");(t.exports=function(t,e,n,s){var l,c=!!s&&!!s.unsafe,f=!!s&&!!s.enumerable,d=!!s&&!!s.noTargetGet;"function"==typeof n&&("string"!=typeof e||o(n,"name")||r(n,"name",e),l=u(n),l.source||(l.source=h.join("string"==typeof e?e:""))),t!==i?(c?!d&&t[e]&&(f=!0):delete t[e],f?t[e]=n:r(t,e,n)):f?t[e]=n:a(e,n)})(Function.prototype,"toString",(function(){return"function"==typeof this&&c(this).source||s(this)}))},"6fcd":function(t,e,n){var i=n("50d8"),r=n("d370"),o=n("6747"),a=n("0d24"),s=n("c098"),l=n("73ac"),c=Object.prototype,u=c.hasOwnProperty;function h(t,e){var n=o(t),c=!n&&r(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&l(t),d=n||c||h||f,p=d?i(t.length,String):[],g=p.length;for(var m in t)!e&&!u.call(t,m)||d&&("length"==m||h&&("offset"==m||"parent"==m)||f&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,g))||p.push(m);return p}t.exports=h},"6fd3":function(t,e,n){"use strict";var i=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,n,i){this._$handlers||(this._$handlers={});var r=this._$handlers;if("function"===typeof e&&(i=n,n=e,e=null),!n||!t)return this;var o=this._$eventProcessor;null!=e&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),r[t]||(r[t]=[]);for(var a=0;a<r[t].length;a++)if(r[t][a].h===n)return this;var s={h:n,query:e,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},l=r[t].length-1,c=r[t][l];return c&&c.callAtLast?r[t].splice(l,0,s):r[t].push(s),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,a=i.length,s=0;s<a;s++){var l=i[s];if(!r||!r.filter||null==l.query||r.filter(t,l.query))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,e[0]);break;case 2:l.h.call(l.ctx,e[0],e[1]);break;default:l.h.apply(l.ctx,e);break}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,a=e[o-1],s=i.length,l=0;l<s;l++){var c=i[l];if(!r||!r.filter||null==c.query||r.filter(t,c.query))switch(o){case 0:c.h.call(a);break;case 1:c.h.call(a,e[0]);break;case 2:c.h.call(a,e[0],e[1]);break;default:c.h.apply(a,e.slice(1,o-1));break}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t}();e["a"]=i},7156:function(t,e,n){var i=n("861d"),r=n("d2bb");t.exports=function(t,e,n){var o,a;return r&&"function"==typeof(o=e.constructor)&&o!==n&&i(a=o.prototype)&&a!==n.prototype&&r(t,a),t}},7368:function(t,e,n){"use strict";var i=n("6d8b");function r(t){return"_EC_"+t}var o=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[r(t)]){var i=new a(t,e);return i.hostGraph=this,this.nodes.push(i),n[r(t)]=i,i}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[r(t)]},t.prototype.addEdge=function(t,e,n){var i=this._nodesMap,o=this._edgesMap;if("number"===typeof t&&(t=this.nodes[t]),"number"===typeof e&&(e=this.nodes[e]),t instanceof a||(t=i[r(t)]),e instanceof a||(e=i[r(e)]),t&&e){var l=t.id+"-"+e.id,c=new s(t,e,n);return c.hostGraph=this,this._directed&&(t.outEdges.push(c),e.inEdges.push(c)),t.edges.push(c),t!==e&&e.edges.push(c),this.edges.push(c),o[l]=c,c}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof a&&(t=t.id),e instanceof a&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&t.call(e,n[r],r)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&n[r].node1.dataIndex>=0&&n[r].node2.dataIndex>=0&&t.call(e,n[r],r)},t.prototype.breadthFirstTraverse=function(t,e,n,i){if(e instanceof a||(e=this._nodesMap[r(e)]),e){for(var o="out"===n?"outEdges":"in"===n?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!t.call(i,e,null)){var l=[e];while(l.length){var c=l.shift(),u=c[o];for(s=0;s<u.length;s++){var h=u[s],f=h.node1===c?h.node2:h.node1;if(!f.__visited){if(t.call(i,f,c))return;l.push(f),f.__visited=!0}}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,o=n.length;r<o;r++)n[r].dataIndex=-1;for(r=0,o=t.count();r<o;r++)n[t.getRawIndex(r)].dataIndex=r;e.filterSelf((function(t){var n=i[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0}));for(r=0,o=i.length;r<o;r++)i[r].dataIndex=-1;for(r=0,o=e.count();r<o;r++)i[e.getRawIndex(r)].dataIndex=r},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,i=this.edges,r=0;r<n.length;r++)e.addNode(n[r].id,n[r].dataIndex);for(r=0;r<i.length;r++){var o=i[r];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),a=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.data.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t}(),s=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0)){var e=this.hostGraph,n=e.edgeData.getItemModel(this.dataIndex);return n.getModel(t)}},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t}();function l(t,e){return{getValue:function(n){var i=this[t][e];return i.getStore().get(i.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}i["K"](a,l("hostGraph","data")),i["K"](s,l("hostGraph","edgeData")),e["a"]=o},"73ac":function(t,e,n){var i=n("743f"),r=n("b047"),o=n("99d3"),a=o&&o.isTypedArray,s=a?r(a):i;t.exports=s},7418:function(t,e){e.f=Object.getOwnPropertySymbols},"743f":function(t,e,n){var i=n("3729"),r=n("b218"),o=n("1310"),a="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",f="[object Map]",d="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",_="[object ArrayBuffer]",b="[object DataView]",x="[object Float32Array]",w="[object Float64Array]",S="[object Int8Array]",T="[object Int16Array]",O="[object Int32Array]",C="[object Uint8Array]",M="[object Uint8ClampedArray]",A="[object Uint16Array]",D="[object Uint32Array]",E={};function I(t){return o(t)&&r(t.length)&&!!E[i(t)]}E[x]=E[w]=E[S]=E[T]=E[O]=E[C]=E[M]=E[A]=E[D]=!0,E[a]=E[s]=E[_]=E[l]=E[b]=E[c]=E[u]=E[h]=E[f]=E[d]=E[p]=E[g]=E[m]=E[v]=E[y]=!1,t.exports=I},"746f":function(t,e,n){var i=n("428f"),r=n("5135"),o=n("e538"),a=n("9bf2").f;t.exports=function(t){var e=i.Symbol||(i.Symbol={});r(e,t)||a(e,t,{value:o.f(t)})}},7503:function(t,e,n){"use strict";(function(t){n("99af"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("159b");var e=n("313e"),i=n("bc3a"),r=n.n(i),o=t.fabric||(t.fabric={});o.EcEchartsPie=o.util.createClass(o.Rect,{type:"ecEchartsPie",superType:"element",stateProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),cacheProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e)},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({xAxis:{},yAxis:{},series:[{name:"饼图",type:"pie",radius:"50%",data:[{value:1048,name:"线上"},{value:735,name:"线下"},{value:580,name:"广告"}]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return o.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var i=this.id,r=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=(this.dialog,this.canvas.getZoom()),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*r*f-s)/2,m=(l*a*f-l)/2,v=o.util.makeElement("div",{id:"".concat(i,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(r*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=o.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element),this.getHistoryData()}},getHistoryData:function(){var t=this,e=this.editable,n=this.chartOption,i=this.chartProperty,o=i.format,a=i.count,s=i.interval,l=i.loop,c=i.loopInterval,u=i.list;if(!e&&"history"==o&&u.length){l&&setInterval((function(){f()}),1e3*c);var h=u.map((function(t){return t.name})),f=function(){var e={factory:"DefaultDB",tagName:h.toString(),interval:+s,count:a,IsSum:!0};r.a.get("".concat("/ECONApi","/Real/ScopeHisVal"),{params:e}).then((function(e){var i=e.data.Data,r=[];i&&i.length&&i.forEach((function(t){r.push({name:t.TagName,value:t.Value})})),n.series[0].data=r,t.instance.setOption(n,{replaceMerge:["legend","xAxis","yAxis","series"]})}))};f()}}}),o.EcEchartsPie.fromObject=function(t,e){return e(new o.EcEchartsPie(t.chartOption,t))},o.EcEchartsPie.async=!0}).call(this,n("c8ba"))},"750a":function(t,e,n){var i=n("c869"),r=n("bcdf"),o=n("ac41"),a=1/0,s=i&&1/o(new i([,-0]))[1]==a?function(t){return new i(t)}:r;t.exports=s},7511:function(t,e,n){n("1276"),n("ac1f"),n("159b"),n("a9e3"),n("4de4"),n("1bf2"),n("caad"),n("2532");var i=function(t,e){var n=t.split("."),i=n[0],r=n[n.length-1],o=n[n.length-2],a="";return n.forEach((function(t,e){e<n.length-1&&(e<n.length-2?a+=t+".":a+=t)})),{dev:o,point:r,project:i,tag:a}},r=function(t,e){var n={},i=[],r=0;for(var o in t.forEach((function(t){n[t]=0})),e.forEach((function(t){var e=t.TagName;e in n&&(n[e]=t.TagValue)})),n)i.push(Number(n[o]));return r=Math.max.apply(Math,i),r},o=function(t,e){var n={},i=[],r=0;for(var o in t.forEach((function(t){n[t]=0})),e.forEach((function(t){var e=t.TagName;e in n&&(n[e]=t.TagValue)})),n)i.push(Number(n[o]));return r=Math.min.apply(Math,i),r},a=function(t,e){var n={},i=0;for(var r in t.forEach((function(t){n[t]=0})),e.forEach((function(t){var e=t.TagName;e in n&&(n[e]=t.TagValue)})),n)i+=Number(n[r]);return i},s=function(t,e,n,i){var r={},o=0;return t.forEach((function(t){r[t]=0})),i.forEach((function(t){var e=t.TagName;e in r&&(r[e]=t.TagValue)})),o=Number(r[e])?Number(r[n])?1:2:3,o},l=function(t,e){return e[t]},c=function(t,e,n){var i=0;return n.forEach((function(e){e.TagName===t&&(i=+e.TagValue)})),e[i]},u=function(t,e){var n=0,i=e.filter((function(e){return e.TagName==t}))[0];return i&&(n=Number(i.TagValue)),n},h=function t(e,n){var i=null;return n.forEach((function(n){n.id===e&&(i=n),"group"==n.customType&&n._objects&&n._objects.length&&t(e,n._objects)})),i},f=function(t,e){var n=h(t,e);return n},d=function(t){var e=t.split("."),n=e[0],i=e[e.length-1],r=e[e.length-2],o="";return e.forEach((function(t,n){n<e.length-1&&(n<e.length-2?o+=t+".":o+=t)})),{dev:r,point:i,project:n,tag:o}},p=function(t,e,n,i,r){var o=Reflect.ownKeys(r),a=JSON.parse(JSON.stringify(r)),s=d(e.tag).tag,l=n.filter((function(t){return d(t.TagName).tag==s}));return l.forEach((function(t){var e=d(t.TagName).point;o.includes(e)&&(a[e]=+t.TagValue)})),a},g=function(t,e,n,i,r){var o=[],a=p(t,e,n,i,r);for(var s in a)o.push(Number(a[s]));return Math.max.apply(Math,o)},m=function(t,e,n,i,r){var o=[],a=p(t,e,n,i,r);for(var s in a)o.push(Number(a[s]));return Math.min.apply(Math,o)},v=function(t,e,n,i,r){var o=0,a=p(t,e,n,i,r);for(var s in a)o+=+Number(a[s]);return o};function y(t){return econTagMap.get(t)&&+econTagMap.get(t).TagValue}function _(t){return econTagMap.get(t)}function b(t){return econTagMap.get(t)&&econTagMap.get(t).Unit}function x(t){return econTagMap.get(t)&&econTagMap.get(t).Des}window.ETV=y,window.ETDATA=_,window.ETUNIT=b,window.ETDES=x,window.eTagFilter=i,window.eFindMaxValue=r,window.eFindMinValue=o,window.eFindSumValue=a,window.eFindCompareValue=s,window.eTranslateNumberToText=l,window.eFindTagNameValue=u,window.eFindTagTranslateValueToText=c,window.eFindComponentById=f,window.E_TagFilter=d,window.E_GetObjValue=p,window.E_GetMaxValue=g,window.E_GetMinValue=m,window.E_GetSumValue=v},"76a5":function(t,e,n){"use strict";var i=n("21a1"),r=n("d409"),o=n("dd4f"),a=n("6d8b"),s=n("e86a"),l=n("0da8"),c=n("c7a2"),u=n("9850"),h=n("19eb"),f={fill:"#000"},d=2,p={style:Object(a["j"])({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},h["a"].style)},g=function(t){function e(e){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=f,n.attr(e),n}return Object(i["a"])(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):t.prototype.getLocalTransform.call(this,e)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){this._childCursor=0,y(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new u["a"](0,0,0,0),e=this._children,n=[],i=null,r=0;r<e.length;r++){var o=e[r],a=o.getBoundingRect(),s=o.getLocalTransform(n);s?(t.copy(a),t.applyTransform(s),i=i||t.clone(),i.union(t)):(i=i||a.clone(),i.union(a))}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||f},e.prototype.setTextContent=function(t){throw new Error("Can't attach text on another text")},e.prototype._mergeStyle=function(t,e){if(!e)return t;var n=e.rich,i=t.rich||n&&{};return Object(a["m"])(t,e),n&&i?(this._mergeRich(i,n),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,e){for(var n=Object(a["F"])(e),i=0;i<n.length;i++){var r=n[i];t[r]=t[r]||{},Object(a["m"])(t[r],e[r])}},e.prototype.getAnimationStyleProps=function(){return p},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||s["a"],n=t.padding,i=S(t),a=Object(r["a"])(i,t),l=T(t),c=!!t.backgroundColor,h=a.outerHeight,f=a.lines,p=a.lineHeight,g=this._defaultStyle,m=t.x||0,v=t.y||0,y=t.align||g.align||"left",_=t.verticalAlign||g.verticalAlign||"top",O=m,C=Object(s["c"])(v,a.contentHeight,_);if(l||n){var M=a.width;n&&(M+=n[1]+n[3]);var A=Object(s["b"])(m,M,y),D=Object(s["c"])(v,h,_);l&&this._renderBackground(t,t,A,D,M,h)}C+=p/2,n&&(O=w(m,y,n),"top"===_?C+=n[0]:"bottom"===_&&(C-=n[2]));for(var E=0,I=!1,P=(x("fill"in t?t.fill:(I=!0,g.fill))),L=(b("stroke"in t?t.stroke:c||g.autoStroke&&!I?null:(E=d,g.stroke))),k=t.textShadowBlur>0,j=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),R=a.calculatedLineHeight,N=0;N<f.length;N++){var B=this._getOrCreateChild(o["a"]),F=B.createStyle();B.useStyle(F),F.text=f[N],F.x=O,F.y=C,y&&(F.textAlign=y),F.textBaseline="middle",F.opacity=t.opacity,F.strokeFirst=!0,k&&(F.shadowBlur=t.textShadowBlur||0,F.shadowColor=t.textShadowColor||"transparent",F.shadowOffsetX=t.textShadowOffsetX||0,F.shadowOffsetY=t.textShadowOffsetY||0),L&&(F.stroke=L,F.lineWidth=t.lineWidth||E,F.lineDash=t.lineDash,F.lineDashOffset=t.lineDashOffset||0),P&&(F.fill=P),F.font=e,C+=p,j&&B.setBoundingRect(new u["a"](Object(s["b"])(F.x,t.width,F.textAlign),Object(s["c"])(F.y,R,F.textBaseline),t.width,R))}},e.prototype._updateRichTexts=function(){var t=this.style,e=S(t),n=Object(r["b"])(e,t),i=n.width,o=n.outerWidth,a=n.outerHeight,l=t.padding,c=t.x||0,u=t.y||0,h=this._defaultStyle,f=t.align||h.align,d=t.verticalAlign||h.verticalAlign,p=Object(s["b"])(c,o,f),g=Object(s["c"])(u,a,d),m=p,v=g;l&&(m+=l[3],v+=l[0]);var y=m+i;T(t)&&this._renderBackground(t,t,p,g,o,a);for(var _=!!t.backgroundColor,b=0;b<n.lines.length;b++){var x=n.lines[b],w=x.tokens,O=w.length,C=x.lineHeight,M=x.width,A=0,D=m,E=y,I=O-1,P=void 0;while(A<O&&(P=w[A],!P.align||"left"===P.align))this._placeToken(P,t,C,v,D,"left",_),M-=P.width,D+=P.width,A++;while(I>=0&&(P=w[I],"right"===P.align))this._placeToken(P,t,C,v,E,"right",_),M-=P.width,E-=P.width,I--;D+=(i-(D-m)-(y-E)-M)/2;while(A<=I)P=w[A],this._placeToken(P,t,C,v,D+P.width/2,"center",_),D+=P.width,A++;v+=C}},e.prototype._placeToken=function(t,e,n,i,r,l,c){var h=e.rich[t.styleName]||{};h.text=t.text;var f=t.verticalAlign,p=i+n/2;"top"===f?p=i+t.height/2:"bottom"===f&&(p=i+n-t.height/2);var g=!t.isLineHolder&&T(h);g&&this._renderBackground(h,e,"right"===l?r-t.width:"center"===l?r-t.width/2:r,p-t.height/2,t.width,t.height);var m=!!h.backgroundColor,v=t.textPadding;v&&(r=w(r,l,v),p-=t.height/2-v[0]-t.innerHeight/2);var y=this._getOrCreateChild(o["a"]),_=y.createStyle();y.useStyle(_);var S=this._defaultStyle,O=!1,C=0,M=x("fill"in h?h.fill:"fill"in e?e.fill:(O=!0,S.fill)),A=b("stroke"in h?h.stroke:"stroke"in e?e.stroke:m||c||S.autoStroke&&!O?null:(C=d,S.stroke)),D=h.textShadowBlur>0||e.textShadowBlur>0;_.text=t.text,_.x=r,_.y=p,D&&(_.shadowBlur=h.textShadowBlur||e.textShadowBlur||0,_.shadowColor=h.textShadowColor||e.textShadowColor||"transparent",_.shadowOffsetX=h.textShadowOffsetX||e.textShadowOffsetX||0,_.shadowOffsetY=h.textShadowOffsetY||e.textShadowOffsetY||0),_.textAlign=l,_.textBaseline="middle",_.font=t.font||s["a"],_.opacity=Object(a["Q"])(h.opacity,e.opacity,1),A&&(_.lineWidth=Object(a["Q"])(h.lineWidth,e.lineWidth,C),_.lineDash=Object(a["P"])(h.lineDash,e.lineDash),_.lineDashOffset=e.lineDashOffset||0,_.stroke=A),M&&(_.fill=M);var E=t.contentWidth,I=t.contentHeight;y.setBoundingRect(new u["a"](Object(s["b"])(_.x,E,_.textAlign),Object(s["c"])(_.y,I,_.textBaseline),E,I))},e.prototype._renderBackground=function(t,e,n,i,r,o){var s,u,h=t.backgroundColor,f=t.borderWidth,d=t.borderColor,p=h&&h.image,g=h&&!p,m=t.borderRadius,v=this;if(g||t.lineHeight||f&&d){s=this._getOrCreateChild(c["a"]),s.useStyle(s.createStyle()),s.style.fill=null;var y=s.shape;y.x=n,y.y=i,y.width=r,y.height=o,y.r=m,s.dirtyShape()}if(g){var _=s.style;_.fill=h||null,_.fillOpacity=Object(a["P"])(t.fillOpacity,1)}else if(p){u=this._getOrCreateChild(l["a"]),u.onload=function(){v.dirtyStyle()};var b=u.style;b.image=h.image,b.x=n,b.y=i,b.width=r,b.height=o}if(f&&d){_=s.style;_.lineWidth=f,_.stroke=d,_.strokeOpacity=Object(a["P"])(t.strokeOpacity,1),_.lineDash=t.borderDash,_.lineDashOffset=t.borderDashOffset||0,s.strokeContainThreshold=0,s.hasFill()&&s.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var x=(s||u).style;x.shadowBlur=t.shadowBlur||0,x.shadowColor=t.shadowColor||"transparent",x.shadowOffsetX=t.shadowOffsetX||0,x.shadowOffsetY=t.shadowOffsetY||0,x.opacity=Object(a["Q"])(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";if(t.fontSize||t.fontFamily||t.fontWeight){var n="";n="string"!==typeof t.fontSize||-1===t.fontSize.indexOf("px")&&-1===t.fontSize.indexOf("rem")&&-1===t.fontSize.indexOf("em")?isNaN(+t.fontSize)?"12px":t.fontSize+"px":t.fontSize,e=[t.fontStyle,t.fontWeight,n,t.fontFamily||"sans-serif"].join(" ")}return e&&Object(a["T"])(e)||t.textFont||t.font},e}(h["c"]),m={left:!0,right:1,center:1},v={top:1,bottom:1,middle:1};function y(t){return _(t),Object(a["k"])(t.rich,_),t}function _(t){if(t){t.font=g.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||m[e]?e:"left";var n=t.verticalAlign;"center"===n&&(n="middle"),t.verticalAlign=null==n||v[n]?n:"top";var i=t.padding;i&&(t.padding=Object(a["M"])(t.padding))}}function b(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function x(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function w(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function S(t){var e=t.text;return null!=e&&(e+=""),e}function T(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}e["a"]=g},"76dd":function(t,e,n){var i=n("ce86");function r(t){return null==t?"":i(t)}t.exports=r},7803:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcDevName=e.util.createClass(e.Text,{type:"ecDevName",customLabel:"DevName",MIN_TEXT_WIDTH:220,split:{breakNumber:10},initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t)}}),e.EcDevName.fromObject=function(t,n){n&&n(new e.EcDevName(t.text,t))},e.EcDevName.async=!0}).call(this,n("c8ba"))},7837:function(t,e,n){"use strict";n.d(e,"g",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"c",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"d",(function(){return x})),n.d(e,"f",(function(){return w})),n.d(e,"h",(function(){return S})),n.d(e,"a",(function(){return T}));var i=n("76a5"),r=n("6d8b"),o=n("7d6c"),a=n("e0d3"),s=n("deab"),l={};function c(t,e){for(var n=0;n<o["g"].length;n++){var i=o["g"][n],r=e[i],a=t.ensureState(i);a.style=a.style||{},a.style.text=r}var s=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(s,!0)}function u(t,e,n){var i,a=t.labelFetcher,s=t.labelDataIndex,l=t.labelDimIndex,c=e.normal;a&&(i=a.getFormattedLabel(s,"normal",null,l,c&&c.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==i&&(i=Object(r["w"])(t.defaultText)?t.defaultText(s,t,n):t.defaultText);for(var u={normal:i},h=0;h<o["g"].length;h++){var f=o["g"][h],d=e[f];u[f]=Object(r["P"])(a?a.getFormattedLabel(s,f,null,l,d&&d.get("formatter")):null,i)}return u}function h(t,e,n,a){n=n||l;for(var s=t instanceof i["a"],h=!1,f=0;f<o["a"].length;f++){var g=e[o["a"][f]];if(g&&g.getShallow("show")){h=!0;break}}var m=s?t:t.getTextContent();if(h){s||(m||(m=new i["a"],t.setTextContent(m)),t.stateProxy&&(m.stateProxy=t.stateProxy));var v=u(n,e),y=e.normal,_=!!y.getShallow("show"),b=d(y,a&&a.normal,n,!1,!s);b.text=v.normal,s||t.setTextConfig(p(y,n,!1));for(f=0;f<o["g"].length;f++){var x=o["g"][f];g=e[x];if(g){var S=m.ensureState(x),T=!!Object(r["P"])(g.getShallow("show"),_);if(T!==_&&(S.ignore=!T),S.style=d(g,a&&a[x],n,!0,!s),S.style.text=v[x],!s){var O=t.ensureState(x);O.textConfig=p(g,n,!0)}}}m.silent=!!y.getShallow("silent"),null!=m.style.x&&(b.x=m.style.x),null!=m.style.y&&(b.y=m.style.y),m.ignore=!_,m.useStyle(b),m.dirty(),n.enableTextSetter&&(w(m).setLabelText=function(t){var i=u(n,e,t);c(m,i)})}else m&&(m.ignore=!0);t.dirty()}function f(t,e){e=e||"label";for(var n={normal:t.getModel(e)},i=0;i<o["g"].length;i++){var r=o["g"][i];n[r]=t.getModel([r,e])}return n}function d(t,e,n,i,o){var a={};return g(a,t,n,i,o),e&&Object(r["m"])(a,e),a}function p(t,e,n){e=e||{};var i,o={},a=t.getShallow("rotate"),s=Object(r["P"])(t.getShallow("distance"),n?null:5),l=t.getShallow("offset");return i=t.getShallow("position")||(n?null:"inside"),"outside"===i&&(i=e.defaultOutsidePosition||"top"),null!=i&&(o.position=i),null!=l&&(o.offset=l),null!=a&&(a*=Math.PI/180,o.rotation=a),null!=s&&(o.distance=s),o.outsideFill="inherit"===t.get("color")?e.inheritColor||null:"auto",o}function g(t,e,n,i,r){n=n||l;var o,a=e.ecModel,s=a&&a.option.textStyle,c=m(e);if(c)for(var u in o={},c)if(c.hasOwnProperty(u)){var h=e.getModel(["rich",u]);b(o[u]={},h,s,n,i,r,!1,!0)}o&&(t.rich=o);var f=e.get("overflow");f&&(t.overflow=f);var d=e.get("minMargin");null!=d&&(t.margin=d),b(t,e,s,n,i,r,!0,!1)}function m(t){var e;while(t&&t!==t.ecModel){var n=(t.option||l).rich;if(n){e=e||{};for(var i=Object(r["F"])(n),o=0;o<i.length;o++){var a=i[o];e[a]=1}}t=t.parentModel}return e}var v=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],y=["align","lineHeight","width","height","tag","verticalAlign"],_=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function b(t,e,n,i,o,a,s,c){n=!o&&n||l;var u=i&&i.inheritColor,h=e.getShallow("color"),f=e.getShallow("textBorderColor"),d=Object(r["P"])(e.getShallow("opacity"),n.opacity);"inherit"!==h&&"auto"!==h||(h=u||null),"inherit"!==f&&"auto"!==f||(f=u||null),a||(h=h||n.color,f=f||n.textBorderColor),null!=h&&(t.fill=h),null!=f&&(t.stroke=f);var p=Object(r["P"])(e.getShallow("textBorderWidth"),n.textBorderWidth);null!=p&&(t.lineWidth=p);var g=Object(r["P"])(e.getShallow("textBorderType"),n.textBorderType);null!=g&&(t.lineDash=g);var m=Object(r["P"])(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=m&&(t.lineDashOffset=m),o||null!=d||c||(d=i&&i.defaultOpacity),null!=d&&(t.opacity=d),o||a||null==t.fill&&i.inheritColor&&(t.fill=i.inheritColor);for(var b=0;b<v.length;b++){var x=v[b],w=Object(r["P"])(e.getShallow(x),n[x]);null!=w&&(t[x]=w)}for(b=0;b<y.length;b++){x=y[b],w=e.getShallow(x);null!=w&&(t[x]=w)}if(null==t.verticalAlign){var S=e.getShallow("baseline");null!=S&&(t.verticalAlign=S)}if(!s||!i.disableBox){for(b=0;b<_.length;b++){x=_[b],w=e.getShallow(x);null!=w&&(t[x]=w)}var T=e.getShallow("borderType");null!=T&&(t.borderDash=T),"auto"!==t.backgroundColor&&"inherit"!==t.backgroundColor||!u||(t.backgroundColor=u),"auto"!==t.borderColor&&"inherit"!==t.borderColor||!u||(t.borderColor=u)}}function x(t,e){var n=e&&e.getModel("textStyle");return Object(r["T"])([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var w=Object(a["o"])();function S(t,e,n,i){if(t){var r=w(t);r.prevValue=r.value,r.value=n;var o=e.normal;r.valueAnimation=o.get("valueAnimation"),r.valueAnimation&&(r.precision=o.get("precision"),r.defaultInterpolatedText=i,r.statesModels=e)}}function T(t,e,n,i,o){var l=w(t);if(l.valueAnimation&&l.prevValue!==l.value){var h=l.defaultInterpolatedText,f=Object(r["P"])(l.interpolatedValue,l.prevValue),d=l.value;t.percent=0,(null==l.prevValue?s["c"]:s["h"])(t,{percent:1},i,e,null,p)}function p(i){var r=Object(a["k"])(n,l.precision,f,d,i);l.interpolatedValue=1===i?null:r;var s=u({labelDataIndex:e,labelFetcher:o,defaultText:h?h(r):r+""},l.statesModels,r);c(t,s)}}},7839:function(t,e){t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7948:function(t,e){function n(t,e){var n=-1,i=null==t?0:t.length,r=Array(i);while(++n<i)r[n]=e(t[n],n,t);return r}t.exports=n},"79bc":function(t,e,n){var i=n("0b07"),r=n("2b3e"),o=i(r,"Map");t.exports=o},"7a48":function(t,e,n){var i=n("6044"),r=Object.prototype,o=r.hasOwnProperty;function a(t){var e=this.__data__;return i?void 0!==e[t]:o.call(e,t)}t.exports=a},"7a77":function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},"7a94":function(t,e,n){(function(t){
/*! Fabric.js Copyright 2008-2015, Printio (Juriy Zaytsev, Maxim Chernyak) */
var i=i||{version:"5.2.1"};if(e.fabric=i,"undefined"!==typeof document&&"undefined"!==typeof window)document instanceof("undefined"!==typeof HTMLDocument?HTMLDocument:Document)?i.document=document:i.document=document.implementation.createHTMLDocument(""),i.window=window;else{var r=n(0),o=new r.JSDOM(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;i.document=o.document,i.jsdomImplForWrapper=n(1).implForWrapper,i.nodeCanvas=n(2).Canvas,i.window=o,DOMParser=i.window.DOMParser}if(i.isTouchSupported="ontouchstart"in i.window||"ontouchstart"in i.document||i.window&&i.window.navigator&&i.window.navigator.maxTouchPoints>0,i.isLikelyNode="undefined"!==typeof t&&"undefined"===typeof window,i.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],i.DPI=96,i.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",i.commaWsp="(?:\\s+,?\\s*|,\\s*)",i.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,i.reNonWord=/[ \n\.,;!\?\-]/,i.fontPaths={},i.iMatrix=[1,0,0,1,0,0],i.svgNS="http://www.w3.org/2000/svg",i.perfLimitSizeTotal=2097152,i.maxCacheSideLimit=4096,i.minCacheSideLimit=256,i.charWidthsCache={},i.textureSize=2048,i.disableStyleCopyPaste=!1,i.enableGLFiltering=!0,i.devicePixelRatio=i.window.devicePixelRatio||i.window.webkitDevicePixelRatio||i.window.mozDevicePixelRatio||1,i.browserShadowBlurConstant=1,i.arcToSegmentsCache={},i.boundsOfCurveCache={},i.cachesBoundsOfCurve=!0,i.forceGLPutImageData=!1,i.initFilterBackend=function(){return i.enableGLFiltering&&i.isWebglSupported&&i.isWebglSupported(i.textureSize)?(console.log("max texture size: "+i.maxTextureSize),new i.WebglFilterBackend({tileSize:i.textureSize})):i.Canvas2dFilterBackend?new i.Canvas2dFilterBackend:void 0},"undefined"!==typeof document&&"undefined"!==typeof window&&(window.fabric=i),"undefined"===typeof a)var a={};if(function(t){"use strict";t.modifyEventListener=!1,t.modifySelectors=!1,t.configure=function(e){isFinite(e.modifyEventListener)&&(t.modifyEventListener=e.modifyEventListener),isFinite(e.modifySelectors)&&(t.modifySelectors=e.modifySelectors),!1===p&&t.modifyEventListener&&g(),!1===m&&t.modifySelectors&&v()},t.add=function(t,e,i,r){return n(t,e,i,r,"add")},t.remove=function(t,e,i,r){return n(t,e,i,r,"remove")},t.returnFalse=function(t){return!1},t.stop=function(t){t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0,t.cancelBubbleCount=0)},t.prevent=function(t){t&&(t.preventDefault?t.preventDefault():t.preventManipulation?t.preventManipulation():t.returnValue=!1)},t.cancel=function(e){t.stop(e),t.prevent(e)},t.blur=function(){var t=document.activeElement;if(t){var e=document.activeElement.nodeName;"INPUT"!==e&&"TEXTAREA"!==e&&"true"!==t.contentEditable||t.blur&&t.blur()}},t.getEventSupport=function(t,e){if("string"===typeof t&&(e=t,t=window),e="on"+e,e in t)return!0;if(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&t.removeAttribute){t.setAttribute(e,"");var n="function"===typeof t[e];return"undefined"!==typeof t[e]&&(t[e]=null),t.removeAttribute(e),n}};var e=function(t){if(!t||"object"!==typeof t)return t;var n=new t.constructor;for(var i in t)t[i]&&"object"===typeof t[i]?n[i]=e(t[i]):n[i]=t[i];return n},n=function(o,s,u,p,g,m){if(p=p||{},"[object Object]"===String(o)){var v=o;if(o=v.target,delete v.target,!v.type||!v.listener){for(var y in v){var _=v[y];"function"!==typeof _&&(p[y]=_)}var b={};for(var x in v){y=x.split(",");var w=v[x],S={};for(var T in p)S[T]=p[T];if("function"===typeof w)u=w;else{if("function"!==typeof w.listener)continue;u=w.listener;for(var T in w)"function"!==typeof w[T]&&(S[T]=w[T])}for(var O=0;O<y.length;O++)b[x]=a.add(o,y[O],u,S,g)}return b}for(var x in s=v.type,delete v.type,u=v.listener,delete v.listener,v)p[x]=v[x]}if(o&&s&&u){if("string"===typeof o&&"ready"===s){if(!window.eventjs_stallOnReady){var C=(new Date).getTime(),M=p.timeout,A=p.interval||1e3/60,D=window.setInterval((function(){(new Date).getTime()-C>M&&window.clearInterval(D),document.querySelector(o)&&(window.clearInterval(D),setTimeout(u,1))}),A);return}s="load",o=window}if("string"===typeof o){if(o=document.querySelectorAll(o),0===o.length)return r("Missing target on listener!",arguments);1===o.length&&(o=o[0])}var E,I={};if(o.length>0&&o!==window){for(var P=0,L=o.length;P<L;P++)E=n(o[P],s,u,e(p),g),E&&(I[P]=E);return i(I)}if("string"===typeof s&&(s=s.toLowerCase(),-1!==s.indexOf(" ")?s=s.split(" "):-1!==s.indexOf(",")&&(s=s.split(","))),"string"!==typeof s){if("number"===typeof s.length)for(var k=0,j=s.length;k<j;k++)E=n(o,s[k],u,e(p),g),E&&(I[s[k]]=E);else for(var x in s)E="function"===typeof s[x]?n(o,x,s[x],e(p),g):n(o,x,s[x].listener,e(s[x]),g),E&&(I[x]=E);return i(I)}if(0===s.indexOf("on")&&(s=s.slice(2)),"object"!==typeof o)return r("Target is not defined!",arguments);if("function"!==typeof u)return r("Listener is not a function!",arguments);var R=p.useCapture||!1,N=h(o)+"."+h(u)+"."+(R?1:0);if(t.Gesture&&t.Gesture._gestureHandlers[s]){if(N=s+N,"remove"===g){if(!c[N])return;c[N].remove(),delete c[N]}else if("add"===g){if(c[N])return c[N].add(),c[N];if(p.useCall&&!t.modifyEventListener){var B=u;u=function(t,e){for(var n in e)t[n]=e[n];return B.call(o,t)}}p.gesture=s,p.target=o,p.listener=u,p.fromOverwrite=m,c[N]=t.proxy[s](p)}return c[N]}var F,z=l(s);for(O=0;O<z.length;O++)if(s=z[O],F=s+"."+N,"remove"===g){if(!c[F])continue;o[d](s,u,R),delete c[F]}else if("add"===g){if(c[F])return c[F];o[f](s,u,R),c[F]={id:F,type:s,target:o,listener:u,remove:function(){for(var e=0;e<z.length;e++)t.remove(o,z[e],u,p)}}}return c[F]}},i=function(t){return{remove:function(){for(var e in t)t[e].remove()},add:function(){for(var e in t)t[e].add()}}},r=function(t,e){"undefined"!==typeof console&&"undefined"!==typeof console.error&&console.error(t,e)},o={msPointer:["MSPointerDown","MSPointerMove","MSPointerUp"],touch:["touchstart","touchmove","touchend"],mouse:["mousedown","mousemove","mouseup"]},s={MSPointerDown:0,MSPointerMove:1,MSPointerUp:2,touchstart:0,touchmove:1,touchend:2,mousedown:0,mousemove:1,mouseup:2},l=(function(){t.supports={},window.navigator.msPointerEnabled&&(t.supports.msPointer=!0),t.getEventSupport("touchstart")&&(t.supports.touch=!0),t.getEventSupport("mousedown")&&(t.supports.mouse=!0)}(),function(){return function(e){var n=document.addEventListener?"":"on",i=s[e];if(isFinite(i)){var r=[];for(var a in t.supports)r.push(n+o[a][i]);return r}return[n+e]}}()),c={},u=0,h=function(t){return t===window?"#window":t===document?"#document":(t.uniqueID||(t.uniqueID="e"+u++),t.uniqueID)},f=document.addEventListener?"addEventListener":"attachEvent",d=document.removeEventListener?"removeEventListener":"detachEvent";t.createPointerEvent=function(e,n,i){var r=n.gesture,o=n.target,a=e.changedTouches||t.proxy.getCoords(e);if(a.length){var s=a[0];n.pointers=i?[]:a,n.pageX=s.pageX,n.pageY=s.pageY,n.x=n.pageX,n.y=n.pageY}var l=document.createEvent("Event");for(var c in l.initEvent(r,!0,!0),l.originalEvent=e,n)"target"!==c&&(l[c]=n[c]);var u=l.type;t.Gesture&&t.Gesture._gestureHandlers[u]&&n.oldListener.call(o,l,n,!1)};var p=!1,g=function(){if(window.HTMLElement){var e=function(e){var i=function(i){var r=i+"EventListener",o=e[r];e[r]=function(e,r,a){if(t.Gesture&&t.Gesture._gestureHandlers[e]){var s=a;"object"===typeof a?s.useCall=!0:s={useCall:!0,useCapture:a},n(this,e,r,s,i,!0)}else for(var c=l(e),u=0;u<c.length;u++)o.call(this,c[u],r,a)}};i("add"),i("remove")};navigator.userAgent.match(/Firefox/)?(e(HTMLDivElement.prototype),e(HTMLCanvasElement.prototype)):e(HTMLElement.prototype),e(document),e(window)}},m=!1,v=function(){var t=NodeList.prototype;t.removeEventListener=function(t,e,n){for(var i=0,r=this.length;i<r;i++)this[i].removeEventListener(t,e,n)},t.addEventListener=function(t,e,n){for(var i=0,r=this.length;i<r;i++)this[i].addEventListener(t,e,n)}}}(a),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";t.pointerSetup=function(t,e){t.target=t.target||window,t.doc=t.target.ownerDocument||t.target,t.minFingers=t.minFingers||t.fingers||1,t.maxFingers=t.maxFingers||t.fingers||1/0,t.position=t.position||"relative",delete t.fingers,e=e||{},e.enabled=!0,e.gesture=t.gesture,e.target=t.target,e.env=t.env,a.modifyEventListener&&t.fromOverwrite&&(t.oldListener=t.listener,t.listener=a.createPointerEvent);var n=0,i=0===e.gesture.indexOf("pointer")&&a.modifyEventListener?"pointer":"mouse";return t.oldListener&&(e.oldListener=t.oldListener),e.listener=t.listener,e.proxy=function(n){e.defaultListener=t.listener,t.listener=n,n(t.event,e)},e.add=function(){!0!==e.enabled&&(t.onPointerDown&&a.add(t.target,i+"down",t.onPointerDown),t.onPointerMove&&a.add(t.doc,i+"move",t.onPointerMove),t.onPointerUp&&a.add(t.doc,i+"up",t.onPointerUp),e.enabled=!0)},e.remove=function(){!1!==e.enabled&&(t.onPointerDown&&a.remove(t.target,i+"down",t.onPointerDown),t.onPointerMove&&a.remove(t.doc,i+"move",t.onPointerMove),t.onPointerUp&&a.remove(t.doc,i+"up",t.onPointerUp),e.reset(),e.enabled=!1)},e.pause=function(e){!t.onPointerMove||e&&!e.move||a.remove(t.doc,i+"move",t.onPointerMove),!t.onPointerUp||e&&!e.up||a.remove(t.doc,i+"up",t.onPointerUp),n=t.fingers,t.fingers=0},e.resume=function(e){!t.onPointerMove||e&&!e.move||a.add(t.doc,i+"move",t.onPointerMove),!t.onPointerUp||e&&!e.up||a.add(t.doc,i+"up",t.onPointerUp),t.fingers=n},e.reset=function(){t.tracker={},t.fingers=0},e};var e=a.supports;a.isMouse=!!e.mouse,a.isMSPointer=!!e.touch,a.isTouch=!!e.msPointer,t.pointerStart=function(e,n,i){var r=(e.type||"mousedown").toUpperCase();0===r.indexOf("MOUSE")?(a.isMouse=!0,a.isTouch=!1,a.isMSPointer=!1):0===r.indexOf("TOUCH")?(a.isMouse=!1,a.isTouch=!0,a.isMSPointer=!1):0===r.indexOf("MSPOINTER")&&(a.isMouse=!1,a.isTouch=!1,a.isMSPointer=!0);var o=function(t,e){var n=i.bbox,r=l[e]={};switch(i.position){case"absolute":r.offsetX=0,r.offsetY=0;break;case"differenceFromLast":r.offsetX=t.pageX,r.offsetY=t.pageY;break;case"difference":r.offsetX=t.pageX,r.offsetY=t.pageY;break;case"move":r.offsetX=t.pageX-n.x1,r.offsetY=t.pageY-n.y1;break;default:r.offsetX=n.x1-n.scrollLeft,r.offsetY=n.y1-n.scrollTop;break}var o=t.pageX-r.offsetX,a=t.pageY-r.offsetY;r.rotation=0,r.scale=1,r.startTime=r.moveTime=(new Date).getTime(),r.move={x:o,y:a},r.start={x:o,y:a},i.fingers++};i.event=e,n.defaultListener&&(i.listener=n.defaultListener,delete n.defaultListener);for(var s=!i.fingers,l=i.tracker,c=e.changedTouches||t.getCoords(e),u=c.length,h=0;h<u;h++){var f=c[h],d=f.identifier||1/0;if(i.fingers){if(i.fingers>=i.maxFingers){var p=[];for(var d in i.tracker)p.push(d);return n.identifier=p.join(","),s}for(var g in l){if(l[g].up){delete l[g],o(f,d),i.cancel=!0;break}0}if(l[d])continue;o(f,d)}else l=i.tracker={},n.bbox=i.bbox=t.getBoundingBox(i.target),i.fingers=0,i.cancel=!1,o(f,d)}p=[];for(var d in i.tracker)p.push(d);return n.identifier=p.join(","),s},t.pointerEnd=function(t,e,n,i){for(var r=t.touches||[],o=r.length,a={},s=0;s<o;s++){var l=r[s],c=l.identifier;a[c||1/0]=!0}for(var c in n.tracker){var u=n.tracker[c];a[c]||u.up||(i&&i({pageX:u.pageX,pageY:u.pageY,changedTouches:[{pageX:u.pageX,pageY:u.pageY,identifier:"Infinity"===c?1/0:c}]},"up"),u.up=!0,n.fingers--)}if(0!==n.fingers)return!1;var h=[];for(var c in n.gestureFingers=0,n.tracker)n.gestureFingers++,h.push(c);return e.identifier=h.join(","),!0},t.getCoords=function(e){return"undefined"!==typeof e.pageX?t.getCoords=function(t){return Array({type:"mouse",x:t.pageX,y:t.pageY,pageX:t.pageX,pageY:t.pageY,identifier:t.pointerId||1/0})}:t.getCoords=function(t){var e=document.documentElement;return t=t||window.event,Array({type:"mouse",x:t.clientX+e.scrollLeft,y:t.clientY+e.scrollTop,pageX:t.clientX+e.scrollLeft,pageY:t.clientY+e.scrollTop,identifier:1/0})},t.getCoords(e)},t.getCoord=function(e){if("ontouchstart"in window){var n=0,i=0;t.getCoord=function(t){var e=t.changedTouches;return e&&e.length?{x:n=e[0].pageX,y:i=e[0].pageY}:{x:n,y:i}}}else"undefined"!==typeof e.pageX&&"undefined"!==typeof e.pageY?t.getCoord=function(t){return{x:t.pageX,y:t.pageY}}:t.getCoord=function(t){var e=document.documentElement;return t=t||window.event,{x:t.clientX+e.scrollLeft,y:t.clientY+e.scrollTop}};return t.getCoord(e)};var n=function(t,e){var n=parseFloat(t.getPropertyValue(e),10);return isFinite(n)?n:0};return t.getBoundingBox=function(t){t!==window&&t!==document||(t=document.body);var e={},i=t.getBoundingClientRect();e.width=i.width,e.height=i.height,e.x1=i.left,e.y1=i.top,e.scaleX=i.width/t.offsetWidth||1,e.scaleY=i.height/t.offsetHeight||1,e.scrollLeft=0,e.scrollTop=0;var r=window.getComputedStyle(t),o="border-box"===r.getPropertyValue("box-sizing");if(!1===o){var a=n(r,"border-left-width"),s=n(r,"border-right-width"),l=n(r,"border-bottom-width"),c=n(r,"border-top-width");e.border=[a,s,c,l],e.x1+=a,e.y1+=c,e.width-=s+a,e.height-=l+c}e.x2=e.x1+e.width,e.y2=e.y1+e.height;var u=r.getPropertyValue("position"),h="fixed"===u?t:t.parentNode;while(null!==h){if(h===document.body)break;if(void 0===h.scrollTop)break;r=window.getComputedStyle(h),u=r.getPropertyValue("position");if("absolute"===u);else{if("fixed"===u){e.scrollTop-=h.parentNode.scrollTop,e.scrollLeft-=h.parentNode.scrollLeft;break}e.scrollLeft+=h.scrollLeft,e.scrollTop+=h.scrollTop}h=h.parentNode}return e.scrollBodyLeft=void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,e.scrollBodyTop=void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop,e.scrollLeft-=e.scrollBodyLeft,e.scrollTop-=e.scrollBodyTop,e},function(){var e,n=navigator.userAgent.toLowerCase(),i=-1!==n.indexOf("macintosh");e=i&&-1!==n.indexOf("khtml")?{91:!0,93:!0}:i&&-1!==n.indexOf("firefox")?{224:!0}:{17:!0},(t.metaTrackerReset=function(){a.fnKey=t.fnKey=!1,a.metaKey=t.metaKey=!1,a.escKey=t.escKey=!1,a.ctrlKey=t.ctrlKey=!1,a.shiftKey=t.shiftKey=!1,a.altKey=t.altKey=!1})(),t.metaTracker=function(n){var i="keydown"===n.type;27===n.keyCode&&(a.escKey=t.escKey=i),e[n.keyCode]&&(a.metaKey=t.metaKey=i),a.ctrlKey=t.ctrlKey=n.ctrlKey,a.shiftKey=t.shiftKey=n.shiftKey,a.altKey=t.altKey=n.altKey}}(),t}(a.proxy),"undefined"===typeof a)a={};if(a.MutationObserver=function(){var t=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,e=!t&&function(){var t=document.createElement("p"),e=!1,n=function(){e=!0};if(t.addEventListener)t.addEventListener("DOMAttrModified",n,!1);else{if(!t.attachEvent)return!1;t.attachEvent("onDOMAttrModified",n)}return t.setAttribute("id","target"),e}();return function(n,i){if(t){var r={subtree:!1,attributes:!0},o=new t((function(t){t.forEach((function(t){i.call(t.target,t.attributeName)}))}));o.observe(n,r)}else e?a.add(n,"DOMAttrModified",(function(t){i.call(n,t.attrName)})):"onpropertychange"in document.body&&a.add(n,"propertychange",(function(t){i.call(n,window.event.propertyName)}))}}(),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.click=function(e){e.gesture=e.gesture||"click",e.maxFingers=e.maxFingers||e.fingers||1,e.onPointerDown=function(i){t.pointerStart(i,n,e)&&a.add(e.target,"mouseup",e.onPointerUp)},e.onPointerUp=function(i){if(t.pointerEnd(i,n,e)){a.remove(e.target,"mouseup",e.onPointerUp);var r=i.changedTouches||t.getCoords(i),o=r[0],s=e.bbox,l=t.getBoundingBox(e.target),c=o.pageY-l.scrollBodyTop,u=o.pageX-l.scrollBodyLeft;if(u>s.x1&&c>s.y1&&u<s.x2&&c<s.y2&&s.scrollTop===l.scrollTop){for(var h in e.tracker)break;var f=e.tracker[h];n.x=f.start.x,n.y=f.start.y,e.listener(i,n)}}};var n=t.pointerSetup(e);return n.state="click",a.add(e.target,"mousedown",e.onPointerDown),n},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.click=t.click,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.dbltap=t.dblclick=function(e){e.gesture=e.gesture||"dbltap",e.maxFingers=e.maxFingers||e.fingers||1;var n,i,r,o,s,l=700;e.onPointerDown=function(u){var h=u.changedTouches||t.getCoords(u);n&&!i?(s=h[0],i=(new Date).getTime()-n):(o=h[0],n=(new Date).getTime(),i=0,clearTimeout(r),r=setTimeout((function(){n=0}),l)),t.pointerStart(u,c,e)&&(a.add(e.target,"mousemove",e.onPointerMove).listener(u),a.add(e.target,"mouseup",e.onPointerUp))},e.onPointerMove=function(l){if(n&&!i){var c=l.changedTouches||t.getCoords(l);s=c[0]}var u=e.bbox,h=s.pageX-u.x1,f=s.pageY-u.y1;h>0&&h<u.width&&f>0&&f<u.height&&Math.abs(s.pageX-o.pageX)<=25&&Math.abs(s.pageY-o.pageY)<=25||(a.remove(e.target,"mousemove",e.onPointerMove),clearTimeout(r),n=i=0)},e.onPointerUp=function(o){if(t.pointerEnd(o,c,e)&&(a.remove(e.target,"mousemove",e.onPointerMove),a.remove(e.target,"mouseup",e.onPointerUp)),n&&i){if(i<=l){for(var s in c.state=e.gesture,e.tracker)break;var u=e.tracker[s];c.x=u.start.x,c.y=u.start.y,e.listener(o,c)}clearTimeout(r),n=i=0}};var c=t.pointerSetup(e);return c.state="dblclick",a.add(e.target,"mousedown",e.onPointerDown),c},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.dbltap=t.dbltap,a.Gesture._gestureHandlers.dblclick=t.dblclick,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.dragElement=function(e,n){t.drag({event:n,target:e,position:"move",listener:function(t,n){e.style.left=n.x+"px",e.style.top=n.y+"px",a.prevent(t)}})},t.drag=function(e){e.gesture="drag",e.onPointerDown=function(i){t.pointerStart(i,n,e)&&(e.monitor||(a.add(e.doc,"mousemove",e.onPointerMove),a.add(e.doc,"mouseup",e.onPointerUp))),e.onPointerMove(i,"down")},e.onPointerMove=function(i,r){if(!e.tracker)return e.onPointerDown(i);e.bbox;for(var o=i.changedTouches||t.getCoords(i),a=o.length,s=0;s<a;s++){var l=o[s],c=l.identifier||1/0,u=e.tracker[c];u&&(u.pageX=l.pageX,u.pageY=l.pageY,n.state=r||"move",n.identifier=c,n.start=u.start,n.fingers=e.fingers,"differenceFromLast"===e.position?(n.x=u.pageX-u.offsetX,n.y=u.pageY-u.offsetY,u.offsetX=u.pageX,u.offsetY=u.pageY):(n.x=u.pageX-u.offsetX,n.y=u.pageY-u.offsetY),e.listener(i,n))}},e.onPointerUp=function(i){t.pointerEnd(i,n,e,e.onPointerMove)&&(e.monitor||(a.remove(e.doc,"mousemove",e.onPointerMove),a.remove(e.doc,"mouseup",e.onPointerUp)))};var n=t.pointerSetup(e);return e.event?e.onPointerDown(e.event):(a.add(e.target,"mousedown",e.onPointerDown),e.monitor&&(a.add(e.doc,"mousemove",e.onPointerMove),a.add(e.doc,"mouseup",e.onPointerUp))),n},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.drag=t.drag,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";var e=Math.PI/180,n=function(t,e){var n=0,i=0,r=0;for(var o in e){var a=e[o];a.up||(n+=a.move.x,i+=a.move.y,r++)}return t.x=n/=r,t.y=i/=r,t};return t.gesture=function(i){i.gesture=i.gesture||"gesture",i.minFingers=i.minFingers||i.fingers||2,i.onPointerDown=function(e){var o=i.fingers;if(t.pointerStart(e,r,i)&&(a.add(i.doc,"mousemove",i.onPointerMove),a.add(i.doc,"mouseup",i.onPointerUp)),i.fingers===i.minFingers&&o!==i.fingers){r.fingers=i.minFingers,r.scale=1,r.rotation=0,r.state="start";var s="";for(var l in i.tracker)s+=l;r.identifier=parseInt(s),n(r,i.tracker),i.listener(e,r)}},i.onPointerMove=function(o,a){for(var s=i.bbox,l=i.tracker,c=o.changedTouches||t.getCoords(o),u=c.length,h=0;h<u;h++){var f=c[h],d=f.identifier||1/0,p=l[d];p&&(p.move.x=f.pageX-s.x1,p.move.y=f.pageY-s.y1)}if(!(i.fingers<i.minFingers)){c=[];var g=0,m=0;for(var d in n(r,l),l){f=l[d];if(!f.up){var v=f.start;if(!v.distance){var y=v.x-r.x,_=v.y-r.y;v.distance=Math.sqrt(y*y+_*_),v.angle=Math.atan2(y,_)/e}y=f.move.x-r.x,_=f.move.y-r.y;var b=Math.sqrt(y*y+_*_);0!==v.distance&&(g+=b/v.distance);var x=Math.atan2(y,_)/e,w=(v.angle-x+360)%360-180;f.DEG2=f.DEG1,f.DEG1=w>0?w:-w,"undefined"!==typeof f.DEG2&&(w>0?f.rotation+=f.DEG1-f.DEG2:f.rotation-=f.DEG1-f.DEG2,m+=f.rotation),c.push(f.move)}}r.touches=c,r.fingers=i.fingers,r.scale=g/i.fingers,r.rotation=m/i.fingers,r.state="change",i.listener(o,r)}},i.onPointerUp=function(e){var n=i.fingers;t.pointerEnd(e,r,i)&&(a.remove(i.doc,"mousemove",i.onPointerMove),a.remove(i.doc,"mouseup",i.onPointerUp)),n===i.minFingers&&i.fingers<i.minFingers&&(r.fingers=i.fingers,r.state="end",i.listener(e,r))};var r=t.pointerSetup(i);return a.add(i.target,"mousedown",i.onPointerDown),r},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.gesture=t.gesture,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.pointerdown=t.pointermove=t.pointerup=function(e){if(e.gesture=e.gesture||"pointer",!e.target.isPointerEmitter){var n=!0;e.onPointerDown=function(t){n=!1,i.gesture="pointerdown",e.listener(t,i)},e.onPointerMove=function(t){i.gesture="pointermove",e.listener(t,i,n)},e.onPointerUp=function(t){n=!0,i.gesture="pointerup",e.listener(t,i,!0)};var i=t.pointerSetup(e);return a.add(e.target,"mousedown",e.onPointerDown),a.add(e.target,"mousemove",e.onPointerMove),a.add(e.doc,"mouseup",e.onPointerUp),e.target.isPointerEmitter=!0,i}},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.pointerdown=t.pointerdown,a.Gesture._gestureHandlers.pointermove=t.pointermove,a.Gesture._gestureHandlers.pointerup=t.pointerup,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.shake=function(t){var e={gesture:"devicemotion",acceleration:{},accelerationIncludingGravity:{},target:t.target,listener:t.listener,remove:function(){window.removeEventListener("devicemotion",c,!1)}},n=4,i=1e3,r=200,o=3,a=(new Date).getTime(),s={x:0,y:0,z:0},l={x:{count:0,value:0},y:{count:0,value:0},z:{count:0,value:0}},c=function(c){var u=.8,h=c.accelerationIncludingGravity;if(s.x=u*s.x+(1-u)*h.x,s.y=u*s.y+(1-u)*h.y,s.z=u*s.z+(1-u)*h.z,e.accelerationIncludingGravity=s,e.acceleration.x=h.x-s.x,e.acceleration.y=h.y-s.y,e.acceleration.z=h.z-s.z,"devicemotion"!==t.gesture)for(var f="xyz",d=(new Date).getTime(),p=0,g=f.length;p<g;p++){var m=f[p],v=e.acceleration[m],y=l[m],_=Math.abs(v);if(!(d-a<i)&&_>n){var b=d*v/_,x=Math.abs(b+y.value);y.value&&x<r?(y.value=b,y.count++,y.count===o&&(t.listener(c,e),a=d,y.value=0,y.count=0)):(y.value=b,y.count=1)}}else t.listener(c,e)};if(window.addEventListener)return window.addEventListener("devicemotion",c,!1),e},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.shake=t.shake,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";var e=Math.PI/180;return t.swipe=function(n){n.snap=n.snap||90,n.threshold=n.threshold||1,n.gesture=n.gesture||"swipe",n.onPointerDown=function(e){t.pointerStart(e,i,n)&&(a.add(n.doc,"mousemove",n.onPointerMove).listener(e),a.add(n.doc,"mouseup",n.onPointerUp))},n.onPointerMove=function(e){for(var i=e.changedTouches||t.getCoords(e),r=i.length,o=0;o<r;o++){var a=i[o],s=a.identifier||1/0,l=n.tracker[s];l&&(l.move.x=a.pageX,l.move.y=a.pageY,l.moveTime=(new Date).getTime())}},n.onPointerUp=function(r){if(t.pointerEnd(r,i,n)){var o,s;a.remove(n.doc,"mousemove",n.onPointerMove),a.remove(n.doc,"mouseup",n.onPointerUp);var l={x:0,y:0},c=0,u=0,h=0;for(var f in n.tracker){var d=n.tracker[f],p=d.move.x-d.start.x,g=d.move.y-d.start.y;c+=d.move.x,u+=d.move.y,l.x+=d.start.x,l.y+=d.start.y,h++;var m=Math.sqrt(p*p+g*g),v=d.moveTime-d.startTime,y=Math.atan2(p,g)/e+180,_=v?m/v:0;if("undefined"===typeof s)s=y,o=_;else{if(!(Math.abs(y-s)<=20))return;s=(s+y)/2,o=(o+_)/2}}var b=n.gestureFingers;n.minFingers<=b&&n.maxFingers>=b&&o>n.threshold&&(l.x/=h,l.y/=h,i.start=l,i.x=c/h,i.y=u/h,i.angle=-(((s/n.snap+.5>>0)*n.snap||360)-360),i.velocity=o,i.fingers=b,i.state="swipe",n.listener(r,i))}};var i=t.pointerSetup(n);return a.add(n.target,"mousedown",n.onPointerDown),i},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.swipe=t.swipe,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.longpress=function(e){return e.gesture="longpress",t.tap(e)},t.tap=function(e){var n,i;e.delay=e.delay||500,e.timeout=e.timeout||250,e.driftDeviance=e.driftDeviance||10,e.gesture=e.gesture||"tap",e.onPointerDown=function(o){if(t.pointerStart(o,r,e)){if(n=(new Date).getTime(),a.add(e.doc,"mousemove",e.onPointerMove).listener(o),a.add(e.doc,"mouseup",e.onPointerUp),"longpress"!==e.gesture)return;i=setTimeout((function(){if(!(o.cancelBubble&&++o.cancelBubbleCount>1)){var t=0;for(var n in e.tracker){var i=e.tracker[n];if(!0===i.end)return;if(e.cancel)return;t++}e.minFingers<=t&&e.maxFingers>=t&&(r.state="start",r.fingers=t,r.x=i.start.x,r.y=i.start.y,e.listener(o,r))}}),e.delay)}},e.onPointerMove=function(n){for(var i=e.bbox,r=n.changedTouches||t.getCoords(n),o=r.length,s=0;s<o;s++){var l=r[s],c=l.identifier||1/0,u=e.tracker[c];if(u){var h=l.pageX-i.x1-parseInt(window.scrollX),f=l.pageY-i.y1-parseInt(window.scrollY),d=h-u.start.x,p=f-u.start.y,g=Math.sqrt(d*d+p*p);if(!(h>0&&h<i.width&&f>0&&f<i.height&&g<=e.driftDeviance))return a.remove(e.doc,"mousemove",e.onPointerMove),void(e.cancel=!0)}}},e.onPointerUp=function(o){if(t.pointerEnd(o,r,e)){if(clearTimeout(i),a.remove(e.doc,"mousemove",e.onPointerMove),a.remove(e.doc,"mouseup",e.onPointerUp),o.cancelBubble&&++o.cancelBubbleCount>1)return;if("longpress"===e.gesture)return void("start"===r.state&&(r.state="end",e.listener(o,r)));if(e.cancel)return;if((new Date).getTime()-n>e.timeout)return;var s=e.gestureFingers;e.minFingers<=s&&e.maxFingers>=s&&(r.state="tap",r.fingers=e.gestureFingers,e.listener(o,r))}};var r=t.pointerSetup(e);return a.add(e.target,"mousedown",e.onPointerDown),r},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.tap=t.tap,a.Gesture._gestureHandlers.longpress=t.longpress,t}(a.proxy),"undefined"===typeof a)a={};if("undefined"===typeof a.proxy&&(a.proxy={}),a.proxy=function(t){"use strict";return t.wheelPreventElasticBounce=function(t){t&&("string"===typeof t&&(t=document.querySelector(t)),a.add(t,"wheel",(function(t,e){e.preventElasticBounce(),a.stop(t)})))},t.wheel=function(t){var e,n=t.timeout||150,i=0,r={gesture:"wheel",state:"start",wheelDelta:0,target:t.target,listener:t.listener,preventElasticBounce:function(t){var e=this.target,n=e.scrollTop,i=n+e.offsetHeight,r=e.scrollHeight;(i===r&&this.wheelDelta<=0||0===n&&this.wheelDelta>=0)&&a.cancel(t),a.stop(t)},add:function(){t.target[s](c,o,!1)},remove:function(){t.target[l](c,o,!1)}},o=function(o){o=o||window.event,r.state=i++?"change":"start",r.wheelDelta=o.detail?-20*o.detail:o.wheelDelta,t.listener(o,r),clearTimeout(e),e=setTimeout((function(){i=0,r.state="end",r.wheelDelta=0,t.listener(o,r)}),n)},s=document.addEventListener?"addEventListener":"attachEvent",l=document.removeEventListener?"removeEventListener":"detachEvent",c=a.getEventSupport("mousewheel")?"mousewheel":"DOMMouseScroll";return t.target[s](c,o,!1),r},a.Gesture=a.Gesture||{},a.Gesture._gestureHandlers=a.Gesture._gestureHandlers||{},a.Gesture._gestureHandlers.wheel=t.wheel,t}(a.proxy),"undefined"===typeof s)var s={};function l(t){var e=t.targetCanvas,n=e.width,i=e.height,r=t.destinationWidth,o=t.destinationHeight;n===r&&i===o||(e.width=r,e.height=o)}function c(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1);var o=n.height-i.height;r.drawImage(n,0,o,i.width,i.height,0,0,i.width,i.height)}function u(t,e){var n=e.targetCanvas,i=n.getContext("2d"),r=e.destinationWidth,o=e.destinationHeight,a=r*o*4,s=new Uint8Array(this.imageBuffer,0,a),l=new Uint8ClampedArray(this.imageBuffer,0,a);t.readPixels(0,0,r,o,t.RGBA,t.UNSIGNED_BYTE,s);var c=new ImageData(l,r,o);i.putImageData(c,0,0)}"undefined"===typeof s.proxy&&(s.proxy={}),s.proxy=function(t){"use strict";return t.orientation=function(t){var e={gesture:"orientationchange",previous:null,current:window.orientation,target:t.target,listener:t.listener,remove:function(){window.removeEventListener("orientationchange",n,!1)}},n=function(n){e.previous=e.current,e.current=window.orientation,null===e.previous||e.previous==e.current||t.listener(n,e)};return window.DeviceOrientationEvent&&window.addEventListener("orientationchange",n,!1),e},s.Gesture=s.Gesture||{},s.Gesture._gestureHandlers=s.Gesture._gestureHandlers||{},s.Gesture._gestureHandlers.orientation=t.orientation,t}(s.proxy),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:i.util.array.fill(n,!1)}}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(t,e){var n=function(){e.apply(this,arguments),this.off(t,n)}.bind(this);this.on(t,n)}function r(t,e){if(1===arguments.length)for(var i in t)n.call(this,i,t[i]);else n.call(this,t,e);return this}function o(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"===typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}function a(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter((function(t){return!1!==t})),this}i.Observable={fire:a,on:e,once:r,off:o}}(),i.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)t=e.indexOf(arguments[i]),-1!==t&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return"undefined"===typeof t?this._objects.concat():this._objects.filter((function(e){return e.type===t}))},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t,e){return this._objects.indexOf(t)>-1||!!e&&this._objects.some((function(e){return"function"===typeof e.contains&&e.contains(t,!0)}))},complexity:function(){return this._objects.reduce((function(t,e){return t+=e.complexity?e.complexity():0,t}),0)}},i.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof i.Gradient||this.set(e,new i.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof i.Pattern?n&&n():this.set(e,new i.Pattern(t,n))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"===typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"===typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,r=Math.pow,o=Math.PI/180,a=Math.PI/2;i.util={cos:function(t){if(0===t)return 1;t<0&&(t=-t);var e=t/a;switch(e){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=t/a,n=1;switch(t<0&&(n=-1),e){case 1:return n;case 2:return 0;case 3:return-n}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*o},radiansToDegrees:function(t){return t/o},rotatePoint:function(t,e,n){var r=new i.Point(t.x-e.x,t.y-e.y),o=i.util.rotateVector(r,n);return new i.Point(o.x,o.y).addEquals(e)},rotateVector:function(t,e){var n=i.util.sin(e),r=i.util.cos(e),o=t.x*r-t.y*n,a=t.x*n+t.y*r;return{x:o,y:a}},createVector:function(t,e){return new i.Point(e.x-t.x,e.y-t.y)},calcAngleBetweenVectors:function(t,e){return Math.acos((t.x*e.x+t.y*e.y)/(Math.hypot(t.x,t.y)*Math.hypot(e.x,e.y)))},getHatVector:function(t){return new i.Point(t.x,t.y).multiply(1/Math.hypot(t.x,t.y))},getBisector:function(t,e,n){var r=i.util.createVector(t,e),o=i.util.createVector(t,n),a=i.util.calcAngleBetweenVectors(r,o),s=i.util.calcAngleBetweenVectors(i.util.rotateVector(r,a),o),l=a*(0===s?1:-1)/2;return{vector:i.util.getHatVector(i.util.rotateVector(r,l)),angle:a}},projectStrokeOnPoints:function(t,e,n){var r=[],o=e.strokeWidth/2,a=e.strokeUniform?new i.Point(1/e.scaleX,1/e.scaleY):new i.Point(1,1),s=function(t){var e=o/Math.hypot(t.x,t.y);return new i.Point(t.x*e*a.x,t.y*e*a.y)};return t.length<=1||t.forEach((function(l,c){var u,h,f=new i.Point(l.x,l.y);0===c?(h=t[c+1],u=n?s(i.util.createVector(h,f)).addEquals(f):t[t.length-1]):c===t.length-1?(u=t[c-1],h=n?s(i.util.createVector(u,f)).addEquals(f):t[0]):(u=t[c-1],h=t[c+1]);var d,p,g=i.util.getBisector(f,u,h),m=g.vector,v=g.angle;if("miter"===e.strokeLineJoin&&(d=-o/Math.sin(v/2),p=new i.Point(m.x*d*a.x,m.y*d*a.y),Math.hypot(p.x,p.y)/o<=e.strokeMiterLimit))return r.push(f.add(p)),void r.push(f.subtract(p));d=-o*Math.SQRT2,p=new i.Point(m.x*d*a.x,m.y*d*a.y),r.push(f.add(p)),r.push(f.subtract(p))})),r},transformPoint:function(t,e,n){return n?new i.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new i.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=i.util.transformPoint(t[n],e);var r=[t[0].x,t[1].x,t[2].x,t[3].x],o=i.util.array.min(r),a=i.util.array.max(r),s=a-o,l=[t[0].y,t[1].y,t[2].y,t[3].y],c=i.util.array.min(l),u=i.util.array.max(l),h=u-c;return{left:o,top:c,width:s,height:h}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],r=i.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-r.x,n[5]=-r.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),r=parseFloat(t);switch(e||(e=i.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return r*i.DPI/25.4;case"cm":return r*i.DPI/2.54;case"in":return r*i.DPI;case"pt":return r*i.DPI/72;case"pc":return r*i.DPI/72*12;case"em":return r*e;default:return r}},falseFunction:function(){return!1},getKlass:function(t,e){return t=i.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),i.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"]);break}return e},resolveNamespace:function(e){if(!e)return i;var n,r=e.split("."),o=r.length,a=t||i.window;for(n=0;n<o;++n)a=a[r[n]];return a},loadImage:function(t,e,n,r){if(t){var o=i.util.createImage(),a=function(){e&&e.call(n,o,!1),o=o.onload=o.onerror=null};o.onload=a,o.onerror=function(){i.log("Error loading "+o.src),e&&e.call(n,null,!0),o=o.onload=o.onerror=null},0!==t.indexOf("data")&&void 0!==r&&null!==r&&(o.crossOrigin=r),"data:image/svg"===t.substring(0,14)&&(o.onload=null,i.util.loadImageInDom(o,a)),o.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=i.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),i.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,r){t=t||[];var o=[],a=0,s=t.length;function l(){++a===s&&e&&e(o.filter((function(t){return t})))}s?t.forEach((function(t,e){if(t&&t.type){var a=i.util.getKlass(t.type,n);a.fromObject(t,(function(n,i){i||(o[e]=n),r&&r(t,n,i),l()}))}else l()})):e&&e(o)},enlivenObjectEnlivables:function(t,e,n){var r=i.Object.ENLIVEN_PROPS.filter((function(e){return!!t[e]}));i.util.enlivenObjects(r.map((function(e){return t[e]})),(function(t){var i={};r.forEach((function(n,r){i[n]=t[r],e&&(e[n]=t[r])})),n&&n(i)}))},enlivenPatterns:function(t,e){function n(){++o===a&&e&&e(r)}t=t||[];var r=[],o=0,a=t.length;a?t.forEach((function(t,e){t&&t.source?new i.Pattern(t,(function(t){r[e]=t,n()})):(r[e]=t,n())})):e&&e(r)},groupSVGElements:function(t,e,n){var r;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),r=new i.Group(t,e),"undefined"!==typeof n&&(r.sourcePath=n),r)},populateWithProperties:function(t,e,n){if(n&&Array.isArray(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},createCanvasElement:function(){return i.document.createElement("canvas")},copyCanvasElement:function(t){var e=i.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return i.document.createElement("img")},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var i=n(t[1],t[0]),a=r(t[0],2)+r(t[1],2),s=e(a),l=(t[0]*t[3]-t[2]*t[1])/s,c=n(t[0]*t[2]+t[1]*t[3],a);return{angle:i/o,scaleX:s,scaleY:l,skewX:c/o,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return i.iMatrix.concat();var e=i.util.degreesToRadians(t.angle),n=i.util.cos(e),r=i.util.sin(e);return[n,r,-r,n,0,0]},calcDimensionsMatrix:function(t){var e="undefined"===typeof t.scaleX?1:t.scaleX,n="undefined"===typeof t.scaleY?1:t.scaleY,r=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],o=i.util.multiplyTransformMatrices,a=i.util.degreesToRadians;return t.skewX&&(r=o(r,[1,0,Math.tan(a(t.skewX)),1],!0)),t.skewY&&(r=o(r,[1,Math.tan(a(t.skewY)),0,1],!0)),r},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=i.util.multiplyTransformMatrices;return t.angle&&(e=n(e,i.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,i.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,o,a=!0,s=t.getImageData(e,n,2*i||1,2*i||1),l=s.data.length;for(r=3;r<l;r+=4)if(o=s.data[r],a=o<=0,!1===a)break;return s=null,a},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i="Mid",r="Mid",o=t.split(" ");return o&&o.length&&(n=o.pop(),"meet"!==n&&"slice"!==n?(e=n,n="meet"):o.length&&(e=o.pop())),i="none"!==e?e.slice(1,4):"none",r="none"!==e?e.slice(5,8):"none",{meetOrSlice:n,alignX:i,alignY:r}},clearFabricFontCache:function(t){t=(t||"").toLowerCase(),t?i.charWidthsCache[t]&&delete i.charWidthsCache[t]:i.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map((function(t){return i.util.toFixed(t,i.Object.NUM_FRACTION_DIGITS)})).join(" ")+")"},removeTransformFromObject:function(t,e){var n=i.util.invertTransform(e),r=i.util.multiplyTransformMatrices(n,t.calcOwnMatrix());i.util.applyTransformToObject(t,r)},addTransformToObject:function(t,e){i.util.applyTransformToObject(t,i.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var n=i.util.qrDecompose(e),r=new i.Point(n.translateX,n.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(r,"center","center")},sizeAfterTransform:function(t,e,n){var r=t/2,o=e/2,a=[{x:-r,y:-o},{x:r,y:-o},{x:-r,y:o},{x:r,y:o}],s=i.util.calcDimensionsMatrix(n),l=i.util.makeBoundingBoxFromPoints(a,s);return{x:l.width,y:l.height}},mergeClipPaths:function(t,e){var n=t,r=e;n.inverted&&!r.inverted&&(n=e,r=t),i.util.applyTransformToObject(r,i.util.multiplyTransformMatrices(i.util.invertTransform(n.calcTransformMatrix()),r.calcTransformMatrix()));var o=n.inverted&&r.inverted;return o&&(n.inverted=r.inverted=!1),new i.Group([n],{clipPath:r,inverted:o})}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function r(t,e,n,r,o,a,s,l,c,u,h){var f=i.util.cos(t),d=i.util.sin(t),p=i.util.cos(e),g=i.util.sin(e),m=n*o*p-r*a*g+s,v=r*o*p+n*a*g+l,y=u+c*(-n*o*d-r*a*f),_=h+c*(-r*o*d+n*a*f),b=m+c*(n*o*g+r*a*p),x=v+c*(r*o*g-n*a*p);return["C",y,_,b,x,m,v]}function o(t,e,n,o,s,l,c){var u=Math.PI,h=c*u/180,f=i.util.sin(h),d=i.util.cos(h),p=0,g=0;n=Math.abs(n),o=Math.abs(o);var m=-d*t*.5-f*e*.5,v=-d*e*.5+f*t*.5,y=n*n,_=o*o,b=v*v,x=m*m,w=y*_-y*b-_*x,S=0;if(w<0){var T=Math.sqrt(1-w/(y*_));n*=T,o*=T}else S=(s===l?-1:1)*Math.sqrt(w/(y*b+_*x));var O=S*n*v/o,C=-S*o*m/n,M=d*O-f*C+.5*t,A=f*O+d*C+.5*e,D=a(1,0,(m-O)/n,(v-C)/o),E=a((m-O)/n,(v-C)/o,(-m-O)/n,(-v-C)/o);0===l&&E>0?E-=2*u:1===l&&E<0&&(E+=2*u);for(var I=Math.ceil(Math.abs(E/u*2)),P=[],L=E/I,k=8/3*Math.sin(L/4)*Math.sin(L/4)/Math.sin(L/2),j=D+L,R=0;R<I;R++)P[R]=r(D,j,d,f,n,o,M,A,k,p,g),p=P[R][5],g=P[R][6],D=j,j+=L;return P}function a(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return o>=r?o-r:2*Math.PI-(r-o)}function s(e,n,r,o,a,s,l,c){var u;if(i.cachesBoundsOfCurve&&(u=t.call(arguments),i.boundsOfCurveCache[u]))return i.boundsOfCurveCache[u];var h,f,d,p,g,m,v,y,_=Math.sqrt,b=Math.min,x=Math.max,w=Math.abs,S=[],T=[[],[]];f=6*e-12*r+6*a,h=-3*e+9*r-9*a+3*l,d=3*r-3*e;for(var O=0;O<2;++O)if(O>0&&(f=6*n-12*o+6*s,h=-3*n+9*o-9*s+3*c,d=3*o-3*n),w(h)<1e-12){if(w(f)<1e-12)continue;p=-d/f,0<p&&p<1&&S.push(p)}else v=f*f-4*d*h,v<0||(y=_(v),g=(-f+y)/(2*h),0<g&&g<1&&S.push(g),m=(-f-y)/(2*h),0<m&&m<1&&S.push(m));var C,M,A,D=S.length,E=D;while(D--)p=S[D],A=1-p,C=A*A*A*e+3*A*A*p*r+3*A*p*p*a+p*p*p*l,T[0][D]=C,M=A*A*A*n+3*A*A*p*o+3*A*p*p*s+p*p*p*c,T[1][D]=M;T[0][E]=e,T[1][E]=n,T[0][E+1]=l,T[1][E+1]=c;var I=[{x:b.apply(null,T[0]),y:b.apply(null,T[1])},{x:x.apply(null,T[0]),y:x.apply(null,T[1])}];return i.cachesBoundsOfCurve&&(i.boundsOfCurveCache[u]=I),I}function l(t,e,n){for(var i=n[1],r=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=o(c-t,u-e,i,r,s,l,a),f=0,d=h.length;f<d;f++)h[f][1]+=t,h[f][2]+=e,h[f][3]+=t,h[f][4]+=e,h[f][5]+=t,h[f][6]+=e;return h}function c(t){var e,n,i,r,o,a,s=0,c=0,u=t.length,h=0,f=0,d=[];for(n=0;n<u;++n){switch(i=!1,e=t[n].slice(0),e[0]){case"l":e[0]="L",e[1]+=s,e[2]+=c;case"L":s=e[1],c=e[2];break;case"h":e[1]+=s;case"H":e[0]="L",e[2]=c,s=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=s,e[2]=c;break;case"m":e[0]="M",e[1]+=s,e[2]+=c;case"M":s=e[1],c=e[2],h=e[1],f=e[2];break;case"c":e[0]="C",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c,e[5]+=s,e[6]+=c;case"C":o=e[3],a=e[4],s=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c;case"S":"C"===r?(o=2*s-o,a=2*c-a):(o=s,a=c),s=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=o,e[2]=a,o=e[3],a=e[4];break;case"q":e[0]="Q",e[1]+=s,e[2]+=c,e[3]+=s,e[4]+=c;case"Q":o=e[1],a=e[2],s=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=s,e[2]+=c;case"T":"Q"===r?(o=2*s-o,a=2*c-a):(o=s,a=c),e[0]="Q",s=e[1],c=e[2],e[1]=o,e[2]=a,e[3]=s,e[4]=c;break;case"a":e[0]="A",e[6]+=s,e[7]+=c;case"A":i=!0,d=d.concat(l(s,c,e)),s=e[6],c=e[7];break;case"z":case"Z":s=h,c=f;break;default:}i||d.push(e),r=e[0]}return d}function u(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}function h(t){return t*t*t}function f(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function p(t){return(1-t)*(1-t)*(1-t)}function g(t,e,n,i,r,o,a,s){return function(l){var c=h(l),u=f(l),g=d(l),m=p(l);return{x:a*c+r*u+n*g+t*m,y:s*c+o*u+i*g+e*m}}}function m(t,e,n,i,r,o,a,s){return function(l){var c=1-l,u=3*c*c*(n-t)+6*c*l*(r-n)+3*l*l*(a-r),h=3*c*c*(i-e)+6*c*l*(o-i)+3*l*l*(s-o);return Math.atan2(h,u)}}function v(t){return t*t}function y(t){return 2*t*(1-t)}function _(t){return(1-t)*(1-t)}function b(t,e,n,i,r,o){return function(a){var s=v(a),l=y(a),c=_(a);return{x:r*s+n*l+t*c,y:o*s+i*l+e*c}}}function x(t,e,n,i,r,o){return function(a){var s=1-a,l=2*s*(n-t)+2*a*(r-n),c=2*s*(i-e)+2*a*(o-i);return Math.atan2(c,l)}}function w(t,e,n){var i,r,o={x:e,y:n},a=0;for(r=1;r<=100;r+=1)i=t(r/100),a+=u(o.x,o.y,i.x,i.y),o=i;return a}function S(t,e){var n,i,r,o=0,a=0,s=t.iterator,l={x:t.x,y:t.y},c=.01,h=t.angleFinder;while(a<e&&c>1e-4)n=s(o),r=o,i=u(l.x,l.y,n.x,n.y),i+a>e?(o-=c,c/=2):(l=n,o+=c,a+=i);return n.angle=h(r),n}function T(t){for(var e,n,i,r,o=0,a=t.length,s=0,l=0,c=0,h=0,f=[],d=0;d<a;d++){switch(e=t[d],i={x:s,y:l,command:e[0]},e[0]){case"M":i.length=0,c=s=e[1],h=l=e[2];break;case"L":i.length=u(s,l,e[1],e[2]),s=e[1],l=e[2];break;case"C":n=g(s,l,e[1],e[2],e[3],e[4],e[5],e[6]),r=m(s,l,e[1],e[2],e[3],e[4],e[5],e[6]),i.iterator=n,i.angleFinder=r,i.length=w(n,s,l),s=e[5],l=e[6];break;case"Q":n=b(s,l,e[1],e[2],e[3],e[4]),r=x(s,l,e[1],e[2],e[3],e[4]),i.iterator=n,i.angleFinder=r,i.length=w(n,s,l),s=e[3],l=e[4];break;case"Z":case"z":i.destX=c,i.destY=h,i.length=u(s,l,c,h),s=c,l=h;break}o+=i.length,f.push(i)}return f.push({length:o,x:s,y:l}),f}function O(t,e,n){n||(n=T(t));var r=0;while(e-n[r].length>0&&r<n.length-2)e-=n[r].length,r++;var o,a=n[r],s=e/a.length,l=a.command,c=t[r];switch(l){case"M":return{x:a.x,y:a.y,angle:0};case"Z":case"z":return o=new i.Point(a.x,a.y).lerp(new i.Point(a.destX,a.destY),s),o.angle=Math.atan2(a.destY-a.y,a.destX-a.x),o;case"L":return o=new i.Point(a.x,a.y).lerp(new i.Point(c[1],c[2]),s),o.angle=Math.atan2(c[2]-a.y,c[1]-a.x),o;case"C":return S(a,e);case"Q":return S(a,e)}}function C(t){var r,o,a,s,l,c=[],u=[],h=i.rePathCommand,f="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+f+")"+i.commaWsp,p="([01])"+i.commaWsp+"?",g=d+"?"+d+"?"+d+p+p+d+"?("+f+")",m=new RegExp(g,"g");if(!t||!t.match)return c;l=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi);for(var v,y=0,_=l.length;y<_;y++){r=l[y],s=r.slice(1).trim(),u.length=0;var b=r.charAt(0);if(v=[b],"a"===b.toLowerCase())for(var x;x=m.exec(s);)for(var w=1;w<x.length;w++)u.push(x[w]);else while(a=h.exec(s))u.push(a[0]);w=0;for(var S=u.length;w<S;w++)o=parseFloat(u[w]),isNaN(o)||v.push(o);var T=e[b.toLowerCase()],O=n[b]||b;if(v.length-1>T)for(var C=1,M=v.length;C<M;C+=T)c.push([b].concat(v.slice(C,C+T))),b=O;else c.push(v)}return c}function M(t,e){var n,r=[],o=new i.Point(t[0].x,t[0].y),a=new i.Point(t[1].x,t[1].y),s=t.length,l=1,c=0,u=s>2;for(e=e||0,u&&(l=t[2].x<a.x?-1:t[2].x===a.x?0:1,c=t[2].y<a.y?-1:t[2].y===a.y?0:1),r.push(["M",o.x-l*e,o.y-c*e]),n=1;n<s;n++){if(!o.eq(a)){var h=o.midPointFrom(a);r.push(["Q",o.x,o.y,h.x,h.y])}o=t[n],n+1<t.length&&(a=t[n+1])}return u&&(l=o.x>t[n-2].x?1:o.x===t[n-2].x?0:-1,c=o.y>t[n-2].y?1:o.y===t[n-2].y?0:-1),r.push(["L",o.x+l*e,o.y+c*e]),r}function A(t,e,n){return n&&(e=i.util.multiplyTransformMatrices(e,[1,0,0,1,-n.x,-n.y])),t.map((function(t){for(var n=t.slice(0),r={},o=1;o<t.length-1;o+=2)r.x=t[o],r.y=t[o+1],r=i.util.transformPoint(r,e),n[o]=r.x,n[o+1]=r.y;return n}))}i.util.joinPath=function(t){return t.map((function(t){return t.join(" ")})).join(" ")},i.util.parsePath=C,i.util.makePathSimpler=c,i.util.getSmoothPathFromPoints=M,i.util.getPathSegmentsInfo=T,i.util.getBoundsOfCurve=s,i.util.getPointOnPath=O,i.util.transformPath=A}(),function(){var t=Array.prototype.slice;function e(e,n){for(var i=t.call(arguments,2),r=[],o=0,a=e.length;o<a;o++)r[o]=i.length?e[o][n].apply(e[o],i):e[o][n].call(e[o]);return r}function n(t,e){return a(t,e,(function(t,e){return t>=e}))}function r(t,e){return a(t,e,(function(t,e){return t<e}))}function o(t,e){var n=t.length;while(n--)t[n]=e;return t}function a(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)while(i--)n(t[i][e],r)&&(r=t[i][e]);else while(i--)n(t[i],r)&&(r=t[i]);return r}}i.util.array={fill:o,invoke:e,min:r,max:n}}(),function(){function t(e,n,r){if(r)if(!i.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var o=0,a=n.length;o<a;o++)e[o]=t({},n[o],r)}else if(n&&"object"===typeof n)for(var s in n)"canvas"===s||"group"===s?e[s]=null:n.hasOwnProperty(s)&&(e[s]=t({},n[s],r));else e=n;else for(var s in n)e[s]=n[s];return e}function e(e,n){return t({},e,n)}i.util.object={extend:t,clone:e},i.util.object.extend(i.util,i.Observable)}(),function(){function t(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function n(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r(t){var e,n=0,i=[];for(n=0,e;n<t.length;n++)!1!==(e=o(t,n))&&i.push(e);return i}function o(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}i.util.string={camelize:t,capitalize:e,escapeXml:n,graphemeSplit:r}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),r=function(t,e,i){for(var r in e)r in t.prototype&&"function"===typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?t.prototype[r]=function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(r):t.prototype[r]=e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function o(){}function a(e){var n=null,i=this;while(i.constructor.superclass){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}function s(){var n=null,i=t.call(arguments,0);function s(){this.initialize.apply(this,arguments)}"function"===typeof i[0]&&(n=i.shift()),s.superclass=n,s.subclasses=[],n&&(o.prototype=n.prototype,s.prototype=new o,n.subclasses.push(s));for(var l=0,c=i.length;l<c;l++)r(s,i[l],n);return s.prototype.initialize||(s.prototype.initialize=e),s.prototype.constructor=s,s.prototype.callSuper=a,s}i.util.createClass=s}(),function(){var t=!!i.document.createElement("div").attachEvent,e=["touchstart","touchmove","touchend"];function n(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}i.util.addListener=function(e,n,i,r){e&&e.addEventListener(n,i,!t&&r)},i.util.removeListener=function(e,n,i,r){e&&e.removeEventListener(n,i,!t&&r)},i.util.getPointer=function(t){var e=t.target,r=i.util.getScrollLeftTop(e),o=n(t);return{x:o.clientX+r.left,y:o.clientY+r.top}},i.util.isTouchEvent=function(t){return e.indexOf(t.type)>-1||"touch"===t.pointerType}}(),function(){function t(t,e){var n=t.style;if(!n)return t;if("string"===typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?a(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)if("opacity"===i)a(t,e[i]);else{var r="float"===i||"cssFloat"===i?"undefined"===typeof n.styleFloat?"cssFloat":"styleFloat":i;n[r]=e[i]}return t}var e=i.document.createElement("div"),n="string"===typeof e.style.opacity,r="string"===typeof e.style.filter,o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(t){return t};n?a=function(t,e){return t.style.opacity=e,t}:r&&(a=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),o.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(o,e)):n.filter+=" alpha(opacity="+100*e+")",t}),i.util.setStyle=t}(),function(){var t=Array.prototype.slice;function e(t){return"string"===typeof t?i.document.getElementById(t):t}var n,r,o=function(e){return t.call(e,0)};try{n=o(i.document.childNodes)instanceof Array}catch(p){}function a(t,e){var n=i.document.createElement(t);for(var r in e)"class"===r?n.className=e[r]:"for"===r?n.htmlFor=e[r]:n.setAttribute(r,e[r]);return n}function s(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function l(t,e,n){return"string"===typeof e&&(e=a(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e}function c(t){var e=0,n=0,r=i.document.documentElement,o=i.document.body||{scrollLeft:0,scrollTop:0};while(t&&(t.parentNode||t.host))if(t=t.parentNode||t.host,t===i.document?(e=o.scrollLeft||r.scrollLeft||0,n=o.scrollTop||r.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1===t.nodeType&&"fixed"===t.style.position)break;return{left:e,top:n}}function u(t){var e,n,i=t&&t.ownerDocument,o={left:0,top:0},a={left:0,top:0},s={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return a;for(var l in s)a[s[l]]+=parseInt(r(t,l),10)||0;return e=i.documentElement,"undefined"!==typeof t.getBoundingClientRect&&(o=t.getBoundingClientRect()),n=c(t),{left:o.left+n.left-(e.clientLeft||0)+a.left,top:o.top+n.top-(e.clientTop||0)+a.top}}function h(t){var e=i.jsdomImplForWrapper(t);return e._canvas||e._image}function f(t){if(i.isLikelyNode){var e=i.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}function d(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e}n||(o=function(t){var e=new Array(t.length),n=t.length;while(n--)e[n]=t[n];return e}),r=i.document.defaultView&&i.document.defaultView.getComputedStyle?function(t,e){var n=i.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){var t=i.document.documentElement.style,e="userSelect"in t?"userSelect":"MozUserSelect"in t?"MozUserSelect":"WebkitUserSelect"in t?"WebkitUserSelect":"KhtmlUserSelect"in t?"KhtmlUserSelect":"";function n(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=i.util.falseFunction),e?t.style[e]="none":"string"===typeof t.unselectable&&(t.unselectable="on"),t}function r(t){return"undefined"!==typeof t.onselectstart&&(t.onselectstart=null),e?t.style[e]="":"string"===typeof t.unselectable&&(t.unselectable=""),t}i.util.makeElementUnselectable=n,i.util.makeElementSelectable=r}(),i.util.setImageSmoothing=d,i.util.getById=e,i.util.toArray=o,i.util.addClass=s,i.util.makeElement=a,i.util.wrapElement=l,i.util.getScrollLeftTop=c,i.util.getElementOffset=u,i.util.getNodeCanvas=h,i.util.cleanUpJsdomNode=f}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function n(n,r){r||(r={});var o=r.method?r.method.toUpperCase():"GET",a=r.onComplete||function(){},s=new i.window.XMLHttpRequest,l=r.body||r.parameters;return s.onreadystatechange=function(){4===s.readyState&&(a(s),s.onreadystatechange=e)},"GET"===o&&(l=null,"string"===typeof r.parameters&&(n=t(n,r.parameters))),s.open(o,n,!0),"POST"!==o&&"PUT"!==o||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(l),s}i.util.request=n}(),i.log=console.log,i.warn=console.warn,function(){var t=i.util.object.extend,e=i.util.object.clone,n=[];function r(){return!1}function o(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}function a(n){n||(n={});var a,s=!1,l=function(){var t=i.runningAnimations.indexOf(a);return t>-1&&i.runningAnimations.splice(t,1)[0]};return a=t(e(n),{cancel:function(){return s=!0,l()},currentValue:"startValue"in n?n.startValue:0,completionRate:0,durationRate:0}),i.runningAnimations.push(a),c((function(t){var e,i=t||+new Date,u=n.duration||500,h=i+u,f=n.onChange||r,d=n.abort||r,p=n.onComplete||r,g=n.easing||o,m="startValue"in n&&n.startValue.length>0,v="startValue"in n?n.startValue:0,y="endValue"in n?n.endValue:100,_=n.byValue||(m?v.map((function(t,e){return y[e]-v[e]})):y-v);n.onStart&&n.onStart(),function t(n){e=n||+new Date;var r=e>h?u:e-i,o=r/u,b=m?v.map((function(t,e){return g(r,v[e],_[e],u)})):g(r,v,_,u),x=m?Math.abs((b[0]-v[0])/_[0]):Math.abs((b-v)/_);if(a.currentValue=m?b.slice():b,a.completionRate=x,a.durationRate=o,!s){if(!d(b,x,o))return e>h?(a.currentValue=m?y.slice():y,a.completionRate=1,a.durationRate=1,f(m?y.slice():y,1,1),p(y,1,1),void l()):(f(b,x,o),void c(t));l()}}(i)})),a.cancel}i.util.object.extend(n,{cancelAll:function(){var t=this.splice(0);return t.forEach((function(t){t.cancel()})),t},cancelByCanvas:function(t){if(!t)return[];var e=this.filter((function(e){return"object"===typeof e.target&&e.target.canvas===t}));return e.forEach((function(t){t.cancel()})),e},cancelByTarget:function(t){var e=this.findAnimationsByTarget(t);return e.forEach((function(t){t.cancel()})),e},findAnimationIndex:function(t){return this.indexOf(this.findAnimation(t))},findAnimation:function(t){return this.find((function(e){return e.cancel===t}))},findAnimationsByTarget:function(t){return t?this.filter((function(e){return e.target===t})):[]}});var s=i.window.requestAnimationFrame||i.window.webkitRequestAnimationFrame||i.window.mozRequestAnimationFrame||i.window.oRequestAnimationFrame||i.window.msRequestAnimationFrame||function(t){return i.window.setTimeout(t,1e3/60)},l=i.window.cancelAnimationFrame||i.window.clearTimeout;function c(){return s.apply(i.window,arguments)}function u(){return l.apply(i.window,arguments)}i.util.animate=a,i.util.requestAnimFrame=c,i.util.cancelAnimFrame=u,i.runningAnimations=n}(),function(){function t(t,e,n){var i="rgba("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return i+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1),i+=")",i}function e(e,n,r,o){var a=new i.Color(e).getSource(),s=new i.Color(n).getSource(),l=o.onComplete,c=o.onChange;return o=o||{},i.util.animate(i.util.object.extend(o,{duration:r||500,startValue:a,endValue:s,byValue:s,easing:function(e,n,i,r){var a=o.colorEasing?o.colorEasing(e,r):1-Math.cos(e/r*(Math.PI/2));return t(n,i,a)},onComplete:function(e,n,i){if(l)return l(t(s,s,0),n,i)},onChange:function(e,n,i){if(c){if(Array.isArray(e))return c(t(e,e,0),n,i);c(e,n,i)}}}))}i.util.animateColor=e}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function r(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}function o(t,e,n,i){return n*(t/=i)*t*t*t+e}function a(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e}function s(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}function l(t,e,n,i){return n*(t/=i)*t*t*t*t+e}function c(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e}function u(t,e,n,i){return t/=i/2,t<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}function h(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}function f(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e}function d(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e}function p(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e}function g(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}function m(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2,t<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e)}function v(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e}function y(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e}function _(t,e,n,i){return t/=i/2,t<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function b(n,i,r,o){var a=1.70158,s=0,l=r;if(0===n)return i;if(n/=o,1===n)return i+r;s||(s=.3*o);var c=t(l,r,s,a);return-e(c,n,o)+i}function x(e,n,i,r){var o=1.70158,a=0,s=i;if(0===e)return n;if(e/=r,1===e)return n+i;a||(a=.3*r);var l=t(s,i,a,o);return l.a*Math.pow(2,-10*e)*Math.sin((e*r-l.s)*(2*Math.PI)/l.p)+l.c+n}function w(n,i,r,o){var a=1.70158,s=0,l=r;if(0===n)return i;if(n/=o/2,2===n)return i+r;s||(s=o*(.3*1.5));var c=t(l,r,s,a);return n<1?-.5*e(c,n,o)+i:c.a*Math.pow(2,-10*(n-=1))*Math.sin((n*o-c.s)*(2*Math.PI)/c.p)*.5+c.c+i}function S(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e}function T(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e}function O(t,e,n,i,r){return void 0===r&&(r=1.70158),t/=i/2,t<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}function C(t,e,n,i){return n-M(i-t,0,n,i)+e}function M(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function A(t,e,n,i){return t<i/2?.5*C(2*t,0,n,i)+e:.5*M(2*t-i,0,n,i)+.5*n+e}i.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return t/=i/2,t<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:n,easeInOutCubic:r,easeInQuart:o,easeOutQuart:a,easeInOutQuart:s,easeInQuint:l,easeOutQuint:c,easeInOutQuint:u,easeInSine:h,easeOutSine:f,easeInOutSine:d,easeInExpo:p,easeOutExpo:g,easeInOutExpo:m,easeInCirc:v,easeOutCirc:y,easeInOutCirc:_,easeInElastic:b,easeOutElastic:x,easeInOutElastic:w,easeInBack:S,easeOutBack:T,easeInOutBack:O,easeInBounce:C,easeOutBounce:M,easeInOutBounce:A}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.parseUnit,a=e.util.multiplyTransformMatrices,s=["path","circle","polygon","polyline","ellipse","rect","line","image","text"],l=["symbol","image","marker","pattern","view","svg"],c=["pattern","defs","symbol","metadata","clipPath","mask","desc"],u=["symbol","g","a","svg","clipPath","defs"],h={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},f={stroke:"strokeOpacity",fill:"fillOpacity"},d="font-size",p="clip-path";function g(t){return t in h?h[t]:t}function m(t,n,i,r){var s,l=Array.isArray(n);if("fill"!==t&&"stroke"!==t||"none"!==n){if("strokeUniform"===t)return"non-scaling-stroke"===n;if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=i&&i.transformMatrix?a(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),i&&"undefined"!==typeof i.opacity&&(n*=i.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)s=o(n,r)/r*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),u=n.indexOf("stroke");n="fill";(c>-1&&u>-1&&u<c||-1===c&&u>-1)&&(n="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return n;if("imageSmoothing"===t)return"optimizeQuality"===n;s=l?n.map(o):o(n,r)}}else n="";return!l&&isNaN(s)?n:s}function v(t){return new RegExp("^("+t.join("|")+")\\b","i")}function y(t){for(var n in f)if("undefined"!==typeof t[f[n]]&&""!==t[n]){if("undefined"===typeof t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[f[n]],2)).toRgba()}}return t}function _(t,e){var n,i,r,o,a=[];for(r=0,o=e.length;r<o;r++)n=e[r],i=t.getElementsByTagName(n),a=a.concat(Array.prototype.slice.call(i));return a}function b(t,e){var n,i;t.replace(/;\s*$/,"").split(";").forEach((function(t){var r=t.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i}))}function x(t,e){var n,i;for(var r in t)"undefined"!==typeof t[r]&&(n=r.toLowerCase(),i=t[r],e[n]=i)}function w(t,n){var i={};for(var r in e.cssRules[n])if(S(t,r.split(" ")))for(var o in e.cssRules[n][r])i[o]=e.cssRules[n][r][o];return i}function S(t,e){var n,i=!0;return n=O(t,e.pop()),n&&e.length&&(i=T(t,e)),n&&i&&0===e.length}function T(t,e){var n,i=!0;while(t.parentNode&&1===t.parentNode.nodeType&&e.length)i&&(n=e.pop()),t=t.parentNode,i=O(t,n);return 0===e.length}function O(t,e){var n,i,r=t.nodeName,o=t.getAttribute("class"),a=t.getAttribute("id");if(n=new RegExp("^"+r,"i"),e=e.replace(n,""),a&&e.length&&(n=new RegExp("#"+a+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),o&&e.length)for(o=o.split(" "),i=o.length;i--;)n=new RegExp("\\."+o[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function C(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o,a=t.getElementsByTagName("*");for(r=0,o=a.length;r<o;r++)if(i=a[r],e===i.getAttribute("id"))return i}function M(t){var n=_(t,["use","svg:use"]),i=0;while(n.length&&i<n.length){var r=n[i],o=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===o)return;var a,s,l,c,u,h=o.slice(1),f=r.getAttribute("x")||0,d=r.getAttribute("y")||0,p=C(t,h).cloneNode(!0),g=(p.getAttribute("transform")||"")+" translate("+f+", "+d+")",m=n.length,v=e.svgNS;if(D(p),/^svg$/i.test(p.nodeName)){var y=p.ownerDocument.createElementNS(v,"g");for(l=0,c=p.attributes,u=c.length;l<u;l++)s=c.item(l),y.setAttributeNS(v,s.nodeName,s.nodeValue);while(p.firstChild)y.appendChild(p.firstChild);p=y}for(l=0,c=r.attributes,u=c.length;l<u;l++)s=c.item(l),"x"!==s.nodeName&&"y"!==s.nodeName&&"xlink:href"!==s.nodeName&&"href"!==s.nodeName&&("transform"===s.nodeName?g=s.nodeValue+" "+g:p.setAttribute(s.nodeName,s.nodeValue));p.setAttribute("transform",g),p.setAttribute("instantiated_by_use","1"),p.removeAttribute("id"),a=r.parentNode,a.replaceChild(p,r),n.length===m&&i++}}e.svgValidTagNamesRegEx=v(s),e.svgViewBoxElementsRegEx=v(l),e.svgInvalidAncestorsRegEx=v(c),e.svgValidParentsRegEx=v(u),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),o=0,a=0;3===n.length&&(o=n[1],a=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=o-(i*o-r*a),t[5]=a-(r*o+i*a)}function n(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}function i(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=e.iMatrix,a=e.reNum,s=e.commaWsp,l="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",u="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+")"+s+"("+a+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",f="(?:(translate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",d="(?:(matrix)\\s*\\(\\s*("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")\\s*\\))",p="(?:"+d+"|"+f+"|"+h+"|"+u+"|"+l+"|"+c+")",g="(?:"+p+"(?:"+s+"*"+p+")*)",m="^\\s*(?:"+g+"?)\\s*$",v=new RegExp(m),y=new RegExp(p,"g");return function(a){var s=o.concat(),l=[];if(!a||a&&!v.test(a))return s;a.replace(y,(function(a){var c=new RegExp(p).exec(a).filter((function(t){return!!t})),u=c[1],h=c.slice(2).map(parseFloat);switch(u){case"translate":r(s,h);break;case"rotate":h[0]=e.util.degreesToRadians(h[0]),t(s,h);break;case"scale":n(s,h);break;case"skewX":i(s,h,2);break;case"skewY":i(s,h,1);break;case"matrix":s=h;break}l.push(s.concat()),s=o.concat()}));var c=l[0];while(l.length>1)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var A=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function D(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var n,i,r,a,s=t.getAttribute("viewBox"),l=1,c=1,u=0,h=0,f=t.getAttribute("width"),d=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!s||!(s=s.match(A)),y=!f||!d||"100%"===f||"100%"===d,_=v&&y,b={},x="",w=0,S=0;if(b.width=0,b.height=0,b.toBeParsed=_,v&&(p||g)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") ",r=(t.getAttribute("transform")||"")+x,t.setAttribute("transform",r),t.removeAttribute("x"),t.removeAttribute("y")),_)return b;if(v)return b.width=o(f),b.height=o(d),b;if(u=-parseFloat(s[1]),h=-parseFloat(s[2]),n=parseFloat(s[3]),i=parseFloat(s[4]),b.minX=u,b.minY=h,b.viewBoxWidth=n,b.viewBoxHeight=i,y?(b.width=n,b.height=i):(b.width=o(f),b.height=o(d),l=b.width/n,c=b.height/i),m=e.util.parsePreserveAspectRatioAttribute(m),"none"!==m.alignX&&("meet"===m.meetOrSlice&&(c=l=l>c?c:l),"slice"===m.meetOrSlice&&(c=l=l>c?l:c),w=b.width-n*l,S=b.height-i*l,"Mid"===m.alignX&&(w/=2),"Mid"===m.alignY&&(S/=2),"Min"===m.alignX&&(w=0),"Min"===m.alignY&&(S=0)),1===l&&1===c&&0===u&&0===h&&0===p&&0===g)return b;if((p||g)&&"#document"!==t.parentNode.nodeName&&(x=" translate("+o(p)+" "+o(g)+") "),r=x+" matrix("+l+" 0 0 "+c+" "+(u*l+w)+" "+(h*c+S)+") ","svg"===t.nodeName){a=t.ownerDocument.createElementNS(e.svgNS,"g");while(t.firstChild)a.appendChild(t.firstChild);t.appendChild(a)}else a=t,a.removeAttribute("x"),a.removeAttribute("y"),r=a.getAttribute("transform")+r;return a.setAttribute("transform",r),b}function E(t,e){while(t&&(t=t.parentNode))if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}function I(t,e){var n=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],i="xlink:href",r=e.getAttribute(i).slice(1),o=C(t,r);if(o&&o.getAttribute(i)&&I(t,o),n.forEach((function(t){o&&!e.hasAttribute(t)&&o.hasAttribute(t)&&e.setAttribute(t,o.getAttribute(t))})),!e.children.length){var a=o.cloneNode(!0);while(a.firstChild)e.appendChild(a.firstChild)}e.removeAttribute(i)}e.parseSVGDocument=function(t,n,r,o){if(t){M(t);var a,s,l=e.Object.__uid++,c=D(t),u=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=o&&o.crossOrigin,c.svgUid=l,0===u.length&&e.isLikelyNode){u=t.selectNodes('//*[name(.)!="svg"]');var h=[];for(a=0,s=u.length;a<s;a++)h[a]=u[a];u=h}var f=u.filter((function(t){return D(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!E(t,e.svgInvalidAncestorsRegEx)}));if(!f||f&&!f.length)n&&n([],{});else{var d={};u.filter((function(t){return"clipPath"===t.nodeName.replace("svg:","")})).forEach((function(t){var n=t.getAttribute("id");d[n]=e.util.toArray(t.getElementsByTagName("*")).filter((function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))}))})),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=d,e.parseElements(f,(function(t,i){n&&(n(t,c,i,u),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])}),i(c),r,o)}}};var P=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(P);if(n){var i=n[1],r=n[3],a=n[4],s=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),a&&(e.fontSize=o(a)),l&&(e.fontFamily=l),s&&(e.lineHeight="normal"===s?1:s)}},getGradientDefs:function(t){var e,n=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"],i=_(t,n),r=0,o={};r=i.length;while(r--)e=i[r],e.getAttribute("xlink:href")&&I(t,e),o[e.getAttribute("id")]=e;return o},parseAttributes:function(t,i,r){if(t){var a,s,l,c={};"undefined"===typeof r&&(r=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(c=e.parseAttributes(t.parentNode,i,r));var u=i.reduce((function(e,n){return a=t.getAttribute(n),a&&(e[n]=a),e}),{}),h=n(w(t,r),e.parseStyleAttribute(t));u=n(u,h),h[p]&&t.setAttribute(p,h[p]),s=l=c.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,u[d]&&(u[d]=s=o(u[d],l));var f,v,_={};for(var b in u)f=g(b),v=m(f,u[b],c,s),_[f]=v;_&&_.font&&e.parseFontDeclaration(_.font,_);var x=n(c,_);return e.svgValidParentsRegEx.test(t.nodeName)?x:y(x)}},parseElements:function(t,n,i,r,o){new e.ElementsParser(t,n,i,r,o).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"===typeof n?b(n,e):x(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,n,i=[];for(e=0,n=t.length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r,o=t.getElementsByTagName("style"),a={};for(n=0,i=o.length;n<i;n++){var s=o[n].textContent;s=s.replace(/\/\*[\s\S]*?\*\//g,""),""!==s.trim()&&(r=s.split("}"),r=r.filter((function(t){return t.trim()})),r.forEach((function(t){var r=t.split("{"),o={},s=r[1].trim(),l=s.split(";").filter((function(t){return t.trim()}));for(n=0,i=l.length;n<i;n++){var c=l[n].split(":"),u=c[0].trim(),h=c[1].trim();o[u]=h}t=r[0].trim(),t.split(",").forEach((function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(a[t]?e.util.object.extend(a[t],o):a[t]=e.util.object.clone(o))}))})))}return a},loadSVGFromURL:function(t,n,i,r){function o(t){var o=t.responseXML;if(!o||!o.documentElement)return n&&n(null),!1;e.parseSVGDocument(o.documentElement,(function(t,e,i,r){n&&n(t,e,i,r)}),i,r)}t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:o})},loadSVGFromString:function(t,n,i,r){var o=new e.window.DOMParser,a=o.parseFromString(t.trim(),"text/xml");e.parseSVGDocument(a.documentElement,(function(t,e,i,r){n(t,e,i,r)}),i,r)}})}(e),i.ElementsParser=function(t,e,n,i,r,o){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=o},function(t){t.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},t.createObjects=function(){var t=this;this.elements.forEach((function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)}))},t.findTag=function(t){return i[i.util.string.capitalize(t.tagName.replace("svg:",""))]},t.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(r){i.log(r)}else this.checkIfDone()},t.createCallback=function(t,e){var n=this;return function(r){var o;n.resolveGradient(r,e,"fill"),n.resolveGradient(r,e,"stroke"),r instanceof i.Image&&r._originalElement&&(o=r.parsePreserveAspectRatioAttribute(e)),r._removeTransformMatrix(o),n.resolveClipPath(r,e),n.reviver&&n.reviver(e,r),n.instances[t]=r,n.checkIfDone()}},t.extractPropertyDefinition=function(t,e,n){var r=t[e],o=this.regexUrl;if(o.test(r)){o.lastIndex=0;var a=o.exec(r)[1];return o.lastIndex=0,i[n][this.svgUid][a]}},t.resolveGradient=function(t,e,n){var r=this.extractPropertyDefinition(t,n,"gradientDefs");if(r){var o=e.getAttribute(n+"-opacity"),a=i.Gradient.fromElement(r,t,o,this.options);t.set(n,a)}},t.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},t.resolveClipPath=function(t,e){var n,r,o,a,s,l=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(l){a=[],o=i.util.invertTransform(t.calcTransformMatrix());var c=l[0].parentNode,u=e;while(u.parentNode&&u.getAttribute("clip-path")!==t.clipPath)u=u.parentNode;u.parentNode.appendChild(c);for(var h=0;h<l.length;h++)n=l[h],r=this.findTag(n),r.fromElement(n,this.createClipPathCallback(t,a),this.options);l=1===a.length?a[0]:new i.Group(a),s=i.util.multiplyTransformMatrices(o,l.calcTransformMatrix()),l.clipPath&&this.resolveClipPath(l,u);var f=i.util.qrDecompose(s);l.flipX=!1,l.flipY=!1,l.set("scaleX",f.scaleX),l.set("scaleY",f.scaleY),l.angle=f.angle,l.skewX=f.skewX,l.skewY=0,l.setPositionByOrigin({x:f.translateX,y:f.translateY},"center","center"),t.clipPath=l}else delete t.clipPath},t.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter((function(t){return null!=t})),this.callback(this.instances,this.elements))}}(i.ElementsParser.prototype),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return"undefined"===typeof e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,o){var a,s=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(i.x-t.x)-(o.x-r.x)*(i.y-t.y);if(0!==c){var u=s/c,h=l/c;0<=u&&u<=1&&0<=h&&h<=1?(a=new n("Intersection"),a.appendPoint(new e.Point(t.x+u*(i.x-t.x),t.y+u*(i.y-t.y)))):a=new n}else a=new n(0===s||0===l?"Coincident":"Parallel");return a},e.Intersection.intersectLinePolygon=function(t,e,i){var r,o,a,s,l=new n,c=i.length;for(s=0;s<c;s++)r=i[s],o=i[(s+1)%c],a=n.intersectLineLine(t,e,r,o),l.appendPoints(a.points);return l.points.length>0&&(l.status="Intersection"),l},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,o=t.length;for(i=0;i<o;i++){var a=t[i],s=t[(i+1)%o],l=n.intersectLinePolygon(a,s,e);r.appendPoints(l.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var o=i.min(r),a=i.max(r),s=new e.Point(a.x,o.y),l=new e.Point(o.x,a.y),c=n.intersectLinePolygon(o,s,t),u=n.intersectLinePolygon(s,a,t),h=n.intersectLinePolygon(a,l,t),f=n.intersectLinePolygon(l,o,t),d=new n;return d.appendPoints(c.points),d.appendPoints(u.points),d.appendPoints(h.points),d.appendPoints(f.points),d.points.length>0&&(d.status="Intersection"),d})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){t/=255,n/=255,i/=255;var r,o,a,s=e.util.array.max([t,n,i]),l=e.util.array.min([t,n,i]);if(a=(s+l)/2,s===l)r=o=0;else{var c=s-l;switch(o=a>.5?c/(2-s-l):c/(s+l),s){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4;break}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=i[0].toString(16),t=1===t.length?"0"+t:t,e=i[1].toString(16),e=1===e.length?"0"+e:e,n=i[2].toString(16),n=1===n.length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=Math.round(255*e[3]),t=t.toString(16),t=1===t.length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),o=.5,a=this.getSource(),s=t.getSource();for(e=0;e<3;e++)i.push(Math.round(a[e]*(1-o)+s[e]*o));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),o=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(o,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,o,a,s=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)r=o=a=c;else{var u=c<=.5?c*(l+1):c+l-c*l,h=2*c-u;r=i(h,u,s+1/3),o=i(h,u,s),a=i(h,u,s-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*a),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,o=i?e.charAt(0)+e.charAt(0):e.substring(0,2),a=i?e.charAt(1)+e.charAt(1):e.substring(2,4),s=i?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(o,16),parseInt(a,16),parseInt(s,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],i=["ns","nesw","ew","nwse"],r={},o="left",a="top",s="right",l="bottom",c="center",u={top:l,bottom:a,left:s,right:o,center:c},h=e.util.radiansToDegrees,f=Math.sign||function(t){return(t>0)-(t<0)||+t};function d(t,e){var n=t.angle+h(Math.atan2(e.y,e.x))+360;return Math.round(n%360/45)}function p(t,n){var i=n.transform.target,r=i.canvas,o=e.util.object.clone(n);o.target=i,r&&r.fire("object:"+t,o),i.fire(t,n)}function g(t,e){var n=e.canvas,i=n.uniScaleKey,r=t[i];return n.uniformScaling&&!r||!n.uniformScaling&&r}function m(t){return t.originX===c&&t.originY===c}function v(t,e,n){var i=t.lockScalingX,r=t.lockScalingY;return!(!i||!r)||(!(e||!i&&!r||!n)||(!(!i||"x"!==e)||!(!r||"y"!==e)))}function y(t,e,i){var r="not-allowed",o=g(t,i),a="";if(0!==e.x&&0===e.y?a="x":0===e.x&&0!==e.y&&(a="y"),v(i,a,o))return r;var s=d(i,e);return n[s]+"-resize"}function _(t,e,n){var r="not-allowed";if(0!==e.x&&n.lockSkewingY)return r;if(0!==e.y&&n.lockSkewingX)return r;var o=d(n,e)%4;return i[o]+"-resize"}function b(t,e,n){return t[n.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,n):r.scaleCursorStyleHandler(t,e,n)}function x(t,e,n){var i=t[n.canvas.altActionKey];return 0===e.x?i?"skewX":"scaleY":0===e.y?i?"skewY":"scaleX":void 0}function w(t,e,n){return n.lockRotation?"not-allowed":e.cursorStyle}function S(t,e,n,i){return{e:t,transform:e,pointer:{x:n,y:i}}}function T(t){return function(e,n,i,r){var o=n.target,a=o.getCenterPoint(),s=o.translateToOriginPoint(a,n.originX,n.originY),l=t(e,n,i,r);return o.setPositionByOrigin(s,n.originX,n.originY),l}}function O(t,e){return function(n,i,r,o){var a=e(n,i,r,o);return a&&p(t,S(n,i,r,o)),a}}function C(t,n,i,r,o){var a=t.target,s=a.controls[t.corner],l=a.canvas.getZoom(),c=a.padding/l,u=a.toLocalPoint(new e.Point(r,o),n,i);return u.x>=c&&(u.x-=c),u.x<=-c&&(u.x+=c),u.y>=c&&(u.y-=c),u.y<=c&&(u.y+=c),u.x-=s.offsetX,u.y-=s.offsetY,u}function M(t){return t.flipX!==t.flipY}function A(t,e,n,i,r){if(0!==t[e]){var o=t._getTransformedDimensions()[i],a=r/o*t[n];t.set(n,a)}}function D(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(0,c.skewY),f=C(e,e.originX,e.originY,n,i),d=Math.abs(2*f.x)-u.x,p=c.skewX;d<2?r=0:(r=h(Math.atan2(d/c.scaleX,u.y/c.scaleY)),e.originX===o&&e.originY===l&&(r=-r),e.originX===s&&e.originY===a&&(r=-r),M(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",r),A(c,"skewY","scaleY","y",m)}return g}function E(t,e,n,i){var r,c=e.target,u=c._getTransformedDimensions(c.skewX,0),f=C(e,e.originX,e.originY,n,i),d=Math.abs(2*f.y)-u.y,p=c.skewY;d<2?r=0:(r=h(Math.atan2(d/c.scaleY,u.x/c.scaleX)),e.originX===o&&e.originY===l&&(r=-r),e.originX===s&&e.originY===a&&(r=-r),M(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",r),A(c,"skewX","scaleX","x",m)}return g}function I(t,e,n,i){var r,l=e.target,u=l.skewX,h=e.originY;if(l.lockSkewingX)return!1;if(0===u){var f=C(e,c,c,n,i);r=f.x>0?o:s}else u>0&&(r=h===a?o:s),u<0&&(r=h===a?s:o),M(l)&&(r=r===o?s:o);e.originX=r;var d=O("skewing",T(D));return d(t,e,n,i)}function P(t,e,n,i){var r,s=e.target,u=s.skewY,h=e.originX;if(s.lockSkewingY)return!1;if(0===u){var f=C(e,c,c,n,i);r=f.y>0?a:l}else u>0&&(r=h===o?a:l),u<0&&(r=h===o?l:a),M(s)&&(r=r===a?l:a);e.originY=r;var d=O("skewing",T(E));return d(t,e,n,i)}function L(t,e,n,i){var r=e,o=r.target,a=o.translateToOriginPoint(o.getCenterPoint(),r.originX,r.originY);if(o.lockRotation)return!1;var s=Math.atan2(r.ey-a.y,r.ex-a.x),l=Math.atan2(i-a.y,n-a.x),c=h(l-s+r.theta),u=!0;if(o.snapAngle>0){var f=o.snapAngle,d=o.snapThreshold||f,p=Math.ceil(c/f)*f,g=Math.floor(c/f)*f;Math.abs(c-g)<d?c=g:Math.abs(c-p)<d&&(c=p)}return c<0&&(c=360+c),c%=360,u=o.angle!==c,o.angle=c,u}function k(t,e,n,i,r){r=r||{};var o,a,s,l,c,h,d=e.target,p=d.lockScalingX,y=d.lockScalingY,_=r.by,b=g(t,d),x=v(d,_,b),w=e.gestureScale;if(x)return!1;if(w)a=e.scaleX*w,s=e.scaleY*w;else{if(o=C(e,e.originX,e.originY,n,i),c="y"!==_?f(o.x):1,h="x"!==_?f(o.y):1,e.signX||(e.signX=c),e.signY||(e.signY=h),d.lockScalingFlip&&(e.signX!==c||e.signY!==h))return!1;if(l=d._getTransformedDimensions(),b&&!_){var S=Math.abs(o.x)+Math.abs(o.y),T=e.original,O=Math.abs(l.x*T.scaleX/d.scaleX)+Math.abs(l.y*T.scaleY/d.scaleY),M=S/O;a=T.scaleX*M,s=T.scaleY*M}else a=Math.abs(o.x*d.scaleX/l.x),s=Math.abs(o.y*d.scaleY/l.y);m(e)&&(a*=2,s*=2),e.signX!==c&&"y"!==_&&(e.originX=u[e.originX],a*=-1,e.signX=c),e.signY!==h&&"x"!==_&&(e.originY=u[e.originY],s*=-1,e.signY=h)}var A=d.scaleX,D=d.scaleY;return _?("x"===_&&d.set("scaleX",a),"y"===_&&d.set("scaleY",s)):(!p&&d.set("scaleX",a),!y&&d.set("scaleY",s)),A!==d.scaleX||D!==d.scaleY}function j(t,e,n,i){return k(t,e,n,i)}function R(t,e,n,i){return k(t,e,n,i,{by:"x"})}function N(t,e,n,i){return k(t,e,n,i,{by:"y"})}function B(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,n,i):r.scalingY(t,e,n,i)}function F(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,n,i):r.scalingX(t,e,n,i)}function z(t,e,n,i){var r=e.target,o=C(e,e.originX,e.originY,n,i),a=r.strokeWidth/(r.strokeUniform?r.scaleX:1),s=m(e)?2:1,l=r.width,c=Math.abs(o.x*s/r.scaleX)-a;return r.set("width",Math.max(c,0)),l!==c}function V(t,e,n,i){var r=e.target,o=n-e.offsetX,a=i-e.offsetY,s=!r.get("lockMovementX")&&r.left!==o,l=!r.get("lockMovementY")&&r.top!==a;return s&&r.set("left",o),l&&r.set("top",a),(s||l)&&p("moving",S(t,e,n,i)),s||l}r.scaleCursorStyleHandler=y,r.skewCursorStyleHandler=_,r.scaleSkewCursorStyleHandler=b,r.rotationWithSnapping=O("rotating",T(L)),r.scalingEqually=O("scaling",T(j)),r.scalingX=O("scaling",T(R)),r.scalingY=O("scaling",T(N)),r.scalingYOrSkewingX=B,r.scalingXOrSkewingY=F,r.changeWidth=O("resizing",T(z)),r.skewHandlerX=I,r.skewHandlerY=P,r.dragHandler=V,r.scaleOrSkewActionName=x,r.rotationStyleHandler=w,r.fireEvent=p,r.wrapWithFixedAnchor=T,r.wrapWithFireEvent=O,r.getLocalPoint=C,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians,i=e.controlsUtils;function r(t,e,n,i,r){i=i||{};var o,a=this.sizeX||i.cornerSize||r.cornerSize,s=this.sizeY||i.cornerSize||r.cornerSize,l="undefined"!==typeof i.transparentCorners?i.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),h=e,f=n;t.save(),t.fillStyle=i.cornerColor||r.cornerColor,t.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,a>s?(o=a,t.scale(1,s/a),f=n*a/s):s>a?(o=s,t.scale(a/s,1),h=e*s/a):o=a,t.lineWidth=1,t.beginPath(),t.arc(h,f,o/2,0,2*Math.PI,!1),t[c](),u&&t.stroke(),t.restore()}function o(t,e,i,r,o){r=r||{};var a=this.sizeX||r.cornerSize||o.cornerSize,s=this.sizeY||r.cornerSize||o.cornerSize,l="undefined"!==typeof r.transparentCorners?r.transparentCorners:o.transparentCorners,c=l?"stroke":"fill",u=!l&&(r.cornerStrokeColor||o.cornerStrokeColor),h=a/2,f=s/2;t.save(),t.fillStyle=r.cornerColor||o.cornerColor,t.strokeStyle=r.cornerStrokeColor||o.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(n(o.angle)),t[c+"Rect"](-h,-f,a,s),u&&t.strokeRect(-h,-f,a,s),t.restore()}i.renderCircleControl=r,i.renderSquareControl=o}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){for(var e in t)this[e]=t[e]}e.Control=n,e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var n=t._controlsVisibility;return n&&"undefined"!==typeof n[e]?n[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,n){var i=e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},n);return i},calcCornerCoords:function(t,n,i,r,o){var a,s,l,c,u=o?this.touchSizeX:this.sizeX,h=o?this.touchSizeY:this.sizeY;if(u&&h&&u!==h){var f=Math.atan2(h,u),d=Math.sqrt(u*u+h*h)/2,p=f-e.util.degreesToRadians(t),g=Math.PI/2-f-e.util.degreesToRadians(t);a=d*e.util.cos(p),s=d*e.util.sin(p),l=d*e.util.cos(g),c=d*e.util.sin(g)}else{var m=u&&h?u:n;d=.7071067812*m;p=e.util.degreesToRadians(45-t);a=l=d*e.util.cos(p),s=c=d*e.util.sin(p)}return{tl:{x:i-c,y:r-l},tr:{x:i+a,y:r-s},bl:{x:i-a,y:r+s},br:{x:i+c,y:r+l}}},render:function(t,n,i,r,o){switch(r=r||{},r.cornerStyle||o.cornerStyle){case"circle":e.controlsUtils.renderCircleControl.call(this,t,n,i,r,o);break;default:e.controlsUtils.renderSquareControl.call(this,t,n,i,r,o)}}}}(e),function(){function t(t,e){var n,r,o,a,s=t.getAttribute("style"),l=t.getAttribute("offset")||0;if(l=parseFloat(l)/(/%$/.test(l)?100:1),l=l<0?0:l>1?1:l,s){var c=s.split(/\s*;\s*/);for(""===c[c.length-1]&&c.pop(),a=c.length;a--;){var u=c[a].split(/\s*:\s*/),h=u[0].trim(),f=u[1].trim();"stop-color"===h?n=f:"stop-opacity"===h&&(o=f)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),o||(o=t.getAttribute("stop-opacity")),n=new i.Color(n),r=n.getAlpha(),o=isNaN(parseFloat(o))?1:parseFloat(o),o*=r*e,{offset:l,color:n.toRgb(),opacity:o}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function n(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}var r=i.util.object.clone;function o(t,e,n,i){var r,o;Object.keys(e).forEach((function(t){r=e[t],"Infinity"===r?o=1:"-Infinity"===r?o=0:(o=parseFloat(e[t],10),"string"===typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(o*=.01,"pixels"===i&&("x1"!==t&&"x2"!==t&&"r2"!==t||(o*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(o*=n.viewBoxHeight||n.height)))),e[t]=o}))}i.Gradient=i.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach((function(e){n[e]=t[e]})),this.id?this.id+="_"+i.Object.__uid++:this.id=i.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new i.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return i.util.populateWithProperties(this,e,t),e},toSVG:function(t,e){var n,o,a,s,l=r(this.coords,!0),c=(e=e||{},r(this.colorStops,!0)),u=l.r1>l.r2,h=this.gradientTransform?this.gradientTransform.concat():i.iMatrix.concat(),f=-this.offsetX,d=-this.offsetY,p=!!e.additionalTransform,g="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(c.sort((function(t,e){return t.offset-e.offset})),"objectBoundingBox"===g?(f/=t.width,d/=t.height):(f+=t.width/2,d+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(f-=t.pathOffset.x,d-=t.pathOffset.y),h[4]-=f,h[5]-=d,s='id="SVGID_'+this.id+'" gradientUnits="'+g+'"',s+=' gradientTransform="'+(p?e.additionalTransform+" ":"")+i.util.matrixToSVG(h)+'" ',"linear"===this.type?a=["<linearGradient ",s,' x1="',l.x1,'" y1="',l.y1,'" x2="',l.x2,'" y2="',l.y2,'">\n']:"radial"===this.type&&(a=["<radialGradient ",s,' cx="',u?l.x1:l.x2,'" cy="',u?l.y1:l.y2,'" r="',u?l.r1:l.r2,'" fx="',u?l.x2:l.x1,'" fy="',u?l.y2:l.y1,'">\n']),"radial"===this.type){if(u)for(c=c.concat(),c.reverse(),n=0,o=c.length;n<o;n++)c[n].offset=1-c[n].offset;var m=Math.min(l.r1,l.r2);if(m>0){var v=Math.max(l.r1,l.r2),y=m/v;for(n=0,o=c.length;n<o;n++)c[n].offset+=y*(1-c[n].offset)}}for(n=0,o=c.length;n<o;n++){var _=c[n];a.push("<stop ",'offset="',100*_.offset+"%",'" style="stop-color:',_.color,"undefined"!==typeof _.opacity?";stop-opacity: "+_.opacity:";",'"/>\n')}return a.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),a.join("")},toLive:function(t){var e,n,r,o=i.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(o.x1,o.y1,o.x2,o.y2):"radial"===this.type&&(e=t.createRadialGradient(o.x1,o.y1,o.r1,o.x2,o.y2,o.r2)),n=0,r=this.colorStops.length;n<r;n++){var a=this.colorStops[n].color,s=this.colorStops[n].opacity,l=this.colorStops[n].offset;"undefined"!==typeof s&&(a=new i.Color(a).setAlpha(s).toRgba()),e.addColorStop(l,a)}return e}}}),i.util.object.extend(i.Gradient,{fromElement:function(r,a,s,l){var c=parseFloat(s)/(/%$/.test(s)?100:1);c=c<0?0:c>1?1:c,isNaN(c)&&(c=1);var u,h,f,d,p=r.getElementsByTagName("stop"),g="userSpaceOnUse"===r.getAttribute("gradientUnits")?"pixels":"percentage",m=r.getAttribute("gradientTransform")||"",v=[],y=0,_=0;for("linearGradient"===r.nodeName||"LINEARGRADIENT"===r.nodeName?(u="linear",h=e(r)):(u="radial",h=n(r)),f=p.length;f--;)v.push(t(p[f],c));d=i.parseTransformAttribute(m),o(a,h,l,g),"pixels"===g&&(y=-a.left,_=-a.top);var b=new i.Gradient({id:r.getAttribute("id"),type:u,coords:h,colorStops:v,gradientUnits:g,gradientTransform:d,offsetX:y,offsetY:_});return b}})}(),function(){"use strict";var t=i.util.toFixed;i.Pattern=i.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=i.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!==typeof t.source)e&&e(this);else{var n=this;this.source=i.util.createImage(),i.util.loadImage(t.source,(function(t,i){n.source=t,e&&e(n,i)}),null,this.crossOrigin)}},toObject:function(e){var n,r,o=i.Object.NUM_FRACTION_DIGITS;return"string"===typeof this.source.src?n=this.source.src:"object"===typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),r={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,o),offsetY:t(this.offsetY,o),patternTransform:this.patternTransform?this.patternTransform.concat():null},i.util.populateWithProperties(this,r,e),r},toSVG:function(t){var e="function"===typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,o=this.offsetY/t.height,a="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,o&&(i+=Math.abs(o))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if("undefined"!==typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"===typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[],r=n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,r=40,o=e.Object.NUM_FRACTION_DIGITS,a=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),s=20,l=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(a.x)+this.blur)/t.width,o)+s,r=100*n((Math.abs(a.y)+this.blur)/t.height,o)+s),t.flipX&&(a.x*=-1),t.flipY&&(a.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,o)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(a.x,o)+'" dy="'+n(a.y,o)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+l.toRgb()+'" flood-opacity="'+l.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach((function(e){this[e]!==n[e]&&(t[e]=this[e])}),this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(i.StaticCanvas)i.warn("fabric.StaticCanvas is already defined.");else{var t=i.util.object.extend,e=i.util.getElementOffset,n=i.util.removeFromArray,r=i.util.toFixed,o=i.util.transformPoint,a=i.util.invertTransform,s=i.util.getNodeCanvas,l=i.util.createCanvasElement,c=new Error("Could not initialize `canvas` element");i.StaticCanvas=i.util.createClass(i.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:i.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return i.devicePixelRatio>1&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?Math.max(1,i.devicePixelRatio):1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=i.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,n,r){return"string"===typeof e?i.util.loadImage(e,(function(e,o){if(e){var a=new i.Image(e,r);this[t]=a,a.canvas=this}n&&n(e,o)}),this,r&&r.crossOrigin):(r&&e.setOptions(r),this[t]=e,e&&(e.canvas=this),n&&n(e,!1)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=l();if(!t)throw c;if(t.style||(t.style={}),"undefined"===typeof t.getContext)throw c;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){t&&t.getContext?this.lowerCanvasEl=t:this.lowerCanvasEl=i.util.getById(t)||this._createCanvasElement(),i.util.addClass(this.lowerCanvasEl,"lower-canvas"),this._originalCanvasStyle=this.lowerCanvasEl.style,this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject,o=this.backgroundImage,a=this.overlayImage;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)e=this._objects[n],e.group||e.setCoords(!0);return r&&r.setCoords(),o&&o.setCoords(!0),a&&a.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=o(t,a(this.viewportTransform)),i[0]=e,i[3]=e;var r=o(t,i);return i[4]+=n.x-r.x,i[5]+=n.y-r.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new i.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new i.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this.remove.apply(this,this.getObjects()),this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){var t=this.contextContainer;return this.renderCanvas(t,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=i.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,r=a(this.viewportTransform);return t.tl=o({x:0,y:0},r),t.br=o({x:e,y:n},r),t.tr=new i.Point(t.br.x,t.tl.y),t.bl=new i.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,r=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),i.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),r&&(r.canvas=this,r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],i=this[e+"Image"],r=this.viewportTransform,o=this[e+"Vpt"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var a=n.gradientTransform||n.patternTransform;a&&t.transform(a[0],a[1],a[2],a[3],a[4],a[5]),t.fill(),t.restore()}i&&(t.save(),o&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},getCenterPoint:function(){return new i.Point(this.width/2,this.height/2)},centerObjectH:function(t){return this._centerObject(t,new i.Point(this.getCenterPoint().x,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new i.Point(t.getCenterPoint().x,this.getCenterPoint().y))},centerObject:function(t){var e=this.getCenterPoint();return this._centerObject(t,e)},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new i.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new i.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenterPoint(),e=a(this.viewportTransform);return o(t,e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var r=this.clipPath,o={version:i.version,objects:this._toObjects(e,n)};return r&&!r.excludeFromExport&&(o.clipPath=this._toObject(this.clipPath,e,n)),t(o,this.__serializeBgOverlay(e,n)),i.util.populateWithProperties(this,o,n),o},_toObjects:function(t,e){return this._objects.filter((function(t){return!t.excludeFromExport})).map((function(n){return this._toObject(n,t,e)}),this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,a=this.overlayColor;return o&&o.toObject?o.excludeFromExport||(n.background=o.toObject(e)):o&&(n.background=o),a&&a.toObject?a.excludeFromExport||(n.overlay=a.toObject(e)):a&&(n.overlay=a),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,o=e.width||this.width,a=e.height||this.height,s='viewBox="0 0 '+this.width+" "+this.height+'" ',l=i.Object.NUM_FRACTION_DIGITS;e.viewBox?s='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(n=this.viewportTransform,s='viewBox="'+r(-n[4]/n[0],l)+" "+r(-n[5]/n[3],l)+" "+r(this.width/n[0],l)+" "+r(this.height/n[3],l)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',o,'" ','height="',a,'" ',s,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",i.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+i.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this,e=["background","overlay"].map((function(e){var n=t[e+"Color"];if(n&&n.toLive){var r=t[e+"Vpt"],o=t.viewportTransform,a={width:t.width/(r?o[0]:1),height:t.height/(r?o[3]:1)};return n.toSVG(a,{additionalTransform:r?i.util.matrixToSVG(o):""})}}));return e.join("")},createSVGFontFacesMarkup:function(){var t,e,n,r,o,a,s,l,c,u="",h={},f=i.fontPaths,d=[];for(this._objects.forEach((function t(e){d.push(e),e._objects&&e._objects.forEach(t)})),l=0,c=d.length;l<c;l++)if(t=d[l],e=t.fontFamily,-1!==t.type.indexOf("text")&&!h[e]&&f[e]&&(h[e]=!0,t.styles))for(o in n=t.styles,n)for(s in r=n[o],r)a=r[s],e=a.fontFamily,!h[e]&&f[e]&&(h[e]=!0);for(var p in h)u+=["\t\t@font-face {\n","\t\t\tfont-family: '",p,"';\n","\t\t\tsrc: url('",f[p],"');\n","\t\t}\n"].join("");return u&&(u=['\t<style type="text/css">',"<![CDATA[\n",u,"]]>","</style>\n"].join("")),u},_setSVGObjects:function(t,e){var n,i,r,o=this._objects;for(i=0,r=o.length;i<r;i++)n=o[i],n.excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],r=this.viewportTransform,o=this.width,a=this.height;if(n)if(n.toLive){var s=n.repeat,l=i.util.invertTransform(r),c=this[e+"Vpt"],u=c?i.util.matrixToSVG(l):"";t.push('<rect transform="'+u+" translate(",o/2,",",a/2,')"',' x="',n.offsetX-o/2,'" y="',n.offsetY-a/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:o,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:a,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=r.length;e--;)i=r[e],n(this._objects,i),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,o=this._activeObject;if(t===o&&"activeSelection"===t.type)for(r=o._objects,e=0;e<r.length;e++)i=r[e],n(this._objects,i),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,o,a,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(s=l._objects,i=0;i<s.length;i++)r=s[i],o=this._objects.indexOf(r),o>0+c&&(a=o-1,n(this._objects,r),this._objects.splice(a,0,r)),c++;else o=this._objects.indexOf(t),0!==o&&(a=this._findNewLowerIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n)for(i=e,r=e-1;r>=0;--r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,o,a,s,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(s=l._objects,i=s.length;i--;)r=s[i],o=this._objects.indexOf(r),o<this._objects.length-1-c&&(a=o+1,n(this._objects,r),this._objects.splice(a,0,r)),c++;else o=this._objects.indexOf(t),o!==this._objects.length-1&&(a=this._findNewUpperIndex(t,o,e),n(this._objects,t),this._objects.splice(a,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,o;if(n)for(i=e,r=e+1,o=this._objects.length;r<o;++r){var a=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(a){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(i.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,this.lowerCanvasEl.classList.remove("lower-canvas"),i.util.setStyle(this.lowerCanvasEl,this._originalCanvasStyle),delete this._originalCanvasStyle,this.lowerCanvasEl.setAttribute("width",this.width),this.lowerCanvasEl.setAttribute("height",this.height),i.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(i.StaticCanvas.prototype,i.Observable),t(i.StaticCanvas.prototype,i.Collection),t(i.StaticCanvas.prototype,i.DataURLExporter),t(i.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=l();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"setLineDash":return"undefined"!==typeof n.setLineDash;default:return null}}}),i.StaticCanvas.prototype.toJSON=i.StaticCanvas.prototype.toObject,i.isLikelyNode&&(i.StaticCanvas.prototype.createPNGStream=function(){var t=s(this.lowerCanvasEl);return t&&t.createPNGStream()},i.StaticCanvas.prototype.createJPEGStream=function(t){var e=s(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),i.BaseBrush=i.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,r=t.getZoom();t&&t._isRetinaScaling()&&(r*=i.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*r,n.shadowOffsetX=e.offsetX*r,n.shadowOffsetY=e.offsetY*r}},needsFullRender:function(){var t=new i.Color(this.color);return t.getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),function(){i.PencilBrush=i.util.createClass(i.BaseBrush,{decimate:.4,drawStraightLine:!1,straightLineKey:"shiftKey",initialize:function(t){this.canvas=t,this._points=[]},needsFullRender:function(){return this.callSuper("needsFullRender")||this._hasStraightLine},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(this.drawStraightLine=e.e[this.straightLineKey],(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new i.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)},_reset:function(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1},_captureDrawingPath:function(t){var e=new i.Point(t.x,t.y);return this._addPoint(e)},_render:function(t){var e,n,r=this._points[0],o=this._points[1];if(t=t||this.canvas.contextTop,this._saveAndTransform(t),t.beginPath(),2===this._points.length&&r.x===o.x&&r.y===o.y){var a=this.width/1e3;r=new i.Point(r.x,r.y),o=new i.Point(o.x,o.y),r.x-=a,o.x+=a}for(t.moveTo(r.x,r.y),e=1,n=this._points.length;e<n;e++)this._drawSegment(t,r,o),r=this._points[e],o=this._points[e+1];t.lineTo(r.x,r.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=this.width/1e3;return i.util.getSmoothPathFromPoints(t,e)},_isEmptySVGPath:function(t){var e=i.util.joinPath(t);return"M 0 0 Q 0 0 0 0 L 0 0"===e},createPath:function(t){var e=new i.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new i.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i,r=this.canvas.getZoom(),o=Math.pow(e/r,2),a=t.length-1,s=t[0],l=[s];for(n=1;n<a-1;n++)i=Math.pow(s.x-t[n].x,2)+Math.pow(s.y-t[n].y,2),i>=o&&(s=t[n],l.push(s));return l.push(t[a]),l},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var e=this.convertPointsToSVGPath(this._points);if(this._isEmptySVGPath(e))this.canvas.requestRenderAll();else{var n=this.createPath(e);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:n}),this.canvas.add(n),this.canvas.requestRenderAll(),n.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:n})}}})}(),i.CircleBrush=i.util.createClass(i.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var r=[];for(t=0,e=this.points.length;t<e;t++){var o=this.points[t],a=new i.Circle({radius:o.radius,left:o.x,top:o.y,originX:"center",originY:"center",fill:o.fill});this.shadow&&(a.shadow=new i.Shadow(this.shadow)),r.push(a)}var s=new i.Group(r);s.canvas=this.canvas,this.canvas.fire("before:path:created",{path:s}),this.canvas.add(s),this.canvas.fire("path:created",{path:s}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new i.Point(t.x,t.y),n=i.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,r=new i.Color(this.color).setAlpha(i.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=r,this.points.push(e),e}}),i.SprayBrush=i.util.createClass(i.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,r=this.sprayChunks.length;n<r;n++)for(var o=this.sprayChunks[n],a=0,s=o.length;a<s;a++){var l=new i.Rect({width:o[a].width,height:o[a].width,left:o[a].x+1,top:o[a].y+1,originX:"center",originY:"center",fill:this.color});e.push(l)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var c=new i.Group(e);this.shadow&&c.set("shadow",new i.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:c}),this.canvas.add(c),this.canvas.fire("path:created",{path:c}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)e=t[n].left+""+t[n].top,r[e]||(r[e]=t[n]);var o=[];for(e in r)o.push(r[e]);return o},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];"undefined"!==typeof r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,r,o,a=this.width/2;for(o=0;o<this.density;o++){e=i.util.getRandomInt(t.x-a,t.x+a),n=i.util.getRandomInt(t.y-a,t.y+a),r=this.dotWidthVariance?i.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var s=new i.Point(e,n);s.width=r,this.randomOpacity&&(s.opacity=i.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(s)}this.sprayChunks.push(this.sprayChunkPoints)}}),i.PatternBrush=i.util.createClass(i.PencilBrush,{getPatternSrc:function(){var t=20,e=5,n=i.util.createCanvasElement(),r=n.getContext("2d");return n.width=n.height=t+e,r.fillStyle=this.color,r.beginPath(),r.arc(t/2,t/2,t/2,0,2*Math.PI,!1),r.closePath(),r.fill(),n},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(t){this.callSuper("_setBrushStyles",t),t.strokeStyle=this.getPattern(t)},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new i.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=i.util.getPointer,e=i.util.degreesToRadians,n=i.util.isTouchEvent;for(var r in i.Canvas=i.util.createClass(i.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],enablePointerEvents:!1,_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=i.PencilBrush&&new i.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,o=this._objects.length;r<o;r++)t=this._objects[r],-1===i.indexOf(t)?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1);var t=this.contextContainer;return this.renderCanvas(t,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),r=i.util.invertTransform(n),o=this.restorePointerVpt(e);return i.util.transformPoint(o,r)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var r=this._normalizePointer(t,{x:e,y:n}),o=Math.max(t.cacheTranslationX+r.x*t.zoomX,0),a=Math.max(t.cacheTranslationY+r.y*t.zoomY,0),s=i.util.isTransparent(t._cacheContext,Math.round(o),Math.round(a),this.targetFindTolerance);return s}var l=this.contextCache,c=t.selectionBackgroundColor,u=this.viewportTransform;t.selectionBackgroundColor="",this.clearContext(l),l.save(),l.transform(u[0],u[1],u[2],u[3],u[4],u[5]),t.render(l),l.restore(),t.selectionBackgroundColor=c;s=i.util.isTransparent(l,e,n,this.targetFindTolerance);return s},_isSelectionKeyPressed:function(t){var e=!1;return e=Array.isArray(this.selectionKey)?!!this.selectionKey.find((function(e){return!0===t[e]})):t[this.selectionKey],e},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e,n){var i;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?i=this.centeredScaling||t.centeredScaling:"rotate"===e&&(i=this.centeredRotation||t.centeredRotation),i?!n:n},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n,i){if(!e||!t)return"drag";var r=i.controls[e];return r.getActionName(n,r,i)},_setupCurrentTransform:function(t,n,r){if(n){var o=this.getPointer(t),a=n.__corner,s=n.controls[a],l=r&&a?s.getActionHandler(t,n,s):i.controlsUtils.dragHandler,c=this._getActionFromCorner(r,a,t,n),u=this._getOriginFromCorner(n,a),h=t[this.centeredKey],f={target:n,action:c,actionHandler:l,corner:a,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:o.x-n.left,offsetY:o.y-n.top,originX:u.x,originY:u.y,ex:o.x,ey:o.y,lastX:o.x,lastY:o.y,theta:e(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:h,original:i.util.saveObjectTransform(n)};this._shouldCenterTransform(n,c,h)&&(f.originX="center",f.originY="center"),f.original.originX=u.x,f.original.originY=u.y,this._currentTransform=f,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,n=new i.Point(e.ex,e.ey),r=i.util.transformPoint(n,this.viewportTransform),o=new i.Point(e.ex+e.left,e.ey+e.top),a=i.util.transformPoint(o,this.viewportTransform),s=Math.min(r.x,a.x),l=Math.min(r.y,a.y),c=Math.max(r.x,a.x),u=Math.max(r.y,a.y),h=this.selectionLineWidth/2;this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(s,l,c-s,u-l)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,s+=h,l+=h,c-=h,u-=h,i.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(s,l,c-s,u-l))},findTarget:function(t,e){if(!this.skipTargetFind){var i,r,o=!0,a=this.getPointer(t,o),s=this._activeObject,l=this.getActiveObjects(),c=n(t),u=l.length>1&&!e||1===l.length;if(this.targets=[],u&&s._findTargetCorner(a,c))return s;if(l.length>1&&!e&&s===this._searchPossibleTargets([s],a))return s;if(1===l.length&&s===this._searchPossibleTargets([s],a)){if(!this.preserveObjectStacking)return s;i=s,r=this.targets,this.targets=[]}var h=this._searchPossibleTargets(this._objects,a);return t[this.altSelectionKey]&&h&&i&&h!==i&&(h=i,this.targets=r),h}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,n.x,n.y);if(!i)return!0}},_searchPossibleTargets:function(t,e){var n,r,o=t.length;while(o--){var a=t[o],s=a.group?this._normalizePointer(a.group,e):e;if(this._checkTarget(s,a,e)){n=t[o],n.subTargetCheck&&n instanceof i.Group&&(r=this._searchPossibleTargets(n._objects,e),r&&this.targets.push(r));break}}return n},restorePointerVpt:function(t){return i.util.transformPoint(t,i.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),o=this.upperCanvasEl,a=o.getBoundingClientRect(),s=a.width||0,l=a.height||0;s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),i=0===s||0===l?{width:1,height:1}:{width:o.width/s,height:o.height/l},{x:r.x*i.width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),i.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},getTopContext:function(){return this.contextTop},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=i.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),i.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),i.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;i.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,i.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],o=[];t.forEach((function(t){-1===i.indexOf(t)&&(n=!0,t.fire("deselected",{e:e,target:t}),o.push(t))})),i.forEach((function(i){-1===t.indexOf(i)&&(n=!0,i.fire("selected",{e:e,target:i}),r.push(i))})),t.length>0&&i.length>0?n&&this.fire("selection:updated",{e:e,selected:r,deselected:o}):i.length>0?this.fire("selection:created",{e:e,selected:r}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:o})},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&(!!this._discardActiveObject(e,t)&&(!t.onSelect({e:e})&&(this._activeObject=t,!0)))},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach(function(t){i.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,i.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e=["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"],n={};return e.forEach((function(e){n[e]=t[e]})),i.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),i.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),i.StaticCanvas)"prototype"!==r&&(i.Canvas[r]=i.StaticCanvas[r])}(),function(){var t=i.util.addListener,e=i.util.removeListener,n=3,r=2,o=1,s={passive:!1};function l(t,e){return t.button&&t.button===e-1}i.util.object.extend(i.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var n=this.upperCanvasEl,r=this._getEventPrefix();t(i.window,"resize",this._onResize),t(n,r+"down",this._onMouseDown),t(n,r+"move",this._onMouseMove,s),t(n,r+"out",this._onMouseOut),t(n,r+"enter",this._onMouseEnter),t(n,"wheel",this._onMouseWheel),t(n,"contextmenu",this._onContextMenu),t(n,"dblclick",this._onDoubleClick),t(n,"dragover",this._onDragOver),t(n,"dragenter",this._onDragEnter),t(n,"dragleave",this._onDragLeave),t(n,"drop",this._onDrop),this.enablePointerEvents||t(n,"touchstart",this._onTouchStart,s),"undefined"!==typeof a&&e in a&&(a[e](n,"gesture",this._onGesture),a[e](n,"drag",this._onDrag),a[e](n,"orientation",this._onOrientationChange),a[e](n,"shake",this._onShake),a[e](n,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(i.document,t+"up",this._onMouseUp),e(i.document,"touchend",this._onTouchEnd,s),e(i.document,t+"move",this._onMouseMove,s),e(i.document,"touchmove",this._onMouseMove,s)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._onDrop.bind(this),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var n=this;this._hoveredTargets.forEach((function(i){n.fire("mouse:out",{target:e,e:t}),i&&e.fire("mouseout",{e:t})})),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach((function(t){t.isEditing&&t.hiddenTextarea.focus()}))},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onDrop:function(t){return this._simpleEventHandler("drop:before",t),this._simpleEventHandler("drop",t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||(!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId))},_onTouchStart:function(n){n.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(n)),this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();t(i.document,"touchend",this._onTouchEnd,s),t(i.document,"touchmove",this._onMouseMove,s),e(r,o+"down",this._onMouseDown)},_onMouseDown:function(n){this.__onMouseDown(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();e(r,o+"move",this._onMouseMove,s),t(i.document,o+"up",this._onMouseUp),t(i.document,o+"move",this._onMouseMove,s)},_onTouchEnd:function(n){if(!(n.touches.length>0)){this.__onMouseUp(n),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();e(i.document,"touchend",this._onTouchEnd,s),e(i.document,"touchmove",this._onMouseMove,s);var o=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout((function(){t(o.upperCanvasEl,r+"down",o._onMouseDown),o._willAddMouseDown=0}),400)}},_onMouseUp:function(n){this.__onMouseUp(n),this._resetTransformEventData();var r=this.upperCanvasEl,o=this._getEventPrefix();this._isMainEvent(n)&&(e(i.document,o+"up",this._onMouseUp),e(i.document,o+"move",this._onMouseMove,s),t(r,o+"move",this._onMouseMove,s))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!==!!t||e&&t&&e!==t)||(e&&e.isEditing,!1)},__onMouseUp:function(t){var e,a=this._currentTransform,s=this._groupSelector,c=!1,u=!s||0===s.left&&0===s.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),l(t,n))this.fireRightClick&&this._handleEvent(t,"up",n,u);else{if(l(t,r))return this.fireMiddleClick&&this._handleEvent(t,"up",r,u),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(a&&(this._finalizeCurrentTransform(t),c=a.actionPerformed),!u){var h=e===this._activeObject;this._maybeGroupObjects(t),c||(c=this._shouldRender(e)||!h&&e===this._activeObject)}var f,d;if(e){if(f=e._findTargetCorner(this.getPointer(t,!0),i.util.isTouchEvent(t)),e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),c=!0;else{var p=e.controls[f],g=p&&p.getMouseUpHandler(t,e,p);g&&(d=this.getPointer(t),g(t,a,d.x,d.y))}e.isMoving=!1}if(a&&(a.target!==e||a.corner!==f)){var m=a.target&&a.target.controls[a.corner],v=m&&m.getMouseUpHandler(t,e,p);d=d||this.getPointer(t),v&&v(t,a,d.x,d.y)}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",o,u),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),c?this.requestRenderAll():u||this.renderTop()}}},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var o=0;o<i.length;o++)i[o].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,a=this.targets||[],s={e:t,target:r,subTargets:a,button:n||o,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(s.currentTarget=this.findTarget(t),s.currentSubTargets=this.targets),this.fire("mouse:"+e,s),r&&r.fire("mouse"+e,s);for(var l=0;l<a.length;l++)a[l].fire("mouse"+e,s)},_finalizeCurrentTransform:function(t){var e=this._currentTransform,n=e.target,i={e:t,target:n,transform:e,action:e.action};n._scaling&&(n._scaling=!1),n.setCoords(),(e.actionPerformed||this.stateful&&n.hasStateChanged())&&this._fire("modified",i)},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(l(t,n))this.fireRightClick&&this._handleEvent(t,"down",n);else if(l(t,r))this.fireMiddleClick&&this._handleEvent(t,"down",r);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){var o=this._pointer;this._previousPointer=o;var a=this._shouldRender(e),s=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):s&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:this._absolutePointer.x,ey:this._absolutePointer.y,top:0,left:0}),e){var c=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var u=e._findTargetCorner(this.getPointer(t,!0),i.util.isTouchEvent(t));if(e.__corner=u,e===this._activeObject&&(u||!s)){this._setupCurrentTransform(t,e,c);var h=e.controls[u],f=(o=this.getPointer(t),h&&h.getMouseDownHandler(t,e,h));f&&f(t,this._currentTransform,o.x,o.y)}}this._handleEvent(t,"down"),(a||s)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(n=this._absolutePointer,i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,o=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],e,{oldTarget:i[a],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,o=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var a=0;a<o;a++)this.fireSyntheticInOutEvents(r[a],e,{oldTarget:i[a],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var i,r,o,a,s=n.oldTarget,l=s!==t,c=n.canvasEvtIn,u=n.canvasEvtOut;l&&(i={e:e,target:t,previousTarget:s},r={e:e,target:s,nextTarget:t}),a=t&&l,o=s&&l,o&&(u&&this.fire(u,r),s.fire(n.evtOut,r)),a&&(c&&this.fire(c,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.action,a=!1,s=e.actionHandler;s&&(a=s(t,e,i,r)),"drag"===o&&a&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||a},_fire:i.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map((function(t){n=t.hoverCursor||n})),this.setCursor(n))},getCornerCursor:function(t,e,n){var i=e.controls[t];return i.cursorStyleHandler(n,i,e)}})}(),function(){var t=Math.min,e=Math.max;i.util.object.extend(i.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0),e&&e.selectable))&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t),r=n?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new i.ActiveSelection(r,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new i.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(n){for(var r,o=[],a=this._groupSelector.ex,s=this._groupSelector.ey,l=a+this._groupSelector.left,c=s+this._groupSelector.top,u=new i.Point(t(a,l),t(s,c)),h=new i.Point(e(a,l),e(s,c)),f=!this.selectionFullyContained,d=a===l&&s===c,p=this._objects.length;p--;)if(r=this._objects[p],r&&r.selectable&&r.visible&&(f&&r.intersectsWithRect(u,h,!0)||r.isContainedWithinRect(u,h,!0)||f&&r.containsPoint(u,null,!0)||f&&r.containsPoint(h,null,!0))&&(o.push(r),d))break;return o.length>1&&(o=o.filter((function(t){return!t.onSelect({e:n})}))),o},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}})}(),function(){i.util.object.extend(i.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,r=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),o=this.toCanvasElement(r,t);return i.util.toDataURL(o,e,n)},toCanvasElement:function(t,e){t=t||1,e=e||{};var n=(e.width||this.width)*t,r=(e.height||this.height)*t,o=this.getZoom(),a=this.width,s=this.height,l=o*t,c=this.viewportTransform,u=(c[4]-(e.left||0))*t,h=(c[5]-(e.top||0))*t,f=this.interactive,d=[l,0,0,l,u,h],p=this.enableRetinaScaling,g=i.util.createCanvasElement(),m=this.contextTop;return g.width=n,g.height=r,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=d,this.width=n,this.height=r,this.calcViewportBoundaries(),this.renderCanvas(g.getContext("2d"),this._objects),this.viewportTransform=c,this.width=a,this.height=s,this.calcViewportBoundaries(),this.interactive=f,this.enableRetinaScaling=p,this.contextTop=m,g}})}(),i.util.object.extend(i.StaticCanvas.prototype,{loadFromJSON:function(t,e,n){if(t){var r="string"===typeof t?JSON.parse(t):i.util.object.clone(t),o=this,a=r.clipPath,s=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete r.clipPath,this._enlivenObjects(r.objects,(function(t){o.clear(),o._setBgOverlay(r,(function(){a?o._enlivenObjects([a],(function(n){o.clipPath=n[0],o.__setupCanvas.call(o,r,t,s,e)})):o.__setupCanvas.call(o,r,t,s,e)}))}),n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach((function(t,e){r.insertAt(t,e)})),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,r){var o=this;if(!e)return n[t]=!0,void(r&&r());"backgroundImage"===t||"overlayImage"===t?i.util.enlivenObjects([e],(function(e){o[t]=e[0],n[t]=!0,r&&r()})):this["set"+i.util.string.capitalize(t,!0)](e,(function(){n[t]=!0,r&&r()}))},_enlivenObjects:function(t,e,n){t&&0!==t.length?i.util.enlivenObjects(t,(function(t){e&&e(t)}),null,n):e&&e([])},_toDataURL:function(t,e){this.clone((function(n){e(n.toDataURL(t))}))},_toDataURLWithMultiplier:function(t,e,n){this.clone((function(i){n(i.toDataURLWithMultiplier(t,e))}))},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData((function(e){e.loadFromJSON(n,(function(){t&&t(e)}))}))},cloneWithoutData:function(t){var e=i.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new i.Canvas(e);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,(function(){n.renderAll(),t&&t(n)})),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(){var t=i.util.degreesToRadians,e=i.util.radiansToDegrees;i.util.object.extend(i.Canvas.prototype,{__onTransformGesture:function(t,e){if(!this.isDrawingMode&&t.touches&&2===t.touches.length&&"gesture"===e.gesture){var n=this.findTarget(t);"undefined"!==typeof n&&(this.__gesturesParams={e:t,self:e,target:n},this.__gesturesRenderer()),this.fire("touch:gesture",{target:n,e:t,self:e})}},__gesturesParams:null,__gesturesRenderer:function(){if(null!==this.__gesturesParams&&null!==this._currentTransform){var t=this.__gesturesParams.self,e=this._currentTransform,n=this.__gesturesParams.e;e.action="scale",e.originX=e.originY="center",this._scaleObjectBy(t.scale,n),0!==t.rotation&&(e.action="rotate",this._rotateObjectByAngle(t.rotation,n)),this.requestRenderAll(),e.action="drag"}},__onDrag:function(t,e){this.fire("touch:drag",{e:t,self:e})},__onOrientationChange:function(t,e){this.fire("touch:orientation",{e:t,self:e})},__onShake:function(t,e){this.fire("touch:shake",{e:t,self:e})},__onLongPress:function(t,e){this.fire("touch:longpress",{e:t,self:e})},_scaleObjectBy:function(t,e){var n=this._currentTransform,r=n.target;return n.gestureScale=t,r._scaling=!0,i.controlsUtils.scalingEqually(e,n,0,0)},_rotateObjectByAngle:function(n,i){var r=this._currentTransform;r.target.get("lockRotation")||(r.target.rotate(e(t(n)+r.theta)),this._fire("rotating",{target:r.target,e:i,transform:r}))}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.util.string.capitalize,a=e.util.degreesToRadians,s=!e.isLikelyNode,l=2;e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:s,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,o=e.maxCacheSideLimit,a=e.minCacheSideLimit;if(i<=o&&r<=o&&i*r<=n)return i<a&&(t.width=a),r<a&&(t.height=a),t;var s=i/r,l=e.util.limitDimsByArea(s,n),c=e.util.capValue,u=c(a,l.x,o),h=c(a,l.y,o);return i>u&&(t.zoomX/=i/u,t.width=u,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+l,height:i+l,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.target,i=t._currentTransform.action;if(this===n&&i.slice&&"scale"===i.slice(0,5))return!1}var r,o,a=this._cacheCanvas,s=this._limitCacheSize(this._getCacheCanvasDimensions()),l=e.minCacheSideLimit,c=s.width,u=s.height,h=s.zoomX,f=s.zoomY,d=c!==this.cacheWidth||u!==this.cacheHeight,p=this.zoomX!==h||this.zoomY!==f,g=d||p,m=0,v=0,y=!1;if(d){var _=this._cacheCanvas.width,b=this._cacheCanvas.height,x=c>_||u>b,w=(c<.9*_||u<.9*b)&&_>l&&b>l;y=x||w,x&&!s.capped&&(c>l||u>l)&&(m=.1*c,v=.1*u)}return this instanceof e.Text&&this.path&&(g=!0,y=!0,m+=this.getHeightOfLine(0)*this.zoomX,v+=this.getHeightOfLine(0)*this.zoomY),!!g&&(y?(a.width=Math.ceil(c+m),a.height=Math.ceil(u+v)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,a.width,a.height)),r=s.x/2,o=s.y/2,this.cacheTranslationX=Math.round(a.width/2-r)+r,this.cacheTranslationY=Math.round(a.height/2-o)+o,this.cacheWidth=c,this.cacheHeight=u,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,f),this.zoomX=h,this.zoomY=f,!0)},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,n=this.calcTransformMatrix(!e);t.transform(n[0],n[1],n[2],n[3],n[4],n[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&!this.clipPath.excludeFromExport&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype,i=n.stateProperties;return i.forEach((function(e){"left"!==e&&"top"!==e&&(t[e]===n[e]&&delete t[e],Array.isArray(t[e])&&Array.isArray(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])})),t},toString:function(){return"#<fabric."+o(this.type)+">"},getObjectScaling:function(){if(!this.group)return{scaleX:this.scaleX,scaleY:this.scaleY};var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i="scaleX"===t||"scaleY"===t,r=this[t]!==n,o=!1;return i&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,r&&(o=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,o&&this.group.set("dirty",!0)):o&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this._cacheContext=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!==typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t,n){if(t.save(),n.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=n,this.stroke=i},_drawClipPath:function(t,e){e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&this._cacheContext&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&this._cacheContext&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var n=e.fill;n&&(n.toLive?(t.fillStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=n)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),t.setLineDash(e))},_renderControls:function(t,n){var i,r,o,s=this.getViewportTransform(),l=this.calcTransformMatrix();n=n||{},r="undefined"!==typeof n.hasBorders?n.hasBorders:this.hasBorders,o="undefined"!==typeof n.hasControls?n.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(s,l),i=e.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(i.angle-=180),t.rotate(a(this.group?i.angle:this.angle)),n.forActiveSelection||this.group?r&&this.drawBordersInGroup(t,i,n):r&&this.drawBorders(t,n),o&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,o=r&&r.viewportTransform[0]||1,a=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(o*=e.devicePixelRatio,a*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(o+a)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*o*n.scaleX,t.shadowOffsetY=i.offsetY*a*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),o=e.util.createCanvasElement(),a=this.canvas.getRetinaScaling(),s=r.x/this.scaleX/a,l=r.y/this.scaleY/a;o.width=s,o.height=l,i=o.getContext("2d"),i.beginPath(),i.moveTo(0,0),i.lineTo(s,0),i.lineTo(s,l),i.lineTo(0,l),i.closePath(),i.translate(s/2,l/2),i.scale(r.zoomX/this.scaleX/a,r.zoomY/this.scaleY/a),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(a*this.scaleX/r.zoomX,a*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(o,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.group,o=this.shadow,a=Math.abs,s=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var l,c,u,h,f=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),p=this.shadow,g={x:0,y:0};p&&(c=p.blur,l=p.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),g.x=2*Math.round(a(p.offsetX)+c)*a(l.scaleX),g.y=2*Math.round(a(p.offsetY)+c)*a(l.scaleY)),u=d.width+g.x,h=d.height+g.y,f.width=Math.ceil(u),f.height=Math.ceil(h);var m=new e.StaticCanvas(f,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(m.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(m.width/2,m.height/2),"center","center");var v=this.canvas;m.add(this);var y=m.toCanvasElement(s||1,t);return this.shadow=o,this.set("canvas",v),r&&(this.group=r),this.set(i).setCoords(),m._objects=[],m.dispose(),m=null,y},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return arguments.length>1?Array.from(arguments).includes(this.type):this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,a(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)},dispose:function(){e.runningAnimations&&e.runningAnimations.cancelByTarget(this)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.ENLIVEN_PROPS=["clipPath"],e.Object._fromObject=function(t,n,r,o){var a=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],(function(t){"undefined"!==typeof t[0]&&(n.fill=t[0]),"undefined"!==typeof t[1]&&(n.stroke=t[1]),e.util.enlivenObjectEnlivables(n,n,(function(){var t=o?new a(n[o],n):new a(n);r&&r(t)}))}))},e.Object.__uid=0)}(e),function(){var t=i.util.degreesToRadians,e={left:-.5,center:0,right:.5},n={top:-.5,center:0,bottom:.5};i.util.object.extend(i.Object.prototype,{translateToGivenOrigin:function(t,r,o,a,s){var l,c,u,h=t.x,f=t.y;return"string"===typeof r?r=e[r]:r-=.5,"string"===typeof a?a=e[a]:a-=.5,l=a-r,"string"===typeof o?o=n[o]:o-=.5,"string"===typeof s?s=n[s]:s-=.5,c=s-o,(l||c)&&(u=this._getTransformedDimensions(),h=t.x+l*u.x,f=t.y+c*u.y),new i.Point(h,f)},translateToCenterPoint:function(e,n,r){var o=this.translateToGivenOrigin(e,n,r,"center","center");return this.angle?i.util.rotatePoint(o,e,t(this.angle)):o},translateToOriginPoint:function(e,n,r){var o=this.translateToGivenOrigin(e,"center","center",n,r);return this.angle?i.util.rotatePoint(o,e,t(this.angle)):o},getCenterPoint:function(){var t=new i.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,r){var o,a,s=this.getCenterPoint();return o="undefined"!==typeof n&&"undefined"!==typeof r?this.translateToGivenOrigin(s,"center","center",n,r):new i.Point(this.left,this.top),a=new i.Point(e.x,e.y),this.angle&&(a=i.util.rotatePoint(a,s,-t(this.angle))),a.subtractEquals(o)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(n){var r,o,a=t(this.angle),s=this.getScaledWidth(),l=i.util.cos(a)*s,c=i.util.sin(a)*s;r="string"===typeof this.originX?e[this.originX]:this.originX-.5,o="string"===typeof n?e[n]:n-.5,this.left+=l*(o-r),this.top+=c*(o-r),this.setCoords(),this.originX=n},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){function t(t){return[new i.Point(t.tl.x,t.tl.y),new i.Point(t.tr.x,t.tr.y),new i.Point(t.br.x,t.br.y),new i.Point(t.bl.x,t.bl.y)]}var e=i.util,n=e.degreesToRadians,r=e.multiplyTransformMatrices,o=e.transformPoint;e.object.extend(i.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(e,n){return t(this._getCoords(e,n))},intersectsWithRect:function(t,e,n,r){var o=this.getCoords(n,r),a=i.Intersection.intersectPolygonRectangle(o,t,e);return"Intersection"===a.status},intersectsWithObject:function(t,e,n){var r=i.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n));return"Intersection"===r.status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=e?t.aCoords:t.lineCoords,o=0,a=t._getImageLines(r);o<4;o++)if(!t.containsPoint(i[o],a))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){var r=this._getCoords(n,i),o=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==o&&o%2===1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br,i=this.getCoords(!0,t);return!!i.some((function(t){return t.x<=n.x&&t.x>=e.x&&t.y<=n.y&&t.y>=e.y}))||(!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t))},_containsCenterOfCanvas:function(t,e,n){var i={x:(t.x+e.x)/2,y:(t.y+e.y)/2};return!!this.containsPoint(i,null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;if(this.intersectsWithRect(e,n,!0,t))return!0;var i=this.getCoords(!0,t).every((function(t){return(t.x>=n.x||t.x<=e.x)&&(t.y>=n.y||t.y<=e.y)}));return i&&this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){var e={topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}};return e},_findCrossPoints:function(t,e){var n,i,r,o,a,s,l=0;for(var c in e)if(s=e[c],!(s.o.y<t.y&&s.d.y<t.y)&&!(s.o.y>=t.y&&s.d.y>=t.y)&&(s.o.x===s.d.x&&s.o.x>=t.x?a=s.o.x:(n=0,i=(s.d.y-s.o.y)/(s.d.x-s.o.x),r=t.y-n*t.x,o=s.o.y-i*s.o.x,a=-(r-o)/(n-i)),a>=t.x&&(l+=1),2===l))break;return l},getBoundingRect:function(t,n){var i=this.getCoords(t,n);return e.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcLineCoords:function(){var t=this.getViewportTransform(),i=this.padding,r=n(this.angle),a=e.cos(r),s=e.sin(r),l=a*i,c=s*i,u=l+c,h=l-c,f=this.calcACoords(),d={tl:o(f.tl,t),tr:o(f.tr,t),bl:o(f.bl,t),br:o(f.br,t)};return i&&(d.tl.x-=h,d.tl.y-=u,d.tr.x+=u,d.tr.y-=h,d.bl.x-=u,d.bl.y+=h,d.br.x+=h,d.br.y+=u),d},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=this.getViewportTransform(),i=r(n,e),o=r(i,t),a=(o=r(o,[1/n[0],0,0,1/n[3],0,0]),this._calculateCurrentDimensions()),s={};return this.forEachControl((function(t,e,n){s[e]=t.positionHandler(a,o,n)})),s},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),n=r(e,t),i=this._getTransformedDimensions(),a=i.x/2,s=i.y/2;return{tl:o({x:-a,y:-s},n),tr:o({x:a,y:-s},n),bl:o({x:-a,y:s},n),br:o({x:a,y:s},n)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return e.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var n=this.transformMatrixKey(t),i=this.matrixCache||(this.matrixCache={});return i.key===n?i.value:(this.group&&(e=r(this.group.calcTransformMatrix(!1),e)),i.key=n,i.value=e,e)},calcOwnMatrix:function(){var t=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===t)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=t,n.value=e.composeMatrix(r),n.value},_getNonTransformedDimensions:function(){var t=this.strokeWidth,e=this.width+t,n=this.height+t;return{x:e,y:n}},_getTransformedDimensions:function(t,n){"undefined"===typeof t&&(t=this.skewX),"undefined"===typeof n&&(n=this.skewY);var i,r,o,a=0===t&&0===n;if(this.strokeUniform?(r=this.width,o=this.height):(i=this._getNonTransformedDimensions(),r=i.x,o=i.y),a)return this._finalizeDimensions(r*this.scaleX,o*this.scaleY);var s=e.sizeAfterTransform(r,o,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:t,skewY:n});return this._finalizeDimensions(s.x,s.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions(),n=o(e,t,!0);return n.scalarAdd(2*this.padding)}})}(),i.util.object.extend(i.Object.prototype,{sendToBack:function(){return this.group?i.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?i.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?i.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?i.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?i.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new i.Color(e),r=t+": "+n.toRgb()+"; ",o=n.getAlpha();return 1!==o&&(r+=t+"-opacity: "+o.toString()+"; "),r}return t+": none; "}var e=i.util.toFixed;i.util.object.extend(i.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",o=this.strokeDashOffset?this.strokeDashOffset:"0",a=this.strokeLineCap?this.strokeLineCap:"butt",s=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c="undefined"!==typeof this.opacity?this.opacity:"1",u=this.visible?"":" visibility: hidden;",h=e?"":this.getSvgFilter(),f=t("fill",this.fill),d=t("stroke",this.stroke);return[d,"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",a,"; ","stroke-dashoffset: ",o,"; ","stroke-linejoin: ",s,"; ","stroke-miterlimit: ",l,"; ",f,"fill-rule: ",n,"; ","opacity: ",c,";",h,u].join("")},getSvgSpanStyles:function(e,n){var i="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+i:"",o=e.strokeWidth?"stroke-width: "+e.strokeWidth+i:"",a=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+i:""),s=e.fontStyle?"font-style: "+e.fontStyle+i:"",l=e.fontWeight?"font-weight: "+e.fontWeight+i:"",c=e.fill?t("fill",e.fill):"",u=e.stroke?t("stroke",e.stroke):"",h=this.getSvgTextDecoration(e),f=e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"";return h&&(h="text-decoration: "+h+i),[u,o,r,a,s,l,h,c,f,n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter((function(e){return t[e.replace("-","")]})).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'+i.util.matrixToSVG(n);return r+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var n=i.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){e=e||{};var n=e.reviver,i=e.additionalTransform||"",r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),o=t.indexOf("COMMON_PARTS");return t[o]=r,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){e=e||{};var n,r,o=e.noStyle,a=e.reviver,s=o?"":'style="'+this.getSvgStyles()+'" ',l=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",c=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=c&&c.absolutePositioned,f=this.stroke,d=this.fill,p=this.shadow,g=[],m=t.indexOf("COMMON_PARTS"),v=e.additionalTransform;return c&&(c.clipPathId="CLIPPATH_"+i.Object.__uid++,r='<clipPath id="'+c.clipPathId+'" >\n'+c.toClipPathSVG(a)+"</clipPath>\n"),h&&g.push("<g ",l,this.getSvgCommons()," >\n"),g.push("<g ",this.getSvgTransform(!1),h?"":l+this.getSvgCommons()," >\n"),n=[s,u,o?"":this.addPaintOrder()," ",v?'transform="'+v+'" ':""].join(""),t[m]=n,d&&d.toLive&&g.push(d.toSVG(this)),f&&f.toLive&&g.push(f.toSVG(this)),p&&g.push(p.toSVG(this)),c&&g.push(r),g.push(t.join("")),g.push("</g>\n"),h&&g.push("</g>\n"),a?a(g.join("")):g.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=i.util.object.extend,e="stateProperties";function n(e,n,i){var r={},o=!0;i.forEach((function(t){r[t]=e[t]})),t(e[n],r,o)}function r(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var i=0,o=t.length;i<o;i++)if(!r(t[i],e[i]))return!1;return!0}if(t&&"object"===typeof t){var a,s=Object.keys(t);if(!e||"object"!==typeof e||!n&&s.length!==Object.keys(e).length)return!1;for(i=0,o=s.length;i<o;i++)if(a=s[i],"canvas"!==a&&"group"!==a&&!r(t[a],e[a]))return!1;return!0}}i.util.object.extend(i.Object.prototype,{hasStateChanged:function(t){t=t||e;var n="_"+t;return Object.keys(this[n]).length<this[t].length||!r(this[n],this,!0)},saveState:function(t){var i=t&&t.propertySet||e,r="_"+i;return this[r]?(n(this,r,this[i]),t&&t.stateProperties&&n(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){t=t||{};var n=t.propertySet||e;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})}(),function(){var t=i.util.degreesToRadians;i.util.object.extend(i.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,o=t.x,a=t.y,s=Object.keys(this.oCoords),l=s.length-1;for(this.__corner=0;l>=0;l--)if(r=s[l],this.isControlVisible(r)&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),n=this._findCrossPoints({x:o,y:a},i),0!==n&&n%2===1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,o=n.y+i,a="undefined"!==typeof e.hasControls?e.hasControls:this.hasControls,s=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray),t.strokeRect(-r/2,-o/2,r,o),a&&(t.beginPath(),this.forEachControl((function(e,n,i){e.withConnection&&e.getVisibility(i,n)&&(s=!0,t.moveTo(e.x*r,e.y*o),t.lineTo(e.x*r+e.offsetX,e.y*o+e.offsetY))})),s&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var r=i.util.sizeAfterTransform(this.width,this.height,e),o=this.strokeWidth,a=this.strokeUniform,s=this.borderScaleFactor,l=r.x+o*(a?this.canvas.getZoom():e.scaleX)+s,c=r.y+o*(a?this.canvas.getZoom():e.scaleY)+s;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-l/2,-c/2,l,c),t.restore(),this},drawControls:function(t,e){e=e||{},t.save();var n,r,o=this.canvas.getRetinaScaling();return t.setTransform(o,0,0,o,0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray),this.setCoords(),this.group&&(n=this.group.calcTransformMatrix()),this.forEachControl((function(o,a,s){r=s.oCoords[a],o.getVisibility(s,a)&&(n&&(r=i.util.transformPoint(r,n)),o.render(t,r.x,r.y,e,s))})),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),i.util.object.extend(i.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,o=e.onChange||n,a=this;return i.util.animate({target:this,startValue:t.left,endValue:this.getCenterPoint().x,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),a.requestRenderAll(),o()},onComplete:function(){t.setCoords(),r()}})},fxCenterObjectV:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,o=e.onChange||n,a=this;return i.util.animate({target:this,startValue:t.top,endValue:this.getCenterPoint().y,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),a.requestRenderAll(),o()},onComplete:function(){t.setCoords(),r()}})},fxRemove:function(t,e){e=e||{};var n=function(){},r=e.onComplete||n,o=e.onChange||n,a=this;return i.util.animate({target:this,startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),a.requestRenderAll(),o()},onComplete:function(){a.remove(t),r()}})}}),i.util.object.extend(i.Object.prototype,{animate:function(){if(arguments[0]&&"object"===typeof arguments[0]){var t,e,n=[],i=[];for(t in arguments[0])n.push(t);for(var r=0,o=n.length;r<o;r++)t=n[r],e=r!==o-1,i.push(this._animate(t,arguments[0][t],arguments[1],e));return i}return this._animate.apply(this,arguments)},_animate:function(t,e,n,r){var o,a=this;e=e.toString(),n=n?i.util.object.clone(n):{},~t.indexOf(".")&&(o=t.split("."));var s=a.colorProperties.indexOf(t)>-1||o&&a.colorProperties.indexOf(o[1])>-1,l=o?this.get(o[0])[o[1]]:this.get(t);"from"in n||(n.from=l),s||(e=~e.indexOf("=")?l+parseFloat(e.replace("=","")):parseFloat(e));var c={target:this,startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(t,e,i){return n.abort.call(a,t,e,i)},onChange:function(e,i,s){o?a[o[0]][o[1]]=e:a.set(t,e),r||n.onChange&&n.onChange(e,i,s)},onComplete:function(t,e,i){r||(a.setCoords(),n.onComplete&&n.onComplete(t,e,i))}};return s?i.util.animateColor(c.startValue,c.endValue,c.duration,c):i.util.animate(c)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1};function o(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!==typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){t.beginPath();var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5,r=t*this.width*-.5,o=e*this.height*-.5;return{x1:n,x2:r,y1:i,y2:o}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,i,r){r=r||{};var o=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES),a=[o.x1||0,o.y1||0,o.x2||0,o.y2||0];i(new e.Line(a,n(o,r)))},e.Line.fromObject=function(t,n){function r(t){delete t.points,n&&n(t)}var o=i(t,!0);o.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",o,r,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians;function i(t){return"radius"in t&&t.radius>=0}e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:360,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,i=0,r=0,o=(this.endAngle-this.startAngle)%360;if(0===o)t=["<circle ","COMMON_PARTS",'cx="'+i+'" cy="'+r+'" ','r="',this.radius,'" />\n'];else{var a=n(this.startAngle),s=n(this.endAngle),l=this.radius,c=e.util.cos(a)*l,u=e.util.sin(a)*l,h=e.util.cos(s)*l,f=e.util.sin(s)*l,d=o>180?"1":"0";t=['<path d="M '+c+" "+u," A "+l+" "+l," 0 ",+d+" 1"," "+h+" "+f,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,n(this.startAngle),n(this.endAngle),!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!i(r))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_toSVG:function(){var t=this.width/2,e=this.height/2,n=[-t+" "+e,"0 "+-e,t+" "+e].join(",");return["<polygon ","COMMON_PARTS",'points="',n,'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e);break}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,o=-this.width/2,a=-this.height/2,s=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(o+e,a),t.lineTo(o+i-e,a),s&&t.bezierCurveTo(o+i-l*e,a,o+i,a+l*n,o+i,a+n),t.lineTo(o+i,a+r-n),s&&t.bezierCurveTo(o+i,a+r-l*n,o+i-l*e,a+r,o+i-e,a+r),t.lineTo(o+e,a+r),s&&t.bezierCurveTo(o+l*e,a+r,o,a+r-l*n,o,a+r-n),t.lineTo(o,a+n),s&&t.bezierCurveTo(o,a+l*n,o+l*e,a,o+e,a),t.closePath(),this._renderPaintInOrder(t)},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){var t=-this.width/2,e=-this.height/2;return["<rect ","COMMON_PARTS",'x="',t,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var o=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);o.left=o.left||0,o.top=o.top||0,o.height=o.height||0,o.width=o.width||0;var a=new e.Rect(n(r?e.util.object.clone(r):{},o));a.visible=a.visible&&a.width>0&&a.height>0,i(a)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.toFixed,a=e.util.projectStrokeOnPoints;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,exactBoundingBox:!1,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_projectStrokeOnPoints:function(){return a(this.points,this,!0)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t),i=this.exactBoundingBox?this.strokeWidth:0;this.width=n.width-i,this.height=n.height-i,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2+i/2,y:n.top-this.strokeWidth/2+i/2},"left","top",this.originX,this.originY)),"undefined"===typeof t.left&&(this.left=t.fromSVG?n.left:e.x),"undefined"===typeof t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2+i/2,y:n.top+this.height/2+i/2}},_calcDimensions:function(){var t=this.exactBoundingBox?this._projectStrokeOnPoints():this.points,e=i(t,"x")||0,n=i(t,"y")||0,o=r(t,"x")||0,a=r(t,"y")||0,s=o-e,l=a-n;return{left:e,top:n,width:s,height:l}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,a=0,s=this.points.length;a<s;a++)t.push(o(this.points[a].x-n,r),",",o(this.points[a].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var o=0;o<n;o++)e=this.points[o],t.lineTo(e.x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,o){if(!i)return r(null);o||(o={});var a=e.parsePointsAttribute(i.getAttribute("points")),s=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);s.fromSVG=!0,r(new e[t](a,n(s,o)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.projectStrokeOnPoints;e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_projectStrokeOnPoints:function(){return n(this.points,this)},_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,o=e.util.object.clone,a=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,e){e=o(e||{}),delete e.path,this.callSuper("initialize",e),this._setPath(t||[],e)},_setPath:function(t,n){this.path=e.util.makePathSimpler(Array.isArray(t)?t:e.util.parsePath(t)),e.Polyline.prototype._setPositionDimensions.call(this,n||{})},_renderPathCommands:function(t){var e,n=0,i=0,r=0,o=0,a=0,s=0,l=-this.pathOffset.x,c=-this.pathOffset.y;t.beginPath();for(var u=0,h=this.path.length;u<h;++u)switch(e=this.path[u],e[0]){case"L":r=e[1],o=e[2],t.lineTo(r+l,o+c);break;case"M":r=e[1],o=e[2],n=r,i=o,t.moveTo(r+l,o+c);break;case"C":r=e[5],o=e[6],a=e[3],s=e[4],t.bezierCurveTo(e[1]+l,e[2]+c,a+l,s+c,r+l,o+c);break;case"Q":t.quadraticCurveTo(e[1]+l,e[2]+c,e[3]+l,e[4]+c),r=e[3],o=e[4],a=e[1],s=e[2];break;case"z":case"Z":r=n,o=i,t.closePath();break}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map((function(t){return t.slice()}))})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){var t=e.util.joinPath(this.path);return["<path ","COMMON_PARTS",'d="',t,'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+a(-this.pathOffset.x,t)+", "+a(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,o=[],a=[],s=0,l=0,c=0,u=0,h=0,f=this.path.length;h<f;++h){switch(t=this.path[h],t[0]){case"L":c=t[1],u=t[2],r=[];break;case"M":c=t[1],u=t[2],s=c,l=u,r=[];break;case"C":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],u=t[6];break;case"Q":r=e.util.getBoundsOfCurve(c,u,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],u=t[4];break;case"z":case"Z":c=s,u=l;break}r.forEach((function(t){o.push(t.x),a.push(t.y)})),o.push(c),a.push(u)}var d=n(o)||0,p=n(a)||0,g=i(o)||0,m=i(a)||0,v=g-d,y=m-p;return{left:d,top:p,width:v,height:y}}}),e.Path.fromObject=function(t,n){if("string"===typeof t.sourcePath){var i=t.sourcePath;e.loadSVGFromURL(i,(function(e){var i=e[0];i.setOptions(t),n&&n(i)}))}else e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);o.fromSVG=!0,n(new e.Path(o.d,r(o,i)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=!0,e=this._objects.length;e--;)this._objects[e].setCoords(t)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){var n=t.left,i=t.top,r=!0;t.set({left:n-e.x,top:i-e.y}),t.group=this,t.setCoords(r)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(n&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)while(i--)this._objects[i].setOnGroup(t,n);if("canvas"===t)while(i--)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.filter((function(t){return!t.excludeFromExport})).map((function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r})),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map((function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i}))}var o=e.Object.prototype.toDatalessObject.call(this,t);return o.objects=n,o},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t,this.clipPath)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach((function(n){e.util.addTransformToObject(n,t),delete n.group,n.setCoords()})),this},destroy:function(){return this._objects.forEach((function(t){t.set("dirty",!0)})),this._restoreObjectsState()},dispose:function(){this.callSuper("dispose"),this.forEachObject((function(t){t.dispose&&t.dispose()})),this._objects=[]},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),t.forEach((function(t){t.group=r,t.dirty=!0,n.add(t)})),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){var t=!0;return this.forEachObject((function(e){e.setCoords(t)})),this},_calcBounds:function(t){for(var e,n,i,r,o=[],a=[],s=["tr","br","bl","tl"],l=0,c=this._objects.length,u=s.length;l<c;++l){for(e=this._objects[l],i=e.calcACoords(),r=0;r<u;r++)n=s[r],o.push(i[n].x),a.push(i[n].y);e.aCoords=i}this._getBounds(o,a,t)},_getBounds:function(t,r,o){var a=new e.Point(n(t),n(r)),s=new e.Point(i(t),i(r)),l=a.y||0,c=a.x||0,u=s.x-a.x||0,h=s.y-a.y||0;this.width=u,this.height=h,o||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t="undefined"!==typeof this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var i=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!==typeof i?e.util.enlivenObjects(i,(function(i){var r=e.util.object.clone(t,!0);delete r.objects,e.util.enlivenObjectEnlivables(t,r,(function(){n&&n(new e.Group(i,r,!0))}))})):e.loadSVGFromURL(i,(function(o){var a=e.util.groupSVGElements(o,t,i);a.set(r),n&&n(a)}))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach((function(t){t.canvas.remove(t),t.group=i})),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),n=n||{},"undefined"===typeof n.hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,(function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))}))})}(e),function(t){"use strict";var e=i.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?i.warn("fabric.Image is already defined."):(i.Image=i.util.createClass(i.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:i.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:i.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+i.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=i.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.callSuper("dispose"),this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(function(t){i.util.cleanUpJsdomNode(this[t]),this[t]=void 0}.bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},toObject:function(t){var n=[];this.filters.forEach((function(t){t&&n.push(t.toObject())}));var i=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],r=this._element,o=-this.width/2,a=-this.height/2,s="",l="";if(!r)return[];if(this.hasCrop()){var c=i.Object.__uid++;e.push('<clipPath id="imageCrop_'+c+'">\n','\t<rect x="'+o+'" y="'+a+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),s=' clip-path="url(#imageCrop_'+c+')" '}if(this.imageSmoothing||(l='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',o-this.cropX,'" y="',a-this.cropY,'" width="',r.width||r.naturalWidth,'" height="',r.height||r.height,l,'"',s,"></image>\n"),this.stroke||this.strokeDashArray){var u=this.fill;this.fill=null,t=["\t<rect ",'x="',o,'" y="',a,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=u}return e="fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t),e},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return i.util.loadImage(t,(function(t,i){this.setElement(t,n),this._setWidthHeight(),e&&e(this,i)}),this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),r=n.scaleX,o=n.scaleY,a=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||r>e&&o>e)return this._element=a,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=o);i.filterBackend||(i.filterBackend=i.initFilterBackend());var s=i.util.createCanvasElement(),l=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,c=a.width,u=a.height;s.width=c,s.height=u,this._element=s,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=o,i.filterBackend.applyFilters([t],a,c,u,this._element,l),this._filterScalingX=s.width/this._originalElement.width,this._filterScalingY=s.height/this._originalElement.height},applyFilters:function(t){if(t=t||this.filters||[],t=t.filter((function(t){return t&&!t.isNeutralState()})),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){var o=i.util.createCanvasElement();o.width=n,o.height=r,this._element=o,this._filteredEl=o}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,r),this._lastScaleX=1,this._lastScaleY=1;return i.filterBackend||(i.filterBackend=i.initFilterBackend()),i.filterBackend.applyFilters(t,this._originalElement,n,r,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){i.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){i.util.setImageSmoothing(t,this.imageSmoothing),i.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,o=this.height,a=Math.min,s=Math.max,l=s(this.cropX,0),c=s(this.cropY,0),u=e.naturalWidth||e.width,h=e.naturalHeight||e.height,f=l*n,d=c*i,p=a(r*n,u-f),g=a(o*i,h-d),m=-r/2,v=-o/2,y=a(r,u/n-l),_=a(o,h/i-c);e&&t.drawImage(e,f,d,p,g,m,v,y,_)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(i.util.getById(t),e),i.util.addClass(this.getElement(),i.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?i.util.enlivenObjects(t,(function(t){e&&e(t)}),"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=i.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,r=this._element.height,o=1,a=1,s=0,l=0,c=0,u=0,h=this.width,f=this.height,d={width:h,height:f};return!e||"none"===e.alignX&&"none"===e.alignY?(o=h/n,a=f/r):("meet"===e.meetOrSlice&&(o=a=i.util.findScaleToFit(this._element,d),t=(h-n*o)/2,"Min"===e.alignX&&(s=-t),"Max"===e.alignX&&(s=t),t=(f-r*a)/2,"Min"===e.alignY&&(l=-t),"Max"===e.alignY&&(l=t)),"slice"===e.meetOrSlice&&(o=a=i.util.findScaleToCover(this._element,d),t=n-h/o,"Mid"===e.alignX&&(c=t/2),"Max"===e.alignX&&(c=t),t=r-f/a,"Mid"===e.alignY&&(u=t/2),"Max"===e.alignY&&(u=t),n=h/o,r=f/a)),{width:n,height:r,scaleX:o,scaleY:a,offsetLeft:s,offsetTop:l,cropX:c,cropY:u}}}),i.Image.CSS_CANVAS="canvas-img",i.Image.prototype.getSvgSrc=i.Image.prototype.getSrc,i.Image.fromObject=function(t,e){var n=i.util.object.clone(t);i.util.loadImage(n.src,(function(t,r){r?e&&e(null,!0):i.Image.prototype._initFilters.call(n,n.filters,(function(r){n.filters=r||[],i.Image.prototype._initFilters.call(n,[n.resizeFilter],(function(r){n.resizeFilter=r[0],i.util.enlivenObjectEnlivables(n,n,(function(){var r=new i.Image(t,n);e(r,!1)}))}))}))}),null,n.crossOrigin)},i.Image.fromURL=function(t,e,n){i.util.loadImage(t,(function(t,r){e&&e(new i.Image(t,n),r)}),null,n&&n.crossOrigin)},i.Image.ATTRIBUTE_NAMES=i.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),i.Image.fromElement=function(t,n,r){var o=i.parseAttributes(t,i.Image.ATTRIBUTE_NAMES);i.Image.fromURL(o["xlink:href"],n,e(r?i.util.object.clone(r):{},o))})}(e),i.util.object.extend(i.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten())},fxStraighten:function(t){t=t||{};var e=function(){},n=t.onComplete||e,r=t.onChange||e,o=this;return i.util.animate({target:this,startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){o.rotate(t),r()},onComplete:function(){o.setCoords(),n()}})}}),i.util.object.extend(i.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound})}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}i.isWebglSupported=function(e){if(i.isLikelyNode)return!1;e=e||i.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),r=n.getContext("webgl")||n.getContext("experimental-webgl"),o=!1;if(r){i.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),o=i.maxTextureSize>=e;for(var a=["highp","mediump","lowp"],s=0;s<3;s++)if(t(r,a[s])){i.webGlPrecision=a[s];break}}return this.isSupported=o,o},i.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,r="undefined"!==typeof window.performance;try{new ImageData(1,1),n=!0}catch(g){n=!1}var o="undefined"!==typeof ArrayBuffer,a="undefined"!==typeof Uint8ClampedArray;if(r&&n&&o&&a){var s=i.util.createCanvasElement(),l=new ArrayBuffer(t*e*4);if(i.forceGLPutImageData)return this.imageBuffer=l,void(this.copyGLTo2D=u);var h,f,d,p={imageBuffer:l,destinationWidth:t,destinationHeight:e,targetCanvas:s};s.width=t,s.height=e,h=window.performance.now(),c.call(p,this.gl,p),f=window.performance.now()-h,h=window.performance.now(),u.call(p,this.gl,p),d=window.performance.now()-h,f>d?(this.imageBuffer=l,this.copyGLTo2D=u):this.copyGLTo2D=c}},createWebGLCanvas:function(t,e){var n=i.util.createCanvasElement();n.width=t,n.height=e;var r={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},o=n.getContext("webgl",r);o||(o=n.getContext("experimental-webgl",r)),o&&(o.clearColor(0,0,0,0),this.canvas=n,this.gl=o)},applyFilters:function(t,e,n,i,r,o){var a,s=this.gl;o&&(a=this.getCachedTexture(o,e));var c={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:s,sourceTexture:this.createTexture(s,n,i,!a&&e),targetTexture:this.createTexture(s,n,i),originalTexture:a||this.createTexture(s,n,i,!a&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},u=s.createFramebuffer();return s.bindFramebuffer(s.FRAMEBUFFER,u),t.forEach((function(t){t&&t.applyTo(c)})),l(c),this.copyGLTo2D(s,c),s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(c.sourceTexture),s.deleteTexture(c.targetTexture),s.deleteFramebuffer(u),r.getContext("2d").setTransform(1,0,0,1,0,0),c},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:c,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}i.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var o=r.getContext("2d");o.drawImage(e,0,0,n,i);var a=o.getImageData(0,0,n,i),s=o.getImageData(0,0,n,i),l={sourceWidth:n,sourceHeight:i,imageData:a,originalEl:e,originalImageData:s,canvasEl:r,ctx:o,filterBackend:this};return t.forEach((function(t){t.applyTo(l)})),l.imageData.width===n&&l.imageData.height===i||(r.width=l.imageData.width,r.height=l.imageData.height),o.putImageData(l.imageData,0,0),l}}}(),i.Image=i.Image||{},i.Image.filters=i.Image.filters||{},i.Image.filters.BaseFilter=i.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==i.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+i.webGlPrecision+" float"));var r=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(r,n),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var o=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(o));var a=t.createProgram();if(t.attachShader(a,r),t.attachShader(a,o),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(a));var s=this.getAttributeLocations(t,a),l=this.getUniformLocations(t,a)||{};return l.uStepW=t.getUniformLocation(a,"uStepW"),l.uStepH=t.getUniformLocation(a,"uStepH"),{program:a,attributeLocations:s,uniformLocations:l}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(e=t.destinationWidth,n=t.destinationHeight,t.sourceWidth===e&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=i.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);0===t.pass&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),i.Image.filters.BaseFilter.fromObject=function(t,e){var n=new i.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.ColorMatrix=i(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,o,a=t.imageData,s=a.data,l=s.length,c=this.matrix,u=this.colorsOnly;for(o=0;o<l;o+=4)e=s[o],n=s[o+1],i=s[o+2],u?(s[o]=e*c[0]+n*c[1]+i*c[2]+255*c[4],s[o+1]=e*c[5]+n*c[6]+i*c[7]+255*c[9],s[o+2]=e*c[10]+n*c[11]+i*c[12]+255*c[14]):(r=s[o+3],s[o]=e*c[0]+n*c[1]+i*c[2]+r*c[3]+255*c[4],s[o+1]=e*c[5]+n*c[6]+i*c[7]+r*c[8]+255*c[9],s[o+2]=e*c[10]+n*c[11]+i*c[12]+r*c[13]+255*c[14],s[o+3]=e*c[15]+n*c[16]+i*c[17]+r*c[18]+255*c[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]],r=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,i),t.uniform4fv(e.uConstants,r)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Brightness=i(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData,i=n.data,r=i.length,o=Math.round(255*this.brightness);for(e=0;e<r;e+=4)i[e]=i[e]+o,i[e+1]=i[e+1]+o,i[e+2]=i[e+2]+o}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Convolute=r(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,o,a,s,l,c,u,h,f,d,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),_=p.width,b=p.height,x=t.ctx.createImageData(_,b),w=x.data,S=this.opaque?1:0;for(h=0;h<b;h++)for(u=0;u<_;u++){for(o=4*(h*_+u),e=0,n=0,i=0,r=0,d=0;d<v;d++)for(f=0;f<v;f++)s=h+d-y,a=u+f-y,s<0||s>=b||a<0||a>=_||(l=4*(s*_+a),c=m[d*v+f],e+=g[l]*c,n+=g[l+1]*c,i+=g[l+2]*c,S||(r+=g[l+3]*c));w[o]=e,w[o+1]=n,w[o+2]=i,w[o+3]=S?g[o+3]:r}t.imageData=x},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Grayscale=i(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,i=t.imageData,r=i.data,o=r.length,a=this.mode;for(e=0;e<o;e+=4)"average"===a?n=(r[e]+r[e+1]+r[e+2])/3:"lightness"===a?n=(Math.min(r[e],r[e+1],r[e+2])+Math.max(r[e],r[e+1],r[e+2]))/2:"luminosity"===a&&(n=.21*r[e]+.72*r[e+1]+.07*r[e+2]),r[e]=n,r[e+1]=n,r[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;if(!t.programCache.hasOwnProperty(e)){var n=this.fragmentSource[this.mode];t.programCache[e]=this.createProgram(t.context,n)}return t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){var n=1;t.uniform1i(e.uMode,n)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Invert=i(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData,i=n.data,r=i.length;for(e=0;e<r;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.Noise=r(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i=t.imageData,r=i.data,o=r.length,a=this.noise;for(e=0,o=r.length;e<o;e+=4)n=(.5-Math.random())*a,r[e]+=n,r[e+1]+=n,r[e+2]+=n}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Pixelate=i(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,i,r,o,a,s,l,c,u,h,f=t.imageData,d=f.data,p=f.height,g=f.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(e=4*n*g+4*i,r=d[e],o=d[e+1],a=d[e+2],s=d[e+3],u=Math.min(n+this.blocksize,p),h=Math.min(i+this.blocksize,g),l=n;l<u;l++)for(c=i;c<h;c++)e=4*l*g+4*c,d[e]=r,d[e+1]=o,d[e+2]=a,d[e+3]=s},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters,r=e.util.createClass;i.RemoveColor=r(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,o,a=t.imageData,s=a.data,l=255*this.distance,c=new e.Color(this.color).getSource(),u=[c[0]-l,c[1]-l,c[2]-l],h=[c[0]+l,c[1]+l,c[2]+l];for(n=0;n<s.length;n+=4)i=s[n],r=s[n+1],o=s[n+2],i>u[0]&&r>u[1]&&o>u[2]&&i<h[0]&&r<h[1]&&o<h[2]&&(s[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),o=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],a=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,o),t.uniform4fv(n.uHigh,a)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var o in r)n[o]=i(n.ColorMatrix,{type:o,matrix:r[o],mainParameter:!1,colorsOnly:!0}),e.Image.filters[o].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendColor=i(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,i,r,o,a,s,l,c=t.imageData,u=c.data,h=u.length,f=1-this.alpha;l=new e.Color(this.color).getSource(),n=l[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<h;d+=4)switch(o=u[d],a=u[d+1],s=u[d+2],this.mode){case"multiply":u[d]=o*n/255,u[d+1]=a*i/255,u[d+2]=s*r/255;break;case"screen":u[d]=255-(255-o)*(255-n)/255,u[d+1]=255-(255-a)*(255-i)/255,u[d+2]=255-(255-s)*(255-r)/255;break;case"add":u[d]=o+n,u[d+1]=a+i,u[d+2]=s+r;break;case"diff":case"difference":u[d]=Math.abs(o-n),u[d+1]=Math.abs(a-i),u[d+2]=Math.abs(s-r);break;case"subtract":u[d]=o-n,u[d+1]=a-i,u[d+2]=s-r;break;case"darken":u[d]=Math.min(o,n),u[d+1]=Math.min(a,i),u[d+2]=Math.min(s,r);break;case"lighten":u[d]=Math.max(o,n),u[d+1]=Math.max(a,i),u[d+2]=Math.max(s,r);break;case"overlay":u[d]=n<128?2*o*n/255:255-2*(255-o)*(255-n)/255,u[d+1]=i<128?2*a*i/255:255-2*(255-a)*(255-i)/255,u[d+2]=r<128?2*s*r/255:255-2*(255-s)*(255-r)/255;break;case"exclusion":u[d]=n+o-2*n*o/255,u[d+1]=i+a-2*i*a/255,u[d+2]=r+s-2*r*s/255;break;case"tint":u[d]=n+o*f,u[d+1]=i+a*f,u[d+2]=r+s*f}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters,i=e.util.createClass;n.BlendImage=i(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image,e=t._element.width,n=t._element.height;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/n,1]},applyTo2d:function(t){var n,i,r,o,a,s,l,c,u,h,f,d=t.imageData,p=t.filterBackend.resources,g=d.data,m=g.length,v=d.width,y=d.height,_=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),u=p.blendImage,h=u.getContext("2d"),u.width!==v||u.height!==y?(u.width=v,u.height=y):h.clearRect(0,0,v,y),h.setTransform(_.scaleX,0,0,_.scaleY,_.left,_.top),h.drawImage(_._element,0,0,v,y),f=h.getImageData(0,0,v,y).data;for(var b=0;b<m;b+=4)switch(a=g[b],s=g[b+1],l=g[b+2],c=g[b+3],n=f[b],i=f[b+1],r=f[b+2],o=f[b+3],this.mode){case"multiply":g[b]=a*n/255,g[b+1]=s*i/255,g[b+2]=l*r/255,g[b+3]=c*o/255;break;case"mask":g[b+3]=o;break}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,(function(i){var r=e.util.object.clone(t);r.image=i,n(new e.Image.filters.BlendImage(r))}))}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,o=Math.abs,a=Math.round,s=Math.sin,l=Math.ceil,c=e.Image.filters,u=e.util.createClass;c.Resize=u(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){var t=this.tempScale;return Math.ceil(this.lanczosLobes/t)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach((function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"})),n+="  gl_FragColor = color / sum;\n",n+="}",n},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;e*=Math.PI;var n=e/t;return s(e)/e*s(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,o=e.width,s=e.height,l=a(o*n),c=a(s*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,o,s,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,o,s,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,o,s,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,o,s,l,c)),t.imageData=r},sliceByTwo:function(t,n,r,o,a){var s,l,c=t.imageData,u=.5,h=!1,f=!1,d=n*u,p=r*u,g=e.filterBackend.resources,m=0,v=0,y=n,_=0;g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),s=g.sliceByTwo,(s.width<1.5*n||s.height<r)&&(s.width=1.5*n,s.height=r),l=s.getContext("2d"),l.clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),o=i(o),a=i(a);while(!h||!f)n=d,r=p,o<i(d*u)?d=i(d*u):(d=o,h=!0),a<i(p*u)?p=i(p*u):(p=a,f=!0),l.drawImage(s,m,v,n,r,y,_,d,p),m=y,v=_,_+=p;return l.getImageData(m,v,o,a)},lanczosResize:function(t,e,a,s,c){function u(t){var l,T,O,C,M,A,D,E,I,P,L;for(w.x=(t+.5)*g,S.x=i(w.x),l=0;l<c;l++){for(w.y=(l+.5)*m,S.y=i(w.y),M=0,A=0,D=0,E=0,I=0,T=S.x-_;T<=S.x+_;T++)if(!(T<0||T>=e)){P=i(1e3*o(T-w.x)),x[P]||(x[P]={});for(var k=S.y-b;k<=S.y+b;k++)k<0||k>=a||(L=i(1e3*o(k-w.y)),x[P][L]||(x[P][L]=p(r(n(P*v,2)+n(L*y,2))/1e3)),O=x[P][L],O>0&&(C=4*(k*e+T),M+=O,A+=O*h[C],D+=O*h[C+1],E+=O*h[C+2],I+=O*h[C+3]))}C=4*(l*s+t),d[C]=A/M,d[C+1]=D/M,d[C+2]=E/M,d[C+3]=I/M}return++t<s?u(t):f}var h=t.imageData.data,f=t.ctx.createImageData(s,c),d=f.data,p=this.lanczosCreate(this.lanczosLobes),g=this.rcpScaleX,m=this.rcpScaleY,v=2/this.rcpScaleX,y=2/this.rcpScaleY,_=l(g*this.lanczosLobes/2),b=l(m*this.lanczosLobes/2),x={},w={},S={};return u(0)},bilinearFiltering:function(t,e,n,r,o){var a,s,l,c,u,h,f,d,p,g,m,v,y,_=0,b=this.rcpScaleX,x=this.rcpScaleY,w=4*(e-1),S=t.imageData,T=S.data,O=t.ctx.createImageData(r,o),C=O.data;for(f=0;f<o;f++)for(d=0;d<r;d++)for(u=i(b*d),h=i(x*f),p=b*d-u,g=x*f-h,y=4*(h*e+u),m=0;m<4;m++)a=T[y+m],s=T[y+4+m],l=T[y+w+m],c=T[y+w+4+m],v=a*(1-p)*(1-g)+s*p*(1-g)+l*g*(1-p)+c*p*g,C[_++]=v;return O},hermiteFastResize:function(t,e,n,a,s){for(var c=this.rcpScaleX,u=this.rcpScaleY,h=l(c/2),f=l(u/2),d=t.imageData,p=d.data,g=t.ctx.createImageData(a,s),m=g.data,v=0;v<s;v++)for(var y=0;y<a;y++){for(var _=4*(y+v*a),b=0,x=0,w=0,S=0,T=0,O=0,C=0,M=(v+.5)*u,A=i(v*u);A<(v+1)*u;A++)for(var D=o(M-(A+.5))/f,E=(y+.5)*c,I=D*D,P=i(y*c);P<(y+1)*c;P++){var L=o(E-(P+.5))/h,k=r(I+L*L);k>1&&k<-1||(b=2*k*k*k-3*k*k+1,b>0&&(L=4*(P+A*e),C+=b*p[L+3],w+=b,p[L+3]<255&&(b=b*p[L+3]/250),S+=b*p[L],T+=b*p[L+1],O+=b*p[L+2],x+=b))}m[_]=S/x,m[_+1]=T/x,m[_+2]=O/x,m[_+3]=C/w}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Contrast=i(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData,i=n.data,r=i.length,o=Math.floor(255*this.contrast),a=259*(o+255)/(255*(259-o));for(e=0;e<r;e+=4)i[e]=a*(i[e]-128)+128,i[e+1]=a*(i[e+1]-128)+128,i[e+2]=a*(i[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Saturation=i(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData,r=i.data,o=r.length,a=-this.saturation;for(e=0;e<o;e+=4)n=Math.max(r[e],r[e+1],r[e+2]),r[e]+=n!==r[e]?(n-r[e])*a:0,r[e+1]+=n!==r[e+1]?(n-r[e+1])*a:0,r[e+2]+=n!==r[e+2]?(n-r[e+2])*a:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Vibrance=i(n.BaseFilter,{type:"Vibrance",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uVibrance;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat max = max(color.r, max(color.g, color.b));\nfloat avg = (color.r + color.g + color.b) / 3.0;\nfloat amt = (abs(max - avg) * 2.0) * uVibrance;\ncolor.r += max != color.r ? (max - color.r) * amt : 0.00;\ncolor.g += max != color.g ? (max - color.g) * amt : 0.00;\ncolor.b += max != color.b ? (max - color.b) * amt : 0.00;\ngl_FragColor = color;\n}",vibrance:0,mainParameter:"vibrance",applyTo2d:function(t){if(0!==this.vibrance){var e,n,i,r,o=t.imageData,a=o.data,s=a.length,l=-this.vibrance;for(e=0;e<s;e+=4)n=Math.max(a[e],a[e+1],a[e+2]),i=(a[e]+a[e+1]+a[e+2])/3,r=2*Math.abs(n-i)/255*l,a[e]+=n!==a[e]?(n-a[e])*r:0,a[e+1]+=n!==a[e+1]?(n-a[e+1])*r:0,a[e+2]+=n!==a[e+2]?(n-a[e+2])*r:0}},getUniformLocations:function(t,e){return{uVibrance:t.getUniformLocation(e,"uVibrance")}},sendUniformData:function(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}}),e.Image.filters.Vibrance.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Blur=i(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,o=t.imageData.width,a=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),n=r.blurLayer1,i=r.blurLayer2,n.width===o&&n.height===a||(i.width=n.width=o,i.height=n.height=a);var s,l,c,u,h=n.getContext("2d"),f=i.getContext("2d"),d=15,p=.06*this.blur*.5;for(h.putImageData(t.imageData,0,0),f.clearRect(0,0,o,a),u=-d;u<=d;u++)s=(Math.random()-.5)/4,l=u/d,c=p*l*o+s,f.globalAlpha=1-Math.abs(l),f.drawImage(n,c,s),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);for(u=-d;u<=d;u++)s=(Math.random()-.5)/4,l=u/d,c=p*l*a+s,f.globalAlpha=1-Math.abs(l),f.drawImage(n,s,c),h.drawImage(i,0,0),f.globalAlpha=1,f.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var g=t.ctx.getImageData(0,0,n.width,n.height);return h.globalAlpha=1,h.clearRect(0,0,n.width,n.height),g},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Gamma=i(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData,i=n.data,r=this.gamma,o=i.length,a=1/r[0],s=1/r[1],l=1/r[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,o=256;e<o;e++)this.rVals[e]=255*Math.pow(e/255,a),this.gVals[e]=255*Math.pow(e/255,s),this.bVals[e]=255*Math.pow(e/255,l);for(e=0,o=i.length;e<o;e+=4)i[e]=this.rVals[i[e]],i[e+1]=this.gVals[i[e+1]],i[e+2]=this.bVals[i[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.Composed=i(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach((function(e){e.applyTo(t)}))},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map((function(t){return t.toObject()}))})},isNeutralState:function(){return!this.subFilters.some((function(t){return!t.isNeutralState()}))}}),e.Image.filters.Composed.fromObject=function(t,n){var i=t.subFilters||[],r=i.map((function(t){return new e.Image.filters[t.type](t)})),o=new e.Image.filters.Composed({subFilters:r});return n&&n(o),o}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass;n.HueRotation=i(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=1/3,o=Math.sqrt(r)*i,a=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+a/3,this.matrix[1]=r*a-o,this.matrix[2]=r*a+o,this.matrix[5]=r*a+o,this.matrix[6]=n+r*a,this.matrix[7]=r*a-o,this.matrix[10]=r*a-o,this.matrix[11]=r*a+o,this.matrix[12]=n+r*a},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var i="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles direction path pathStartOffset pathSide pathAlign".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(i),cacheProperties:e.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,pathStartOffset:0,pathSide:"left",pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,i,r,o,a,s=0,l=this._textLines.length;s<l;s++)if(("justify"===this.textAlign||s!==l-1&&!this.isEndOfWrapping(s))&&(i=0,r=this._textLines[s],e=this.getLineWidth(s),e<this.width&&(a=this.textLines[s].match(this._reSpacesAndTabs)))){n=a.length,t=(this.width-e)/n;for(var c=0,u=r.length;c<=u;c++)o=this.__charBounds[s][c],this._reSpaceAndTab.test(r[c])?(o.width+=t,o.kernedWidth+=t,o.left+=i,i+=t):o.left+=i}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){var e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){if(t.textBaseline="alphabetical",this.path)switch(this.pathAlign){case"center":t.textBaseline="middle";break;case"ascender":t.textBaseline="top";break;case"descender":t.textBaseline="bottom";break}t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,o){this._renderChars(t,e,n,i,r,o)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,i,r,o,a,s,l=t.fillStyle,c=this._getLeftOffset(),u=this._getTopOffset(),h=0,f=0,d=this.path,p=0,g=this._textLines.length;p<g;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){i=this._textLines[p],n=this._getLineLeftOffset(p),f=0,h=0,r=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=i.length;m<v;m++)o=this.__charBounds[p][m],a=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),d?(t.save(),t.translate(o.renderLeft,o.renderTop),t.rotate(o.angle),t.fillStyle=a,a&&t.fillRect(-o.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),o.width,e/this.lineHeight),t.restore()):a!==r?(s=c+n+h,"rtl"===this.direction&&(s=this.width-s-f),t.fillStyle=r,r&&t.fillRect(s,u,f,e/this.lineHeight),h=o.left,f=o.width,r=a):f+=o.kernedWidth;a&&!d&&(s=c+n+h,"rtl"===this.direction&&(s=this.width-s-f),t.fillStyle=a,t.fillRect(s,u,f,e/this.lineHeight)),u+=e}else u+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,n,i){var r,o,a,s,l=this.getFontCache(e),c=this._getFontDeclaration(e),u=this._getFontDeclaration(i),h=n+t,f=c===u,d=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(a=l[n]),void 0!==l[t]&&(s=r=l[t]),f&&void 0!==l[h]&&(o=l[h],s=o-a),void 0===r||void 0===a||void 0===o){var p=this.getMeasuringContext();this._setTextStyles(p,e,!0)}return void 0===r&&(s=r=p.measureText(t).width,l[t]=r),void 0===a&&f&&n&&(a=p.measureText(n).width,l[n]=a),f&&void 0===o&&(o=p.measureText(h).width,l[h]=o,s=o-a),{width:r*d,kernedWidth:s*d}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var n,i,r,o,a,s,l=0,c=this._textLines[t],u=0,h=new Array(c.length),f=0,d=this.path,p="right"===this.pathSide;for(this.__charBounds[t]=h,n=0;n<c.length;n++)i=c[n],o=this._getGraphemeBox(i,t,n,r),h[n]=o,l+=o.kernedWidth,r=i;if(h[n]={left:o?o.left+o.width:0,width:0,kernedWidth:0,height:this.fontSize},d){switch(s=d.segmentsInfo[d.segmentsInfo.length-1].length,a=e.util.getPointOnPath(d.path,0,d.segmentsInfo),a.x+=d.pathOffset.x,a.y+=d.pathOffset.y,this.textAlign){case"left":f=p?s-l:0;break;case"center":f=(s-l)/2;break;case"right":f=p?0:s-l;break}for(f+=this.pathStartOffset*(p?-1:1),n=p?c.length-1:0;p?n>=0:n<c.length;p?n--:n++)o=h[n],f>s?f%=s:f<0&&(f+=s),this._setGraphemeOnPath(f,o,a),f+=o.kernedWidth}return{width:l,numOfSpaces:u}},_setGraphemeOnPath:function(t,n,i){var r=t+n.kernedWidth/2,o=this.path,a=e.util.getPointOnPath(o.path,r,o.segmentsInfo);n.renderLeft=a.x-i.x,n.renderTop=a.y-i.y,n.angle=a.angle+("right"===this.pathSide?Math.PI:0)},_getGraphemeBox:function(t,e,n,i,r){var o,a=this.getCompleteStyleDeclaration(e,n),s=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,a,i,s),c=l.kernedWidth,u=l.width;0!==this.charSpacing&&(o=this._getWidthOfCharSpacing(),u+=o,c+=o);var h={width:u,left:0,height:a.fontSize,kernedWidth:c,deltaY:a.deltaY};if(n>0&&!r){var f=this.__charBounds[e][n-1];h.left=f.left+f.width+l.kernedWidth-l.width}return h},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),o=0,a=this._textLines.length;o<a;o++){var s=this.getHeightOfLine(o),l=s/this.lineHeight,c=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],i+c,r+n+l,o),n+=s}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,n,i,r,o){var a,s,l,c,u,h=this.getHeightOfLine(o),f=-1!==this.textAlign.indexOf("justify"),d="",p=0,g=this.path,m=!f&&0===this.charSpacing&&this.isEmptyStyles(o)&&!g,v="ltr"===this.direction,y="ltr"===this.direction?1:-1,_=e.canvas.getAttribute("dir");if(e.save(),_!==this.direction&&(e.canvas.setAttribute("dir",v?"ltr":"rtl"),e.direction=v?"ltr":"rtl",e.textAlign=v?"left":"right"),r-=h*this._fontSizeFraction/this.lineHeight,m)return this._renderChar(t,e,o,0,n.join(""),i,r,h),void e.restore();for(var b=0,x=n.length-1;b<=x;b++)c=b===x||this.charSpacing||g,d+=n[b],l=this.__charBounds[o][b],0===p?(i+=y*(l.kernedWidth-l.width),p+=l.width):p+=l.kernedWidth,f&&!c&&this._reSpaceAndTab.test(n[b])&&(c=!0),c||(a=a||this.getCompleteStyleDeclaration(o,b),s=this.getCompleteStyleDeclaration(o,b+1),c=this._hasStyleChanged(a,s)),c&&(g?(e.save(),e.translate(l.renderLeft,l.renderTop),e.rotate(l.angle),this._renderChar(t,e,o,b,d,-p/2,0,h),e.restore()):(u=i,this._renderChar(t,e,o,b,d,u,r,h)),d="",a=s,i+=y*p,p=0);e.restore()},_applyPatternGradientTransformText:function(t){var n,i=e.util.createCanvasElement(),r=this.width+this.strokeWidth,o=this.height+this.strokeWidth;return i.width=r,i.height=o,n=i.getContext("2d"),n.beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,o),n.lineTo(0,o),n.closePath(),n.translate(r/2,o/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(i,"no-repeat")},handleFiller:function(t,e,n){var i,r;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(i=-this.width/2,r=-this.height/2,t.translate(i,r),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(t[e]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,n,i,r,o,a){var s,l,c=this._getStyleDeclaration(n,i),u=this.getCompleteStyleDeclaration(n,i),h="fillText"===t&&u.fill,f="strokeText"===t&&u.stroke&&u.strokeWidth;(f||h)&&(e.save(),h&&(s=this._setFillStyles(e,u)),f&&(l=this._setStrokeStyles(e,u)),e.font=this._getFontDeclaration(u),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(a+=c.deltaY),h&&e.fillText(r,o-s.offsetX,a-s.offsetY),f&&e.strokeText(r,o-l.offsetX,a-l.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),o=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY"),a={fontSize:r*n.size,deltaY:o+r*n.baseline};return this.setSelectionStyles(a,t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,r=this.direction,o=0,a=this.isEndOfWrapping(t);return"justify"===i||"justify-center"===i&&!a||"justify-right"===i&&!a||"justify-left"===i&&!a?0:("center"===i&&(o=n/2),"right"===i&&(o=n),"justify-center"===i&&(o=n/2),"justify-right"===i&&(o=n),"rtl"===r&&(o-=n),o)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){if(void 0!==this.__lineWidths[t])return this.__lineWidths[t];var e=this.measureLine(t),n=e.width;return this.__lineWidths[t]=n,n},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&"undefined"!==typeof i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,o,a,s,l,c,u,h,f,d,p,g,m,v,y=this._getLeftOffset(),_=this._getTopOffset(),b=this.path,x=this._getWidthOfCharSpacing(),w=this.offsets[e],S=0,T=this._textLines.length;S<T;S++)if(n=this.getHeightOfLine(S),this[e]||this.styleHas(e,S)){l=this._textLines[S],g=n/this.lineHeight,o=this._getLineLeftOffset(S),h=0,f=0,c=this.getValueOfPropertyAt(S,0,e),v=this.getValueOfPropertyAt(S,0,"fill"),u=_+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(S,0),a=this.getValueOfPropertyAt(S,0,"deltaY");for(var O=0,C=l.length;O<C;O++)if(d=this.__charBounds[S][O],p=this.getValueOfPropertyAt(S,O,e),m=this.getValueOfPropertyAt(S,O,"fill"),r=this.getHeightOfChar(S,O),s=this.getValueOfPropertyAt(S,O,"deltaY"),b&&p&&m)t.save(),t.fillStyle=v,t.translate(d.renderLeft,d.renderTop),t.rotate(d.angle),t.fillRect(-d.kernedWidth/2,w*r+s,d.kernedWidth,this.fontSize/15),t.restore();else if((p!==c||m!==v||r!==i||s!==a)&&f>0){var M=y+o+h;"rtl"===this.direction&&(M=this.width-M-f),c&&v&&(t.fillStyle=v,t.fillRect(M,u+w*i+a,f,this.fontSize/15)),h=d.left,f=d.width,c=p,v=m,i=r,a=s}else f+=d.kernedWidth;M=y+o+h;"rtl"===this.direction&&(M=this.width-M-f),t.fillStyle=m,p&&m&&t.fillRect(M,u+w*i+a,f-x,this.fontSize/15),_+=n}else _+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,o=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,a=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||o?i.fontFamily:'"'+i.fontFamily+'"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",a].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=["\n"],o=[],a=0;a<n.length;a++)i[a]=e.util.string.graphemeSplit(n[a]),o=o.concat(i[a],r);return o.pop(),{_unwrappedLines:i,lines:n,graphemeText:o,graphemeLines:i}},toObject:function(t){var e=i.concat(t),r=this.callSuper("toObject",e);return r.styles=n(this.styles,!0),r.path&&(r.path=this.path.toObject()),r},set:function(t,e){this.callSuper("set",t,e);var n=!1,i=!1;if("object"===typeof t)for(var r in t)"path"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||"path"===r;else n=-1!==this._dimensionAffectingProps.indexOf(t),i="path"===t;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var o=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),a=o.textAnchor||"left";if(r=e.util.object.extend(r?n(r):{},o),r.top=r.top||0,r.left=r.left||0,o.textDecoration){var s=o.textDecoration;-1!==s.indexOf("underline")&&(r.underline=!0),-1!==s.indexOf("overline")&&(r.overline=!0),-1!==s.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in o&&(r.left+=o.dx),"dy"in o&&(r.top+=o.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var u=new e.Text(l,r),h=u.getScaledHeight()/u.height,f=(u.height+u.strokeWidth)*u.lineHeight-u.height,d=f*h,p=u.getScaledHeight()+d,g=0;"center"===a&&(g=u.getScaledWidth()/2),"right"===a&&(g=u.getScaledWidth()),u.set({left:u.left-g,top:u.top-(p-u.fontSize*(.07+u._fontSizeFraction))/u.lineHeight,strokeWidth:"undefined"!==typeof c?c:1}),i(u)},e.Text.fromObject=function(t,i){var r=n(t),o=t.path;return delete r.path,e.Object._fromObject("Text",r,(function(t){o?e.Object._fromObject("Path",o,(function(e){t.set("path",e),i(t)}),"path"):i(t)}),"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),function(){i.util.object.extend(i.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if("undefined"!==typeof t&&!this.styles[t])return!0;var e="undefined"===typeof t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if("undefined"!==typeof e&&!this.styles[e])return!1;var n="undefined"===typeof e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if("undefined"!==typeof n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,i=this.styles,r=0,o=!0,a=0;for(var s in i){for(var l in e=0,i[s]){var c=i[s][l],u=c.hasOwnProperty(t);r++,u?(n?c[t]!==n&&(o=!1):n=c[t],c[t]===this[t]&&delete c[t]):o=!1,0!==Object.keys(c).length?e++:delete i[s][l]}0===e&&delete i[s]}for(var h=0;h<this._textLines.length;h++)a+=this._textLines[h].length;o&&r===a&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n],e)delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),i.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){"undefined"===typeof t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){"undefined"===typeof t&&(t=this.selectionStart||0),"undefined"===typeof e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t),i=e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex);return i||{}},setSelectionStyles:function(t,e,n){"undefined"===typeof e&&(e=this.selectionStart||0),"undefined"===typeof n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},o=0;o<this._styleProperties.length;o++)n=this._styleProperties[o],r[n]="undefined"===typeof i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}})}(),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}i.IText=i.util.createClass(i.Text,i.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){"undefined"===typeof t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,o=0,a=0,s=this.get2DCursorLocation(t);i=s.charIndex,n=s.lineIndex;for(var l=0;l<n;l++)o+=this.getHeightOfLine(l);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(a=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(a-=this._getWidthOfCharSpacing()),r={top:o,left:e+(a>0?a:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,o=this.getValueOfPropertyAt(i,r,"fontSize"),a=this.scaleX*this.canvas.getZoom(),s=this.cursorWidth/a,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-o*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-s/2,l+t.top+c,s,o)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),o=this.get2DCursorLocation(n),a=this.get2DCursorLocation(i),s=o.lineIndex,l=a.lineIndex,c=o.charIndex<0?0:o.charIndex,u=a.charIndex<0?0:a.charIndex,h=s;h<=l;h++){var f=this._getLineLeftOffset(h)||0,d=this.getHeightOfLine(h),p=0,g=0,m=0;if(h===s&&(g=this.__charBounds[s][c].left),h>=s&&h<l)m=r&&!this.isEndOfWrapping(h)?this.width:this.getLineWidth(h)||5;else if(h===l)if(0===u)m=this.__charBounds[l][u].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][u-1].left+this.__charBounds[l][u-1].width-v}p=d,(this.lineHeight<1||h===l&&this.lineHeight>1)&&(d/=this.lineHeight);var y=t.left+f+g,_=m-g,b=d,x=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",b=1,x=d):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(y=this.width-y-_),e.fillRect(y,t.top+t.topOffset+x,_,b),t.topOffset+=p}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}}),i.IText.fromObject=function(e,n){if(t(e),e.styles)for(var r in e.styles)for(var o in e.styles[r])t(e.styles[r][o]);i.Object._fromObject("IText",e,n,"text")}}(),function(){var t=i.util.object.clone;i.util.object.extend(i.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",(function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))}))},initRemovedHandler:function(){var t=this;this.on("removed",(function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],i.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))}))},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.__isMousedown=!1}))},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout((function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")}),100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout((function(){e._tick()}),n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n--;while(/\S/.test(this._text[n])&&n>-1)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))while(this._reSpace.test(this._text[n]))e++,n++;while(/\S/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},findLineBoundaryLeft:function(t){var e=0,n=t-1;while(!/\n/.test(this._text[n])&&n>-1)e++,n--;return t-e},findLineBoundaryRight:function(t){var e=0,n=t;while(!/\n/.test(this._text[n])&&n<this._text.length)e++,n++;return t+e},searchWordBoundary:function(t,e){var n=this._text,r=this._reSpace.test(n[t])?t-1:t,o=n[r],a=i.reNonWord;while(!a.test(o)&&r>0&&r<n.length)r+=e,o=n[r];return a.test(o)&&(r+=1===e?0:1),r},selectWord:function(t){t=t||this.selectionStart;var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){t=t||this.selectionStart;var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach((function(t){t.selected=!1,t.isEditing&&t.exitEditing()}))},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var r=n.slice(0,t),o=i.util.string.graphemeSplit(r).length;if(t===e)return{selectionStart:o,selectionEnd:o};var a=n.slice(t,e),s=i.util.string.graphemeSplit(a).length;return{selectionStart:o,selectionEnd:o+s}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t),r=i.join("").length;if(t===e)return{selectionStart:r,selectionEnd:r};var o=n.slice(t,e),a=o.join("").length;return{selectionStart:r,selectionEnd:r+a}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),r=n.lineIndex,o=n.charIndex,a=this.getValueOfPropertyAt(r,o,"fontSize")*this.lineHeight,s=e.leftOffset,l=this.calcTransformMatrix(),c={x:e.left+s,y:e.top+e.topOffset+a},u=this.canvas.getRetinaScaling(),h=this.canvas.upperCanvasEl,f=h.width/u,d=h.height/u,p=f-a,g=d-a,m=h.clientWidth/f,v=h.clientHeight/d;return c=i.util.transformPoint(c,l),c=i.util.transformPoint(c,this.canvas.viewportTransform),c.x*=m,c.y*=v,c.x<0&&(c.x=0),c.x>p&&(c.x=p),c.y<0&&(c.y=0),c.y>g&&(c.y=g),c.x+=this.canvas._offset.left,c.y+=this.canvas._offset.top,{left:c.x+"px",top:c.y+"px",fontSize:a+"px",charHeight:a}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),o=this.get2DCursorLocation(e,!0),a=r.lineIndex,s=r.charIndex,l=o.lineIndex,c=o.charIndex;if(a!==l){if(this.styles[a])for(n=s;n<this._unwrappedTextLines[a].length;n++)delete this.styles[a][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)i=this.styles[l][n],i&&(this.styles[a]||(this.styles[a]={}),this.styles[a][s+n-c]=i);for(n=a+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,a-l)}else if(this.styles[a]){i=this.styles[a];var u,h,f=c-s;for(n=s;n<c;n++)delete i[n];for(h in this.styles[a])u=parseInt(h,10),u>=c&&(i[u-f]=i[h],delete i[h])}},shiftLineStyles:function(e,n){var i=t(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>e&&(this.styles[o+n]=i[o],i[o-n]||delete this.styles[o])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(e,n,i,r){var o,a={},s=!1,l=this._unwrappedTextLines[e].length===n;for(var c in i||(i=1),this.shiftLineStyles(e,i),this.styles[e]&&(o=this.styles[e][0===n?n:n-1]),this.styles[e]){var u=parseInt(c,10);u>=n&&(s=!0,a[u-n]=this.styles[e][c],l&&0===n||delete this.styles[e][c])}var h=!1;s&&!l&&(this.styles[e+i]=a,h=!0),h&&i--;while(i>0)r&&r[i-1]?this.styles[e+i]={0:t(r[i-1])}:o?this.styles[e+i]={0:t(o)}:delete this.styles[e+i],i--;this._forceClearCache=!0},insertCharStyleObject:function(e,n,i,r){this.styles||(this.styles={});var o=this.styles[e],a=o?t(o):{};for(var s in i||(i=1),a){var l=parseInt(s,10);l>=n&&(o[l+i]=a[l],a[l-i]||delete o[l])}if(this._forceClearCache=!0,r)while(i--)Object.keys(r[i]).length&&(this.styles[e]||(this.styles[e]={}),this.styles[e][n+i]=t(r[i]));else if(o){var c=o[n?n-1:1];while(c&&i--)this.styles[e][n+i]=t(c)}},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],o=0,a=0;a<t.length;a++)"\n"===t[a]?(o++,r[o]=0):r[o]++;r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),o&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],o);for(a=1;a<o;a++)r[a]>0?this.insertCharStyleObject(i.lineIndex+a,0,r[a],n):n&&this.styles[i.lineIndex+a]&&n[0]&&(this.styles[i.lineIndex+a][0]=n[0]),n=n&&n.slice(r[a]+1);r[a]>0&&this.insertCharStyleObject(i.lineIndex+a,0,r[a],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}})}(),i.util.object.extend(i.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t),n=this.selectionStart,i=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(n,i,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n,i=this.getLocalPointer(t),r=0,o=0,a=0,s=0,l=0,c=0,u=this._textLines.length;c<u;c++){if(!(a<=i.y))break;a+=this.getHeightOfLine(c)*this.scaleY,l=c,c>0&&(s+=this._textLines[c-1].length+this.missingNewlineOffset(c-1))}e=this._getLineLeftOffset(l),o=e*this.scaleX,n=this._textLines[l],"rtl"===this.direction&&(i.x=this.width*this.scaleX-i.x+o);for(var h=0,f=n.length;h<f;h++){if(r=o,o+=this.__charBounds[l][h].kernedWidth*this.scaleX,!(o<=i.x))break;s++}return this._getNewSelectionStartFromOffset(i,r,o,s,f)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=t.x-e,a=n-t.x,s=a>o||a<0?0:1,l=i+s;return this.flipX&&(l=r-l),l>this._text.length&&(l=this._text.length),l}}),i.util.object.extend(i.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=i.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; paddingｰtop: "+t.fontSize+";",this.hiddenTextareaContainer?this.hiddenTextareaContainer.appendChild(this.hiddenTextarea):i.document.body.appendChild(this.hiddenTextarea),i.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),i.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),i.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),i.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),i.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),i.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(i.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,r,o,a,s,l=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,c=this._text.length,u=l.length,h=u-c,f=this.selectionStart,d=this.selectionEnd,p=f!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var g=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),m=f>g.selectionStart;p?(n=this._text.slice(f,d),h+=d-f):u<c&&(n=m?this._text.slice(d+h,d):this._text.slice(f,f-h)),r=l.slice(g.selectionEnd-h,g.selectionEnd),n&&n.length&&(r.length&&(o=this.getSelectionStyles(f,f+1,!1),o=r.map((function(){return o[0]}))),p?(a=f,s=d):m?(a=d-n.length,s=d):(a=d,s=d+n.length),this.removeStyleFromTo(a,s)),r.length&&(e&&r.join("")===i.copiedText&&!i.disableStyleCopyPaste&&(o=i.copiedTextStyle),this.insertNewStyleBlock(r,f,o)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(i.copiedText=this.getSelectedText(),i.disableStyleCopyPaste?i.copiedTextStyle=null:i.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||i.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(n=this.__charBounds[t][e-1],i+=n.left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r+1,a),l=this._textLines[r].slice(o);return l.length+s+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var o=i.charIndex,a=this._getWidthBeforeCursor(r,o),s=this._getIndexOnLine(r-1,a),l=this._textLines[r].slice(0,o),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+s-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],o=this._getLineLeftOffset(t),a=o,s=0,l=0,c=r.length;l<c;l++)if(n=this.__charBounds[t][l].width,a+=n,a>e){i=!0;var u=a-n,h=a,f=Math.abs(u-e),d=Math.abs(h-e);s=d<f?l:l-1;break}return i||(s=r.length-1),s},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n="get"+t+"CursorOffset",i=this[n](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),0!==i&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){var e="left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,e.shiftKey?n+="Shift":n+="outShift",this[n](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){"undefined"===typeof e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,r){"undefined"===typeof r&&(r=n),r>n&&this.removeStyleFromTo(n,r);var o=i.util.string.graphemeSplit(t);this.insertNewStyleBlock(o,n,e),this._text=[].concat(this._text.slice(0,n),o,this._text.slice(r)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),function(){var t=i.util.toFixed,e=/  +/g;i.util.object.extend(i.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=!0,n=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",n?'text-decoration="'+n+'" ':"",'style="',this.getSvgStyles(e),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],o=t;this._setSVGBg(r);for(var a=0,s=this._textLines.length;a<s;a++)n=this._getLineLeftOffset(a),(this.textBackgroundColor||this.styleHas("textBackgroundColor",a))&&this._setSVGTextLineBg(r,a,e+n,o),this._setSVGTextLineText(i,a,e+n,o),o+=this.getHeightOfLine(a);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(n,r,o,a){var s=n!==n.trim()||n.match(e),l=this.getSvgSpanStyles(r,s),c=l?'style="'+l+'"':"",u=r.deltaY,h="",f=i.Object.NUM_FRACTION_DIGITS;return u&&(h=' dy="'+t(u,f)+'" '),['<tspan x="',t(o,f),'" y="',t(a,f),'" ',h,c,">",i.util.string.escapeXml(n),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,i){var r,o,a,s,l,c=this.getHeightOfLine(e),u=-1!==this.textAlign.indexOf("justify"),h="",f=0,d=this._textLines[e];i+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=d.length-1;p<=g;p++)l=p===g||this.charSpacing,h+=d[p],a=this.__charBounds[e][p],0===f?(n+=a.kernedWidth-a.width,f+=a.width):f+=a.kernedWidth,u&&!l&&this._reSpaceAndTab.test(d[p])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(e,p),o=this.getCompleteStyleDeclaration(e,p+1),l=this._hasStyleChangedForSvg(r,o)),l&&(s=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(h,s,n,i)),h="",r=o,n+=f,f=0)},_pushTextBgRect:function(e,n,r,o,a,s){var l=i.Object.NUM_FRACTION_DIGITS;e.push("\t\t<rect ",this._getFillAttributes(n),' x="',t(r,l),'" y="',t(o,l),'" width="',t(a,l),'" height="',t(s,l),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,o,a=this._textLines[e],s=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,u=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),h=0,f=a.length;h<f;h++)r=this.__charBounds[e][h],o=this.getValueOfPropertyAt(e,h,"textBackgroundColor"),o!==u?(u&&this._pushTextBgRect(t,u,n+c,i,l,s),c=r.left,l=r.width,u=o):l+=r.kernedWidth;o&&this._pushTextBgRect(t,o,n+c,i,l,s)},_getFillAttributes:function(t){var e=t&&"string"===typeof t?new i.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e=0,n=0,i=0;i<t;i++)e+=this.getHeightOfLine(i);return n=this.getHeightOfLine(i),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){var e=i.Object.prototype.getSvgStyles.call(this,t);return e+" white-space: pre;"}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},o=0;o<t.graphemeLines.length;o++)"\n"===t.graphemeText[i]&&o>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&o>0&&(n++,i++),r[o]={line:e,offset:n},i+=t.graphemeLines[o].length,n+=t.graphemeLines[o].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,i=0,r=t+1,o=!1,a=this._styleMap[t],s=this._styleMap[t+1];for(var l in a&&(t=a.line,i=a.offset),s&&(r=s.line,o=r===t,e=s.offset),n="undefined"===typeof t?this.styles:{line:this.styles[t]},n)for(var c in n[l])if(c>=i&&(!o||c<e))for(var u in n[l][c])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];t=i.line,e=i.offset+e,this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];t=n.line,e=n.offset+e,delete this.styles[t][e]},_getLineStyle:function(t){var e=this._styleMap[t];return!!this.styles[e.line]},_setLineStyle:function(t){var e=this._styleMap[t];this.styles[e.line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0,o=!0;n=n||0;for(var a=0,s=t.length;a<s;a++){var l=this._getGraphemeBox(t[a],e,a+n,i,o);r+=l.kernedWidth,i=t[a]}return r},_wrapLine:function(t,n,i,r){var o=0,a=this.splitByGrapheme,s=[],l=[],c=a?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),u="",h=0,f=a?"":" ",d=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();r=r||0;0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)u=a?c[y]:e.util.string.graphemeSplit(c[y]),d=this._measureWord(u,n,h),h+=u.length,o+=p+d-v,o>i&&!m?(s.push(l),l=[],o=d,m=!0):o+=v,m||a||l.push(f),l=l.concat(u),p=a?0:this._measureWord([f],n,h),h++,m=!1,d>g&&(g=d);return y&&s.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),s},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),o=0;o<i.length;o++)r[o]=i[o].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){return e.Object._fromObject("Textbox",t,n,"text")}}(e),function(){var t=i.controlsUtils,e=t.scaleSkewCursorStyleHandler,n=t.scaleCursorStyleHandler,r=t.scalingEqually,o=t.scalingYOrSkewingX,a=t.scalingXOrSkewingY,s=t.scaleOrSkewActionName,l=i.Object.prototype.controls;if(l.ml=new i.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.mr=new i.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:a,getActionName:s}),l.mb=new i.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:o,getActionName:s}),l.mt=new i.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:o,getActionName:s}),l.tl=new i.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.tr=new i.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:r}),l.bl=new i.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.br=new i.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:r}),l.mtr=new i.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),i.Textbox){var c=i.Textbox.prototype.controls={};c.mtr=l.mtr,c.tr=l.tr,c.br=l.br,c.tl=l.tl,c.bl=l.bl,c.mt=l.mt,c.mb=l.mb,c.mr=new i.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),c.ml=new i.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}(),function(){i.Object.ENLIVEN_PROPS.push("eraser");var t=i.Object.prototype._drawClipPath,e=i.Object.prototype.needsItsOwnCache,n=i.Object.prototype.toObject,r=i.Object.prototype.getSvgCommons,o=i.Object.prototype._createBaseClipPathSVGMarkup,a=i.Object.prototype._createBaseSVGMarkup;i.Object.prototype.cacheProperties.push("eraser"),i.Object.prototype.stateProperties.push("eraser"),i.util.object.extend(i.Object.prototype,{erasable:!0,eraser:void 0,needsItsOwnCache:function(){return e.call(this)||!!this.eraser},_drawClipPath:function(e,n){if(t.call(this,e,n),this.eraser){var i=this._getNonTransformedDimensions();this.eraser.isType("eraser")&&this.eraser.set({width:i.x,height:i.y}),t.call(this,e,this.eraser)}},toObject:function(t){var e=n.call(this,["erasable"].concat(t));return this.eraser&&!this.eraser.excludeFromExport&&(e.eraser=this.eraser.toObject(t)),e},getSvgCommons:function(){return r.call(this)+(this.eraser?'mask="url(#'+this.eraser.clipPathId+')" ':"")},_createEraserSVGMarkup:function(t){return this.eraser?(this.eraser.clipPathId="MASK_"+i.Object.__uid++,['<mask id="',this.eraser.clipPathId,'" >',this.eraser.toSVG(t),"</mask>","\n"].join("")):""},_createBaseClipPathSVGMarkup:function(t,e){return[this._createEraserSVGMarkup(e&&e.reviver),o.call(this,t,e)].join("")},_createBaseSVGMarkup:function(t,e){return[this._createEraserSVGMarkup(e&&e.reviver),a.call(this,t,e)].join("")}});var s=i.Group.prototype._restoreObjectsState;i.util.object.extend(i.Group.prototype,{_addEraserPathToObjects:function(t){this._objects.forEach((function(e){i.EraserBrush.prototype._addPathToObjectEraser.call(i.EraserBrush.prototype,e,t)}))},applyEraserToObjects:function(){var t=this,e=this.eraser;if(e){delete this.eraser;var n=t.calcTransformMatrix();e.clone((function(e){var r=t.clipPath;e.getObjects("path").forEach((function(e){var o=i.util.multiplyTransformMatrices(n,e.calcTransformMatrix());i.util.applyTransformToObject(e,o),r?r.clone((function(r){var o=i.EraserBrush.prototype.applyClipPathToPath.call(i.EraserBrush.prototype,e,r,n);t._addEraserPathToObjects(o)}),["absolutePositioned","inverted"]):t._addEraserPathToObjects(e)}))}))}},_restoreObjectsState:function(){return!0===this.erasable&&this.applyEraserToObjects(),s.call(this)}}),i.Eraser=i.util.createClass(i.Group,{type:"eraser",originX:"center",originY:"center",drawObject:function(t){t.save(),t.fillStyle="black",t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore(),this.callSuper("drawObject",t)},_getBounds:function(){},_toSVG:function(t){var e=["<g ","COMMON_PARTS"," >\n"],n=-this.width/2,i=-this.height/2,r=["<rect ",'fill="white" ','x="',n,'" y="',i,'" width="',this.width,'" height="',this.height,'" />\n'].join("");e.push("\t\t",r);for(var o=0,a=this._objects.length;o<a;o++)e.push("\t\t",this._objects[o].toSVG(t));return e.push("</g>\n"),e}}),i.Eraser.fromObject=function(t,e){var n=t.objects;i.util.enlivenObjects(n,(function(n){var r=i.util.object.clone(t,!0);delete r.objects,i.util.enlivenObjectEnlivables(t,r,(function(){e&&e(new i.Eraser(n,r,!0))}))}))};var l=i.Canvas.prototype._renderOverlay;i.util.object.extend(i.Canvas.prototype,{isErasing:function(){return this.isDrawingMode&&this.freeDrawingBrush&&"eraser"===this.freeDrawingBrush.type&&this.freeDrawingBrush._isErasing},_renderOverlay:function(t){l.call(this,t),this.isErasing()&&!this.freeDrawingBrush.inverted&&this.freeDrawingBrush._render()}}),i.EraserBrush=i.util.createClass(i.PencilBrush,{type:"eraser",inverted:!1,_isErasing:!1,_isErasable:function(t){return!1!==t.erasable},_prepareCollectionTraversal:function(t,e,n){t.forEachObject((function(i){i.forEachObject&&"deep"===i.erasable?this._prepareCollectionTraversal(i,e,n):!this.inverted&&i.erasable&&i.visible?(i.visible=!1,t.dirty=!0,n.visibility.push(i),n.collection.push(t)):this.inverted&&i.visible&&(i.erasable&&i.eraser?(i.eraser.inverted=!0,i.dirty=!0,t.dirty=!0,n.eraser.push(i),n.collection.push(t)):(i.visible=!1,t.dirty=!0,n.visibility.push(i),n.collection.push(t)))}),this)},preparePattern:function(){this._patternCanvas||(this._patternCanvas=i.util.createCanvasElement());var t=this._patternCanvas;t.width=this.canvas.width,t.height=this.canvas.height;var e=t.getContext("2d");if(this.canvas._isRetinaScaling()){var n=this.canvas.getRetinaScaling();this.canvas.__initRetinaScaling(n,t,e)}var r=this.canvas.backgroundImage,o=r&&this._isErasable(r),a=this.canvas.overlayImage,s=a&&this._isErasable(a);if(!this.inverted&&(r&&!o||this.canvas.backgroundColor))o&&(this.canvas.backgroundImage=void 0),this.canvas._renderBackground(e),o&&(this.canvas.backgroundImage=r);else if(this.inverted&&r&&o){var c=this.canvas.backgroundColor;this.canvas.backgroundColor=void 0,this.canvas._renderBackground(e),this.canvas.backgroundColor=c}e.save(),e.transform.apply(e,this.canvas.viewportTransform);var u={visibility:[],eraser:[],collection:[]};if(this._prepareCollectionTraversal(this.canvas,e,u),this.canvas._renderObjects(e,this.canvas._objects),u.visibility.forEach((function(t){t.visible=!0})),u.eraser.forEach((function(t){t.eraser.inverted=!1,t.dirty=!0})),u.collection.forEach((function(t){t.dirty=!0})),e.restore(),!this.inverted&&(a&&!s||this.canvas.overlayColor))s&&(this.canvas.overlayImage=void 0),l.call(this.canvas,e),s&&(this.canvas.overlayImage=a);else if(this.inverted&&a&&s){c=this.canvas.overlayColor;this.canvas.overlayColor=void 0,l.call(this.canvas,e),this.canvas.overlayColor=c}},_setBrushStyles:function(t){this.callSuper("_setBrushStyles",t),t.strokeStyle="black"},_saveAndTransform:function(t){this.callSuper("_saveAndTransform",t),this._setBrushStyles(t),t.globalCompositeOperation=t===this.canvas.getContext()?"destination-out":"source-over"},needsFullRender:function(){return!0},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this.preparePattern(),this._isErasing=!0,this.canvas.fire("erasing:start"),this._render())},_render:function(){var t;this.inverted||(t=this.canvas.getContext(),this.callSuper("_render",t)),t=this.canvas.contextTop,this.canvas.clearContext(t),this.callSuper("_render",t),t.save();var e=this.canvas.getRetinaScaling(),n=1/e;t.scale(n,n),t.globalCompositeOperation="source-in",t.drawImage(this._patternCanvas,0,0),t.restore()},createPath:function(t){var e=this.callSuper("createPath",t);return e.globalCompositeOperation=this.inverted?"source-over":"destination-out",e.stroke=this.inverted?"white":"black",e},applyClipPathToPath:function(t,e,n){var r=i.util.invertTransform(t.calcTransformMatrix()),o=e.calcTransformMatrix(),a=e.absolutePositioned?r:i.util.multiplyTransformMatrices(r,n);return e.absolutePositioned=!1,i.util.applyTransformToObject(e,i.util.multiplyTransformMatrices(a,o)),t.clipPath=t.clipPath?i.util.mergeClipPaths(e,t.clipPath):e,t},clonePathWithClipPath:function(t,e,n){var i=e.calcTransformMatrix(),r=e.clipPath,o=this;t.clone((function(t){r.clone((function(e){n(o.applyClipPathToPath(t,e,i))}),["absolutePositioned","inverted"])}))},_addPathToObjectEraser:function(t,e){var n=this;if(t.forEachObject&&"deep"===t.erasable){var r=t._objects.filter((function(t){return t.erasable}));r.length>0&&t.clipPath?this.clonePathWithClipPath(e,t,(function(t){r.forEach((function(e){n._addPathToObjectEraser(e,t)}))})):r.length>0&&r.forEach((function(t){n._addPathToObjectEraser(t,e)}))}else{var o=t.eraser;o||(o=new i.Eraser,t.eraser=o),e.clone((function(e){var r=i.util.multiplyTransformMatrices(i.util.invertTransform(t.calcTransformMatrix()),e.calcTransformMatrix());i.util.applyTransformToObject(e,r),o.addWithUpdate(e),t.set("dirty",!0),t.fire("erasing:end",{path:e}),t.group&&Array.isArray(n.__subTargets)&&n.__subTargets.push(t)}))}},applyEraserToCanvas:function(t){var e=this.canvas,n={};return["backgroundImage","overlayImage"].forEach((function(i){var r=e[i];r&&r.erasable&&(this._addPathToObjectEraser(r,t),n[i]=r)}),this),n},_finalizeAndAddPath:function(){var t=this.canvas.contextTop,e=this.canvas;t.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate)),e.clearContext(e.contextTop),this._isErasing=!1;var n=this._points&&this._points.length>1?this.convertPointsToSVGPath(this._points):null;if(!n||this._isEmptySVGPath(n))return e.fire("erasing:end"),void e.requestRenderAll();var i=this.createPath(n);i.setCoords(),e.fire("before:path:created",{path:i});var r=this.applyEraserToCanvas(i),o=this;this.__subTargets=[];var a=[];e.forEachObject((function(t){t.erasable&&t.intersectsWithObject(i,!0,!0)&&(o._addPathToObjectEraser(t,i),a.push(t))})),e.fire("erasing:end",{path:i,targets:a,subTargets:this.__subTargets,drawables:r}),delete this.__subTargets,e.requestRenderAll(),this._resetShadow(),e.fire("path:created",{path:i})}})}()}).call(this,n("b639").Buffer)},"7aac":function(t,e,n){"use strict";var i=n("c532");t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,n,r,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b0b":function(t,e,n){var i=n("1d80");t.exports=function(t){return Object(i(t))}},"7b83":function(t,e,n){var i=n("7c64"),r=n("93ed"),o=n("2478"),a=n("a524"),s=n("1fc8");function l(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},"7b97":function(t,e,n){var i=n("7e64"),r=n("a2be"),o=n("1c3c"),a=n("b1e5"),s=n("42a2"),l=n("6747"),c=n("0d24"),u=n("73ac"),h=1,f="[object Arguments]",d="[object Array]",p="[object Object]",g=Object.prototype,m=g.hasOwnProperty;function v(t,e,n,g,v,y){var _=l(t),b=l(e),x=_?d:s(t),w=b?d:s(e);x=x==f?p:x,w=w==f?p:w;var S=x==p,T=w==p,O=x==w;if(O&&c(t)){if(!c(e))return!1;_=!0,S=!1}if(O&&!S)return y||(y=new i),_||u(t)?r(t,e,n,g,v,y):o(t,e,x,n,g,v,y);if(!(n&h)){var C=S&&m.call(t,"__wrapped__"),M=T&&m.call(e,"__wrapped__");if(C||M){var A=C?t.value():t,D=M?e.value():e;return y||(y=new i),v(A,D,n,g,y)}}return!!O&&(y||(y=new i),a(t,e,n,g,v,y))}t.exports=v},"7bad":function(t,e,n){},"7c64":function(t,e,n){var i=n("e24b"),r=n("5e2e"),o=n("79bc");function a(){this.size=0,this.__data__={hash:new i,map:new(o||r),string:new i}}t.exports=a},"7c71":function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcPipe=e.util.createClass(e.Polyline,{type:"ecPipe",stateProperties:e.Object.prototype.stateProperties.concat(["pipe"]),cacheProperties:e.Object.prototype.stateProperties.concat(["pipe"]),pipe:{outWidth:20,outBackground:"#000",innerWidth:15,innerBackground:"#ccc"},fill:"transparent",stroke:"rgba(250, 213, 10, 1)",strokeWidth:8,strokeDashArray:[15,20],strokeDot:15,strokeGap:20,strokeLineCap:"butt",strokeLineJoin:"round",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawCustom()},drawCustom:function(){var t;this.ctx.save();var e=this.points.length,n=this.pathOffset.x,i=this.pathOffset.y;this.ctx.lineCap=this.strokeLineCap,this.ctx.lineJoin=this.strokeLineJoin,this.ctx.beginPath(),this.ctx.moveTo(this.points[0].x-n,this.points[0].y-i),this.ctx.lineWidth=this.pipe.outWidth;for(var r=0;r<e;r++)t=this.points[r],this.ctx.lineTo(t.x-n,t.y-i);this.ctx.strokeStyle=this.pipe.outBackground,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.points[0].x-n,this.points[0].y-i),this.ctx.lineWidth=this.pipe.innerWidth;for(var o=0;o<e;o++)t=this.points[o],this.ctx.lineTo(t.x-n,t.y-i);this.ctx.strokeStyle=this.pipe.innerBackground,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.points[0].x-n,this.points[0].y-i);for(var a=0;a<e;a++)t=this.points[a],this.ctx.lineTo(t.x-n,t.y-i);this.ctx.lineWidth=this.strokeWidth,this.ctx.lineDashOffset=this.strokeDashOffset,this.ctx.strokeStyle=this.stroke;var s=this.strokeDashArray;s&&s.length&&this.ctx.setLineDash(s),this.ctx.stroke(),this.ctx.closePath(),this.ctx.restore()}}),e.EcPipe.fromObject=function(t,n){n&&n(new e.EcPipe(t.points,t))},e.EcPipe.async=!0}).call(this,n("c8ba"))},"7c73":function(t,e,n){var i,r=n("825a"),o=n("37e8"),a=n("7839"),s=n("d012"),l=n("1be4"),c=n("cc12"),u=n("f772"),h=">",f="<",d="prototype",p="script",g=u("IE_PROTO"),m=function(){},v=function(t){return f+p+h+t+f+"/"+p+h},y=function(t){t.write(v("")),t.close();var e=t.parentWindow.Object;return t=null,e},_=function(){var t,e=c("iframe"),n="java"+p+":";return e.style.display="none",l.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(v("document.F=Object")),t.close(),t.F},b=function(){try{i=document.domain&&new ActiveXObject("htmlfile")}catch(e){}b=i?y(i):_();var t=a.length;while(t--)delete b[d][a[t]];return b()};s[g]=!0,t.exports=Object.create||function(t,e){var n;return null!==t?(m[d]=r(t),n=new m,m[d]=null,n[g]=t):n=b(),void 0===e?n:o(n,e)}},"7d1f":function(t,e,n){var i=n("087d"),r=n("6747");function o(t,e,n){var o=e(t);return r(t)?o:i(o,n(t))}t.exports=o},"7d6c":function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"a",(function(){return m})),n.d(e,"j",(function(){return v})),n.d(e,"c",(function(){return _})),n.d(e,"b",(function(){return b})),n.d(e,"f",(function(){return x})),n.d(e,"i",(function(){return w})),n.d(e,"h",(function(){return S})),n.d(e,"H",(function(){return R})),n.d(e,"G",(function(){return H})),n.d(e,"r",(function(){return W})),n.d(e,"C",(function(){return X})),n.d(e,"q",(function(){return Y})),n.d(e,"B",(function(){return q})),n.d(e,"s",(function(){return Z})),n.d(e,"D",(function(){return K})),n.d(e,"k",(function(){return J})),n.d(e,"l",(function(){return tt})),n.d(e,"m",(function(){return et})),n.d(e,"t",(function(){return nt})),n.d(e,"x",(function(){return it})),n.d(e,"w",(function(){return rt})),n.d(e,"J",(function(){return ot})),n.d(e,"K",(function(){return at})),n.d(e,"u",(function(){return st})),n.d(e,"o",(function(){return lt})),n.d(e,"p",(function(){return ct})),n.d(e,"I",(function(){return ft})),n.d(e,"F",(function(){return dt})),n.d(e,"y",(function(){return pt})),n.d(e,"n",(function(){return gt})),n.d(e,"v",(function(){return mt})),n.d(e,"A",(function(){return vt})),n.d(e,"z",(function(){return yt})),n.d(e,"E",(function(){return _t}));var i=n("d51b"),r=n("6d8b"),o=n("861c"),a=n("41ef"),s=n("e0d3"),l=n("cbe5"),c=1,u={},h=Object(s["o"])(),f=0,d=1,p=2,g=["emphasis","blur","select"],m=["normal","emphasis","blur","select"],v=10,y=9,_="highlight",b="downplay",x="select",w="unselect",S="toggleSelect";function T(t){return null!=t&&"none"!==t}var O=new i["a"](100);function C(t){if("string"!==typeof t)return t;var e=O.get(t);return e||(e=a["lift"](t,-.1),O.put(t,e)),e}function M(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function A(t){M(t,"emphasis",p)}function D(t){t.hoverState===p&&M(t,"normal",f)}function E(t){M(t,"blur",d)}function I(t){t.hoverState===d&&M(t,"normal",f)}function P(t){t.selected=!0}function L(t){t.selected=!1}function k(t,e,n){e(t,n)}function j(t,e,n){k(t,e,n),t.isGroup&&t.traverse((function(t){k(t,e,n)}))}function R(t,e){switch(e){case"emphasis":t.hoverState=p;break;case"normal":t.hoverState=f;break;case"blur":t.hoverState=d;break;case"select":t.selected=!0}}function N(t,e,n,i){for(var r=t.style,o={},a=0;a<e.length;a++){var s=e[a],l=r[s];o[s]=null==l?i&&i[s]:l}for(a=0;a<t.animators.length;a++){var c=t.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(n)<0&&"style"===c.targetName&&c.saveFinalToTarget(o,e)}return o}function B(t,e,n,i){var o=n&&Object(r["r"])(n,"select")>=0,a=!1;if(t instanceof l["b"]){var s=h(t),c=o&&s.selectFill||s.normalFill,u=o&&s.selectStroke||s.normalStroke;if(T(c)||T(u)){i=i||{};var f=i.style||{};"inherit"===f.fill?(a=!0,i=Object(r["m"])({},i),f=Object(r["m"])({},f),f.fill=c):!T(f.fill)&&T(c)?(a=!0,i=Object(r["m"])({},i),f=Object(r["m"])({},f),f.fill=C(c)):!T(f.stroke)&&T(u)&&(a||(i=Object(r["m"])({},i),f=Object(r["m"])({},f)),f.stroke=C(u)),i.style=f}}if(i&&null==i.z2){a||(i=Object(r["m"])({},i));var d=t.z2EmphasisLift;i.z2=t.z2+(null!=d?d:v)}return i}function F(t,e,n){if(n&&null==n.z2){n=Object(r["m"])({},n);var i=t.z2SelectLift;n.z2=t.z2+(null!=i?i:y)}return n}function z(t,e,n){var i=Object(r["r"])(t.currentStates,e)>=0,o=t.style.opacity,a=i?null:N(t,["opacity"],e,{opacity:1});n=n||{};var s=n.style||{};return null==s.opacity&&(n=Object(r["m"])({},n),s=Object(r["m"])({opacity:i?o:.1*a.opacity},s),n.style=s),n}function V(t,e){var n=this.states[t];if(this.style){if("emphasis"===t)return B(this,t,e,n);if("blur"===t)return z(this,t,n);if("select"===t)return F(this,t,n)}return n}function H(t){t.stateProxy=V;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=V),n&&(n.stateProxy=V)}function G(t,e){!$(t,e)&&!t.__highByOuter&&j(t,A)}function U(t,e){!$(t,e)&&!t.__highByOuter&&j(t,D)}function W(t,e){t.__highByOuter|=1<<(e||0),j(t,A)}function X(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&j(t,D)}function Y(t){j(t,E)}function q(t){j(t,I)}function Z(t){j(t,P)}function K(t){j(t,L)}function $(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function J(t){var e=t.getModel();e.eachComponent((function(e,n){var i="series"===e?t.getViewOfSeriesModel(n):t.getViewOfComponentModel(n);i.group.traverse((function(t){I(t)}))}))}function Q(t,e,n,i){var o=i.getModel();function a(t,e){for(var n=0;n<e.length;n++){var i=t.getItemGraphicEl(e[n]);i&&q(i)}}if(n=n||"coordinateSystem",null!=t&&e&&"none"!==e){var s=o.getSeriesByIndex(t),l=s.coordinateSystem;l&&l.master&&(l=l.master);var c=[];o.eachSeries((function(t){var o=s===t,u=t.coordinateSystem;u&&u.master&&(u=u.master);var h=u&&l?u===l:o;if(!("series"===n&&!o||"coordinateSystem"===n&&!h||"series"===e&&o)){var f=i.getViewOfSeriesModel(t);if(f.group.traverse((function(t){E(t)})),Object(r["u"])(e))a(t.getData(),e);else if(Object(r["A"])(e))for(var d=Object(r["F"])(e),p=0;p<d.length;p++)a(t.getData(d[p]),e[d[p]]);c.push(t)}})),o.eachComponent((function(t,e){if("series"!==t){var n=i.getViewOfComponentModel(e);n&&n.blurSeries&&n.blurSeries(c,o)}}))}}function tt(t,e,n){if(null!=t&&null!=e){var i=n.getModel().getComponent(t,e);if(i){var r=n.getViewOfComponentModel(i);r&&r.focusBlurEnabled&&r.group.traverse((function(t){E(t)}))}}}function et(t,e,n){var i=t.seriesIndex,a=t.getData(e.dataType),l=Object(s["u"])(a,e);l=(Object(r["t"])(l)?l[0]:l)||0;var c=a.getItemGraphicEl(l);if(!c){var u=a.count(),h=0;while(!c&&h<u)c=a.getItemGraphicEl(h++)}if(c){var f=Object(o["a"])(c);Q(i,f.focus,f.blurScope,n)}else{var d=t.get(["emphasis","focus"]),p=t.get(["emphasis","blurScope"]);null!=d&&Q(i,d,p,n)}}function nt(t,e,n,i){var r={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==e||null==n)return r;var a=i.getModel().getComponent(t,e);if(!a)return r;var s=i.getViewOfComponentModel(a);if(!s||!s.findHighDownDispatchers)return r;for(var l,c=s.findHighDownDispatchers(n),u=0;u<c.length;u++)if("self"===Object(o["a"])(c[u]).focus){l=!0;break}return{focusSelf:l,dispatchers:c}}function it(t,e,n){var i=Object(o["a"])(t),a=nt(i.componentMainType,i.componentIndex,i.componentHighDownName,n),s=a.dispatchers,l=a.focusSelf;s?(l&&tt(i.componentMainType,i.componentIndex,n),Object(r["k"])(s,(function(t){return G(t,e)}))):(Q(i.seriesIndex,i.focus,i.blurScope,n),"self"===i.focus&&tt(i.componentMainType,i.componentIndex,n),G(t,e))}function rt(t,e,n){J(n);var i=Object(o["a"])(t),a=nt(i.componentMainType,i.componentIndex,i.componentHighDownName,n).dispatchers;a?Object(r["k"])(a,(function(t){return U(t,e)})):U(t,e)}function ot(t,e,n){if(vt(e)){var i=e.dataType,o=t.getData(i),a=Object(s["u"])(o,e);Object(r["t"])(a)||(a=[a]),t[e.type===S?"toggleSelect":e.type===x?"select":"unselect"](a,i)}}function at(t){var e=t.getAllData();Object(r["k"])(e,(function(e){var n=e.data,i=e.type;n.eachItemGraphicEl((function(e,n){t.isSelected(n,i)?Z(e):K(e)}))}))}function st(t){var e=[];return t.eachSeries((function(t){var n=t.getAllData();Object(r["k"])(n,(function(n){n.data;var i=n.type,r=t.getSelectedDataIndices();if(r.length>0){var o={dataIndex:r,seriesIndex:t.seriesIndex};null!=i&&(o.dataType=i),e.push(o)}}))})),e}function lt(t,e,n){dt(t,!0),j(t,H),ct(t,e,n)}function ct(t,e,n){var i=Object(o["a"])(t);null!=e?(i.focus=e,i.blurScope=n):i.focus&&(i.focus=null)}var ut=["emphasis","blur","select"],ht={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function ft(t,e,n,i){n=n||"itemStyle";for(var r=0;r<ut.length;r++){var o=ut[r],a=e.getModel([o,n]),s=t.ensureState(o);s.style=i?i(a):a[ht[n]]()}}function dt(t,e){var n=!1===e,i=t;t.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=t.highDownSilentOnTouch),n&&!i.__highDownDispatcher||(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!n)}function pt(t){return!(!t||!t.__highDownDispatcher)}function gt(t,e,n){var i=Object(o["a"])(t);i.componentMainType=e.mainType,i.componentIndex=e.componentIndex,i.componentHighDownName=n}function mt(t){var e=u[t];return null==e&&c<=32&&(e=u[t]=c++),e}function vt(t){var e=t.type;return e===x||e===w||e===S}function yt(t){var e=t.type;return e===_||e===b}function _t(t){var e=h(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}},"7db0":function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").find,o=n("44d2"),a="find",s=!0;a in[]&&Array(1)[a]((function(){s=!1})),i({target:"Array",proto:!0,forced:s},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(a)},"7dd0":function(t,e,n){"use strict";var i=n("23e7"),r=n("9ed3"),o=n("e163"),a=n("d2bb"),s=n("d44e"),l=n("9112"),c=n("6eeb"),u=n("b622"),h=n("c430"),f=n("3f8c"),d=n("ae93"),p=d.IteratorPrototype,g=d.BUGGY_SAFARI_ITERATORS,m=u("iterator"),v="keys",y="values",_="entries",b=function(){return this};t.exports=function(t,e,n,u,d,x,w){r(n,e,u);var S,T,O,C=function(t){if(t===d&&I)return I;if(!g&&t in D)return D[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)};case _:return function(){return new n(this,t)}}return function(){return new n(this)}},M=e+" Iterator",A=!1,D=t.prototype,E=D[m]||D["@@iterator"]||d&&D[d],I=!g&&E||C(d),P="Array"==e&&D.entries||E;if(P&&(S=o(P.call(new t)),p!==Object.prototype&&S.next&&(h||o(S)===p||(a?a(S,p):"function"!=typeof S[m]&&l(S,m,b)),s(S,M,!0,!0),h&&(f[M]=b))),d==y&&E&&E.name!==y&&(A=!0,I=function(){return E.call(this)}),h&&!w||D[m]===I||l(D,m,I),f[e]=I,d)if(T={values:C(y),keys:x?I:C(v),entries:C(_)},w)for(O in T)(g||A||!(O in D))&&c(D,O,T[O]);else i({target:e,proto:!0,forced:g||A},T);return T}},"7e64":function(t,e,n){var i=n("5e2e"),r=n("efb6"),o=n("2fcc"),a=n("802a"),s=n("55a3"),l=n("d02c");function c(t){var e=this.__data__=new i(t);this.size=e.size}c.prototype.clear=r,c.prototype["delete"]=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,t.exports=c},"7ed2":function(t,e){var n="__lodash_hash_undefined__";function i(t){return this.__data__.set(t,n),this}t.exports=i},"7f9a":function(t,e,n){var i=n("da84"),r=n("8925"),o=i.WeakMap;t.exports="function"===typeof o&&/native code/.test(r(o))},"7fae":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,e){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},i(t,e)};function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return o=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};Object.create;function a(t,e,n){if(n||2===arguments.length)for(var i,r=0,o=e.length;r<o;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}Object.create},"802a":function(t,e){function n(t){return this.__data__.get(t)}t.exports=n},"80b9":function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"e",(function(){return f}));var i=n("6d8b"),r=n("e0d3"),o=n("ec6f"),a=Object(r["o"])(),s={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},l=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=h(this.source)))},t.prototype.getSourceDimensionIndex=function(t){return Object(i["P"])(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=Object(o["f"])(this.source),n=!f(t),i="",r=[],a=0,l=0;a<t;a++){var c=void 0,u=void 0,h=void 0,d=this.dimensions[l];if(d&&d.storeDimIndex===a)c=e?d.name:null,u=d.type,h=d.ordinalMeta,l++;else{var p=this.getSourceDimension(a);p&&(c=e?p.name:null,u=p.type)}r.push({property:c,type:u,ordinalMeta:h}),!e||null==c||d&&d.isCalculationCoord||(i+=n?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),i+="$",i+=s[u]||"f",h&&(i+=h.uid),i+="$"}var g=this.source,m=[g.seriesLayoutBy,g.startIndex,i].join("$$");return{dimensions:r,hash:m}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,n=0;e<this._fullDimCount;e++){var i=void 0,r=this.dimensions[n];if(r&&r.storeDimIndex===e)r.isCalculationCoord||(i=r.name),n++;else{var o=this.getSourceDimension(e);o&&(i=o.name)}t.push(i)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function c(t){return t instanceof l}function u(t){for(var e=Object(i["g"])(),n=0;n<(t||[]).length;n++){var r=t[n],o=Object(i["A"])(r)?r.name:r;null!=o&&null==e.get(o)&&e.set(o,n)}return e}function h(t){var e=a(t);return e.dimNameMap||(e.dimNameMap=u(t.dimensionsDefine))}function f(t){return t>30}},"80f0":function(t,e,n){"use strict";function i(t){return null==t?0:t.length||1}function r(t){return t}var o=function(){function t(t,e,n,i,o,a){this._old=t,this._new=e,this._oldKeyGetter=n||r,this._newKeyGetter=i||r,this.context=o,this._diffModeMultiple="multiple"===a}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},r=new Array(t.length),o=new Array(e.length);this._initIndexMap(t,null,r,"_oldKeyGetter"),this._initIndexMap(e,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=r[a],l=n[s],c=i(l);if(c>1){var u=l.shift();1===l.length&&(n[s]=l[0]),this._update&&this._update(u,a)}else 1===c?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},r={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(e,r,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],c=n[l],u=r[l],h=i(c),f=i(u);if(h>1&&1===f)this._updateManyToOne&&this._updateManyToOne(u,c),r[l]=null;else if(1===h&&f>1)this._updateOneToMany&&this._updateOneToMany(u,c),r[l]=null;else if(1===h&&1===f)this._update&&this._update(u,c),r[l]=null;else if(h>1&&f>1)this._updateManyToMany&&this._updateManyToMany(u,c),r[l]=null;else if(h>1)for(var d=0;d<h;d++)this._remove&&this._remove(c[d]);else this._remove&&this._remove(c)}this._performRestAdd(a,r)},t.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=e[r],a=i(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else 1===a&&this._add&&this._add(o);e[r]=null}},t.prototype._initIndexMap=function(t,e,n,r){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[r](t[a],a);if(o||(n[a]=s),e){var l=e[s],c=i(l);0===c?(e[s]=a,o&&n.push(s)):1===c?e[s]=[l,a]:l.push(a)}}},t}();e["a"]=o},"81d5":function(t,e,n){"use strict";var i=n("7b0b"),r=n("23cb"),o=n("50c4");t.exports=function(t){var e=i(this),n=o(e.length),a=arguments.length,s=r(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:r(l,n);while(c>s)e[s++]=t;return e}},"825a":function(t,e,n){var i=n("861d");t.exports=function(t){if(!i(t))throw TypeError(String(t)+" is not an object");return t}},"83ab":function(t,e,n){var i=n("d039");t.exports=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},"83b9":function(t,e,n){"use strict";var i=n("d925"),r=n("e683");t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},8418:function(t,e,n){"use strict";var i=n("c04e"),r=n("9bf2"),o=n("5c6c");t.exports=function(t,e,n){var a=i(e);a in t?r.f(t,a,o(0,n)):t[a]=n}},"84ce":function(t,e,n){"use strict";var i=n("6d8b"),r=n("3842"),o=n("e86a"),a=n("e0d3"),s=n("697e"),l=Object(a["o"])();function c(t){return"category"===t.type?h(t):p(t)}function u(t,e){return"category"===t.type?d(t,e):{ticks:i["H"](t.scale.getTicks(),(function(t){return t.value}))}}function h(t){var e=t.getLabelModel(),n=f(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}function f(t,e){var n,r,o=g(t,"labels"),a=Object(s["e"])(e),l=m(o,a);return l||(i["w"](a)?n=w(t,a):(r="auto"===a?y(t):a,n=x(t,r)),v(o,a,{labels:n,labelCategoryInterval:r}))}function d(t,e){var n,r,o=g(t,"ticks"),a=Object(s["e"])(e),l=m(o,a);if(l)return l;if(e.get("show")&&!t.scale.isBlank()||(n=[]),i["w"](a))n=w(t,a,!0);else if("auto"===a){var c=f(t,t.getLabelModel());r=c.labelCategoryInterval,n=i["H"](c.labels,(function(t){return t.tickValue}))}else r=a,n=x(t,r,!0);return v(o,a,{ticks:n,tickCategoryInterval:r})}function p(t){var e=t.scale.getTicks(),n=Object(s["h"])(t);return{labels:i["H"](e,(function(e,i){return{level:e.level,formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e.value}}))}}function g(t,e){return l(t)[e]||(l(t)[e]=[])}function m(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function v(t,e,n){return t.push({key:e,value:n}),n}function y(t){var e=l(t).autoInterval;return null!=e?e:l(t).autoInterval=t.calculateCategoryInterval()}function _(t){var e=b(t),n=Object(s["h"])(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,a=r.getExtent(),c=r.count();if(a[1]-a[0]<1)return 0;var u=1;c>40&&(u=Math.max(1,Math.floor(c/40)));for(var h=a[0],f=t.dataToCoord(h+1)-t.dataToCoord(h),d=Math.abs(f*Math.cos(i)),p=Math.abs(f*Math.sin(i)),g=0,m=0;h<=a[1];h+=u){var v=0,y=0,_=o["e"](n({value:h}),e.font,"center","top");v=1.3*_.width,y=1.3*_.height,g=Math.max(g,v,7),m=Math.max(m,y,7)}var x=g/d,w=m/p;isNaN(x)&&(x=1/0),isNaN(w)&&(w=1/0);var S=Math.max(0,Math.floor(Math.min(x,w))),T=l(t.model),O=t.getExtent(),C=T.lastAutoInterval,M=T.lastTickCount;return null!=C&&null!=M&&Math.abs(C-S)<=1&&Math.abs(M-c)<=1&&C>S&&T.axisExtent0===O[0]&&T.axisExtent1===O[1]?S=C:(T.lastTickCount=c,T.lastAutoInterval=S,T.axisExtent0=O[0],T.axisExtent1=O[1]),S}function b(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}function x(t,e,n){var i=Object(s["h"])(t),r=t.scale,o=r.getExtent(),a=t.getLabelModel(),l=[],c=Math.max((e||0)+1,1),u=o[0],h=r.count();0!==u&&c>1&&h/c>2&&(u=Math.round(Math.ceil(u/c)*c));var f=Object(s["j"])(t),d=a.get("showMinLabel")||f,p=a.get("showMaxLabel")||f;d&&u!==o[0]&&m(o[0]);for(var g=u;g<=o[1];g+=c)m(g);function m(t){var e={value:t};l.push(n?t:{formattedLabel:i(e),rawLabel:r.getLabel(e),tickValue:t})}return p&&g-c!==o[1]&&m(o[1]),l}function w(t,e,n){var r=t.scale,o=Object(s["h"])(t),a=[];return i["k"](r.getTicks(),(function(t){var i=r.getLabel(t),s=t.value;e(t.value,i)&&a.push(n?s:{formattedLabel:o(t),rawLabel:i,tickValue:s})})),a}var S=[0,1],T=function(){function t(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return t.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return Object(r["f"])(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},t.prototype.dataToCoord=function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&(n=n.slice(),O(n,i.count())),Object(r["l"])(t,S,n,e)},t.prototype.coordToData=function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&(n=n.slice(),O(n,i.count()));var o=Object(r["l"])(t,n,S,e);return this.scale.scale(o)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){t=t||{};var e=t.tickModel||this.getTickModel(),n=u(this,e),r=n.ticks,o=Object(i["H"])(r,(function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}}),this),a=e.get("alignWithLabel");return C(this,o,a,t.clamp),o},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick"),e=t.get("splitNumber");e>0&&e<100||(e=5);var n=this.scale.getMinorTicks(e),r=Object(i["H"])(n,(function(t){return Object(i["H"])(t,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this);return r},t.prototype.getViewLabels=function(){return c(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},t.prototype.calculateCategoryInterval=function(){return _(this)},t}();function O(t,e){var n=t[1]-t[0],i=e,r=n/i/2;t[0]+=r,t[1]-=r}function C(t,e,n,o){var a=e.length;if(t.onBand&&!n&&a){var s,l,c=t.getExtent();if(1===a)e[0].coord=c[0],s=e[1]={coord:c[0]};else{var u=e[a-1].tickValue-e[0].tickValue,h=(e[a-1].coord-e[0].coord)/u;Object(i["k"])(e,(function(t){t.coord-=h/2}));var f=t.scale.getExtent();l=1+f[1]-e[a-1].tickValue,s={coord:e[a-1].coord+h*l},e.push(s)}var d=c[0]>c[1];p(e[0].coord,c[0])&&(o?e[0].coord=c[0]:e.shift()),o&&p(c[0],e[0].coord)&&e.unshift({coord:c[0]}),p(c[1],s.coord)&&(o?s.coord=c[1]:e.pop()),o&&p(s.coord,c[1])&&e.push({coord:c[1]})}function p(t,e){return t=Object(r["v"])(t),e=Object(r["v"])(e),d?t>e:t<e}}e["a"]=T},"857d":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=2*Math.PI;function r(t){return t%=i,t<0&&(t+=i),t}},8582:function(t,e,n){"use strict";var i=n("1687"),r=n("401b"),o=i["d"],a=5e-5;function s(t){return t>a||t<-a}var l=[],c=[],u=i["c"](),h=Math.abs,f=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return s(this.rotation)||s(this.x)||s(this.y)||s(this.scaleX-1)||s(this.scaleY-1)},t.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;e||t?(n=n||i["c"](),e?this.getLocalTransform(n):o(n),t&&(e?i["f"](n,t,n):i["b"](n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&o(n)},t.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(l);var n=l[0]<0?-1:1,r=l[1]<0?-1:1,o=((l[0]-n)*e+n)/l[0]||0,a=((l[1]-r)*e+r)/l[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||i["c"](),i["e"](this.invTransform,t)},t.prototype.getComputedTransform=function(){var t=this,e=[];while(t)e.push(t),t=t.parent;while(t=e.pop())t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),r=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(r),e=Math.sqrt(e),this.skewX=r,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(i["f"](c,t.invTransform,e),e=c);var n=this.originX,r=this.originY;(n||r)&&(u[4]=n,u[5]=r,i["f"](c,e,u),c[4]-=n,c[5]-=r,e=c),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&r["b"](n,n,i),n},t.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&r["b"](n,n,i),n},t.prototype.getLineScale=function(){var t=this.transform;return t&&h(t[0]-1)>1e-10&&h(t[3]-1)>1e-10?Math.sqrt(h(t[0]*t[3]-t[2]*t[1])):1},t.prototype.copyTransform=function(t){for(var e=this,n=0;n<d.length;n++){var i=d[n];e[i]=t[i]}},t.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,r=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.rotation||0,l=t.x,c=t.y,u=t.skewX?Math.tan(t.skewX):0,h=t.skewY?Math.tan(-t.skewY):0;return n||r?(e[4]=-n*o-u*r*a,e[5]=-r*a-h*n*o):e[4]=e[5]=0,e[0]=o,e[3]=a,e[1]=h*o,e[2]=u*a,s&&i["g"](e,e,s),e[4]+=n+l,e[5]+=r+c,e},t.initDefaultProps=function(){var e=t.prototype;e.x=0,e.y=0,e.scaleX=1,e.scaleY=1,e.originX=0,e.originY=0,e.skewX=0,e.skewY=0,e.rotation=0,e.globalScaleRatio=1}(),t}(),d=["x","y","originX","originY","rotation","scaleX","scaleY","skewX","skewY"];e["a"]=f},8604:function(t,e,n){var i=n("26e8"),r=n("e2c0");function o(t,e){return null!=t&&r(t,e,i)}t.exports=o},"861c":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var i=n("e0d3"),r=Object(i["o"])(),o=function(t,e,n,i){if(i){var o=r(i);o.dataIndex=n,o.dataType=e,o.seriesIndex=t,"group"===i.type&&i.traverse((function(i){var o=r(i);o.seriesIndex=t,o.dataIndex=n,o.dataType=e}))}}},"861d":function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},8728:function(t,e,n){"use strict";function i(t,e,n,i,r,o){if(o>e&&o>i||o<e&&o<i)return 0;if(i===e)return 0;var a=(o-e)/(i-e),s=i<e?1:-1;1!==a&&0!==a||(s=i<e?.5:-.5);var l=a*(n-t)+t;return l===r?1/0:l>r?s:0}n.d(e,"a",(function(){return i}))},"87b1":function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=n("4fac"),a=function(){function t(){this.points=null,this.smooth=0,this.smoothConstraint=null}return t}(),s=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new a},e.prototype.buildPath=function(t,e){o["a"](t,e,!0)},e}(r["b"]);s.prototype.type="polygon",e["a"]=s},8875:function(t,e,n){var i,r,o;(function(n,a){r=[],i=a,o="function"===typeof i?i.apply(e,r):i,void 0===o||(t.exports=o)})("undefined"!==typeof self&&self,(function(){function t(){var e=Object.getOwnPropertyDescriptor(document,"currentScript");if(!e&&"currentScript"in document&&document.currentScript)return document.currentScript;if(e&&e.get!==t&&document.currentScript)return document.currentScript;try{throw new Error}catch(d){var n,i,r,o=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,a=/@([^@]*):(\d+):(\d+)\s*$/gi,s=o.exec(d.stack)||a.exec(d.stack),l=s&&s[1]||!1,c=s&&s[2]||!1,u=document.location.href.replace(document.location.hash,""),h=document.getElementsByTagName("script");l===u&&(n=document.documentElement.outerHTML,i=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),r=n.replace(i,"$1").trim());for(var f=0;f<h.length;f++){if("interactive"===h[f].readyState)return h[f];if(h[f].src===l)return h[f];if(l===u&&h[f].innerHTML&&h[f].innerHTML.trim()===r)return h[f]}return null}}return t}))},"88b3":function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return l}));var i="\0__throttleOriginMethod",r="\0__throttleRate",o="\0__throttleType";function a(t,e,n){var i,r,o,a,s,l=0,c=0,u=null;function h(){c=(new Date).getTime(),u=null,t.apply(o,a||[])}e=e||0;var f=function(){for(var t=[],f=0;f<arguments.length;f++)t[f]=arguments[f];i=(new Date).getTime(),o=this,a=t;var d=s||e,p=s||n;s=null,r=i-(p?l:c)-d,clearTimeout(u),p?u=setTimeout(h,d):r>=0?h():u=setTimeout(h,-r),l=i};return f.clear=function(){u&&(clearTimeout(u),u=null)},f.debounceNextCall=function(t){s=t},f}function s(t,e,n,s){var l=t[e];if(l){var c=l[i]||l,u=l[o],h=l[r];if(h!==n||u!==s){if(null==n||!s)return t[e]=c;l=t[e]=a(c,n,"debounce"===s),l[i]=c,l[o]=s,l[r]=n}return l}}function l(t,e){var n=t[e];n&&n[i]&&(t[e]=n[i])}},8918:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return l})),n.d(e,"d",(function(){return c}));var i=n("6d8b"),r=n("625e"),o=Math.round(10*Math.random());function a(t){return[t||"",o++].join("_")}function s(t){var e={};t.registerSubTypeDefaulter=function(t,n){var i=Object(r["f"])(t);e[i.main]=n},t.determineSubType=function(n,i){var o=i.type;if(!o){var a=Object(r["f"])(n).main;t.hasSubTypes(n)&&e[a]&&(o=e[a](i))}return o}}function l(t,e){function n(t){var n={},a=[];return i["k"](t,(function(s){var l=r(n,s),c=l.originalDeps=e(s),u=o(c,t);l.entryCount=u.length,0===l.entryCount&&a.push(s),i["k"](u,(function(t){i["r"](l.predecessor,t)<0&&l.predecessor.push(t);var e=r(n,t);i["r"](e.successor,t)<0&&e.successor.push(s)}))})),{graph:n,noEntryList:a}}function r(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}function o(t,e){var n=[];return i["k"](t,(function(t){i["r"](e,t)>=0&&n.push(t)})),n}t.topologicalTravel=function(t,e,r,o){if(t.length){var a=n(e),s=a.graph,l=a.noEntryList,c={};i["k"](t,(function(t){c[t]=!0}));while(l.length){var u=l.pop(),h=s[u],f=!!c[u];f&&(r.call(o,u,h.originalDeps.slice()),delete c[u]),i["k"](h.successor,f?p:d)}i["k"](c,(function(){var t="";throw new Error(t)}))}function d(t){s[t].entryCount--,0===s[t].entryCount&&l.push(t)}function p(t){c[t]=!0,d(t)}}}function c(t,e){return i["I"](i["I"]({},t,!0),e,!0)}},8925:function(t,e,n){var i=n("c6cd"),r=Function.toString;"function"!=typeof i.inspectSource&&(i.inspectSource=function(t){return r.call(t)}),t.exports=i.inspectSource},"89b6":function(t,e,n){"use strict";n.d(e,"e",(function(){return A})),n.d(e,"c",(function(){return I})),n.d(e,"b",(function(){return P})),n.d(e,"d",(function(){return j})),n.d(e,"a",(function(){return R}));var i=n("dce8"),r=n("cbe5"),o=n("d498"),a=n("20c8"),s=n("857d"),l=n("4a3f"),c=n("6d8b"),u=n("1687"),h=n("401b"),f=n("7d6c"),d=2*Math.PI,p=a["a"].CMD,g=["top","right","bottom","left"];function m(t,e,n,i,r){var o=n.width,a=n.height;switch(t){case"top":i.set(n.x+o/2,n.y-e),r.set(0,-1);break;case"bottom":i.set(n.x+o/2,n.y+a+e),r.set(0,1);break;case"left":i.set(n.x-e,n.y+a/2),r.set(-1,0);break;case"right":i.set(n.x+o+e,n.y+a/2),r.set(1,0);break}}function v(t,e,n,i,r,o,a,l,c){a-=t,l-=e;var u=Math.sqrt(a*a+l*l);a/=u,l/=u;var h=a*n+t,f=l*n+e;if(Math.abs(i-r)%d<1e-4)return c[0]=h,c[1]=f,u-n;if(o){var p=i;i=Object(s["a"])(r),r=Object(s["a"])(p)}else i=Object(s["a"])(i),r=Object(s["a"])(r);i>r&&(r+=d);var g=Math.atan2(l,a);if(g<0&&(g+=d),g>=i&&g<=r||g+d>=i&&g+d<=r)return c[0]=h,c[1]=f,u-n;var m=n*Math.cos(i)+t,v=n*Math.sin(i)+e,y=n*Math.cos(r)+t,_=n*Math.sin(r)+e,b=(m-a)*(m-a)+(v-l)*(v-l),x=(y-a)*(y-a)+(_-l)*(_-l);return b<x?(c[0]=m,c[1]=v,Math.sqrt(b)):(c[0]=y,c[1]=_,Math.sqrt(x))}function y(t,e,n,i,r,o,a,s){var l=r-t,c=o-e,u=n-t,h=i-e,f=Math.sqrt(u*u+h*h);u/=f,h/=f;var d=l*u+c*h,p=d/f;s&&(p=Math.min(Math.max(p,0),1)),p*=f;var g=a[0]=t+p*u,m=a[1]=e+p*h;return Math.sqrt((g-r)*(g-r)+(m-o)*(m-o))}function _(t,e,n,i,r,o,a){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i);var s=t+n,l=e+i,c=a[0]=Math.min(Math.max(r,t),s),u=a[1]=Math.min(Math.max(o,e),l);return Math.sqrt((c-r)*(c-r)+(u-o)*(u-o))}var b=[];function x(t,e,n){var i=_(e.x,e.y,e.width,e.height,t.x,t.y,b);return n.set(b[0],b[1]),i}function w(t,e,n){for(var i,r,o=0,a=0,s=0,c=0,u=1/0,h=e.data,f=t.x,d=t.y,g=0;g<h.length;){var m=h[g++];1===g&&(o=h[g],a=h[g+1],s=o,c=a);var x=u;switch(m){case p.M:s=h[g++],c=h[g++],o=s,a=c;break;case p.L:x=y(o,a,h[g],h[g+1],f,d,b,!0),o=h[g++],a=h[g++];break;case p.C:x=Object(l["e"])(o,a,h[g++],h[g++],h[g++],h[g++],h[g],h[g+1],f,d,b),o=h[g++],a=h[g++];break;case p.Q:x=Object(l["l"])(o,a,h[g++],h[g++],h[g],h[g+1],f,d,b),o=h[g++],a=h[g++];break;case p.A:var w=h[g++],S=h[g++],T=h[g++],O=h[g++],C=h[g++],M=h[g++];g+=1;var A=!!(1-h[g++]);i=Math.cos(C)*T+w,r=Math.sin(C)*O+S,g<=1&&(s=i,c=r);var D=(f-w)*O/T+w;x=v(w,S,O,C,C+M,A,D,d,b),o=Math.cos(C+M)*T+w,a=Math.sin(C+M)*O+S;break;case p.R:s=o=h[g++],c=a=h[g++];var E=h[g++],I=h[g++];x=_(s,c,E,I,f,d,b);break;case p.Z:x=y(o,a,s,c,f,d,b,!0),o=s,a=c;break}x<u&&(u=x,n.set(b[0],b[1]))}return u}var S=new i["a"],T=new i["a"],O=new i["a"],C=new i["a"],M=new i["a"];function A(t,e){if(t){var n=t.getTextGuideLine(),o=t.getTextContent();if(o&&n){var a=t.textGuideLineConfig||{},s=[[0,0],[0,0],[0,0]],l=a.candidates||g,c=o.getBoundingRect().clone();c.applyTransform(o.getComputedTransform());var h=1/0,f=a.anchor,d=t.getComputedTransform(),p=d&&Object(u["e"])([],d),v=e.get("length2")||0;f&&O.copy(f);for(var y=0;y<l.length;y++){var _=l[y];m(_,0,c,S,C),i["a"].scaleAndAdd(T,S,C,v),T.transform(p);var b=t.getBoundingRect(),M=f?f.distance(T):t instanceof r["b"]?w(T,t.path,O):x(T,b,O);M<h&&(h=M,T.transform(d),O.transform(d),O.toArray(s[0]),T.toArray(s[1]),S.toArray(s[2]))}I(s,e.get("minTurnAngle")),n.setShape({points:s})}}}var D=[],E=new i["a"];function I(t,e){if(e<=180&&e>0){e=e/180*Math.PI,S.fromArray(t[0]),T.fromArray(t[1]),O.fromArray(t[2]),i["a"].sub(C,S,T),i["a"].sub(M,O,T);var n=C.len(),r=M.len();if(!(n<.001||r<.001)){C.scale(1/n),M.scale(1/r);var o=C.dot(M),a=Math.cos(e);if(a<o){var s=y(T.x,T.y,O.x,O.y,S.x,S.y,D,!1);E.fromArray(D),E.scaleAndAdd(M,s/Math.tan(Math.PI-e));var l=O.x!==T.x?(E.x-T.x)/(O.x-T.x):(E.y-T.y)/(O.y-T.y);if(isNaN(l))return;l<0?i["a"].copy(E,T):l>1&&i["a"].copy(E,O),E.toArray(t[1])}}}}function P(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,S.fromArray(t[0]),T.fromArray(t[1]),O.fromArray(t[2]),i["a"].sub(C,T,S),i["a"].sub(M,O,T);var r=C.len(),o=M.len();if(!(r<.001||o<.001)){C.scale(1/r),M.scale(1/o);var a=C.dot(e),s=Math.cos(n);if(a<s){var l=y(T.x,T.y,O.x,O.y,S.x,S.y,D,!1);E.fromArray(D);var c=Math.PI/2,u=Math.acos(M.dot(e)),h=c+u-n;if(h>=c)i["a"].copy(E,O);else{E.scaleAndAdd(M,l/Math.tan(Math.PI/2-h));var f=O.x!==T.x?(E.x-T.x)/(O.x-T.x):(E.y-T.y)/(O.y-T.y);if(isNaN(f))return;f<0?i["a"].copy(E,T):f>1&&i["a"].copy(E,O)}E.toArray(t[1])}}}}function L(t,e,n,i){var r="normal"===n,o=r?t:t.ensureState(n);o.ignore=e;var a=i.get("smooth");a&&!0===a&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=i.getModel("lineStyle").getLineStyle();r?t.useStyle(s):o.style=s}function k(t,e){var n=e.smooth,i=e.points;if(i)if(t.moveTo(i[0][0],i[0][1]),n>0&&i.length>=3){var r=h["f"](i[0],i[1]),o=h["f"](i[1],i[2]);if(!r||!o)return t.lineTo(i[1][0],i[1][1]),void t.lineTo(i[2][0],i[2][1]);var a=Math.min(r,o)*n,s=h["j"]([],i[1],i[0],a/r),l=h["j"]([],i[1],i[2],a/o),c=h["j"]([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)t.lineTo(i[u][0],i[u][1])}function j(t,e,n){var i=t.getTextGuideLine(),r=t.getTextContent();if(r){for(var a=e.normal,s=a.get("show"),l=r.ignore,u=0;u<f["a"].length;u++){var h=f["a"][u],d=e[h],p="normal"===h;if(d){var g=d.get("show"),m=p?l:Object(c["P"])(r.states[h]&&r.states[h].ignore,l);if(m||!Object(c["P"])(g,s)){var v=p?i:i&&i.states.normal;v&&(v.ignore=!0);continue}i||(i=new o["a"],t.setTextGuideLine(i),p||!l&&s||L(i,!0,"normal",e.normal),t.stateProxy&&(i.stateProxy=t.stateProxy)),L(i,!1,h,d)}}if(i){Object(c["j"])(i.style,n),i.style.fill=null;var y=a.get("showAbove"),_=t.textGuideLineConfig=t.textGuideLineConfig||{};_.showAbove=y||!1,i.buildPath=k}}else i&&t.removeTextGuideLine()}function R(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},i=0;i<f["g"].length;i++){var r=f["g"][i];n[r]=t.getModel([r,e])}return n}},"89e3":function(t,e,n){"use strict";var i=n("7fae"),r=n("3842"),o=n("eda2"),a=n("e0d8"),s=n("944e"),l=r["v"],c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return Object(i["b"])(e,t),e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return s["a"](t,this._extent)},e.prototype.normalize=function(t){return s["d"](t,this._extent)},e.prototype.scale=function(t){return s["e"](t,this._extent)},e.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},e.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),this.setExtent(e[0],e[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=s["b"](t)},e.prototype.getTicks=function(t){var e=this._interval,n=this._extent,i=this._niceExtent,r=this._intervalPrecision,o=[];if(!e)return o;var a=1e4;n[0]<i[0]&&(t?o.push({value:l(i[0]-e,r)}):o.push({value:n[0]}));var s=i[0];while(s<=i[1]){if(o.push({value:s}),s=l(s+e,r),s===o[o.length-1].value)break;if(o.length>a)return[]}var c=o.length?o[o.length-1].value:i[1];return n[1]>c&&(t?o.push({value:l(c+e,r)}):o.push({value:n[1]})),o},e.prototype.getMinorTicks=function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),r=1;r<e.length;r++){var o=e[r],a=e[r-1],s=0,c=[],u=o.value-a.value,h=u/t;while(s<t-1){var f=l(a.value+(s+1)*h);f>i[0]&&f<i[1]&&c.push(f),s++}n.push(c)}return n},e.prototype.getLabel=function(t,e){if(null==t)return"";var n=e&&e.precision;null==n?n=r["g"](t.value)||0:"auto"===n&&(n=this._intervalPrecision);var i=l(t.value,n,!0);return o["a"](i)},e.prototype.niceTicks=function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var o=s["c"](i,t,e,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.niceExtent=function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=e[0];t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.niceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=l(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=l(Math.ceil(e[1]/r)*r))},e.type="interval",e}(a["a"]);a["a"].registerClass(c),e["a"]=c},"8aa5":function(t,e,n){"use strict";var i=n("6547").charAt;t.exports=function(t,e,n){return e+(n?i(t,e).length:1)}},"8d32":function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=function(){function t(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0}return t}(),a=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),c=Math.sin(o);t.moveTo(l*r+n,c*r+i),t.arc(n,i,r,o,a,!s)},e}(r["b"]);a.prototype.type="arc",e["a"]=a},"8db3":function(t,e,n){var i=n("47f5");function r(t,e){var n=null==t?0:t.length;return!!n&&i(t,e,0)>-1}t.exports=r},"8df4":function(t,e,n){"use strict";var i=n("7a77");function r(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new i(t),e(n.reason))}))}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t,e=new r((function(e){t=e}));return{token:e,cancel:t}},t.exports=r},"8e43":function(t,e,n){"use strict";var i=n("6d8b"),r=0,o=function(){function t(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++r}return t.createByAxisModel=function(e){var n=e.option,r=n.data,o=r&&Object(i["H"])(r,a);return new t({categories:o,needCollect:!o,deduplication:!1!==n.dedplication})},t.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},t.prototype.parseAndCollect=function(t){var e,n=this._needCollect;if("string"!==typeof t&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=this._getOrCreateMap();return e=i.get(t),null==e&&(n?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e},t.prototype._getOrCreateMap=function(){return this._map||(this._map=Object(i["g"])(this.categories))},t}();function a(t){return Object(i["A"])(t)&&null!=t.value?t.value:t+""}e["a"]=o},"8e8a":function(t,e,n){"use strict";(function(t){n("99af"),n("d81d"),n("b0c0"),n("d3b7"),n("25f0"),n("159b");var e=n("313e"),i=n("bc3a"),r=n.n(i),o=t.fabric||(t.fabric={});o.EcEchartsBar=o.util.createClass(o.Rect,{type:"ecEchartsBar",superType:"element",stateProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),cacheProperties:o.Object.prototype.stateProperties.concat(["chartOption"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e)},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({xAxis:{},yAxis:{},series:[{type:"bar",data:[[0,1],[1,2],[2,3],[3,4]]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return o.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var i=this.id,r=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=(this.dialog,this.canvas.getZoom()),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*r*f-s)/2,m=(l*a*f-l)/2,v=o.util.makeElement("div",{id:"".concat(i,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(r*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=o.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element),this.getHistoryData()}},setParameter:function(t){this.chartProperty.list=t,this.getHistoryData()},getHistoryData:function(){var t=this,e=this.editable,n=this.chartOption,i=this.chartProperty,o=i.count,a=i.format,s=i.interval,l=i.loop,c=i.loopInterval,u=i.list;if(!e&&"history"==a&&u.length){l&&setInterval((function(){f()}),1e3*c);var h=u.map((function(t){return t.name})),f=function(){var e={factory:"DefaultDB",tagName:h.toString(),interval:+s,count:o,IsSum:!1};r.a.get("".concat("/ECONApi","/Real/ScopeHisVal"),{params:e}).then((function(e){var i=e.data.Data,r=[],o=[];i&&i.length&&(i[0].Data&&i[0].Data.length&&i[0].Data.forEach((function(t){r.push(t.RecordTime)})),i.forEach((function(t){var e=t.Data.map((function(t){return+t.Value}));o.push({name:t.TagName,type:"bar",data:e})}))),n.xAxis instanceof Array?n.xAxis[0].data=r:n.xAxis.data=r,n.series=o,t.instance.setOption(n,{replaceMerge:["legend","xAxis","yAxis","series"]})}))};f()}}}),o.EcEchartsBar.fromObject=function(t,e){return e(new o.EcEchartsBar(t.chartOption,t))},o.EcEchartsBar.async=!0}).call(this,n("c8ba"))},"90e3":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++n+i).toString(36)}},9112:function(t,e,n){var i=n("83ab"),r=n("9bf2"),o=n("5c6c");t.exports=i?function(t,e,n){return r.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t}},9152:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,l=(1<<s)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,d=t[e+h];for(h+=f,o=d&(1<<-u)-1,d>>=-u,u+=s;u>0;o=256*o+t[e+h],h+=f,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=i;u>0;a=256*a+t[e+h],h+=f,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,i),o-=c}return(d?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,l,c=8*o-r-1,u=(1<<c)-1,h=u>>1,f=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=u):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),e+=a+h>=1?f/l:f*Math.pow(2,1-h),e*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(e*l-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+d]=255&s,d+=p,s/=256,r-=8);for(a=a<<r|s,c+=r;c>0;t[n+d]=255&a,d+=p,a/=256,c-=8);t[n+d-p]|=128*g}},"91e9":function(t,e){function n(t,e){return function(n){return t(e(n))}}t.exports=n},9263:function(t,e,n){"use strict";var i=n("ad6d"),r=n("9f7f"),o=RegExp.prototype.exec,a=String.prototype.replace,s=o,l=function(){var t=/a/,e=/b*/g;return o.call(t,"a"),o.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],h=l||u||c;h&&(s=function(t){var e,n,r,s,h=this,f=c&&h.sticky,d=i.call(h),p=h.source,g=0,m=t;return f&&(d=d.replace("y",""),-1===d.indexOf("g")&&(d+="g"),m=String(t).slice(h.lastIndex),h.lastIndex>0&&(!h.multiline||h.multiline&&"\n"!==t[h.lastIndex-1])&&(p="(?: "+p+")",m=" "+m,g++),n=new RegExp("^(?:"+p+")",d)),u&&(n=new RegExp("^"+p+"$(?!\\s)",d)),l&&(e=h.lastIndex),r=o.call(f?n:h,m),f?r?(r.input=r.input.slice(g),r[0]=r[0].slice(g),r.index=h.lastIndex,h.lastIndex+=r[0].length):h.lastIndex=0:l&&r&&(h.lastIndex=h.global?r.index+r[0].length:e),u&&r&&r.length>1&&a.call(r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r}),t.exports=s},"93ed":function(t,e,n){var i=n("4245");function r(t){var e=i(this,t)["delete"](t);return this.size-=e?1:0,e}t.exports=r},"944e":function(t,e,n){"use strict";n.d(e,"c",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h}));var i=n("3842"),r=i["v"];function o(t,e,n,o){var s={},c=t[1]-t[0],u=s.interval=i["m"](c/e,!0);null!=n&&u<n&&(u=s.interval=n),null!=o&&u>o&&(u=s.interval=o);var h=s.intervalPrecision=a(u),f=s.niceTickExtent=[r(Math.ceil(t[0]/u)*u,h),r(Math.floor(t[1]/u)*u,h)];return l(f,t),s}function a(t){return i["g"](t)+2}function s(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function l(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),s(t,0,e),s(t,1,e),t[0]>t[1]&&(t[0]=t[1])}function c(t,e){return t>=e[0]&&t<=e[1]}function u(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function h(t,e){return t*(e[1]-e[0])+e[0]}},"94ca":function(t,e,n){var i=n("d039"),r=/#|\.prototype\./,o=function(t,e){var n=s[a(t)];return n==c||n!=l&&("function"==typeof e?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(r,".").toLowerCase()},s=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";t.exports=o},9520:function(t,e,n){var i=n("3729"),r=n("1a8c"),o="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",l="[object Proxy]";function c(t){if(!r(t))return!1;var e=i(t);return e==a||e==s||e==o||e==l}t.exports=c},9638:function(t,e){function n(t,e){return t===e||t!==t&&e!==e}t.exports=n},"966f":function(t,e,n){var i=n("7e64"),r=n("c05f"),o=1,a=2;function s(t,e,n,s){var l=n.length,c=l,u=!s;if(null==t)return!c;t=Object(t);while(l--){var h=n[l];if(u&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}while(++l<c){h=n[l];var f=h[0],d=t[f],p=h[1];if(u&&h[2]){if(void 0===d&&!(f in t))return!1}else{var g=new i;if(s)var m=s(d,p,f,t,e,g);if(!(void 0===m?r(p,d,o|a,s,g):m))return!1}}return!0}t.exports=s},9680:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a){if(0===r)return!1;var s=r,l=0,c=t;if(a>e+s&&a>i+s||a<e-s&&a<i-s||o>t+s&&o>n+s||o<t-s&&o<n-s)return!1;if(t===n)return Math.abs(o-t)<=s/2;l=(e-i)/(t-n),c=(t*i-n*e)/(t-n);var u=l*o-a+c,h=u*u/(l*l+1);return h<=s/2*s/2}n.d(e,"a",(function(){return i}))},"96cf":function(t,e,n){var i=function(t){"use strict";var e,n=Object.prototype,i=n.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(P){l=function(t,e,n){return t[e]=n}}function c(t,e,n,i){var r=e&&e.prototype instanceof m?e:m,o=Object.create(r.prototype),a=new D(i||[]);return o._invoke=O(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(P){return{type:"throw",arg:P}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",g={};function m(){}function v(){}function y(){}var _={};_[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(E([])));x&&x!==n&&i.call(x,o)&&(_=x);var w=y.prototype=m.prototype=Object.create(_);function S(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function T(t,e){function n(r,o,a,s){var l=u(t[r],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"===typeof h&&i.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,s)}))}s(l.arg)}var r;function o(t,i){function o(){return new e((function(e,r){n(t,i,e,r)}))}return r=r?r.then(o,o):o()}this._invoke=o}function O(t,e,n){var i=h;return function(r,o){if(i===d)throw new Error("Generator is already running");if(i===p){if("throw"===r)throw o;return I()}n.method=r,n.arg=o;while(1){var a=n.delegate;if(a){var s=C(a,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===h)throw i=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=u(t,e,n);if("normal"===l.type){if(i=n.done?p:f,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=p,n.method="throw",n.arg=l.arg)}}}function C(t,n){var i=t.iterator[n.method];if(i===e){if(n.delegate=null,"throw"===n.method){if(t.iterator["return"]&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method))return g;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var r=u(i,t.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,g;var o=r.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function D(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function E(t){if(t){var n=t[o];if(n)return n.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function n(){while(++r<t.length)if(i.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return v.prototype=w.constructor=y,y.constructor=v,v.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},S(T.prototype),T.prototype[a]=function(){return this},t.AsyncIterator=T,t.async=function(e,n,i,r,o){void 0===o&&(o=Promise);var a=new T(c(e,n,i,r),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},S(w),l(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){while(e.length){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=E,D.prototype={constructor:D,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&i.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(i,r){return s.type="throw",s.arg=t,n.next=i,r&&(n.method="next",n.arg=e),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var l=i.call(a,"catchLoc"),c=i.call(a,"finallyLoc");if(l&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;A(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,i){return this.delegate={iterator:E(t),resultName:n,nextLoc:i},"next"===this.method&&(this.arg=e),g}},t}(t.exports);try{regeneratorRuntime=i}catch(r){Function("r","regeneratorRuntime = r")(i)}},9850:function(t,e,n){"use strict";var i=n("1687"),r=n("dce8"),o=Math.min,a=Math.max,s=new r["a"],l=new r["a"],c=new r["a"],u=new r["a"],h=new r["a"],f=new r["a"],d=function(){function t(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}return t.prototype.union=function(t){var e=o(t.x,this.x),n=o(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=a(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=a(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,r=t.height/e.height,o=i["c"]();return i["i"](o,o,[-e.x,-e.y]),i["h"](o,o,[n,r]),i["i"](o,o,[t.x,t.y]),o},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var i=this,o=i.x,a=i.x+i.width,s=i.y,l=i.y+i.height,c=e.x,u=e.x+e.width,d=e.y,p=e.y+e.height,g=!(a<c||u<o||l<d||p<s);if(n){var m=1/0,v=0,y=Math.abs(a-c),_=Math.abs(u-o),b=Math.abs(l-d),x=Math.abs(p-s),w=Math.min(y,_),S=Math.min(b,x);a<c||u<o?w>v&&(v=w,y<_?r["a"].set(f,-y,0):r["a"].set(f,_,0)):w<m&&(m=w,y<_?r["a"].set(h,y,0):r["a"].set(h,-_,0)),l<d||p<s?S>v&&(v=S,b<x?r["a"].set(f,0,-b):r["a"].set(f,0,x)):w<m&&(m=w,b<x?r["a"].set(h,0,b):r["a"].set(h,0,-x))}return n&&r["a"].copy(n,g?h:f),g},t.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,n,i){if(i){if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],h=i[3],f=i[4],d=i[5];return e.x=n.x*r+f,e.y=n.y*h+d,e.width=n.width*r,e.height=n.height*h,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}s.x=c.x=n.x,s.y=u.y=n.y,l.x=u.x=n.x+n.width,l.y=c.y=n.y+n.height,s.transform(i),u.transform(i),l.transform(i),c.transform(i),e.x=o(s.x,l.x,c.x,u.x),e.y=o(s.y,l.y,c.y,u.y);var p=a(s.x,l.x,c.x,u.x),g=a(s.y,l.y,c.y,u.y);e.width=p-e.x,e.height=g-e.y}else e!==n&&t.copy(e,n)},t}();e["a"]=d},"98b7":function(t,e,n){"use strict";var i;i="undefined"!==typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)},e["a"]=i},"998a":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("76a5");function r(t,e,n,r,o,a,s,l){var c=new i["a"]({style:{text:t,font:e,align:n,verticalAlign:r,padding:o,rich:a,overflow:s?"truncate":null,lineHeight:l}});return c.getBoundingRect()}},"99af":function(t,e,n){"use strict";var i=n("23e7"),r=n("d039"),o=n("e8b5"),a=n("861d"),s=n("7b0b"),l=n("50c4"),c=n("8418"),u=n("65f0"),h=n("1dde"),f=n("b622"),d=n("2d00"),p=f("isConcatSpreadable"),g=9007199254740991,m="Maximum allowed index exceeded",v=d>=51||!r((function(){var t=[];return t[p]=!1,t.concat()[0]!==t})),y=h("concat"),_=function(t){if(!a(t))return!1;var e=t[p];return void 0!==e?!!e:o(t)},b=!v||!y;i({target:"Array",proto:!0,forced:b},{concat:function(t){var e,n,i,r,o,a=s(this),h=u(a,0),f=0;for(e=-1,i=arguments.length;e<i;e++)if(o=-1===e?a:arguments[e],_(o)){if(r=l(o.length),f+r>g)throw TypeError(m);for(n=0;n<r;n++,f++)n in o&&c(h,f,o[n])}else{if(f>=g)throw TypeError(m);c(h,f++,o)}return h.length=f,h}})},"99d3":function(t,e,n){(function(t){var i=n("585a"),r=e&&!e.nodeType&&e,o=r&&"object"==typeof t&&t&&!t.nodeType&&t,a=o&&o.exports===r,s=a&&i.process,l=function(){try{var t=o&&o.require&&o.require("util").types;return t||s&&s.binding&&s.binding("util")}catch(e){}}();t.exports=l}).call(this,n("62e4")(t))},"9b02":function(t,e,n){var i=n("656b");function r(t,e,n){var r=null==t?void 0:i(t,e);return void 0===r?n:r}t.exports=r},"9bdd":function(t,e,n){var i=n("825a"),r=n("2a62");t.exports=function(t,e,n,o){try{return o?e(i(n)[0],n[1]):e(n)}catch(a){throw r(t),a}}},"9bf2":function(t,e,n){var i=n("83ab"),r=n("0cfb"),o=n("825a"),a=n("c04e"),s=Object.defineProperty;e.f=i?s:function(t,e,n){if(o(t),e=a(e,!0),o(n),r)try{return s(t,e,n)}catch(i){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},"9c87":function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcSwitchV=e.util.createClass(e.Object,{type:"ecSwitchV",text:"水平开关",stateProperties:e.Object.prototype.stateProperties.concat(["text","left","top"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","left","top"]),switch:"0",threshold:0,initialize:function(t){t||(t={}),this.callSuper("initialize",t),this.setCoords()},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",["objectCaching"].concat(t)))},_render:function(t){this.switch=+this.text,this.ctx=t,this.callSuper("_render",t),this.drawSwitch()},drawSwitch:function(){this.ctx.save();var t=this.width/2,e=this.height/2,n=this.width/5;this.height;this.ctx.beginPath(),this.ctx.moveTo(-n,0),this.ctx.lineTo(-t,0),this.ctx.lineWidth=2*this.strokeWidth,this.ctx.strokeStyle="#fa8814",this.ctx.stroke(),this.switch>this.threshold?(this.ctx.beginPath(),this.ctx.moveTo(-n,0),this.ctx.lineTo(n,0),this.ctx.strokeStyle="#ff0000",this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.moveTo(-n,0),this.ctx.lineTo(e,-e),this.ctx.strokeStyle="#07ef2e",this.ctx.stroke()),this.ctx.beginPath(),this.ctx.moveTo(n,0),this.ctx.lineTo(t,0),this.ctx.strokeStyle="#fa8814",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(-n,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle="#fa8814",this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(n,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle="#fa8814",this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}),e.EcSwitchV.fromObject=function(t,n){n&&n(new e.EcSwitchV(t))},e.EcSwitchV.async=!0}).call(this,n("c8ba"))},"9cf9":function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=Math.round;function r(t,e,n){if(e){var r=e.x1,o=e.x2,s=e.y1,l=e.y2;t.x1=r,t.x2=o,t.y1=s,t.y2=l;var c=n&&n.lineWidth;return c?(i(2*r)===i(2*o)&&(t.x1=t.x2=a(r,c,!0)),i(2*s)===i(2*l)&&(t.y1=t.y2=a(s,c,!0)),t):t}}function o(t,e,n){if(e){var i=e.x,r=e.y,o=e.width,s=e.height;t.x=i,t.y=r,t.width=o,t.height=s;var l=n&&n.lineWidth;return l?(t.x=a(i,l,!0),t.y=a(r,l,!0),t.width=Math.max(a(i+o,l,!1)-t.x,0===o?0:1),t.height=Math.max(a(r+s,l,!1)-t.y,0===s?0:1),t):t}}function a(t,e,n){if(!e)return t;var r=i(2*t);return(r+i(e))%2===0?r/2:(r+(n?1:-1))/2}},"9d57":function(t,e,n){"use strict";n.d(e,"a",(function(){return f})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return g})),n.d(e,"f",(function(){return v})),n.d(e,"c",(function(){return y})),n.d(e,"b",(function(){return _}));var i=n("6d8b"),r=n("3842"),o=n("ee1a"),a=n("cccd"),s="__ec_stack_",l=.5,c="undefined"!==typeof Float32Array?Float32Array:Array;function u(t){return t.get("stack")||s+t.seriesIndex}function h(t){return t.dim+t.index}function f(t){var e=[],n=t.axis,r="axis0";if("category"===n.type){for(var o=n.getBandWidth(),a=0;a<t.count;a++)e.push(i["j"]({bandWidth:o,axisKey:r,stackId:s+a},t));var l=m(e),c=[];for(a=0;a<t.count;a++){var u=l[r][s+a];u.offsetCenter=u.offset+u.width/2,c.push(u)}return c}}function d(t,e){var n=[];return e.eachSeriesByType(t,(function(t){b(t)&&!x(t)&&n.push(t)})),n}function p(t){var e={};i["k"](t,(function(t){var n=t.coordinateSystem,i=n.getBaseAxis();if("time"===i.type||"value"===i.type)for(var r=t.getData(),o=i.dim+"_"+i.index,a=r.getDimensionIndex(r.mapDimension(i.dim)),s=r.getStore(),l=0,c=s.count();l<c;++l){var u=s.get(a,l);e[o]?e[o].push(u):e[o]=[u]}}));var n={};for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];if(o){o.sort((function(t,e){return t-e}));for(var a=null,s=1;s<o.length;++s){var l=o[s]-o[s-1];l>0&&(a=null===a?l:Math.min(a,l))}n[r]=a}}return n}function g(t){var e=p(t),n=[];return i["k"](t,(function(t){var i,o=t.coordinateSystem,a=o.getBaseAxis(),s=a.getExtent();if("category"===a.type)i=a.getBandWidth();else if("value"===a.type||"time"===a.type){var l=a.dim+"_"+a.index,c=e[l],f=Math.abs(s[1]-s[0]),d=a.scale.getExtent(),p=Math.abs(d[1]-d[0]);i=c?f/p*c:f}else{var g=t.getData();i=Math.abs(s[1]-s[0])/g.count()}var m=Object(r["p"])(t.get("barWidth"),i),v=Object(r["p"])(t.get("barMaxWidth"),i),y=Object(r["p"])(t.get("barMinWidth")||1,i),_=t.get("barGap"),b=t.get("barCategoryGap");n.push({bandWidth:i,barWidth:m,barMaxWidth:v,barMinWidth:y,barGap:_,barCategoryGap:b,axisKey:h(a),stackId:u(t)})})),m(n)}function m(t){var e={};i["k"](t,(function(t,n){var i=t.axisKey,r=t.bandWidth,o=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},a=o.stacks;e[i]=o;var s=t.stackId;a[s]||o.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(o.remainedWidth,l),o.remainedWidth-=l);var c=t.barMaxWidth;c&&(a[s].maxWidth=c);var u=t.barMinWidth;u&&(a[s].minWidth=u);var h=t.barGap;null!=h&&(o.gap=h);var f=t.barCategoryGap;null!=f&&(o.categoryGap=f)}));var n={};return i["k"](e,(function(t,e){n[e]={};var o=t.stacks,a=t.bandWidth,s=t.categoryGap;if(null==s){var l=i["F"](o).length;s=Math.max(35-4*l,15)+"%"}var c=Object(r["p"])(s,a),u=Object(r["p"])(t.gap,1),h=t.remainedWidth,f=t.autoWidthCount,d=(h-c)/(f+(f-1)*u);d=Math.max(d,0),i["k"](o,(function(t){var e=t.maxWidth,n=t.minWidth;if(t.width){i=t.width;e&&(i=Math.min(i,e)),n&&(i=Math.max(i,n)),t.width=i,h-=i+u*i,f--}else{var i=d;e&&e<i&&(i=Math.min(e,h)),n&&n>i&&(i=n),i!==d&&(t.width=i,h-=i+u*i,f--)}})),d=(h-c)/(f+(f-1)*u),d=Math.max(d,0);var p,g=0;i["k"](o,(function(t,e){t.width||(t.width=d),p=t,g+=t.width*(1+u)})),p&&(g-=p.width*u);var m=-g/2;i["k"](o,(function(t,i){n[e][i]=n[e][i]||{bandWidth:a,offset:m,width:t.width},m+=t.width*(1+u)}))})),n}function v(t,e,n){if(t&&e){var i=t[h(e)];return null!=i&&null!=n?i[u(n)]:i}}function y(t,e){var n=d(t,e),r=g(n),a={};i["k"](n,(function(t){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),s=u(t),l=r[h(i)][s],c=l.offset,f=l.width,d=n.getOtherAxis(i),p=t.get("barMinHeight")||0;a[s]=a[s]||[],e.setLayout({bandWidth:l.bandWidth,offset:c,size:f});for(var g=e.mapDimension(d.dim),m=e.mapDimension(i.dim),v=Object(o["c"])(e,g),y=d.isHorizontal(),_=w(i,d,v),b=e.getStore(),x=e.getDimensionIndex(g),S=e.getDimensionIndex(m),T=0,O=b.count();T<O;T++){var C=b.get(x,T),M=b.get(S,T),A=C>=0?"p":"n",D=_;v&&(a[s][M]||(a[s][M]={p:_,n:_}),D=a[s][M][A]);var E=void 0,I=void 0,P=void 0,L=void 0;if(y){var k=n.dataToPoint([C,M]);E=D,I=k[1]+c,P=k[0]-_,L=f,Math.abs(P)<p&&(P=(P<0?-1:1)*p),isNaN(P)||v&&(a[s][M][A]+=P)}else{k=n.dataToPoint([M,C]);E=k[0]+c,I=D,P=f,L=k[1]-_,Math.abs(L)<p&&(L=(L<=0?-1:1)*p),isNaN(L)||v&&(a[s][M][A]+=L)}e.setItemLayout(T,{x:E,y:I,width:P,height:L})}}))}var _={seriesType:"bar",plan:Object(a["a"])(),reset:function(t){if(b(t)&&x(t)){var e=t.getData(),n=t.coordinateSystem,i=n.master.getRect(),r=n.getBaseAxis(),o=n.getOtherAxis(r),a=e.getDimensionIndex(e.mapDimension(o.dim)),s=e.getDimensionIndex(e.mapDimension(r.dim)),u=o.isHorizontal(),h=u?0:1,f=v(g([t]),r,t).width;return f>l||(f=l),{progress:function(t,e){var l,d=t.count,p=new c(2*d),g=new c(2*d),m=new c(d),v=[],y=[],_=0,b=0,x=e.getStore();while(null!=(l=t.next()))y[h]=x.get(a,l),y[1-h]=x.get(s,l),v=n.dataToPoint(y,null),g[_]=u?i.x+i.width:v[0],p[_++]=v[0],g[_]=u?v[1]:i.y+i.height,p[_++]=v[1],m[b++]=l;e.setLayout({largePoints:p,largeDataIndices:m,largeBackgroundPoints:g,barWidth:f,valueAxisStart:w(r,o,!1),backgroundStart:u?i.x:i.y,valueAxisHorizontal:u})}}}}};function b(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function x(t){return t.pipelineContext&&t.pipelineContext.large}function w(t,e,n){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}},"9e69":function(t,e,n){var i=n("2b3e"),r=i.Symbol;t.exports=r},"9ed3":function(t,e,n){"use strict";var i=n("ae93").IteratorPrototype,r=n("7c73"),o=n("5c6c"),a=n("d44e"),s=n("3f8c"),l=function(){return this};t.exports=function(t,e,n){var c=e+" Iterator";return t.prototype=r(i,{next:o(1,n)}),a(t,c,!1,!0),s[c]=l,t}},"9f7f":function(t,e,n){"use strict";var i=n("d039");function r(t,e){return RegExp(t,e)}e.UNSUPPORTED_Y=i((function(){var t=r("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),e.BROKEN_CARET=i((function(){var t=r("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},"9fbc":function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("6d8b");function r(t){return new o(t)}var o=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var e,n=this._upstream,r=t&&t.skip;if(this._dirty&&n){var o=this.context;o.data=o.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!r&&(e=this._plan(this.context));var a,s=h(this._modBy),l=this._modDataCount||0,c=h(t&&t.modBy),u=t&&t.modDataCount||0;function h(t){return!(t>=1)&&(t=1),t}s===c&&l===u||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,a=this._doReset(r)),this._modBy=c,this._modDataCount=u;var f=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(null!=f?this._dueIndex+f:1/0,this._dueEnd);if(!r&&(a||d<p)){var g=this._progress;if(Object(i["t"])(g))for(var m=0;m<g.length;m++)this._doProgress(g[m],d,p,c,u);else this._doProgress(g,d,p,c,u)}this._dueIndex=p;var v=null!=this._settedOutputEnd?this._settedOutputEnd:p;0,this._outputDueEnd=v}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,e,n,i,r){a.reset(e,n,i,r),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:a.next},this.context)},t.prototype._doReset=function(t){var e,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&(e=this._reset(this.context),e&&e.progress&&(n=e.forceFirstProgress,e=e.progress),Object(i["t"])(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var r=this._downstream;return r&&r.dirty(),n},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),a=function(){var t,e,n,i,r,o={reset:function(l,c,u,h){e=l,t=c,n=u,i=h,r=Math.ceil(i/n),o.next=n>1&&i>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var o=e%r*n+Math.ceil(e/r),a=e>=t?null:o<i?o:e;return e++,a}}()},a15a:function(t,e,n){"use strict";n.d(e,"d",(function(){return y})),n.d(e,"a",(function(){return x})),n.d(e,"c",(function(){return w})),n.d(e,"b",(function(){return S}));var i=n("6d8b"),r=n("cbe5"),o=n("cb11"),a=n("c7a2"),s=n("d9fc"),l=n("2306"),c=n("9850"),u=n("e86a"),h=n("3842"),f=r["b"].extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),d=r["b"].extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),p=r["b"].extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,h=Math.sin(c),f=Math.cos(c),d=.6*a,p=.7*a;t.moveTo(n-u,l+s),t.arc(n,l,a,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+u-h*d,l+s+f*d,n,i-p,n,i),t.bezierCurveTo(n,i-p,n-u+h*d,l+s+f*d,n-u,l+s),t.closePath()}}),g=r["b"].extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,a=i/3*2;t.moveTo(r,o),t.lineTo(r+a,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-a,o+n),t.lineTo(r,o),t.closePath()}}),m={line:o["a"],rect:a["a"],roundRect:a["a"],square:a["a"],circle:s["a"],diamond:d,pin:p,arrow:g,triangle:f},v={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},y={};Object(i["k"])(m,(function(t,e){y[e]=new t}));var _=r["b"].extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=Object(u["d"])(t,e,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.position&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var r=y[i];r||(i="rect",r=y[i]),v[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n)}}});function b(t,e){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=t:n.fill=t,this.markRedraw()}}function x(t,e,n,i,r,o,a){var s,u=0===t.indexOf("empty");return u&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),s=0===t.indexOf("image://")?l["makeImage"](t.slice(8),new c["a"](e,n,i,r),a?"center":"cover"):0===t.indexOf("path://")?l["makePath"](t.slice(7),{},new c["a"](e,n,i,r),a?"center":"cover"):new _({shape:{symbolType:t,x:e,y:n,width:i,height:r}}),s.__isEmptyBrush=u,s.setColor=b,o&&s.setColor(o),s}function w(t){return Object(i["t"])(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function S(t,e){if(null!=t)return Object(i["t"])(t)||(t=[t,t]),[Object(h["p"])(t[0],e[0])||0,Object(h["p"])(Object(i["P"])(t[1],t[0]),e[1])||0]}},a15b:function(t,e,n){"use strict";var i=n("23e7"),r=n("44ad"),o=n("fc6a"),a=n("a640"),s=[].join,l=r!=Object,c=a("join",",");i({target:"Array",proto:!0,forced:l||!c},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a2be:function(t,e,n){var i=n("d612"),r=n("4284"),o=n("c584"),a=1,s=2;function l(t,e,n,l,c,u){var h=n&a,f=t.length,d=e.length;if(f!=d&&!(h&&d>f))return!1;var p=u.get(t),g=u.get(e);if(p&&g)return p==e&&g==t;var m=-1,v=!0,y=n&s?new i:void 0;u.set(t,e),u.set(e,t);while(++m<f){var _=t[m],b=e[m];if(l)var x=h?l(b,_,m,e,t,u):l(_,b,m,t,e,u);if(void 0!==x){if(x)continue;v=!1;break}if(y){if(!r(e,(function(t,e){if(!o(y,e)&&(_===t||c(_,t,n,l,u)))return y.push(e)}))){v=!1;break}}else if(_!==b&&!c(_,b,n,l,u)){v=!1;break}}return u["delete"](t),u["delete"](e),v}t.exports=l},a434:function(t,e,n){"use strict";var i=n("23e7"),r=n("23cb"),o=n("a691"),a=n("50c4"),s=n("7b0b"),l=n("65f0"),c=n("8418"),u=n("1dde"),h=u("splice"),f=Math.max,d=Math.min,p=9007199254740991,g="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!h},{splice:function(t,e){var n,i,u,h,m,v,y=s(this),_=a(y.length),b=r(t,_),x=arguments.length;if(0===x?n=i=0:1===x?(n=0,i=_-b):(n=x-2,i=d(f(o(e),0),_-b)),_+n-i>p)throw TypeError(g);for(u=l(y,i),h=0;h<i;h++)m=b+h,m in y&&c(u,h,y[m]);if(u.length=i,n<i){for(h=b;h<_-i;h++)m=h+i,v=h+n,m in y?y[v]=y[m]:delete y[v];for(h=_;h>_-i+n;h--)delete y[h-1]}else if(n>i)for(h=_-i;h>b;h--)m=h+i-1,v=h+n-1,m in y?y[v]=y[m]:delete y[v];for(h=0;h<n;h++)y[h+b]=arguments[h+2];return y.length=_-i+n,u}})},a4b4:function(t,e,n){var i=n("342f");t.exports=/web0s(?!.*chrome)/i.test(i)},a4d3:function(t,e,n){"use strict";var i=n("23e7"),r=n("da84"),o=n("d066"),a=n("c430"),s=n("83ab"),l=n("4930"),c=n("fdbf"),u=n("d039"),h=n("5135"),f=n("e8b5"),d=n("861d"),p=n("825a"),g=n("7b0b"),m=n("fc6a"),v=n("c04e"),y=n("5c6c"),_=n("7c73"),b=n("df75"),x=n("241c"),w=n("057f"),S=n("7418"),T=n("06cf"),O=n("9bf2"),C=n("d1e7"),M=n("9112"),A=n("6eeb"),D=n("5692"),E=n("f772"),I=n("d012"),P=n("90e3"),L=n("b622"),k=n("e538"),j=n("746f"),R=n("d44e"),N=n("69f3"),B=n("b727").forEach,F=E("hidden"),z="Symbol",V="prototype",H=L("toPrimitive"),G=N.set,U=N.getterFor(z),W=Object[V],X=r.Symbol,Y=o("JSON","stringify"),q=T.f,Z=O.f,K=w.f,$=C.f,J=D("symbols"),Q=D("op-symbols"),tt=D("string-to-symbol-registry"),et=D("symbol-to-string-registry"),nt=D("wks"),it=r.QObject,rt=!it||!it[V]||!it[V].findChild,ot=s&&u((function(){return 7!=_(Z({},"a",{get:function(){return Z(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=q(W,e);i&&delete W[e],Z(t,e,n),i&&t!==W&&Z(W,e,i)}:Z,at=function(t,e){var n=J[t]=_(X[V]);return G(n,{type:z,tag:t,description:e}),s||(n.description=e),n},st=c?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof X},lt=function(t,e,n){t===W&&lt(Q,e,n),p(t);var i=v(e,!0);return p(n),h(J,i)?(n.enumerable?(h(t,F)&&t[F][i]&&(t[F][i]=!1),n=_(n,{enumerable:y(0,!1)})):(h(t,F)||Z(t,F,y(1,{})),t[F][i]=!0),ot(t,i,n)):Z(t,i,n)},ct=function(t,e){p(t);var n=m(e),i=b(n).concat(pt(n));return B(i,(function(e){s&&!ht.call(n,e)||lt(t,e,n[e])})),t},ut=function(t,e){return void 0===e?_(t):ct(_(t),e)},ht=function(t){var e=v(t,!0),n=$.call(this,e);return!(this===W&&h(J,e)&&!h(Q,e))&&(!(n||!h(this,e)||!h(J,e)||h(this,F)&&this[F][e])||n)},ft=function(t,e){var n=m(t),i=v(e,!0);if(n!==W||!h(J,i)||h(Q,i)){var r=q(n,i);return!r||!h(J,i)||h(n,F)&&n[F][i]||(r.enumerable=!0),r}},dt=function(t){var e=K(m(t)),n=[];return B(e,(function(t){h(J,t)||h(I,t)||n.push(t)})),n},pt=function(t){var e=t===W,n=K(e?Q:m(t)),i=[];return B(n,(function(t){!h(J,t)||e&&!h(W,t)||i.push(J[t])})),i};if(l||(X=function(){if(this instanceof X)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=P(t),n=function(t){this===W&&n.call(Q,t),h(this,F)&&h(this[F],e)&&(this[F][e]=!1),ot(this,e,y(1,t))};return s&&rt&&ot(W,e,{configurable:!0,set:n}),at(e,t)},A(X[V],"toString",(function(){return U(this).tag})),A(X,"withoutSetter",(function(t){return at(P(t),t)})),C.f=ht,O.f=lt,T.f=ft,x.f=w.f=dt,S.f=pt,k.f=function(t){return at(L(t),t)},s&&(Z(X[V],"description",{configurable:!0,get:function(){return U(this).description}}),a||A(W,"propertyIsEnumerable",ht,{unsafe:!0}))),i({global:!0,wrap:!0,forced:!l,sham:!l},{Symbol:X}),B(b(nt),(function(t){j(t)})),i({target:z,stat:!0,forced:!l},{for:function(t){var e=String(t);if(h(tt,e))return tt[e];var n=X(e);return tt[e]=n,et[n]=e,n},keyFor:function(t){if(!st(t))throw TypeError(t+" is not a symbol");if(h(et,t))return et[t]},useSetter:function(){rt=!0},useSimple:function(){rt=!1}}),i({target:"Object",stat:!0,forced:!l,sham:!s},{create:ut,defineProperty:lt,defineProperties:ct,getOwnPropertyDescriptor:ft}),i({target:"Object",stat:!0,forced:!l},{getOwnPropertyNames:dt,getOwnPropertySymbols:pt}),i({target:"Object",stat:!0,forced:u((function(){S.f(1)}))},{getOwnPropertySymbols:function(t){return S.f(g(t))}}),Y){var gt=!l||u((function(){var t=X();return"[null]"!=Y([t])||"{}"!=Y({a:t})||"{}"!=Y(Object(t))}));i({target:"JSON",stat:!0,forced:gt},{stringify:function(t,e,n){var i,r=[t],o=1;while(arguments.length>o)r.push(arguments[o++]);if(i=e,(d(e)||void 0!==t)&&!st(t))return f(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!st(e))return e}),r[1]=e,Y.apply(null,r)}})}X[V][H]||M(X[V],H,X[V].valueOf),R(X,z),I[F]=!0},a524:function(t,e,n){var i=n("4245");function r(t){return i(this,t).has(t)}t.exports=r},a630:function(t,e,n){var i=n("23e7"),r=n("4df4"),o=n("1c7e"),a=!o((function(t){Array.from(t)}));i({target:"Array",stat:!0,forced:a},{from:r})},a640:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t,e){var n=[][t];return!!n&&i((function(){n.call(null,e||function(){throw 1},1)}))}},a691:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},a76a:function(t,e,n){(function(t){n("99af"),n("cb29"),n("a9e3");var e=t.fabric||(t.fabric={});e.EcGate=e.util.createClass(e.Object,{type:"ecGate",text:"断路器",stateProperties:e.Object.prototype.stateProperties.concat(["text","left","top","gate","gateOn"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","left","top","gate","gateOn"]),gateOn:!1,gate:{dotColor:"#fa8814",onColor:"#ff0000",offColor:"#07ef2e"},updateScript:"function(value, item, data, components) {\n  if(Number(value)) {\n    item.set('gateOn', true) //合闸\n  } else {\n    item.set('gateOn', false) //分闸\n  }\n  return true\n}",initialize:function(t){t||(t={}),this.callSuper("initialize",t),this.setCoords()},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",["objectCaching"].concat(t)))},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawSwitch()},drawSwitch:function(){this.ctx.save();var t=this.width/2,e=this.height/1.5;this.ctx.lineWidth=this.strokeWidth,this.gateOn?(this.ctx.beginPath(),this.ctx.moveTo(t,0),this.ctx.lineTo(-t,0),this.ctx.strokeStyle=this.stroke||this.gate.onColor,this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.moveTo(-t,0),this.ctx.lineTo(e,-e),this.ctx.strokeStyle=this.stroke||this.gate.offColor,this.ctx.stroke()),this.ctx.beginPath(),this.ctx.arc(-t,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle=this.gate.dotColor,this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(t,0,3*this.strokeWidth,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle=this.gate.dotColor,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}),e.EcGate.fromObject=function(t,n){n&&n(new e.EcGate(t))},e.EcGate.async=!0}).call(this,n("c8ba"))},a79a:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcLabel=e.util.createClass(e.Text,{type:"ecLabel",MIN_TEXT_WIDTH:150,split:{field:"Des",flag:!1,separate:"|",position:1,breakNumber:10},initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t)}}),e.EcLabel.fromObject=function(t,n){n&&n(new e.EcLabel(t.text,t))},e.EcLabel.async=!0}).call(this,n("c8ba"))},a8ef:function(t,e,n){"use strict";(function(t){n("99af"),n("a9e3");var e=n("313e"),i=(n("d015"),t.fabric||(t.fabric={}));i.EcEchartsLiquidfill=i.util.createClass(i.Rect,{type:"ecEchartsLiquidfill",superType:"element",stateProperties:i.Object.prototype.stateProperties.concat(["chartOption","text"]),cacheProperties:i.Object.prototype.stateProperties.concat(["chartOption","text"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e)},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({series:[{type:"liquidFill",data:[.6]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return i.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var r=this.id,o=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=(this.dialog,this.canvas.getZoom()),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*o*f-s)/2,m=(l*a*f-l)/2,v=i.util.makeElement("div",{id:"".concat(r,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(o*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=i.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element)}this.getHistoryData()},getHistoryData:function(){var t=this.text,e=this.chartOption;Number(t)&&(e.series[0].data[0]=t,this.instance.setOption(e,{replaceMerge:["series"]}))}}),i.EcEchartsLiquidfill.fromObject=function(t,e){return e(new i.EcEchartsLiquidfill(t.chartOption,t))},i.EcEchartsLiquidfill.async=!0}).call(this,n("c8ba"))},a8fc:function(t,e,n){var i=n("badf"),r=n("2c66");function o(t,e){return t&&t.length?r(t,i(e,2)):[]}t.exports=o},a994:function(t,e,n){var i=n("7d1f"),r=n("32f4"),o=n("ec69");function a(t){return i(t,o,r)}t.exports=a},a9e3:function(t,e,n){"use strict";var i=n("83ab"),r=n("da84"),o=n("94ca"),a=n("6eeb"),s=n("5135"),l=n("c6b6"),c=n("7156"),u=n("c04e"),h=n("d039"),f=n("7c73"),d=n("241c").f,p=n("06cf").f,g=n("9bf2").f,m=n("58a8").trim,v="Number",y=r[v],_=y.prototype,b=l(f(_))==v,x=function(t){var e,n,i,r,o,a,s,l,c=u(t,!1);if("string"==typeof c&&c.length>2)if(c=m(c),e=c.charCodeAt(0),43===e||45===e){if(n=c.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(o=c.slice(2),a=o.length,s=0;s<a;s++)if(l=o.charCodeAt(s),l<48||l>r)return NaN;return parseInt(o,i)}return+c};if(o(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var w,S=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof S&&(b?h((function(){_.valueOf.call(n)})):l(n)!=v)?c(new y(x(e)),n,S):x(e)},T=i?d(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;T.length>O;O++)s(y,w=T[O])&&!s(S,w)&&g(S,w,p(y,w));S.prototype=_,_.constructor=S,a(r,v,S)}},aa74:function(t,e,n){"use strict";n.d(e,"p",(function(){return l["d"]})),n.d(e,"w",(function(){return l["l"]})),n.d(e,"u",(function(){return l["j"]})),n.d(e,"v",(function(){return l["k"]})),n.d(e,"l",(function(){return l["b"]})),n.d(e,"m",(function(){return l["c"]})),n.d(e,"z",(function(){return p})),n.d(e,"h",(function(){return g})),n.d(e,"o",(function(){return i})),n.d(e,"x",(function(){return L["a"]})),n.d(e,"s",(function(){return k["a"]})),n.d(e,"t",(function(){return k["a"]})),n.d(e,"r",(function(){return r})),n.d(e,"n",(function(){return o})),n.d(e,"k",(function(){return a})),n.d(e,"y",(function(){return s})),n.d(e,"e",(function(){return d["a"]})),n.d(e,"f",(function(){return b["a"]})),n.d(e,"a",(function(){return ot["a"]})),n.d(e,"c",(function(){return c["a"]})),n.d(e,"d",(function(){return u["a"]})),n.d(e,"g",(function(){return h["b"]})),n.d(e,"b",(function(){return f["a"]})),n.d(e,"q",(function(){return at["b"]})),n.d(e,"j",(function(){return st})),n.d(e,"i",(function(){return lt}));var i={};n.r(i),n.d(i,"createList",(function(){return A})),n.d(i,"getLayoutRect",(function(){return x["g"]})),n.d(i,"createDimensions",(function(){return O["a"]})),n.d(i,"dataStack",(function(){return D})),n.d(i,"createSymbol",(function(){return C["a"]})),n.d(i,"createScale",(function(){return E})),n.d(i,"mixinAxisModelCommonMethods",(function(){return I})),n.d(i,"getECData",(function(){return S["a"]})),n.d(i,"enableHoverEmphasis",(function(){return M["o"]})),n.d(i,"createTextStyle",(function(){return P}));var r={};n.r(r),n.d(r,"linearMap",(function(){return j["l"]})),n.d(r,"round",(function(){return j["v"]})),n.d(r,"asc",(function(){return j["c"]})),n.d(r,"getPrecision",(function(){return j["g"]})),n.d(r,"getPrecisionSafe",(function(){return j["h"]})),n.d(r,"getPixelPrecision",(function(){return j["f"]})),n.d(r,"getPercentWithPrecision",(function(){return j["e"]})),n.d(r,"MAX_SAFE_INTEGER",(function(){return j["a"]})),n.d(r,"remRadian",(function(){return j["u"]})),n.d(r,"isRadianAroundZero",(function(){return j["k"]})),n.d(r,"parseDate",(function(){return j["o"]})),n.d(r,"quantity",(function(){return j["r"]})),n.d(r,"quantityExponent",(function(){return j["s"]})),n.d(r,"nice",(function(){return j["m"]})),n.d(r,"quantile",(function(){return j["q"]})),n.d(r,"reformIntervals",(function(){return j["t"]})),n.d(r,"isNumeric",(function(){return j["j"]})),n.d(r,"numericToNumber",(function(){return j["n"]}));var o={};n.r(o),n.d(o,"extendShape",(function(){return R["extendShape"]})),n.d(o,"extendPath",(function(){return R["extendPath"]})),n.d(o,"makePath",(function(){return R["makePath"]})),n.d(o,"makeImage",(function(){return R["makeImage"]})),n.d(o,"mergePath",(function(){return R["mergePath"]})),n.d(o,"resizePath",(function(){return R["resizePath"]})),n.d(o,"createIcon",(function(){return R["createIcon"]})),n.d(o,"updateProps",(function(){return N["h"]})),n.d(o,"initProps",(function(){return N["c"]})),n.d(o,"getTransform",(function(){return R["getTransform"]})),n.d(o,"clipPointsByRect",(function(){return R["clipPointsByRect"]})),n.d(o,"clipRectByRect",(function(){return R["clipRectByRect"]})),n.d(o,"registerShape",(function(){return R["registerShape"]})),n.d(o,"getShapeClass",(function(){return R["getShapeClass"]})),n.d(o,"Group",(function(){return B["a"]})),n.d(o,"Image",(function(){return F["a"]})),n.d(o,"Text",(function(){return z["a"]})),n.d(o,"Circle",(function(){return V["a"]})),n.d(o,"Ellipse",(function(){return H["a"]})),n.d(o,"Sector",(function(){return G["a"]})),n.d(o,"Ring",(function(){return U["a"]})),n.d(o,"Polygon",(function(){return W["a"]})),n.d(o,"Polyline",(function(){return X["a"]})),n.d(o,"Rect",(function(){return Y["a"]})),n.d(o,"Line",(function(){return q["a"]})),n.d(o,"BezierCurve",(function(){return Z["a"]})),n.d(o,"Arc",(function(){return K["a"]})),n.d(o,"IncrementalDisplayable",(function(){return $["a"]})),n.d(o,"CompoundPath",(function(){return J["a"]})),n.d(o,"LinearGradient",(function(){return Q["a"]})),n.d(o,"RadialGradient",(function(){return tt["a"]})),n.d(o,"BoundingRect",(function(){return et["a"]}));var a={};n.r(a),n.d(a,"addCommas",(function(){return nt["a"]})),n.d(a,"toCamelCase",(function(){return nt["k"]})),n.d(a,"normalizeCssArray",(function(){return nt["j"]})),n.d(a,"encodeHTML",(function(){return nt["d"]})),n.d(a,"formatTpl",(function(){return nt["f"]})),n.d(a,"getTooltipMarker",(function(){return nt["h"]})),n.d(a,"formatTime",(function(){return nt["e"]})),n.d(a,"capitalFirst",(function(){return nt["b"]})),n.d(a,"truncateText",(function(){return it["c"]})),n.d(a,"getTextRect",(function(){return rt["a"]}));var s={};n.r(s),n.d(s,"map",(function(){return m["H"]})),n.d(s,"each",(function(){return m["k"]})),n.d(s,"indexOf",(function(){return m["r"]})),n.d(s,"inherits",(function(){return m["s"]})),n.d(s,"reduce",(function(){return m["N"]})),n.d(s,"filter",(function(){return m["n"]})),n.d(s,"bind",(function(){return m["c"]})),n.d(s,"curry",(function(){return m["i"]})),n.d(s,"isArray",(function(){return m["t"]})),n.d(s,"isString",(function(){return m["C"]})),n.d(s,"isObject",(function(){return m["A"]})),n.d(s,"isFunction",(function(){return m["w"]})),n.d(s,"extend",(function(){return m["m"]})),n.d(s,"defaults",(function(){return m["j"]})),n.d(s,"clone",(function(){return m["d"]})),n.d(s,"merge",(function(){return m["I"]}));var l=n("1be7"),c=n("6cb7"),u=n("b12f"),h=n("4f85"),f=n("e887"),d=n("b682"),p=n("697e7"),g=n("41ef"),m=n("6d8b"),v=n("1830"),y=n("697e"),_=n("2023"),b=n("4319"),x=n("f934"),w=n("ee1a"),S=n("861c"),T=n("7837"),O=n("b1d4"),C=n("a15a"),M=n("7d6c");function A(t){return Object(v["a"])(null,t)}var D={isDimensionStacked:w["c"],enableDataStack:w["a"],getStackedDimension:w["b"]};function E(t,e){var n=e;e instanceof b["a"]||(n=new b["a"](e));var i=y["a"](n);return i.setExtent(t[0],t[1]),y["i"](i,n),i}function I(t){m["K"](t,_["a"])}function P(t,e){return e=e||{},Object(T["c"])(t,null,null,"normal"!==e.state)}var L=n("22b4"),k=n("bda7"),j=n("3842"),R=n("2306"),N=n("deab"),B=n("2dc5"),F=n("0da8"),z=n("76a5"),V=n("d9fc"),H=n("ae69"),G=n("4aa2"),U=n("4573"),W=n("87b1"),X=n("d498"),Y=n("c7a2"),q=n("cb11"),Z=n("ac0f"),K=n("8d32"),$=n("392f"),J=n("d4c6"),Q=n("48a9"),tt=n("dded"),et=n("9850"),nt=n("eda2"),it=n("d409"),rt=n("998a"),ot=n("84ce"),at=n("5210");function st(t){var e=h["b"].extend(t);return h["b"].registerClass(e),e}function lt(t){var e=f["a"].extend(t);return f["a"].registerClass(e),e}var ct=n("ee29");Object(L["a"])(ct["a"])},ab13:function(t,e,n){var i=n("b622"),r=i("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,"/./"[t](e)}catch(i){}}return!1}},ac0f:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=n("401b"),a=n("4a3f"),s=[],l=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return t}();function c(t,e,n){var i=t.cpx2,r=t.cpy2;return null===i||null===r?[(n?a["b"]:a["a"])(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?a["b"]:a["a"])(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?a["i"]:a["h"])(t.x1,t.cpx1,t.x2,e),(n?a["i"]:a["h"])(t.y1,t.cpy1,t.y2,e)]}var u=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new l},e.prototype.buildPath=function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,l=e.cpx1,c=e.cpy1,u=e.cpx2,h=e.cpy2,f=e.percent;0!==f&&(t.moveTo(n,i),null==u||null==h?(f<1&&(Object(a["n"])(n,l,r,f,s),l=s[1],r=s[2],Object(a["n"])(i,c,o,f,s),c=s[1],o=s[2]),t.quadraticCurveTo(l,c,r,o)):(f<1&&(Object(a["g"])(n,l,u,r,f,s),l=s[1],u=s[2],r=s[3],Object(a["g"])(i,c,h,o,f,s),c=s[1],h=s[2],o=s[3]),t.bezierCurveTo(l,c,u,h,r,o)))},e.prototype.pointAt=function(t){return c(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=c(this.shape,t,!0);return o["m"](e,e)},e}(r["b"]);u.prototype.type="bezier-curve",e["a"]=u},ac1f:function(t,e,n){"use strict";var i=n("23e7"),r=n("9263");i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ac41:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}t.exports=n},ad1b:function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcTable=e.util.createClass(e.Object,{type:"ecTable",stateProperties:e.Object.prototype.stateProperties.concat(["row","column","colWidth","rowHeight"]),cacheProperties:e.Object.prototype.stateProperties.concat(["row","column","colWidth","rowHeight"]),initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawEcTable()},drawEcTable:function(){this.ctx.save();var t=this.width=+this.column*+this.colWidth,e=this.height=+this.row*+this.rowHeight;this.ctx.beginPath();for(var n=0;n<=e;n+=this.rowHeight)this.ctx.moveTo(-t/2,n-e/2),this.ctx.lineTo(t/2,n-e/2);for(n=0;n<=t;n+=this.colWidth)this.ctx.moveTo(n-t/2,-e/2),this.ctx.lineTo(n-t/2,e/2);this.ctx.lineWidth=this.strokeWidth,this.ctx.strokeStyle=this.stroke,this.ctx.closePath(),this.ctx.stroke(),this.ctx.restore()}}),e.EcTable.fromObject=function(t,n){n&&n(new e.EcTable(t))},e.EcTable.async=!0}).call(this,n("c8ba"))},ad6d:function(t,e,n){"use strict";var i=n("825a");t.exports=function(){var t=i(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},ae41:function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcDimension=e.util.createClass(e.Line,{type:"ecDimension",stateProperties:e.Object.prototype.stateProperties.concat(["dimensionProps"]),cacheProperties:e.Object.prototype.stateProperties.concat(["dimensionProps"]),dimensionProps:{color:"#f00"},initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.customRender(),0!==this.width&&0!==this.height&&this.visible},customRender:function(){this.ctx.save();var t=0,e=Math.abs(this.x1-this.x2),n=Math.abs(this.y1-this.y2);t=this.x1===this.x2?n:this.y1===this.y2?e:Math.sqrt(n*n+e*e),t=Math.round(t),this.ctx.beginPath(),this.ctx.fillStyle=this.dimensionProps.color,this.ctx.fillText(t,-5,-5),this.ctx.closePath();var i=this.calcLinePoints(),r=this.x2-this.x1,o=this.y2-this.y1,a=Math.atan2(o,r);this.drawGuard(i.x2,i.y2,a),r=-this.x2+this.x1,o=-this.y2+this.y1,a=Math.atan2(o,r),this.drawGuard(i.x1,i.y1,a),this.ctx.restore()},drawGuard:function(t,e,n){this.ctx.save(),this.ctx.translate(t,e),this.ctx.rotate(n),this.ctx.beginPath(),this.ctx.moveTo(0,-8),this.ctx.lineTo(0,8),this.ctx.strokeWidth=this.strokeWidth,this.ctx.strokeStyle=this.stroke,this.ctx.stroke(),this.ctx.closePath(),this.ctx.fill(),this.ctx.restore()}}),e.EcDimension.fromObject=function(t,n){n&&n(new e.EcDimension([t.x1,t.y1,t.x2,t.y2],t))},e.EcDimension.async=!0}).call(this,n("c8ba"))},ae69:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=function(){function t(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return t}(),a=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e){var n=.5522848,i=e.cx,r=e.cy,o=e.rx,a=e.ry,s=o*n,l=a*n;t.moveTo(i-o,r),t.bezierCurveTo(i-o,r-l,i-s,r-a,i,r-a),t.bezierCurveTo(i+s,r-a,i+o,r-l,i+o,r),t.bezierCurveTo(i+o,r+l,i+s,r+a,i,r+a),t.bezierCurveTo(i-s,r+a,i-o,r+l,i-o,r),t.closePath()},e}(r["b"]);a.prototype.type="ellipse",e["a"]=a},ae93:function(t,e,n){"use strict";var i,r,o,a=n("d039"),s=n("e163"),l=n("9112"),c=n("5135"),u=n("b622"),h=n("c430"),f=u("iterator"),d=!1,p=function(){return this};[].keys&&(o=[].keys(),"next"in o?(r=s(s(o)),r!==Object.prototype&&(i=r)):d=!0);var g=void 0==i||a((function(){var t={};return i[f].call(t)!==t}));g&&(i={}),h&&!g||c(i,f)||l(i,f,p),t.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:d}},af0d:function(t,e,n){(function(t){n("99af"),n("fb6a"),n("d3b7"),n("25f0"),n("d81d"),n("1276"),n("ac1f"),n("a15b");var e=t.fabric||(t.fabric={});e.EcPipeline=e.util.createClass(e.Polyline,{type:"ecPipeline",stateProperties:e.Object.prototype.stateProperties.concat(["pipeline"]),cacheProperties:e.Object.prototype.stateProperties.concat(["pipeline"]),pipeline:{width:20,color:"#D0D0D0",colorEnd:"#000",flowEnabled:!1,flowSize:5,flowColor:"#f00"},strokeDashArray:[5,15],strokeDot:5,strokeGap:15,strokeWidth:1,strokeLineCap:"round",strokeLineJoin:"round",fill:"transparent",stroke:"transparent",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},shadeColor:function(t,e){t=t.substr(1);var n=parseInt(t,16),i=Math.round(2.55*e),r=(n>>16)+i,o=(n>>8&255)+i,a=(255&n)+i;return"#".concat((16777216+65536*(r<255?r<1?0:r:255)+256*(o<255?o<1?0:o:255)+(a<255?a<1?0:a:255)).toString(16).slice(1))},gradientSpace:function(t,e,n,i){var r,o,a,s,l=[],c=[];i=i||1;var u=function(t){return 1===t.length?"0"+t:t},h=function(t){return 4===t.length?t.substr(1).split("").map((function(t){return 17*parseInt(t,16)})):[t.substr(1,2),t.substr(3,2),t.substr(5,2)].map((function(t){return parseInt(t,16)}))},f=function(t){return Math.pow(t/255,i)};for(t=h(t).map(f),e=h(e).map(f),r=0;r<n;r++){for(a=r/(n-1),s=1-a,o=0;o<3;o++)c[o]=u(Math.round(255*Math.pow(t[o]*s+e[o]*a,1/i)).toString(16));l.push("#"+c.join(""))}return l},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.ctx=t,this.callSuper("_render",t),this.drawCustom()},drawCustom:function(){var t;this.ctx.save();var n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y,o=this.pipeline.width/8;this.strokeWidth=this.pipeline.width,this.ctx.lineCap="butt",this.ctx.lineJoin="round";for(var a=10,s="#".concat(new e.Color(this.pipeline.color).toHex()),l="#".concat(new e.Color(this.pipeline.colorEnd).toHex()),c=this.gradientSpace(s,l,a),u=a;u>0;u--){this.ctx.beginPath(),this.ctx.moveTo(this.points[0].x-i,this.points[0].y-r),this.ctx.lineWidth=o*u,this.ctx.strokeStyle=c[u];for(var h=0;h<n;h++)t=this.points[h],this.ctx.lineTo(t.x-i,t.y-r);this.ctx.stroke(),this.ctx.closePath()}if(this.pipeline.flowEnabled){this.ctx.beginPath(),this.ctx.lineCap=this.strokeLineCap,this.ctx.lineJoin=this.strokeLineJoin,this.ctx.moveTo(this.points[0].x-i,this.points[0].y-r);for(var f=0;f<n;f++)t=this.points[f],this.ctx.lineTo(t.x-i,t.y-r);this.ctx.lineWidth=this.pipeline.flowSize,this.ctx.lineDashOffset=this.strokeDashOffset,this.ctx.strokeStyle=this.pipeline.flowColor;var d=this.strokeDashArray;d&&d.length&&this.ctx.setLineDash(d),this.ctx.stroke()}this.ctx.restore()}}),e.EcPipeline.fromObject=function(t,n){n&&n(new e.EcPipeline(t.points,t))},e.EcPipeline.async=!0}).call(this,n("c8ba"))},b041:function(t,e,n){"use strict";var i=n("00ee"),r=n("f5df");t.exports=i?{}.toString:function(){return"[object "+r(this)+"]"}},b047:function(t,e){function n(t){return function(e){return t(e)}}t.exports=n},b0c0:function(t,e,n){var i=n("83ab"),r=n("9bf2").f,o=Function.prototype,a=o.toString,s=/^\s*function ([^ (]*)/,l="name";i&&!(l in o)&&r(o,l,{configurable:!0,get:function(){try{return a.call(this).match(s)[1]}catch(t){return""}}})},b12f:function(t,e,n){"use strict";var i=n("2dc5"),r=n("8918"),o=n("625e"),a=function(){function t(){this.group=new i["a"],this.uid=r["c"]("viewComponent")}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){},t.prototype.updateLayout=function(t,e,n,i){},t.prototype.updateVisual=function(t,e,n,i){},t.prototype.blurSeries=function(t,e){},t}();o["b"](a),o["c"](a),e["a"]=a},b1d4:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f}));var i=n("07fd"),r=n("cd70"),o=n("6d8b"),a=n("ec6f"),s=n("d0ce"),l=n("e0d3"),c=n("0f99"),u=n("80b9");function h(t,e){return f(t,e).dimensions}function f(t,e){Object(a["e"])(t)||(t=Object(a["c"])(t)),e=e||{};var n=e.coordDimensions||[],h=e.dimensionsDefine||t.dimensionsDefine||[],f=Object(o["g"])(),m=[],v=p(t,n,h,e.dimensionsCount),y=e.canOmitUnusedDimensions&&Object(u["e"])(v),_=h===t.dimensionsDefine,b=_?Object(u["c"])(t):Object(u["b"])(h),x=e.encodeDefine;!x&&e.encodeDefaulter&&(x=e.encodeDefaulter(t,v));for(var w=Object(o["g"])(x),S=new s["a"](v),T=0;T<S.length;T++)S[T]=-1;function O(t){var e=S[t];if(e<0){var n=h[t],i=Object(o["A"])(n)?n:{name:n},a=new r["a"],s=i.name;null!=s&&null!=b.get(s)&&(a.name=a.displayName=s),null!=i.type&&(a.type=i.type),null!=i.displayName&&(a.displayName=i.displayName);var l=m.length;return S[t]=l,a.storeDimIndex=t,m.push(a),a}return m[e]}if(!y)for(T=0;T<v;T++)O(T);w.each((function(t,e){var n=Object(l["r"])(t).slice();if(1===n.length&&!Object(o["C"])(n[0])&&n[0]<0)w.set(e,!1);else{var i=w.set(e,[]);Object(o["k"])(n,(function(t,n){var r=Object(o["C"])(t)?b.get(t):t;null!=r&&r<v&&(i[n]=r,M(O(r),e,n))}))}}));var C=0;function M(t,e,n){null!=i["i"].get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,f.set(e,!0))}Object(o["k"])(n,(function(t){var e,n,i,r;if(Object(o["C"])(t))e=t,r={};else{r=t,e=r.name;var a=r.ordinalMeta;r.ordinalMeta=null,r=Object(o["m"])({},r),r.ordinalMeta=a,n=r.dimsDef,i=r.otherDims,r.name=r.coordDim=r.coordDimIndex=r.dimsDef=r.otherDims=null}var s=w.get(e);if(!1!==s){if(s=Object(l["r"])(s),!s.length)for(var c=0;c<(n&&n.length||1);c++){while(C<v&&null!=O(C).coordDim)C++;C<v&&s.push(C++)}Object(o["k"])(s,(function(t,a){var s=O(t);if(_&&null!=r.type&&(s.type=r.type),M(Object(o["j"])(s,r),e,a),null==s.name&&n){var l=n[a];!Object(o["A"])(l)&&(l={name:l}),s.name=s.displayName=l.name,s.defaultTooltip=l.defaultTooltip}i&&Object(o["j"])(s.otherDims,i)}))}}));var A=e.generateCoord,D=e.generateCoordCount,E=null!=D;D=A?D||1:0;var I=A||"value";function P(t){null==t.name&&(t.name=t.coordDim)}if(y)Object(o["k"])(m,(function(t){P(t)})),m.sort((function(t,e){return t.storeDimIndex-e.storeDimIndex}));else for(var L=0;L<v;L++){var k=O(L),j=k.coordDim;null==j&&(k.coordDim=g(I,f,E),k.coordDimIndex=0,(!A||D<=0)&&(k.isExtraCoord=!0),D--),P(k),null!=k.type||Object(c["b"])(t,L)!==c["a"].Must&&(!k.isExtraCoord||null==k.otherDims.itemName&&null==k.otherDims.seriesName)||(k.type="ordinal")}return d(m),new u["a"]({source:t,dimensions:m,fullDimensionCount:v,dimensionOmitted:y})}function d(t){for(var e=Object(o["g"])(),n=0;n<t.length;n++){var i=t[n],r=i.name,a=e.get(r)||0;a>0&&(i.name=r+(a-1)),a++,e.set(r,a)}}function p(t,e,n,i){var r=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,i||0);return Object(o["k"])(e,(function(t){var e;Object(o["A"])(t)&&(e=t.dimsDef)&&(r=Math.max(r,e.length))})),r}function g(t,e,n){var i=e.data;if(n||i.hasOwnProperty(t)){var r=0;while(i.hasOwnProperty(t+r))r++;t+=r}return e.set(t,!0),t}},b1e5:function(t,e,n){var i=n("a994"),r=1,o=Object.prototype,a=o.hasOwnProperty;function s(t,e,n,o,s,l){var c=n&r,u=i(t),h=u.length,f=i(e),d=f.length;if(h!=d&&!c)return!1;var p=h;while(p--){var g=u[p];if(!(c?g in e:a.call(e,g)))return!1}var m=l.get(t),v=l.get(e);if(m&&v)return m==e&&v==t;var y=!0;l.set(t,e),l.set(e,t);var _=c;while(++p<h){g=u[p];var b=t[g],x=e[g];if(o)var w=c?o(x,b,g,e,t,l):o(b,x,g,t,e,l);if(!(void 0===w?b===x||s(b,x,n,o,l):w)){y=!1;break}_||(_="constructor"==g)}if(y&&!_){var S=t.constructor,T=e.constructor;S==T||!("constructor"in t)||!("constructor"in e)||"function"==typeof S&&S instanceof S&&"function"==typeof T&&T instanceof T||(y=!1)}return l["delete"](t),l["delete"](e),y}t.exports=s},b218:function(t,e){var n=9007199254740991;function i(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n}t.exports=i},b3c1:function(t,e,n){"use strict";n.d(e,"a",(function(){return f}));var i=n("4755"),r=n("d51b"),o=n("6d8b"),a=n("3842"),s=n("a15a"),l=n("5210"),c=new i["a"],u=new r["a"](100),h=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function f(t,e){if("none"===t)return null;var n=e.getDevicePixelRatio(),i=e.getZr(),r="svg"===i.painter.type;t.dirty&&c["delete"](t);var f=c.get(t);if(f)return f;var y=Object(o["j"])(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===y.backgroundColor&&(y.backgroundColor=null);var _={repeat:"repeat"};return b(_),_.rotation=y.rotation,_.scaleX=_.scaleY=r?1:1/n,c.set(t,_),t.dirty=!1,_;function b(t){for(var e,c=[n],f=!0,_=0;_<h.length;++_){var b=y[h[_]],x=typeof b;if(null!=b&&!Object(o["t"])(b)&&"string"!==x&&"number"!==x&&"boolean"!==x){f=!1;break}c.push(b)}if(f){e=c.join(",")+(r?"-svg":"");var w=u.get(e);w&&(r?t.svgElement=w:t.image=w)}var S,T=p(y.dashArrayX),O=g(y.dashArrayY),C=d(y.symbol),M=m(T),A=v(O),D=!r&&Object(o["f"])(),E=r&&i.painter.createSVGElement("g"),I=P();function P(){for(var t=1,e=0,n=M.length;e<n;++e)t=Object(a["d"])(t,M[e]);var i=1;for(e=0,n=C.length;e<n;++e)i=Object(a["d"])(i,C[e].length);t*=i;var r=A*M.length*C.length;return{width:Math.max(1,Math.min(t,y.maxTileWidth)),height:Math.max(1,Math.min(r,y.maxTileHeight))}}function L(){S&&(S.clearRect(0,0,D.width,D.height),y.backgroundColor&&(S.fillStyle=y.backgroundColor,S.fillRect(0,0,D.width,D.height)));for(var t=0,e=0;e<O.length;++e)t+=O[e];if(!(t<=0)){var o=-A,a=0,c=0,u=0;while(o<I.height){if(a%2===0){var h=c/2%C.length,f=0,d=0,p=0;while(f<2*I.width){var g=0;for(e=0;e<T[u].length;++e)g+=T[u][e];if(g<=0)break;if(d%2===0){var m=.5*(1-y.symbolSize),v=f+T[u][d]*m,_=o+O[a]*m,b=T[u][d]*y.symbolSize,x=O[a]*y.symbolSize,w=p/2%C[h].length;M(v,_,b,x,C[h][w])}f+=T[u][d],++p,++d,d===T[u].length&&(d=0)}++u,u===T.length&&(u=0)}o+=O[a],++c,++a,a===O.length&&(a=0)}}function M(t,e,o,a,c){var u=r?1:n,h=Object(s["a"])(c,t*u,e*u,o*u,a*u,y.color,y.symbolKeepAspect);r?E.appendChild(i.painter.paintOne(h)):Object(l["b"])(S,h)}}D&&(D.width=I.width*n,D.height=I.height*n,S=D.getContext("2d")),L(),f&&u.put(e,D||E),t.image=D,t.svgElement=E,t.svgWidth=I.width,t.svgHeight=I.height}}function d(t){if(!t||0===t.length)return[["rect"]];if("string"===typeof t)return[[t]];for(var e=!0,n=0;n<t.length;++n)if("string"!==typeof t[n]){e=!1;break}if(e)return d([t]);var i=[];for(n=0;n<t.length;++n)"string"===typeof t[n]?i.push([t[n]]):i.push(t[n]);return i}function p(t){if(!t||0===t.length)return[[0,0]];if("number"===typeof t){var e=Math.ceil(t);return[[e,e]]}for(var n=!0,i=0;i<t.length;++i)if("number"!==typeof t[i]){n=!1;break}if(n)return p([t]);var r=[];for(i=0;i<t.length;++i)if("number"===typeof t[i]){e=Math.ceil(t[i]);r.push([e,e])}else{e=Object(o["H"])(t[i],(function(t){return Math.ceil(t)}));e.length%2===1?r.push(e.concat(e)):r.push(e)}return r}function g(t){if(!t||"object"===typeof t&&0===t.length)return[0,0];if("number"===typeof t){var e=Math.ceil(t);return[e,e]}var n=Object(o["H"])(t,(function(t){return Math.ceil(t)}));return t.length%2?n.concat(n):n}function m(t){return Object(o["H"])(t,(function(t){return v(t)}))}function v(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2===1?2*e:e}},b4c0:function(t,e,n){var i=n("cb5a");function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}t.exports=r},b50d:function(t,e,n){"use strict";var i=n("c532"),r=n("467f"),o=n("7aac"),a=n("30b5"),s=n("83b9"),l=n("c345"),c=n("3934"),u=n("2d83");t.exports=function(t){return new Promise((function(e,n){var h=t.data,f=t.headers;i.isFormData(h)&&delete f["Content-Type"];var d=new XMLHttpRequest;if(t.auth){var p=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(p+":"+g)}var m=s(t.baseURL,t.url);if(d.open(t.method.toUpperCase(),a(m,t.params,t.paramsSerializer),!0),d.timeout=t.timeout,d.onreadystatechange=function(){if(d&&4===d.readyState&&(0!==d.status||d.responseURL&&0===d.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in d?l(d.getAllResponseHeaders()):null,o=t.responseType&&"text"!==t.responseType?d.response:d.responseText,a={data:o,status:d.status,statusText:d.statusText,headers:i,config:t,request:d};r(e,n,a),d=null}},d.onabort=function(){d&&(n(u("Request aborted",t,"ECONNABORTED",d)),d=null)},d.onerror=function(){n(u("Network Error",t,null,d)),d=null},d.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(u(e,t,"ECONNABORTED",d)),d=null},i.isStandardBrowserEnv()){var v=(t.withCredentials||c(m))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;v&&(f[t.xsrfHeaderName]=v)}if("setRequestHeader"in d&&i.forEach(f,(function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete f[e]:d.setRequestHeader(e,t)})),i.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),t.responseType)try{d.responseType=t.responseType}catch(y){if("json"!==t.responseType)throw y}"function"===typeof t.onDownloadProgress&&d.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&d.upload&&d.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){d&&(d.abort(),n(t),d=null)})),h||(h=null),d.send(h)}))}},b56b:function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e=t.fabric||(t.fabric={});e.EcTwinkle=e.util.createClass(e.Object,{type:"ecTwinkle",name:"闪烁圆点",stateProperties:e.Object.prototype.stateProperties.concat(["text","left","top","twinkle"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","left","top","twinkle"]),twinkleStatus:0,updateScript:"function(value, item, data, components){\n  if(Number(value)) {\n    item.set({\n      fill: '#f00'\n    })\n    item.animeFlash.play()\n  } else {\n    item.set({\n      fill: '#07ef2e'\n    })\n  }\n  return true\n}",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.ctx=t,this.twinkleStatus=+this.text,this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible&&this.drawCustom()},drawCustom:function(){this.ctx.save(),this.ctx.beginPath();var t=this.width>this.height?this.width/2:this.height/2;this.ctx.arc(0,0,t,0*Math.PI/180,360*Math.PI/180),this.ctx.fillStyle=this.fill,this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}),e.EcTwinkle.fromObject=function(t,n){n&&n(new e.EcTwinkle(t))},e.EcTwinkle.async=!0}).call(this,n("c8ba"))},b575:function(t,e,n){var i,r,o,a,s,l,c,u,h=n("da84"),f=n("06cf").f,d=n("2cf49").set,p=n("1cdc"),g=n("a4b4"),m=n("605d"),v=h.MutationObserver||h.WebKitMutationObserver,y=h.document,_=h.process,b=h.Promise,x=f(h,"queueMicrotask"),w=x&&x.value;w||(i=function(){var t,e;m&&(t=_.domain)&&t.exit();while(r){e=r.fn,r=r.next;try{e()}catch(n){throw r?a():o=void 0,n}}o=void 0,t&&t.enter()},p||m||g||!v||!y?b&&b.resolve?(c=b.resolve(void 0),u=c.then,a=function(){u.call(c,i)}):a=m?function(){_.nextTick(i)}:function(){d.call(h,i)}:(s=!0,l=y.createTextNode(""),new v(i).observe(l,{characterData:!0}),a=function(){l.data=s=!s})),t.exports=w||function(t){var e={fn:t,next:void 0};o&&(o.next=e),r||(r=e,a()),o=e}},b5a7:function(t,e,n){var i=n("0b07"),r=n("2b3e"),o=i(r,"DataView");t.exports=o},b622:function(t,e,n){var i=n("da84"),r=n("5692"),o=n("5135"),a=n("90e3"),s=n("4930"),l=n("fdbf"),c=r("wks"),u=i.Symbol,h=l?u:u&&u.withoutSetter||a;t.exports=function(t){return o(c,t)&&(s||"string"==typeof c[t])||(s&&o(u,t)?c[t]=u[t]:c[t]=h("Symbol."+t)),c[t]}},b639:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var i=n("1fb5"),r=n("9152"),o=n("e3db");function a(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function l(t,e){if(s()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=c.prototype):(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return d(this,t)}return u(this,t,e,n)}function u(t,e,n,i){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?m(t,e,n,i):"string"===typeof e?p(t,e,n):v(t,e)}function h(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e,n,i){return h(e),e<=0?l(t,e):void 0!==n?"string"===typeof i?l(t,e).fill(n,i):l(t,e).fill(n):l(t,e)}function d(t,e){if(h(e),t=l(t,e<0?0:0|y(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e,n){if("string"===typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|b(e,n);t=l(t,i);var r=t.write(e,n);return r!==i&&(t=t.slice(0,r)),t}function g(t,e){var n=e.length<0?0:0|y(e.length);t=l(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function m(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i),c.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=c.prototype):t=g(t,e),t}function v(t,e){if(c.isBuffer(e)){var n=0|y(e.length);return t=l(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||et(e.length)?l(t,0):g(t,e);if("Buffer"===e.type&&o(e.data))return g(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(t){if(t>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|t}function _(t){return+t!=t&&(t=0),c.alloc(+t)}function b(t,e){if(c.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return K(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Q(t).length;default:if(i)return K(t).length;e=(""+e).toLowerCase(),i=!0}}function x(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";t||(t="utf8");while(1)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return P(this,e,n);case"ascii":return j(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return I(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function w(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function S(t,e,n,i,r){if(0===t.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof e&&(e=c.from(e,i)),c.isBuffer(e))return 0===e.length?-1:T(t,e,n,i,r);if("number"===typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):T(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function T(t,e,n,i,r){var o,a=1,s=t.length,l=e.length;if(void 0!==i&&(i=String(i).toLowerCase(),"ucs2"===i||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,l/=2,n/=2}function c(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var u=-1;for(o=n;o<s;o++)if(c(t,o)===c(e,-1===u?0:o-u)){if(-1===u&&(u=o),o-u+1===l)return u*a}else-1!==u&&(o-=o-u),u=-1}else for(n+l>s&&(n=s-l),o=n;o>=0;o--){for(var h=!0,f=0;f<l;f++)if(c(t,o+f)!==c(e,f)){h=!1;break}if(h)return o}return-1}function O(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i),i>r&&(i=r)):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function C(t,e,n,i){return tt(K(e,t.length-n),t,n,i)}function M(t,e,n,i){return tt($(e),t,n,i)}function A(t,e,n,i){return M(t,e,n,i)}function D(t,e,n,i){return tt(Q(e),t,n,i)}function E(t,e,n,i){return tt(J(e,t.length-n),t,n,i)}function I(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function P(t,e,n){n=Math.min(t.length,n);var i=[],r=e;while(r<n){var o,a,s,l,c=t[r],u=null,h=c>239?4:c>223?3:c>191?2:1;if(r+h<=n)switch(h){case 1:c<128&&(u=c);break;case 2:o=t[r+1],128===(192&o)&&(l=(31&c)<<6|63&o,l>127&&(u=l));break;case 3:o=t[r+1],a=t[r+2],128===(192&o)&&128===(192&a)&&(l=(15&c)<<12|(63&o)<<6|63&a,l>2047&&(l<55296||l>57343)&&(u=l));break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(l=(15&c)<<18|(63&o)<<12|(63&a)<<6|63&s,l>65535&&l<1114112&&(u=l))}null===u?(u=65533,h=1):u>65535&&(u-=65536,i.push(u>>>10&1023|55296),u=56320|1023&u),i.push(u),r+=h}return k(i)}e.Buffer=c,e.SlowBuffer=_,e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:a(),e.kMaxLength=s(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return f(null,t,e,n)},c.allocUnsafe=function(t){return d(null,t)},c.allocUnsafeSlow=function(t){return d(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=c.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},c.byteLength=b,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)w(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)w(this,e,e+3),w(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)w(this,e,e+7),w(this,e+1,e+6),w(this,e+2,e+5),w(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?P(this,0,t):x.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,i,r){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,i>>>=0,r>>>=0,this===t)return 0;for(var o=r-i,a=n-e,s=Math.min(o,a),l=this.slice(i,r),u=t.slice(e,n),h=0;h<s;++h)if(l[h]!==u[h]){o=l[h],a=u[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return S(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return S(this,t,e,n,!1)},c.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return O(this,t,e,n);case"utf8":case"utf-8":return C(this,t,e,n);case"ascii":return M(this,t,e,n);case"latin1":case"binary":return A(this,t,e,n);case"base64":return D(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var L=4096;function k(t){var e=t.length;if(e<=L)return String.fromCharCode.apply(String,t);var n="",i=0;while(i<e)n+=String.fromCharCode.apply(String,t.slice(i,i+=L));return n}function j(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function R(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function N(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=Z(t[o]);return r}function B(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function F(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function z(t,e,n,i,r,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function V(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function H(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function G(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,i,o){return o||G(t,e,n,4,34028234663852886e22,-34028234663852886e22),r.write(t,e,n,i,23,4),n+4}function W(t,e,n,i,o){return o||G(t,e,n,8,17976931348623157e292,-17976931348623157e292),r.write(t,e,n,i,52,8),n+8}c.prototype.slice=function(t,e){var n,i=this.length;if(t=~~t,e=void 0===e?i:~~e,t<0?(t+=i,t<0&&(t=0)):t>i&&(t=i),e<0?(e+=i,e<0&&(e=0)):e>i&&(e=i),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=c.prototype;else{var r=e-t;n=new c(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t],r=1,o=0;while(++o<e&&(r*=256))i+=this[t+o]*r;return i},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t+--e],r=1;while(e>0&&(r*=256))i+=this[t+--e]*r;return i},c.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=this[t],r=1,o=0;while(++o<e&&(r*=256))i+=this[t+o]*r;return r*=128,i>=r&&(i-=Math.pow(2,8*e)),i},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);var i=e,r=1,o=this[t+--i];while(i>0&&(r*=256))o+=this[t+--i]*r;return r*=128,o>=r&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),r.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),r.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),r.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),r.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}var o=1,a=0;this[e]=255&t;while(++a<n&&(o*=256))this[e+a]=t/o&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,i){if(t=+t,e|=0,n|=0,!i){var r=Math.pow(2,8*n)-1;z(this,t,e,n,r,0)}var o=n-1,a=1;this[e+o]=255&t;while(--o>=0&&(a*=256))this[e+o]=t/a&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):H(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;this[e]=255&t;while(++o<n&&(a*=256))t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);z(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;this[e+o]=255&t;while(--o>=0&&(a*=256))t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):V(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):V(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):H(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||z(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):H(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return W(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return W(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,i){if("string"===typeof t){if("string"===typeof e?(i=e,e=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:K(new c(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var X=/[^+\/0-9A-Za-z-_]/g;function Y(t){if(t=q(t).replace(X,""),t.length<2)return"";while(t.length%4!==0)t+="=";return t}function q(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function K(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function J(t,e){for(var n,i,r,o=[],a=0;a<t.length;++a){if((e-=2)<0)break;n=t.charCodeAt(a),i=n>>8,r=n%256,o.push(r),o.push(i)}return o}function Q(t){return i.toByteArray(Y(t))}function tt(t,e,n,i){for(var r=0;r<i;++r){if(r+n>=e.length||r>=t.length)break;e[r+n]=t[r]}return r}function et(t){return t!==t}}).call(this,n("c8ba"))},b64b:function(t,e,n){var i=n("23e7"),r=n("7b0b"),o=n("df75"),a=n("d039"),s=a((function(){o(1)}));i({target:"Object",stat:!0,forced:s},{keys:function(t){return o(r(t))}})},b680:function(t,e,n){"use strict";var i=n("23e7"),r=n("a691"),o=n("408a"),a=n("1148"),s=n("d039"),l=1..toFixed,c=Math.floor,u=function(t,e,n){return 0===e?n:e%2===1?u(t,e-1,n*t):u(t*t,e/2,n)},h=function(t){var e=0,n=t;while(n>=4096)e+=12,n/=4096;while(n>=2)e+=1,n/=2;return e},f=function(t,e,n){var i=-1,r=n;while(++i<6)r+=e*t[i],t[i]=r%1e7,r=c(r/1e7)},d=function(t,e){var n=6,i=0;while(--n>=0)i+=t[n],t[n]=c(i/e),i=i%e*1e7},p=function(t){var e=6,n="";while(--e>=0)if(""!==n||0===e||0!==t[e]){var i=String(t[e]);n=""===n?i:n+a.call("0",7-i.length)+i}return n},g=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!s((function(){l.call({})}));i({target:"Number",proto:!0,forced:g},{toFixed:function(t){var e,n,i,s,l=o(this),c=r(t),g=[0,0,0,0,0,0],m="",v="0";if(c<0||c>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(m="-",l=-l),l>1e-21)if(e=h(l*u(2,69,1))-69,n=e<0?l*u(2,-e,1):l/u(2,e,1),n*=4503599627370496,e=52-e,e>0){f(g,0,n),i=c;while(i>=7)f(g,1e7,0),i-=7;f(g,u(10,i,1),0),i=e-1;while(i>=23)d(g,1<<23),i-=23;d(g,1<<i),f(g,1,1),d(g,2),v=p(g)}else f(g,0,n),f(g,1<<-e,0),v=p(g)+a.call("0",c);return c>0?(s=v.length,v=m+(s<=c?"0."+a.call("0",c-s)+v:v.slice(0,s-c)+"."+v.slice(s-c))):v=m+v,v}})},b682:function(t,e,n){"use strict";var i,r,o,a,s,l,c,u=n("6d8b"),h=n("4319"),f=n("80f0"),d=n("2b17"),p=n("2f45"),g=n("cd70"),m=n("07fd"),v=n("e0d3"),y=n("861c"),_=n("ec6f"),b=n("d0ce"),x=n("80b9"),w=u["A"],S=u["H"],T="undefined"===typeof Int32Array?Array:Int32Array,O="e\0\0",C=-1,M=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],A=["_approximateExtent"],D=function(){function t(t,e){var n;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i=!1;Object(x["d"])(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var r={},o=[],a={},s=!1,l={},c=0;c<n.length;c++){var h=n[c],f=u["C"](h)?new g["a"]({name:h}):h instanceof g["a"]?h:new g["a"](h),d=f.name;f.type=f.type||"float",f.coordDim||(f.coordDim=d,f.coordDimIndex=0);var p=f.otherDims=f.otherDims||{};o.push(d),r[d]=f,null!=l[d]&&(s=!0),f.createInvertedIndices&&(a[d]=[]),0===p.itemName&&(this._nameDimIdx=c),0===p.itemId&&(this._idDimIdx=c),i&&(f.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=r,this._initGetDimensionInfo(s),this.hostModel=e,this._invertedIndicesMap=a,this._dimOmitted){var m=this._dimIdxToName=u["g"]();u["k"](o,(function(t){m.set(r[t].storeDimIndex,t)}))}}return t.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var n=this._dimIdxToName.get(e);if(null!=n)return n;var i=this._schema.getSourceDimension(e);return i?i.name:void 0},t.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},t.prototype._recognizeDimIndex=function(t){if("number"===typeof t||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},t.prototype._getStoreDimIndex=function(t){var e=this.getDimensionIndex(t);return e},t.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},t.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(t){return e.hasOwnProperty(t)?e[t]:void 0}:function(t){return e[t]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,e){var n=this._dimSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[e]:null},t.prototype.mapDimensionsAll=function(t){var e=this._dimSummary,n=e.encode[t];return(n||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(t,e,n){var i,r=this;if(t instanceof b["b"]&&(i=t),!i){var o=this.dimensions,a=Object(_["e"])(t)||u["u"](t)?new d["a"](t,o.length):t;i=new b["b"];var s=S(o,(function(t){return{type:r._dimInfos[t].type,property:t}}));i.initData(a,s,n)}this._store=i,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=Object(p["b"])(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},t.prototype.appendValues=function(t,e){var n=this._store.appendValues(t,e.length),i=n.start,r=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var a=i;a<r;a++){var s=a-i;this._nameList[a]=e[s],o&&c(this,a)}},t.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,n=0;n<e.length;n++){var i=this._dimInfos[e[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==m["g"]&&!t.fillStorage},t.prototype._doInit=function(t,e){if(!(t>=e)){var n=this._store,r=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=r.getSource().sourceFormat,l=s===m["f"];if(l&&!r.pure)for(var u=[],h=t;h<e;h++){var f=r.getItem(h,u);if(!this.hasItemOption&&Object(v["m"])(f)&&(this.hasItemOption=!0),f){var d=f.name;null==o[h]&&null!=d&&(o[h]=Object(v["e"])(d,null));var p=f.id;null==a[h]&&null!=p&&(a[h]=Object(v["e"])(p,null))}}if(this._shouldMakeIdFromName())for(h=t;h<e;h++)c(this,h);i(this)}},t.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,e){w(t)?u["m"](this._calculationInfo,t):this._calculationInfo[t]=e},t.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return null==n&&null!=this._nameDimIdx&&(n=o(this,this._nameDimIdx,e)),null==n&&(n=""),n},t.prototype._getCategory=function(t,e){var n=this._store.get(t,e),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},t.prototype.getId=function(t){return r(this,this.getRawIndex(t))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,e)},t.prototype.getByRawIndex=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,e)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},t.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},t.prototype.getValues=function(t,e){var n=this,i=this._store;return u["t"](t)?i.getValues(S(t,(function(t){return n._getStoreDimIndex(t)})),e):i.getValues(t)},t.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this._store.get(e[n],t)))return!1;return!0},t.prototype.indexOfName=function(t){for(var e=0,n=this._store.count();e<n;e++)if(this.getName(e)===t)return e;return-1},t.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},t.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},t.prototype.rawIndexOf=function(t,e){var n=t&&this._invertedIndicesMap[t];var i=n[e];return null==i||isNaN(i)?C:i},t.prototype.indicesOfNearest=function(t,e,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,n)},t.prototype.each=function(t,e,n){"function"===typeof t&&(n=e,e=t,t=[]);var i=n||this,r=S(a(t),this._getStoreDimIndex,this);this._store.each(r,i?u["c"](e,i):e)},t.prototype.filterSelf=function(t,e,n){"function"===typeof t&&(n=e,e=t,t=[]);var i=n||this,r=S(a(t),this._getStoreDimIndex,this);return this._store=this._store.filter(r,i?u["c"](e,i):e),this},t.prototype.selectRange=function(t){var e=this,n={},i=u["F"](t),r=[];return u["k"](i,(function(i){var o=e._getStoreDimIndex(i);n[o]=t[i],r.push(o)})),this._store=this._store.selectRange(n),this},t.prototype.mapArray=function(t,e,n){"function"===typeof t&&(n=e,e=t,t=[]),n=n||this;var i=[];return this.each(t,(function(){i.push(e&&e.apply(this,arguments))}),n),i},t.prototype.map=function(t,e,n,i){var r=n||i||this,o=S(a(t),this._getStoreDimIndex,this),s=l(this);return s._store=this._store.map(o,r?u["c"](e,r):e),s},t.prototype.modify=function(t,e,n,i){var r=n||i||this;var o=S(a(t),this._getStoreDimIndex,this);this._store.modify(o,r?u["c"](e,r):e)},t.prototype.downSample=function(t,e,n,i){var r=l(this);return r._store=this._store.downSample(this._getStoreDimIndex(t),e,n,i),r},t.prototype.lttbDownSample=function(t,e){var n=l(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),n},t.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},t.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new h["a"](n,e,e&&e.ecModel)},t.prototype.diff=function(t){var e=this;return new f["a"](t?t.getStore().getIndices():[],this.getStore().getIndices(),(function(e){return r(t,e)}),(function(t){return r(e,t)}))},t.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},t.prototype.setVisual=function(t,e){this._visual=this._visual||{},w(t)?u["m"](this._visual,t):this._visual[t]=e},t.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],i=n&&n[e];return null==i?this.getVisual(e):i},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var r=i[e];return null==r&&(r=this.getVisual(e),u["t"](r)?r=r.slice():w(r)&&(r=u["m"]({},r)),i[e]=r),r},t.prototype.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,w(e)?u["m"](i,e):i[e]=n},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,e){if(w(t))for(var n in t)t.hasOwnProperty(n)&&this.setLayout(n,t[n]);else this._layout[t]=e},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?u["m"](this._itemLayouts[t]||{},e):e},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,e){var n=this.hostModel&&this.hostModel.seriesIndex;Object(y["b"])(n,this.dataType,t,e),this._graphicEls[t]=e},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,e){u["k"](this._graphicEls,(function(n,i){n&&t&&t.call(e,n,i)}))},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:S(this.dimensions,this._getDimInfo,this),this.hostModel)),s(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(t,e){var n=this[t];"function"===typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(u["S"](arguments)))})},t.internalField=function(){i=function(t){var e=t._invertedIndicesMap;u["k"](e,(function(n,i){var r=t._dimInfos[i],o=r.ordinalMeta,a=t._store;if(o){n=e[i]=new T(o.categories.length);for(var s=0;s<n.length;s++)n[s]=C;for(s=0;s<a.count();s++)n[a.get(r.storeDimIndex,s)]=s}}))},o=function(t,e,n){return Object(v["e"])(t._getCategory(e,n),null)},r=function(t,e){var n=t._idList[e];return null==n&&null!=t._idDimIdx&&(n=o(t,t._idDimIdx,e)),null==n&&(n=O+e),n},a=function(t){return u["t"](t)||(t=null!=t?[t]:[]),t},l=function(e){var n=new t(e._schema?e._schema:S(e.dimensions,e._getDimInfo,e),e.hostModel);return s(n,e),n},s=function(t,e){u["k"](M.concat(e.__wrappedMethods||[]),(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t.__wrappedMethods=e.__wrappedMethods,u["k"](A,(function(n){t[n]=u["d"](e[n])})),t._calculationInfo=u["m"]({},e._calculationInfo)},c=function(t,e){var n=t._nameList,i=t._idList,r=t._nameDimIdx,a=t._idDimIdx,s=n[e],l=i[e];if(null==s&&null!=r&&(n[e]=s=o(t,r,e)),null==l&&null!=a&&(i[e]=l=o(t,a,e)),null==l&&null!=s){var c=t._nameRepeatCount,u=c[s]=(c[s]||0)+1;l=s,u>1&&(l+="__ec__"+u),i[e]=l}}}(),t}();e["a"]=D},b727:function(t,e,n){var i=n("0366"),r=n("44ad"),o=n("7b0b"),a=n("50c4"),s=n("65f0"),l=[].push,c=function(t){var e=1==t,n=2==t,c=3==t,u=4==t,h=6==t,f=7==t,d=5==t||h;return function(p,g,m,v){for(var y,_,b=o(p),x=r(b),w=i(g,m,3),S=a(x.length),T=0,O=v||s,C=e?O(p,S):n||f?O(p,0):void 0;S>T;T++)if((d||T in x)&&(y=x[T],_=w(y,T,b),t))if(e)C[T]=_;else if(_)switch(t){case 3:return!0;case 5:return y;case 6:return T;case 2:l.call(C,y)}else switch(t){case 4:return!1;case 7:l.call(C,y)}return h?-1:c||u?u:C}};t.exports={forEach:c(0),map:c(1),filter:c(2),some:c(3),every:c(4),find:c(5),findIndex:c(6),filterOut:c(7)}},b7d9:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"c",(function(){return l})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return d}));var i=n("3842"),r=n("6d8b"),o=n("edae");function a(t,e){var n=e&&e.type;return"ordinal"===n?t:("time"===n&&"number"!==typeof t&&null!=t&&"-"!==t&&(t=+Object(i["o"])(t)),null==t||""===t?NaN:+t)}var s=Object(r["g"])({number:function(t){return parseFloat(t)},time:function(t){return+Object(i["o"])(t)},trim:function(t){return"string"===typeof t?Object(r["T"])(t):t}});function l(t){return s.get(t)}var c={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},u=function(){function t(t,e){if("number"!==typeof e){var n="";0,Object(o["c"])(n)}this._opFn=c[t],this._rvalFloat=Object(i["n"])(e)}return t.prototype.evaluate=function(t){return"number"===typeof t?this._opFn(t,this._rvalFloat):this._opFn(Object(i["n"])(t),this._rvalFloat)},t}(),h=function(){function t(t,e){var n="desc"===t;this._resultLT=n?1:-1,null==e&&(e=n?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return t.prototype.evaluate=function(t,e){var n=typeof t,r=typeof e,o="number"===n?t:Object(i["n"])(t),a="number"===r?e:Object(i["n"])(e),s=isNaN(o),l=isNaN(a);if(s&&(o=this._incomparable),l&&(a=this._incomparable),s&&l){var c="string"===n,u="string"===r;c&&(o=u?t:0),u&&(a=c?e:0)}return o<a?this._resultLT:o>a?-this._resultLT:0},t}(),f=function(){function t(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=Object(i["n"])(e)}return t.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var n=typeof t;n===this._rvalTypeof||"number"!==n&&"number"!==this._rvalTypeof||(e=Object(i["n"])(t)===this._rvalFloat)}return this._isEQ?e:!e},t}();function d(t,e){return"eq"===t||"ne"===t?new f("eq"===t,e):Object(r["q"])(c,t)?new u(t,e):null}},badf:function(t,e,n){var i=n("642a"),r=n("1838"),o=n("cd9d"),a=n("6747"),s=n("f9ce");function l(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?r(t[0],t[1]):i(t):s(t)}t.exports=l},bb2f:function(t,e,n){var i=n("d039");t.exports=!i((function(){return Object.isExtensible(Object.preventExtensions({}))}))},bbc0:function(t,e,n){var i=n("6044"),r="__lodash_hash_undefined__",o=Object.prototype,a=o.hasOwnProperty;function s(t){var e=this.__data__;if(i){var n=e[t];return n===r?void 0:n}return a.call(e,t)?e[t]:void 0}t.exports=s},bc3a:function(t,e,n){t.exports=n("cee4")},bcdf:function(t,e){function n(){}t.exports=n},bda7:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("6d8b"),r=n("f279");function o(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;null==n&&(n=1024);for(var i=e.features,r=0;r<i.length;r++){var o=i[r],s=o.geometry;if("Polygon"===s.type)for(var l=s.coordinates,c=0;c<l.length;c++)l[c]=a(l[c],s.encodeOffsets[c],n);else if("MultiPolygon"===s.type)for(l=s.coordinates,c=0;c<l.length;c++)for(var u=l[c],h=0;h<u.length;h++)u[h]=a(u[h],s.encodeOffsets[c][h],n)}return e.UTF8Encoding=!1,e}function a(t,e,n){for(var i=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),s+=r,l+=o,r=s,o=l,i.push([s/n,l/n])}return i}function s(t,e){return t=o(t),i["H"](i["n"](t.features,(function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0})),(function(t){var n=t.properties,o=t.geometry,a=[];if("Polygon"===o.type){var s=o.coordinates;a.push({type:"polygon",exterior:s[0],interiors:s.slice(1)})}if("MultiPolygon"===o.type){s=o.coordinates;i["k"](s,(function(t){t[0]&&a.push({type:"polygon",exterior:t[0],interiors:t.slice(1)})}))}var l=new r["a"](n[e||"name"],a,n.cp);return l.properties=n,l}))}},be48:function(t,e,n){"use strict";(function(t){n("99af"),n("a9e3");var e=n("313e"),i=t.fabric||(t.fabric={});i.EcEchartsGauge=i.util.createClass(i.Rect,{type:"ecEchartsGauge",superType:"element",stateProperties:i.Object.prototype.stateProperties.concat(["chartOption","text"]),cacheProperties:i.Object.prototype.stateProperties.concat(["chartOption","text"]),element:null,hasControls:!1,lockRotation:!0,instance:null,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({chartOption:t,fill:"rgba(255, 255, 255, 0)",stroke:"rgba(255, 255, 255, 0)"})},setSource:function(t){var e=t.chartOption;e&&this.instance.setOption(e)},setChartOption:function(t){var e=t.chartOption;this.set({chartOption:e}),this.distroyChart(),this.createChart(e)},createChart:function(t){this.instance=e["a"](this.element),t?this.instance.setOption(t):this.instance.setOption({tooltip:{formatter:"{a} <br/>{b} : {c}"},series:[{name:"仪表盘",type:"gauge",detail:{formatter:"{value}"},data:[{value:50,name:"百分比"}]}]})},distroyChart:function(){this.instance&&this.instance.dispose()},toObject:function(t){return i.util.object.extend(this.callSuper("toObject",t))},_render:function(t){if(this.callSuper("_render",t),this.instance){var e=this.width,n=this.height;this.element.style.width="".concat(e,"px"),this.element.style.height="".concat(n,"px"),this.instance.resize()}else{var r=this.id,o=this.scaleX,a=this.scaleY,s=this.width,l=this.height,c=this.angle,u=this.chartOption,h=this.editable,f=(this.dialog,this.canvas.getZoom()),d=this.aCoords.tl.x,p=this.aCoords.tl.y,g=(s*o*f-s)/2,m=(l*a*f-l)/2,v=i.util.makeElement("div",{id:"".concat(r,"_container"),class:"item__container",style:"transform: rotate(".concat(c,"deg) scale(").concat(o*f,", ").concat(a*f,");\n                        width: ").concat(s,"px;\n                        height: ").concat(l,"px;\n                        left: ").concat(d+g,"px;\n                        top: ").concat(p+m,"px;\n                        position: absolute;\n\t\t\t\t\t\t\t\t\t\t\t\tuser-select: ").concat(h?"none":"auto",";\n                        pointer-events: ").concat(h?"none":"auto",";")});this.element=i.util.makeElementSelectable(v),this.createChart(u);var y=document.getElementById(this.canvas.container);y.appendChild(this.element)}this.getHistoryData()},getHistoryData:function(){var t=this.text,e=this.chartOption;Number(t)&&(e.series[0].data[0].value=t,this.instance.setOption(e,{replaceMerge:["series"]}))}}),i.EcEchartsGauge.fromObject=function(t,e){return e(new i.EcEchartsGauge(t.chartOption,t))},i.EcEchartsGauge.async=!0}).call(this,n("c8ba"))},bf19:function(t,e,n){"use strict";var i=n("23e7");i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return URL.prototype.toString.call(this)}})},c04e:function(t,e,n){var i=n("861d");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},c05f:function(t,e,n){var i=n("7b97"),r=n("1310");function o(t,e,n,a,s){return t===e||(null==t||null==e||!r(t)&&!r(e)?t!==t&&e!==e:i(t,e,n,a,o,s))}t.exports=o},c098:function(t,e){var n=9007199254740991,i=/^(?:0|[1-9]\d*)$/;function r(t,e){var r=typeof t;return e=null==e?n:e,!!e&&("number"==r||"symbol"!=r&&i.test(t))&&t>-1&&t%1==0&&t<e}t.exports=r},c345:function(t,e,n){"use strict";var i=n("c532"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(i.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}})),a):a}},c401:function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e,n){return i.forEach(n,(function(n){t=n(t,e)})),t}},c430:function(t,e){t.exports=!1},c532:function(t,e,n){"use strict";var i=n("1d2b"),r=Object.prototype.toString;function o(t){return"[object Array]"===r.call(t)}function a(t){return"undefined"===typeof t}function s(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function l(t){return"[object ArrayBuffer]"===r.call(t)}function c(t){return"undefined"!==typeof FormData&&t instanceof FormData}function u(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function h(t){return"string"===typeof t}function f(t){return"number"===typeof t}function d(t){return null!==t&&"object"===typeof t}function p(t){if("[object Object]"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function g(t){return"[object Date]"===r.call(t)}function m(t){return"[object File]"===r.call(t)}function v(t){return"[object Blob]"===r.call(t)}function y(t){return"[object Function]"===r.call(t)}function _(t){return d(t)&&y(t.pipe)}function b(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function x(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function w(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function S(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function T(){var t={};function e(e,n){p(t[n])&&p(e)?t[n]=T(t[n],e):p(e)?t[n]=T({},e):o(e)?t[n]=e.slice():t[n]=e}for(var n=0,i=arguments.length;n<i;n++)S(arguments[n],e);return t}function O(t,e,n){return S(e,(function(e,r){t[r]=n&&"function"===typeof e?i(e,n):e})),t}function C(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}t.exports={isArray:o,isArrayBuffer:l,isBuffer:s,isFormData:c,isArrayBufferView:u,isString:h,isNumber:f,isObject:d,isPlainObject:p,isUndefined:a,isDate:g,isFile:m,isBlob:v,isFunction:y,isStream:_,isURLSearchParams:b,isStandardBrowserEnv:w,forEach:S,merge:T,extend:O,trim:x,stripBOM:C}},c584:function(t,e){function n(t,e){return t.has(e)}t.exports=n},c6b6:function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},c6cd:function(t,e,n){var i=n("da84"),r=n("ce4e"),o="__core-js_shared__",a=i[o]||r(o,{});t.exports=a},c7a2:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5");function o(t,e){var n,i,r,o,a,s=e.x,l=e.y,c=e.width,u=e.height,h=e.r;c<0&&(s+=c,c=-c),u<0&&(l+=u,u=-u),"number"===typeof h?n=i=r=o=h:h instanceof Array?1===h.length?n=i=r=o=h[0]:2===h.length?(n=r=h[0],i=o=h[1]):3===h.length?(n=h[0],i=o=h[1],r=h[2]):(n=h[0],i=h[1],r=h[2],o=h[3]):n=i=r=o=0,n+i>c&&(a=n+i,n*=c/a,i*=c/a),r+o>c&&(a=r+o,r*=c/a,o*=c/a),i+r>u&&(a=i+r,i*=u/a,r*=u/a),n+o>u&&(a=n+o,n*=u/a,o*=u/a),t.moveTo(s+n,l),t.lineTo(s+c-i,l),0!==i&&t.arc(s+c-i,l+i,i,-Math.PI/2,0),t.lineTo(s+c,l+u-r),0!==r&&t.arc(s+c-r,l+u-r,r,0,Math.PI/2),t.lineTo(s+o,l+u),0!==o&&t.arc(s+o,l+u-o,o,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}var a=n("9cf9"),s=function(){function t(){this.x=0,this.y=0,this.width=0,this.height=0}return t}(),l={},c=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new s},e.prototype.buildPath=function(t,e){var n,i,r,s;if(this.subPixelOptimize){var c=Object(a["c"])(l,e,this.style);n=c.x,i=c.y,r=c.width,s=c.height,c.r=e.r,e=c}else n=e.x,i=e.y,r=e.width,s=e.height;e.r?o(t,e):t.rect(n,i,r,s)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(r["b"]);c.prototype.type="rect";e["a"]=c},c869:function(t,e,n){var i=n("0b07"),r=n("2b3e"),o=i(r,"Set");t.exports=o},c8af:function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e){i.forEach(t,(function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])}))}},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},c8d2:function(t,e,n){var i=n("d039"),r=n("5899"),o="​᠎";t.exports=function(t){return i((function(){return!!r[t]()||o[t]()!=o||r[t].name!==t}))}},ca80:function(t,e,n){"use strict";var i=n("dce8"),r=[0,0],o=[0,0],a=new i["a"],s=new i["a"],l=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new i["a"];for(n=0;n<2;n++)this._axes[n]=new i["a"];t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var n=this._corners,r=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),e)for(var c=0;c<4;c++)n[c].transform(e);i["a"].sub(r[0],n[1],n[0]),i["a"].sub(r[1],n[3],n[0]),r[0].normalize(),r[1].normalize();for(c=0;c<2;c++)this._origin[c]=r[c].dot(n[0])},t.prototype.intersect=function(t,e){var n=!0,r=!e;return a.set(1/0,1/0),s.set(0,0),!this._intersectCheckOneSide(this,t,a,s,r,1)&&(n=!1,r)||!this._intersectCheckOneSide(t,this,a,s,r,-1)&&(n=!1,r)||r||i["a"].copy(e,n?a:s),n},t.prototype._intersectCheckOneSide=function(t,e,n,a,s,l){for(var c=!0,u=0;u<2;u++){var h=this._axes[u];if(this._getProjMinMaxOnAxis(u,t._corners,r),this._getProjMinMaxOnAxis(u,e._corners,o),r[1]<o[0]||r[0]>o[1]){if(c=!1,s)return c;var f=Math.abs(o[0]-r[1]),d=Math.abs(r[0]-o[1]);Math.min(f,d)>a.len()&&(f<d?i["a"].scale(a,h,-f*l):i["a"].scale(a,h,d*l))}else if(n){f=Math.abs(o[0]-r[1]),d=Math.abs(r[0]-o[1]);Math.min(f,d)<n.len()&&(f<d?i["a"].scale(n,h,f*l):i["a"].scale(n,h,-d*l))}}return c},t.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var i=this._axes[t],r=this._origin,o=e[0].dot(i)+r[t],a=o,s=o,l=1;l<e.length;l++){var c=e[l].dot(i)+r[t];a=Math.min(c,a),s=Math.max(c,s)}n[0]=a,n[1]=s},t}();e["a"]=l},ca84:function(t,e,n){var i=n("5135"),r=n("fc6a"),o=n("4d64").indexOf,a=n("d012");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)!i(a,n)&&i(s,n)&&c.push(n);while(e.length>l)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},caad:function(t,e,n){"use strict";var i=n("23e7"),r=n("4d64").includes,o=n("44d2");i({target:"Array",proto:!0},{includes:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o("includes")},cb11:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=n("9cf9"),a={},s=function(){function t(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return t}(),l=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new s},e.prototype.buildPath=function(t,e){var n,i,r,s;if(this.subPixelOptimize){var l=Object(o["b"])(a,e,this.style);n=l.x1,i=l.y1,r=l.x2,s=l.y2}else n=e.x1,i=e.y1,r=e.x2,s=e.y2;var c=e.percent;0!==c&&(t.moveTo(n,i),c<1&&(r=n*(1-c)+r*c,s=i*(1-c)+s*c),t.lineTo(r,s))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(r["b"]);l.prototype.type="line",e["a"]=l},cb29:function(t,e,n){var i=n("23e7"),r=n("81d5"),o=n("44d2");i({target:"Array",proto:!0},{fill:r}),o("fill")},cb5a:function(t,e,n){var i=n("9638");function r(t,e){var n=t.length;while(n--)if(i(t[n][0],e))return n;return-1}t.exports=r},cbe5:function(t,e,n){"use strict";n.d(e,"a",(function(){return I}));var i=n("21a1"),r=n("19eb"),o=n("20c8"),a=n("9680"),s=n("4a3f");function l(t,e,n,i,r,o,a,l,c,u,h){if(0===c)return!1;var f=c;if(h>e+f&&h>i+f&&h>o+f&&h>l+f||h<e-f&&h<i-f&&h<o-f&&h<l-f||u>t+f&&u>n+f&&u>r+f&&u>a+f||u<t-f&&u<n-f&&u<r-f&&u<a-f)return!1;var d=s["e"](t,e,n,i,r,o,a,l,u,h,null);return d<=f/2}var c=n("68ab"),u=n("857d"),h=2*Math.PI;function f(t,e,n,i,r,o,a,s,l){if(0===a)return!1;var c=a;s-=t,l-=e;var f=Math.sqrt(s*s+l*l);if(f-c>n||f+c<n)return!1;if(Math.abs(i-r)%h<1e-4)return!0;if(o){var d=i;i=Object(u["a"])(r),r=Object(u["a"])(d)}else i=Object(u["a"])(i),r=Object(u["a"])(r);i>r&&(r+=h);var p=Math.atan2(l,s);return p<0&&(p+=h),p>=i&&p<=r||p+h>=i&&p+h<=r}var d=n("8728"),p=o["a"].CMD,g=2*Math.PI,m=1e-4;function v(t,e){return Math.abs(t-e)<m}var y=[-1,-1,-1],_=[-1,-1];function b(){var t=_[0];_[0]=_[1],_[1]=t}function x(t,e,n,i,r,o,a,l,c,u){if(u>e&&u>i&&u>o&&u>l||u<e&&u<i&&u<o&&u<l)return 0;var h=s["f"](e,i,o,l,u,y);if(0===h)return 0;for(var f=0,d=-1,p=void 0,g=void 0,m=0;m<h;m++){var v=y[m],x=0===v||1===v?.5:1,w=s["a"](t,n,r,a,v);w<c||(d<0&&(d=s["c"](e,i,o,l,_),_[1]<_[0]&&d>1&&b(),p=s["a"](e,i,o,l,_[0]),d>1&&(g=s["a"](e,i,o,l,_[1]))),2===d?v<_[0]?f+=p<e?x:-x:v<_[1]?f+=g<p?x:-x:f+=l<g?x:-x:v<_[0]?f+=p<e?x:-x:f+=l<p?x:-x)}return f}function w(t,e,n,i,r,o,a,l){if(l>e&&l>i&&l>o||l<e&&l<i&&l<o)return 0;var c=s["m"](e,i,o,l,y);if(0===c)return 0;var u=s["j"](e,i,o);if(u>=0&&u<=1){for(var h=0,f=s["h"](e,i,o,u),d=0;d<c;d++){var p=0===y[d]||1===y[d]?.5:1,g=s["h"](t,n,r,y[d]);g<a||(y[d]<u?h+=f<e?p:-p:h+=o<f?p:-p)}return h}p=0===y[0]||1===y[0]?.5:1,g=s["h"](t,n,r,y[0]);return g<a?0:o<e?p:-p}function S(t,e,n,i,r,o,a,s){if(s-=e,s>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);y[0]=-l,y[1]=l;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c>=g-1e-4){i=0,r=g;var u=o?1:-1;return a>=y[0]+t&&a<=y[1]+t?u:0}if(i>r){var h=i;i=r,r=h}i<0&&(i+=g,r+=g);for(var f=0,d=0;d<2;d++){var p=y[d];if(p+t>a){var m=Math.atan2(s,p);u=o?1:-1;m<0&&(m=g+m),(m>=i&&m<=r||m+g>=i&&m+g<=r)&&(m>Math.PI/2&&m<1.5*Math.PI&&(u=-u),f+=u)}}return f}function T(t,e,n,i,r){for(var o,s,u=t.data,h=t.len(),g=0,m=0,y=0,_=0,b=0,T=0;T<h;){var O=u[T++],C=1===T;switch(O===p.M&&T>1&&(n||(g+=Object(d["a"])(m,y,_,b,i,r))),C&&(m=u[T],y=u[T+1],_=m,b=y),O){case p.M:_=u[T++],b=u[T++],m=_,y=b;break;case p.L:if(n){if(a["a"](m,y,u[T],u[T+1],e,i,r))return!0}else g+=Object(d["a"])(m,y,u[T],u[T+1],i,r)||0;m=u[T++],y=u[T++];break;case p.C:if(n){if(l(m,y,u[T++],u[T++],u[T++],u[T++],u[T],u[T+1],e,i,r))return!0}else g+=x(m,y,u[T++],u[T++],u[T++],u[T++],u[T],u[T+1],i,r)||0;m=u[T++],y=u[T++];break;case p.Q:if(n){if(c["a"](m,y,u[T++],u[T++],u[T],u[T+1],e,i,r))return!0}else g+=w(m,y,u[T++],u[T++],u[T],u[T+1],i,r)||0;m=u[T++],y=u[T++];break;case p.A:var M=u[T++],A=u[T++],D=u[T++],E=u[T++],I=u[T++],P=u[T++];T+=1;var L=!!(1-u[T++]);o=Math.cos(I)*D+M,s=Math.sin(I)*E+A,C?(_=o,b=s):g+=Object(d["a"])(m,y,o,s,i,r);var k=(i-M)*E/D+M;if(n){if(f(M,A,E,I,I+P,L,e,k,r))return!0}else g+=S(M,A,E,I,I+P,L,k,r);m=Math.cos(I+P)*D+M,y=Math.sin(I+P)*E+A;break;case p.R:_=m=u[T++],b=y=u[T++];var j=u[T++],R=u[T++];if(o=_+j,s=b+R,n){if(a["a"](_,b,o,b,e,i,r)||a["a"](o,b,o,s,e,i,r)||a["a"](o,s,_,s,e,i,r)||a["a"](_,s,_,b,e,i,r))return!0}else g+=Object(d["a"])(o,b,o,s,i,r),g+=Object(d["a"])(_,s,_,b,i,r);break;case p.Z:if(n){if(a["a"](m,y,_,b,e,i,r))return!0}else g+=Object(d["a"])(m,y,_,b,i,r);m=_,y=b;break}}return n||v(y,b)||(g+=Object(d["a"])(m,y,_,b,i,r)||0),0!==g}function O(t,e,n){return T(t,0,!1,e,n)}function C(t,e,n,i){return T(t,e,!0,n,i)}var M=n("6d8b"),A=n("41ef"),D=n("2cf4"),E=n("4bc4"),I=Object(M["j"])({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},r["b"]),P={style:Object(M["j"])({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},r["a"].style)},L=["x","y","rotation","scaleX","scaleY","originX","originY","invisible","culling","z","z2","zlevel","parent"],k=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.update=function(){var n=this;t.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(t){n.buildPath(t,n.shape)}),r.silent=!0;var o=r.style;for(var a in i)o[a]!==i[a]&&(o[a]=i[a]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var s=0;s<L.length;++s)r[L[s]]=this[L[s]];r.__dirty|=E["a"]}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(e){var n=Object(M["F"])(e);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var r=0;r<n.length;r++){var o=n[r],a=e[o];"style"===o?this.style?Object(M["m"])(this.style,a):this.useStyle(a):"shape"===o?Object(M["m"])(this.shape,a):t.prototype.attrKV.call(this,o,a)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(Object(M["C"])(t)){var e=Object(A["lum"])(t,0);return e>.5?D["a"]:e>.2?D["c"]:D["d"]}if(t)return D["d"]}return D["a"]},e.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(Object(M["C"])(e)){var n=this.__zr,i=!(!n||!n.isDarkMode()),r=Object(A["lum"])(t,0)<D["b"];if(i===r)return e}},e.prototype.buildPath=function(t,e,n){},e.prototype.pathUpdated=function(){this.__dirty&=~E["b"]},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new o["a"](!1)},e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style,e=t.fill;return null!=e&&"none"!==e},e.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,n=!t;if(n){var i=!1;this.path||(i=!0,this.createPathProxy());var r=this.path;(i||this.__dirty&E["b"])&&(r.beginPath(),this.buildPath(r,this.shape,!1),this.pathUpdated()),t=r.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectWithStroke||(this._rectWithStroke=t.clone());if(this.__dirty||n){o.copy(t);var a=e.strokeNoScale?this.getLineScale():1,s=e.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;s=Math.max(s,null==l?4:l)}a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2)}return o}return t},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var o=this.path;if(this.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),C(o,a/s,t,e)))return!0}if(this.hasFill())return O(o,t,e)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=E["b"],this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(e,n){"shape"===e?this.setShape(n):t.prototype.attrKV.call(this,e,n)},e.prototype.setShape=function(t,e){var n=this.shape;return n||(n=this.shape={}),"string"===typeof t?n[t]=e:Object(M["m"])(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(this.__dirty&E["b"])},e.prototype.createStyle=function(t){return Object(M["h"])(I,t)},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=Object(M["m"])({},this.shape))},e.prototype._applyStateObj=function(e,n,i,r,o,a){t.prototype._applyStateObj.call(this,e,n,i,r,o,a);var s,l=!(n&&r);if(n&&n.shape?o?r?s=n.shape:(s=Object(M["m"])({},i.shape),Object(M["m"])(s,n.shape)):(s=Object(M["m"])({},r?this.shape:i.shape),Object(M["m"])(s,n.shape)):l&&(s=i.shape),s)if(o){this.shape=Object(M["m"])({},this.shape);for(var c={},u=Object(M["F"])(s),h=0;h<u.length;h++){var f=u[h];"object"===typeof s[f]?this.shape[f]=s[f]:c[f]=s[f]}this._transitionState(e,{shape:c},a)}else this.shape=s,this.dirtyShape()},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(i.shape=n),i},e.prototype.getAnimationStyleProps=function(){return P},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var n=function(e){function n(n){var i=e.call(this,n)||this;return t.init&&t.init.call(i,n),i}return Object(i["a"])(n,e),n.prototype.getDefaultStyle=function(){return Object(M["d"])(t.style)},n.prototype.getDefaultShape=function(){return Object(M["d"])(t.shape)},n}(e);for(var r in t)"function"===typeof t[r]&&(n.prototype[r]=t[r]);return n},e.initDefaultProps=function(){var t=e.prototype;t.type="path",t.strokeContainThreshold=5,t.segmentIgnoreThreshold=0,t.subPixelOptimize=!1,t.autoBatch=!1,t.__dirty=E["a"]|E["c"]|E["b"]}(),e}(r["c"]);e["b"]=k},cc12:function(t,e,n){var i=n("da84"),r=n("861d"),o=i.document,a=r(o)&&r(o.createElement);t.exports=function(t){return a?o.createElement(t):{}}},cca6:function(t,e,n){var i=n("23e7"),r=n("60da");i({target:"Object",stat:!0,forced:Object.assign!==r},{assign:r})},cccd:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n("e0d3");function r(){var t=Object(i["o"])();return function(e){var n=t(e),i=e.pipelineContext,r=!!n.large,o=!!n.progressiveRender,a=n.large=!(!i||!i.large),s=n.progressiveRender=!(!i||!i.progressiveRender);return!(r===a&&o===s)&&"reset"}}},cd70:function(t,e,n){"use strict";var i=n("6d8b"),r=function(){function t(t){this.otherDims={},null!=t&&i["m"](this,t)}return t}();e["a"]=r},cd9d:function(t,e){function n(t){return t}t.exports=n},cdf9:function(t,e,n){var i=n("825a"),r=n("861d"),o=n("f069");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},ce4e:function(t,e,n){var i=n("da84"),r=n("9112");t.exports=function(t,e){try{r(i,t,e)}catch(n){i[t]=e}return e}},ce86:function(t,e,n){var i=n("9e69"),r=n("7948"),o=n("6747"),a=n("ffd6"),s=1/0,l=i?i.prototype:void 0,c=l?l.toString:void 0;function u(t){if("string"==typeof t)return t;if(o(t))return r(t,u)+"";if(a(t))return c?c.call(t):"";var e=t+"";return"0"==e&&1/t==-s?"-0":e}t.exports=u},cee4:function(t,e,n){"use strict";var i=n("c532"),r=n("1d2b"),o=n("0a06"),a=n("4a7b"),s=n("2444");function l(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var c=l(s);c.Axios=o,c.create=function(t){return l(a(c.defaults,t))},c.Cancel=n("7a77"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.all=function(t){return Promise.all(t)},c.spread=n("0df6"),c.isAxiosError=n("5f02"),t.exports=c,t.exports.default=c},cf7e:function(t,e,n){"use strict";var i=n("6d8b"),r=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return i["H"](this._dimList,(function(t){return this._axes[t]}),this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),i["n"](this.getAxes(),(function(e){return e.scale.type===t}))},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}();e["a"]=r},cfb4:function(t,e,n){(function(t){n("99af");var e=t.fabric||(t.fabric={});e.EcVideo=e.util.createClass(e.Rect,{type:"ecVideo",superType:"element",stateProperties:e.Object.prototype.stateProperties.concat(["src"]),cacheProperties:e.Object.prototype.stateProperties.concat(["src"]),element:null,hasControls:!1,lockRotation:!0,initialize:function(t,e){e=e||{},this.callSuper("initialize",e),this.set({src:t})},setSource:function(t){this.setSrc(t)},setSrc:function(t){var e=t.src;e&&(this.set({src:e}),this.iframeElement.src=e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t);var n=this.id,i=this.scaleX,r=this.scaleY,o=this.width,a=this.height,s=this.angle,l=this.src,c=this.editable,u=(this.dialog,this.canvas.getZoom()),h=this.aCoords.tl.x,f=this.aCoords.tl.y,d=(o*i*u-o)/2,p=(a*r*u-a)/2;if(!this.element){this.iframeElement=e.util.makeElement("video",{id:n,src:l,width:"100%",height:"100%"}),c||(this.iframeElement.autoplay=!0,this.iframeElement.controls=!0);var g=e.util.wrapElement(this.iframeElement,"div",{id:"".concat(n,"_container"),class:"item__container",style:"\n\t\t\t\t\t\t\t\ttransform: rotate(".concat(s,"deg) scale(").concat(i*u,", ").concat(r*u,");\n\t\t\t\t\t\t\t\twidth: ").concat(o,"px;\n\t\t\t\t\t\t\t\theight: ").concat(a,"px;\n\t\t\t\t\t\t\t\tleft: ").concat(h+d,"px;\n                top: ").concat(f+p,"px;\n\t\t\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\t\t\tuser-select: ").concat(c?"none":" auto ",";\n\t\t\t\t\t\t\t\tpointer-events: ").concat(c?"none":"auto",";")});this.element=e.util.makeElementSelectable(g);var m=document.getElementById(this.canvas.container);m.appendChild(this.element)}}}),e.EcVideo.fromObject=function(t,n){n&&n(new e.EcVideo(t.src,t))},e.EcVideo.async=!0}).call(this,n("c8ba"))},d012:function(t,e){t.exports={}},d015:function(t,e,n){"use strict";var i=n("3eba");i["j"]({type:"series.liquidFill",optionUpdated:function(){var t=this.option;t.gridSize=Math.max(Math.floor(t.gridSize),4)},getInitialData:function(t,e){var n=i["o"].createDimensions(t.data,{coordDimensions:["value"]}),r=new i["e"](n,this);return r.initData(t.data),r},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}});var r=n("3842"),o=i["n"].extendShape({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(t,e){null==e.radiusY&&(e.radiusY=e.radius);var n=Math.max(2*Math.ceil(2*e.radius/e.waveLength*4),8);while(e.phase<2*-Math.PI)e.phase+=2*Math.PI;while(e.phase>0)e.phase-=2*Math.PI;var i=e.phase/Math.PI/2*e.waveLength,r=e.cx-e.radius+i-2*e.radius;t.moveTo(r,e.waterLevel);for(var o=0,s=0;s<n;++s){var l=s%4,c=a(s*e.waveLength/4,l,e.waveLength,e.amplitude);t.bezierCurveTo(c[0][0]+r,-c[0][1]+e.waterLevel,c[1][0]+r,-c[1][1]+e.waterLevel,c[2][0]+r,-c[2][1]+e.waterLevel),s===n-1&&(o=c[2][0])}e.inverse?(t.lineTo(o+r,e.cy-e.radiusY),t.lineTo(r,e.cy-e.radiusY),t.lineTo(r,e.waterLevel)):(t.lineTo(o+r,e.cy+e.radiusY),t.lineTo(r,e.cy+e.radiusY),t.lineTo(r,e.waterLevel)),t.closePath()}});function a(t,e,n,i){return 0===e?[[t+.5*n/Math.PI/2,i/2],[t+.5*n/Math.PI,i],[t+n/4,i]]:1===e?[[t+.5*n/Math.PI/2*(Math.PI-2),i],[t+.5*n/Math.PI/2*(Math.PI-1),i/2],[t+n/4,0]]:2===e?[[t+.5*n/Math.PI/2,-i/2],[t+.5*n/Math.PI,-i],[t+n/4,-i]]:[[t+.5*n/Math.PI/2*(Math.PI-2),-i],[t+.5*n/Math.PI/2*(Math.PI-1),-i/2],[t+n/4,0]]}var s=r["p"];function l(t){return t&&0===t.indexOf("path://")}i["i"]({type:"liquidFill",render:function(t,e,n){var r=this,a=this.group;a.removeAll();var c=t.getData(),u=c.getItemModel(0),h=u.get("center"),f=u.get("radius"),d=n.getWidth(),p=n.getHeight(),g=Math.min(d,p),m=0,v=0,y=t.get("outline.show");y&&(m=t.get("outline.borderDistance"),v=s(t.get("outline.itemStyle.borderWidth"),g));var _,b,x,w=s(h[0],d),S=s(h[1],p),T=!1,O=t.get("shape");if("container"===O?(T=!0,_=[d/2,p/2],b=[_[0]-v/2,_[1]-v/2],x=[s(m,d),s(m,p)],f=[Math.max(b[0]-x[0],0),Math.max(b[1]-x[1],0)]):(_=s(f,g)/2,b=_-v/2,x=s(m,g),f=Math.max(b-x,0)),y){var C=L();C.style.lineWidth=v,a.add(L())}var M=T?0:w-f,A=T?0:S-f,D=null;a.add(k());var E=this._data,I=[];function P(t,e){if(O){if(l(O)){var n=i["n"].makePath(O.slice(7),{}),r=n.getBoundingRect(),o=r.width,a=r.height;o>a?(a*=2*t/o,o=2*t):(o*=2*t/a,a=2*t);var s=e?0:w-o/2,c=e?0:S-a/2;return n=i["n"].makePath(O.slice(7),{},new i["n"].BoundingRect(s,c,o,a)),e&&(n.x=-o/2,n.y=-a/2),n}if(T){var u=e?-t[0]:w-t[0],h=e?-t[1]:S-t[1];return i["o"].createSymbol("rect",u,h,2*t[0],2*t[1])}u=e?-t:w-t,h=e?-t:S-t;return"pin"===O?h+=t:"arrow"===O&&(h-=t),i["o"].createSymbol(O,u,h,2*t,2*t)}return new i["n"].Circle({shape:{cx:e?0:w,cy:e?0:S,r:t}})}function L(){var e=P(_);return e.style.fill=null,e.setStyle(t.getModel("outline.itemStyle").getItemStyle()),e}function k(){var e=P(f);e.setStyle(t.getModel("backgroundStyle").getItemStyle()),e.style.fill=null,e.z2=5;var n=P(f);n.setStyle(t.getModel("backgroundStyle").getItemStyle()),n.style.stroke=null;var r=new i["n"].Group;return r.add(e),r.add(n),r}function j(e,n,r){var a=T?f[0]:f,l=T?p/2:f,u=c.getItemModel(e),h=u.getModel("itemStyle"),d=u.get("phase"),g=s(u.get("amplitude"),2*l),m=s(u.get("waveLength"),2*a),v=c.get("value",e),y=l-v*l*2;d=r?r.shape.phase:"auto"===d?e*Math.PI/4:d;var _=h.getItemStyle();if(!_.fill){var b=t.get("color"),x=e%b.length;_.fill=b[x]}var O=2*a,C=new o({shape:{waveLength:m,radius:a,radiusY:l,cx:O,cy:0,waterLevel:y,amplitude:g,phase:d,inverse:n},style:_,x:w,y:S});C.shape._waterLevel=y;var M=u.getModel("emphasis.itemStyle").getItemStyle();M.lineWidth=0,C.ensureState("emphasis").style=M,i["o"].enableHoverEmphasis(C);var A=P(f,!0);return A.setStyle({fill:"white"}),C.setClipPath(A),C}function R(t,e,n){var i=c.getItemModel(t),r=i.get("period"),o=i.get("direction"),a=c.get("value",t),s=i.get("phase");s=n?n.shape.phase:"auto"===s?t*Math.PI/4:s;var l=function(e){var n=c.count();return 0===n?e:e*(.2+(n-t)/n*.8)},u=0;u="auto"===r?l(5e3):"function"===typeof r?r(a,t):r;var h=0;"right"===o||null==o?h=Math.PI:"left"===o?h=-Math.PI:"none"===o?h=0:console.error("Illegal direction value for liquid fill."),"none"!==o&&i.get("waveAnimation")&&e.animate("shape",!0).when(0,{phase:s}).when(u/2,{phase:h+s}).when(u,{phase:2*h+s}).during((function(){D&&D.dirty(!0)})).start()}function N(e){var n=u.getModel("label");function r(){var e=t.getFormattedLabel(0,"normal"),n=100*c.get("value",0),i=c.getName(0)||t.name;return isNaN(n)||(i=n.toFixed(0)+"%"),null==e?i:e}var o={z2:10,shape:{x:M,y:A,width:2*(T?f[0]:f),height:2*(T?f[1]:f)},style:{fill:"transparent"},textConfig:{position:n.get("position")||"inside"},silent:!0},a={style:{text:r(),textAlign:n.get("align"),textVerticalAlign:n.get("baseline")}};Object.assign(a.style,i["o"].createTextStyle(n));var s=new i["n"].Rect(o),l=new i["n"].Rect(o);l.disableLabelAnimation=!0,s.disableLabelAnimation=!0;var h=new i["n"].Text(a),d=new i["n"].Text(a);s.setTextContent(h),l.setTextContent(d);var p=n.get("insideColor");d.style.fill=p;var g=new i["n"].Group;g.add(s),g.add(l);var m=P(f,!0);return D=new i["n"].CompoundPath({shape:{paths:e},x:w,y:S}),D.setClipPath(m),l.setClipPath(D),g}c.diff(E).add((function(e){var n=j(e,!1),r=n.shape.waterLevel;n.shape.waterLevel=T?p/2:f,i["n"].initProps(n,{shape:{waterLevel:r}},t),n.z2=2,R(e,n,null),a.add(n),c.setItemGraphicEl(e,n),I.push(n)})).update((function(e,n){for(var o=E.getItemGraphicEl(n),s=j(e,!1,o),u={},h=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],f=0;f<h.length;++f){var d=h[f];s.shape.hasOwnProperty(d)&&(u[d]=s.shape[d])}var g={},m=["fill","opacity","shadowBlur","shadowColor"];for(f=0;f<m.length;++f){d=m[f];s.style.hasOwnProperty(d)&&(g[d]=s.style[d])}T&&(u.radiusY=p/2),i["n"].updateProps(o,{shape:u,x:s.x,y:s.y},t),t.isUniversalTransitionEnabled&&t.isUniversalTransitionEnabled()?i["n"].updateProps(o,{style:g},t):o.useStyle(g);var v=o.getClipPath(),y=s.getClipPath();o.setClipPath(s.getClipPath()),o.shape.inverse=s.inverse,v&&y&&r._shape===O&&!l(O)&&i["n"].updateProps(y,{shape:v.shape},t,{isFrom:!0}),R(e,o,o),a.add(o),c.setItemGraphicEl(e,o),I.push(o)})).remove((function(t){var e=E.getItemGraphicEl(t);a.remove(e)})).execute(),u.get("label.show")&&a.add(N(I)),this._shape=O,this._data=c},dispose:function(){}})},d02c:function(t,e,n){var i=n("5e2e"),r=n("79bc"),o=n("7b83"),a=200;function s(t,e){var n=this.__data__;if(n instanceof i){var s=n.__data__;if(!r||s.length<a-1)return s.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(s)}return n.set(t,e),this.size=n.size,this}t.exports=s},d039:function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},d066:function(t,e,n){var i=n("428f"),r=n("da84"),o=function(t){return"function"==typeof t?t:void 0};t.exports=function(t,e){return arguments.length<2?o(i[t])||o(r[t]):i[t]&&i[t][e]||r[t]&&r[t][e]}},d0ce:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var i,r=n("6d8b"),o=n("b7d9"),a=n("ec6f"),s="undefined",l=typeof Uint32Array===s?Array:Uint32Array,c=typeof Uint16Array===s?Array:Uint16Array,u=typeof Int32Array===s?Array:Int32Array,h=typeof Float64Array===s?Array:Float64Array,f={float:h,int:u,ordinal:Array,number:Array,time:h};function d(t){return t>65535?l:c}function p(){return[1/0,-1/0]}function g(t){var e=t.constructor;return e===Array?t.slice():new e(t)}function m(t,e,n,i,r){var o=f[n||"float"];if(r){var a=t[e],s=a&&a.length;if(s!==i){for(var l=new o(i),c=0;c<s;c++)l[c]=a[c];t[e]=l}}else t[e]=new o(i)}var v=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Object(r["g"])()}return t.prototype.initData=function(t,e,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=t.getSource(),s=this.defaultDimValueGetter=i[o.sourceFormat];this._dimValueGetter=n||s,this._rawExtent=[];Object(a["f"])(o);this._dimensions=Object(r["H"])(e,(function(t){return{type:t.type,property:t.property}})),this._initDataFromProvider(0,t.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(t,e){var n=this._calcDimNameToIdx,i=this._dimensions,r=n.get(t);if(null!=r){if(i[r].type===e)return r}else r=i.length;return i[r]={type:e},n.set(t,r),this._chunks[r]=new f[e||"float"](this._rawCount),this._rawExtent[r]=p(),r},t.prototype.collectOrdinalMeta=function(t,e){var n=this._chunks[t],i=this._dimensions[t],r=this._rawExtent,o=i.ordinalOffset||0,a=n.length;0===o&&(r[t]=p());for(var s=r[t],l=o;l<a;l++){var c=n[l]=e.parseAndCollect(n[l]);s[0]=Math.min(c,s[0]),s[1]=Math.max(c,s[1])}i.ordinalMeta=e,i.ordinalOffset=a,i.type="ordinal"},t.prototype.getOrdinalMeta=function(t){var e=this._dimensions[t],n=e.ordinalMeta;return n},t.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},t.prototype.appendData=function(t){var e=this._provider,n=this.count();e.appendData(t);var i=e.count();return e.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},t.prototype.appendValues=function(t,e){for(var n=this._chunks,r=this._dimensions,o=r.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,e||0),c=0;c<o;c++){var u=r[c];m(n,c,u.type,l,!0)}for(var h=[],f=s;f<l;f++)for(var d=f-s,p=0;p<o;p++){u=r[p];var g=i.arrayRows.call(this,t[d]||h,u.property,d,p);n[p][f]=g;var v=a[p];g<v[0]&&(v[0]=g),g>v[1]&&(v[1]=g)}return this._rawCount=this._count=l,{start:s,end:l}},t.prototype._initDataFromProvider=function(t,e,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,c=Object(r["H"])(a,(function(t){return t.property})),u=0;u<s;u++){var h=a[u];l[u]||(l[u]=p()),m(o,u,h.type,e,n)}if(i.fillStorage)i.fillStorage(t,e,o,l);else for(var f=[],d=t;d<e;d++){f=i.getItem(d,f);for(var g=0;g<s;g++){var v=o[g],y=this._dimValueGetter(f,c[g],d,g);v[d]=y;var _=l[g];y<_[0]&&(_[0]=y),y>_[1]&&(_[1]=y)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(e)]:NaN},t.prototype.getValues=function(t,e){var n=[],i=[];if(null==e){e=t,t=[];for(var r=0;r<this._dimensions.length;r++)i.push(r)}else i=t;r=0;for(var o=i.length;r<o;r++)n.push(this.get(i[r],e));return n},t.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._chunks[t];return n?n[e]:NaN},t.prototype.getSum=function(t){var e=this._chunks[t],n=0;if(e)for(var i=0,r=this.count();i<r;i++){var o=this.get(t,i);isNaN(o)||(n+=o)}return n},t.prototype.getMedian=function(t){var e=[];this.each([t],(function(t){isNaN(t)||e.push(t)}));var n=e.sort((function(t,e){return t-e})),i=this.count();return 0===i?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;var i=0,r=this._count-1;while(i<=r){var o=(i+r)/2|0;if(e[o]<t)i=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},t.prototype.indicesOfNearest=function(t,e,n){var i=this._chunks,r=i[t],o=[];if(!r)return o;null==n&&(n=1/0);for(var a=1/0,s=-1,l=0,c=0,u=this.count();c<u;c++){var h=this.getRawIndex(c),f=e-r[h],d=Math.abs(f);d<=n&&((d<a||d===a&&f>=0&&s<0)&&(a=d,s=f,l=0),f===s&&(o[l++]=c))}return o.length=l,o},t.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,i=this._count;if(n===Array){t=new n(i);for(var r=0;r<i;r++)t[r]=e[r]}else t=new n(e.buffer,0,i)}else{n=d(this._rawCount);t=new n(this.count());for(r=0;r<t.length;r++)t[r]=r}return t},t.prototype.filter=function(t,e){if(!this._count)return this;for(var n=this.clone(),i=n.count(),r=d(n._rawCount),o=new r(i),a=[],s=t.length,l=0,c=t[0],u=n._chunks,h=0;h<i;h++){var f=void 0,p=n.getRawIndex(h);if(0===s)f=e(h);else if(1===s){var g=u[c][p];f=e(g,h)}else{for(var m=0;m<s;m++)a[m]=u[t[m]][p];a[m]=h,f=e.apply(null,a)}f&&(o[l++]=p)}return l<i&&(n._indices=o),n._count=l,n._extent=[],n._updateGetRawIdx(),n},t.prototype.selectRange=function(t){var e=this.clone(),n=e._count;if(!n)return this;var i=Object(r["F"])(t),o=i.length;if(!o)return this;var a=e.count(),s=d(e._rawCount),l=new s(a),c=0,u=i[0],h=t[u][0],f=t[u][1],p=e._chunks,g=!1;if(!e._indices){var m=0;if(1===o){for(var v=p[i[0]],y=0;y<n;y++){var _=v[y];(_>=h&&_<=f||isNaN(_))&&(l[c++]=m),m++}g=!0}else if(2===o){v=p[i[0]];var b=p[i[1]],x=t[i[1]][0],w=t[i[1]][1];for(y=0;y<n;y++){_=v[y];var S=b[y];(_>=h&&_<=f||isNaN(_))&&(S>=x&&S<=w||isNaN(S))&&(l[c++]=m),m++}g=!0}}if(!g)if(1===o)for(y=0;y<a;y++){var T=e.getRawIndex(y);_=p[i[0]][T];(_>=h&&_<=f||isNaN(_))&&(l[c++]=T)}else for(y=0;y<a;y++){for(var O=!0,C=(T=e.getRawIndex(y),0);C<o;C++){var M=i[C];_=p[M][T];(_<t[M][0]||_>t[M][1])&&(O=!1)}O&&(l[c++]=e.getRawIndex(y))}return c<a&&(e._indices=l),e._count=c,e._extent=[],e._updateGetRawIdx(),e},t.prototype.map=function(t,e){var n=this.clone(t);return this._updateDims(n,t,e),n},t.prototype.modify=function(t,e){this._updateDims(this,t,e)},t.prototype._updateDims=function(t,e,n){for(var i=t._chunks,r=[],o=e.length,a=t.count(),s=[],l=t._rawExtent,c=0;c<e.length;c++)l[e[c]]=p();for(var u=0;u<a;u++){for(var h=t.getRawIndex(u),f=0;f<o;f++)s[f]=i[e[f]][h];s[o]=u;var d=n&&n.apply(null,s);if(null!=d){"object"!==typeof d&&(r[0]=d,d=r);for(c=0;c<d.length;c++){var g=e[c],m=d[c],v=l[g],y=i[g];y&&(y[h]=m),m<v[0]&&(v[0]=m),m>v[1]&&(v[1]=m)}}}},t.prototype.lttbDownSample=function(t,e){var n,i,r,o=this.clone([t],!0),a=o._chunks,s=a[t],l=this.count(),c=0,u=Math.floor(1/e),h=this.getRawIndex(0),f=new(d(this._rawCount))(Math.ceil(l/u)+2);f[c++]=h;for(var p=1;p<l-1;p+=u){for(var g=Math.min(p+u,l-1),m=Math.min(p+2*u,l),v=(m+g)/2,y=0,_=g;_<m;_++){var b=this.getRawIndex(_),x=s[b];isNaN(x)||(y+=x)}y/=m-g;var w=p,S=Math.min(p+u,l),T=p-1,O=s[h];n=-1,r=w;for(_=w;_<S;_++){b=this.getRawIndex(_),x=s[b];isNaN(x)||(i=Math.abs((T-v)*(x-O)-(T-_)*(y-O)),i>n&&(n=i,r=b))}f[c++]=r,h=r}return f[c++]=this.getRawIndex(l-1),o._count=c,o._indices=f,o.getRawIndex=this._getRawIdx,o},t.prototype.downSample=function(t,e,n,i){for(var r=this.clone([t],!0),o=r._chunks,a=[],s=Math.floor(1/e),l=o[t],c=this.count(),u=r._rawExtent[t]=p(),h=new(d(this._rawCount))(Math.ceil(c/s)),f=0,g=0;g<c;g+=s){s>c-g&&(s=c-g,a.length=s);for(var m=0;m<s;m++){var v=this.getRawIndex(g+m);a[m]=l[v]}var y=n(a),_=this.getRawIndex(Math.min(g+i(a,y)||0,c-1));l[_]=y,y<u[0]&&(u[0]=y),y>u[1]&&(u[1]=y),h[f++]=_}return r._count=f,r._indices=h,r._updateGetRawIdx(),r},t.prototype.each=function(t,e){if(this._count)for(var n=t.length,i=this._chunks,r=0,o=this.count();r<o;r++){var a=this.getRawIndex(r);switch(n){case 0:e(r);break;case 1:e(i[t[0]][a],r);break;case 2:e(i[t[0]][a],i[t[1]][a],r);break;default:for(var s=0,l=[];s<n;s++)l[s]=i[t[s]][a];l[s]=r,e.apply(null,l)}}},t.prototype.getDataExtent=function(t){var e=this._chunks[t],n=p();if(!e)return n;var i,r=this.count(),o=!this._indices;if(o)return this._rawExtent[t].slice();if(i=this._extent[t],i)return i.slice();i=n;for(var a=i[0],s=i[1],l=0;l<r;l++){var c=this.getRawIndex(l),u=e[c];u<a&&(a=u),u>s&&(s=u)}return i=[a,s],this._extent[t]=i,i},t.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var n=[],i=this._chunks,r=0;r<i.length;r++)n.push(i[r][e]);return n},t.prototype.clone=function(e,n){var i=new t,o=this._chunks,a=e&&Object(r["N"])(e,(function(t,e){return t[e]=!0,t}),{});if(a)for(var s=0;s<o.length;s++)i._chunks[s]=a[s]?g(o[s]):o[s];else i._chunks=o;return this._copyCommonProps(i),n||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},t.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=Object(r["d"])(this._extent),t._rawExtent=Object(r["d"])(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var n=this._indices.length;e=new t(n);for(var i=0;i<n;i++)e[i]=this._indices[i]}else e=new t(this._indices);return e}return null},t.prototype._getRawIdxIdentity=function(t){return t},t.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function t(t,e,n,i){return Object(o["d"])(t[i],this._dimensions[i])}i={arrayRows:t,objectRows:function(t,e,n,i){return Object(o["d"])(t[e],this._dimensions[i])},keyedColumns:t,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return Object(o["d"])(r instanceof Array?r[i]:r,this._dimensions[i])},typedArray:function(t,e,n,i){return t[i]}}}(),t}();e["b"]=v},d1e7:function(t,e,n){"use strict";var i={}.propertyIsEnumerable,r=Object.getOwnPropertyDescriptor,o=r&&!i.call({1:2},1);e.f=o?function(t){var e=r(this,t);return!!e&&e.enumerable}:i},d28b:function(t,e,n){var i=n("746f");i("iterator")},d2bb:function(t,e,n){var i=n("825a"),r=n("3bbe");t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,t.call(n,[]),e=n instanceof Array}catch(o){}return function(n,o){return i(n),r(o),e?t.call(n,o):n.__proto__=o,n}}():void 0)},d327:function(t,e){function n(){return[]}t.exports=n},d370:function(t,e,n){var i=n("253c"),r=n("1310"),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return r(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=l},d3b7:function(t,e,n){var i=n("00ee"),r=n("6eeb"),o=n("b041");i||r(Object.prototype,"toString",o,{unsafe:!0})},d409:function(t,e,n){"use strict";n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return g}));var i=n("5e76"),r=n("6d8b"),o=n("e86a"),a=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function s(t,e,n,i,r){if(!e)return"";var o=(t+"").split("\n");r=l(e,n,i,r);for(var a=0,s=o.length;a<s;a++)o[a]=c(o[a],r);return o.join("\n")}function l(t,e,n,i){i=i||{};var a=Object(r["m"])({},i);a.font=e,n=Object(r["P"])(n,"..."),a.maxIterations=Object(r["P"])(i.maxIterations,2);var s=a.minChar=Object(r["P"])(i.minChar,0);a.cnCharWidth=Object(o["g"])("国",e);var l=a.ascCharWidth=Object(o["g"])("a",e);a.placeholder=Object(r["P"])(i.placeholder,"");for(var c=t=Math.max(0,t-1),u=0;u<s&&c>=l;u++)c-=l;var h=Object(o["g"])(n,e);return h>c&&(n="",h=0),c=t-h,a.ellipsis=n,a.ellipsisWidth=h,a.contentWidth=c,a.containerWidth=t,a}function c(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var a=Object(o["g"])(t,i);if(a<=n)return t;for(var s=0;;s++){if(a<=r||s>=e.maxIterations){t+=e.ellipsis;break}var l=0===s?u(t,r,e.ascCharWidth,e.cnCharWidth):a>0?Math.floor(t.length*r/a):0;t=t.substr(0,l),a=Object(o["g"])(t,i)}return""===t&&(t=e.placeholder),t}function u(t,e,n,i){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?n:i}return o}function h(t,e){null!=t&&(t+="");var n,i=e.overflow,a=e.padding,s=e.font,u="truncate"===i,h=Object(o["f"])(s),f=Object(r["P"])(e.lineHeight,h),d="truncate"===e.lineOverflow,p=e.width;n=null!=p&&"break"===i||"breakAll"===i?t?b(t,e.font,p,"breakAll"===i,0).lines:[]:t?t.split("\n"):[];var g=n.length*f,m=Object(r["P"])(e.height,g);if(g>m&&d){var v=Math.floor(m/f);n=n.slice(0,v)}var y=m,_=p;if(a&&(y+=a[0]+a[2],null!=_&&(_+=a[1]+a[3])),t&&u&&null!=_)for(var x=l(p,s,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),w=0;w<n.length;w++)n[w]=c(n[w],x);if(null==p){var S=0;for(w=0;w<n.length;w++)S=Math.max(Object(o["g"])(n[w],s),S);p=S}return{lines:n,height:m,outerHeight:y,lineHeight:f,calculatedLineHeight:h,contentHeight:g,width:p}}var f=function(){function t(){}return t}(),d=function(){function t(t){this.tokens=[],t&&(this.tokens=t)}return t}(),p=function(){function t(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return t}();function g(t,e){var n=new p;if(null!=t&&(t+=""),!t)return n;var l,c=e.width,u=e.height,h=e.overflow,f="break"!==h&&"breakAll"!==h||null==c?null:{width:c,accumWidth:0,breakAll:"breakAll"===h},d=a.lastIndex=0;while(null!=(l=a.exec(t))){var g=l.index;g>d&&m(n,t.substring(d,g),e,f),m(n,l[2],e,f,l[1]),d=a.lastIndex}d<t.length&&m(n,t.substring(d,t.length),e,f);var v=[],y=0,_=0,b=e.padding,x="truncate"===h,w="truncate"===e.lineOverflow;function S(t,e,n){t.width=e,t.lineHeight=n,y+=n,_=Math.max(_,e)}t:for(var T=0;T<n.lines.length;T++){for(var O=n.lines[T],C=0,M=0,A=0;A<O.tokens.length;A++){var D=O.tokens[A],E=D.styleName&&e.rich[D.styleName]||{},I=D.textPadding=E.padding,P=I?I[1]+I[3]:0,L=D.font=E.font||e.font;D.contentHeight=Object(o["f"])(L);var k=Object(r["P"])(E.height,D.contentHeight);if(D.innerHeight=k,I&&(k+=I[0]+I[2]),D.height=k,D.lineHeight=Object(r["Q"])(E.lineHeight,e.lineHeight,k),D.align=E&&E.align||e.align,D.verticalAlign=E&&E.verticalAlign||"middle",w&&null!=u&&y+D.lineHeight>u){A>0?(O.tokens=O.tokens.slice(0,A),S(O,M,C),n.lines=n.lines.slice(0,T+1)):n.lines=n.lines.slice(0,T);break t}var j=E.width,R=null==j||"auto"===j;if("string"===typeof j&&"%"===j.charAt(j.length-1))D.percentWidth=j,v.push(D),D.contentWidth=Object(o["g"])(D.text,L);else{if(R){var N=E.backgroundColor,B=N&&N.image;B&&(B=i["b"](B),i["c"](B)&&(D.width=Math.max(D.width,B.width*k/B.height)))}var F=x&&null!=c?c-M:null;null!=F&&F<D.width?!R||F<P?(D.text="",D.width=D.contentWidth=0):(D.text=s(D.text,F-P,L,e.ellipsis,{minChar:e.truncateMinChar}),D.width=D.contentWidth=Object(o["g"])(D.text,L)):D.contentWidth=Object(o["g"])(D.text,L)}D.width+=P,M+=D.width,E&&(C=Math.max(C,D.lineHeight))}S(O,M,C)}n.outerWidth=n.width=Object(r["P"])(c,_),n.outerHeight=n.height=Object(r["P"])(u,y),n.contentHeight=y,n.contentWidth=_,b&&(n.outerWidth+=b[1]+b[3],n.outerHeight+=b[0]+b[2]);for(T=0;T<v.length;T++){D=v[T];var z=D.percentWidth;D.width=parseInt(z,10)/100*n.width}return n}function m(t,e,n,i,r){var a,s,l=""===e,c=r&&n.rich[r]||{},u=t.lines,h=c.font||n.font,p=!1;if(i){var g=c.padding,m=g?g[1]+g[3]:0;if(null!=c.width&&"auto"!==c.width){var v=Object(o["h"])(c.width,i.width)+m;u.length>0&&v+i.accumWidth>i.width&&(a=e.split("\n"),p=!0),i.accumWidth=v}else{var y=b(e,h,i.width,i.breakAll,i.accumWidth);i.accumWidth=y.accumWidth+m,s=y.linesWidths,a=y.lines}}else a=e.split("\n");for(var _=0;_<a.length;_++){var x=a[_],w=new f;if(w.styleName=r,w.text=x,w.isLineHolder=!x&&!l,"number"===typeof c.width?w.width=c.width:w.width=s?s[_]:Object(o["g"])(x,h),_||p)u.push(new d([w]));else{var S=(u[u.length-1]||(u[0]=new d)).tokens,T=S.length;1===T&&S[0].isLineHolder?S[0]=w:(x||!T||l)&&S.push(w)}}}function v(t){var e=t.charCodeAt(0);return e>=33&&e<=255}var y=Object(r["N"])(",&?/;] ".split(""),(function(t,e){return t[e]=!0,t}),{});function _(t){return!v(t)||!!y[t]}function b(t,e,n,i,r){for(var a=[],s=[],l="",c="",u=0,h=0,f=0;f<t.length;f++){var d=t.charAt(f);if("\n"!==d){var p=Object(o["g"])(d,e),g=!i&&!_(d);(a.length?h+p>n:r+h+p>n)?h?(l||c)&&(g?(l||(l=c,c="",u=0,h=u),a.push(l),s.push(h-u),c+=d,u+=p,l="",h=u):(c&&(l+=c,h+=u,c="",u=0),a.push(l),s.push(h),l=d,h=p)):g?(a.push(c),s.push(u),c=d,u=p):(a.push(d),s.push(p)):(h+=p,g?(c+=d,u+=p):(c&&(l+=c,c="",u=0),l+=d))}else c&&(l+=c,h+=u),a.push(l),s.push(h),l="",c="",u=0,h=0}return a.length||l||(l=t,c="",u=0),c&&(l+=c),l&&(a.push(l),s.push(h)),1===a.length&&(h+=r),{accumWidth:h,lines:a,linesWidths:s}}},d44e:function(t,e,n){var i=n("9bf2").f,r=n("5135"),o=n("b622"),a=o("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,a)&&i(t,a,{configurable:!0,value:e})}},d498:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=n("4fac"),a=function(){function t(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return t}(),s=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new a},e.prototype.buildPath=function(t,e){o["a"](t,e,!1)},e}(r["b"]);s.prototype.type="polyline",e["a"]=s},d4c6:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return Object(i["a"])(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),n=0;n<t.length;n++)e=e||t[n].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),r["b"].prototype.getBoundingRect.call(this)},e}(r["b"]);e["a"]=o},d51b:function(t,e,n){"use strict";var i=function(){function t(t){this.value=t}return t}(),r=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new i(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),o=function(){function t(t){this._list=new r,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var n=this._list,r=this._map,o=null;if(null==r[t]){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete r[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=e:s=new i(e),s.key=t,n.insertEntry(s),r[t]=s}return o},t.prototype.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}();e["a"]=o},d532:function(t,e,n){(function(t){n("cb29");var e=t.fabric||(t.fabric={});e.EcArrow=e.util.createClass(e.Line,{type:"ecArrow",heads:[1,0],initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.ctx=t,this.callSuper("_render",t);var e=this.calcLinePoints(),n=this.x2-this.x1,i=this.y2-this.y1,r=Math.atan2(i,n);this.drawEcArrow(r,e.x2,e.y2,this.heads[0]),n=-this.x2+this.x1,i=-this.y2+this.y1,r=Math.atan2(i,n),this.drawEcArrow(r,e.x1,e.y1,this.heads[1])},drawEcArrow:function(t,e,n,i){if(this.ctx.save(),i){var r=3*this.strokeWidth,o=2.5*this.strokeWidth;1===this.strokeWidth&&(r=8,o=6),this.ctx.translate(e,n),this.ctx.rotate(t),this.ctx.beginPath(),this.ctx.moveTo(r,0),this.ctx.lineTo(-o,o),this.ctx.lineTo(-o,-o),this.ctx.closePath()}this.ctx.fillStyle=this.stroke,this.ctx.fill(),this.ctx.restore()}}),e.EcArrow.fromObject=function(t,n){n&&n(new e.EcArrow([t.x1,t.y1,t.x2,t.y2],t))},e.EcArrow.async=!0}).call(this,n("c8ba"))},d5b7:function(t,e,n){"use strict";var i=n("8582"),r=n("06ad"),o=n("9850"),a=n("6fd3"),s=n("e86a"),l=n("6d8b"),c=n("2cf4"),u=n("41ef"),h=n("22d1"),f=n("4bc4"),d="__zr_normal__",p=["x","y","scaleX","scaleY","originX","originY","rotation","ignore"],g={x:!0,y:!0,scaleX:!0,scaleY:!0,originX:!0,originY:!0,rotation:!0,ignore:!1},m={},v=new o["a"](0,0,0,0),y=function(){function t(t){this.id=Object(l["p"])(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,r=e.innerTransformable,o=void 0,a=void 0,l=!1;r.parent=i?this:null;var c=!1;if(r.copyTransform(e),null!=n.position){var u=v;n.layoutRect?u.copy(n.layoutRect):u.copy(this.getBoundingRect()),i||u.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(m,n,u):Object(s["d"])(m,n,u),r.x=m.x,r.y=m.y,o=m.align,a=m.verticalAlign;var h=n.origin;if(h&&null!=n.rotation){var d=void 0,p=void 0;"center"===h?(d=.5*u.width,p=.5*u.height):(d=Object(s["h"])(h[0],u.width),p=Object(s["h"])(h[1],u.height)),c=!0,r.originX=-r.x+d+(i?0:u.x),r.originY=-r.y+p+(i?0:u.y)}}null!=n.rotation&&(r.rotation=n.rotation);var g=n.offset;g&&(r.x+=g[0],r.y+=g[1],c||(r.originX=-g[0],r.originY=-g[1]));var y=null==n.inside?"string"===typeof n.position&&n.position.indexOf("inside")>=0:n.inside,_=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),b=void 0,x=void 0,w=void 0;y&&this.canBeInsideText()?(b=n.insideFill,x=n.insideStroke,null!=b&&"auto"!==b||(b=this.getInsideTextFill()),null!=x&&"auto"!==x||(x=this.getInsideTextStroke(b),w=!0)):(b=n.outsideFill,x=n.outsideStroke,null!=b&&"auto"!==b||(b=this.getOutsideFill()),null!=x&&"auto"!==x||(x=this.getOutsideStroke(b),w=!0)),b=b||"#000",b===_.fill&&x===_.stroke&&w===_.autoStroke&&o===_.align&&a===_.verticalAlign||(l=!0,_.fill=b,_.stroke=x,_.autoStroke=w,_.align=o,_.verticalAlign=a,e.setDefaultTextStyle(_)),e.__dirty|=f["a"],l&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?c["d"]:c["a"]},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n="string"===typeof e&&Object(u["parse"])(e);n||(n=[255,255,255,1]);for(var i=n[3],r=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(r?0:255)*(1-i);return n[3]=1,Object(u["stringify"])(n,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},Object(l["m"])(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"===typeof t)this.attrKV(t,e);else if(Object(l["A"])(t))for(var n=t,i=Object(l["F"])(n),r=0;r<i.length;r++){var o=i[r];this.attrKV(o,t[o])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],r=i.__fromStateTransition;if(!r||r===d){var o=i.targetName,a=o?e[o]:e;i.saveFinalToTarget(a)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,p)},t.prototype._savePrimaryToNormal=function(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null==t[r]||r in e||(e[r]=this[r])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState(d,!1,t)},t.prototype.useState=function(t,e,n,i){var r=t===d,o=this.hasState();if(o||!r){var a=this.currentStates,s=this.stateTransition;if(!(Object(l["r"])(a,t)>=0)||!e&&1!==a.length){var c;if(this.stateProxy&&!r&&(c=this.stateProxy(t)),c||(c=this.states&&this.states[t]),c||r){r||this.saveCurrentToNormalState(c);var u=!!(c&&c.hoverLayer||i);u&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,c,this._normalState,e,!n&&!this.__inHover&&s&&s.duration>0,s);var h=this._textContent,p=this._textGuide;return h&&h.useState(t,e,n,u),p&&p.useState(t,e,n,u),r?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!u&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~f["a"]),c}Object(l["G"])("State "+t+" not exists.")}}},t.prototype.useStates=function(t,e,n){if(t.length){var i=[],r=this.currentStates,o=t.length,a=o===r.length;if(a)for(var s=0;s<o;s++)if(t[s]!==r[s]){a=!1;break}if(a)return;for(s=0;s<o;s++){var l=t[s],c=void 0;this.stateProxy&&(c=this.stateProxy(l,t)),c||(c=this.states[l]),c&&i.push(c)}var u=i[o-1],h=!!(u&&u.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&p&&p.duration>0,p);var g=this._textContent,m=this._textGuide;g&&g.useStates(t,e,h),m&&m.useStates(t,e,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~f["a"])}else this.clearStates()},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=Object(l["r"])(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},t.prototype.replaceState=function(t,e,n){var i=this.currentStates.slice(),r=Object(l["r"])(i,t),o=Object(l["r"])(i,e)>=0;r>=0?o?i.splice(r,1):i[r]=e:n&&!o&&i.push(e),this.useStates(i)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,n={},i=0;i<t.length;i++){var r=t[i];Object(l["m"])(n,r),r.textConfig&&(e=e||{},Object(l["m"])(e,r.textConfig))}return e&&(n.textConfig=e),n},t.prototype._applyStateObj=function(t,e,n,i,r,o){var a=!(e&&i);e&&e.textConfig?(this.textConfig=Object(l["m"])({},i?this.textConfig:n.textConfig),Object(l["m"])(this.textConfig,e.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var s={},c=!1,u=0;u<p.length;u++){var h=p[u],f=r&&g[h];e&&null!=e[h]?f?(c=!0,s[h]=e[h]):this[h]=e[h]:a&&null!=n[h]&&(f?(c=!0,s[h]=n[h]):this[h]=n[h])}if(!r)for(u=0;u<this.animators.length;u++){var d=this.animators[u],m=d.targetName;d.__changeFinalValue(m?(e||n)[m]:e||n)}c&&this._transitionState(t,s,o)},t.prototype._attachComponent=function(t){if(t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");if(t===this)throw new Error("Recursive component attachment.");var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;if(e!==t){if(e&&e!==t&&this.removeTextContent(),t.__zr&&!t.__hostTarget)throw new Error("Text element has been added to zrender.");t.innerTransformable=new i["a"],this._attachComponent(t),this._textContent=t,this.markRedraw()}},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Object(l["m"])(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=f["a"];var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,e){var n=t?this[t]:this;if(n){var i=new r["b"](n,e);return this.addAnimator(i,t),i}Object(l["G"])('Property "'+t+'" is not existed in element '+this.id)},t.prototype.addAnimator=function(t,e){var n=this.__zr,i=this;t.during((function(){i.updateDuringAnimation(e)})).done((function(){var e=i.animators,n=Object(l["r"])(e,t);n>=0&&e.splice(n,1)})),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var n=this.animators,i=n.length,r=[],o=0;o<i;o++){var a=n[o];t&&t!==a.scope?r.push(a):a.stop(e)}return this.animators=r,this},t.prototype.animateTo=function(t,e,n){_(this,t,e,n)},t.prototype.animateFrom=function(t,e,n){_(this,t,e,n,!0)},t.prototype._transitionState=function(t,e,n,i){for(var r=_(this,e,n,i),o=0;o<r.length;o++)r[o].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;e.type="element",e.name="",e.ignore=!1,e.silent=!1,e.isGroup=!1,e.draggable=!1,e.dragging=!1,e.ignoreClip=!1,e.__inHover=!1,e.__dirty=f["a"];var n={};function i(t,e,i){n[t+e+i]||(console.warn("DEPRECATED: '"+t+"' has been deprecated. use '"+e+"', '"+i+"' instead"),n[t+e+i]=!0)}function r(t,n,r,o){function a(t,e){Object.defineProperty(e,0,{get:function(){return t[r]},set:function(e){t[r]=e}}),Object.defineProperty(e,1,{get:function(){return t[o]},set:function(e){t[o]=e}})}Object.defineProperty(e,t,{get:function(){if(i(t,r,o),!this[n]){var e=this[n]=[];a(this,e)}return this[n]},set:function(e){i(t,r,o),this[r]=e[0],this[o]=e[1],this[n]=e,a(this,e)}})}Object.defineProperty&&(!h["a"].browser.ie||h["a"].browser.version>8)&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),t}();function _(t,e,n,i,r){n=n||{};var o=[];S(t,"",t,e,n,i,o,r);var a=o.length,s=!1,l=n.done,c=n.aborted,u=function(){s=!0,a--,a<=0&&(s?l&&l():c&&c())},h=function(){a--,a<=0&&(s?l&&l():c&&c())};a||l&&l(),o.length>0&&n.during&&o[0].during((function(t,e){n.during(e)}));for(var f=0;f<o.length;f++){var d=o[f];u&&d.done(u),h&&d.aborted(h),d.start(n.easing,n.force)}return o}function b(t,e,n){for(var i=0;i<n;i++)t[i]=e[i]}function x(t){return Object(l["u"])(t[0])}function w(t,e,n){if(Object(l["u"])(e[n]))if(Object(l["u"])(t[n])||(t[n]=[]),Object(l["E"])(e[n])){var i=e[n].length;t[n].length!==i&&(t[n]=new e[n].constructor(i),b(t[n],e[n],i))}else{var r=e[n],o=t[n],a=r.length;if(x(r))for(var s=r[0].length,c=0;c<a;c++)o[c]?b(o[c],r[c],s):o[c]=Array.prototype.slice.call(r[c]);else b(o,r,a);o.length=r.length}else t[n]=e[n]}function S(t,e,n,i,o,a,s,c){for(var u=[],h=[],f=Object(l["F"])(i),d=o.duration,p=o.delay,g=o.additive,m=o.setToFinal,v=!Object(l["A"])(a),y=0;y<f.length;y++){var _=f[y];if(null!=n[_]&&null!=i[_]&&(v||a[_]))if(Object(l["A"])(i[_])&&!Object(l["u"])(i[_])){if(e){c||(n[_]=i[_],t.updateDuringAnimation(e));continue}S(t,_,n[_],i[_],o,a&&a[_],s,c)}else u.push(_),h.push(_);else c||(n[_]=i[_],t.updateDuringAnimation(e),h.push(_))}var b=u.length;if(b>0||o.force&&!s.length){for(var x=t.animators,T=[],O=0;O<x.length;O++)x[O].targetName===e&&T.push(x[O]);if(!g&&T.length)for(O=0;O<T.length;O++){var C=T[O].stopTracks(h);if(C){var M=Object(l["r"])(x,T[O]);x.splice(M,1)}}var A=void 0,D=void 0,E=void 0;if(c){D={},m&&(A={});for(O=0;O<b;O++){_=u[O];D[_]=n[_],m?A[_]=i[_]:n[_]=i[_]}}else if(m){E={};for(O=0;O<b;O++){_=u[O];E[_]=Object(r["a"])(n[_]),w(n,i,_)}}var I=new r["b"](n,!1,g?T:null);I.targetName=e,o.scope&&(I.scope=o.scope),m&&A&&I.whenWithKeys(0,A,u),E&&I.whenWithKeys(0,E,u),I.whenWithKeys(null==d?500:d,c?D:i,u).delay(p||0),t.addAnimator(I,e),s.push(I)}}Object(l["K"])(y,a["a"]),Object(l["K"])(y,i["a"]),e["a"]=y},d612:function(t,e,n){var i=n("7b83"),r=n("7ed2"),o=n("dc0f");function a(t){var e=-1,n=null==t?0:t.length;this.__data__=new i;while(++e<n)this.add(t[e])}a.prototype.add=a.prototype.push=r,a.prototype.has=o,t.exports=a},d728:function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcMonitor=e.util.createClass(e.Object,{type:"ecMonitor",stateProperties:e.Object.prototype.stateProperties.concat(["text","fill"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","fill"]),text:"在线监测",monitor:{lineColor:"#999"},updateScript:"function(value, item, data, components){\n  var dataObj = {\n    Fault: 0,\n    On: 0\n  }\n  let pointArr = Reflect.ownKeys(dataObj) //测点数组\n  var tagName = eTagFilter(item.tag).tag //处理标签\n  var rawData = data.filter(e => eTagFilter(e.TagName).tag  = tagName)//找到该柜号的所有数据\n  //柜号所有的测点数据\n  rawData.forEach(raw => {\n    //根据测点进行判断,测点包含在测点数组中,则进行写值\n    let point = eTagFilter(raw.TagName).point\n    if (pointArr.includes(point)) {\n      dataObj[point] = +raw.TagValue\n    }\n  });\n  //根据得到的值进行判断\n  if(Number(dataObj['Fault'])) {\n    //故障设置黄色\n    item.set({\n      fill: '#ff0'\n    })\n  } else {\n    if(Number(dataObj['On'])) {\n      //合闸红色\n      item.set({\n        fill: '#f00'\n      })\n    } else {\n      //分闸绿色\n      item.set({\n        fill: '#0f0'\n      })\n    }\n  }\n  return true\n}",initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){t.save(),this.ctx=t,this.callSuper("_render",t);var e=-this.width/2,n=(this.height,-this.width/4),i=-n,r=n,o=-n,a=-this.height/4;this.ctx.beginPath(),this.ctx.moveTo(e,0),this.ctx.lineTo(n,0),this.ctx.strokeStyle=this.monitor.lineColor,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(-e,0),this.ctx.lineTo(i,0),this.ctx.strokeStyle=this.monitor.lineColor,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(r,a),this.ctx.lineTo(o,a),this.ctx.lineTo(o,-a),this.ctx.lineTo(-o,-a),this.ctx.lineTo(r,a),this.ctx.strokeStyle=this.monitor.lineColor,this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,a),this.ctx.lineTo(o,a),this.ctx.lineTo(o,-a),this.ctx.lineTo(0,-a),this.ctx.lineTo(0,a),this.ctx.fillStyle=this.fill,this.ctx.fill(),t.beginPath(),t.fill(),t.closePath(),t.restore()}}),e.EcMonitor.fromObject=function(t,n){n&&n(new e.EcMonitor(t))}}).call(this,n("c8ba"))},d784:function(t,e,n){"use strict";n("ac1f");var i=n("6eeb"),r=n("d039"),o=n("b622"),a=n("9263"),s=n("9112"),l=o("species"),c=!r((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),h=o("replace"),f=function(){return!!/./[h]&&""===/./[h]("a","$0")}(),d=!r((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));t.exports=function(t,e,n,h){var p=o(t),g=!r((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),m=g&&!r((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[l]=function(){return n},n.flags="",n[p]=/./[p]),n.exec=function(){return e=!0,null},n[p](""),!e}));if(!g||!m||"replace"===t&&(!c||!u||f)||"split"===t&&!d){var v=/./[p],y=n(p,""[t],(function(t,e,n,i,r){return e.exec===a?g&&!r?{done:!0,value:v.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),_=y[0],b=y[1];i(String.prototype,t,_),i(RegExp.prototype,p,2==e?function(t,e){return b.call(t,this,e)}:function(t){return b.call(t,this)})}h&&s(RegExp.prototype[p],"sham",!0)}},d81d:function(t,e,n){"use strict";var i=n("23e7"),r=n("b727").map,o=n("1dde"),a=o("map");i({target:"Array",proto:!0,forced:!a},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},d925:function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},d92e:function(t,e,n){(function(t){n("99af"),n("a9e3"),n("cb29");var e=t.fabric||(t.fabric={});e.EcProgress=e.util.createClass(e.Rect,{type:"ecProgress",stateProperties:e.Object.prototype.stateProperties.concat(["progressTotal","progressColor","text"]),cacheProperties:e.Object.prototype.stateProperties.concat(["progressTotal","progressColor","text"]),text:6,progressTotal:10,progressColor:"#07ef2e",percentage:1,initialize:function(t){t||(t={}),this.callSuper("initialize",t)},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t),t.save(),this.ctx=t;var e=5,n=Number(this.progressTotal);e=Number(this.text),this.percentage=e/n,this.percentage>1&&(this.percentage=1);var i=this.height/2-this.height*this.percentage,r=this.strokeWidth/2,o=-this.width/2,a=-this.height/2;t.beginPath(),t.moveTo(o+r,i+r),t.lineTo(-o-r,i+r),t.lineTo(-o-r,-a-r),t.lineTo(o+r,-a-r),t.lineTo(o+r,i+r),t.fillStyle=this.progressColor,t.fill();var s=this.rx?Math.min(this.rx,this.width/2):0,l=this.ry?Math.min(this.ry,this.height/2):0,c=this.width,u=this.height,h=0!==s||0!==l,f=.4477152502;t.moveTo(o+s,a),t.lineTo(o+c-s,a),h&&t.bezierCurveTo(o+c-f*s,a,o+c,a+f*l,o+c,a+l),t.lineTo(o+c,a+u-l),h&&t.bezierCurveTo(o+c,a+u-f*l,o+c-f*s,a+u,o+c-s,a+u),t.lineTo(o+s,a+u),h&&t.bezierCurveTo(o+f*s,a+u,o,a+u-f*l,o,a+u-l),t.lineTo(o,a+l),h&&t.bezierCurveTo(o,a+f*l,o+f*s,a,o+s,a),t.closePath(),t.restore()},_toSVG:function(){var t=-this.width/2,e=-this.height/2,n=this.height/2-this.height*this.percentage,i=this.strokeWidth/2;return["<rect ","COMMON_PARTS",'x="',t,'" y="',e,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n',"<rect ",'x="',t+i,'" y="',n+i,'" width="',this.width-this.strokeWidth,'" height="',this.height*this.percentage-this.strokeWidth,'" fill="',this.progressColor,'" />\n']}}),e.EcProgress.fromObject=function(t,n){n&&n(new e.EcProgress(t))}}).call(this,n("c8ba"))},d9a8:function(t,e){function n(t){return t!==t}t.exports=n},d9fc:function(t,e,n){"use strict";var i=n("21a1"),r=n("cbe5"),o=function(){function t(){this.cx=0,this.cy=0,this.r=0}return t}(),a=function(t){function e(e){return t.call(this,e)||this}return Object(i["a"])(e,t),e.prototype.getDefaultShape=function(){return new o},e.prototype.buildPath=function(t,e,n){n&&t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(r["b"]);a.prototype.type="circle",e["a"]=a},da03:function(t,e,n){var i=n("2b3e"),r=i["__core-js_shared__"];t.exports=r},da84:function(t,e,n){(function(e){var n=function(t){return t&&t.Math==Math&&t};t.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof e&&e)||function(){return this}()||Function("return this")()}).call(this,n("c8ba"))},dc0f:function(t,e){function n(t){return this.__data__.has(t)}t.exports=n},dc57:function(t,e){var n=Function.prototype,i=n.toString;function r(t){if(null!=t){try{return i.call(t)}catch(e){}try{return t+""}catch(e){}}return""}t.exports=r},dce8:function(t,e,n){"use strict";var i=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,n){t.x=e,t.y=n},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},t.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},t.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},t.scaleAndAdd=function(t,e,n,i){t.x=e.x+n.x*i,t.y=e.y+n.y*i},t.lerp=function(t,e,n,i){var r=1-i;t.x=r*e.x+i*n.x,t.y=r*e.y+i*n.y},t}();e["a"]=i},dd4f:function(t,e,n){"use strict";var i=n("21a1"),r=n("19eb"),o=n("e86a"),a=n("cbe5"),s=n("6d8b"),l=Object(s["j"])({strokeFirst:!0,font:o["a"],x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},a["a"]),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i["a"])(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style,e=t.fill;return null!=e&&"none"!==e},e.prototype.createStyle=function(t){return Object(s["h"])(l,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var n=Object(o["e"])(e,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var i=t.lineWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect},e.initDefaultProps=function(){var t=e.prototype;t.dirtyRectTolerance=10}(),e}(r["c"]);c.prototype.type="tspan",e["a"]=c},ddb0:function(t,e,n){var i=n("da84"),r=n("fdbc"),o=n("e260"),a=n("9112"),s=n("b622"),l=s("iterator"),c=s("toStringTag"),u=o.values;for(var h in r){var f=i[h],d=f&&f.prototype;if(d){if(d[l]!==u)try{a(d,l,u)}catch(g){d[l]=u}if(d[c]||a(d,c,h),r[h])for(var p in o)if(d[p]!==o[p])try{a(d,p,o[p])}catch(g){d[p]=o[p]}}}},dded:function(t,e,n){"use strict";var i=n("21a1"),r=n("42e5"),o=function(t){function e(e,n,i,r,o){var a=t.call(this,r)||this;return a.x=null==e?.5:e,a.y=null==n?.5:n,a.r=null==i?.5:i,a.type="radial",a.global=o||!1,a}return Object(i["a"])(e,t),e}(r["a"]);e["a"]=o},deab:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"h",(function(){return l})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"f",(function(){return d})),n.d(e,"g",(function(){return p})),n.d(e,"b",(function(){return g}));var i=n("6d8b"),r=n("e0d3"),o=Object(r["o"])();function a(t,e,n,r,o){var a;if(e&&e.ecModel){var s=e.ecModel.getUpdatePayload();a=s&&s.animation}var l=e&&e.isAnimationEnabled(),c="update"===t;if(l){var u=void 0,h=void 0,f=void 0;r?(u=Object(i["P"])(r.duration,200),h=Object(i["P"])(r.easing,"cubicOut"),f=0):(u=e.getShallow(c?"animationDurationUpdate":"animationDuration"),h=e.getShallow(c?"animationEasingUpdate":"animationEasing"),f=e.getShallow(c?"animationDelayUpdate":"animationDelay")),a&&(null!=a.duration&&(u=a.duration),null!=a.easing&&(h=a.easing),null!=a.delay&&(f=a.delay)),"function"===typeof f&&(f=f(n,o)),"function"===typeof u&&(u=u(n));var d={duration:u||0,delay:f,easing:h};return d}return null}function s(t,e,n,r,o,s,l){var c,u=!1;"function"===typeof o?(l=s,s=o,o=null):Object(i["A"])(o)&&(s=o.cb,l=o.during,u=o.isFrom,c=o.removeOpt,o=o.dataIndex);var h="remove"===t;h||e.stopAnimation("remove");var f=a(t,r,o,h?c||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(e,o):null);if(f&&f.duration>0){var d=f.duration,p=f.delay,g=f.easing,m={duration:d,delay:p||0,easing:g,done:s,force:!!s||!!l,setToFinal:!h,scope:t,during:l};u?e.animateFrom(n,m):e.animateTo(n,m)}else e.stopAnimation(),!u&&e.attr(n),l&&l(1),s&&s()}function l(t,e,n,i,r,o){s("update",t,e,n,i,r,o)}function c(t,e,n,i,r,o){s("init",t,e,n,i,r,o)}function u(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++){var n=t.animators[e];if("remove"===n.scope)return!0}return!1}function h(t,e,n,i,r,o){u(t)||s("remove",t,e,n,i,r,o)}function f(t,e,n,i){t.removeTextContent(),t.removeTextGuideLine(),h(t,{style:{opacity:0}},e,n,i)}function d(t,e,n){function i(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse((function(t){t.isGroup||f(t,e,n,i)})):f(t,e,n,i)}function p(t){o(t).oldStyle=t.style}function g(t){return o(t).oldStyle}},df75:function(t,e,n){var i=n("ca84"),r=n("7839");t.exports=Object.keys||function(t){return i(t,r)}},df7c:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var r=t[i];"."===r?t.splice(i,1):".."===r?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function i(t){"string"!==typeof t&&(t+="");var e,n=0,i=-1,r=!0;for(e=t.length-1;e>=0;--e)if(47===t.charCodeAt(e)){if(!r){n=e+1;break}}else-1===i&&(r=!1,i=e+1);return-1===i?"":t.slice(n,i)}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var a=o>=0?arguments[o]:t.cwd();if("string"!==typeof a)throw new TypeError("Arguments to path.resolve must be strings");a&&(e=a+"/"+e,i="/"===a.charAt(0))}return e=n(r(e.split("/"),(function(t){return!!t})),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),a="/"===o(t,-1);return t=n(r(t.split("/"),(function(t){return!!t})),!i).join("/"),t||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,(function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var r=i(t.split("/")),o=i(n.split("/")),a=Math.min(r.length,o.length),s=a,l=0;l<a;l++)if(r[l]!==o[l]){s=l;break}var c=[];for(l=s;l<r.length;l++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){if("string"!==typeof t&&(t+=""),0===t.length)return".";for(var e=t.charCodeAt(0),n=47===e,i=-1,r=!0,o=t.length-1;o>=1;--o)if(e=t.charCodeAt(o),47===e){if(!r){i=o;break}}else r=!1;return-1===i?n?"/":".":n&&1===i?"/":t.slice(0,i)},e.basename=function(t,e){var n=i(t);return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){"string"!==typeof t&&(t+="");for(var e=-1,n=0,i=-1,r=!0,o=0,a=t.length-1;a>=0;--a){var s=t.charCodeAt(a);if(47!==s)-1===i&&(r=!1,i=a+1),46===s?-1===e?e=a:1!==o&&(o=1):-1!==e&&(o=-1);else if(!r){n=a+1;break}}return-1===e||-1===i||0===o||1===o&&e===i-1&&e===n+1?"":t.slice(e,i)};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},e01a:function(t,e,n){"use strict";var i=n("23e7"),r=n("83ab"),o=n("da84"),a=n("5135"),s=n("861d"),l=n("9bf2").f,c=n("e893"),u=o.Symbol;if(r&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var h={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new u(t):void 0===t?u():u(t);return""===t&&(h[e]=!0),e};c(f,u);var d=f.prototype=u.prototype;d.constructor=f;var p=d.toString,g="Symbol(test)"==String(u("test")),m=/^Symbol\((.*)\)[^)]+$/;l(d,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(a(h,t))return"";var n=g?e.slice(7,-1):e.replace(m,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:f})}},e0d3:function(t,e,n){"use strict";n.d(e,"r",(function(){return c})),n.d(e,"f",(function(){return u})),n.d(e,"c",(function(){return h})),n.d(e,"h",(function(){return f})),n.d(e,"m",(function(){return d})),n.d(e,"q",(function(){return p})),n.d(e,"e",(function(){return S})),n.d(e,"n",(function(){return T})),n.d(e,"l",(function(){return O})),n.d(e,"p",(function(){return C})),n.d(e,"x",(function(){return M})),n.d(e,"d",(function(){return D})),n.d(e,"u",(function(){return E})),n.d(e,"o",(function(){return I})),n.d(e,"s",(function(){return L})),n.d(e,"t",(function(){return k})),n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return R})),n.d(e,"v",(function(){return N})),n.d(e,"w",(function(){return B})),n.d(e,"g",(function(){return F})),n.d(e,"i",(function(){return z})),n.d(e,"j",(function(){return V})),n.d(e,"k",(function(){return H}));var i=n("6d8b"),r=n("22d1"),o=n("3842"),a=n("06ad"),s="series\0",l="\0_ec_\0";function c(t){return t instanceof Array?t:null==t?[]:[t]}function u(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var o=n[i];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var h=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function f(t){return!Object(i["A"])(t)||Object(i["t"])(t)||t instanceof Date?t:t.value}function d(t){return Object(i["A"])(t)&&!(t instanceof Array)}function p(t,e,n){var r="normalMerge"===n,o="replaceMerge"===n,a="replaceAll"===n;t=t||[],e=(e||[]).slice();var s=Object(i["g"])();Object(i["k"])(e,(function(t,n){Object(i["A"])(t)||(e[n]=null)}));var l=g(t,s,n);return(r||o)&&m(l,t,s,e),r&&v(l,e),r||o?y(l,e,o):a&&_(l,e),b(l),l}function g(t,e,n){var i=[];if("replaceAll"===n)return i;for(var r=0;r<t.length;r++){var o=t[r];o&&null!=o.id&&e.set(o.id,r),i.push({existing:"replaceMerge"===n||O(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}function m(t,e,n,r){Object(i["k"])(r,(function(o,a){if(o&&null!=o.id){var s=w(o.id),l=n.get(s);if(null!=l){var c=t[l];Object(i["b"])(!c.newOption,'Duplicated option on id "'+s+'".'),c.newOption=o,c.existing=e[l],r[a]=null}}}))}function v(t,e){Object(i["k"])(e,(function(n,i){if(n&&null!=n.name)for(var r=0;r<t.length;r++){var o=t[r].existing;if(!t[r].newOption&&o&&(null==o.id||null==n.id)&&!O(n)&&!O(o)&&x("name",o,n))return t[r].newOption=n,void(e[i]=null)}}))}function y(t,e,n){Object(i["k"])(e,(function(e){if(e){var i,r=0;while((i=t[r])&&(i.newOption||O(i.existing)||i.existing&&null!=e.id&&!x("id",e,i.existing)))r++;i?(i.newOption=e,i.brandNew=n):t.push({newOption:e,brandNew:n,existing:null,keyInfo:null}),r++}}))}function _(t,e){Object(i["k"])(e,(function(e){t.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})}))}function b(t){var e=Object(i["g"])();Object(i["k"])(t,(function(t){var n=t.existing;n&&e.set(n.id,t)})),Object(i["k"])(t,(function(t){var n=t.newOption;Object(i["b"])(!n||null==n.id||!e.get(n.id)||e.get(n.id)===t,"id duplicates: "+(n&&n.id)),n&&null!=n.id&&e.set(n.id,t),!t.keyInfo&&(t.keyInfo={})})),Object(i["k"])(t,(function(t,n){var r=t.existing,o=t.newOption,a=t.keyInfo;if(Object(i["A"])(o)){if(a.name=null!=o.name?w(o.name):r?r.name:s+n,r)a.id=w(r.id);else if(null!=o.id)a.id=w(o.id);else{var l=0;do{a.id="\0"+a.name+"\0"+l++}while(e.get(a.id))}e.set(a.id,t)}}))}function x(t,e,n){var i=S(e[t],null),r=S(n[t],null);return null!=i&&null!=r&&i===r}function w(t){return S(t,"")}function S(t,e){if(null==t)return e;var n=typeof t;return"string"===n?t:"number"===n||Object(i["D"])(t)?t+"":e}function T(t){var e=t.name;return!(!e||!e.indexOf(s))}function O(t){return t&&null!=t.id&&0===w(t.id).indexOf(l)}function C(t){return l+t}function M(t,e,n){Object(i["k"])(t,(function(t){var r=t.newOption;Object(i["A"])(r)&&(t.keyInfo.mainType=e,t.keyInfo.subType=A(e,r,t.existing,n))}))}function A(t,e,n,i){var r=e.type?e.type:n?n.subType:i.determineSubType(t,e);return r}function D(t,e){var n={},i={};return r(t||[],n),r(e||[],i,n),[o(n),o(i)];function r(t,e,n){for(var i=0,r=t.length;i<r;i++){var o=S(t[i].seriesId,null);if(null==o)return;for(var a=c(t[i].dataIndex),s=n&&n[o],l=0,u=a.length;l<u;l++){var h=a[l];s&&s[h]?s[h]=null:(e[o]||(e[o]={}))[h]=1}}}function o(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var r=o(t[i],!0);r.length&&n.push({seriesId:i,dataIndex:r})}return n}}function E(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?Object(i["t"])(e.dataIndex)?Object(i["H"])(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?Object(i["t"])(e.name)?Object(i["H"])(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}function I(){var t="__ec_inner_"+P++;return function(e){return e[t]||(e[t]={})}}var P=Object(o["i"])();function L(t,e,n){var i=k(e,n),r=i.mainTypeSpecified,o=i.queryOptionMap,a=i.others,s=a,l=n?n.defaultMainType:null;return!r&&l&&o.set(l,{}),o.each((function(e,i){var r=N(t,i,e,{useDefault:l===i,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});s[i+"Models"]=r.models,s[i+"Model"]=r.models[0]})),s}function k(t,e){var n;if(Object(i["C"])(t)){var r={};r[t+"Index"]=0,n=r}else n=t;var o=Object(i["g"])(),a={},s=!1;return Object(i["k"])(n,(function(t,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var r=n.match(/^(\w+)(Index|Id|Name)$/)||[],l=r[1],c=(r[2]||"").toLowerCase();if(l&&c&&!(e&&e.includeMainTypes&&Object(i["r"])(e.includeMainTypes,l)<0)){s=s||!!l;var u=o.get(l)||o.set(l,{});u[c]=t}}else a[n]=t})),{mainTypeSpecified:s,queryOptionMap:o,others:a}}var j={useDefault:!0,enableAll:!1,enableNone:!1},R={useDefault:!1,enableAll:!0,enableNone:!0};function N(t,e,n,r){r=r||j;var o=n.index,a=n.id,s=n.name,l={models:null,specified:null!=o||null!=a||null!=s};if(!l.specified){var c=void 0;return l.models=r.useDefault&&(c=t.getComponent(e))?[c]:[],l}return"none"===o||!1===o?(Object(i["b"])(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),l.models=[],l):("all"===o&&(Object(i["b"])(r.enableAll,'`"all"` is not a valid value on index option.'),o=a=s=null),l.models=t.queryComponents({mainType:e,index:o,id:a,name:s}),l)}function B(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function F(t,e){return t.getAttribute?t.getAttribute(e):t[e]}function z(t){return"auto"===t?r["a"].domSupported?"html":"richText":t||"html"}function V(t,e){var n=Object(i["g"])(),r=[];return Object(i["k"])(t,(function(t){var i=e(t);(n.get(i)||(r.push(i),n.set(i,[]))).push(t)})),{keys:r,buckets:n}}function H(t,e,n,i,r){var s=null==e||"auto"===e;if(null==i)return i;if("number"===typeof i){var l=Object(a["c"])(n||0,i,r);return Object(o["v"])(l,s?Math.max(Object(o["g"])(n||0),Object(o["g"])(i)):e)}if("string"===typeof i)return r<1?n:i;for(var c=[],u=n,h=i,f=Math.max(u?u.length:0,h.length),d=0;d<f;++d){var p=t.getDimensionInfo(d);if(p&&"ordinal"===p.type)c[d]=(r<1&&u?u:h)[d];else{var g=u&&u[d]?u[d]:0,m=h[d];l=Object(a["c"])(g,m,r);c[d]=Object(o["v"])(l,s?Math.max(Object(o["g"])(g),Object(o["g"])(m)):e)}}return c}},e0d8:function(t,e,n){"use strict";var i=n("625e"),r=function(){function t(t){this._setting=t||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},t.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();i["c"](r),e["a"]=r},e163:function(t,e,n){var i=n("5135"),r=n("7b0b"),o=n("f772"),a=n("e177"),s=o("IE_PROTO"),l=Object.prototype;t.exports=a?Object.getPrototypeOf:function(t){return t=r(t),i(t,s)?t[s]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?l:null}},e177:function(t,e,n){var i=n("d039");t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},e24b:function(t,e,n){var i=n("49f4"),r=n("1efc"),o=n("bbc0"),a=n("7a48"),s=n("2524");function l(t){var e=-1,n=null==t?0:t.length;this.clear();while(++e<n){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype["delete"]=r,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,t.exports=l},e260:function(t,e,n){"use strict";var i=n("fc6a"),r=n("44d2"),o=n("3f8c"),a=n("69f3"),s=n("7dd0"),l="Array Iterator",c=a.set,u=a.getterFor(l);t.exports=s(Array,"Array",(function(t,e){c(this,{type:l,target:i(t),index:0,kind:e})}),(function(){var t=u(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},e263:function(t,e,n){"use strict";n.d(e,"d",(function(){return d})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return v})),n.d(e,"e",(function(){return y})),n.d(e,"a",(function(){return _}));var i=n("401b"),r=n("4a3f"),o=Math.min,a=Math.max,s=Math.sin,l=Math.cos,c=2*Math.PI,u=i["e"](),h=i["e"](),f=i["e"]();function d(t,e,n){if(0!==t.length){for(var i=t[0],r=i[0],s=i[0],l=i[1],c=i[1],u=1;u<t.length;u++)i=t[u],r=o(r,i[0]),s=a(s,i[0]),l=o(l,i[1]),c=a(c,i[1]);e[0]=r,e[1]=l,n[0]=s,n[1]=c}}function p(t,e,n,i,r,s){r[0]=o(t,n),r[1]=o(e,i),s[0]=a(t,n),s[1]=a(e,i)}var g=[],m=[];function v(t,e,n,i,s,l,c,u,h,f){var d=r["c"],p=r["a"],v=d(t,n,s,c,g);h[0]=1/0,h[1]=1/0,f[0]=-1/0,f[1]=-1/0;for(var y=0;y<v;y++){var _=p(t,n,s,c,g[y]);h[0]=o(_,h[0]),f[0]=a(_,f[0])}v=d(e,i,l,u,m);for(y=0;y<v;y++){var b=p(e,i,l,u,m[y]);h[1]=o(b,h[1]),f[1]=a(b,f[1])}h[0]=o(t,h[0]),f[0]=a(t,f[0]),h[0]=o(c,h[0]),f[0]=a(c,f[0]),h[1]=o(e,h[1]),f[1]=a(e,f[1]),h[1]=o(u,h[1]),f[1]=a(u,f[1])}function y(t,e,n,i,s,l,c,u){var h=r["j"],f=r["h"],d=a(o(h(t,n,s),1),0),p=a(o(h(e,i,l),1),0),g=f(t,n,s,d),m=f(e,i,l,p);c[0]=o(t,s,g),c[1]=o(e,l,m),u[0]=a(t,s,g),u[1]=a(e,l,m)}function _(t,e,n,r,o,a,d,p,g){var m=i["l"],v=i["k"],y=Math.abs(o-a);if(y%c<1e-4&&y>1e-4)return p[0]=t-n,p[1]=e-r,g[0]=t+n,void(g[1]=e+r);if(u[0]=l(o)*n+t,u[1]=s(o)*r+e,h[0]=l(a)*n+t,h[1]=s(a)*r+e,m(p,u,h),v(g,u,h),o%=c,o<0&&(o+=c),a%=c,a<0&&(a+=c),o>a&&!d?a+=c:o<a&&d&&(o+=c),d){var _=a;a=o,o=_}for(var b=0;b<a;b+=Math.PI/2)b>o&&(f[0]=l(b)*n+t,f[1]=s(b)*r+e,m(p,f,p),v(g,f,g))}},e2c0:function(t,e,n){var i=n("e2e4"),r=n("d370"),o=n("6747"),a=n("c098"),s=n("b218"),l=n("f4d6");function c(t,e,n){e=i(e,t);var c=-1,u=e.length,h=!1;while(++c<u){var f=l(e[c]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++c!=u?h:(u=null==t?0:t.length,!!u&&s(u)&&a(f,u)&&(o(t)||r(t)))}t.exports=c},e2cc:function(t,e,n){var i=n("6eeb");t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},e2e4:function(t,e,n){var i=n("6747"),r=n("f608"),o=n("18d8"),a=n("76dd");function s(t,e){return i(t)?t:r(t,e)?[t]:o(a(t))}t.exports=s},e380:function(t,e,n){var i=n("7b83"),r="Expected a function";function o(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(r);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var a=t.apply(this,i);return n.cache=o.set(r,a)||o,a};return n.cache=new(o.Cache||i),n}o.Cache=i,t.exports=o},e39c:function(t,e,n){"use strict";var i=n("3eba");function r(t,e,n){"object"==typeof e&&(n=e,e=null);var i,r=this;if(!(t instanceof Function))for(var s in i=[],t)t.hasOwnProperty(s)&&i.push(s);var l=function(e){if(r.apply(this,arguments),t instanceof Function?o(this,t.call(this,e)):a(this,t,i),this.constructor===l)for(var n=l.__initializers__,s=0;s<n.length;s++)n[s].apply(this,arguments)};l.__super__=r,r.__initializers__?l.__initializers__=r.__initializers__.slice():l.__initializers__=[],e&&l.__initializers__.push(e);var c=function(){};return c.prototype=r.prototype,l.prototype=new c,l.prototype.constructor=l,o(l.prototype,n),l.extend=r.extend,l.derive=r.extend,l}function o(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function a(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];t[r]=e[r]}}var s={extend:r,derive:r};function l(t,e){this.action=t,this.context=e}var c={trigger:function(t){if(this.hasOwnProperty("__handlers__")&&this.__handlers__.hasOwnProperty(t)){var e=this.__handlers__[t],n=e.length,i=-1,r=arguments;switch(r.length){case 1:while(++i<n)e[i].action.call(e[i].context);return;case 2:while(++i<n)e[i].action.call(e[i].context,r[1]);return;case 3:while(++i<n)e[i].action.call(e[i].context,r[1],r[2]);return;case 4:while(++i<n)e[i].action.call(e[i].context,r[1],r[2],r[3]);return;case 5:while(++i<n)e[i].action.call(e[i].context,r[1],r[2],r[3],r[4]);return;default:while(++i<n)e[i].action.apply(e[i].context,Array.prototype.slice.call(r,1));return}}},on:function(t,e,n){if(t&&e){var i=this.__handlers__||(this.__handlers__={});if(i[t]){if(this.has(t,e))return}else i[t]=[];var r=new l(e,n||this);return i[t].push(r),this}},once:function(t,e,n){if(t&&e){var i=this;return this.on(t,r,n)}function r(){i.off(t,r),e.apply(this,arguments)}},before:function(t,e,n){if(t&&e)return t="before"+t,this.on(t,e,n)},after:function(t,e,n){if(t&&e)return t="after"+t,this.on(t,e,n)},success:function(t,e){return this.once("success",t,e)},error:function(t,e){return this.once("error",t,e)},off:function(t,e){var n=this.__handlers__||(this.__handlers__={});if(e){if(n[t]){for(var i=n[t],r=[],o=0;o<i.length;o++)e&&i[o].action!==e&&r.push(i[o]);n[t]=r}return this}n[t]=[]},has:function(t,e){var n=this.__handlers__;if(!n||!n[t])return!1;for(var i=n[t],r=0;r<i.length;r++)if(i[r].action===e)return!0}},u=c,h=0,f=Array.prototype,d=f.forEach,p={genGUID:function(){return++h},relative2absolute:function(t,e){if(!e||t.match(/^\//))return t;var n=t.split("/"),i=e.split("/"),r=n[0];while("."===r||".."===r)".."===r&&i.pop(),n.shift(),r=n[0];return i.join("/")+"/"+n.join("/")},extend:function(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},defaults:function(t,e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n]);return t},extendWithPropList:function(t,e,n){if(e)for(var i=0;i<n.length;i++){var r=n[i];t[r]=e[r]}return t},defaultsWithPropList:function(t,e,n){if(e)for(var i=0;i<n.length;i++){var r=n[i];null==t[r]&&(t[r]=e[r])}return t},each:function(t,e,n){if(t&&e)if(t.forEach&&t.forEach===d)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)},isObject:function(t){return t===Object(t)},isArray:function(t){return Array.isArray(t)},isArrayLike:function(t){return!!t&&t.length===+t.length},clone:function(t){if(p.isObject(t)){if(p.isArray(t))return t.slice();if(p.isArrayLike(t)){for(var e=new t.constructor(t.length),n=0;n<t.length;n++)e[n]=t[n];return e}return p.extend({},t)}return t}},g=p,m=function(){this.__uid__=g.genGUID()};m.__initializers__=[function(t){g.extend(this,t)}],g.extend(m,s),g.extend(m.prototype,u);var v=m,y=["OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","OES_vertex_array_object","OES_element_index_uint","WEBGL_compressed_texture_s3tc","WEBGL_depth_texture","EXT_texture_filter_anisotropic","EXT_shader_texture_lod","WEBGL_draw_buffers","EXT_frag_depth","EXT_sRGB","ANGLE_instanced_arrays"],_=["MAX_TEXTURE_SIZE","MAX_CUBE_MAP_TEXTURE_SIZE"];function b(t){for(var e={},n={},i=0;i<y.length;i++){var r=y[i];a(r)}for(i=0;i<_.length;i++){var o=_[i];n[o]=t.getParameter(t[o])}function a(n){if(t.getExtension){var i=t.getExtension(n);i||(i=t.getExtension("MOZ_"+n)),i||(i=t.getExtension("WEBKIT_"+n)),e[n]=i}}this.getExtension=function(t){return t in e||a(t),e[t]},this.getParameter=function(t){return n[t]}}var x=b,w={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,FUNC_ADD:32774,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,BLEND_COLOR:32773,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,STREAM_DRAW:35040,STATIC_DRAW:35044,DYNAMIC_DRAW:35048,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,CULL_FACE:2884,BLEND:3042,DITHER:3024,STENCIL_TEST:2960,DEPTH_TEST:2929,SCISSOR_TEST:3089,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CW:2304,CCW:2305,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_UNIFORMS:35718,ACTIVE_ATTRIBUTES:35721,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,NOTEQUAL:517,GEQUAL:518,ALWAYS:519,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,VENDOR:7936,RENDERER:7937,VERSION:7938,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,COMPILE_STATUS:35713,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},S=n("620a"),T=function(){this.head=null,this.tail=null,this._length=0};T.prototype.insert=function(t){var e=new T.Entry(t);return this.insertEntry(e),e},T.prototype.insertAt=function(t,e){if(!(t<0)){var n=this.head,i=0;while(n&&i!=t)n=n.next,i++;if(n){var r=new T.Entry(e),o=n.prev;o?(o.next=r,r.prev=o):this.head=r,r.next=n,n.prev=r}else this.insert(e)}},T.prototype.insertBeforeEntry=function(t,e){var n=new T.Entry(t),i=e.prev;i?(i.next=n,n.prev=i):this.head=n,n.next=e,e.prev=n,this._length++},T.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,this.tail=t):this.head=this.tail=t,this._length++},T.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._length--},T.prototype.removeAt=function(t){if(!(t<0)){var e=this.head,n=0;while(e&&n!=t)e=e.next,n++;return e?(this.remove(e),e.value):void 0}},T.prototype.getHead=function(){if(this.head)return this.head.value},T.prototype.getTail=function(){if(this.tail)return this.tail.value},T.prototype.getAt=function(t){if(!(t<0)){var e=this.head,n=0;while(e&&n!=t)e=e.next,n++;return e.value}},T.prototype.indexOf=function(t){var e=this.head,n=0;while(e){if(e.value===t)return n;e=e.next,n++}},T.prototype.length=function(){return this._length},T.prototype.isEmpty=function(){return 0===this._length},T.prototype.forEach=function(t,e){var n=this.head,i=0,r="undefined"!=typeof e;while(n)r?t.call(e,n.value,i):t(n.value,i),n=n.next,i++},T.prototype.clear=function(){this.tail=this.head=null,this._length=0},T.Entry=function(t){this.value=t,this.next=null,this.prev=null};var O=T,C=function(t){this._list=new O,this._map={},this._maxSize=t||10};C.prototype.setMaxSize=function(t){this._maxSize=t},C.prototype.put=function(t,e){if(!this._map.hasOwnProperty(t)){var n=this._list.length();if(n>=this._maxSize&&n>0){var i=this._list.head;this._list.remove(i),delete this._map[i.key]}var r=this._list.insert(e);r.key=t,this._map[t]=r}},C.prototype.get=function(t){var e=this._map[t];if(this._map.hasOwnProperty(t))return e!==this._list.tail&&(this._list.remove(e),this._list.insertEntry(e)),e.value},C.prototype.remove=function(t){var e=this._map[t];"undefined"!==typeof e&&(delete this._map[t],this._list.remove(e))},C.prototype.clear=function(){this._list.clear(),this._map={}};var M=C,A={},D={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function E(t){return t=Math.round(t),t<0?0:t>255?255:t}function I(t){return t=Math.round(t),t<0?0:t>360?360:t}function P(t){return t<0?0:t>1?1:t}function L(t){return t.length&&"%"===t.charAt(t.length-1)?E(parseFloat(t)/100*255):E(parseInt(t,10))}function k(t){return t.length&&"%"===t.charAt(t.length-1)?P(parseFloat(t)/100):P(parseFloat(t))}function j(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function R(t,e,n){return t+(e-t)*n}function N(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function B(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var F=new M(20),z=null;function V(t,e){z&&B(z,e),z=F.put(t,z||e.slice())}function H(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=k(t[1]),r=k(t[2]),o=r<=.5?r*(i+1):r+i-r*i,a=2*r-o;return e=e||[],N(e,E(255*j(a,o,n+1/3)),E(255*j(a,o,n)),E(255*j(a,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function G(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a,c=(s+a)/2;if(0===l)e=0,n=0;else{n=c<.5?l/(s+a):l/(2-s-a);var u=((s-i)/6+l/2)/l,h=((s-r)/6+l/2)/l,f=((s-o)/6+l/2)/l;i===s?e=f-h:r===s?e=1/3+u-f:o===s&&(e=2/3+h-u),e<0&&(e+=1),e>1&&(e-=1)}var d=[360*e,n,c];return null!=t[3]&&d.push(t[3]),d}}A.parse=function(t,e){if(t){e=e||[];var n=F.get(t);if(n)return B(e,n);t+="";var i=t.replace(/ /g,"").toLowerCase();if(i in D)return B(e,D[i]),V(t,e),e;if("#"!==i.charAt(0)){var r=i.indexOf("("),o=i.indexOf(")");if(-1!==r&&o+1===i.length){var a=i.substr(0,r),s=i.substr(r+1,o-(r+1)).split(","),l=1;switch(a){case"rgba":if(4!==s.length)return void N(e,0,0,0,1);l=k(s.pop());case"rgb":return 3!==s.length?void N(e,0,0,0,1):(N(e,L(s[0]),L(s[1]),L(s[2]),l),V(t,e),e);case"hsla":return 4!==s.length?void N(e,0,0,0,1):(s[3]=k(s[3]),H(s,e),V(t,e),e);case"hsl":return 3!==s.length?void N(e,0,0,0,1):(H(s,e),V(t,e),e);default:return}}N(e,0,0,0,1)}else{if(4===i.length){var c=parseInt(i.substr(1),16);return c>=0&&c<=4095?(N(e,(3840&c)>>4|(3840&c)>>8,240&c|(240&c)>>4,15&c|(15&c)<<4,1),V(t,e),e):void N(e,0,0,0,1)}if(7===i.length){c=parseInt(i.substr(1),16);return c>=0&&c<=16777215?(N(e,(16711680&c)>>16,(65280&c)>>8,255&c,1),V(t,e),e):void N(e,0,0,0,1)}}}},A.parseToFloat=function(t,e){if(e=A.parse(t,e),e)return e[0]/=255,e[1]/=255,e[2]/=255,e},A.lift=function(t,e){var n=A.parse(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0;return A.stringify(n,4===n.length?"rgba":"rgb")}},A.toHex=function(t){var e=A.parse(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},A.fastLerp=function(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=e[r],s=e[o],l=i-r;return n[0]=E(R(a[0],s[0],l)),n[1]=E(R(a[1],s[1],l)),n[2]=E(R(a[2],s[2],l)),n[3]=P(R(a[3],s[3],l)),n}},A.fastMapToColor=A.fastLerp,A.lerp=function(t,e,n){if(e&&e.length&&t>=0&&t<=1){var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=A.parse(e[r]),s=A.parse(e[o]),l=i-r,c=A.stringify([E(R(a[0],s[0],l)),E(R(a[1],s[1],l)),E(R(a[2],s[2],l)),P(R(a[3],s[3],l))],"rgba");return n?{color:c,leftIndex:r,rightIndex:o,value:i}:c}},A.mapToColor=A.lerp,A.modifyHSL=function(t,e,n,i){if(t=A.parse(t),t)return t=G(t),null!=e&&(t[0]=I(e)),null!=n&&(t[1]=k(n)),null!=i&&(t[2]=k(i)),A.stringify(H(t),"rgba")},A.modifyAlpha=function(t,e){if(t=A.parse(t),t&&null!=e)return t[3]=P(e),A.stringify(t,"rgba")},A.stringify=function(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}};var U=A,W=U.parseToFloat,X={};function Y(t){var e=Object.keys(t);e.sort();for(var n=[],i=0;i<e.length;i++){var r=e[i],o=t[r];null===o?n.push(r):n.push(r+" "+o.toString())}return n.join("\n")}function q(t,e,n){n.sort();for(var i=[],r=0;r<n.length;r++){var o=n[r];i.push(o)}var a=Y(t)+"\n"+Y(e)+"\n"+i.join("\n");if(X[a])return X[a];var s=g.genGUID();return X[a]=s,s}var Z=v.extend((function(){return{name:"",depthTest:!0,depthMask:!0,transparent:!1,blend:null,autoUpdateTextureStatus:!0,uniforms:{},vertexDefines:{},fragmentDefines:{},_textureStatus:{},_enabledUniforms:null}}),(function(){this.name||(this.name="MATERIAL_"+this.__uid__),this.shader&&this.attachShader(this.shader,!0)}),{precision:"highp",setUniform:function(t,e){void 0===e&&console.warn('Uniform value "'+t+'" is undefined');var n=this.uniforms[t];n&&("string"===typeof e&&(e=W(e)||e),n.value=e,this.autoUpdateTextureStatus&&"t"===n.type&&(e?this.enableTexture(t):this.disableTexture(t)))},setUniforms:function(t){for(var e in t){var n=t[e];this.setUniform(e,n)}},isUniformEnabled:function(t){return this._enabledUniforms.indexOf(t)>=0},getEnabledUniforms:function(){return this._enabledUniforms},getTextureUniforms:function(){return this._textureUniforms},set:function(t,e){if("object"===typeof t)for(var n in t){var i=t[n];this.setUniform(n,i)}else this.setUniform(t,e)},get:function(t){var e=this.uniforms[t];if(e)return e.value},attachShader:function(t,e){var n=this.uniforms;this.uniforms=t.createUniforms(),this.shader=t;var i=this.uniforms;this._enabledUniforms=Object.keys(i),this._enabledUniforms.sort(),this._textureUniforms=this._enabledUniforms.filter((function(t){var e=this.uniforms[t].type;return"t"===e||"tv"===e}),this);var r=this.vertexDefines,o=this.fragmentDefines;if(this.vertexDefines=g.clone(t.vertexDefines),this.fragmentDefines=g.clone(t.fragmentDefines),e){for(var a in n)i[a]&&(i[a].value=n[a].value);g.defaults(this.vertexDefines,r),g.defaults(this.fragmentDefines,o)}var s={};for(var l in t.textures)s[l]={shaderType:t.textures[l].shaderType,type:t.textures[l].type,enabled:!(!e||!this._textureStatus[l])&&this._textureStatus[l].enabled};this._textureStatus=s,this._programKey=""},clone:function(){var t=new this.constructor({name:this.name,shader:this.shader});for(var e in this.uniforms)t.uniforms[e].value=this.uniforms[e].value;return t.depthTest=this.depthTest,t.depthMask=this.depthMask,t.transparent=this.transparent,t.blend=this.blend,t.vertexDefines=g.clone(this.vertexDefines),t.fragmentDefines=g.clone(this.fragmentDefines),t.enableTexture(this.getEnabledTextures()),t.precision=this.precision,t},define:function(t,e,n){var i=this.vertexDefines,r=this.fragmentDefines;"vertex"!==t&&"fragment"!==t&&"both"!==t&&arguments.length<3&&(n=e,e=t,t="both"),n=null!=n?n:null,"vertex"!==t&&"both"!==t||i[e]!==n&&(i[e]=n,this._programKey=""),"fragment"!==t&&"both"!==t||r[e]!==n&&(r[e]=n,"both"!==t&&(this._programKey=""))},undefine:function(t,e){"vertex"!==t&&"fragment"!==t&&"both"!==t&&arguments.length<2&&(e=t,t="both"),"vertex"!==t&&"both"!==t||this.isDefined("vertex",e)&&(delete this.vertexDefines[e],this._programKey=""),"fragment"!==t&&"both"!==t||this.isDefined("fragment",e)&&(delete this.fragmentDefines[e],"both"!==t&&(this._programKey=""))},isDefined:function(t,e){switch(t){case"vertex":return void 0!==this.vertexDefines[e];case"fragment":return void 0!==this.fragmentDefines[e]}},getDefine:function(t,e){switch(t){case"vertex":return this.vertexDefines[e];case"fragment":return this.fragmentDefines[e]}},enableTexture:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.enableTexture(t[e]);else{var n=this._textureStatus[t];if(n){var i=n.enabled;i||(n.enabled=!0,this._programKey="")}}},enableTexturesAll:function(){var t=this._textureStatus;for(var e in t)t[e].enabled=!0;this._programKey=""},disableTexture:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.disableTexture(t[e]);else{var n=this._textureStatus[t];if(n){var i=!n.enabled;i||(n.enabled=!1,this._programKey="")}}},disableTexturesAll:function(){var t=this._textureStatus;for(var e in t)t[e].enabled=!1;this._programKey=""},isTextureEnabled:function(t){var e=this._textureStatus;return!!e[t]&&e[t].enabled},getEnabledTextures:function(){var t=[],e=this._textureStatus;for(var n in e)e[n].enabled&&t.push(n);return t},dirtyDefines:function(){this._programKey=""},getProgramKey:function(){return this._programKey||(this._programKey=q(this.vertexDefines,this.fragmentDefines,this.getEnabledTextures())),this._programKey}}),K=Z,$=1e-6,J=Array,Q=Math.random,tt={create:function(){var t=new J(2);return t[0]=0,t[1]=0,t},clone:function(t){var e=new J(2);return e[0]=t[0],e[1]=t[1],e},fromValues:function(t,e){var n=new J(2);return n[0]=t,n[1]=e,n},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}};tt.sub=tt.subtract,tt.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},tt.mul=tt.multiply,tt.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},tt.div=tt.divide,tt.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},tt.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},tt.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},tt.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},tt.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},tt.dist=tt.distance,tt.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return n*n+i*i},tt.sqrDist=tt.squaredDistance,tt.length=function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},tt.len=tt.length,tt.squaredLength=function(t){var e=t[0],n=t[1];return e*e+n*n},tt.sqrLen=tt.squaredLength,tt.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},tt.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},tt.normalize=function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},tt.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},tt.cross=function(t,e,n){var i=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=i,t},tt.lerp=function(t,e,n,i){var r=e[0],o=e[1];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t},tt.random=function(t,e){e=e||1;var n=2*GLMAT_RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},tt.transformMat2=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r,t[1]=n[1]*i+n[3]*r,t},tt.transformMat2d=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t},tt.transformMat3=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[3]*r+n[6],t[1]=n[1]*i+n[4]*r+n[7],t},tt.transformMat4=function(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[4]*r+n[12],t[1]=n[1]*i+n[5]*r+n[13],t},tt.forEach=function(){var t=tt.create();return function(e,n,i,r,o,a){var s,l;for(n||(n=2),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],o(t,t,a),e[s]=t[0],e[s+1]=t[1];return e}}();var et=tt,nt=function(t,e){t=t||0,e=e||0,this.array=et.fromValues(t,e),this._dirty=!0};if(nt.prototype={constructor:nt,add:function(t){return et.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e){return this.array[0]=t,this.array[1]=e,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this._dirty=!0,this},clone:function(){return new nt(this.x,this.y)},copy:function(t){return et.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,e){return et.cross(t.array,this.array,e.array),t._dirty=!0,this},dist:function(t){return et.dist(this.array,t.array)},distance:function(t){return et.distance(this.array,t.array)},div:function(t){return et.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return et.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return et.dot(this.array,t.array)},len:function(){return et.len(this.array)},length:function(){return et.length(this.array)},lerp:function(t,e,n){return et.lerp(this.array,t.array,e.array,n),this._dirty=!0,this},min:function(t){return et.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return et.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return et.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return et.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return et.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return et.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return et.random(this.array,t),this._dirty=!0,this},scale:function(t){return et.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return et.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return et.sqrDist(this.array,t.array)},squaredDistance:function(t){return et.squaredDistance(this.array,t.array)},sqrLen:function(){return et.sqrLen(this.array)},squaredLength:function(){return et.squaredLength(this.array)},sub:function(t){return et.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return et.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat2:function(t){return et.transformMat2(this.array,this.array,t.array),this._dirty=!0,this},transformMat2d:function(t){return et.transformMat2d(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return et.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return et.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Object.defineProperty){var it=nt.prototype;Object.defineProperty(it,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Object.defineProperty(it,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}})}nt.add=function(t,e,n){return et.add(t.array,e.array,n.array),t._dirty=!0,t},nt.set=function(t,e,n){return et.set(t.array,e,n),t._dirty=!0,t},nt.copy=function(t,e){return et.copy(t.array,e.array),t._dirty=!0,t},nt.cross=function(t,e,n){return et.cross(t.array,e.array,n.array),t._dirty=!0,t},nt.dist=function(t,e){return et.distance(t.array,e.array)},nt.distance=nt.dist,nt.div=function(t,e,n){return et.divide(t.array,e.array,n.array),t._dirty=!0,t},nt.divide=nt.div,nt.dot=function(t,e){return et.dot(t.array,e.array)},nt.len=function(t){return et.length(t.array)},nt.lerp=function(t,e,n,i){return et.lerp(t.array,e.array,n.array,i),t._dirty=!0,t},nt.min=function(t,e,n){return et.min(t.array,e.array,n.array),t._dirty=!0,t},nt.max=function(t,e,n){return et.max(t.array,e.array,n.array),t._dirty=!0,t},nt.mul=function(t,e,n){return et.multiply(t.array,e.array,n.array),t._dirty=!0,t},nt.multiply=nt.mul,nt.negate=function(t,e){return et.negate(t.array,e.array),t._dirty=!0,t},nt.normalize=function(t,e){return et.normalize(t.array,e.array),t._dirty=!0,t},nt.random=function(t,e){return et.random(t.array,e),t._dirty=!0,t},nt.scale=function(t,e,n){return et.scale(t.array,e.array,n),t._dirty=!0,t},nt.scaleAndAdd=function(t,e,n,i){return et.scaleAndAdd(t.array,e.array,n.array,i),t._dirty=!0,t},nt.sqrDist=function(t,e){return et.sqrDist(t.array,e.array)},nt.squaredDistance=nt.sqrDist,nt.sqrLen=function(t){return et.sqrLen(t.array)},nt.squaredLength=nt.sqrLen,nt.sub=function(t,e,n){return et.subtract(t.array,e.array,n.array),t._dirty=!0,t},nt.subtract=nt.sub,nt.transformMat2=function(t,e,n){return et.transformMat2(t.array,e.array,n.array),t._dirty=!0,t},nt.transformMat2d=function(t,e,n){return et.transformMat2d(t.array,e.array,n.array),t._dirty=!0,t},nt.transformMat3=function(t,e,n){return et.transformMat3(t.array,e.array,n.array),t._dirty=!0,t},nt.transformMat4=function(t,e,n){return et.transformMat4(t.array,e.array,n.array),t._dirty=!0,t};var rt=nt,ot=1,at=2,st=3,lt={};function ct(t){for(var e=t.split("\n"),n=0,i=e.length;n<i;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function ut(t,e,n){if(!t.getShaderParameter(e,t.COMPILE_STATUS))return[t.getShaderInfoLog(e),ct(n)].join("\n")}var ht=new S["a"].Float32Array(16),ft=v.extend({uniformSemantics:{},attributes:{}},(function(){this._locations={},this._textureSlot=0,this._program=null}),{bind:function(t){this._textureSlot=0,t.gl.useProgram(this._program)},hasUniform:function(t){var e=this._locations[t];return null!==e&&void 0!==e},useTextureSlot:function(t,e,n){e&&(t.gl.activeTexture(t.gl.TEXTURE0+n),e.isRenderable()?e.bind(t):e.unbind(t))},currentTextureSlot:function(){return this._textureSlot},resetTextureSlot:function(t){this._textureSlot=t||0},takeCurrentTextureSlot:function(t,e){var n=this._textureSlot;return this.useTextureSlot(t,e,n),this._textureSlot++,n},setUniform:function(t,e,n,i){var r=this._locations,o=r[n];if(null===o||void 0===o)return!1;switch(e){case"m4":if(!(i instanceof Float32Array)){for(var a=0;a<i.length;a++)ht[a]=i[a];i=ht}t.uniformMatrix4fv(o,!1,i);break;case"2i":t.uniform2i(o,i[0],i[1]);break;case"2f":t.uniform2f(o,i[0],i[1]);break;case"3i":t.uniform3i(o,i[0],i[1],i[2]);break;case"3f":t.uniform3f(o,i[0],i[1],i[2]);break;case"4i":t.uniform4i(o,i[0],i[1],i[2],i[3]);break;case"4f":t.uniform4f(o,i[0],i[1],i[2],i[3]);break;case"1i":t.uniform1i(o,i);break;case"1f":t.uniform1f(o,i);break;case"1fv":t.uniform1fv(o,i);break;case"1iv":t.uniform1iv(o,i);break;case"2iv":t.uniform2iv(o,i);break;case"2fv":t.uniform2fv(o,i);break;case"3iv":t.uniform3iv(o,i);break;case"3fv":t.uniform3fv(o,i);break;case"4iv":t.uniform4iv(o,i);break;case"4fv":t.uniform4fv(o,i);break;case"m2":case"m2v":t.uniformMatrix2fv(o,!1,i);break;case"m3":case"m3v":t.uniformMatrix3fv(o,!1,i);break;case"m4v":if(Array.isArray(i)&&Array.isArray(i[0])){var s=new S["a"].Float32Array(16*i.length),l=0;for(a=0;a<i.length;a++)for(var c=i[a],u=0;u<16;u++)s[l++]=c[u];t.uniformMatrix4fv(o,!1,s)}else t.uniformMatrix4fv(o,!1,i);break}return!0},setUniformOfSemantic:function(t,e,n){var i=this.uniformSemantics[e];return!!i&&this.setUniform(t,i.type,i.symbol,n)},enableAttributes:function(t,e,n){var i,r=t.gl,o=this._program,a=this._locations;i=n?n.__enabledAttributeList:lt[t.__uid__],i||(i=n?n.__enabledAttributeList=[]:lt[t.__uid__]=[]);for(var s=[],l=0;l<e.length;l++){var c=e[l];if(this.attributes[c]){var u=a[c];if(null==u){if(u=r.getAttribLocation(o,c),-1===u){s[l]=-1;continue}a[c]=u}s[l]=u,i[u]?i[u]=at:i[u]=ot}else s[l]=-1}for(l=0;l<i.length;l++)switch(i[l]){case ot:r.enableVertexAttribArray(l),i[l]=st;break;case at:i[l]=st;break;case st:r.disableVertexAttribArray(l),i[l]=0;break}return s},getAttribLocation:function(t,e){var n=this._locations,i=n[e];return null==i&&(i=t.getAttribLocation(this._program,e),n[e]=i),i},buildProgram:function(t,e,n,i){var r=t.createShader(t.VERTEX_SHADER),o=t.createProgram();t.shaderSource(r,n),t.compileShader(r);var a=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(a,i),t.compileShader(a);var s=ut(t,r,n);if(s)return s;if(s=ut(t,a,i),s)return s;if(t.attachShader(o,r),t.attachShader(o,a),e.attributeSemantics["POSITION"])t.bindAttribLocation(o,0,e.attributeSemantics["POSITION"].symbol);else{var l=Object.keys(this.attributes);t.bindAttribLocation(o,0,l[0])}if(t.linkProgram(o),t.deleteShader(r),t.deleteShader(a),this._program=o,this.vertexCode=n,this.fragmentCode=i,!t.getProgramParameter(o,t.LINK_STATUS))return"Could not link program\n"+t.getProgramInfoLog(o);for(var c=0;c<e.uniforms.length;c++){var u=e.uniforms[c];this._locations[u]=t.getUniformLocation(o,u)}}}),dt=ft,pt=/for\s*?\(int\s*?_idx_\s*\=\s*([\w-]+)\;\s*_idx_\s*<\s*([\w-]+);\s*_idx_\s*\+\+\s*\)\s*\{\{([\s\S]+?)(?=\}\})\}\}/g;function gt(t,e,n){function i(t,n,i,o){var a="";isNaN(n)&&(n=n in e?e[n]:r[n]),isNaN(i)&&(i=i in e?e[i]:r[i]);for(var s=parseInt(n);s<parseInt(i);s++)a+="{"+o.replace(/float\s*\(\s*_idx_\s*\)/g,s.toFixed(1)).replace(/_idx_/g,s)+"}";return a}var r={};for(var o in n)r[o+"_COUNT"]=n[o];return t.replace(pt,i)}function mt(t,e,n){var i=[];if(e)for(var r in e){var o=e[r];o>0&&i.push("#define "+r.toUpperCase()+"_COUNT "+o)}if(n)for(var a=0;a<n.length;a++){var s=n[a];i.push("#define "+s.toUpperCase()+"_ENABLED")}for(var s in t){var l=t[s];null===l?i.push("#define "+s):i.push("#define "+s+" "+l.toString())}return i.join("\n")}function vt(t){for(var e=[],n=0;n<t.length;n++)e.push("#extension GL_"+t[n]+" : enable");return e.join("\n")}function yt(t){return["precision",t,"float"].join(" ")+";\n"+["precision",t,"int"].join(" ")+";\n"+["precision",t,"sampler2D"].join(" ")+";\n"}function _t(t){this._renderer=t,this._cache={}}_t.prototype.getProgram=function(t,e,n){var i=this._cache,r=t.isSkinnedMesh&&t.isSkinnedMesh(),o=t.isInstancedMesh&&t.isInstancedMesh(),a="s"+e.shader.shaderID+"m"+e.getProgramKey();n&&(a+="se"+n.getProgramKey(t.lightGroup)),r&&(a+=",sk"+t.joints.length),o&&(a+=",is");var s=i[a];if(s)return s;var l=n?n.getLightsNumbers(t.lightGroup):{},c=this._renderer,u=c.gl,h=e.getEnabledTextures(),f="";if(r){var d={SKINNING:null,JOINT_COUNT:t.joints.length};t.joints.length>c.getMaxJointNumber()&&(d.USE_SKIN_MATRICES_TEXTURE=null),f+="\n"+mt(d)+"\n"}o&&(f+="\n#define INSTANCING\n");var p=f+mt(e.vertexDefines,l,h),g=f+mt(e.fragmentDefines,l,h),m=p+"\n"+e.shader.vertex,v=["OES_standard_derivatives","EXT_shader_texture_lod"].filter((function(t){return null!=c.getGLExtension(t)}));v.indexOf("EXT_shader_texture_lod")>=0&&(g+="\n#define SUPPORT_TEXTURE_LOD"),v.indexOf("OES_standard_derivatives")>=0&&(g+="\n#define SUPPORT_STANDARD_DERIVATIVES");var y=vt(v)+"\n"+yt(e.precision)+"\n"+g+"\n"+e.shader.fragment,_=gt(m,e.vertexDefines,l),b=gt(y,e.fragmentDefines,l);s=new dt;s.uniformSemantics=e.shader.uniformSemantics,s.attributes=e.shader.attributes;var x=s.buildProgram(u,e.shader,_,b);return s.__error=x,i[a]=s,s};var bt=_t,xt=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g,wt=/attribute\s+(float|int|vec2|vec3|vec4)\s+([\s\S]*?);/g,St=/#define\s+(\w+)?(\s+[\d-.]+)?\s*;?\s*\n/g,Tt={bool:"1i",int:"1i",sampler2D:"t",samplerCube:"t",float:"1f",vec2:"2f",vec3:"3f",vec4:"4f",ivec2:"2i",ivec3:"3i",ivec4:"4i",mat2:"m2",mat3:"m3",mat4:"m4"};function Ot(t){for(var e=[],n=0;n<t;n++)e[n]=0;return e}var Ct={bool:function(){return!0},int:function(){return 0},float:function(){return 0},sampler2D:function(){return null},samplerCube:function(){return null},vec2:function(){return Ot(2)},vec3:function(){return Ot(3)},vec4:function(){return Ot(4)},ivec2:function(){return Ot(2)},ivec3:function(){return Ot(3)},ivec4:function(){return Ot(4)},mat2:function(){return Ot(4)},mat3:function(){return Ot(9)},mat4:function(){return Ot(16)},array:function(){return[]}},Mt=["POSITION","NORMAL","BINORMAL","TANGENT","TEXCOORD","TEXCOORD_0","TEXCOORD_1","COLOR","JOINT","WEIGHT"],At=["SKIN_MATRIX","VIEWPORT_SIZE","VIEWPORT","DEVICEPIXELRATIO","WINDOW_SIZE","NEAR","FAR","TIME"],Dt=["WORLD","VIEW","PROJECTION","WORLDVIEW","VIEWPROJECTION","WORLDVIEWPROJECTION","WORLDINVERSE","VIEWINVERSE","PROJECTIONINVERSE","WORLDVIEWINVERSE","VIEWPROJECTIONINVERSE","WORLDVIEWPROJECTIONINVERSE","WORLDTRANSPOSE","VIEWTRANSPOSE","PROJECTIONTRANSPOSE","WORLDVIEWTRANSPOSE","VIEWPROJECTIONTRANSPOSE","WORLDVIEWPROJECTIONTRANSPOSE","WORLDINVERSETRANSPOSE","VIEWINVERSETRANSPOSE","PROJECTIONINVERSETRANSPOSE","WORLDVIEWINVERSETRANSPOSE","VIEWPROJECTIONINVERSETRANSPOSE","WORLDVIEWPROJECTIONINVERSETRANSPOSE"],Et={vec4:4,vec3:3,vec2:2,float:1},It={},Pt={};function Lt(t,e){var n="vertex:"+t+"fragment:"+e;if(It[n])return It[n];var i=g.genGUID();return It[n]=i,Pt[i]={vertex:t,fragment:e},i}function kt(t){return t.replace(/[ \t]*\/\/.*\n/g,"").replace(/[ \t]*\/\*[\s\S]*?\*\//g,"")}function jt(){console.error("Wrong uniform/attributes syntax")}function Rt(t,e){for(var n=/[,=\(\):]/,i=e.replace(/:\s*\[\s*(.*)\s*\]/g,"="+t+"($1)").replace(/\s+/g,"").split(/(?=[,=\(\):])/g),r=[],o=0;o<i.length;o++)i[o].match(n)?r.push(i[o].charAt(0),i[o].slice(1)):r.push(i[o]);i=r;var a,s=0,l=1,c=2,u=3,h=4,f=5,d=s,p={},g=null;function m(t){t||jt();var e=t.match(/\[(.*?)\]/);a=t.replace(/\[(.*?)\]/,""),p[a]={},e&&(p[a].isArray=!0,p[a].arraySize=e[1])}m(i[0]);for(o=1;o<i.length;o++){var v=i[o];if(v)if("="!==v)if(":"!==v)if(","!==v)if(")"!==v)if("("!==v)if(v.indexOf("vec")>=0){if(d!==l&&d!==h){jt();break}d=c,g=[]}else if(d!==l)if(d!==h)m(v),d=s;else{var y=v;Mt.indexOf(y)>=0||At.indexOf(y)>=0||Dt.indexOf(y)>=0?p[a].semantic=y:"ignore"===y||"unconfigurable"===y?p[a].ignore=!0:p[a].value="bool"===t?"true"===y:parseFloat(y)}else p[a].value="bool"===t?"true"===v:parseFloat(v),g=null;else{if(d!==c){jt();break}if(!(g instanceof Array)){jt();break}g.push(+i[++o])}else p[a].value=new S["a"].Float32Array(g),g=null,d=f;else if(d===c){if(!(g instanceof Array)){jt();break}g.push(+i[++o])}else d=f;else d=h;else{if(d!==s&&d!==u){jt();break}d=l}}return p}function Nt(t,e){"object"===typeof t&&(e=t.fragment,t=t.vertex),t=kt(t),e=kt(e),this._shaderID=Lt(t,e),this._vertexCode=Nt.parseImport(t),this._fragmentCode=Nt.parseImport(e),this.attributeSemantics={},this.matrixSemantics={},this.uniformSemantics={},this.matrixSemanticKeys=[],this.uniformTemplates={},this.attributes={},this.textures={},this.vertexDefines={},this.fragmentDefines={},this._parseAttributes(),this._parseUniforms(),this._parseDefines()}Nt.prototype={constructor:Nt,createUniforms:function(){var t={};for(var e in this.uniformTemplates){var n=this.uniformTemplates[e];t[e]={type:n.type,value:n.value()}}return t},_parseImport:function(){this._vertexCode=Nt.parseImport(this.vertex),this._fragmentCode=Nt.parseImport(this.fragment)},_addSemanticUniform:function(t,e,n){if(Mt.indexOf(n)>=0)this.attributeSemantics[n]={symbol:t,type:e};else if(Dt.indexOf(n)>=0){var i=!1,r=n;n.match(/TRANSPOSE$/)&&(i=!0,r=n.slice(0,-9)),this.matrixSemantics[n]={symbol:t,type:e,isTranspose:i,semanticNoTranspose:r}}else At.indexOf(n)>=0&&(this.uniformSemantics[n]={symbol:t,type:e})},_addMaterialUniform:function(t,e,n,i,r,o){o[t]={type:n,value:r?Ct["array"]:i||Ct[e],semantic:null}},_parseUniforms:function(){var t={},e=this,n="vertex";function i(t){return null!=t?function(){return t}:null}function r(r,o,a){var s=Rt(o,a),l=[];for(var c in s){var u=s[c],h=u.semantic,f=c,d=Tt[o],p=i(s[c].value);s[c].isArray&&(f+="["+s[c].arraySize+"]",d+="v"),l.push(f),e._uniformList.push(c),u.ignore||("sampler2D"!==o&&"samplerCube"!==o||(e.textures[c]={shaderType:n,type:o}),h?e._addSemanticUniform(c,d,h):e._addMaterialUniform(c,o,d,p,s[c].isArray,t))}return l.length>0?"uniform "+o+" "+l.join(",")+";\n":""}this._uniformList=[],this._vertexCode=this._vertexCode.replace(xt,r),n="fragment",this._fragmentCode=this._fragmentCode.replace(xt,r),e.matrixSemanticKeys=Object.keys(this.matrixSemantics),this.uniformTemplates=t},_parseAttributes:function(){var t={},e=this;function n(n,i,r){var o=Rt(i,r),a=Et[i]||1,s=[];for(var l in o){var c=o[l].semantic;if(t[l]={type:"float",size:a,semantic:c||null},c){if(Mt.indexOf(c)<0)throw new Error('Unkown semantic "'+c+'"');e.attributeSemantics[c]={symbol:l,type:i}}s.push(l)}return"attribute "+i+" "+s.join(",")+";\n"}this._vertexCode=this._vertexCode.replace(wt,n),this.attributes=t},_parseDefines:function(){var t=this,e="vertex";function n(n,i,r){var o="vertex"===e?t.vertexDefines:t.fragmentDefines;return o[i]||(o[i]="false"!==r&&("true"===r||(r?isNaN(parseFloat(r))?r.trim():parseFloat(r):null))),""}this._vertexCode=this._vertexCode.replace(St,n),e="fragment",this._fragmentCode=this._fragmentCode.replace(St,n)},clone:function(){var t=Pt[this._shaderID],e=new Nt(t.vertex,t.fragment);return e}},Object.defineProperty&&(Object.defineProperty(Nt.prototype,"shaderID",{get:function(){return this._shaderID}}),Object.defineProperty(Nt.prototype,"vertex",{get:function(){return this._vertexCode}}),Object.defineProperty(Nt.prototype,"fragment",{get:function(){return this._fragmentCode}}),Object.defineProperty(Nt.prototype,"uniforms",{get:function(){return this._uniformList}}));var Bt=/(@import)\s*([0-9a-zA-Z_\-\.]*)/g;Nt.parseImport=function(t){return t=t.replace(Bt,(function(t,e,n){t=Nt.source(n);return t?Nt.parseImport(t):(console.error('Shader chunk "'+n+'" not existed in library'),"")})),t};var Ft=/(@export)\s*([0-9a-zA-Z_\-\.]*)\s*\n([\s\S]*?)@end/g;Nt["import"]=function(t){t.replace(Ft,(function(t,e,n,i){i=i.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+\x24)/g,"");if(i){var r,o=n.split("."),a=Nt.codes,s=0;while(s<o.length-1)r=o[s++],a[r]||(a[r]={}),a=a[r];r=o[s],a[r]=i}return i}))},Nt.codes={},Nt.source=function(t){var e=t.split("."),n=Nt.codes,i=0;while(n&&i<e.length){var r=e[i++];n=n[r]}return"string"!==typeof n?(console.error('Shader "'+t+'" not existed in library'),""):n};var zt=Nt,Vt="@export clay.prez.vertex\nuniform mat4 WVP : WORLDVIEWPROJECTION;\nattribute vec3 pos : POSITION;\nattribute vec2 uv : TEXCOORD_0;\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec2 v_Texcoord;\nvoid main()\n{\n vec4 P = vec4(pos, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = WVP * P;\n v_Texcoord = uv * uvRepeat + uvOffset;\n}\n@end\n@export clay.prez.fragment\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n gl_FragColor = vec4(0.0,0.0,0.0,1.0);\n}\n@end",Ht={create:function(){var t=new J(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},clone:function(t){var e=new J(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},transpose:function(t,e){if(t===e){var n=e[1],i=e[2],r=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},invert:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-i*a,_=n*l-r*a,b=n*c-o*a,x=i*l-r*s,w=i*c-o*s,S=r*c-o*l,T=u*g-h*p,O=u*m-f*p,C=u*v-d*p,M=h*m-f*g,A=h*v-d*g,D=f*v-d*m,E=y*D-_*A+b*M+x*C-w*O+S*T;return E?(E=1/E,t[0]=(s*D-l*A+c*M)*E,t[1]=(r*A-i*D-o*M)*E,t[2]=(g*S-m*w+v*x)*E,t[3]=(f*w-h*S-d*x)*E,t[4]=(l*C-a*D-c*O)*E,t[5]=(n*D-r*C+o*O)*E,t[6]=(m*b-p*S-v*_)*E,t[7]=(u*S-f*b+d*_)*E,t[8]=(a*A-s*C+c*T)*E,t[9]=(i*C-n*A-o*T)*E,t[10]=(p*w-g*b+v*y)*E,t[11]=(h*b-u*w-d*y)*E,t[12]=(s*O-a*M-l*T)*E,t[13]=(n*M-i*O+r*T)*E,t[14]=(g*_-p*x-m*y)*E,t[15]=(u*x-h*_+f*y)*E,t):null},adjoint:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=e[15];return t[0]=s*(f*v-d*m)-h*(l*v-c*m)+g*(l*d-c*f),t[1]=-(i*(f*v-d*m)-h*(r*v-o*m)+g*(r*d-o*f)),t[2]=i*(l*v-c*m)-s*(r*v-o*m)+g*(r*c-o*l),t[3]=-(i*(l*d-c*f)-s*(r*d-o*f)+h*(r*c-o*l)),t[4]=-(a*(f*v-d*m)-u*(l*v-c*m)+p*(l*d-c*f)),t[5]=n*(f*v-d*m)-u*(r*v-o*m)+p*(r*d-o*f),t[6]=-(n*(l*v-c*m)-a*(r*v-o*m)+p*(r*c-o*l)),t[7]=n*(l*d-c*f)-a*(r*d-o*f)+u*(r*c-o*l),t[8]=a*(h*v-d*g)-u*(s*v-c*g)+p*(s*d-c*h),t[9]=-(n*(h*v-d*g)-u*(i*v-o*g)+p*(i*d-o*h)),t[10]=n*(s*v-c*g)-a*(i*v-o*g)+p*(i*c-o*s),t[11]=-(n*(s*d-c*h)-a*(i*d-o*h)+u*(i*c-o*s)),t[12]=-(a*(h*m-f*g)-u*(s*m-l*g)+p*(s*f-l*h)),t[13]=n*(h*m-f*g)-u*(i*m-r*g)+p*(i*f-r*h),t[14]=-(n*(s*m-l*g)-a*(i*m-r*g)+p*(i*l-r*s)),t[15]=n*(s*f-l*h)-a*(i*f-r*h)+u*(i*l-r*s),t},determinant:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],f=t[11],d=t[12],p=t[13],g=t[14],m=t[15],v=e*a-n*o,y=e*s-i*o,_=e*l-r*o,b=n*s-i*a,x=n*l-r*a,w=i*l-r*s,S=c*p-u*d,T=c*g-h*d,O=c*m-f*d,C=u*g-h*p,M=u*m-f*p,A=h*m-f*g;return v*A-y*M+_*C+b*O-x*T+w*S},multiply:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],g=e[12],m=e[13],v=e[14],y=e[15],_=n[0],b=n[1],x=n[2],w=n[3];return t[0]=_*i+b*s+x*h+w*g,t[1]=_*r+b*l+x*f+w*m,t[2]=_*o+b*c+x*d+w*v,t[3]=_*a+b*u+x*p+w*y,_=n[4],b=n[5],x=n[6],w=n[7],t[4]=_*i+b*s+x*h+w*g,t[5]=_*r+b*l+x*f+w*m,t[6]=_*o+b*c+x*d+w*v,t[7]=_*a+b*u+x*p+w*y,_=n[8],b=n[9],x=n[10],w=n[11],t[8]=_*i+b*s+x*h+w*g,t[9]=_*r+b*l+x*f+w*m,t[10]=_*o+b*c+x*d+w*v,t[11]=_*a+b*u+x*p+w*y,_=n[12],b=n[13],x=n[14],w=n[15],t[12]=_*i+b*s+x*h+w*g,t[13]=_*r+b*l+x*f+w*m,t[14]=_*o+b*c+x*d+w*v,t[15]=_*a+b*u+x*p+w*y,t},multiplyAffine:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[4],s=e[5],l=e[6],c=e[8],u=e[9],h=e[10],f=e[12],d=e[13],p=e[14],g=n[0],m=n[1],v=n[2];return t[0]=g*i+m*a+v*c,t[1]=g*r+m*s+v*u,t[2]=g*o+m*l+v*h,g=n[4],m=n[5],v=n[6],t[4]=g*i+m*a+v*c,t[5]=g*r+m*s+v*u,t[6]=g*o+m*l+v*h,g=n[8],m=n[9],v=n[10],t[8]=g*i+m*a+v*c,t[9]=g*r+m*s+v*u,t[10]=g*o+m*l+v*h,g=n[12],m=n[13],v=n[14],t[12]=g*i+m*a+v*c+f,t[13]=g*r+m*s+v*u+d,t[14]=g*o+m*l+v*h+p,t}};Ht.mul=Ht.multiply,Ht.mulAffine=Ht.multiplyAffine,Ht.translate=function(t,e,n){var i,r,o,a,s,l,c,u,h,f,d,p,g=n[0],m=n[1],v=n[2];return e===t?(t[12]=e[0]*g+e[4]*m+e[8]*v+e[12],t[13]=e[1]*g+e[5]*m+e[9]*v+e[13],t[14]=e[2]*g+e[6]*m+e[10]*v+e[14],t[15]=e[3]*g+e[7]*m+e[11]*v+e[15]):(i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=e[9],d=e[10],p=e[11],t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=f,t[10]=d,t[11]=p,t[12]=i*g+s*m+h*v+e[12],t[13]=r*g+l*m+f*v+e[13],t[14]=o*g+c*m+d*v+e[14],t[15]=a*g+u*m+p*v+e[15]),t},Ht.scale=function(t,e,n){var i=n[0],r=n[1],o=n[2];return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},Ht.rotate=function(t,e,n,i){var r,o,a,s,l,c,u,h,f,d,p,g,m,v,y,_,b,x,w,S,T,O,C,M,A=i[0],D=i[1],E=i[2],I=Math.sqrt(A*A+D*D+E*E);return Math.abs(I)<$?null:(I=1/I,A*=I,D*=I,E*=I,r=Math.sin(n),o=Math.cos(n),a=1-o,s=e[0],l=e[1],c=e[2],u=e[3],h=e[4],f=e[5],d=e[6],p=e[7],g=e[8],m=e[9],v=e[10],y=e[11],_=A*A*a+o,b=D*A*a+E*r,x=E*A*a-D*r,w=A*D*a-E*r,S=D*D*a+o,T=E*D*a+A*r,O=A*E*a+D*r,C=D*E*a-A*r,M=E*E*a+o,t[0]=s*_+h*b+g*x,t[1]=l*_+f*b+m*x,t[2]=c*_+d*b+v*x,t[3]=u*_+p*b+y*x,t[4]=s*w+h*S+g*T,t[5]=l*w+f*S+m*T,t[6]=c*w+d*S+v*T,t[7]=u*w+p*S+y*T,t[8]=s*O+h*C+g*M,t[9]=l*O+f*C+m*M,t[10]=c*O+d*C+v*M,t[11]=u*O+p*C+y*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},Ht.rotateX=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*r+c*i,t[5]=a*r+u*i,t[6]=s*r+h*i,t[7]=l*r+f*i,t[8]=c*r-o*i,t[9]=u*r-a*i,t[10]=h*r-s*i,t[11]=f*r-l*i,t},Ht.rotateY=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[8],u=e[9],h=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r-c*i,t[1]=a*r-u*i,t[2]=s*r-h*i,t[3]=l*r-f*i,t[8]=o*i+c*r,t[9]=a*i+u*r,t[10]=s*i+h*r,t[11]=l*i+f*r,t},Ht.rotateZ=function(t,e,n){var i=Math.sin(n),r=Math.cos(n),o=e[0],a=e[1],s=e[2],l=e[3],c=e[4],u=e[5],h=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*r+c*i,t[1]=a*r+u*i,t[2]=s*r+h*i,t[3]=l*r+f*i,t[4]=c*r-o*i,t[5]=u*r-a*i,t[6]=h*r-s*i,t[7]=f*r-l*i,t},Ht.fromRotationTranslation=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=i+i,l=r+r,c=o+o,u=i*s,h=i*l,f=i*c,d=r*l,p=r*c,g=o*c,m=a*s,v=a*l,y=a*c;return t[0]=1-(d+g),t[1]=h+y,t[2]=f-v,t[3]=0,t[4]=h-y,t[5]=1-(u+g),t[6]=p+m,t[7]=0,t[8]=f+v,t[9]=p-m,t[10]=1-(u+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},Ht.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,f=r*a,d=r*s,p=r*l,g=o*a,m=o*s,v=o*l;return t[0]=1-h-p,t[1]=u+v,t[2]=f-m,t[3]=0,t[4]=u-v,t[5]=1-c-p,t[6]=d+g,t[7]=0,t[8]=f+m,t[9]=d-g,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ht.frustum=function(t,e,n,i,r,o,a){var s=1/(n-e),l=1/(r-i),c=1/(o-a);return t[0]=2*o*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(r+i)*l,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t},Ht.perspective=function(t,e,n,i,r){var o=1/Math.tan(e/2),a=1/(i-r);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*i*a,t[15]=0,t},Ht.ortho=function(t,e,n,i,r,o,a){var s=1/(e-n),l=1/(i-r),c=1/(o-a);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*s,t[13]=(r+i)*l,t[14]=(a+o)*c,t[15]=1,t},Ht.lookAt=function(t,e,n,i){var r,o,a,s,l,c,u,h,f,d,p=e[0],g=e[1],m=e[2],v=i[0],y=i[1],_=i[2],b=n[0],x=n[1],w=n[2];return Math.abs(p-b)<$&&Math.abs(g-x)<$&&Math.abs(m-w)<$?Ht.identity(t):(u=p-b,h=g-x,f=m-w,d=1/Math.sqrt(u*u+h*h+f*f),u*=d,h*=d,f*=d,r=y*f-_*h,o=_*u-v*f,a=v*h-y*u,d=Math.sqrt(r*r+o*o+a*a),d?(d=1/d,r*=d,o*=d,a*=d):(r=0,o=0,a=0),s=h*a-f*o,l=f*r-u*a,c=u*o-h*r,d=Math.sqrt(s*s+l*l+c*c),d?(d=1/d,s*=d,l*=d,c*=d):(s=0,l=0,c=0),t[0]=r,t[1]=s,t[2]=u,t[3]=0,t[4]=o,t[5]=l,t[6]=h,t[7]=0,t[8]=a,t[9]=c,t[10]=f,t[11]=0,t[12]=-(r*p+o*g+a*m),t[13]=-(s*p+l*g+c*m),t[14]=-(u*p+h*g+f*m),t[15]=1,t)},Ht.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))};var Gt=Ht,Ut={create:function(){var t=new J(3);return t[0]=0,t[1]=0,t[2]=0,t},clone:function(t){var e=new J(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},fromValues:function(t,e,n){var i=new J(3);return i[0]=t,i[1]=e,i[2]=n,i},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},set:function(t,e,n,i){return t[0]=e,t[1]=n,t[2]=i,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}};Ut.sub=Ut.subtract,Ut.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t},Ut.mul=Ut.multiply,Ut.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t},Ut.div=Ut.divide,Ut.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},Ut.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},Ut.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},Ut.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t},Ut.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return Math.sqrt(n*n+i*i+r*r)},Ut.dist=Ut.distance,Ut.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2];return n*n+i*i+r*r},Ut.sqrDist=Ut.squaredDistance,Ut.length=function(t){var e=t[0],n=t[1],i=t[2];return Math.sqrt(e*e+n*n+i*i)},Ut.len=Ut.length,Ut.squaredLength=function(t){var e=t[0],n=t[1],i=t[2];return e*e+n*n+i*i},Ut.sqrLen=Ut.squaredLength,Ut.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},Ut.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},Ut.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=n*n+i*i+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t},Ut.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},Ut.cross=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2];return t[0]=r*l-o*s,t[1]=o*a-i*l,t[2]=i*s-r*a,t},Ut.lerp=function(t,e,n,i){var r=e[0],o=e[1],a=e[2];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t},Ut.random=function(t,e){e=e||1;var n=2*Q()*Math.PI,i=2*Q()-1,r=Math.sqrt(1-i*i)*e;return t[0]=Math.cos(n)*r,t[1]=Math.sin(n)*r,t[2]=i*e,t},Ut.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[3]*i+n[7]*r+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*i+n[4]*r+n[8]*o+n[12])/a,t[1]=(n[1]*i+n[5]*r+n[9]*o+n[13])/a,t[2]=(n[2]*i+n[6]*r+n[10]*o+n[14])/a,t},Ut.transformMat3=function(t,e,n){var i=e[0],r=e[1],o=e[2];return t[0]=i*n[0]+r*n[3]+o*n[6],t[1]=i*n[1]+r*n[4]+o*n[7],t[2]=i*n[2]+r*n[5]+o*n[8],t},Ut.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*o-l*r,h=c*r+l*i-a*o,f=c*o+a*r-s*i,d=-a*i-s*r-l*o;return t[0]=u*c+d*-a+h*-l-f*-s,t[1]=h*c+d*-s+f*-a-u*-l,t[2]=f*c+d*-l+u*-s-h*-a,t},Ut.rotateX=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0],o[1]=r[1]*Math.cos(i)-r[2]*Math.sin(i),o[2]=r[1]*Math.sin(i)+r[2]*Math.cos(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},Ut.rotateY=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[2]*Math.sin(i)+r[0]*Math.cos(i),o[1]=r[1],o[2]=r[2]*Math.cos(i)-r[0]*Math.sin(i),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},Ut.rotateZ=function(t,e,n,i){var r=[],o=[];return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],o[0]=r[0]*Math.cos(i)-r[1]*Math.sin(i),o[1]=r[0]*Math.sin(i)+r[1]*Math.cos(i),o[2]=r[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},Ut.forEach=function(){var t=Ut.create();return function(e,n,i,r,o,a){var s,l;for(n||(n=3),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}(),Ut.angle=function(t,e){var n=Ut.fromValues(t[0],t[1],t[2]),i=Ut.fromValues(e[0],e[1],e[2]);Ut.normalize(n,n),Ut.normalize(i,i);var r=Ut.dot(n,i);return r>1?0:Math.acos(r)};var Wt=Ut;zt["import"](Vt);var Xt=Gt.create,Yt={};function qt(t){return t.material}function Zt(t,e,n){return e.uniforms[n].value}function Kt(t,e,n,i){return n!==i}function $t(t){return!0}function Jt(){}var Qt={float:w.FLOAT,byte:w.BYTE,ubyte:w.UNSIGNED_BYTE,short:w.SHORT,ushort:w.UNSIGNED_SHORT};function te(t,e,n){this.availableAttributes=t,this.availableAttributeSymbols=e,this.indicesBuffer=n,this.vao=null}function ee(t){var e,n;this.bind=function(t){e||(e=S["a"].createCanvas(),e.width=e.height=1,e.getContext("2d"));var i=t.gl,r=!n;r&&(n=i.createTexture()),i.bindTexture(i.TEXTURE_2D,n),r&&i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)},this.unbind=function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},this.isRenderable=function(){return!0}}var ne=v.extend((function(){return{canvas:null,_width:100,_height:100,devicePixelRatio:"undefined"!==typeof window&&window.devicePixelRatio||1,clearColor:[0,0,0,0],clearBit:17664,alpha:!0,depth:!0,stencil:!1,antialias:!0,premultipliedAlpha:!0,preserveDrawingBuffer:!1,throwError:!0,gl:null,viewport:{},maxJointNumber:20,__currentFrameBuffer:null,_viewportStack:[],_clearStack:[],_sceneRendering:null}}),(function(){this.canvas||(this.canvas=S["a"].createCanvas());var t=this.canvas;try{var e={alpha:this.alpha,depth:this.depth,stencil:this.stencil,antialias:this.antialias,premultipliedAlpha:this.premultipliedAlpha,preserveDrawingBuffer:this.preserveDrawingBuffer};if(this.gl=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),!this.gl)throw new Error;this._glinfo=new x(this.gl),this.gl.targetRenderer&&console.error("Already created a renderer"),this.gl.targetRenderer=this,this.resize()}catch(n){throw"Error creating WebGL Context "+n}this._programMgr=new bt(this),this._placeholderTexture=new ee(this)}),{resize:function(t,e){var n=this.canvas,i=this.devicePixelRatio;null!=t?(n.style&&(n.style.width=t+"px",n.style.height=e+"px"),n.width=t*i,n.height=e*i,this._width=t,this._height=e):(this._width=n.width/i,this._height=n.height/i),this.setViewport(0,0,this._width,this._height)},getWidth:function(){return this._width},getHeight:function(){return this._height},getViewportAspect:function(){var t=this.viewport;return t.width/t.height},setDevicePixelRatio:function(t){this.devicePixelRatio=t,this.resize(this._width,this._height)},getDevicePixelRatio:function(){return this.devicePixelRatio},getGLExtension:function(t){return this._glinfo.getExtension(t)},getGLParameter:function(t){return this._glinfo.getParameter(t)},setViewport:function(t,e,n,i,r){if("object"===typeof t){var o=t;t=o.x,e=o.y,n=o.width,i=o.height,r=o.devicePixelRatio}r=r||this.devicePixelRatio,this.gl.viewport(t*r,e*r,n*r,i*r),this.viewport={x:t,y:e,width:n,height:i,devicePixelRatio:r}},saveViewport:function(){this._viewportStack.push(this.viewport)},restoreViewport:function(){this._viewportStack.length>0&&this.setViewport(this._viewportStack.pop())},saveClear:function(){this._clearStack.push({clearBit:this.clearBit,clearColor:this.clearColor})},restoreClear:function(){if(this._clearStack.length>0){var t=this._clearStack.pop();this.clearColor=t.clearColor,this.clearBit=t.clearBit}},bindSceneRendering:function(t){this._sceneRendering=t},render:function(t,e,n,i){var r=this.gl,o=this.clearColor;if(this.clearBit){r.colorMask(!0,!0,!0,!0),r.depthMask(!0);var a=this.viewport,s=!1,l=a.devicePixelRatio;(a.width!==this._width||a.height!==this._height||l&&l!==this.devicePixelRatio||a.x||a.y)&&(s=!0,r.enable(r.SCISSOR_TEST),r.scissor(a.x*l,a.y*l,a.width*l,a.height*l)),r.clearColor(o[0],o[1],o[2],o[3]),r.clear(this.clearBit),s&&r.disable(r.SCISSOR_TEST)}if(n||t.update(!1),t.updateLights(),e=e||t.getMainCamera(),e){e.update();var c=t.updateRenderList(e,!0);this._sceneRendering=t;var u=c.opaque,h=c.transparent,f=t.material;t.trigger("beforerender",this,t,e,c),i?(this.renderPreZ(u,t,e),r.depthFunc(r.LEQUAL)):r.depthFunc(r.LESS);for(var d=Xt(),p=Wt.create(),g=0;g<h.length;g++){var m=h[g];Gt.multiplyAffine(d,e.viewMatrix.array,m.worldTransform.array),Wt.transformMat4(p,m.position.array,d),m.__depth=p[2]}this.renderPass(u,e,{getMaterial:function(t){return f||t.material},sortCompare:this.opaqueSortCompare}),this.renderPass(h,e,{getMaterial:function(t){return f||t.material},sortCompare:this.transparentSortCompare}),t.trigger("afterrender",this,t,e,c),this._sceneRendering=null}else console.error("Can't find camera in the scene.")},getProgram:function(t,e,n){return e=e||t.material,this._programMgr.getProgram(t,e,n)},validateProgram:function(t){if(t.__error){var e=t.__error;if(Yt[t.__uid__])return;if(Yt[t.__uid__]=!0,this.throwError)throw new Error(e);this.trigger("error",e)}},updatePrograms:function(t,e,n){var i=n&&n.getMaterial||qt;e=e||null;for(var r=0;r<t.length;r++){var o=t[r],a=i.call(this,o);if(r>0){var s=t[r-1],l=s.joints?s.joints.length:0,c=o.joints?o.joints.length:0;if(c===l&&o.material===s.material&&o.lightGroup===s.lightGroup){o.__program=s.__program;continue}}var u=this._programMgr.getProgram(o,a,e);this.validateProgram(u),o.__program=u}},renderPass:function(t,e,n){this.trigger("beforerenderpass",this,t,e,n),n=n||{},n.getMaterial=n.getMaterial||qt,n.getUniform=n.getUniform||Zt,n.isMaterialChanged=n.isMaterialChanged||Kt,n.beforeRender=n.beforeRender||Jt,n.afterRender=n.afterRender||Jt;var i=n.ifRender||$t;this.updatePrograms(t,this._sceneRendering,n),n.sortCompare&&t.sort(n.sortCompare);var r=this.viewport,o=r.devicePixelRatio,a=[r.x*o,r.y*o,r.width*o,r.height*o],s=this.devicePixelRatio,l=this.__currentFrameBuffer?[this.__currentFrameBuffer.getTextureWidth(),this.__currentFrameBuffer.getTextureHeight()]:[this._width*s,this._height*s],c=[a[2],a[3]],u=Date.now();e?(Gt.copy(ie.VIEW,e.viewMatrix.array),Gt.copy(ie.PROJECTION,e.projectionMatrix.array),Gt.copy(ie.VIEWINVERSE,e.worldTransform.array)):(Gt.identity(ie.VIEW),Gt.identity(ie.PROJECTION),Gt.identity(ie.VIEWINVERSE)),Gt.multiply(ie.VIEWPROJECTION,ie.PROJECTION,ie.VIEW),Gt.invert(ie.PROJECTIONINVERSE,ie.PROJECTION),Gt.invert(ie.VIEWPROJECTIONINVERSE,ie.VIEWPROJECTION);for(var h,f,d,p,g,m,v,y,_,b,x,w,S=this.gl,T=this._sceneRendering,O=null,C=0;C<t.length;C++){var M,A=t[C],D=null!=A.worldTransform;if(i(A)){D&&(M=A.isSkinnedMesh&&A.isSkinnedMesh()?A.offsetMatrix?A.offsetMatrix.array:ie.IDENTITY:A.worldTransform.array);var E=A.geometry,I=n.getMaterial.call(this,A),P=A.__program,L=I.shader,k=E.__uid__+"-"+P.__uid__,j=k!==b;b=k,j&&O&&O.bindVertexArrayOES(null),D&&(Gt.copy(ie.WORLD,M),Gt.multiply(ie.WORLDVIEWPROJECTION,ie.VIEWPROJECTION,M),Gt.multiplyAffine(ie.WORLDVIEW,ie.VIEW,M),(L.matrixSemantics.WORLDINVERSE||L.matrixSemantics.WORLDINVERSETRANSPOSE)&&Gt.invert(ie.WORLDINVERSE,M),(L.matrixSemantics.WORLDVIEWINVERSE||L.matrixSemantics.WORLDVIEWINVERSETRANSPOSE)&&Gt.invert(ie.WORLDVIEWINVERSE,ie.WORLDVIEW),(L.matrixSemantics.WORLDVIEWPROJECTIONINVERSE||L.matrixSemantics.WORLDVIEWPROJECTIONINVERSETRANSPOSE)&&Gt.invert(ie.WORLDVIEWPROJECTIONINVERSE,ie.WORLDVIEWPROJECTION)),A.beforeRender&&A.beforeRender(this),n.beforeRender.call(this,A,I,h);var R=P!==f;R?(P.bind(this),P.setUniformOfSemantic(S,"VIEWPORT",a),P.setUniformOfSemantic(S,"WINDOW_SIZE",l),e&&(P.setUniformOfSemantic(S,"NEAR",e.near),P.setUniformOfSemantic(S,"FAR",e.far)),P.setUniformOfSemantic(S,"DEVICEPIXELRATIO",o),P.setUniformOfSemantic(S,"TIME",u),P.setUniformOfSemantic(S,"VIEWPORT_SIZE",c),T&&T.setLightUniforms(P,A.lightGroup,this)):P=f,(R||n.isMaterialChanged(A,d,I,h))&&(I.depthTest!==p&&(I.depthTest?S.enable(S.DEPTH_TEST):S.disable(S.DEPTH_TEST),p=I.depthTest),I.depthMask!==g&&(S.depthMask(I.depthMask),g=I.depthMask),I.transparent!==_&&(I.transparent?S.enable(S.BLEND):S.disable(S.BLEND),_=I.transparent),I.transparent&&(I.blend?I.blend(S):(S.blendEquationSeparate(S.FUNC_ADD,S.FUNC_ADD),S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA))),w=this._bindMaterial(A,I,P,d||null,h||null,f||null,n.getUniform),h=I);var N=L.matrixSemanticKeys;if(D)for(var B=0;B<N.length;B++){var F=N[B],z=L.matrixSemantics[F],V=ie[F];if(z.isTranspose){var H=ie[z.semanticNoTranspose];Gt.transpose(V,H)}P.setUniform(S,z.type,z.symbol,V)}A.cullFace!==v&&(v=A.cullFace,S.cullFace(v)),A.frontFace!==y&&(y=A.frontFace,S.frontFace(y)),A.culling!==m&&(m=A.culling,m?S.enable(S.CULL_FACE):S.disable(S.CULL_FACE)),this._updateSkeleton(A,P,w),j&&(x=this._bindVAO(O,L,E,P)),this._renderObject(A,x,P),n.afterRender(this,A),A.afterRender&&A.afterRender(this),f=P,d=A}}O&&O.bindVertexArrayOES(null),this.trigger("afterrenderpass",this,t,e,n)},getMaxJointNumber:function(){return this.maxJointNumber},_updateSkeleton:function(t,e,n){var i=this.gl,r=t.skeleton;if(r)if(r.update(),t.joints.length>this.getMaxJointNumber()){var o=r.getSubSkinMatricesTexture(t.__uid__,t.joints);e.useTextureSlot(this,o,n),e.setUniform(i,"1i","skinMatricesTexture",n),e.setUniform(i,"1f","skinMatricesTextureSize",o.width)}else{var a=r.getSubSkinMatrices(t.__uid__,t.joints);e.setUniformOfSemantic(i,"SKIN_MATRIX",a)}},_renderObject:function(t,e,n){var i=this.gl,r=t.geometry,o=t.mode;null==o&&(o=4);var a=null,s=t.isInstancedMesh&&t.isInstancedMesh();if(!s||(a=this.getGLExtension("ANGLE_instanced_arrays"),a)){var l;if(s&&(l=this._bindInstancedAttributes(t,n,a)),e.indicesBuffer){var c=this.getGLExtension("OES_element_index_uint"),u=c&&r.indices instanceof Uint32Array,h=u?i.UNSIGNED_INT:i.UNSIGNED_SHORT;s?a.drawElementsInstancedANGLE(o,e.indicesBuffer.count,h,0,t.getInstanceCount()):i.drawElements(o,e.indicesBuffer.count,h,0)}else s?a.drawArraysInstancedANGLE(o,0,r.vertexCount,t.getInstanceCount()):i.drawArrays(o,0,r.vertexCount);if(s)for(var f=0;f<l.length;f++)i.disableVertexAttribArray(l[f])}else console.warn("Device not support ANGLE_instanced_arrays extension")},_bindInstancedAttributes:function(t,e,n){for(var i=this.gl,r=t.getInstancedAttributesBuffers(this),o=[],a=0;a<r.length;a++){var s=r[a],l=e.getAttribLocation(i,s.symbol);if(!(l<0)){var c=Qt[s.type]||i.FLOAT;i.enableVertexAttribArray(l),i.bindBuffer(i.ARRAY_BUFFER,s.buffer),i.vertexAttribPointer(l,s.size,c,!1,0,0),n.vertexAttribDivisorANGLE(l,s.divisor),o.push(l)}}return o},_bindMaterial:function(t,e,n,i,r,o,a){for(var s=this.gl,l=o===n,c=n.currentTextureSlot(),u=e.getEnabledUniforms(),h=e.getTextureUniforms(),f=this._placeholderTexture,d=0;d<h.length;d++){var p=h[d],g=a(t,e,p),m=e.uniforms[p].type;if("t"===m&&g)g.__slot=-1;else if("tv"===m)for(var v=0;v<g.length;v++)g[v]&&(g[v].__slot=-1)}f.__slot=-1;for(d=0;d<u.length;d++){p=u[d];var y=e.uniforms[p],_=(g=a(t,e,p),m=y.type,"t"===m);if(_&&(g&&g.isRenderable()||(g=f)),r&&l){var b=a(i,r,p);if(_&&(b&&b.isRenderable()||(b=f)),b===g){if(_)n.takeCurrentTextureSlot(this,null);else if("tv"===m&&g)for(v=0;v<g.length;v++)n.takeCurrentTextureSlot(this,null);continue}}if(null!=g)if(_)if(g.__slot<0){var x=n.currentTextureSlot(),w=n.setUniform(s,"1i",p,x);w&&(n.takeCurrentTextureSlot(this,g),g.__slot=x)}else n.setUniform(s,"1i",p,g.__slot);else if(Array.isArray(g)){if(0===g.length)continue;if("tv"===m){if(!n.hasUniform(p))continue;var S=[];for(v=0;v<g.length;v++){var T=g[v];if(T.__slot<0){x=n.currentTextureSlot();S.push(x),n.takeCurrentTextureSlot(this,T),T.__slot=x}else S.push(T.__slot)}n.setUniform(s,"1iv",p,S)}else n.setUniform(s,y.type,p,g)}else n.setUniform(s,y.type,p,g)}var O=n.currentTextureSlot();return n.resetTextureSlot(c),O},_bindVAO:function(t,e,n,i){var r=!n.dynamic,o=this.gl,a=this.__uid__+"-"+i.__uid__,s=n.__vaoCache[a];if(!s){var l=n.getBufferChunks(this);if(!l||!l.length)return;for(var c=l[0],u=c.attributeBuffers,h=c.indicesBuffer,f=[],d=[],p=0;p<u.length;p++){var g,m=u[p],v=m.name,y=m.semantic;if(y){var _=e.attributeSemantics[y];g=_&&_.symbol}else g=v;g&&i.attributes[g]&&(f.push(m),d.push(g))}s=new te(f,d,h),r&&(n.__vaoCache[a]=s)}var b=!0;t&&r&&(null==s.vao?s.vao=t.createVertexArrayOES():b=!1,t.bindVertexArrayOES(s.vao));f=s.availableAttributes,h=s.indicesBuffer;if(b){var x=i.enableAttributes(this,s.availableAttributeSymbols,t&&r&&s);for(p=0;p<f.length;p++){var w=x[p];if(-1!==w){m=f[p];var S=m.buffer,T=m.size,O=Qt[m.type]||o.FLOAT;o.bindBuffer(o.ARRAY_BUFFER,S),o.vertexAttribPointer(w,T,O,!1,0,0)}}n.isUseIndices()&&o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,h.buffer)}return s},renderPreZ:function(t,e,n){var i=this.gl,r=this._prezMaterial||new K({shader:new zt(zt.source("clay.prez.vertex"),zt.source("clay.prez.fragment"))});this._prezMaterial=r,i.colorMask(!1,!1,!1,!1),i.depthMask(!0),this.renderPass(t,n,{ifRender:function(t){return!t.ignorePreZ},isMaterialChanged:function(t,e){var n=t.material,i=e.material;return n.get("diffuseMap")!==i.get("diffuseMap")||(n.get("alphaCutoff")||0)!==(i.get("alphaCutoff")||0)},getUniform:function(t,e,n){if("alphaMap"===n)return t.material.get("diffuseMap");if("alphaCutoff"===n){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var i=t.material.get("alphaCutoff");return i||0}return 0}return"uvRepeat"===n?t.material.get("uvRepeat"):"uvOffset"===n?t.material.get("uvOffset"):e.get(n)},getMaterial:function(){return r},sort:this.opaqueSortCompare}),i.colorMask(!0,!0,!0,!0),i.depthMask(!0)},disposeScene:function(t){this.disposeNode(t,!0,!0),t.dispose()},disposeNode:function(t,e,n){t.getParent()&&t.getParent().remove(t);var i={};t.traverse((function(t){var r=t.material;if(t.geometry&&e&&t.geometry.dispose(this),n&&r&&!i[r.__uid__]){for(var o=r.getTextureUniforms(),a=0;a<o.length;a++){var s=o[a],l=r.uniforms[s].value,c=r.uniforms[s].type;if(l)if("t"===c)l.dispose&&l.dispose(this);else if("tv"===c)for(var u=0;u<l.length;u++)l[u]&&l[u].dispose&&l[u].dispose(this)}i[r.__uid__]=!0}t.dispose&&t.dispose(this)}),this)},disposeGeometry:function(t){t.dispose(this)},disposeTexture:function(t){t.dispose(this)},disposeFrameBuffer:function(t){t.dispose(this)},dispose:function(){},screenToNDC:function(t,e,n){n||(n=new rt),e=this._height-e;var i=this.viewport,r=n.array;return r[0]=(t-i.x)/i.width,r[0]=2*r[0]-1,r[1]=(e-i.y)/i.height,r[1]=2*r[1]-1,n}});ne.opaqueSortCompare=ne.prototype.opaqueSortCompare=function(t,e){return t.renderOrder===e.renderOrder?t.__program===e.__program?t.material===e.material?t.geometry.__uid__-e.geometry.__uid__:t.material.__uid__-e.material.__uid__:t.__program&&e.__program?t.__program.__uid__-e.__program.__uid__:0:t.renderOrder-e.renderOrder},ne.transparentSortCompare=ne.prototype.transparentSortCompare=function(t,e){return t.renderOrder===e.renderOrder?t.__depth===e.__depth?t.__program===e.__program?t.material===e.material?t.geometry.__uid__-e.geometry.__uid__:t.material.__uid__-e.material.__uid__:t.__program&&e.__program?t.__program.__uid__-e.__program.__uid__:0:t.__depth-e.__depth:t.renderOrder-e.renderOrder};var ie={IDENTITY:Xt(),WORLD:Xt(),VIEW:Xt(),PROJECTION:Xt(),WORLDVIEW:Xt(),VIEWPROJECTION:Xt(),WORLDVIEWPROJECTION:Xt(),WORLDINVERSE:Xt(),VIEWINVERSE:Xt(),PROJECTIONINVERSE:Xt(),WORLDVIEWINVERSE:Xt(),VIEWPROJECTIONINVERSE:Xt(),WORLDVIEWPROJECTIONINVERSE:Xt(),WORLDTRANSPOSE:Xt(),VIEWTRANSPOSE:Xt(),PROJECTIONTRANSPOSE:Xt(),WORLDVIEWTRANSPOSE:Xt(),VIEWPROJECTIONTRANSPOSE:Xt(),WORLDVIEWPROJECTIONTRANSPOSE:Xt(),WORLDINVERSETRANSPOSE:Xt(),VIEWINVERSETRANSPOSE:Xt(),PROJECTIONINVERSETRANSPOSE:Xt(),WORLDVIEWINVERSETRANSPOSE:Xt(),VIEWPROJECTIONINVERSETRANSPOSE:Xt(),WORLDVIEWPROJECTIONINVERSETRANSPOSE:Xt()};ne.COLOR_BUFFER_BIT=w.COLOR_BUFFER_BIT,ne.DEPTH_BUFFER_BIT=w.DEPTH_BUFFER_BIT,ne.STENCIL_BUFFER_BIT=w.STENCIL_BUFFER_BIT;var re=ne,oe=function(t,e,n){t=t||0,e=e||0,n=n||0,this.array=Wt.fromValues(t,e,n),this._dirty=!0};oe.prototype={constructor:oe,add:function(t){return Wt.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e,n){return this.array[0]=t,this.array[1]=e,this.array[2]=n,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this._dirty=!0,this},clone:function(){return new oe(this.x,this.y,this.z)},copy:function(t){return Wt.copy(this.array,t.array),this._dirty=!0,this},cross:function(t,e){return Wt.cross(this.array,t.array,e.array),this._dirty=!0,this},dist:function(t){return Wt.dist(this.array,t.array)},distance:function(t){return Wt.distance(this.array,t.array)},div:function(t){return Wt.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return Wt.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return Wt.dot(this.array,t.array)},len:function(){return Wt.len(this.array)},length:function(){return Wt.length(this.array)},lerp:function(t,e,n){return Wt.lerp(this.array,t.array,e.array,n),this._dirty=!0,this},min:function(t){return Wt.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return Wt.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return Wt.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return Wt.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return Wt.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return Wt.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return Wt.random(this.array,t),this._dirty=!0,this},scale:function(t){return Wt.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return Wt.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return Wt.sqrDist(this.array,t.array)},squaredDistance:function(t){return Wt.squaredDistance(this.array,t.array)},sqrLen:function(){return Wt.sqrLen(this.array)},squaredLength:function(){return Wt.squaredLength(this.array)},sub:function(t){return Wt.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return Wt.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat3:function(t){return Wt.transformMat3(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return Wt.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return Wt.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},applyProjection:function(t){var e=this.array;if(t=t.array,0===t[15]){var n=-1/e[2];e[0]=t[0]*e[0]*n,e[1]=t[5]*e[1]*n,e[2]=(t[10]*e[2]+t[14])*n}else e[0]=t[0]*e[0]+t[12],e[1]=t[5]*e[1]+t[13],e[2]=t[10]*e[2]+t[14];return this._dirty=!0,this},eulerFromQuat:function(t,e){oe.eulerFromQuat(this,t,e)},eulerFromMat3:function(t,e){oe.eulerFromMat3(this,t,e)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var ae=Object.defineProperty;if(ae){var se=oe.prototype;ae(se,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),ae(se,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),ae(se,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}})}function le(t,e,n){return t<e?e:t>n?n:t}oe.add=function(t,e,n){return Wt.add(t.array,e.array,n.array),t._dirty=!0,t},oe.set=function(t,e,n,i){Wt.set(t.array,e,n,i),t._dirty=!0},oe.copy=function(t,e){return Wt.copy(t.array,e.array),t._dirty=!0,t},oe.cross=function(t,e,n){return Wt.cross(t.array,e.array,n.array),t._dirty=!0,t},oe.dist=function(t,e){return Wt.distance(t.array,e.array)},oe.distance=oe.dist,oe.div=function(t,e,n){return Wt.divide(t.array,e.array,n.array),t._dirty=!0,t},oe.divide=oe.div,oe.dot=function(t,e){return Wt.dot(t.array,e.array)},oe.len=function(t){return Wt.length(t.array)},oe.lerp=function(t,e,n,i){return Wt.lerp(t.array,e.array,n.array,i),t._dirty=!0,t},oe.min=function(t,e,n){return Wt.min(t.array,e.array,n.array),t._dirty=!0,t},oe.max=function(t,e,n){return Wt.max(t.array,e.array,n.array),t._dirty=!0,t},oe.mul=function(t,e,n){return Wt.multiply(t.array,e.array,n.array),t._dirty=!0,t},oe.multiply=oe.mul,oe.negate=function(t,e){return Wt.negate(t.array,e.array),t._dirty=!0,t},oe.normalize=function(t,e){return Wt.normalize(t.array,e.array),t._dirty=!0,t},oe.random=function(t,e){return Wt.random(t.array,e),t._dirty=!0,t},oe.scale=function(t,e,n){return Wt.scale(t.array,e.array,n),t._dirty=!0,t},oe.scaleAndAdd=function(t,e,n,i){return Wt.scaleAndAdd(t.array,e.array,n.array,i),t._dirty=!0,t},oe.sqrDist=function(t,e){return Wt.sqrDist(t.array,e.array)},oe.squaredDistance=oe.sqrDist,oe.sqrLen=function(t){return Wt.sqrLen(t.array)},oe.squaredLength=oe.sqrLen,oe.sub=function(t,e,n){return Wt.subtract(t.array,e.array,n.array),t._dirty=!0,t},oe.subtract=oe.sub,oe.transformMat3=function(t,e,n){return Wt.transformMat3(t.array,e.array,n.array),t._dirty=!0,t},oe.transformMat4=function(t,e,n){return Wt.transformMat4(t.array,e.array,n.array),t._dirty=!0,t},oe.transformQuat=function(t,e,n){return Wt.transformQuat(t.array,e.array,n.array),t._dirty=!0,t};var ce=Math.atan2,ue=Math.asin,he=Math.abs;oe.eulerFromQuat=function(t,e,n){t._dirty=!0,e=e.array;var i=t.array,r=e[0],o=e[1],a=e[2],s=e[3],l=r*r,c=o*o,u=a*a,h=s*s;n=(n||"XYZ").toUpperCase();switch(n){case"XYZ":i[0]=ce(2*(r*s-o*a),h-l-c+u),i[1]=ue(le(2*(r*a+o*s),-1,1)),i[2]=ce(2*(a*s-r*o),h+l-c-u);break;case"YXZ":i[0]=ue(le(2*(r*s-o*a),-1,1)),i[1]=ce(2*(r*a+o*s),h-l-c+u),i[2]=ce(2*(r*o+a*s),h-l+c-u);break;case"ZXY":i[0]=ue(le(2*(r*s+o*a),-1,1)),i[1]=ce(2*(o*s-a*r),h-l-c+u),i[2]=ce(2*(a*s-r*o),h-l+c-u);break;case"ZYX":i[0]=ce(2*(r*s+a*o),h-l-c+u),i[1]=ue(le(2*(o*s-r*a),-1,1)),i[2]=ce(2*(r*o+a*s),h+l-c-u);break;case"YZX":i[0]=ce(2*(r*s-a*o),h-l+c-u),i[1]=ce(2*(o*s-r*a),h+l-c-u),i[2]=ue(le(2*(r*o+a*s),-1,1));break;case"XZY":i[0]=ce(2*(r*s+o*a),h-l+c-u),i[1]=ce(2*(r*a+o*s),h+l-c-u),i[2]=ue(le(2*(a*s-r*o),-1,1));break;default:console.warn("Unkown order: "+n)}return t},oe.eulerFromMat3=function(t,e,n){var i=e.array,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7],u=i[2],h=i[5],f=i[8],d=t.array;n=(n||"XYZ").toUpperCase();switch(n){case"XYZ":d[1]=ue(le(a,-1,1)),he(a)<.99999?(d[0]=ce(-c,f),d[2]=ce(-o,r)):(d[0]=ce(h,l),d[2]=0);break;case"YXZ":d[0]=ue(-le(c,-1,1)),he(c)<.99999?(d[1]=ce(a,f),d[2]=ce(s,l)):(d[1]=ce(-u,r),d[2]=0);break;case"ZXY":d[0]=ue(le(h,-1,1)),he(h)<.99999?(d[1]=ce(-u,f),d[2]=ce(-o,l)):(d[1]=0,d[2]=ce(s,r));break;case"ZYX":d[1]=ue(-le(u,-1,1)),he(u)<.99999?(d[0]=ce(h,f),d[2]=ce(s,r)):(d[0]=0,d[2]=ce(-o,l));break;case"YZX":d[2]=ue(le(s,-1,1)),he(s)<.99999?(d[0]=ce(-c,l),d[1]=ce(-u,r)):(d[0]=0,d[1]=ce(a,f));break;case"XZY":d[2]=ue(-le(o,-1,1)),he(o)<.99999?(d[0]=ce(h,l),d[1]=ce(a,r)):(d[0]=ce(-c,f),d[1]=0);break;default:console.warn("Unkown order: "+n)}return t._dirty=!0,t},Object.defineProperties(oe,{POSITIVE_X:{get:function(){return new oe(1,0,0)}},NEGATIVE_X:{get:function(){return new oe(-1,0,0)}},POSITIVE_Y:{get:function(){return new oe(0,1,0)}},NEGATIVE_Y:{get:function(){return new oe(0,-1,0)}},POSITIVE_Z:{get:function(){return new oe(0,0,1)}},NEGATIVE_Z:{get:function(){return new oe(0,0,-1)}},UP:{get:function(){return new oe(0,1,0)}},ZERO:{get:function(){return new oe}}});var fe=oe,de=1e-5,pe=function(t,e){this.origin=t||new fe,this.direction=e||new fe};pe.prototype={constructor:pe,intersectPlane:function(t,e){var n=t.normal.array,i=t.distance,r=this.origin.array,o=this.direction.array,a=Wt.dot(n,o);if(0===a)return null;e||(e=new fe);var s=(Wt.dot(n,r)-i)/a;return Wt.scaleAndAdd(e.array,r,o,-s),e._dirty=!0,e},mirrorAgainstPlane:function(t){var e=Wt.dot(t.normal.array,this.direction.array);Wt.scaleAndAdd(this.direction.array,this.direction.array,t.normal.array,2*-e),this.direction._dirty=!0},distanceToPoint:function(){var t=Wt.create();return function(e){Wt.sub(t,e,this.origin.array);var n=Wt.dot(t,this.direction.array);if(n<0)return Wt.distance(this.origin.array,e);var i=Wt.lenSquared(t);return Math.sqrt(i-n*n)}}(),intersectSphere:function(){var t=Wt.create();return function(e,n,i){var r=this.origin.array,o=this.direction.array;e=e.array,Wt.sub(t,e,r);var a=Wt.dot(t,o),s=Wt.squaredLength(t),l=s-a*a,c=n*n;if(!(l>c)){var u=Math.sqrt(c-l),h=a-u,f=a+u;return i||(i=new fe),h<0?f<0?null:(Wt.scaleAndAdd(i.array,r,o,f),i):(Wt.scaleAndAdd(i.array,r,o,h),i)}}}(),intersectBoundingBox:function(t,e){var n,i,r,o,a,s,l=this.direction.array,c=this.origin.array,u=t.min.array,h=t.max.array,f=1/l[0],d=1/l[1],p=1/l[2];if(f>=0?(n=(u[0]-c[0])*f,i=(h[0]-c[0])*f):(i=(u[0]-c[0])*f,n=(h[0]-c[0])*f),d>=0?(r=(u[1]-c[1])*d,o=(h[1]-c[1])*d):(o=(u[1]-c[1])*d,r=(h[1]-c[1])*d),n>o||r>i)return null;if((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),p>=0?(a=(u[2]-c[2])*p,s=(h[2]-c[2])*p):(s=(u[2]-c[2])*p,a=(h[2]-c[2])*p),n>s||a>i)return null;if((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0)return null;var g=n>=0?n:i;return e||(e=new fe),Wt.scaleAndAdd(e.array,c,l,g),e},intersectTriangle:function(){var t=Wt.create(),e=Wt.create(),n=Wt.create(),i=Wt.create();return function(r,o,a,s,l,c){var u=this.direction.array,h=this.origin.array;r=r.array,o=o.array,a=a.array,Wt.sub(t,o,r),Wt.sub(e,a,r),Wt.cross(i,e,u);var f=Wt.dot(t,i);if(s){if(f>-de)return null}else if(f>-de&&f<de)return null;Wt.sub(n,h,r);var d=Wt.dot(i,n)/f;if(d<0||d>1)return null;Wt.cross(i,t,n);var p=Wt.dot(u,i)/f;if(p<0||p>1||d+p>1)return null;Wt.cross(i,t,e);var g=-Wt.dot(n,i)/f;return g<0?null:(l||(l=new fe),c&&fe.set(c,1-d-p,d,p),Wt.scaleAndAdd(l.array,h,u,g),l)}}(),applyTransform:function(t){fe.add(this.direction,this.direction,this.origin),fe.transformMat4(this.origin,this.origin,t),fe.transformMat4(this.direction,this.direction,t),fe.sub(this.direction,this.direction,this.origin),fe.normalize(this.direction,this.direction)},copy:function(t){fe.copy(this.origin,t.origin),fe.copy(this.direction,t.direction)},clone:function(){var t=new pe;return t.copy(this),t}};var ge=pe,me={create:function(){var t=new J(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},clone:function(t){var e=new J(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},fromValues:function(t,e,n,i){var r=new J(4);return r[0]=t,r[1]=e,r[2]=n,r[3]=i,r},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},set:function(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},subtract:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}};me.sub=me.subtract,me.multiply=function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t},me.mul=me.multiply,me.divide=function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t},me.div=me.divide,me.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},me.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},me.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},me.scaleAndAdd=function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t[2]=e[2]+n[2]*i,t[3]=e[3]+n[3]*i,t},me.distance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+i*i+r*r+o*o)},me.dist=me.distance,me.squaredDistance=function(t,e){var n=e[0]-t[0],i=e[1]-t[1],r=e[2]-t[2],o=e[3]-t[3];return n*n+i*i+r*r+o*o},me.sqrDist=me.squaredDistance,me.length=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return Math.sqrt(e*e+n*n+i*i+r*r)},me.len=me.length,me.squaredLength=function(t){var e=t[0],n=t[1],i=t[2],r=t[3];return e*e+n*n+i*i+r*r},me.sqrLen=me.squaredLength,me.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},me.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},me.normalize=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a,t[2]=e[2]*a,t[3]=e[3]*a),t},me.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},me.lerp=function(t,e,n,i){var r=e[0],o=e[1],a=e[2],s=e[3];return t[0]=r+i*(n[0]-r),t[1]=o+i*(n[1]-o),t[2]=a+i*(n[2]-a),t[3]=s+i*(n[3]-s),t},me.random=function(t,e){return e=e||1,t[0]=Q(),t[1]=Q(),t[2]=Q(),t[3]=Q(),me.normalize(t,t),me.scale(t,t,e),t},me.transformMat4=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3];return t[0]=n[0]*i+n[4]*r+n[8]*o+n[12]*a,t[1]=n[1]*i+n[5]*r+n[9]*o+n[13]*a,t[2]=n[2]*i+n[6]*r+n[10]*o+n[14]*a,t[3]=n[3]*i+n[7]*r+n[11]*o+n[15]*a,t},me.transformQuat=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=n[0],s=n[1],l=n[2],c=n[3],u=c*i+s*o-l*r,h=c*r+l*i-a*o,f=c*o+a*r-s*i,d=-a*i-s*r-l*o;return t[0]=u*c+d*-a+h*-l-f*-s,t[1]=h*c+d*-s+f*-a-u*-l,t[2]=f*c+d*-l+u*-s-h*-a,t},me.forEach=function(){var t=me.create();return function(e,n,i,r,o,a){var s,l;for(n||(n=4),i||(i=0),l=r?Math.min(r*n+i,e.length):e.length,s=i;s<l;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],o(t,t,a),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();var ve=me,ye={create:function(){var t=new J(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},fromMat4:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},clone:function(t){var e=new J(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},transpose:function(t,e){if(t===e){var n=e[1],i=e[2],r=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=i,t[7]=r}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},invert:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=u*a-s*c,f=-u*o+s*l,d=c*o-a*l,p=n*h+i*f+r*d;return p?(p=1/p,t[0]=h*p,t[1]=(-u*i+r*c)*p,t[2]=(s*i-r*a)*p,t[3]=f*p,t[4]=(u*n-r*l)*p,t[5]=(-s*n+r*o)*p,t[6]=d*p,t[7]=(-c*n+i*l)*p,t[8]=(a*n-i*o)*p,t):null},adjoint:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8];return t[0]=a*u-s*c,t[1]=r*c-i*u,t[2]=i*s-r*a,t[3]=s*l-o*u,t[4]=n*u-r*l,t[5]=r*o-n*s,t[6]=o*c-a*l,t[7]=i*l-n*c,t[8]=n*a-i*o,t},determinant:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*(c*o-a*l)+n*(-c*r+a*s)+i*(l*r-o*s)},multiply:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],d=n[1],p=n[2],g=n[3],m=n[4],v=n[5],y=n[6],_=n[7],b=n[8];return t[0]=f*i+d*a+p*c,t[1]=f*r+d*s+p*u,t[2]=f*o+d*l+p*h,t[3]=g*i+m*a+v*c,t[4]=g*r+m*s+v*u,t[5]=g*o+m*l+v*h,t[6]=y*i+_*a+b*c,t[7]=y*r+_*s+b*u,t[8]=y*o+_*l+b*h,t}};ye.mul=ye.multiply,ye.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=n[0],d=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t[6]=f*i+d*a+c,t[7]=f*r+d*s+u,t[8]=f*o+d*l+h,t},ye.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],f=Math.sin(n),d=Math.cos(n);return t[0]=d*i+f*a,t[1]=d*r+f*s,t[2]=d*o+f*l,t[3]=d*a-f*i,t[4]=d*s-f*r,t[5]=d*l-f*o,t[6]=c,t[7]=u,t[8]=h,t},ye.scale=function(t,e,n){var i=n[0],r=n[1];return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=r*e[3],t[4]=r*e[4],t[5]=r*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},ye.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},ye.fromQuat=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n+n,s=i+i,l=r+r,c=n*a,u=i*a,h=i*s,f=r*a,d=r*s,p=r*l,g=o*a,m=o*s,v=o*l;return t[0]=1-h-p,t[3]=u-v,t[6]=f+m,t[1]=u+v,t[4]=1-c-p,t[7]=d-g,t[2]=f-m,t[5]=d+g,t[8]=1-c-h,t},ye.normalFromMat4=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],d=e[11],p=e[12],g=e[13],m=e[14],v=e[15],y=n*s-i*a,_=n*l-r*a,b=n*c-o*a,x=i*l-r*s,w=i*c-o*s,S=r*c-o*l,T=u*g-h*p,O=u*m-f*p,C=u*v-d*p,M=h*m-f*g,A=h*v-d*g,D=f*v-d*m,E=y*D-_*A+b*M+x*C-w*O+S*T;return E?(E=1/E,t[0]=(s*D-l*A+c*M)*E,t[1]=(l*C-a*D-c*O)*E,t[2]=(a*A-s*C+c*T)*E,t[3]=(r*A-i*D-o*M)*E,t[4]=(n*D-r*C+o*O)*E,t[5]=(i*C-n*A-o*T)*E,t[6]=(g*S-m*w+v*x)*E,t[7]=(m*b-p*S-v*_)*E,t[8]=(p*w-g*b+v*y)*E,t):null},ye.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))};var _e=ye,be={create:function(){var t=new J(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}};be.rotationTo=function(){var t=Wt.create(),e=Wt.fromValues(1,0,0),n=Wt.fromValues(0,1,0);return function(i,r,o){var a=Wt.dot(r,o);return a<-.999999?(Wt.cross(t,e,r),Wt.length(t)<1e-6&&Wt.cross(t,n,r),Wt.normalize(t,t),be.setAxisAngle(i,t,Math.PI),i):a>.999999?(i[0]=0,i[1]=0,i[2]=0,i[3]=1,i):(Wt.cross(t,r,o),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=1+a,be.normalize(i,i))}}(),be.setAxes=function(){var t=_e.create();return function(e,n,i,r){return t[0]=i[0],t[3]=i[1],t[6]=i[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],be.normalize(e,be.fromMat3(e,t))}}(),be.clone=ve.clone,be.fromValues=ve.fromValues,be.copy=ve.copy,be.set=ve.set,be.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},be.setAxisAngle=function(t,e,n){n*=.5;var i=Math.sin(n);return t[0]=i*e[0],t[1]=i*e[1],t[2]=i*e[2],t[3]=Math.cos(n),t},be.add=ve.add,be.multiply=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*u+a*s+r*c-o*l,t[1]=r*u+a*l+o*s-i*c,t[2]=o*u+a*c+i*l-r*s,t[3]=a*u-i*s-r*l-o*c,t},be.mul=be.multiply,be.scale=ve.scale,be.rotateX=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+a*s,t[1]=r*l+o*s,t[2]=o*l-r*s,t[3]=a*l-i*s,t},be.rotateY=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l-o*s,t[1]=r*l+a*s,t[2]=o*l+i*s,t[3]=a*l-r*s,t},be.rotateZ=function(t,e,n){n*=.5;var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+r*s,t[1]=r*l-i*s,t[2]=o*l+a*s,t[3]=a*l-o*s,t},be.calculateW=function(t,e){var n=e[0],i=e[1],r=e[2];return t[0]=n,t[1]=i,t[2]=r,t[3]=Math.sqrt(Math.abs(1-n*n-i*i-r*r)),t},be.dot=ve.dot,be.lerp=ve.lerp,be.slerp=function(t,e,n,i){var r,o,a,s,l,c=e[0],u=e[1],h=e[2],f=e[3],d=n[0],p=n[1],g=n[2],m=n[3];return o=c*d+u*p+h*g+f*m,o<0&&(o=-o,d=-d,p=-p,g=-g,m=-m),1-o>1e-6?(r=Math.acos(o),a=Math.sin(r),s=Math.sin((1-i)*r)/a,l=Math.sin(i*r)/a):(s=1-i,l=i),t[0]=s*c+l*d,t[1]=s*u+l*p,t[2]=s*h+l*g,t[3]=s*f+l*m,t},be.invert=function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*n+i*i+r*r+o*o,s=a?1/a:0;return t[0]=-n*s,t[1]=-i*s,t[2]=-r*s,t[3]=o*s,t},be.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},be.length=ve.length,be.len=be.length,be.squaredLength=ve.squaredLength,be.sqrLen=be.squaredLength,be.normalize=ve.normalize,be.fromMat3=function(t,e){var n,i=e[0]+e[4]+e[8];if(i>0)n=Math.sqrt(i+1),t[3]=.5*n,n=.5/n,t[0]=(e[5]-e[7])*n,t[1]=(e[6]-e[2])*n,t[2]=(e[1]-e[3])*n;else{var r=0;e[4]>e[0]&&(r=1),e[8]>e[3*r+r]&&(r=2);var o=(r+1)%3,a=(r+2)%3;n=Math.sqrt(e[3*r+r]-e[3*o+o]-e[3*a+a]+1),t[r]=.5*n,n=.5/n,t[3]=(e[3*o+a]-e[3*a+o])*n,t[o]=(e[3*o+r]+e[3*r+o])*n,t[a]=(e[3*a+r]+e[3*r+a])*n}return t};var xe=be,we=function(){this._axisX=new fe,this._axisY=new fe,this._axisZ=new fe,this.array=Gt.create(),this._dirty=!0};we.prototype={constructor:we,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},adjoint:function(){return Gt.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new we).copy(this)},copy:function(t){return Gt.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return Gt.determinant(this.array)},fromQuat:function(t){return Gt.fromQuat(this.array,t.array),this._dirty=!0,this},fromRotationTranslation:function(t,e){return Gt.fromRotationTranslation(this.array,t.array,e.array),this._dirty=!0,this},fromMat2d:function(t){return we.fromMat2d(this,t),this},frustum:function(t,e,n,i,r,o){return Gt.frustum(this.array,t,e,n,i,r,o),this._dirty=!0,this},identity:function(){return Gt.identity(this.array),this._dirty=!0,this},invert:function(){return Gt.invert(this.array,this.array),this._dirty=!0,this},lookAt:function(t,e,n){return Gt.lookAt(this.array,t.array,e.array,n.array),this._dirty=!0,this},mul:function(t){return Gt.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Gt.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Gt.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Gt.multiply(this.array,t.array,this.array),this._dirty=!0,this},ortho:function(t,e,n,i,r,o){return Gt.ortho(this.array,t,e,n,i,r,o),this._dirty=!0,this},perspective:function(t,e,n,i){return Gt.perspective(this.array,t,e,n,i),this._dirty=!0,this},rotate:function(t,e){return Gt.rotate(this.array,this.array,t,e.array),this._dirty=!0,this},rotateX:function(t){return Gt.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return Gt.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return Gt.rotateZ(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Gt.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return Gt.translate(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return Gt.transpose(this.array,this.array),this._dirty=!0,this},decomposeMatrix:function(){var t=Wt.create(),e=Wt.create(),n=Wt.create(),i=_e.create();return function(r,o,a){var s=this.array;Wt.set(t,s[0],s[1],s[2]),Wt.set(e,s[4],s[5],s[6]),Wt.set(n,s[8],s[9],s[10]);var l=Wt.length(t),c=Wt.length(e),u=Wt.length(n),h=this.determinant();h<0&&(l=-l),r&&r.set(l,c,u),a.set(s[12],s[13],s[14]),_e.fromMat4(i,s),i[0]/=l,i[1]/=l,i[2]/=l,i[3]/=c,i[4]/=c,i[5]/=c,i[6]/=u,i[7]/=u,i[8]/=u,xe.fromMat3(o.array,i),xe.normalize(o.array,o.array),o._dirty=!0,a._dirty=!0}}(),toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Se=Object.defineProperty;if(Se){var Te=we.prototype;Se(Te,"z",{get:function(){var t=this.array;return this._axisZ.set(t[8],t[9],t[10]),this._axisZ},set:function(t){var e=this.array;t=t.array,e[8]=t[0],e[9]=t[1],e[10]=t[2],this._dirty=!0}}),Se(Te,"y",{get:function(){var t=this.array;return this._axisY.set(t[4],t[5],t[6]),this._axisY},set:function(t){var e=this.array;t=t.array,e[4]=t[0],e[5]=t[1],e[6]=t[2],this._dirty=!0}}),Se(Te,"x",{get:function(){var t=this.array;return this._axisX.set(t[0],t[1],t[2]),this._axisX},set:function(t){var e=this.array;t=t.array,e[0]=t[0],e[1]=t[1],e[2]=t[2],this._dirty=!0}})}we.adjoint=function(t,e){return Gt.adjoint(t.array,e.array),t._dirty=!0,t},we.copy=function(t,e){return Gt.copy(t.array,e.array),t._dirty=!0,t},we.determinant=function(t){return Gt.determinant(t.array)},we.identity=function(t){return Gt.identity(t.array),t._dirty=!0,t},we.ortho=function(t,e,n,i,r,o,a){return Gt.ortho(t.array,e,n,i,r,o,a),t._dirty=!0,t},we.perspective=function(t,e,n,i,r){return Gt.perspective(t.array,e,n,i,r),t._dirty=!0,t},we.lookAt=function(t,e,n,i){return Gt.lookAt(t.array,e.array,n.array,i.array),t._dirty=!0,t},we.invert=function(t,e){return Gt.invert(t.array,e.array),t._dirty=!0,t},we.mul=function(t,e,n){return Gt.mul(t.array,e.array,n.array),t._dirty=!0,t},we.multiply=we.mul,we.fromQuat=function(t,e){return Gt.fromQuat(t.array,e.array),t._dirty=!0,t},we.fromRotationTranslation=function(t,e,n){return Gt.fromRotationTranslation(t.array,e.array,n.array),t._dirty=!0,t},we.fromMat2d=function(t,e){t._dirty=!0;e=e.array,t=t.array;return t[0]=e[0],t[4]=e[2],t[12]=e[4],t[1]=e[1],t[5]=e[3],t[13]=e[5],t},we.rotate=function(t,e,n,i){return Gt.rotate(t.array,e.array,n,i.array),t._dirty=!0,t},we.rotateX=function(t,e,n){return Gt.rotateX(t.array,e.array,n),t._dirty=!0,t},we.rotateY=function(t,e,n){return Gt.rotateY(t.array,e.array,n),t._dirty=!0,t},we.rotateZ=function(t,e,n){return Gt.rotateZ(t.array,e.array,n),t._dirty=!0,t},we.scale=function(t,e,n){return Gt.scale(t.array,e.array,n.array),t._dirty=!0,t},we.transpose=function(t,e){return Gt.transpose(t.array,e.array),t._dirty=!0,t},we.translate=function(t,e,n){return Gt.translate(t.array,e.array,n.array),t._dirty=!0,t};var Oe=we,Ce=function(t,e,n,i){t=t||0,e=e||0,n=n||0,i=void 0===i?1:i,this.array=xe.fromValues(t,e,n,i),this._dirty=!0};Ce.prototype={constructor:Ce,add:function(t){return xe.add(this.array,this.array,t.array),this._dirty=!0,this},calculateW:function(){return xe.calculateW(this.array,this.array),this._dirty=!0,this},set:function(t,e,n,i){return this.array[0]=t,this.array[1]=e,this.array[2]=n,this.array[3]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new Ce(this.x,this.y,this.z,this.w)},conjugate:function(){return xe.conjugate(this.array,this.array),this._dirty=!0,this},copy:function(t){return xe.copy(this.array,t.array),this._dirty=!0,this},dot:function(t){return xe.dot(this.array,t.array)},fromMat3:function(t){return xe.fromMat3(this.array,t.array),this._dirty=!0,this},fromMat4:function(){var t=_e.create();return function(e){return _e.fromMat4(t,e.array),_e.transpose(t,t),xe.fromMat3(this.array,t),this._dirty=!0,this}}(),identity:function(){return xe.identity(this.array),this._dirty=!0,this},invert:function(){return xe.invert(this.array,this.array),this._dirty=!0,this},len:function(){return xe.len(this.array)},length:function(){return xe.length(this.array)},lerp:function(t,e,n){return xe.lerp(this.array,t.array,e.array,n),this._dirty=!0,this},mul:function(t){return xe.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return xe.multiply(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return xe.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return xe.multiply(this.array,t.array,this.array),this._dirty=!0,this},normalize:function(){return xe.normalize(this.array,this.array),this._dirty=!0,this},rotateX:function(t){return xe.rotateX(this.array,this.array,t),this._dirty=!0,this},rotateY:function(t){return xe.rotateY(this.array,this.array,t),this._dirty=!0,this},rotateZ:function(t){return xe.rotateZ(this.array,this.array,t),this._dirty=!0,this},rotationTo:function(t,e){return xe.rotationTo(this.array,t.array,e.array),this._dirty=!0,this},setAxes:function(t,e,n){return xe.setAxes(this.array,t.array,e.array,n.array),this._dirty=!0,this},setAxisAngle:function(t,e){return xe.setAxisAngle(this.array,t.array,e),this._dirty=!0,this},slerp:function(t,e,n){return xe.slerp(this.array,t.array,e.array,n),this._dirty=!0,this},sqrLen:function(){return xe.sqrLen(this.array)},squaredLength:function(){return xe.squaredLength(this.array)},fromEuler:function(t,e){return Ce.fromEuler(this,t,e)},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var Me=Object.defineProperty;if(Me){var Ae=Ce.prototype;Me(Ae,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),Me(Ae,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),Me(Ae,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),Me(Ae,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}Ce.add=function(t,e,n){return xe.add(t.array,e.array,n.array),t._dirty=!0,t},Ce.set=function(t,e,n,i,r){xe.set(t.array,e,n,i,r),t._dirty=!0},Ce.copy=function(t,e){return xe.copy(t.array,e.array),t._dirty=!0,t},Ce.calculateW=function(t,e){return xe.calculateW(t.array,e.array),t._dirty=!0,t},Ce.conjugate=function(t,e){return xe.conjugate(t.array,e.array),t._dirty=!0,t},Ce.identity=function(t){return xe.identity(t.array),t._dirty=!0,t},Ce.invert=function(t,e){return xe.invert(t.array,e.array),t._dirty=!0,t},Ce.dot=function(t,e){return xe.dot(t.array,e.array)},Ce.len=function(t){return xe.length(t.array)},Ce.lerp=function(t,e,n,i){return xe.lerp(t.array,e.array,n.array,i),t._dirty=!0,t},Ce.slerp=function(t,e,n,i){return xe.slerp(t.array,e.array,n.array,i),t._dirty=!0,t},Ce.mul=function(t,e,n){return xe.multiply(t.array,e.array,n.array),t._dirty=!0,t},Ce.multiply=Ce.mul,Ce.rotateX=function(t,e,n){return xe.rotateX(t.array,e.array,n),t._dirty=!0,t},Ce.rotateY=function(t,e,n){return xe.rotateY(t.array,e.array,n),t._dirty=!0,t},Ce.rotateZ=function(t,e,n){return xe.rotateZ(t.array,e.array,n),t._dirty=!0,t},Ce.setAxisAngle=function(t,e,n){return xe.setAxisAngle(t.array,e.array,n),t._dirty=!0,t},Ce.normalize=function(t,e){return xe.normalize(t.array,e.array),t._dirty=!0,t},Ce.sqrLen=function(t){return xe.sqrLen(t.array)},Ce.squaredLength=Ce.sqrLen,Ce.fromMat3=function(t,e){return xe.fromMat3(t.array,e.array),t._dirty=!0,t},Ce.setAxes=function(t,e,n,i){return xe.setAxes(t.array,e.array,n.array,i.array),t._dirty=!0,t},Ce.rotationTo=function(t,e,n){return xe.rotationTo(t.array,e.array,n.array),t._dirty=!0,t},Ce.fromEuler=function(t,e,n){t._dirty=!0,e=e.array;var i=t.array,r=Math.cos(e[0]/2),o=Math.cos(e[1]/2),a=Math.cos(e[2]/2),s=Math.sin(e[0]/2),l=Math.sin(e[1]/2),c=Math.sin(e[2]/2);n=(n||"XYZ").toUpperCase();switch(n){case"XYZ":i[0]=s*o*a+r*l*c,i[1]=r*l*a-s*o*c,i[2]=r*o*c+s*l*a,i[3]=r*o*a-s*l*c;break;case"YXZ":i[0]=s*o*a+r*l*c,i[1]=r*l*a-s*o*c,i[2]=r*o*c-s*l*a,i[3]=r*o*a+s*l*c;break;case"ZXY":i[0]=s*o*a-r*l*c,i[1]=r*l*a+s*o*c,i[2]=r*o*c+s*l*a,i[3]=r*o*a-s*l*c;break;case"ZYX":i[0]=s*o*a-r*l*c,i[1]=r*l*a+s*o*c,i[2]=r*o*c-s*l*a,i[3]=r*o*a+s*l*c;break;case"YZX":i[0]=s*o*a+r*l*c,i[1]=r*l*a+s*o*c,i[2]=r*o*c-s*l*a,i[3]=r*o*a-s*l*c;break;case"XZY":i[0]=s*o*a-r*l*c,i[1]=r*l*a-s*o*c,i[2]=r*o*c+s*l*a,i[3]=r*o*a+s*l*c;break}};var De=Ce,Ee=Wt.set,Ie=Wt.copy,Pe=function(t,e){this.min=t||new fe(1/0,1/0,1/0),this.max=e||new fe(-1/0,-1/0,-1/0),this.vertices=null};Pe.prototype={constructor:Pe,updateFromVertices:function(t){if(t.length>0){var e=this.min,n=this.max,i=e.array,r=n.array;Ie(i,t[0]),Ie(r,t[0]);for(var o=1;o<t.length;o++){var a=t[o];a[0]<i[0]&&(i[0]=a[0]),a[1]<i[1]&&(i[1]=a[1]),a[2]<i[2]&&(i[2]=a[2]),a[0]>r[0]&&(r[0]=a[0]),a[1]>r[1]&&(r[1]=a[1]),a[2]>r[2]&&(r[2]=a[2])}e._dirty=!0,n._dirty=!0}},union:function(t){var e=this.min,n=this.max;return Wt.min(e.array,e.array,t.min.array),Wt.max(n.array,n.array,t.max.array),e._dirty=!0,n._dirty=!0,this},intersection:function(t){var e=this.min,n=this.max;return Wt.max(e.array,e.array,t.min.array),Wt.min(n.array,n.array,t.max.array),e._dirty=!0,n._dirty=!0,this},intersectBoundingBox:function(t){var e=this.min.array,n=this.max.array,i=t.min.array,r=t.max.array;return!(e[0]>r[0]||e[1]>r[1]||e[2]>r[2]||n[0]<i[0]||n[1]<i[1]||n[2]<i[2])},containBoundingBox:function(t){var e=this.min.array,n=this.max.array,i=t.min.array,r=t.max.array;return e[0]<=i[0]&&e[1]<=i[1]&&e[2]<=i[2]&&n[0]>=r[0]&&n[1]>=r[1]&&n[2]>=r[2]},containPoint:function(t){var e=this.min.array,n=this.max.array,i=t.array;return e[0]<=i[0]&&e[1]<=i[1]&&e[2]<=i[2]&&n[0]>=i[0]&&n[1]>=i[1]&&n[2]>=i[2]},isFinite:function(){var t=this.min.array,e=this.max.array;return isFinite(t[0])&&isFinite(t[1])&&isFinite(t[2])&&isFinite(e[0])&&isFinite(e[1])&&isFinite(e[2])},applyTransform:function(t){this.transformFrom(this,t)},transformFrom:function(){var t=Wt.create(),e=Wt.create(),n=Wt.create(),i=Wt.create(),r=Wt.create(),o=Wt.create();return function(a,s){var l=a.min.array,c=a.max.array,u=s.array;return t[0]=u[0]*l[0],t[1]=u[1]*l[0],t[2]=u[2]*l[0],e[0]=u[0]*c[0],e[1]=u[1]*c[0],e[2]=u[2]*c[0],n[0]=u[4]*l[1],n[1]=u[5]*l[1],n[2]=u[6]*l[1],i[0]=u[4]*c[1],i[1]=u[5]*c[1],i[2]=u[6]*c[1],r[0]=u[8]*l[2],r[1]=u[9]*l[2],r[2]=u[10]*l[2],o[0]=u[8]*c[2],o[1]=u[9]*c[2],o[2]=u[10]*c[2],l=this.min.array,c=this.max.array,l[0]=Math.min(t[0],e[0])+Math.min(n[0],i[0])+Math.min(r[0],o[0])+u[12],l[1]=Math.min(t[1],e[1])+Math.min(n[1],i[1])+Math.min(r[1],o[1])+u[13],l[2]=Math.min(t[2],e[2])+Math.min(n[2],i[2])+Math.min(r[2],o[2])+u[14],c[0]=Math.max(t[0],e[0])+Math.max(n[0],i[0])+Math.max(r[0],o[0])+u[12],c[1]=Math.max(t[1],e[1])+Math.max(n[1],i[1])+Math.max(r[1],o[1])+u[13],c[2]=Math.max(t[2],e[2])+Math.max(n[2],i[2])+Math.max(r[2],o[2])+u[14],this.min._dirty=!0,this.max._dirty=!0,this}}(),applyProjection:function(t){var e=this.min.array,n=this.max.array,i=t.array,r=e[0],o=e[1],a=e[2],s=n[0],l=n[1],c=e[2],u=n[0],h=n[1],f=n[2];if(1===i[15])e[0]=i[0]*r+i[12],e[1]=i[5]*o+i[13],n[2]=i[10]*a+i[14],n[0]=i[0]*u+i[12],n[1]=i[5]*h+i[13],e[2]=i[10]*f+i[14];else{var d=-1/a;e[0]=i[0]*r*d,e[1]=i[5]*o*d,n[2]=(i[10]*a+i[14])*d,d=-1/c,n[0]=i[0]*s*d,n[1]=i[5]*l*d,d=-1/f,e[2]=(i[10]*f+i[14])*d}return this.min._dirty=!0,this.max._dirty=!0,this},updateVertices:function(){var t=this.vertices;if(!t){t=[];for(var e=0;e<8;e++)t[e]=Wt.fromValues(0,0,0);this.vertices=t}var n=this.min.array,i=this.max.array;return Ee(t[0],n[0],n[1],n[2]),Ee(t[1],n[0],i[1],n[2]),Ee(t[2],i[0],n[1],n[2]),Ee(t[3],i[0],i[1],n[2]),Ee(t[4],n[0],n[1],i[2]),Ee(t[5],n[0],i[1],i[2]),Ee(t[6],i[0],n[1],i[2]),Ee(t[7],i[0],i[1],i[2]),this},copy:function(t){var e=this.min,n=this.max;return Ie(e.array,t.min.array),Ie(n.array,t.max.array),e._dirty=!0,n._dirty=!0,this},clone:function(){var t=new Pe;return t.copy(this),t}};var Le=Pe,ke=0,je=v.extend({name:"",position:null,rotation:null,scale:null,worldTransform:null,localTransform:null,autoUpdateLocalTransform:!0,_parent:null,_scene:null,_needsUpdateWorldTransform:!0,_inIterating:!1,__depth:0},(function(){this.name||(this.name=(this.type||"NODE")+"_"+ke++),this.position||(this.position=new fe),this.rotation||(this.rotation=new De),this.scale||(this.scale=new fe(1,1,1)),this.worldTransform=new Oe,this.localTransform=new Oe,this._children=[]}),{target:null,invisible:!1,isSkinnedMesh:function(){return!1},isRenderable:function(){return!1},setName:function(t){var e=this._scene;if(e){var n=e._nodeRepository;delete n[this.name],n[t]=this}this.name=t},add:function(t){var e=t._parent;if(e!==this){e&&e.remove(t),t._parent=this,this._children.push(t);var n=this._scene;n&&n!==t.scene&&t.traverse(this._addSelfToScene,this),t._needsUpdateWorldTransform=!0}},remove:function(t){var e=this._children,n=e.indexOf(t);n<0||(e.splice(n,1),t._parent=null,this._scene&&t.traverse(this._removeSelfFromScene,this))},removeAll:function(){for(var t=this._children,e=0;e<t.length;e++)t[e]._parent=null,this._scene&&t[e].traverse(this._removeSelfFromScene,this);this._children=[]},getScene:function(){return this._scene},getParent:function(){return this._parent},_removeSelfFromScene:function(t){t._scene.removeFromScene(t),t._scene=null},_addSelfToScene:function(t){this._scene.addToScene(t),t._scene=this._scene},isAncestor:function(t){var e=t._parent;while(e){if(e===this)return!0;e=e._parent}return!1},children:function(){return this._children.slice()},childAt:function(t){return this._children[t]},getChildByName:function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},getDescendantByName:function(t){for(var e=this._children,n=0;n<e.length;n++){var i=e[n];if(i.name===t)return i;var r=i.getDescendantByName(t);if(r)return r}},queryNode:function(t){if(t){for(var e=t.split("/"),n=this,i=0;i<e.length;i++){var r=e[i];if(r){for(var o=!1,a=n._children,s=0;s<a.length;s++){var l=a[s];if(l.name===r){n=l,o=!0;break}}if(!o)return}}return n}},getPath:function(t){if(!this._parent)return"/";var e=this._parent,n=this.name;while(e._parent){if(n=e.name+"/"+n,e._parent==t)break;e=e._parent}return!e._parent&&t?null:n},traverse:function(t,e){t.call(e,this);for(var n=this._children,i=0,r=n.length;i<r;i++)n[i].traverse(t,e)},eachChild:function(t,e){for(var n=this._children,i=0,r=n.length;i<r;i++){var o=n[i];t.call(e,o,i)}},setLocalTransform:function(t){Gt.copy(this.localTransform.array,t.array),this.decomposeLocalTransform()},decomposeLocalTransform:function(t){var e=t?null:this.scale;this.localTransform.decomposeMatrix(e,this.rotation,this.position)},setWorldTransform:function(t){Gt.copy(this.worldTransform.array,t.array),this.decomposeWorldTransform()},decomposeWorldTransform:function(){var t=Gt.create();return function(e){var n=this.localTransform,i=this.worldTransform;this._parent?(Gt.invert(t,this._parent.worldTransform.array),Gt.multiply(n.array,t,i.array)):Gt.copy(n.array,i.array);var r=e?null:this.scale;n.decomposeMatrix(r,this.rotation,this.position)}}(),transformNeedsUpdate:function(){return this.position._dirty||this.rotation._dirty||this.scale._dirty},updateLocalTransform:function(){var t=this.position,e=this.rotation,n=this.scale;if(this.transformNeedsUpdate()){var i=this.localTransform.array;Gt.fromRotationTranslation(i,e.array,t.array),Gt.scale(i,i,n.array),e._dirty=!1,n._dirty=!1,t._dirty=!1,this._needsUpdateWorldTransform=!0}},_updateWorldTransformTopDown:function(){var t=this.localTransform.array,e=this.worldTransform.array;this._parent?Gt.multiplyAffine(e,this._parent.worldTransform.array,t):Gt.copy(e,t)},updateWorldTransform:function(){var t=this;while(t&&t.getParent()&&t.getParent().transformNeedsUpdate())t=t.getParent();t.update()},update:function(t){this.autoUpdateLocalTransform?this.updateLocalTransform():t=!0,(t||this._needsUpdateWorldTransform)&&(this._updateWorldTransformTopDown(),t=!0,this._needsUpdateWorldTransform=!1);for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].update(t)},getBoundingBox:function(){function t(t){return!t.invisible&&t.geometry}var e=new Le,n=new Oe,i=new Oe;return function(r,o){return o=o||new Le,r=r||t,this._parent?Oe.invert(i,this._parent.worldTransform):Oe.identity(i),this.traverse((function(t){t.geometry&&t.geometry.boundingBox&&(e.copy(t.geometry.boundingBox),Oe.multiply(n,i,t.worldTransform),e.applyTransform(n),o.union(e))}),this,t),o}}(),getWorldPosition:function(t){this.transformNeedsUpdate()&&this.updateWorldTransform();var e=this.worldTransform.array;if(t){var n=t.array;return n[0]=e[12],n[1]=e[13],n[2]=e[14],t}return new fe(e[12],e[13],e[14])},clone:function(){var t=new this.constructor,e=this._children;t.setName(this.name),t.position.copy(this.position),t.rotation.copy(this.rotation),t.scale.copy(this.scale);for(var n=0;n<e.length;n++)t.add(e[n].clone());return t},rotateAround:function(){var t=new fe,e=new Oe;return function(n,i,r){t.copy(this.position).subtract(n);var o=this.localTransform;o.identity(),o.translate(n),o.rotate(r,i),e.fromRotationTranslation(this.rotation,t),o.multiply(e),o.scale(this.scale),this.decomposeLocalTransform(),this._needsUpdateWorldTransform=!0}}(),lookAt:function(){var t=new Oe;return function(e,n){t.lookAt(this.position,e,n||this.localTransform.y).invert(),this.setLocalTransform(t),this.target=e}}()}),Re=je,Ne=Re.extend({material:null,geometry:null,mode:w.TRIANGLES,_renderInfo:null},{__program:null,lightGroup:0,renderOrder:0,culling:!0,cullFace:w.BACK,frontFace:w.CCW,frustumCulling:!0,receiveShadow:!0,castShadow:!0,ignorePicking:!1,ignorePreZ:!1,ignoreGBuffer:!1,isRenderable:function(){return this.geometry&&this.material&&this.material.shader&&!this.invisible&&this.geometry.vertexCount>0},beforeRender:function(t){},afterRender:function(t,e){},getBoundingBox:function(t,e){return e=Re.prototype.getBoundingBox.call(this,t,e),this.geometry&&this.geometry.boundingBox&&e.union(this.geometry.boundingBox),e},clone:function(){var t=["castShadow","receiveShadow","mode","culling","cullFace","frontFace","frustumCulling","renderOrder","lineWidth","ignorePicking","ignorePreZ","ignoreGBuffer"];return function(){var e=Re.prototype.clone.call(this);e.geometry=this.geometry,e.material=this.material;for(var n=0;n<t.length;n++){var i=t[n];e[i]!==this[i]&&(e[i]=this[i])}return e}}()});Ne.POINTS=w.POINTS,Ne.LINES=w.LINES,Ne.LINE_LOOP=w.LINE_LOOP,Ne.LINE_STRIP=w.LINE_STRIP,Ne.TRIANGLES=w.TRIANGLES,Ne.TRIANGLE_STRIP=w.TRIANGLE_STRIP,Ne.TRIANGLE_FAN=w.TRIANGLE_FAN,Ne.BACK=w.BACK,Ne.FRONT=w.FRONT,Ne.FRONT_AND_BACK=w.FRONT_AND_BACK,Ne.CW=w.CW,Ne.CCW=w.CCW;var Be=Ne,Fe=v.extend({scene:null,camera:null,renderer:null},(function(){this._ray=new ge,this._ndc=new rt}),{pick:function(t,e,n){var i=this.pickAll(t,e,[],n);return i[0]||null},pickAll:function(t,e,n,i){return this.renderer.screenToNDC(t,e,this._ndc),this.camera.castRay(this._ndc,this._ray),n=n||[],this._intersectNode(this.scene,n,i||!1),n.sort(this._intersectionCompareFunc),n},_intersectNode:function(t,e,n){t instanceof Be&&t.isRenderable()&&(t.ignorePicking&&!n||!(t.mode===w.TRIANGLES&&t.geometry.isUseIndices()||t.geometry.pickByRay||t.geometry.pick)||this._intersectRenderable(t,e));for(var i=0;i<t._children.length;i++)this._intersectNode(t._children[i],e,n)},_intersectRenderable:function(){var t=new fe,e=new fe,n=new fe,i=new ge,r=new Oe;return function(o,a){var s=o.isSkinnedMesh();i.copy(this._ray),Oe.invert(r,o.worldTransform),s||i.applyTransform(r);var l=o.geometry,c=s?o.skeleton.boundingBox:l.boundingBox;if(!c||i.intersectBoundingBox(c))if(l.pick)l.pick(this._ndc.x,this._ndc.y,this.renderer,this.camera,o,a);else if(l.pickByRay)l.pickByRay(i,o,a);else{var u,h,f=o.cullFace===w.BACK&&o.frontFace===w.CCW||o.cullFace===w.FRONT&&o.frontFace===w.CW,d=l.indices,p=l.attributes.position,g=l.attributes.weight,m=l.attributes.joint,v=[];if(p&&p.value&&d){if(s){h=o.skeleton.getSubSkinMatrices(o.__uid__,o.joints);for(var y=0;y<o.joints.length;y++){v[y]=v[y]||[];for(var _=0;_<16;_++)v[y][_]=h[16*y+_]}var b=[],x=[],S=[],T=[],O=[],C=l.attributes.skinnedPosition;C&&C.value||(l.createAttribute("skinnedPosition","f",3),C=l.attributes.skinnedPosition,C.init(l.vertexCount));for(y=0;y<l.vertexCount;y++){p.get(y,b),g.get(y,x),m.get(y,S),x[3]=1-x[0]-x[1]-x[2],Wt.set(T,0,0,0);for(_=0;_<4;_++)S[_]>=0&&x[_]>1e-4&&(Wt.transformMat4(O,b,v[S[_]]),Wt.scaleAndAdd(T,T,O,x[_]));C.set(y,T)}}for(y=0;y<d.length;y+=3){var M=d[y],A=d[y+1],D=d[y+2],E=s?l.attributes.skinnedPosition:p;if(E.get(M,t.array),E.get(A,e.array),E.get(D,n.array),u=f?i.intersectTriangle(t,e,n,o.culling):i.intersectTriangle(t,n,e,o.culling),u){var I=new fe;s?fe.copy(I,u):fe.transformMat4(I,u,o.worldTransform),a.push(new Fe.Intersection(u,I,o,[M,A,D],y/3,fe.dist(I,this._ray.origin)))}}}}}}(),_intersectionCompareFunc:function(t,e){return t.distance-e.distance}});Fe.Intersection=function(t,e,n,i,r,o){this.point=t,this.pointWorld=e,this.target=n,this.triangle=i,this.triangleIndex=r,this.distance=o};var ze=Fe,Ve="__dt__",He=function(){this._contextId=0,this._caches=[],this._context={}};He.prototype={use:function(t,e){var n=this._caches;n[t]||(n[t]={},e&&(n[t]=e())),this._contextId=t,this._context=n[t]},put:function(t,e){this._context[t]=e},get:function(t){return this._context[t]},dirty:function(t){t=t||"";var e=Ve+t;this.put(e,!0)},dirtyAll:function(t){t=t||"";for(var e=Ve+t,n=this._caches,i=0;i<n.length;i++)n[i]&&(n[i][e]=!0)},fresh:function(t){t=t||"";var e=Ve+t;this.put(e,!1)},freshAll:function(t){t=t||"";for(var e=Ve+t,n=this._caches,i=0;i<n.length;i++)n[i]&&(n[i][e]=!1)},isDirty:function(t){t=t||"";var e=Ve+t,n=this._context;return!n.hasOwnProperty(e)||!0===n[e]},deleteContext:function(t){delete this._caches[t],this._context={}},delete:function(t){delete this._context[t]},clearAll:function(){this._caches={}},getContext:function(){return this._context},eachContext:function(t,e){var n=Object.keys(this._caches);n.forEach((function(n){t&&t.call(e,n)}))},miss:function(t){return!this._context.hasOwnProperty(t)}},He.prototype.constructor=He;var Ge=He,Ue=v.extend({width:512,height:512,type:w.UNSIGNED_BYTE,format:w.RGBA,wrapS:w.REPEAT,wrapT:w.REPEAT,minFilter:w.LINEAR_MIPMAP_LINEAR,magFilter:w.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,sRGB:!0,unpackAlignment:4,premultiplyAlpha:!1,dynamic:!1,NPOT:!1,__used:0},(function(){this._cache=new Ge}),{getWebGLTexture:function(t){var e=t.gl,n=this._cache;return n.use(t.__uid__),n.miss("webgl_texture")&&n.put("webgl_texture",e.createTexture()),this.dynamic?this.update(t):n.isDirty()&&(this.update(t),n.fresh()),n.get("webgl_texture")},bind:function(){},unbind:function(){},dirty:function(){this._cache&&this._cache.dirtyAll()},update:function(t){},updateCommon:function(t){var e=t.gl;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,this.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,this.unpackAlignment),this.format===w.DEPTH_COMPONENT&&(this.useMipmap=!1);var n=t.getGLExtension("EXT_sRGB");this.format!==Ue.SRGB||n||(this.format=Ue.RGB),this.format!==Ue.SRGB_ALPHA||n||(this.format=Ue.RGBA),this.NPOT=!this.isPowerOfTwo()},getAvailableWrapS:function(){return this.NPOT?w.CLAMP_TO_EDGE:this.wrapS},getAvailableWrapT:function(){return this.NPOT?w.CLAMP_TO_EDGE:this.wrapT},getAvailableMinFilter:function(){var t=this.minFilter;return this.NPOT||!this.useMipmap?t===w.NEAREST_MIPMAP_NEAREST||t===w.NEAREST_MIPMAP_LINEAR?w.NEAREST:t===w.LINEAR_MIPMAP_LINEAR||t===w.LINEAR_MIPMAP_NEAREST?w.LINEAR:t:t},getAvailableMagFilter:function(){return this.magFilter},nextHighestPowerOfTwo:function(t){--t;for(var e=1;e<32;e<<=1)t|=t>>e;return t+1},dispose:function(t){var e=this._cache;e.use(t.__uid__);var n=e.get("webgl_texture");n&&t.gl.deleteTexture(n),e.deleteContext(t.__uid__)},isRenderable:function(){},isPowerOfTwo:function(){}});Object.defineProperty(Ue.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(Ue.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),Ue.BYTE=w.BYTE,Ue.UNSIGNED_BYTE=w.UNSIGNED_BYTE,Ue.SHORT=w.SHORT,Ue.UNSIGNED_SHORT=w.UNSIGNED_SHORT,Ue.INT=w.INT,Ue.UNSIGNED_INT=w.UNSIGNED_INT,Ue.FLOAT=w.FLOAT,Ue.HALF_FLOAT=36193,Ue.UNSIGNED_INT_24_8_WEBGL=34042,Ue.DEPTH_COMPONENT=w.DEPTH_COMPONENT,Ue.DEPTH_STENCIL=w.DEPTH_STENCIL,Ue.ALPHA=w.ALPHA,Ue.RGB=w.RGB,Ue.RGBA=w.RGBA,Ue.LUMINANCE=w.LUMINANCE,Ue.LUMINANCE_ALPHA=w.LUMINANCE_ALPHA,Ue.SRGB=35904,Ue.SRGB_ALPHA=35906,Ue.COMPRESSED_RGB_S3TC_DXT1_EXT=33776,Ue.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777,Ue.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778,Ue.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779,Ue.NEAREST=w.NEAREST,Ue.LINEAR=w.LINEAR,Ue.NEAREST_MIPMAP_NEAREST=w.NEAREST_MIPMAP_NEAREST,Ue.LINEAR_MIPMAP_NEAREST=w.LINEAR_MIPMAP_NEAREST,Ue.NEAREST_MIPMAP_LINEAR=w.NEAREST_MIPMAP_LINEAR,Ue.LINEAR_MIPMAP_LINEAR=w.LINEAR_MIPMAP_LINEAR,Ue.REPEAT=w.REPEAT,Ue.CLAMP_TO_EDGE=w.CLAMP_TO_EDGE,Ue.MIRRORED_REPEAT=w.MIRRORED_REPEAT;var We=Ue,Xe=Be.extend({skeleton:null,joints:null},(function(){this.joints||(this.joints=[])}),{offsetMatrix:null,isInstancedMesh:function(){return!1},isSkinnedMesh:function(){return!!(this.skeleton&&this.joints&&this.joints.length>0)},clone:function(){var t=Be.prototype.clone.call(this);return t.skeleton=this.skeleton,this.joints&&(t.joints=this.joints.slice()),t}});Xe.POINTS=w.POINTS,Xe.LINES=w.LINES,Xe.LINE_LOOP=w.LINE_LOOP,Xe.LINE_STRIP=w.LINE_STRIP,Xe.TRIANGLES=w.TRIANGLES,Xe.TRIANGLE_STRIP=w.TRIANGLE_STRIP,Xe.TRIANGLE_FAN=w.TRIANGLE_FAN,Xe.BACK=w.BACK,Xe.FRONT=w.FRONT,Xe.FRONT_AND_BACK=w.FRONT_AND_BACK,Xe.CW=w.CW,Xe.CCW=w.CCW;var Ye=Xe,qe={isPowerOfTwo:function(t){return 0===(t&t-1)},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t++,t},nearestPowerOfTwo:function(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}},Ze=qe,Ke=Ze.isPowerOfTwo;function $e(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function Je(t,e){var n=$e(t.width),i=$e(t.height);e=e||document.createElement("canvas"),e.width=n,e.height=i;var r=e.getContext("2d");return r.drawImage(t.image,0,0,n,i),e}var Qe=We.extend((function(){return{image:null,pixels:null,mipmaps:[],convertToPOT:!1}}),{textureType:"texture2D",update:function(t){var e=t.gl;e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),this.updateCommon(t);var n=this.format,i=this.type,r=!(!this.convertToPOT||this.mipmaps.length||!this.image||this.wrapS!==We.REPEAT&&this.wrapT!==We.REPEAT||!this.NPOT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,r?this.wrapS:this.getAvailableWrapS()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,r?this.wrapT:this.getAvailableWrapT()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,r?this.magFilter:this.getAvailableMagFilter()),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r?this.minFilter:this.getAvailableMinFilter());var o=t.getGLExtension("EXT_texture_filter_anisotropic");if(o&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_2D,o.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===i){var a=t.getGLExtension("OES_texture_half_float");a||(i=w.FLOAT)}if(this.mipmaps.length)for(var s=this.width,l=this.height,c=0;c<this.mipmaps.length;c++){var u=this.mipmaps[c];this._updateTextureData(e,u,c,s,l,n,i,!1),s/=2,l/=2}else this._updateTextureData(e,this,0,this.width,this.height,n,i,r),!this.useMipmap||this.NPOT&&!r||e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null)},_updateTextureData:function(t,e,n,i,r,o,a,s){if(e.image){var l=e.image;s&&(this._potCanvas=Je(this,this._potCanvas),l=this._potCanvas),t.texImage2D(t.TEXTURE_2D,n,o,o,a,l)}else o<=We.COMPRESSED_RGBA_S3TC_DXT5_EXT&&o>=We.COMPRESSED_RGB_S3TC_DXT1_EXT?t.compressedTexImage2D(t.TEXTURE_2D,n,o,i,r,0,e.pixels):t.texImage2D(t.TEXTURE_2D,n,o,i,r,0,o,a,e.pixels)},generateMipmap:function(t){var e=t.gl;this.useMipmap&&!this.NPOT&&(e.bindTexture(e.TEXTURE_2D,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_2D))},isPowerOfTwo:function(){return Ke(this.width)&&Ke(this.height)},isRenderable:function(){return this.image?this.image.width>0&&this.image.height>0:!(!this.width||!this.height)},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_2D,null)},load:function(t,e){var n=S["a"].createImage();e&&(n.crossOrigin=e);var i=this;return n.onload=function(){i.dirty(),i.trigger("success",i)},n.onerror=function(){i.trigger("error",i)},n.src=t,this.image=n,this}});Object.defineProperty(Qe.prototype,"width",{get:function(){return this.image?this.image.width:this._width},set:function(t){this.image?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Qe.prototype,"height",{get:function(){return this.image?this.image.height:this._height},set:function(t){this.image?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});var tn=Qe;function en(t){return{byte:S["a"].Int8Array,ubyte:S["a"].Uint8Array,short:S["a"].Int16Array,ushort:S["a"].Uint16Array}[t]||S["a"].Float32Array}function nn(t){return"attr_"+t}function rn(t,e,n,i){switch(this.name=t,this.type=e,this.size=n,this.semantic=i||"",this.value=null,n){case 1:this.get=function(t){return this.value[t]},this.set=function(t,e){this.value[t]=e},this.copy=function(t,e){this.value[t]=this.value[t]};break;case 2:this.get=function(t,e){var n=this.value;return e[0]=n[2*t],e[1]=n[2*t+1],e},this.set=function(t,e){var n=this.value;n[2*t]=e[0],n[2*t+1]=e[1]},this.copy=function(t,e){var n=this.value;e*=2,t*=2,n[t]=n[e],n[t+1]=n[e+1]};break;case 3:this.get=function(t,e){var n=3*t,i=this.value;return e[0]=i[n],e[1]=i[n+1],e[2]=i[n+2],e},this.set=function(t,e){var n=3*t,i=this.value;i[n]=e[0],i[n+1]=e[1],i[n+2]=e[2]},this.copy=function(t,e){var n=this.value;e*=3,t*=3,n[t]=n[e],n[t+1]=n[e+1],n[t+2]=n[e+2]};break;case 4:this.get=function(t,e){var n=this.value,i=4*t;return e[0]=n[i],e[1]=n[i+1],e[2]=n[i+2],e[3]=n[i+3],e},this.set=function(t,e){var n=this.value,i=4*t;n[i]=e[0],n[i+1]=e[1],n[i+2]=e[2],n[i+3]=e[3]},this.copy=function(t,e){var n=this.value;e*=4,t*=4,n[t]=n[e],n[t+1]=n[e+1],n[t+2]=n[e+2],n[t+3]=n[e+3]}}}function on(t,e,n,i,r){this.name=t,this.type=e,this.buffer=n,this.size=i,this.semantic=r,this.symbol="",this.needsRemove=!1}function an(t){this.buffer=t,this.count=0}rn.prototype.init=function(t){if(!this.value||this.value.length!==t*this.size){var e=en(this.type);this.value=new e(t*this.size)}},rn.prototype.fromArray=function(t){var e,n=en(this.type);if(t[0]&&t[0].length){var i=0,r=this.size;e=new n(t.length*r);for(var o=0;o<t.length;o++)for(var a=0;a<r;a++)e[i++]=t[o][a]}else e=new n(t);this.value=e},rn.prototype.clone=function(t){var e=new rn(this.name,this.type,this.size,this.semantic);return t&&console.warn("todo"),e};var sn=v.extend((function(){return{attributes:{},indices:null,dynamic:!0,_enabledAttributes:null,__used:0}}),(function(){this._cache=new Ge,this._attributeList=Object.keys(this.attributes),this.__vaoCache={}}),{mainAttribute:"",pick:null,pickByRay:null,dirty:function(){for(var t=this.getEnabledAttributes(),e=0;e<t.length;e++)this.dirtyAttribute(t[e]);this.dirtyIndices(),this._enabledAttributes=null,this._cache.dirty("any")},dirtyIndices:function(){this._cache.dirtyAll("indices")},dirtyAttribute:function(t){this._cache.dirtyAll(nn(t)),this._cache.dirtyAll("attributes")},getTriangleIndices:function(t,e){if(t<this.triangleCount&&t>=0){e||(e=[]);var n=this.indices;return e[0]=n[3*t],e[1]=n[3*t+1],e[2]=n[3*t+2],e}},setTriangleIndices:function(t,e){var n=this.indices;n[3*t]=e[0],n[3*t+1]=e[1],n[3*t+2]=e[2]},isUseIndices:function(){return!!this.indices},initIndicesFromArray:function(t){var e,n=this.vertexCount>65535?S["a"].Uint32Array:S["a"].Uint16Array;if(t[0]&&t[0].length){var i=0,r=3;e=new n(t.length*r);for(var o=0;o<t.length;o++)for(var a=0;a<r;a++)e[i++]=t[o][a]}else e=new n(t);this.indices=e},createAttribute:function(t,e,n,i){var r=new rn(t,e,n,i);return this.attributes[t]&&this.removeAttribute(t),this.attributes[t]=r,this._attributeList.push(t),r},removeAttribute:function(t){var e=this._attributeList,n=e.indexOf(t);return n>=0&&(e.splice(n,1),delete this.attributes[t],!0)},getAttribute:function(t){return this.attributes[t]},getEnabledAttributes:function(){var t=this._enabledAttributes,e=this._attributeList;if(t)return t;for(var n=[],i=this.vertexCount,r=0;r<e.length;r++){var o=e[r],a=this.attributes[o];a.value&&a.value.length===i*a.size&&n.push(o)}return this._enabledAttributes=n,n},getBufferChunks:function(t){var e=this._cache;e.use(t.__uid__);var n=e.isDirty("attributes"),i=e.isDirty("indices");if(n||i){this._updateBuffer(t.gl,n,i);for(var r=this.getEnabledAttributes(),o=0;o<r.length;o++)e.fresh(nn(r[o]));e.fresh("attributes"),e.fresh("indices")}return e.fresh("any"),e.get("chunks")},_updateBuffer:function(t,e,n){var i=this._cache,r=i.get("chunks"),o=!1;r||(r=[],r[0]={attributeBuffers:[],indicesBuffer:null},i.put("chunks",r),o=!0);var a=r[0],s=a.attributeBuffers,l=a.indicesBuffer;if(e||o){var c=this.getEnabledAttributes(),u={};if(!o)for(var h=0;h<s.length;h++)u[s[h].name]=s[h];for(var f=0;f<c.length;f++){var d,p,g=c[f],m=this.attributes[g];o||(d=u[g]),p=d?d.buffer:t.createBuffer(),i.isDirty(nn(g))&&(t.bindBuffer(t.ARRAY_BUFFER,p),t.bufferData(t.ARRAY_BUFFER,m.value,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW)),s[f]=new on(g,m.type,p,m.size,m.semantic)}for(h=f;h<s.length;h++)t.deleteBuffer(s[h].buffer);s.length=f}this.isUseIndices()&&(n||o)&&(l||(l=new an(t.createBuffer()),a.indicesBuffer=l),l.count=this.indices.length,t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,l.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,this.dynamic?t.DYNAMIC_DRAW:t.STATIC_DRAW))},dispose:function(t){var e=this._cache;e.use(t.__uid__);var n=e.get("chunks");if(n)for(var i=0;i<n.length;i++){for(var r=n[i],o=0;o<r.attributeBuffers.length;o++){var a=r.attributeBuffers[o];t.gl.deleteBuffer(a.buffer)}r.indicesBuffer&&t.gl.deleteBuffer(r.indicesBuffer.buffer)}if(this.__vaoCache){var s=t.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var c=this.__vaoCache[l].vao;c&&s.deleteVertexArrayOES(c)}}this.__vaoCache={},e.deleteContext(t.__uid__)}});Object.defineProperty&&(Object.defineProperty(sn.prototype,"vertexCount",{enumerable:!1,get:function(){var t=this.attributes[this.mainAttribute];return t||(t=this.attributes[this._attributeList[0]]),t&&t.value?t.value.length/t.size:0}}),Object.defineProperty(sn.prototype,"triangleCount",{enumerable:!1,get:function(){var t=this.indices;return t?t.length/3:0}})),sn.STATIC_DRAW=w.STATIC_DRAW,sn.DYNAMIC_DRAW=w.DYNAMIC_DRAW,sn.STREAM_DRAW=w.STREAM_DRAW,sn.AttributeBuffer=on,sn.IndicesBuffer=an,sn.Attribute=rn;var ln=sn,cn=Wt.create,un=Wt.add,hn=Wt.set,fn=ln.Attribute,dn=ln.extend((function(){return{attributes:{position:new fn("position","float",3,"POSITION"),texcoord0:new fn("texcoord0","float",2,"TEXCOORD_0"),texcoord1:new fn("texcoord1","float",2,"TEXCOORD_1"),normal:new fn("normal","float",3,"NORMAL"),tangent:new fn("tangent","float",4,"TANGENT"),color:new fn("color","float",4,"COLOR"),weight:new fn("weight","float",3,"WEIGHT"),joint:new fn("joint","float",4,"JOINT"),barycentric:new fn("barycentric","float",3,null)},boundingBox:null}}),{mainAttribute:"position",updateBoundingBox:function(){var t=this.boundingBox;t||(t=this.boundingBox=new Le);var e=this.attributes.position.value;if(e&&e.length){var n=t.min,i=t.max,r=n.array,o=i.array;Wt.set(r,e[0],e[1],e[2]),Wt.set(o,e[0],e[1],e[2]);for(var a=3;a<e.length;){var s=e[a++],l=e[a++],c=e[a++];s<r[0]&&(r[0]=s),l<r[1]&&(r[1]=l),c<r[2]&&(r[2]=c),s>o[0]&&(o[0]=s),l>o[1]&&(o[1]=l),c>o[2]&&(o[2]=c)}n._dirty=!0,i._dirty=!0}},generateVertexNormals:function(){if(this.vertexCount){var t=this.indices,e=this.attributes,n=e.position.value,i=e.normal.value;if(i&&i.length===n.length)for(var r=0;r<i.length;r++)i[r]=0;else i=e.normal.value=new S["a"].Float32Array(n.length);for(var o,a,s,l=cn(),c=cn(),u=cn(),h=cn(),f=cn(),d=cn(),p=t?t.length:this.vertexCount,g=0;g<p;){t?(o=t[g++],a=t[g++],s=t[g++]):(o=g++,a=g++,s=g++),hn(l,n[3*o],n[3*o+1],n[3*o+2]),hn(c,n[3*a],n[3*a+1],n[3*a+2]),hn(u,n[3*s],n[3*s+1],n[3*s+2]),Wt.sub(h,l,c),Wt.sub(f,c,u),Wt.cross(d,h,f);for(r=0;r<3;r++)i[3*o+r]=i[3*o+r]+d[r],i[3*a+r]=i[3*a+r]+d[r],i[3*s+r]=i[3*s+r]+d[r]}for(r=0;r<i.length;)hn(d,i[r],i[r+1],i[r+2]),Wt.normalize(d,d),i[r++]=d[0],i[r++]=d[1],i[r++]=d[2];this.dirty()}},generateFaceNormals:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.indices,e=this.attributes,n=e.position.value,i=e.normal.value,r=cn(),o=cn(),a=cn(),s=cn(),l=cn(),c=cn();i||(i=e.normal.value=new Float32Array(n.length));for(var u,h,f,d=t?t.length:this.vertexCount,p=0;p<d;){t?(u=t[p++],h=t[p++],f=t[p++]):(u=p++,h=p++,f=p++),hn(r,n[3*u],n[3*u+1],n[3*u+2]),hn(o,n[3*h],n[3*h+1],n[3*h+2]),hn(a,n[3*f],n[3*f+1],n[3*f+2]),Wt.sub(s,r,o),Wt.sub(l,o,a),Wt.cross(c,s,l),Wt.normalize(c,c);for(var g=0;g<3;g++)i[3*u+g]=c[g],i[3*h+g]=c[g],i[3*f+g]=c[g]}this.dirty()}},generateTangents:function(){if(this.vertexCount){var t=this.vertexCount,e=this.attributes;e.tangent.value||(e.tangent.value=new Float32Array(4*t));var n=e.texcoord0.value,i=e.position.value,r=e.tangent.value,o=e.normal.value;if(n){for(var a=[],s=[],l=0;l<t;l++)a[l]=[0,0,0],s[l]=[0,0,0];var c,u,h,f=[0,0,0],d=[0,0,0],p=this.indices,g=p?p.length:this.vertexCount;for(l=0;l<g;){p?(c=p[l++],u=p[l++],h=p[l++]):(c=l++,u=l++,h=l++);var m=n[2*c],v=n[2*u],y=n[2*h],_=n[2*c+1],b=n[2*u+1],x=n[2*h+1],w=i[3*c],S=i[3*u],T=i[3*h],O=i[3*c+1],C=i[3*u+1],M=i[3*h+1],A=i[3*c+2],D=i[3*u+2],E=i[3*h+2],I=S-w,P=T-w,L=C-O,k=M-O,j=D-A,R=E-A,N=v-m,B=y-m,F=b-_,z=x-_,V=1/(N*z-F*B);f[0]=(z*I-F*P)*V,f[1]=(z*L-F*k)*V,f[2]=(z*j-F*R)*V,d[0]=(N*P-B*I)*V,d[1]=(N*k-B*L)*V,d[2]=(N*R-B*j)*V,un(a[c],a[c],f),un(a[u],a[u],f),un(a[h],a[h],f),un(s[c],s[c],d),un(s[u],s[u],d),un(s[h],s[h],d)}var H=cn(),G=cn(),U=cn();for(l=0;l<t;l++){U[0]=o[3*l],U[1]=o[3*l+1],U[2]=o[3*l+2];var W=a[l];Wt.scale(H,U,Wt.dot(U,W)),Wt.sub(H,W,H),Wt.normalize(H,H),Wt.cross(G,U,W),r[4*l]=H[0],r[4*l+1]=H[1],r[4*l+2]=H[2],r[4*l+3]=Wt.dot(G,s[l])<0?-1:1}this.dirty()}else console.warn("Geometry without texcoords can't generate tangents.")}},isUniqueVertex:function(){return!this.isUseIndices()||this.vertexCount===this.indices.length},generateUniqueVertex:function(){if(this.vertexCount&&this.indices){this.indices.length>65535&&(this.indices=new S["a"].Uint32Array(this.indices));for(var t=this.attributes,e=this.indices,n=this.getEnabledAttributes(),i={},r=0;r<n.length;r++){var o=n[r];i[o]=t[o].value,t[o].init(this.indices.length)}for(var a=0,s=0;s<e.length;s++){var l=e[s];for(r=0;r<n.length;r++){o=n[r];for(var c=t[o].value,u=t[o].size,h=0;h<u;h++)c[a*u+h]=i[o][l*u+h]}e[s]=a,a++}this.dirty()}},generateBarycentric:function(){if(this.vertexCount){this.isUniqueVertex()||this.generateUniqueVertex();var t=this.attributes,e=t.barycentric.value,n=this.indices;if(!e||e.length!==3*n.length){e=t.barycentric.value=new Float32Array(3*n.length);for(var i=0;i<(n?n.length:this.vertexCount/3);)for(var r=0;r<3;r++){var o=n?n[i++]:3*i+r;e[3*o+r]=1}this.dirty()}}},applyTransform:function(t){var e=this.attributes,n=e.position.value,i=e.normal.value,r=e.tangent.value;t=t.array;var o=Gt.create();Gt.invert(o,t),Gt.transpose(o,o);var a=Wt.transformMat4,s=Wt.forEach;s(n,3,0,null,a,t),i&&s(i,3,0,null,a,o),r&&s(r,4,0,null,a,o),this.boundingBox&&this.updateBoundingBox()},dispose:function(t){var e=this._cache;e.use(t.__uid__);var n=e.get("chunks");if(n)for(var i=0;i<n.length;i++){for(var r=n[i],o=0;o<r.attributeBuffers.length;o++){var a=r.attributeBuffers[o];t.gl.deleteBuffer(a.buffer)}r.indicesBuffer&&t.gl.deleteBuffer(r.indicesBuffer.buffer)}if(this.__vaoCache){var s=t.getGLExtension("OES_vertex_array_object");for(var l in this.__vaoCache){var c=this.__vaoCache[l].vao;c&&s.deleteVertexArrayOES(c)}}this.__vaoCache={},e.deleteContext(t.__uid__)}});dn.STATIC_DRAW=ln.STATIC_DRAW,dn.DYNAMIC_DRAW=ln.DYNAMIC_DRAW,dn.STREAM_DRAW=ln.STREAM_DRAW,dn.AttributeBuffer=ln.AttributeBuffer,dn.IndicesBuffer=ln.IndicesBuffer,dn.Attribute=fn;var pn=dn,gn="vec3 calcAmbientSHLight(int idx, vec3 N) {\n int offset = 9 * idx;\n return ambientSHLightCoefficients[0]\n + ambientSHLightCoefficients[1] * N.x\n + ambientSHLightCoefficients[2] * N.y\n + ambientSHLightCoefficients[3] * N.z\n + ambientSHLightCoefficients[4] * N.x * N.z\n + ambientSHLightCoefficients[5] * N.z * N.y\n + ambientSHLightCoefficients[6] * N.y * N.x\n + ambientSHLightCoefficients[7] * (3.0 * N.z * N.z - 1.0)\n + ambientSHLightCoefficients[8] * (N.x * N.x - N.y * N.y);\n}",mn="uniform vec3 ",vn="uniform float ",yn="@export clay.header.",_n="@end",bn=":unconfigurable;",xn=[yn+"directional_light",mn+"directionalLightDirection[DIRECTIONAL_LIGHT_COUNT]"+bn,mn+"directionalLightColor[DIRECTIONAL_LIGHT_COUNT]"+bn,_n,yn+"ambient_light",mn+"ambientLightColor[AMBIENT_LIGHT_COUNT]"+bn,_n,yn+"ambient_sh_light",mn+"ambientSHLightColor[AMBIENT_SH_LIGHT_COUNT]"+bn,mn+"ambientSHLightCoefficients[AMBIENT_SH_LIGHT_COUNT * 9]"+bn,gn,_n,yn+"ambient_cubemap_light",mn+"ambientCubemapLightColor[AMBIENT_CUBEMAP_LIGHT_COUNT]"+bn,"uniform samplerCube ambientCubemapLightCubemap[AMBIENT_CUBEMAP_LIGHT_COUNT]"+bn,"uniform sampler2D ambientCubemapLightBRDFLookup[AMBIENT_CUBEMAP_LIGHT_COUNT]"+bn,_n,yn+"point_light",mn+"pointLightPosition[POINT_LIGHT_COUNT]"+bn,vn+"pointLightRange[POINT_LIGHT_COUNT]"+bn,mn+"pointLightColor[POINT_LIGHT_COUNT]"+bn,_n,yn+"spot_light",mn+"spotLightPosition[SPOT_LIGHT_COUNT]"+bn,mn+"spotLightDirection[SPOT_LIGHT_COUNT]"+bn,vn+"spotLightRange[SPOT_LIGHT_COUNT]"+bn,vn+"spotLightUmbraAngleCosine[SPOT_LIGHT_COUNT]"+bn,vn+"spotLightPenumbraAngleCosine[SPOT_LIGHT_COUNT]"+bn,vn+"spotLightFalloffFactor[SPOT_LIGHT_COUNT]"+bn,mn+"spotLightColor[SPOT_LIGHT_COUNT]"+bn,_n].join("\n");zt["import"](xn);var wn=Re.extend((function(){return{color:[1,1,1],intensity:1,castShadow:!0,shadowResolution:512,group:0}}),{type:"",clone:function(){var t=Re.prototype.clone.call(this);return t.color=Array.prototype.slice.call(this.color),t.intensity=this.intensity,t.castShadow=this.castShadow,t.shadowResolution=this.shadowResolution,t}}),Sn=wn,Tn=function(t,e){this.normal=t||new fe(0,1,0),this.distance=e||0};Tn.prototype={constructor:Tn,distanceToPoint:function(t){return Wt.dot(t.array,this.normal.array)-this.distance},projectPoint:function(t,e){e||(e=new fe);var n=this.distanceToPoint(t);return Wt.scaleAndAdd(e.array,t.array,this.normal.array,-n),e._dirty=!0,e},normalize:function(){var t=1/Wt.len(this.normal.array);Wt.scale(this.normal.array,t),this.distance*=t},intersectFrustum:function(t){for(var e=t.vertices,n=this.normal.array,i=Wt.dot(e[0].array,n)>this.distance,r=1;r<8;r++)if(Wt.dot(e[r].array,n)>this.distance!=i)return!0},intersectLine:function(){var t=Wt.create();return function(e,n,i){var r=this.distanceToPoint(e),o=this.distanceToPoint(n);if(r>0&&o>0||r<0&&o<0)return null;var a=this.normal.array,s=this.distance,l=e.array;Wt.sub(t,n.array,e.array),Wt.normalize(t,t);var c=Wt.dot(a,t);if(0===c)return null;i||(i=new fe);var u=(Wt.dot(a,l)-s)/c;return Wt.scaleAndAdd(i.array,l,t,-u),i._dirty=!0,i}}(),applyTransform:function(){var t=Gt.create(),e=ve.create(),n=ve.create();return n[3]=1,function(i){i=i.array,Wt.scale(n,this.normal.array,this.distance),ve.transformMat4(n,n,i),this.distance=Wt.dot(n,this.normal.array),Gt.invert(t,i),Gt.transpose(t,t),e[3]=0,Wt.copy(e,this.normal.array),ve.transformMat4(e,e,t),Wt.copy(this.normal.array,e)}}(),copy:function(t){Wt.copy(this.normal.array,t.normal.array),this.normal._dirty=!0,this.distance=t.distance},clone:function(){var t=new Tn;return t.copy(this),t}};var On=Tn,Cn=Wt.set,Mn=Wt.copy,An=Wt.transformMat4,Dn=Math.min,En=Math.max,In=function(){this.planes=[];for(var t=0;t<6;t++)this.planes.push(new On);this.boundingBox=new Le,this.vertices=[];for(t=0;t<8;t++)this.vertices[t]=Wt.fromValues(0,0,0)};In.prototype={setFromProjection:function(t){var e=this.planes,n=t.array,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],f=n[9],d=n[10],p=n[11],g=n[12],m=n[13],v=n[14],y=n[15];Cn(e[0].normal.array,a-i,u-s,p-h),e[0].distance=-(y-g),e[0].normalize(),Cn(e[1].normal.array,a+i,u+s,p+h),e[1].distance=-(y+g),e[1].normalize(),Cn(e[2].normal.array,a+r,u+l,p+f),e[2].distance=-(y+m),e[2].normalize(),Cn(e[3].normal.array,a-r,u-l,p-f),e[3].distance=-(y-m),e[3].normalize(),Cn(e[4].normal.array,a-o,u-c,p-d),e[4].distance=-(y-v),e[4].normalize(),Cn(e[5].normal.array,a+o,u+c,p+d),e[5].distance=-(y+v),e[5].normalize();var _=this.boundingBox,b=this.vertices;if(0===y){var x=l/i,w=-v/(d-1),S=-v/(d+1),T=-S/l,O=-w/l;_.min.set(-T*x,-T,S),_.max.set(T*x,T,w),Cn(b[0],-T*x,-T,S),Cn(b[1],-T*x,T,S),Cn(b[2],T*x,-T,S),Cn(b[3],T*x,T,S),Cn(b[4],-O*x,-O,w),Cn(b[5],-O*x,O,w),Cn(b[6],O*x,-O,w),Cn(b[7],O*x,O,w)}else{var C=(-1-g)/i,M=(1-g)/i,A=(1-m)/l,D=(-1-m)/l,E=(-1-v)/d,I=(1-v)/d;_.min.set(Math.min(C,M),Math.min(D,A),Math.min(I,E)),_.max.set(Math.max(M,C),Math.max(A,D),Math.max(E,I));var P=_.min.array,L=_.max.array;Cn(b[0],P[0],P[1],P[2]),Cn(b[1],P[0],L[1],P[2]),Cn(b[2],L[0],P[1],P[2]),Cn(b[3],L[0],L[1],P[2]),Cn(b[4],P[0],P[1],L[2]),Cn(b[5],P[0],L[1],L[2]),Cn(b[6],L[0],P[1],L[2]),Cn(b[7],L[0],L[1],L[2])}},getTransformedBoundingBox:function(){var t=Wt.create();return function(e,n){var i=this.vertices,r=n.array,o=e.min,a=e.max,s=o.array,l=a.array,c=i[0];An(t,c,r),Mn(s,t),Mn(l,t);for(var u=1;u<8;u++)c=i[u],An(t,c,r),s[0]=Dn(t[0],s[0]),s[1]=Dn(t[1],s[1]),s[2]=Dn(t[2],s[2]),l[0]=En(t[0],l[0]),l[1]=En(t[1],l[1]),l[2]=En(t[2],l[2]);return o._dirty=!0,a._dirty=!0,e}}()};var Pn=In,Ln=Re.extend((function(){return{projectionMatrix:new Oe,invProjectionMatrix:new Oe,viewMatrix:new Oe,frustum:new Pn}}),(function(){this.update(!0)}),{update:function(t){Re.prototype.update.call(this,t),Oe.invert(this.viewMatrix,this.worldTransform),this.updateProjectionMatrix(),Oe.invert(this.invProjectionMatrix,this.projectionMatrix),this.frustum.setFromProjection(this.projectionMatrix)},setViewMatrix:function(t){Oe.copy(this.viewMatrix,t),Oe.invert(this.worldTransform,t),this.decomposeWorldTransform()},decomposeProjectionMatrix:function(){},setProjectionMatrix:function(t){Oe.copy(this.projectionMatrix,t),Oe.invert(this.invProjectionMatrix,t),this.decomposeProjectionMatrix()},updateProjectionMatrix:function(){},castRay:function(){var t=ve.create();return function(e,n){var i=void 0!==n?n:new ge,r=e.array[0],o=e.array[1];return ve.set(t,r,o,-1,1),ve.transformMat4(t,t,this.invProjectionMatrix.array),ve.transformMat4(t,t,this.worldTransform.array),Wt.scale(i.origin.array,t,1/t[3]),ve.set(t,r,o,1,1),ve.transformMat4(t,t,this.invProjectionMatrix.array),ve.transformMat4(t,t,this.worldTransform.array),Wt.scale(t,t,1/t[3]),Wt.sub(i.direction.array,t,i.origin.array),Wt.normalize(i.direction.array,i.direction.array),i.direction._dirty=!0,i.origin._dirty=!0,i}}()}),kn=Ln,jn=Gt.create(),Rn=Gt.create(),Nn={};function Bn(t){var e=[],n=Object.keys(t);n.sort();for(var i=0;i<n.length;i++){var r=n[i];e.push(r+" "+t[r])}var o=e.join("\n");if(Nn[o])return Nn[o];var a=g.genGUID();return Nn[o]=a,a}function Fn(){this.opaque=[],this.transparent=[],this._opaqueCount=0,this._transparentCount=0}Fn.prototype.startCount=function(){this._opaqueCount=0,this._transparentCount=0},Fn.prototype.add=function(t,e){e?this.transparent[this._transparentCount++]=t:this.opaque[this._opaqueCount++]=t},Fn.prototype.endCount=function(){this.transparent.length=this._transparentCount,this.opaque.length=this._opaqueCount};var zn=Re.extend((function(){return{material:null,lights:[],viewBoundingBoxLastFrame:new Le,shadowUniforms:{},_cameraList:[],_lightUniforms:{},_previousLightNumber:{},_lightNumber:{},_lightProgramKeys:{},_nodeRepository:{},_renderLists:new M(20)}}),(function(){this._scene=this}),{addToScene:function(t){t instanceof kn?(this._cameraList.length>0&&console.warn("Found multiple camera in one scene. Use the fist one."),this._cameraList.push(t)):t instanceof Sn&&this.lights.push(t),t.name&&(this._nodeRepository[t.name]=t)},removeFromScene:function(t){var e;t instanceof kn?(e=this._cameraList.indexOf(t),e>=0&&this._cameraList.splice(e,1)):t instanceof Sn&&(e=this.lights.indexOf(t),e>=0&&this.lights.splice(e,1)),t.name&&delete this._nodeRepository[t.name]},getNode:function(t){return this._nodeRepository[t]},setMainCamera:function(t){var e=this._cameraList.indexOf(t);e>=0&&this._cameraList.splice(e,1),this._cameraList.unshift(t)},getMainCamera:function(){return this._cameraList[0]},getLights:function(){return this.lights},updateLights:function(){var t=this.lights;this._previousLightNumber=this._lightNumber;for(var e={},n=0;n<t.length;n++){var i=t[n];if(!i.invisible){var r=i.group;e[r]||(e[r]={}),e[r][i.type]=e[r][i.type]||0,e[r][i.type]++}}for(var o in this._lightNumber=e,e)this._lightProgramKeys[o]=Bn(e[o]);this._updateLightUniforms()},cloneNode:function(t){var e=t.clone(),n={};function i(t,e){n[t.__uid__]=e;for(var r=0;r<t._children.length;r++){var o=t._children[r],a=e._children[r];i(o,a)}}return i(t,e),e.traverse((function(t){t.skeleton&&(t.skeleton=t.skeleton.clone(n)),t.material&&(t.material=t.material.clone())})),e},updateRenderList:function(t,e){var n=t.__uid__,i=this._renderLists.get(n);i||(i=new Fn,this._renderLists.put(n,i)),i.startCount(),e&&(this.viewBoundingBoxLastFrame.min.set(1/0,1/0,1/0),this.viewBoundingBoxLastFrame.max.set(-1/0,-1/0,-1/0));var r=this.material&&this.material.transparent||!1;return this._doUpdateRenderList(this,t,r,i,e),i.endCount(),i},getRenderList:function(t){return this._renderLists.get(t.__uid__)},_doUpdateRenderList:function(t,e,n,i,r){if(!t.invisible)for(var o=0;o<t._children.length;o++){var a=t._children[o];if(a.isRenderable()){var s=a.isSkinnedMesh()?jn:a.worldTransform.array,l=a.geometry;Gt.multiplyAffine(Rn,e.viewMatrix.array,s),(r&&!l.boundingBox||!this.isFrustumCulled(a,e,Rn))&&i.add(a,a.material.transparent||n)}a._children.length>0&&this._doUpdateRenderList(a,e,n,i,r)}},isFrustumCulled:function(){var t=new Le,e=new Oe;return function(n,i,r){var o=n.boundingBox;if(o||(o=n.skeleton&&n.skeleton.boundingBox?n.skeleton.boundingBox:n.geometry.boundingBox),!o)return!1;if(e.array=r,t.transformFrom(o,e),n.castShadow&&this.viewBoundingBoxLastFrame.union(t),n.frustumCulling){if(!t.intersectBoundingBox(i.frustum.boundingBox))return!0;e.array=i.projectionMatrix.array,t.max.array[2]>0&&t.min.array[2]<0&&(t.max.array[2]=-1e-20),t.applyProjection(e);var a=t.min.array,s=t.max.array;if(s[0]<-1||a[0]>1||s[1]<-1||a[1]>1||s[2]<-1||a[2]>1)return!0}return!1}}(),_updateLightUniforms:function(){var t=this.lights;t.sort(Vn);var e=this._lightUniforms;for(var n in e)for(var i in e[n])e[n][i].value.length=0;for(var r=0;r<t.length;r++){var o=t[r];if(!o.invisible){n=o.group;for(var i in o.uniformTemplates){var a=o.uniformTemplates[i],s=a.value(o);if(null!=s){e[n]||(e[n]={}),e[n][i]||(e[n][i]={type:"",value:[]});var l=e[n][i];switch(l.type=a.type+"v",a.type){case"1i":case"1f":case"t":l.value.push(s);break;case"2f":case"3f":case"4f":for(var c=0;c<s.length;c++)l.value.push(s[c]);break;default:console.error("Unkown light uniform type "+a.type)}}}}}},getLightGroups:function(){var t=[];for(var e in this._lightNumber)t.push(e);return t},getNumberChangedLightGroups:function(){var t=[];for(var e in this._lightNumber)this.isLightNumberChanged(e)&&t.push(e);return t},isLightNumberChanged:function(t){var e=this._previousLightNumber,n=this._lightNumber;for(var i in n[t]){if(!e[t])return!0;if(n[t][i]!==e[t][i])return!0}for(var i in e[t]){if(!n[t])return!0;if(n[t][i]!==e[t][i])return!0}return!1},getLightsNumbers:function(t){return this._lightNumber[t]},getProgramKey:function(t){return this._lightProgramKeys[t]},setLightUniforms:function(){function t(t,e,n){for(var i in t){var r=t[i];if("tv"===r.type){if(!e.hasUniform(i))continue;for(var o=[],a=0;a<r.value.length;a++){var s=r.value[a],l=e.takeCurrentTextureSlot(n,s);o.push(l)}e.setUniform(n.gl,"1iv",i,o)}else e.setUniform(n.gl,r.type,i,r.value)}}return function(e,n,i){t(this._lightUniforms[n],e,i),t(this.shadowUniforms,e,i)}}(),dispose:function(){this.material=null,this._opaqueList=[],this._transparentList=[],this.lights=[],this._lightUniforms={},this._lightNumber={},this._nodeRepository={}}});function Vn(t,e){if(e.castShadow&&!t.castShadow)return!0}var Hn=zn,Gn=n("d51b"),Un=Ze.isPowerOfTwo,Wn=["px","nx","py","ny","pz","nz"],Xn=We.extend((function(){return{image:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},pixels:{px:null,nx:null,py:null,ny:null,pz:null,nz:null},mipmaps:[]}}),{textureType:"textureCube",update:function(t){var e=t.gl;e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),this.updateCommon(t);var n=this.format,i=this.type;e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_S,this.getAvailableWrapS()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_WRAP_T,this.getAvailableWrapT()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,this.getAvailableMagFilter()),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,this.getAvailableMinFilter());var r=t.getGLExtension("EXT_texture_filter_anisotropic");if(r&&this.anisotropic>1&&e.texParameterf(e.TEXTURE_CUBE_MAP,r.TEXTURE_MAX_ANISOTROPY_EXT,this.anisotropic),36193===i){var o=t.getGLExtension("OES_texture_half_float");o||(i=w.FLOAT)}if(this.mipmaps.length)for(var a=this.width,s=this.height,l=0;l<this.mipmaps.length;l++){var c=this.mipmaps[l];this._updateTextureData(e,c,l,a,s,n,i),a/=2,s/=2}else this._updateTextureData(e,this,0,this.width,this.height,n,i),!this.NPOT&&this.useMipmap&&e.generateMipmap(e.TEXTURE_CUBE_MAP);e.bindTexture(e.TEXTURE_CUBE_MAP,null)},_updateTextureData:function(t,e,n,i,r,o,a){for(var s=0;s<6;s++){var l=Wn[s],c=e.image&&e.image[l];c?t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,n,o,o,a,c):t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+s,n,o,i,r,0,o,a,e.pixels&&e.pixels[l])}},generateMipmap:function(t){var e=t.gl;this.useMipmap&&!this.NPOT&&(e.bindTexture(e.TEXTURE_CUBE_MAP,this._cache.get("webgl_texture")),e.generateMipmap(e.TEXTURE_CUBE_MAP))},bind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,this.getWebGLTexture(t))},unbind:function(t){t.gl.bindTexture(t.gl.TEXTURE_CUBE_MAP,null)},isPowerOfTwo:function(){return this.image.px?Un(this.image.px.width)&&Un(this.image.px.height):Un(this.width)&&Un(this.height)},isRenderable:function(){return this.image.px?Yn(this.image.px)&&Yn(this.image.nx)&&Yn(this.image.py)&&Yn(this.image.ny)&&Yn(this.image.pz)&&Yn(this.image.nz):!(!this.width||!this.height)},load:function(t,e){var n=0,i=this;return g.each(t,(function(t,r){var o=S["a"].createImage();e&&(o.crossOrigin=e),o.onload=function(){n--,0===n&&(i.dirty(),i.trigger("success",i))},o.onerror=function(){n--},n++,o.src=t,i.image[r]=o})),this}});function Yn(t){return t.width>0&&t.height>0}Object.defineProperty(Xn.prototype,"width",{get:function(){return this.image&&this.image.px?this.image.px.width:this._width},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set width"):(this._width!==t&&this.dirty(),this._width=t)}}),Object.defineProperty(Xn.prototype,"height",{get:function(){return this.image&&this.image.px?this.image.px.height:this._height},set:function(t){this.image&&this.image.px?console.warn("Texture from image can't set height"):(this._height!==t&&this.dirty(),this._height=t)}});var qn=Xn,Zn=kn.extend({fov:50,aspect:1,near:.1,far:2e3},{updateProjectionMatrix:function(){var t=this.fov/180*Math.PI;this.projectionMatrix.perspective(t,this.aspect,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array,e=2*Math.atan(1/t[5]);this.fov=e/Math.PI*180,this.aspect=t[5]/t[0],this.near=t[14]/(t[10]-1),this.far=t[14]/(t[10]+1)},clone:function(){var t=kn.prototype.clone.call(this);return t.fov=this.fov,t.aspect=this.aspect,t.near=this.near,t.far=this.far,t}}),Kn=Zn,$n="framebuffer",Jn="renderbuffer",Qn=Jn+"_width",ti=Jn+"_height",ei=Jn+"_attached",ni="depthtexture_attached",ii=w.FRAMEBUFFER,ri=w.RENDERBUFFER,oi=w.DEPTH_ATTACHMENT,ai=w.COLOR_ATTACHMENT0,si=v.extend({depthBuffer:!0,viewport:null,_width:0,_height:0,_textures:null,_boundRenderer:null},(function(){this._cache=new Ge,this._textures={}}),{getTextureWidth:function(){return this._width},getTextureHeight:function(){return this._height},bind:function(t){if(t.__currentFrameBuffer){if(t.__currentFrameBuffer===this)return;console.warn("Renderer already bound with another framebuffer. Unbind it first")}t.__currentFrameBuffer=this;var e=t.gl;e.bindFramebuffer(ii,this._getFrameBufferGL(t)),this._boundRenderer=t;var n=this._cache;n.put("viewport",t.viewport);var i,r,o=!1;for(var a in this._textures){o=!0;var s=this._textures[a];s&&(i=s.texture.width,r=s.texture.height,this._doAttach(t,s.texture,a,s.target))}this._width=i,this._height=r,!o&&this.depthBuffer&&console.error("Must attach texture before bind, or renderbuffer may have incorrect width and height."),this.viewport?t.setViewport(this.viewport):t.setViewport(0,0,i,r,1);var l=n.get("attached_textures");if(l)for(var a in l)if(!this._textures[a]){var c=l[a];this._doDetach(e,a,c)}if(!n.get(ni)&&this.depthBuffer){n.miss(Jn)&&n.put(Jn,e.createRenderbuffer());var u=n.get(Jn);i===n.get(Qn)&&r===n.get(ti)||(e.bindRenderbuffer(ri,u),e.renderbufferStorage(ri,e.DEPTH_COMPONENT16,i,r),n.put(Qn,i),n.put(ti,r),e.bindRenderbuffer(ri,null)),n.get(ei)||(e.framebufferRenderbuffer(ii,oi,ri,u),n.put(ei,!0))}},unbind:function(t){t.__currentFrameBuffer=null;var e=t.gl;e.bindFramebuffer(ii,null),this._boundRenderer=null,this._cache.use(t.__uid__);var n=this._cache.get("viewport");n&&t.setViewport(n),this.updateMipmap(t)},updateMipmap:function(t){var e=t.gl;for(var n in this._textures){var i=this._textures[n];if(i){var r=i.texture;if(!r.NPOT&&r.useMipmap&&r.minFilter===We.LINEAR_MIPMAP_LINEAR){var o="textureCube"===r.textureType?w.TEXTURE_CUBE_MAP:w.TEXTURE_2D;e.bindTexture(o,r.getWebGLTexture(t)),e.generateMipmap(o),e.bindTexture(o,null)}}}},checkStatus:function(t){return t.checkFramebufferStatus(ii)},_getFrameBufferGL:function(t){var e=this._cache;return e.use(t.__uid__),e.miss($n)&&e.put($n,t.gl.createFramebuffer()),e.get($n)},attach:function(t,e,n){if(!t.width)throw new Error("The texture attached to color buffer is not a valid.");e=e||ai,n=n||w.TEXTURE_2D;var i,r=this._boundRenderer,o=r&&r.gl;if(o){var a=this._cache;a.use(r.__uid__),i=a.get("attached_textures")}var s=this._textures[e];if(!s||s.target!==n||s.texture!==t||!i||null==i[e]){var l=!0;r&&(l=this._doAttach(r,t,e,n),this.viewport||r.setViewport(0,0,t.width,t.height,1)),l&&(this._textures[e]=this._textures[e]||{},this._textures[e].texture=t,this._textures[e].target=n)}},_doAttach:function(t,e,n,i){var r=t.gl,o=e.getWebGLTexture(t),a=this._cache.get("attached_textures");if(a&&a[n]){var s=a[n];if(s.texture===e&&s.target===i)return}n=+n;var l=!0;if(n===oi||n===w.DEPTH_STENCIL_ATTACHMENT){var c=t.getGLExtension("WEBGL_depth_texture");if(c||(console.error("Depth texture is not supported by the browser"),l=!1),e.format!==w.DEPTH_COMPONENT&&e.format!==w.DEPTH_STENCIL&&(console.error("The texture attached to depth buffer is not a valid."),l=!1),l){var u=this._cache.get(Jn);u&&(r.framebufferRenderbuffer(ii,oi,ri,null),r.deleteRenderbuffer(u),this._cache.put(Jn,!1)),this._cache.put(ei,!1),this._cache.put(ni,!0)}}return r.framebufferTexture2D(ii,n,i,o,0),a||(a={},this._cache.put("attached_textures",a)),a[n]=a[n]||{},a[n].texture=e,a[n].target=i,l},_doDetach:function(t,e,n){t.framebufferTexture2D(ii,e,n,null,0);var i=this._cache.get("attached_textures");i&&i[e]&&(i[e]=null),e!==oi&&e!==w.DEPTH_STENCIL_ATTACHMENT||this._cache.put(ni,!1)},detach:function(t,e){if(this._textures[t]=null,this._boundRenderer){var n=this._cache;n.use(this._boundRenderer.__uid__),this._doDetach(this._boundRenderer.gl,t,e)}},dispose:function(t){var e=t.gl,n=this._cache;n.use(t.__uid__);var i=n.get(Jn);i&&e.deleteRenderbuffer(i);var r=n.get($n);r&&e.deleteFramebuffer(r),n.deleteContext(t.__uid__),this._textures={}}});si.DEPTH_ATTACHMENT=oi,si.COLOR_ATTACHMENT0=ai,si.STENCIL_ATTACHMENT=w.STENCIL_ATTACHMENT,si.DEPTH_STENCIL_ATTACHMENT=w.DEPTH_STENCIL_ATTACHMENT;var li=si,ci=["px","nx","py","ny","pz","nz"],ui=v.extend((function(){var t={position:new fe,far:1e3,near:.1,texture:null,shadowMapPass:null},e=t._cameras={px:new Kn({fov:90}),nx:new Kn({fov:90}),py:new Kn({fov:90}),ny:new Kn({fov:90}),pz:new Kn({fov:90}),nz:new Kn({fov:90})};return e.px.lookAt(fe.POSITIVE_X,fe.NEGATIVE_Y),e.nx.lookAt(fe.NEGATIVE_X,fe.NEGATIVE_Y),e.py.lookAt(fe.POSITIVE_Y,fe.POSITIVE_Z),e.ny.lookAt(fe.NEGATIVE_Y,fe.NEGATIVE_Z),e.pz.lookAt(fe.POSITIVE_Z,fe.NEGATIVE_Y),e.nz.lookAt(fe.NEGATIVE_Z,fe.NEGATIVE_Y),t._frameBuffer=new li,t}),{getCamera:function(t){return this._cameras[t]},render:function(t,e,n){var i=t.gl;n||e.update();for(var r=this.texture.width,o=2*Math.atan(r/(r-.5))/Math.PI*180,a=0;a<6;a++){var s=ci[a],l=this._cameras[s];if(fe.copy(l.position,this.position),l.far=this.far,l.near=this.near,l.fov=o,this.shadowMapPass){l.update();var c=e.getBoundingBox();c.applyTransform(l.viewMatrix),e.viewBoundingBoxLastFrame.copy(c),this.shadowMapPass.render(t,e,l,!0)}this._frameBuffer.attach(this.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+a),this._frameBuffer.bind(t),t.render(e,l,!0),this._frameBuffer.unbind(t)}},dispose:function(t){this._frameBuffer.dispose(t)}}),hi=ui,fi=pn.extend({dynamic:!1,widthSegments:1,heightSegments:1},(function(){this.build()}),{build:function(){for(var t=this.heightSegments,e=this.widthSegments,n=this.attributes,i=[],r=[],o=[],a=[],s=0;s<=t;s++)for(var l=s/t,c=0;c<=e;c++){var u=c/e;if(i.push([2*u-1,2*l-1,0]),r&&r.push([u,l]),o&&o.push([0,0,1]),c<e&&s<t){var h=c+s*(e+1);a.push([h,h+1,h+e+1]),a.push([h+e+1,h+1,h+e+2])}}n.position.fromArray(i),n.texcoord0.fromArray(r),n.normal.fromArray(o),this.initIndicesFromArray(a),this.boundingBox=new Le,this.boundingBox.min.set(-1,-1,0),this.boundingBox.max.set(1,1,0)}}),di=fi,pi=new Oe,gi=pn.extend({dynamic:!1,widthSegments:1,heightSegments:1,depthSegments:1,inside:!1},(function(){this.build()}),{build:function(){var t={px:mi("px",this.depthSegments,this.heightSegments),nx:mi("nx",this.depthSegments,this.heightSegments),py:mi("py",this.widthSegments,this.depthSegments),ny:mi("ny",this.widthSegments,this.depthSegments),pz:mi("pz",this.widthSegments,this.heightSegments),nz:mi("nz",this.widthSegments,this.heightSegments)},e=["position","texcoord0","normal"],n=0,i=0;for(var r in t)n+=t[r].vertexCount,i+=t[r].indices.length;for(var o=0;o<e.length;o++)this.attributes[e[o]].init(n);this.indices=new S["a"].Uint16Array(i);var a=0,s=0;for(var r in t){var l=t[r];for(o=0;o<e.length;o++)for(var c=e[o],u=l.attributes[c].value,h=l.attributes[c].size,f="normal"===c,d=0;d<u.length;d++){var p=u[d];this.inside&&f&&(p=-p),this.attributes[c].value[d+h*s]=p}var g=l.indices.length;for(d=0;d<l.indices.length;d++)this.indices[d+a]=s+l.indices[this.inside?g-d-1:d];a+=l.indices.length,s+=l.vertexCount}this.boundingBox=new Le,this.boundingBox.max.set(1,1,1),this.boundingBox.min.set(-1,-1,-1)}});function mi(t,e,n){pi.identity();var i=new di({widthSegments:e,heightSegments:n});switch(t){case"px":Oe.translate(pi,pi,fe.POSITIVE_X),Oe.rotateY(pi,pi,Math.PI/2);break;case"nx":Oe.translate(pi,pi,fe.NEGATIVE_X),Oe.rotateY(pi,pi,-Math.PI/2);break;case"py":Oe.translate(pi,pi,fe.POSITIVE_Y),Oe.rotateX(pi,pi,-Math.PI/2);break;case"ny":Oe.translate(pi,pi,fe.NEGATIVE_Y),Oe.rotateX(pi,pi,Math.PI/2);break;case"pz":Oe.translate(pi,pi,fe.POSITIVE_Z);break;case"nz":Oe.translate(pi,pi,fe.NEGATIVE_Z),Oe.rotateY(pi,pi,Math.PI);break}return i.applyTransform(pi),i}var vi=gi,yi="@export clay.skybox.vertex\n#define SHADER_NAME skybox\nuniform mat4 world : WORLD;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nvarying vec3 v_WorldPosition;\nvoid main()\n{\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n@export clay.skybox.fragment\n#define PI 3.1415926\nuniform mat4 viewInverse : VIEWINVERSE;\n#ifdef EQUIRECTANGULAR\nuniform sampler2D environmentMap;\n#else\nuniform samplerCube environmentMap;\n#endif\nuniform float lod: 0.0;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\n@import clay.util.srgb\n@import clay.util.ACES\nvoid main()\n{\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n#ifdef EQUIRECTANGULAR\n float phi = acos(V.y);\n float theta = atan(-V.x, V.z) + PI * 0.5;\n vec2 uv = vec2(theta / 2.0 / PI, phi / PI);\n vec4 texel = decodeHDR(texture2D(environmentMap, fract(uv)));\n#else\n #if defined(LOD) || defined(SUPPORT_TEXTURE_LOD)\n vec4 texel = decodeHDR(textureCubeLodEXT(environmentMap, V, lod));\n #else\n vec4 texel = decodeHDR(textureCube(environmentMap, V));\n #endif\n#endif\n#ifdef SRGB_DECODE\n texel = sRGBToLinear(texel);\n#endif\n#ifdef TONEMAPPING\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n#ifdef SRGB_ENCODE\n texel = linearTosRGB(texel);\n#endif\n gl_FragColor = encodeHDR(vec4(texel.rgb, 1.0));\n}\n@end";zt.import(yi);var _i=Ye.extend((function(){var t=new zt({vertex:zt.source("clay.skybox.vertex"),fragment:zt.source("clay.skybox.fragment")}),e=new K({shader:t,depthMask:!1});return{scene:null,geometry:new vi,material:e,environmentMap:null,culling:!1,_dummyCamera:new Kn}}),(function(){var t=this.scene;t&&this.attachScene(t),this.environmentMap&&this.setEnvironmentMap(this.environmentMap)}),{attachScene:function(t){this.scene&&this.detachScene(),t.skybox=this,this.scene=t,t.on("beforerender",this._beforeRenderScene,this)},detachScene:function(){this.scene&&(this.scene.off("beforerender",this._beforeRenderScene),this.scene.skybox=null),this.scene=null},dispose:function(t){this.detachScene(),this.geometry.dispose(t)},setEnvironmentMap:function(t){"texture2D"===t.textureType?(this.material.define("EQUIRECTANGULAR"),t.minFilter=We.LINEAR):this.material.undefine("EQUIRECTANGULAR"),this.material.set("environmentMap",t)},getEnvironmentMap:function(){return this.material.get("environmentMap")},_beforeRenderScene:function(t,e,n){this.renderSkybox(t,n)},renderSkybox:function(t,e){var n=this._dummyCamera;n.aspect=t.getViewportAspect(),n.fov=e.fov||50,n.updateProjectionMatrix(),Oe.invert(n.invProjectionMatrix,n.projectionMatrix),n.worldTransform.copy(e.worldTransform),n.viewMatrix.copy(e.viewMatrix),this.position.copy(e.getWorldPosition()),this.update(),t.gl.disable(t.gl.BLEND),this.material.get("lod")>0?this.material.define("fragment","LOD"):this.material.undefine("fragment","LOD"),t.renderPass([this],n)}}),bi=_i,xi=bi,wi=542327876,Si=131072,Ti=512,Oi=4;function Ci(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}var Mi=31,Ai=Ci("DXT1"),Di=Ci("DXT3"),Ei=Ci("DXT5"),Ii=0,Pi=1,Li=2,ki=3,ji=4,Ri=7,Ni=20,Bi=21,Fi=28,zi={parse:function(t,e){var n=new Int32Array(t,0,Mi);if(n[Ii]!==wi)return null;if(!n(Ni)&Oi)return null;var i,r,o=n(Bi),a=n[ji],s=n[ki],l=n[Fi]&Ti,c=n[Li]&Si;switch(o){case Ai:i=8,r=We.COMPRESSED_RGB_S3TC_DXT1_EXT;break;case Di:i=16,r=We.COMPRESSED_RGBA_S3TC_DXT3_EXT;break;case Ei:i=16,r=We.COMPRESSED_RGBA_S3TC_DXT5_EXT;break;default:return null}var u=n[Pi]+4,h=l?6:1,f=1;c&&(f=Math.max(1,n[Ri]));for(var d=[],p=0;p<h;p++){var g=a,m=s;d[p]=new tn({width:g,height:m,format:r});for(var v=[],y=0;y<f;y++){var _=Math.max(4,g)/4*Math.max(4,m)/4*i,b=new Uint8Array(t,u,_);u+=_,g*=.5,m*=.5,v[y]=b}d[p].pixels=v[0],c&&(d[p].mipmaps=v)}if(!e)return d[0];e.width=d[0].width,e.height=d[0].height,e.format=d[0].format,e.pixels=d[0].pixels,e.mipmaps=d[0].mipmaps}},Vi=zi,Hi=String.fromCharCode,Gi=8,Ui=32767;function Wi(t,e,n,i){if(t[3]>0){var r=Math.pow(2,t[3]-128-8+i);e[n+0]=t[0]*r,e[n+1]=t[1]*r,e[n+2]=t[2]*r}else e[n+0]=0,e[n+1]=0,e[n+2]=0;return e[n+3]=1,e}function Xi(t,e,n){for(var i="",r=e;r<n;r++)i+=Hi(t[r]);return i}function Yi(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3]}function qi(t,e,n,i){var r=0,o=0,a=i;while(a>0)if(t[o][0]=e[n++],t[o][1]=e[n++],t[o][2]=e[n++],t[o][3]=e[n++],1===t[o][0]&&1===t[o][1]&&1===t[o][2]){for(var s=t[o][3]<<r>>>0;s>0;s--)Yi(t[o-1],t[o]),o++,a--;r+=8}else o++,a--,r=0;return n}function Zi(t,e,n,i){if(i<Gi|i>Ui)return qi(t,e,n,i);var r=e[n++];if(2!=r)return qi(t,e,n-1,i);if(t[0][1]=e[n++],t[0][2]=e[n++],r=e[n++],(t[0][2]<<8>>>0|r)>>>0!==i)return null;for(r=0;r<4;r++)for(var o=0;o<i;){var a=e[n++];if(a>128){a=(127&a)>>>0;var s=e[n++];while(a--)t[o++][r]=s}else while(a--)t[o++][r]=e[n++]}return n}var Ki={parseRGBE:function(t,e,n){null==n&&(n=0);var i=new Uint8Array(t),r=i.length;if("#?"===Xi(i,0,2)){for(var o=2;o<r;o++)if("\n"===Hi(i[o])&&"\n"===Hi(i[o+1]))break;if(!(o>=r)){o+=2;for(var a="";o<r;o++){var s=Hi(i[o]);if("\n"===s)break;a+=s}var l=a.split(" "),c=parseInt(l[1]),u=parseInt(l[3]);if(u&&c){for(var h=o+1,f=[],d=0;d<u;d++){f[d]=[];for(var p=0;p<4;p++)f[d][p]=0}for(var g=new Float32Array(u*c*4),m=0,v=0;v<c;v++){h=Zi(f,i,h,u);if(!h)return null;for(d=0;d<u;d++)Wi(f[d],g,m,n),m+=4}return e||(e=new tn),e.width=u,e.height=c,e.pixels=g,e.type=We.FLOAT,e}}}},parseRGBEFromPNG:function(t){}},$i=Ki,Ji={loadTexture:function(t,e,n,i){var r;if("function"===typeof e?(n=e,i=n,e={}):e=e||{},"string"===typeof t){if(t.match(/.hdr$/)||"hdr"===e.fileType)return r=new tn({width:0,height:0,sRGB:!1}),Ji._fetchTexture(t,(function(t){$i.parseRGBE(t,r,e.exposure),r.dirty(),n&&n(r)}),i),r;t.match(/.dds$/)||"dds"===e.fileType?(r=new tn({width:0,height:0}),Ji._fetchTexture(t,(function(t){Vi.parse(t,r),r.dirty(),n&&n(r)}),i)):(r=new tn,r.load(t),r.success(n),r.error(i))}else"object"===typeof t&&"undefined"!==typeof t.px&&(r=new qn,r.load(t),r.success(n),r.error(i));return r},loadPanorama:function(t,e,n,i,r,o){var a=this;"function"===typeof i?(r=i,o=r,i={}):i=i||{},Ji.loadTexture(e,i,(function(e){e.flipY=i.flipY||!1,a.panoramaToCubeMap(t,e,n,i),e.dispose(t),r&&r(n)}),o)},panoramaToCubeMap:function(t,e,n,i){var r=new hi,o=new xi({scene:new Hn});return o.setEnvironmentMap(e),i=i||{},i.encodeRGBM&&o.material.define("fragment","RGBM_ENCODE"),n.sRGB=e.sRGB,r.texture=n,r.render(t,o.scene),r.texture=null,r.dispose(t),n},heightToNormal:function(t,e){var n=document.createElement("canvas"),i=n.width=t.width,r=n.height=t.height,o=n.getContext("2d");o.drawImage(t,0,0,i,r),e=e||!1;for(var a=o.getImageData(0,0,i,r),s=o.createImageData(i,r),l=0;l<a.data.length;l+=4){if(e){var c=a.data[l],u=a.data[l+1],h=a.data[l+2],f=Math.abs(c-u)+Math.abs(u-h);if(f>20)return console.warn("Given image is not a height map"),t}var d,p,g,m;l%(4*i)===0?(d=a.data[l],g=a.data[l+4]):l%(4*i)===4*(i-1)?(d=a.data[l-4],g=a.data[l]):(d=a.data[l-4],g=a.data[l+4]),l<4*i?(p=a.data[l],m=a.data[l+4*i]):l>i*(r-1)*4?(p=a.data[l-4*i],m=a.data[l]):(p=a.data[l-4*i],m=a.data[l+4*i]),s.data[l]=d-g+127,s.data[l+1]=p-m+127,s.data[l+2]=255,s.data[l+3]=255}return o.putImageData(s,0,0),n},isHeightImage:function(t,e,n){if(!t||!t.width||!t.height)return!1;var i=document.createElement("canvas"),r=i.getContext("2d"),o=e||32;n=n||20,i.width=i.height=o,r.drawImage(t,0,0,o,o);for(var a=r.getImageData(0,0,o,o),s=0;s<a.data.length;s+=4){var l=a.data[s],c=a.data[s+1],u=a.data[s+2],h=Math.abs(l-c)+Math.abs(c-u);if(h>n)return!1}return!0},_fetchTexture:function(t,e,n){S["a"].request.get({url:t,responseType:"arraybuffer",onload:e,onerror:n})},createChessboard:function(t,e,n,i){t=t||512,e=e||64,n=n||"black",i=i||"white";var r=Math.ceil(t/e),o=document.createElement("canvas");o.width=t,o.height=t;var a=o.getContext("2d");a.fillStyle=i,a.fillRect(0,0,t,t),a.fillStyle=n;for(var s=0;s<r;s++)for(var l=0;l<r;l++){var c=l%2?s%2:s%2-1;c&&a.fillRect(s*e,l*e,e,e)}var u=new tn({image:o,anisotropic:8});return u},createBlank:function(t){var e=document.createElement("canvas");e.width=1,e.height=1;var n=e.getContext("2d");n.fillStyle=t,n.fillRect(0,0,1,1);var i=new tn({image:e});return i}},Qi=Ji,tr=["mousedown","mouseup","mousemove","mouseover","mouseout","click","dblclick","contextmenu"];function er(t){return"_on"+t}var nr=function(t){var e=this;this._texture=new tn({anisotropic:32,flipY:!1,surface:this,dispose:function(t){e.dispose(),tn.prototype.dispose.call(this,t)}}),tr.forEach((function(t){this[er(t)]=function(e){e.triangle&&this._meshes.forEach((function(n){this.dispatchEvent(t,n,e.triangle,e.point)}),this)}}),this),this._meshes=[],t&&this.setECharts(t),this.onupdate=null};nr.prototype={constructor:nr,getTexture:function(){return this._texture},setECharts:function(t){this._chart=t;var e=t.getDom();if(e instanceof HTMLCanvasElement){var n=this,i=t.getZr(),r=i.__oldRefreshImmediately||i.refreshImmediately;i.refreshImmediately=function(){r.call(this),n._texture.dirty(),n.onupdate&&n.onupdate()},i.__oldRefreshImmediately=r}else console.error("ECharts must init on canvas if it is used as texture."),e=document.createElement("canvas");this._texture.image=e,this._texture.dirty(),this.onupdate&&this.onupdate()},dispatchEvent:function(){var t=new fe,e=new fe,n=new fe,i=new rt,r=new rt,o=new rt,a=new rt,s=new fe;return function(l,c,u,h){var f=c.geometry,d=f.attributes.position,p=f.attributes.texcoord0,g=fe.dot,m=fe.cross;d.get(u[0],t.array),d.get(u[1],e.array),d.get(u[2],n.array),p.get(u[0],i.array),p.get(u[1],r.array),p.get(u[2],o.array),m(s,e,n);var v=g(t,s),y=g(h,s)/v;m(s,n,t);var _=g(h,s)/v;m(s,t,e);var b=g(h,s)/v;rt.scale(a,i,y),rt.scaleAndAdd(a,a,r,_),rt.scaleAndAdd(a,a,o,b);var x=a.x*this._chart.getWidth(),w=a.y*this._chart.getHeight();this._chart.getZr().handler.dispatch(l,{zrX:x,zrY:w})}}(),attachToMesh:function(t){this._meshes.indexOf(t)>=0||(tr.forEach((function(e){t.on(e,this[er(e)],this)}),this),this._meshes.push(t))},detachFromMesh:function(t){var e=this._meshes.indexOf(t);e>=0&&this._meshes.splice(e,1),tr.forEach((function(e){t.off(e,this[er(e)])}),this)},dispose:function(){this._meshes.forEach((function(t){this.detachFromMesh(t)}),this)}};var ir=nr,rr=kn.extend({left:-1,right:1,near:-1,far:1,top:1,bottom:-1},{updateProjectionMatrix:function(){this.projectionMatrix.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far)},decomposeProjectionMatrix:function(){var t=this.projectionMatrix.array;this.left=(-1-t[12])/t[0],this.right=(1-t[12])/t[0],this.top=(1-t[13])/t[5],this.bottom=(-1-t[13])/t[5],this.near=-(-1-t[14])/t[10],this.far=-(1-t[14])/t[10]},clone:function(){var t=kn.prototype.clone.call(this);return t.left=this.left,t.right=this.right,t.near=this.near,t.far=this.far,t.top=this.top,t.bottom=this.bottom,t}}),or=rr,ar="\n@export clay.compositor.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nvarying vec2 v_Texcoord;\nvoid main()\n{\n v_Texcoord = texcoord;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end";zt["import"](ar);var sr=new di,lr=new Ye({geometry:sr,frustumCulling:!1}),cr=new or,ur=v.extend((function(){return{fragment:"",outputs:null,material:null,blendWithPrevious:!1,clearColor:!1,clearDepth:!0}}),(function(){var t=new zt(zt.source("clay.compositor.vertex"),this.fragment),e=new K({shader:t});e.enableTexturesAll(),this.material=e}),{setUniform:function(t,e){this.material.setUniform(t,e)},getUniform:function(t){var e=this.material.uniforms[t];if(e)return e.value},attachOutput:function(t,e){this.outputs||(this.outputs={}),e=e||w.COLOR_ATTACHMENT0,this.outputs[e]=t},detachOutput:function(t){for(var e in this.outputs)this.outputs[e]===t&&(this.outputs[e]=null)},bind:function(t,e){if(this.outputs)for(var n in this.outputs){var i=this.outputs[n];i&&e.attach(i,n)}e&&e.bind(t)},unbind:function(t,e){e.unbind(t)},render:function(t,e){var n=t.gl;if(e){this.bind(t,e);var i=t.getGLExtension("EXT_draw_buffers");if(i&&this.outputs){var r=[];for(var o in this.outputs)o=+o,o>=n.COLOR_ATTACHMENT0&&o<=n.COLOR_ATTACHMENT0+8&&r.push(o);i.drawBuffersEXT(r)}}this.trigger("beforerender",this,t);var a=this.clearDepth?n.DEPTH_BUFFER_BIT:0;if(n.depthMask(!0),this.clearColor){a|=n.COLOR_BUFFER_BIT,n.colorMask(!0,!0,!0,!0);var s=this.clearColor;Array.isArray(s)&&n.clearColor(s[0],s[1],s[2],s[3])}n.clear(a),this.blendWithPrevious?(n.enable(n.BLEND),this.material.transparent=!0):(n.disable(n.BLEND),this.material.transparent=!1),this.renderQuad(t),this.trigger("afterrender",this,t),e&&this.unbind(t,e)},renderQuad:function(t){lr.material=this.material,t.renderPass([lr],cr)},dispose:function(t){}}),hr=ur,fr="#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform sampler2D normalDistribution;\nuniform vec2 viewportSize : [512, 256];\nconst vec3 N = vec3(0.0, 0.0, 1.0);\nconst float fSampleNumber = float(SAMPLE_NUMBER);\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nfloat G_Smith(float roughness, float NoV, float NoL) {\n float k = roughness * roughness / 2.0;\n float G1V = NoV / (NoV * (1.0 - k) + k);\n float G1L = NoL / (NoL * (1.0 - k) + k);\n return G1L * G1V;\n}\nvoid main() {\n vec2 uv = gl_FragCoord.xy / viewportSize;\n float NoV = uv.x;\n float roughness = uv.y;\n vec3 V;\n V.x = sqrt(1.0 - NoV * NoV);\n V.y = 0.0;\n V.z = NoV;\n float A = 0.0;\n float B = 0.0;\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(L.z, 0.0, 1.0);\n float NoH = clamp(H.z, 0.0, 1.0);\n float VoH = clamp(dot(V, H), 0.0, 1.0);\n if (NoL > 0.0) {\n float G = G_Smith(roughness, NoV, NoL);\n float G_Vis = G * VoH / (NoH * NoV);\n float Fc = pow(1.0 - VoH, 5.0);\n A += (1.0 - Fc) * G_Vis;\n B += Fc * G_Vis;\n }\n }\n gl_FragColor = vec4(vec2(A, B) / fSampleNumber, 0.0, 1.0);\n}\n",dr="#define SHADER_NAME prefilter\n#define SAMPLE_NUMBER 1024\n#define PI 3.14159265358979\nuniform mat4 viewInverse : VIEWINVERSE;\nuniform samplerCube environmentMap;\nuniform sampler2D normalDistribution;\nuniform float roughness : 0.5;\nvarying vec2 v_Texcoord;\nvarying vec3 v_WorldPosition;\n@import clay.util.rgbm\nvec3 importanceSampleNormal(float i, float roughness, vec3 N) {\n vec3 H = texture2D(normalDistribution, vec2(roughness, i)).rgb;\n vec3 upVector = abs(N.y) > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvoid main() {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(v_WorldPosition - eyePos);\n vec3 N = V;\n vec3 prefilteredColor = vec3(0.0);\n float totalWeight = 0.0;\n float fMaxSampleNumber = float(SAMPLE_NUMBER);\n for (int i = 0; i < SAMPLE_NUMBER; i++) {\n vec3 H = importanceSampleNormal(float(i) / fMaxSampleNumber, roughness, N);\n vec3 L = reflect(-V, H);\n float NoL = clamp(dot(N, L), 0.0, 1.0);\n if (NoL > 0.0) {\n prefilteredColor += decodeHDR(textureCube(environmentMap, L)).rgb * NoL;\n totalWeight += NoL;\n }\n }\n gl_FragColor = encodeHDR(vec4(prefilteredColor / totalWeight, 1.0));\n}\n",pr={},gr=["px","nx","py","ny","pz","nz"];pr.prefilterEnvironmentMap=function(t,e,n,i,r){r&&i||(i=pr.generateNormalDistribution(),r=pr.integrateBRDF(t,i)),n=n||{};var o=n.width||64,a=n.height||64,s=n.type||e.type,l=new qn({width:o,height:a,type:s,flipY:!1,mipmaps:[]});l.isPowerOfTwo()||console.warn("Width and height must be power of two to enable mipmap.");var c=Math.min(o,a),u=Math.log(c)/Math.log(2)+1,h=new K({shader:new zt({vertex:zt.source("clay.skybox.vertex"),fragment:dr})});h.set("normalDistribution",i),n.encodeRGBM&&h.define("fragment","RGBM_ENCODE"),n.decodeRGBM&&h.define("fragment","RGBM_DECODE");var f,d=new Hn;if("texture2D"===e.textureType){var p=new qn({width:o,height:a,type:s===We.FLOAT?We.HALF_FLOAT:s});Qi.panoramaToCubeMap(t,e,p,{encodeRGBM:n.decodeRGBM}),e=p}f=new bi({scene:d,material:h}),f.material.set("environmentMap",e);var g=new hi({texture:l});n.encodeRGBM&&(s=l.type=We.UNSIGNED_BYTE);for(var m=new tn({width:o,height:a,type:s}),v=new li({depthBuffer:!1}),y=S["a"][s===We.UNSIGNED_BYTE?"Uint8Array":"Float32Array"],_=0;_<u;_++){l.mipmaps[_]={pixels:{}},f.material.set("roughness",_/(u-1));for(var b=m.width,x=2*Math.atan(b/(b-.5))/Math.PI*180,w=0;w<gr.length;w++){var T=new y(m.width*m.height*4);v.attach(m),v.bind(t);var O=g.getCamera(gr[w]);O.fov=x,t.render(d,O),t.gl.readPixels(0,0,m.width,m.height,We.RGBA,s,T),v.unbind(t),l.mipmaps[_].pixels[gr[w]]=T}m.width/=2,m.height/=2,m.dirty()}return v.dispose(t),m.dispose(t),f.dispose(t),i.dispose(t),{environmentMap:l,brdfLookup:r,normalDistribution:i,maxMipmapLevel:u}},pr.integrateBRDF=function(t,e){e=e||pr.generateNormalDistribution();var n=new li({depthBuffer:!1}),i=new hr({fragment:fr}),r=new tn({width:512,height:256,type:We.HALF_FLOAT,wrapS:We.CLAMP_TO_EDGE,wrapT:We.CLAMP_TO_EDGE,minFilter:We.NEAREST,magFilter:We.NEAREST,useMipmap:!1});return i.setUniform("normalDistribution",e),i.setUniform("viewportSize",[512,256]),i.attachOutput(r),i.render(t,n),n.dispose(t),r},pr.generateNormalDistribution=function(t,e){t=t||256,e=e||1024;for(var n=new tn({width:t,height:e,type:We.FLOAT,minFilter:We.NEAREST,magFilter:We.NEAREST,wrapS:We.CLAMP_TO_EDGE,wrapT:We.CLAMP_TO_EDGE,useMipmap:!1}),i=new Float32Array(e*t*4),r=[],o=0;o<t;o++){for(var a=o/t,s=a*a,l=0;l<e;l++){var c=(l<<16|l>>>16)>>>0;c=((1431655765&c)<<1|(2863311530&c)>>>1)>>>0,c=((858993459&c)<<2|(3435973836&c)>>>2)>>>0,c=((252645135&c)<<4|(4042322160&c)>>>4)>>>0,c=(((16711935&c)<<8|(4278255360&c)>>>8)>>>0)/4294967296;var u=Math.sqrt((1-c)/(1+(s*s-1)*c));r[l]=u}for(l=0;l<e;l++){var h=4*(l*t+o),f=(u=r[l],Math.sqrt(1-u*u)),d=l/e,p=2*Math.PI*d;i[h]=f*Math.cos(p),i[h+1]=u,i[h+2]=f*Math.sin(p),i[h+3]=1}}return n.pixels=i,n};var mr=pr,vr=Sn.extend({cubemap:null,castShadow:!1,_normalDistribution:null,_brdfLookup:null},{type:"AMBIENT_CUBEMAP_LIGHT",prefilter:function(t,e){if(t.getGLExtension("EXT_shader_texture_lod")){this._brdfLookup||(this._normalDistribution=mr.generateNormalDistribution(),this._brdfLookup=mr.integrateBRDF(t,this._normalDistribution));var n=this.cubemap;if(!n.__prefiltered){var i=mr.prefilterEnvironmentMap(t,n,{encodeRGBM:!0,width:e,height:e},this._normalDistribution,this._brdfLookup);this.cubemap=i.environmentMap,this.cubemap.__prefiltered=!0,n.dispose(t)}}else console.warn("Device not support textureCubeLodEXT")},getBRDFLookup:function(){return this._brdfLookup},uniformTemplates:{ambientCubemapLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}},ambientCubemapLightCubemap:{type:"t",value:function(t){return t.cubemap}},ambientCubemapLightBRDFLookup:{type:"t",value:function(t){return t._brdfLookup}}}}),yr=vr,_r=Sn.extend({castShadow:!1,coefficients:[]},(function(){this._coefficientsTmpArr=new S["a"].Float32Array(27)}),{type:"AMBIENT_SH_LIGHT",uniformTemplates:{ambientSHLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}},ambientSHLightCoefficients:{type:"3f",value:function(t){for(var e=t._coefficientsTmpArr,n=0;n<t.coefficients.length;n++)e[n]=t.coefficients[n];return e}}}}),br=_r,xr={},wr=["px","nx","py","ny","pz","nz"];function Sr(t,e){var n=t[0],i=t[1],r=t[2];return 0===e?1:1===e?n:2===e?i:3===e?r:4===e?n*r:5===e?i*r:6===e?n*i:7===e?3*r*r-1:n*n-i*i}var Tr={px:[2,1,0,-1,-1,1],nx:[2,1,0,1,-1,-1],py:[0,2,1,1,-1,-1],ny:[0,2,1,1,1,1],pz:[0,1,2,-1,-1,-1],nz:[0,1,2,1,-1,1]};function Or(t,e,n,i){for(var r=new S["a"].Float32Array(27),o=Wt.create(),a=Wt.create(),s=Wt.create(),l=0;l<9;l++){for(var c=Wt.create(),u=0;u<wr.length;u++){for(var h=e[wr[u]],f=Wt.create(),d=0,p=0,g=Tr[wr[u]],m=0;m<i;m++)for(var v=0;v<n;v++){o[0]=v/(n-1)*2-1,o[1]=m/(i-1)*2-1,o[2]=-1,Wt.normalize(o,o),s[0]=o[g[0]]*g[3],s[1]=o[g[1]]*g[4],s[2]=o[g[2]]*g[5],a[0]=h[p++]/255,a[1]=h[p++]/255,a[2]=h[p++]/255;var y=h[p++]/255*8.12;a[0]*=y,a[1]*=y,a[2]*=y,Wt.scaleAndAdd(f,f,a,Sr(s,l)*-o[2]),d+=-o[2]}Wt.scaleAndAdd(c,c,f,1/d)}r[3*l]=c[0]/6,r[3*l+1]=c[1]/6,r[3*l+2]=c[2]/6}return r}xr.projectEnvironmentMap=function(t,e,n){var i;n=n||{},n.lod=n.lod||0;var r=new Hn,o=64;"texture2D"===e.textureType?i=new xi({scene:r,environmentMap:e}):(o=e.image&&e.image.px?e.image.px.width:e.width,i=new bi({scene:r,environmentMap:e}));var a=Math.ceil(o/Math.pow(2,n.lod)),s=Math.ceil(o/Math.pow(2,n.lod)),l=new tn({width:a,height:s}),c=new li;i.material.define("fragment","RGBM_ENCODE"),n.decodeRGBM&&i.material.define("fragment","RGBM_DECODE"),i.material.set("lod",n.lod);for(var u=new hi({texture:l}),h={},f=0;f<wr.length;f++){h[wr[f]]=new Uint8Array(a*s*4);var d=u.getCamera(wr[f]);d.fov=90,c.attach(l),c.bind(t),t.render(r,d),t.gl.readPixels(0,0,a,s,We.RGBA,We.UNSIGNED_BYTE,h[wr[f]]),c.unbind(t)}return i.dispose(t),c.dispose(t),l.dispose(t),Or(t,h,a,s)};var Cr=xr,Mr={firstNotNull:function(){for(var t=0,e=arguments.length;t<e;t++)if(null!=arguments[t])return arguments[t]},queryDataIndex:function(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?i["x"].isArray(e.dataIndex)?i["x"].map(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?i["x"].isArray(e.name)?i["x"].map(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}},Ar=Mr,Dr=pn.extend({dynamic:!1,widthSegments:40,heightSegments:20,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI,radius:1},(function(){this.build()}),{build:function(){var t=this.heightSegments,e=this.widthSegments,n=this.attributes.position,i=this.attributes.texcoord0,r=this.attributes.normal,o=(e+1)*(t+1);n.init(o),i.init(o),r.init(o);var a,s,l,c,u,h,f,d,p,g,m,v=o>65535?Uint32Array:Uint16Array,y=this.indices=new v(e*t*6),_=this.radius,b=this.phiStart,x=this.phiLength,w=this.thetaStart,S=this.thetaLength,T=(_=this.radius,[]),O=[],C=0,M=1/_;for(f=0;f<=t;f++)for(h=0;h<=e;h++)c=h/e,u=f/t,a=-_*Math.cos(b+c*x)*Math.sin(w+u*S),s=_*Math.cos(w+u*S),l=_*Math.sin(b+c*x)*Math.sin(w+u*S),T[0]=a,T[1]=s,T[2]=l,O[0]=c,O[1]=u,n.set(C,T),i.set(C,O),T[0]*=M,T[1]*=M,T[2]*=M,r.set(C,T),C++;var A=e+1,D=0;for(f=0;f<t;f++)for(h=0;h<e;h++)p=f*A+h,d=f*A+h+1,m=(f+1)*A+h+1,g=(f+1)*A+h,y[D++]=d,y[D++]=p,y[D++]=m,y[D++]=p,y[D++]=g,y[D++]=m;this.boundingBox=new Le,this.boundingBox.max.set(_,_,_),this.boundingBox.min.set(-_,-_,-_)}}),Er=Dr,Ir=Sn.extend({castShadow:!1},{type:"AMBIENT_LIGHT",uniformTemplates:{ambientLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}}}}),Pr=Ir,Lr=Sn.extend({shadowBias:.001,shadowSlopeScale:2,shadowCascade:1,cascadeSplitLogFactor:.2},{type:"DIRECTIONAL_LIGHT",uniformTemplates:{directionalLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new fe,t.__dir.copy(t.worldTransform.z).normalize().negate().array}},directionalLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}}},clone:function(){var t=Sn.prototype.clone.call(this);return t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),kr=Lr,jr=Sn.extend({range:100,castShadow:!1},{type:"POINT_LIGHT",uniformTemplates:{pointLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},pointLightRange:{type:"1f",value:function(t){return t.range}},pointLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}}},clone:function(){var t=Sn.prototype.clone.call(this);return t.range=this.range,t}}),Rr=jr,Nr=Sn.extend({range:20,umbraAngle:30,penumbraAngle:45,falloffFactor:2,shadowBias:.001,shadowSlopeScale:2},{type:"SPOT_LIGHT",uniformTemplates:{spotLightPosition:{type:"3f",value:function(t){return t.getWorldPosition().array}},spotLightRange:{type:"1f",value:function(t){return t.range}},spotLightUmbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.umbraAngle*Math.PI/180)}},spotLightPenumbraAngleCosine:{type:"1f",value:function(t){return Math.cos(t.penumbraAngle*Math.PI/180)}},spotLightFalloffFactor:{type:"1f",value:function(t){return t.falloffFactor}},spotLightDirection:{type:"3f",value:function(t){return t.__dir=t.__dir||new fe,t.__dir.copy(t.worldTransform.z).negate().array}},spotLightColor:{type:"3f",value:function(t){var e=t.color,n=t.intensity;return[e[0]*n,e[1]*n,e[2]*n]}}},clone:function(){var t=Sn.prototype.clone.call(this);return t.range=this.range,t.umbraAngle=this.umbraAngle,t.penumbraAngle=this.penumbraAngle,t.falloffFactor=this.falloffFactor,t.shadowBias=this.shadowBias,t.shadowSlopeScale=this.shadowSlopeScale,t}}),Br=Nr,Fr=function(t,e,n,i){t=t||0,e=e||0,n=n||0,i=i||0,this.array=ve.fromValues(t,e,n,i),this._dirty=!0};Fr.prototype={constructor:Fr,add:function(t){return ve.add(this.array,this.array,t.array),this._dirty=!0,this},set:function(t,e,n,i){return this.array[0]=t,this.array[1]=e,this.array[2]=n,this.array[3]=i,this._dirty=!0,this},setArray:function(t){return this.array[0]=t[0],this.array[1]=t[1],this.array[2]=t[2],this.array[3]=t[3],this._dirty=!0,this},clone:function(){return new Fr(this.x,this.y,this.z,this.w)},copy:function(t){return ve.copy(this.array,t.array),this._dirty=!0,this},dist:function(t){return ve.dist(this.array,t.array)},distance:function(t){return ve.distance(this.array,t.array)},div:function(t){return ve.div(this.array,this.array,t.array),this._dirty=!0,this},divide:function(t){return ve.divide(this.array,this.array,t.array),this._dirty=!0,this},dot:function(t){return ve.dot(this.array,t.array)},len:function(){return ve.len(this.array)},length:function(){return ve.length(this.array)},lerp:function(t,e,n){return ve.lerp(this.array,t.array,e.array,n),this._dirty=!0,this},min:function(t){return ve.min(this.array,this.array,t.array),this._dirty=!0,this},max:function(t){return ve.max(this.array,this.array,t.array),this._dirty=!0,this},mul:function(t){return ve.mul(this.array,this.array,t.array),this._dirty=!0,this},multiply:function(t){return ve.multiply(this.array,this.array,t.array),this._dirty=!0,this},negate:function(){return ve.negate(this.array,this.array),this._dirty=!0,this},normalize:function(){return ve.normalize(this.array,this.array),this._dirty=!0,this},random:function(t){return ve.random(this.array,t),this._dirty=!0,this},scale:function(t){return ve.scale(this.array,this.array,t),this._dirty=!0,this},scaleAndAdd:function(t,e){return ve.scaleAndAdd(this.array,this.array,t.array,e),this._dirty=!0,this},sqrDist:function(t){return ve.sqrDist(this.array,t.array)},squaredDistance:function(t){return ve.squaredDistance(this.array,t.array)},sqrLen:function(){return ve.sqrLen(this.array)},squaredLength:function(){return ve.squaredLength(this.array)},sub:function(t){return ve.sub(this.array,this.array,t.array),this._dirty=!0,this},subtract:function(t){return ve.subtract(this.array,this.array,t.array),this._dirty=!0,this},transformMat4:function(t){return ve.transformMat4(this.array,this.array,t.array),this._dirty=!0,this},transformQuat:function(t){return ve.transformQuat(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}};var zr=Object.defineProperty;if(zr){var Vr=Fr.prototype;zr(Vr,"x",{get:function(){return this.array[0]},set:function(t){this.array[0]=t,this._dirty=!0}}),zr(Vr,"y",{get:function(){return this.array[1]},set:function(t){this.array[1]=t,this._dirty=!0}}),zr(Vr,"z",{get:function(){return this.array[2]},set:function(t){this.array[2]=t,this._dirty=!0}}),zr(Vr,"w",{get:function(){return this.array[3]},set:function(t){this.array[3]=t,this._dirty=!0}})}Fr.add=function(t,e,n){return ve.add(t.array,e.array,n.array),t._dirty=!0,t},Fr.set=function(t,e,n,i,r){ve.set(t.array,e,n,i,r),t._dirty=!0},Fr.copy=function(t,e){return ve.copy(t.array,e.array),t._dirty=!0,t},Fr.dist=function(t,e){return ve.distance(t.array,e.array)},Fr.distance=Fr.dist,Fr.div=function(t,e,n){return ve.divide(t.array,e.array,n.array),t._dirty=!0,t},Fr.divide=Fr.div,Fr.dot=function(t,e){return ve.dot(t.array,e.array)},Fr.len=function(t){return ve.length(t.array)},Fr.lerp=function(t,e,n,i){return ve.lerp(t.array,e.array,n.array,i),t._dirty=!0,t},Fr.min=function(t,e,n){return ve.min(t.array,e.array,n.array),t._dirty=!0,t},Fr.max=function(t,e,n){return ve.max(t.array,e.array,n.array),t._dirty=!0,t},Fr.mul=function(t,e,n){return ve.multiply(t.array,e.array,n.array),t._dirty=!0,t},Fr.multiply=Fr.mul,Fr.negate=function(t,e){return ve.negate(t.array,e.array),t._dirty=!0,t},Fr.normalize=function(t,e){return ve.normalize(t.array,e.array),t._dirty=!0,t},Fr.random=function(t,e){return ve.random(t.array,e),t._dirty=!0,t},Fr.scale=function(t,e,n){return ve.scale(t.array,e.array,n),t._dirty=!0,t},Fr.scaleAndAdd=function(t,e,n,i){return ve.scaleAndAdd(t.array,e.array,n.array,i),t._dirty=!0,t},Fr.sqrDist=function(t,e){return ve.sqrDist(t.array,e.array)},Fr.squaredDistance=Fr.sqrDist,Fr.sqrLen=function(t){return ve.sqrLen(t.array)},Fr.squaredLength=Fr.sqrLen,Fr.sub=function(t,e,n){return ve.subtract(t.array,e.array,n.array),t._dirty=!0,t},Fr.subtract=Fr.sub,Fr.transformMat4=function(t,e,n){return ve.transformMat4(t.array,e.array,n.array),t._dirty=!0,t},Fr.transformQuat=function(t,e,n){return ve.transformQuat(t.array,e.array,n.array),t._dirty=!0,t};var Hr=Fr,Gr={create:function(){var t=new J(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},clone:function(t){var e=new J(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},transpose:function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},invert:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=n*o-r*i;return a?(a=1/a,t[0]=o*a,t[1]=-i*a,t[2]=-r*a,t[3]=n*a,t):null},adjoint:function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},determinant:function(t){return t[0]*t[3]-t[2]*t[1]},multiply:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],l=n[1],c=n[2],u=n[3];return t[0]=i*s+o*l,t[1]=r*s+a*l,t[2]=i*c+o*u,t[3]=r*c+a*u,t}};Gr.mul=Gr.multiply,Gr.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=Math.sin(n),l=Math.cos(n);return t[0]=i*l+o*s,t[1]=r*l+a*s,t[2]=i*-s+o*l,t[3]=r*-s+a*l,t},Gr.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=n[0],l=n[1];return t[0]=i*s,t[1]=r*s,t[2]=o*l,t[3]=a*l,t},Gr.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},Gr.LDU=function(t,e,n,i){return t[2]=i[2]/i[0],n[0]=i[0],n[1]=i[1],n[3]=i[3]-t[2]*n[1],[t,e,n]};var Ur=Gr,Wr=function(){this.array=Ur.create(),this._dirty=!0};Wr.prototype={constructor:Wr,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},clone:function(){return(new Wr).copy(this)},copy:function(t){return Ur.copy(this.array,t.array),this._dirty=!0,this},adjoint:function(){return Ur.adjoint(this.array,this.array),this._dirty=!0,this},determinant:function(){return Ur.determinant(this.array)},identity:function(){return Ur.identity(this.array),this._dirty=!0,this},invert:function(){return Ur.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return Ur.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return Ur.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return Ur.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return Ur.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return Ur.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return Ur.scale(this.array,this.array,t.array),this._dirty=!0,this},transpose:function(){return Ur.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Wr.adjoint=function(t,e){return Ur.adjoint(t.array,e.array),t._dirty=!0,t},Wr.copy=function(t,e){return Ur.copy(t.array,e.array),t._dirty=!0,t},Wr.determinant=function(t){return Ur.determinant(t.array)},Wr.identity=function(t){return Ur.identity(t.array),t._dirty=!0,t},Wr.invert=function(t,e){return Ur.invert(t.array,e.array),t._dirty=!0,t},Wr.mul=function(t,e,n){return Ur.mul(t.array,e.array,n.array),t._dirty=!0,t},Wr.multiply=Wr.mul,Wr.rotate=function(t,e,n){return Ur.rotate(t.array,e.array,n),t._dirty=!0,t},Wr.scale=function(t,e,n){return Ur.scale(t.array,e.array,n.array),t._dirty=!0,t},Wr.transpose=function(t,e){return Ur.transpose(t.array,e.array),t._dirty=!0,t};var Xr=Wr,Yr={create:function(){var t=new J(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},clone:function(t){var e=new J(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},identity:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},invert:function(t,e){var n=e[0],i=e[1],r=e[2],o=e[3],a=e[4],s=e[5],l=n*o-i*r;return l?(l=1/l,t[0]=o*l,t[1]=-i*l,t[2]=-r*l,t[3]=n*l,t[4]=(r*s-o*a)*l,t[5]=(i*a-n*s)*l,t):null},determinant:function(t){return t[0]*t[3]-t[1]*t[2]},multiply:function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1],h=n[2],f=n[3],d=n[4],p=n[5];return t[0]=i*c+o*u,t[1]=r*c+a*u,t[2]=i*h+o*f,t[3]=r*h+a*f,t[4]=i*d+o*p+s,t[5]=r*d+a*p+l,t}};Yr.mul=Yr.multiply,Yr.rotate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=Math.sin(n),u=Math.cos(n);return t[0]=i*u+o*c,t[1]=r*u+a*c,t[2]=i*-c+o*u,t[3]=r*-c+a*u,t[4]=s,t[5]=l,t},Yr.scale=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i*c,t[1]=r*c,t[2]=o*u,t[3]=a*u,t[4]=s,t[5]=l,t},Yr.translate=function(t,e,n){var i=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=n[0],u=n[1];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=i*c+o*u+s,t[5]=r*c+a*u+l,t},Yr.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)};var qr=Yr,Zr=function(){this.array=qr.create(),this._dirty=!0};Zr.prototype={constructor:Zr,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},clone:function(){return(new Zr).copy(this)},copy:function(t){return qr.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return qr.determinant(this.array)},identity:function(){return qr.identity(this.array),this._dirty=!0,this},invert:function(){return qr.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return qr.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return qr.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return qr.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return qr.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return qr.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return qr.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return qr.translate(this.array,this.array,t.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},Zr.copy=function(t,e){return qr.copy(t.array,e.array),t._dirty=!0,t},Zr.determinant=function(t){return qr.determinant(t.array)},Zr.identity=function(t){return qr.identity(t.array),t._dirty=!0,t},Zr.invert=function(t,e){return qr.invert(t.array,e.array),t._dirty=!0,t},Zr.mul=function(t,e,n){return qr.mul(t.array,e.array,n.array),t._dirty=!0,t},Zr.multiply=Zr.mul,Zr.rotate=function(t,e,n){return qr.rotate(t.array,e.array,n),t._dirty=!0,t},Zr.scale=function(t,e,n){return qr.scale(t.array,e.array,n.array),t._dirty=!0,t},Zr.translate=function(t,e,n){return qr.translate(t.array,e.array,n.array),t._dirty=!0,t};var Kr=Zr,$r=function(){this.array=_e.create(),this._dirty=!0};$r.prototype={constructor:$r,setArray:function(t){for(var e=0;e<this.array.length;e++)this.array[e]=t[e];return this._dirty=!0,this},adjoint:function(){return _e.adjoint(this.array,this.array),this._dirty=!0,this},clone:function(){return(new $r).copy(this)},copy:function(t){return _e.copy(this.array,t.array),this._dirty=!0,this},determinant:function(){return _e.determinant(this.array)},fromMat2d:function(t){return _e.fromMat2d(this.array,t.array),this._dirty=!0,this},fromMat4:function(t){return _e.fromMat4(this.array,t.array),this._dirty=!0,this},fromQuat:function(t){return _e.fromQuat(this.array,t.array),this._dirty=!0,this},identity:function(){return _e.identity(this.array),this._dirty=!0,this},invert:function(){return _e.invert(this.array,this.array),this._dirty=!0,this},mul:function(t){return _e.mul(this.array,this.array,t.array),this._dirty=!0,this},mulLeft:function(t){return _e.mul(this.array,t.array,this.array),this._dirty=!0,this},multiply:function(t){return _e.multiply(this.array,this.array,t.array),this._dirty=!0,this},multiplyLeft:function(t){return _e.multiply(this.array,t.array,this.array),this._dirty=!0,this},rotate:function(t){return _e.rotate(this.array,this.array,t),this._dirty=!0,this},scale:function(t){return _e.scale(this.array,this.array,t.array),this._dirty=!0,this},translate:function(t){return _e.translate(this.array,this.array,t.array),this._dirty=!0,this},normalFromMat4:function(t){return _e.normalFromMat4(this.array,t.array),this._dirty=!0,this},transpose:function(){return _e.transpose(this.array,this.array),this._dirty=!0,this},toString:function(){return"["+Array.prototype.join.call(this.array,",")+"]"},toArray:function(){return Array.prototype.slice.call(this.array)}},$r.adjoint=function(t,e){return _e.adjoint(t.array,e.array),t._dirty=!0,t},$r.copy=function(t,e){return _e.copy(t.array,e.array),t._dirty=!0,t},$r.determinant=function(t){return _e.determinant(t.array)},$r.identity=function(t){return _e.identity(t.array),t._dirty=!0,t},$r.invert=function(t,e){return _e.invert(t.array,e.array),t},$r.mul=function(t,e,n){return _e.mul(t.array,e.array,n.array),t._dirty=!0,t},$r.multiply=$r.mul,$r.fromMat2d=function(t,e){return _e.fromMat2d(t.array,e.array),t._dirty=!0,t},$r.fromMat4=function(t,e){return _e.fromMat4(t.array,e.array),t._dirty=!0,t},$r.fromQuat=function(t,e){return _e.fromQuat(t.array,e.array),t._dirty=!0,t},$r.normalFromMat4=function(t,e){return _e.normalFromMat4(t.array,e.array),t._dirty=!0,t},$r.rotate=function(t,e,n){return _e.rotate(t.array,e.array,n),t._dirty=!0,t},$r.scale=function(t,e,n){return _e.scale(t.array,e.array,n.array),t._dirty=!0,t},$r.transpose=function(t,e){return _e.transpose(t.array,e.array),t._dirty=!0,t},$r.translate=function(t,e,n){return _e.translate(t.array,e.array,n.array),t._dirty=!0,t};var Jr=$r,Qr=n("06ad"),to={_animators:null,getAnimators:function(){return this._animators=this._animators||[],this._animators},animate:function(t,e){this._animators=this._animators||[];var n,i=this;if(t){for(var r=t.split("."),o=i,a=0,s=r.length;a<s;a++)o&&(o=o[r[a]]);o&&(n=o)}else n=i;if(null==n)throw new Error("Target "+t+" not exists");var l=this._animators,c=new Qr["b"](n,e),u=this;return c.during((function(){u.__zr&&u.__zr.refresh()})).done((function(){var t=l.indexOf(c);t>=0&&l.splice(t,1)})),l.push(c),this.__zr&&this.__zr.animation.addAnimator(c),c},stopAnimation:function(t){this._animators=this._animators||[];for(var e=this._animators,n=e.length,i=0;i<n;i++)e[i].stop(t);return e.length=0,this},addAnimatorsToZr:function(t){if(this._animators)for(var e=0;e<this._animators.length;e++)t.animation.addAnimator(this._animators[e])},removeAnimatorsFromZr:function(t){if(this._animators)for(var e=0;e<this._animators.length;e++)t.animation.removeAnimator(this._animators[e])}},eo=to,no="\n@export clay.util.rand\nhighp float rand(vec2 uv) {\n const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n highp float dt = dot(uv.xy, vec2(a,b)), sn = mod(dt, 3.141592653589793);\n return fract(sin(sn) * c);\n}\n@end\n@export clay.util.calculate_attenuation\nuniform float attenuationFactor : 5.0;\nfloat lightAttenuation(float dist, float range)\n{\n float attenuation = 1.0;\n attenuation = dist*dist/(range*range+1.0);\n float att_s = attenuationFactor;\n attenuation = 1.0/(attenuation*att_s+1.0);\n att_s = 1.0/(att_s+1.0);\n attenuation = attenuation - att_s;\n attenuation /= 1.0 - att_s;\n return clamp(attenuation, 0.0, 1.0);\n}\n@end\n@export clay.util.edge_factor\n#ifdef SUPPORT_STANDARD_DERIVATIVES\nfloat edgeFactor(float width)\n{\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * width, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#else\nfloat edgeFactor(float width)\n{\n return 1.0;\n}\n#endif\n@end\n@export clay.util.encode_float\nvec4 encodeFloat(const in float depth)\n{\n const vec4 bitShifts = vec4(256.0*256.0*256.0, 256.0*256.0, 256.0, 1.0);\n const vec4 bit_mask = vec4(0.0, 1.0/256.0, 1.0/256.0, 1.0/256.0);\n vec4 res = fract(depth * bitShifts);\n res -= res.xxyz * bit_mask;\n return res;\n}\n@end\n@export clay.util.decode_float\nfloat decodeFloat(const in vec4 color)\n{\n const vec4 bitShifts = vec4(1.0/(256.0*256.0*256.0), 1.0/(256.0*256.0), 1.0/256.0, 1.0);\n return dot(color, bitShifts);\n}\n@end\n@export clay.util.float\n@import clay.util.encode_float\n@import clay.util.decode_float\n@end\n@export clay.util.rgbm_decode\nvec3 RGBMDecode(vec4 rgbm, float range) {\n return range * rgbm.rgb * rgbm.a;\n}\n@end\n@export clay.util.rgbm_encode\nvec4 RGBMEncode(vec3 color, float range) {\n if (dot(color, color) == 0.0) {\n return vec4(0.0);\n }\n vec4 rgbm;\n color /= range;\n rgbm.a = clamp(max(max(color.r, color.g), max(color.b, 1e-6)), 0.0, 1.0);\n rgbm.a = ceil(rgbm.a * 255.0) / 255.0;\n rgbm.rgb = color / rgbm.a;\n return rgbm;\n}\n@end\n@export clay.util.rgbm\n@import clay.util.rgbm_decode\n@import clay.util.rgbm_encode\nvec4 decodeHDR(vec4 color)\n{\n#if defined(RGBM_DECODE) || defined(RGBM)\n return vec4(RGBMDecode(color, 8.12), 1.0);\n#else\n return color;\n#endif\n}\nvec4 encodeHDR(vec4 color)\n{\n#if defined(RGBM_ENCODE) || defined(RGBM)\n return RGBMEncode(color.xyz, 8.12);\n#else\n return color;\n#endif\n}\n@end\n@export clay.util.srgb\nvec4 sRGBToLinear(in vec4 value) {\n return vec4(mix(pow(value.rgb * 0.9478672986 + vec3(0.0521327014), vec3(2.4)), value.rgb * 0.0773993808, vec3(lessThanEqual(value.rgb, vec3(0.04045)))), value.w);\n}\nvec4 linearTosRGB(in vec4 value) {\n return vec4(mix(pow(value.rgb, vec3(0.41666)) * 1.055 - vec3(0.055), value.rgb * 12.92, vec3(lessThanEqual(value.rgb, vec3(0.0031308)))), value.w);\n}\n@end\n@export clay.chunk.skinning_header\n#ifdef SKINNING\nattribute vec3 weight : WEIGHT;\nattribute vec4 joint : JOINT;\n#ifdef USE_SKIN_MATRICES_TEXTURE\nuniform sampler2D skinMatricesTexture : ignore;\nuniform float skinMatricesTextureSize: ignore;\nmat4 getSkinMatrix(sampler2D tex, float idx) {\n float j = idx * 4.0;\n float x = mod(j, skinMatricesTextureSize);\n float y = floor(j / skinMatricesTextureSize) + 0.5;\n vec2 scale = vec2(skinMatricesTextureSize);\n return mat4(\n texture2D(tex, vec2(x + 0.5, y) / scale),\n texture2D(tex, vec2(x + 1.5, y) / scale),\n texture2D(tex, vec2(x + 2.5, y) / scale),\n texture2D(tex, vec2(x + 3.5, y) / scale)\n );\n}\nmat4 getSkinMatrix(float idx) {\n return getSkinMatrix(skinMatricesTexture, idx);\n}\n#else\nuniform mat4 skinMatrix[JOINT_COUNT] : SKIN_MATRIX;\nmat4 getSkinMatrix(float idx) {\n return skinMatrix[int(idx)];\n}\n#endif\n#endif\n@end\n@export clay.chunk.skin_matrix\nmat4 skinMatrixWS = getSkinMatrix(joint.x) * weight.x;\nif (weight.y > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.y) * weight.y;\n}\nif (weight.z > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.z) * weight.z;\n}\nfloat weightW = 1.0-weight.x-weight.y-weight.z;\nif (weightW > 1e-4)\n{\n skinMatrixWS += getSkinMatrix(joint.w) * weightW;\n}\n@end\n@export clay.chunk.instancing_header\n#ifdef INSTANCING\nattribute vec4 instanceMat1;\nattribute vec4 instanceMat2;\nattribute vec4 instanceMat3;\n#endif\n@end\n@export clay.chunk.instancing_matrix\nmat4 instanceMat = mat4(\n vec4(instanceMat1.xyz, 0.0),\n vec4(instanceMat2.xyz, 0.0),\n vec4(instanceMat3.xyz, 0.0),\n vec4(instanceMat1.w, instanceMat2.w, instanceMat3.w, 1.0)\n);\n@end\n@export clay.util.parallax_correct\nvec3 parallaxCorrect(in vec3 dir, in vec3 pos, in vec3 boxMin, in vec3 boxMax) {\n vec3 first = (boxMax - pos) / dir;\n vec3 second = (boxMin - pos) / dir;\n vec3 further = max(first, second);\n float dist = min(further.x, min(further.y, further.z));\n vec3 fixedPos = pos + dir * dist;\n vec3 boxCenter = (boxMax + boxMin) * 0.5;\n return normalize(fixedPos - boxCenter);\n}\n@end\n@export clay.util.clamp_sample\nvec4 clampSample(const in sampler2D texture, const in vec2 coord)\n{\n#ifdef STEREO\n float eye = step(0.5, coord.x) * 0.5;\n vec2 coordClamped = clamp(coord, vec2(eye, 0.0), vec2(0.5 + eye, 1.0));\n#else\n vec2 coordClamped = clamp(coord, vec2(0.0), vec2(1.0));\n#endif\n return texture2D(texture, coordClamped);\n}\n@end\n@export clay.util.ACES\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\n@end",io="\n@export ecgl.common.transformUniforms\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nuniform mat4 world : WORLD;\n@end\n\n@export ecgl.common.attributes\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 normal : NORMAL;\n@end\n\n@export ecgl.common.uv.header\nuniform vec2 uvRepeat : [1.0, 1.0];\nuniform vec2 uvOffset : [0.0, 0.0];\nuniform vec2 detailUvRepeat : [1.0, 1.0];\nuniform vec2 detailUvOffset : [0.0, 0.0];\n\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n@export ecgl.common.uv.main\nv_Texcoord = texcoord * uvRepeat + uvOffset;\nv_DetailTexcoord = texcoord * detailUvRepeat + detailUvOffset;\n@end\n\n@export ecgl.common.uv.fragmentHeader\nvarying vec2 v_Texcoord;\nvarying vec2 v_DetailTexcoord;\n@end\n\n\n@export ecgl.common.albedo.main\n\n vec4 albedoTexel = vec4(1.0);\n#ifdef DIFFUSEMAP_ENABLED\n albedoTexel = texture2D(diffuseMap, v_Texcoord);\n #ifdef SRGB_DECODE\n albedoTexel = sRGBToLinear(albedoTexel);\n #endif\n#endif\n\n#ifdef DETAILMAP_ENABLED\n vec4 detailTexel = texture2D(detailMap, v_DetailTexcoord);\n #ifdef SRGB_DECODE\n detailTexel = sRGBToLinear(detailTexel);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, detailTexel.rgb, detailTexel.a);\n albedoTexel.a = detailTexel.a + (1.0 - detailTexel.a) * albedoTexel.a;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexHeader\n\n#ifdef WIREFRAME_QUAD\nattribute vec4 barycentric;\nvarying vec4 v_Barycentric;\n#elif defined(WIREFRAME_TRIANGLE)\nattribute vec3 barycentric;\nvarying vec3 v_Barycentric;\n#endif\n\n@end\n\n@export ecgl.common.wireframe.vertexMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n v_Barycentric = barycentric;\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentHeader\n\nuniform float wireframeLineWidth : 1;\nuniform vec4 wireframeLineColor: [0, 0, 0, 0.5];\n\n#ifdef WIREFRAME_QUAD\nvarying vec4 v_Barycentric;\nfloat edgeFactor () {\n vec4 d = fwidth(v_Barycentric);\n vec4 a4 = smoothstep(vec4(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(min(a4.x, a4.y), a4.z), a4.w);\n}\n#elif defined(WIREFRAME_TRIANGLE)\nvarying vec3 v_Barycentric;\nfloat edgeFactor () {\n vec3 d = fwidth(v_Barycentric);\n vec3 a3 = smoothstep(vec3(0.0), d * wireframeLineWidth, v_Barycentric);\n return min(min(a3.x, a3.y), a3.z);\n}\n#endif\n\n@end\n\n\n@export ecgl.common.wireframe.fragmentMain\n\n#if defined(WIREFRAME_QUAD) || defined(WIREFRAME_TRIANGLE)\n if (wireframeLineWidth > 0.) {\n vec4 lineColor = wireframeLineColor;\n#ifdef SRGB_DECODE\n lineColor = sRGBToLinear(lineColor);\n#endif\n\n gl_FragColor.rgb = mix(gl_FragColor.rgb, lineColor.rgb, (1.0 - edgeFactor()) * lineColor.a);\n }\n#endif\n@end\n\n\n\n\n@export ecgl.common.bumpMap.header\n\n#ifdef BUMPMAP_ENABLED\nuniform sampler2D bumpMap;\nuniform float bumpScale : 1.0;\n\n\nvec3 bumpNormal(vec3 surfPos, vec3 surfNormal, vec3 baseNormal)\n{\n vec2 dSTdx = dFdx(v_Texcoord);\n vec2 dSTdy = dFdy(v_Texcoord);\n\n float Hll = bumpScale * texture2D(bumpMap, v_Texcoord).x;\n float dHx = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdx).x - Hll;\n float dHy = bumpScale * texture2D(bumpMap, v_Texcoord + dSTdy).x - Hll;\n\n vec3 vSigmaX = dFdx(surfPos);\n vec3 vSigmaY = dFdy(surfPos);\n vec3 vN = surfNormal;\n\n vec3 R1 = cross(vSigmaY, vN);\n vec3 R2 = cross(vN, vSigmaX);\n\n float fDet = dot(vSigmaX, R1);\n\n vec3 vGrad = sign(fDet) * (dHx * R1 + dHy * R2);\n return normalize(abs(fDet) * baseNormal - vGrad);\n\n}\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexHeader\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.vertexMain\n\n#ifdef NORMALMAP_ENABLED\n if (dot(tangent, tangent) > 0.0) {\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n }\n#endif\n\n@end\n\n\n@export ecgl.common.normalMap.fragmentHeader\n\n#ifdef NORMALMAP_ENABLED\nuniform sampler2D normalMap;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@end\n\n@export ecgl.common.normalMap.fragmentMain\n#ifdef NORMALMAP_ENABLED\n if (dot(v_Tangent, v_Tangent) > 0.0) {\n vec3 normalTexel = texture2D(normalMap, v_DetailTexcoord).xyz;\n if (dot(normalTexel, normalTexel) > 0.0) { N = normalTexel * 2.0 - 1.0;\n mat3 tbn = mat3(v_Tangent, v_Bitangent, v_Normal);\n N = normalize(tbn * N);\n }\n }\n#endif\n@end\n\n\n\n@export ecgl.common.vertexAnimation.header\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevNormal;\nuniform float percent;\n#endif\n\n@end\n\n@export ecgl.common.vertexAnimation.main\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n vec3 norm = mix(prevNormal, normal, percent);\n#else\n vec3 pos = position;\n vec3 norm = normal;\n#endif\n\n@end\n\n\n@export ecgl.common.ssaoMap.header\n#ifdef SSAOMAP_ENABLED\nuniform sampler2D ssaoMap;\nuniform vec4 viewport : VIEWPORT;\n#endif\n@end\n\n@export ecgl.common.ssaoMap.main\n float ao = 1.0;\n#ifdef SSAOMAP_ENABLED\n ao = texture2D(ssaoMap, (gl_FragCoord.xy - viewport.xy) / viewport.zw).r;\n#endif\n@end\n\n\n\n\n@export ecgl.common.diffuseLayer.header\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\nuniform float layerDiffuseIntensity[LAYER_DIFFUSEMAP_COUNT];\nuniform sampler2D layerDiffuseMap[LAYER_DIFFUSEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.header\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\nuniform float layerEmissionIntensity[LAYER_EMISSIVEMAP_COUNT];\nuniform sampler2D layerEmissiveMap[LAYER_EMISSIVEMAP_COUNT];\n#endif\n\n@end\n\n@export ecgl.common.layers.header\n@import ecgl.common.diffuseLayer.header\n@import ecgl.common.emissiveLayer.header\n@end\n\n@export ecgl.common.diffuseLayer.main\n\n#if (LAYER_DIFFUSEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_DIFFUSEMAP_COUNT; _idx_++) {{\n float intensity = layerDiffuseIntensity[_idx_];\n vec4 texel2 = texture2D(layerDiffuseMap[_idx_], v_Texcoord);\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n albedoTexel.rgb = mix(albedoTexel.rgb, texel2.rgb * intensity, texel2.a);\n albedoTexel.a = texel2.a + (1.0 - texel2.a) * albedoTexel.a;\n }}\n#endif\n\n@end\n\n@export ecgl.common.emissiveLayer.main\n\n#if (LAYER_EMISSIVEMAP_COUNT > 0)\n for (int _idx_ = 0; _idx_ < LAYER_EMISSIVEMAP_COUNT; _idx_++)\n {{\n vec4 texel2 = texture2D(layerEmissiveMap[_idx_], v_Texcoord) * layerEmissionIntensity[_idx_];\n #ifdef SRGB_DECODE\n texel2 = sRGBToLinear(texel2);\n #endif\n float intensity = layerEmissionIntensity[_idx_];\n gl_FragColor.rgb += texel2.rgb * texel2.a * intensity;\n }}\n#endif\n\n@end\n",ro="@export ecgl.color.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\n@import ecgl.common.uv.header\n\nattribute vec2 texcoord : TEXCOORD_0;\nattribute vec3 position: POSITION;\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\nattribute vec3 normal: NORMAL;\nuniform mat4 worldInverseTranspose : WORLDINVERSETRANSPOSE;\nvarying vec3 v_Normal;\n#endif\n\nvoid main()\n{\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n @import ecgl.common.uv.main\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef ATMOSPHERE_ENABLED\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n@export ecgl.color.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\nvarying vec3 v_Normal;\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.layers.header\n\n@import ecgl.common.uv.fragmentHeader\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n\n}\n@end",oo="/**\n * http: */\n\n@export ecgl.lambert.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n\n@import ecgl.common.attributes\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.vertexAnimation.header\n\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n}\n\n@end\n\n\n@export ecgl.lambert.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\nuniform sampler2D detailMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color);\n#else\n gl_FragColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n gl_FragColor *= sRGBToLinear(v_Color);\n #else\n gl_FragColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n gl_FragColor *= albedoTexel;\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseColor = vec3(0.0, 0.0, 0.0);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n diffuseColor += ambientLightColor[i] * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseColor += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n vec3 lightColor = directionalLightColor[i];\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n diffuseColor += lightColor * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor.rgb *= diffuseColor;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end",ao="@export ecgl.realistic.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\n\n@import ecgl.common.wireframe.vertexHeader\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\nattribute vec4 tangent : TANGENT;\nvarying vec3 v_Tangent;\nvarying vec3 v_Bitangent;\n#endif\n\n@import ecgl.common.vertexAnimation.header\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nvoid main()\n{\n\n @import ecgl.common.uv.main\n\n @import ecgl.common.vertexAnimation.main\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n v_Normal = normalize((worldInverseTranspose * vec4(norm, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n\n#ifdef NORMALMAP_ENABLED\n v_Tangent = normalize((worldInverseTranspose * vec4(tangent.xyz, 0.0)).xyz);\n v_Bitangent = normalize(cross(v_Normal, v_Tangent) * tangent.w);\n#endif\n\n @import ecgl.common.wireframe.vertexMain\n\n}\n\n@end\n\n\n\n@export ecgl.realistic.fragment\n\n#define LAYER_DIFFUSEMAP_COUNT 0\n#define LAYER_EMISSIVEMAP_COUNT 0\n#define PI 3.14159265358979\n#define ROUGHNESS_CHANEL 0\n#define METALNESS_CHANEL 1\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform sampler2D diffuseMap;\n\nuniform sampler2D detailMap;\nuniform sampler2D metalnessMap;\nuniform sampler2D roughnessMap;\n\n@import ecgl.common.layers.header\n\nuniform float emissionIntensity: 1.0;\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nuniform float metalness : 0.0;\nuniform float roughness : 0.5;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef ATMOSPHERE_ENABLED\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform vec3 glowColor;\nuniform float glowPower;\n#endif\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n@import clay.header.ambient_cubemap_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.normalMap.fragmentHeader\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import clay.util.rgbm\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n\nfloat D_Phong(float g, float ndh) {\n float a = pow(8192.0, g);\n return (a + 2.0) / 8.0 * pow(ndh, a);\n}\n\nvoid main()\n{\n vec4 albedoColor = color;\n\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n albedoColor *= sRGBToLinear(v_Color);\n #else\n albedoColor *= v_Color;\n #endif\n#endif\n\n @import ecgl.common.albedo.main\n\n @import ecgl.common.diffuseLayer.main\n\n albedoColor *= albedoTexel;\n\n float m = metalness;\n\n#ifdef METALNESSMAP_ENABLED\n float m2 = texture2D(metalnessMap, v_DetailTexcoord)[METALNESS_CHANEL];\n m = clamp(m2 + (m - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 baseColor = albedoColor.rgb;\n albedoColor.rgb = baseColor * (1.0 - m);\n vec3 specFactor = mix(vec3(0.04), baseColor, m);\n\n float g = 1.0 - roughness;\n\n#ifdef ROUGHNESSMAP_ENABLED\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n#endif\n\n vec3 N = v_Normal;\n\n#ifdef DOUBLE_SIDED\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n@import ecgl.common.normalMap.fragmentMain\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n vec3 diffuseTerm = vec3(0.0);\n vec3 specularTerm = vec3(0.0);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n vec3 fresnelTerm = F_Schlick(ndv, specFactor);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += ambientLightColor[_idx_] * ambientFactor * ao;\n }}\n#endif\n\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n diffuseTerm += calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_] * ao;\n }}\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++)\n {{\n vec3 L = -directionalLightDirection[_idx_];\n vec3 lc = directionalLightColor[_idx_];\n\n vec3 H = normalize(L + V);\n float ndl = clamp(dot(N, normalize(L)), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[_idx_];\n }\n#endif\n\n vec3 li = lc * ndl * shadowContrib;\n\n diffuseTerm += li;\n specularTerm += li * fresnelTerm * D_Phong(g, ndh);\n }}\n#endif\n\n\n#ifdef AMBIENT_CUBEMAP_LIGHT_COUNT\n vec3 L = reflect(-V, N);\n L = vec3(L.x, L[NORMAL_UP_AXIS], L[NORMAL_FRONT_AXIS]);\n float rough2 = clamp(1.0 - g, 0.0, 1.0);\n float bias2 = rough2 * 5.0;\n vec2 brdfParam2 = texture2D(ambientCubemapLightBRDFLookup[0], vec2(rough2, ndv)).xy;\n vec3 envWeight2 = specFactor * brdfParam2.x + brdfParam2.y;\n vec3 envTexel2;\n for(int _idx_ = 0; _idx_ < AMBIENT_CUBEMAP_LIGHT_COUNT; _idx_++)\n {{\n envTexel2 = RGBMDecode(textureCubeLodEXT(ambientCubemapLightCubemap[_idx_], L, bias2), 8.12);\n specularTerm += ambientCubemapLightColor[_idx_] * envTexel2 * envWeight2 * ao;\n }}\n#endif\n\n gl_FragColor.rgb = albedoColor.rgb * diffuseTerm + specularTerm;\n gl_FragColor.a = albedoColor.a;\n\n#ifdef ATMOSPHERE_ENABLED\n float atmoIntensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor.rgb += glowColor * atmoIntensity;\n#endif\n\n#ifdef SRGB_ENCODE\n gl_FragColor = linearTosRGB(gl_FragColor);\n#endif\n\n @import ecgl.common.emissiveLayer.main\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end",so="@export ecgl.hatching.vertex\n\n@import ecgl.realistic.vertex\n\n@end\n\n\n@export ecgl.hatching.fragment\n\n#define NORMAL_UP_AXIS 1\n#define NORMAL_FRONT_AXIS 2\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform vec4 color : [0.0, 0.0, 0.0, 1.0];\nuniform vec4 paperColor : [1.0, 1.0, 1.0, 1.0];\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n#ifdef AMBIENT_LIGHT_COUNT\n@import clay.header.ambient_light\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n@import clay.header.ambient_sh_light\n#endif\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\n\n@import ecgl.common.ssaoMap.header\n\n@import ecgl.common.bumpMap.header\n\n@import clay.util.srgb\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.plugin.compute_shadow_map\n\nuniform sampler2D hatch1;\nuniform sampler2D hatch2;\nuniform sampler2D hatch3;\nuniform sampler2D hatch4;\nuniform sampler2D hatch5;\nuniform sampler2D hatch6;\n\nfloat shade(in float tone) {\n vec4 c = vec4(1. ,1., 1., 1.);\n float step = 1. / 6.;\n vec2 uv = v_DetailTexcoord;\n if (tone <= step / 2.0) {\n c = mix(vec4(0.), texture2D(hatch6, uv), 12. * tone);\n }\n else if (tone <= step) {\n c = mix(texture2D(hatch6, uv), texture2D(hatch5, uv), 6. * tone);\n }\n if(tone > step && tone <= 2. * step){\n c = mix(texture2D(hatch5, uv), texture2D(hatch4, uv) , 6. * (tone - step));\n }\n if(tone > 2. * step && tone <= 3. * step){\n c = mix(texture2D(hatch4, uv), texture2D(hatch3, uv), 6. * (tone - 2. * step));\n }\n if(tone > 3. * step && tone <= 4. * step){\n c = mix(texture2D(hatch3, uv), texture2D(hatch2, uv), 6. * (tone - 3. * step));\n }\n if(tone > 4. * step && tone <= 5. * step){\n c = mix(texture2D(hatch2, uv), texture2D(hatch1, uv), 6. * (tone - 4. * step));\n }\n if(tone > 5. * step){\n c = mix(texture2D(hatch1, uv), vec4(1.), 6. * (tone - 5. * step));\n }\n\n return c.r;\n}\n\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n vec4 inkColor = sRGBToLinear(color);\n#else\n vec4 inkColor = color;\n#endif\n\n#ifdef VERTEX_COLOR\n #ifdef SRGB_DECODE\n inkColor *= sRGBToLinear(v_Color);\n #else\n inkColor *= v_Color;\n #endif\n#endif\n\n vec3 N = v_Normal;\n#ifdef DOUBLE_SIDED\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n N = -N;\n }\n#endif\n\n float tone = 0.0;\n\n float ambientFactor = 1.0;\n\n#ifdef BUMPMAP_ENABLED\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n ambientFactor = dot(v_Normal, N);\n#endif\n\n vec3 N2 = vec3(N.x, N[NORMAL_UP_AXIS], N[NORMAL_FRONT_AXIS]);\n\n @import ecgl.common.ssaoMap.main\n\n#ifdef AMBIENT_LIGHT_COUNT\n for(int i = 0; i < AMBIENT_LIGHT_COUNT; i++)\n {\n tone += dot(ambientLightColor[i], w) * ambientFactor * ao;\n }\n#endif\n#ifdef AMBIENT_SH_LIGHT_COUNT\n for(int _idx_ = 0; _idx_ < AMBIENT_SH_LIGHT_COUNT; _idx_++)\n {{\n tone += dot(calcAmbientSHLight(_idx_, N2) * ambientSHLightColor[_idx_], w) * ao;\n }}\n#endif\n#ifdef DIRECTIONAL_LIGHT_COUNT\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n#endif\n for(int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++)\n {\n vec3 lightDirection = -directionalLightDirection[i];\n float lightTone = dot(directionalLightColor[i], w);\n\n float shadowContrib = 1.0;\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n if (shadowEnabled)\n {\n shadowContrib = shadowContribsDir[i];\n }\n#endif\n\n float ndl = dot(N, normalize(lightDirection)) * shadowContrib;\n\n tone += lightTone * clamp(ndl, 0.0, 1.0);\n }\n#endif\n\n gl_FragColor = mix(inkColor, paperColor, shade(clamp(tone, 0.0, 1.0)));\n }\n@end\n",lo="@export ecgl.sm.depth.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nuniform float percent : 1.0;\n#endif\n\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\n\nvoid main(){\n\n#ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n#else\n vec3 pos = position;\n#endif\n\n v_ViewPosition = worldViewProjection * vec4(pos, 1.0);\n gl_Position = v_ViewPosition;\n\n v_Texcoord = texcoord;\n\n}\n@end\n\n\n\n@export ecgl.sm.depth.fragment\n\n@import clay.sm.depth.fragment\n\n@end";function co(t){return!t||"none"===t}function uo(t){return t instanceof HTMLCanvasElement||t instanceof HTMLImageElement||t instanceof Image}function ho(t){return t.getZr&&t.setOption}Object.assign(Re.prototype,eo),zt.import(no),zt.import(Vt),zt.import(io),zt.import(ro),zt.import(oo),zt.import(ao),zt.import(so),zt.import(lo);var fo=Hn.prototype.addToScene,po=Hn.prototype.removeFromScene;Hn.prototype.addToScene=function(t){if(fo.call(this,t),this.__zr){var e=this.__zr;t.traverse((function(t){t.__zr=e,t.addAnimatorsToZr&&t.addAnimatorsToZr(e)}))}},Hn.prototype.removeFromScene=function(t){po.call(this,t),t.traverse((function(t){var e=t.__zr;t.__zr=null,e&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(e)}))},K.prototype.setTextureImage=function(t,e,n,i){if(this.shader){var r,o=n.getZr(),a=this;return a.autoUpdateTextureStatus=!1,a.disableTexture(t),co(e)||(r=go.loadTexture(e,n,i,(function(e){a.enableTexture(t),o&&o.refresh()})),a.set(t,r)),r}};var go={};go.Renderer=re,go.Node=Re,go.Mesh=Ye,go.Shader=zt,go.Material=K,go.Texture=We,go.Texture2D=tn,go.Geometry=pn,go.SphereGeometry=Er,go.PlaneGeometry=di,go.CubeGeometry=vi,go.AmbientLight=Pr,go.DirectionalLight=kr,go.PointLight=Rr,go.SpotLight=Br,go.PerspectiveCamera=Kn,go.OrthographicCamera=or,go.Vector2=rt,go.Vector3=fe,go.Vector4=Hr,go.Quaternion=De,go.Matrix2=Xr,go.Matrix2d=Kr,go.Matrix3=Jr,go.Matrix4=Oe,go.Plane=On,go.Ray=ge,go.BoundingBox=Le,go.Frustum=Pn;var mo=null;function vo(){return null!==mo||(mo=Qi.createBlank("rgba(255,255,255,0)").image),mo}function yo(t){return Math.pow(2,Math.round(Math.log(t)/Math.LN2))}function _o(t){if((t.wrapS===We.REPEAT||t.wrapT===We.REPEAT)&&t.image){var e=yo(t.width),n=yo(t.height);if(e!==t.width||n!==t.height){var i=document.createElement("canvas");i.width=e,i.height=n;var r=i.getContext("2d");r.drawImage(t.image,0,0,e,n),t.image=i}}}go.loadTexture=function(t,e,n,i){"function"===typeof n&&(i=n,n={}),n=n||{};for(var r=Object.keys(n).sort(),o="",a=0;a<r.length;a++)o+=r[a]+"_"+n[r[a]]+"_";var s=e.__textureCache=e.__textureCache||new Gn["a"](20);if(ho(t)){var l=t.__textureid__,c=s.get(o+l);if(c)c.texture.surface.setECharts(t),i&&i(c.texture);else{var u=new ir(t);u.onupdate=function(){e.getZr().refresh()},c={texture:u.getTexture()};for(a=0;a<r.length;a++)c.texture[r[a]]=n[r[a]];l=t.__textureid__||"__ecgl_ec__"+c.texture.__uid__,t.__textureid__=l,s.put(o+l,c),i&&i(c.texture)}return c.texture}if(uo(t)){l=t.__textureid__,c=s.get(o+l);if(!c){c={texture:new go.Texture2D({image:t})};for(a=0;a<r.length;a++)c.texture[r[a]]=n[r[a]];l=t.__textureid__||"__ecgl_image__"+c.texture.__uid__,t.__textureid__=l,s.put(o+l,c),_o(c.texture),i&&i(c.texture)}return c.texture}c=s.get(o+t);if(c)c.callbacks?c.callbacks.push(i):i&&i(c.texture);else if(t.match(/.hdr$|^data:application\/octet-stream/)){c={callbacks:[i]};var h=Qi.loadTexture(t,{exposure:n.exposure,fileType:"hdr"},(function(){h.dirty(),c.callbacks.forEach((function(t){t&&t(h)})),c.callbacks=null}));c.texture=h,s.put(o+t,c)}else{for(h=new go.Texture2D({image:new Image}),a=0;a<r.length;a++)h[r[a]]=n[r[a]];c={texture:h,callbacks:[i]};var f=h.image;f.onload=function(){h.image=f,_o(h),h.dirty(),c.callbacks.forEach((function(t){t&&t(h)})),c.callbacks=null},f.crossOrigin="Anonymous",f.src=t,h.image=vo(),s.put(o+t,c)}return c.texture},go.createAmbientCubemap=function(t,e,n,i){t=t||{};var r=t.texture,o=Ar.firstNotNull(t.exposure,1),a=new yr({intensity:Ar.firstNotNull(t.specularIntensity,1)}),s=new br({intensity:Ar.firstNotNull(t.diffuseIntensity,1),coefficients:[.844,.712,.691,-.037,.083,.167,.343,.288,.299,-.041,-.021,-.009,-.003,-.041,-.064,-.011,-.007,-.004,-.031,.034,.081,-.06,-.049,-.06,.046,.056,.05]});return a.cubemap=go.loadTexture(r,n,{exposure:o},(function(){a.cubemap.flipY=!1,a.prefilter(e,32),s.coefficients=Cr.projectEnvironmentMap(e,a.cubemap,{lod:1}),i&&i()})),{specular:a,diffuse:s}},go.createBlankTexture=Qi.createBlank,go.isImage=uo,go.additiveBlend=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE)},go.parseColor=function(t,e){return t instanceof Array?(e||(e=[]),e[0]=t[0],e[1]=t[1],e[2]=t[2],t.length>3?e[3]=t[3]:e[3]=1,e):(e=i["h"].parse(t||"#000",e)||[0,0,0,0],e[0]/=255,e[1]/=255,e[2]/=255,e)},go.directionFromAlphaBeta=function(t,e){var n=t/180*Math.PI+Math.PI/2,i=-e/180*Math.PI+Math.PI/2,r=[],o=Math.sin(n);return r[0]=o*Math.cos(i),r[1]=-Math.cos(n),r[2]=o*Math.sin(i),r},go.getShadowResolution=function(t){var e=1024;switch(t){case"low":e=512;break;case"medium":break;case"high":e=2048;break;case"ultra":e=4096;break}return e},go.COMMON_SHADERS=["lambert","color","realistic","hatching","shadow"],go.createShader=function(t){"ecgl.shadow"===t&&(t="ecgl.displayShadow");var e=zt.source(t+".vertex"),n=zt.source(t+".fragment");e||console.error("Vertex shader of '%s' not exits",t),n||console.error("Fragment shader of '%s' not exits",t);var i=new zt(e,n);return i.name=t,i},go.createMaterial=function(t,e){e instanceof Array||(e=[e]);var n=go.createShader(t),i=new K({shader:n});return e.forEach((function(t){"string"===typeof t&&i.define(t)})),i},go.setMaterialFromModel=function(t,e,n,i){e.autoUpdateTextureStatus=!1;var r=n.getModel(t+"Material"),o=r.get("detailTexture"),a=Ar.firstNotNull(r.get("textureTiling"),1),s=Ar.firstNotNull(r.get("textureOffset"),0);"number"===typeof a&&(a=[a,a]),"number"===typeof s&&(s=[s,s]);var l=a[0]>1||a[1]>1?go.Texture.REPEAT:go.Texture.CLAMP_TO_EDGE,c={anisotropic:8,wrapS:l,wrapT:l};if("realistic"===t){var u=r.get("roughness"),h=r.get("metalness");null!=h?isNaN(h)&&(e.setTextureImage("metalnessMap",h,i,c),h=Ar.firstNotNull(r.get("metalnessAdjust"),.5)):h=0,null!=u?isNaN(u)&&(e.setTextureImage("roughnessMap",u,i,c),u=Ar.firstNotNull(r.get("roughnessAdjust"),.5)):u=.5;var f=r.get("normalTexture");e.setTextureImage("detailMap",o,i,c),e.setTextureImage("normalMap",f,i,c),e.set({roughness:u,metalness:h,detailUvRepeat:a,detailUvOffset:s})}else if("lambert"===t)e.setTextureImage("detailMap",o,i,c),e.set({detailUvRepeat:a,detailUvOffset:s});else if("color"===t)e.setTextureImage("detailMap",o,i,c),e.set({detailUvRepeat:a,detailUvOffset:s});else if("hatching"===t){var d=r.get("hatchingTextures")||[];d.length;for(var p=0;p<6;p++)e.setTextureImage("hatch"+(p+1),d[p],i,{anisotropic:8,wrapS:go.Texture.REPEAT,wrapT:go.Texture.REPEAT});e.set({detailUvRepeat:a,detailUvOffset:s})}},go.updateVertexAnimation=function(t,e,n,i){var r=i.get("animation"),o=i.get("animationDurationUpdate"),a=i.get("animationEasingUpdate"),s=n.shadowDepthMaterial;if(r&&e&&o>0&&e.geometry.vertexCount===n.geometry.vertexCount){n.material.define("vertex","VERTEX_ANIMATION"),n.ignorePreZ=!0,s&&s.define("vertex","VERTEX_ANIMATION");for(var l=0;l<t.length;l++)n.geometry.attributes[t[l][0]].value=e.geometry.attributes[t[l][1]].value;n.geometry.dirty(),n.__percent=0,n.material.set("percent",0),n.stopAnimation(),n.animate().when(o,{__percent:1}).during((function(){n.material.set("percent",n.__percent),s&&s.set("percent",n.__percent)})).done((function(){n.ignorePreZ=!1,n.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")})).start(a)}else n.material.undefine("vertex","VERTEX_ANIMATION"),s&&s.undefine("vertex","VERTEX_ANIMATION")};var bo=go,xo=n("98b7"),wo=function(t,e){this.id=t,this.zr=e;try{this.renderer=new re({clearBit:0,devicePixelRatio:e.painter.dpr,preserveDrawingBuffer:!0,premultipliedAlpha:!0}),this.renderer.resize(e.painter.getWidth(),e.painter.getHeight())}catch(r){return this.renderer=null,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute; left: 0; top: 0; right: 0; bottom: 0;",this.dom.className="ecgl-nowebgl",this.dom.innerHTML="Sorry, your browser does not support WebGL",void console.error(r)}this.onglobalout=this.onglobalout.bind(this),e.on("globalout",this.onglobalout),this.dom=this.renderer.canvas;var n=this.dom.style;n.position="absolute",n.left="0",n.top="0",this.views=[],this._picking=new ze({renderer:this.renderer}),this._viewsToDispose=[],this._accumulatingId=0,this._zrEventProxy=new i["n"].Rect({shape:{x:-1,y:-1,width:2,height:2},__isGLToZRProxy:!0}),this._backgroundColor=null,this._disposed=!1};function So(t){var e=t.__zr;t.__zr=null,e&&t.removeAnimatorsFromZr&&t.removeAnimatorsFromZr(e)}wo.prototype.setUnpainted=function(){},wo.prototype.addView=function(t){if(t.layer!==this){var e=this._viewsToDispose.indexOf(t);e>=0&&this._viewsToDispose.splice(e,1),this.views.push(t),t.layer=this;var n=this.zr;t.scene.traverse((function(t){t.__zr=n,t.addAnimatorsToZr&&t.addAnimatorsToZr(n)}))}},wo.prototype.removeView=function(t){if(t.layer===this){var e=this.views.indexOf(t);e>=0&&(this.views.splice(e,1),t.scene.traverse(So,this),t.layer=null,this._viewsToDispose.push(t))}},wo.prototype.removeViewsAll=function(){this.views.forEach((function(t){t.scene.traverse(So,this),t.layer=null,this._viewsToDispose.push(t)}),this),this.views.length=0},wo.prototype.resize=function(t,e){var n=this.renderer;n.resize(t,e)},wo.prototype.clear=function(){var t=this.renderer.gl,e=this._backgroundColor||[0,0,0,0];t.clearColor(e[0],e[1],e[2],e[3]),t.depthMask(!0),t.colorMask(!0,!0,!0,!0),t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT)},wo.prototype.clearDepth=function(){var t=this.renderer.gl;t.clear(t.DEPTH_BUFFER_BIT)},wo.prototype.clearColor=function(){var t=this.renderer.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},wo.prototype.needsRefresh=function(){this.zr.refresh()},wo.prototype.refresh=function(t){this._backgroundColor=t?bo.parseColor(t):[0,0,0,0],this.renderer.clearColor=this._backgroundColor;for(var e=0;e<this.views.length;e++)this.views[e].prepareRender(this.renderer);this._doRender(!1),this._trackAndClean();for(e=0;e<this._viewsToDispose.length;e++)this._viewsToDispose[e].dispose(this.renderer);this._viewsToDispose.length=0,this._startAccumulating()},wo.prototype.renderToCanvas=function(t){this._startAccumulating(!0),t.drawImage(this.dom,0,0,t.canvas.width,t.canvas.height)},wo.prototype._doRender=function(t){this.clear(),this.renderer.saveViewport();for(var e=0;e<this.views.length;e++)this.views[e].render(this.renderer,t);this.renderer.restoreViewport()},wo.prototype._stopAccumulating=function(){this._accumulatingId=0,clearTimeout(this._accumulatingTimeout)};var To=1;function Oo(t){for(var e=0;e<t.length;e++)t[e].__used__=0}function Co(t,e){for(var n=0;n<e.length;n++)e[n].__used__||e[n].dispose(t)}function Mo(t,e){t.__used__=t.__used__||0,t.__used__++,1===t.__used__&&e.push(t)}function Ao(t,e,n){var i,r;t.traverse((function(t){if(t.isRenderable()){var o=t.geometry,a=t.material;if(a!==i)for(var s=a.getTextureUniforms(),l=0;l<s.length;l++){var c=s[l],u=a.uniforms[c].value;if(u)if(u instanceof We)Mo(u,e);else if(u instanceof Array)for(var h=0;h<u.length;h++)u[h]instanceof We&&Mo(u[h],e)}o!==r&&Mo(o,n),i=a,r=o}}));for(var o=0;o<t.lights.length;o++)t.lights[o].cubemap&&Mo(t.lights[o].cubemap,e)}wo.prototype._startAccumulating=function(t){var e=this;this._stopAccumulating();for(var n=!1,i=0;i<this.views.length;i++)n=this.views[i].needsAccumulate()||n;function r(i){if(e._accumulatingId&&i===e._accumulatingId){for(var o=!0,a=0;a<e.views.length;a++)o=e.views[a].isAccumulateFinished()&&n;o||(e._doRender(!0),t?r(i):Object(xo["a"])((function(){r(i)})))}}n&&(this._accumulatingId=To++,t?r(e._accumulatingId):this._accumulatingTimeout=setTimeout((function(){r(e._accumulatingId)}),50))},wo.prototype._trackAndClean=function(){var t=[],e=[];this._textureList&&(Oo(this._textureList),Oo(this._geometriesList));for(var n=0;n<this.views.length;n++)Ao(this.views[n].scene,t,e);this._textureList&&(Co(this.renderer,this._textureList),Co(this.renderer,this._geometriesList)),this._textureList=t,this._geometriesList=e},wo.prototype.dispose=function(){this._disposed||(this._stopAccumulating(),this._textureList&&(Oo(this._textureList),Oo(this._geometriesList),Co(this.renderer,this._textureList),Co(this.renderer,this._geometriesList)),this.zr.off("globalout",this.onglobalout),this._disposed=!0)},wo.prototype.onmousedown=function(t){if(!t.target||!t.target.__isGLToZRProxy){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY);e&&(this._dispatchEvent("mousedown",t,e),this._dispatchDataEvent("mousedown",t,e)),this._downX=t.offsetX,this._downY=t.offsetY}},wo.prototype.onmousemove=function(t){if(!t.target||!t.target.__isGLToZRProxy){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY),n=e&&e.target,i=this._hovered;this._hovered=e,i&&n!==i.target&&(i.relatedTarget=n,this._dispatchEvent("mouseout",t,i),this.zr.setCursorStyle("default")),this._dispatchEvent("mousemove",t,e),e&&(this.zr.setCursorStyle("pointer"),i&&n===i.target||this._dispatchEvent("mouseover",t,e)),this._dispatchDataEvent("mousemove",t,e)}},wo.prototype.onmouseup=function(t){if(!t.target||!t.target.__isGLToZRProxy){t=t.event;var e=this.pickObject(t.offsetX,t.offsetY);e&&(this._dispatchEvent("mouseup",t,e),this._dispatchDataEvent("mouseup",t,e)),this._upX=t.offsetX,this._upY=t.offsetY}},wo.prototype.onclick=wo.prototype.dblclick=function(t){if(!t.target||!t.target.__isGLToZRProxy){var e=this._upX-this._downX,n=this._upY-this._downY;if(!(Math.sqrt(e*e+n*n)>20)){t=t.event;var i=this.pickObject(t.offsetX,t.offsetY);i&&(this._dispatchEvent(t.type,t,i),this._dispatchDataEvent(t.type,t,i));var r=this._clickToSetFocusPoint(t);if(r){var o=r.view.setDOFFocusOnPoint(r.distance);o&&this.zr.refresh()}}}},wo.prototype._clickToSetFocusPoint=function(t){for(var e=this.renderer,n=e.viewport,i=this.views.length-1;i>=0;i--){var r=this.views[i];if(r.hasDOF()&&r.containPoint(t.offsetX,t.offsetY)){this._picking.scene=r.scene,this._picking.camera=r.camera,e.viewport=r.viewport;var o=this._picking.pick(t.offsetX,t.offsetY,!0);if(o)return o.view=r,o}}e.viewport=n},wo.prototype.onglobalout=function(t){var e=this._hovered;e&&this._dispatchEvent("mouseout",t,{target:e.target})},wo.prototype.pickObject=function(t,e){for(var n=[],i=this.renderer,r=i.viewport,o=0;o<this.views.length;o++){var a=this.views[o];a.containPoint(t,e)&&(this._picking.scene=a.scene,this._picking.camera=a.camera,i.viewport=a.viewport,this._picking.pickAll(t,e,n))}return i.viewport=r,n.sort((function(t,e){return t.distance-e.distance})),n[0]},wo.prototype._dispatchEvent=function(t,e,n){n||(n={});var i=n.target;n.cancelBubble=!1,n.event=e,n.type=t,n.offsetX=e.offsetX,n.offsetY=e.offsetY;while(i)if(i.trigger(t,n),i=i.getParent(),n.cancelBubble)break;this._dispatchToView(t,n)},wo.prototype._dispatchDataEvent=function(t,e,n){var r=n&&n.target,o=r&&r.dataIndex,a=r&&r.seriesIndex,s=r&&r.eventData,l=!1,c=this._zrEventProxy;c.x=e.offsetX,c.y=e.offsetY,c.update();var u={target:c};const h=i["o"].getECData(c);"mousemove"===t&&(null!=o?o!==this._lastDataIndex&&(parseInt(this._lastDataIndex,10)>=0&&(h.dataIndex=this._lastDataIndex,h.seriesIndex=this._lastSeriesIndex,this.zr.handler.dispatchToElement(u,"mouseout",e)),l=!0):null!=s&&s!==this._lastEventData&&(null!=this._lastEventData&&(h.eventData=this._lastEventData,this.zr.handler.dispatchToElement(u,"mouseout",e)),l=!0),this._lastEventData=s,this._lastDataIndex=o,this._lastSeriesIndex=a),h.eventData=s,h.dataIndex=o,h.seriesIndex=a,(null!=s||parseInt(o,10)>=0&&parseInt(a,10)>=0)&&(this.zr.handler.dispatchToElement(u,t,e),l&&this.zr.handler.dispatchToElement(u,"mouseover",e))},wo.prototype._dispatchToView=function(t,e){for(var n=0;n<this.views.length;n++)this.views[n].containPoint(e.offsetX,e.offsetY)&&this.views[n].trigger(t,e)},Object.assign(wo.prototype,u);var Do=wo,Eo=["bar3D","line3D","map3D","scatter3D","surface","lines3D","scatterGL","scatter3D"];function Io(t,e){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var n=t[e].normal,i=t[e].emphasis;n&&(t[e]=n),i&&(t.emphasis=t.emphasis||{},t.emphasis[e]=i)}}function Po(t){Io(t,"itemStyle"),Io(t,"lineStyle"),Io(t,"areaStyle"),Io(t,"label")}function Lo(t){t&&(t instanceof Array||(t=[t]),i["x"].each(t,(function(t){if(t.axisLabel){var e=t.axisLabel;Object.assign(e,e.textStyle),e.textStyle=null}})))}var ko=function(t){i["x"].each(t.series,(function(e){i["x"].indexOf(Eo,e.type)>=0&&(Po(e),"mapbox"===e.coordinateSystem&&(e.coordinateSystem="mapbox3D",t.mapbox3D=t.mapbox))})),Lo(t.xAxis3D),Lo(t.yAxis3D),Lo(t.zAxis3D),Lo(t.grid3D),Io(t.geo3D)};function jo(t){this._layers={},this._zr=t}jo.prototype.update=function(t,e){var n=this,r=e.getZr();if(r.getWidth()&&r.getHeight()){for(var o in this._layers)this._layers[o].removeViewsAll();t.eachComponent((function(n,i){if("series"!==n){var r=e.getViewOfComponentModel(i),o=i.coordinateSystem;if(r.__ecgl__){if(o){if(!o.viewGL)return void console.error("Can't find viewGL in coordinateSystem of component "+i.id);l=o.viewGL}else{if(!i.viewGL)return void console.error("Can't find viewGL of component "+i.id);l=o.viewGL}var l=o.viewGL,c=a(i);c.addView(l),r.afterRender&&r.afterRender(i,t,e,c),s(r.groupGL,i.get("silent"))}}})),t.eachSeries((function(n){var i=e.getViewOfSeriesModel(n),r=n.coordinateSystem;if(i.__ecgl__){if(r&&!r.viewGL&&!i.viewGL)return void console.error("Can't find viewGL of series "+i.id);var o=r&&r.viewGL||i.viewGL,l=a(n);l.addView(o),i.afterRender&&i.afterRender(n,t,e,l),s(i.groupGL,n.get("silent"))}}))}else console.warn("Dom has no width or height");function a(t){var e;r.setSleepAfterStill(0),e=(t.coordinateSystem&&t.coordinateSystem.model,t.get("zlevel"));var o=n._layers,a=o[e];if(!a){if(a=o[e]=new Do("gl-"+e,r),r.painter.isSingleCanvas()){a.virtual=!0;var s=new i["n"].Image({z:1e4,style:{image:a.renderer.canvas},silent:!0});a.__hostImage=s,r.add(s)}r.painter.insertLayer(e,a)}return a.__hostImage&&a.__hostImage.setStyle({width:a.renderer.getWidth(),height:a.renderer.getHeight()}),a}function s(t,e){t&&t.traverse((function(t){t.isRenderable&&t.isRenderable()&&(t.ignorePicking=null!=t.$ignorePicking?t.$ignorePicking:e)}))}},i["t"]((function(t){var e=t.getZr(),n=e.painter.dispose;e.painter.dispose=function(){"function"===typeof this.eachOtherLayer&&this.eachOtherLayer((function(t){t instanceof Do&&t.dispose()})),n.call(this)},e.painter.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas)return this._layers[0].dom;var e=document.createElement("canvas"),n=t.pixelRatio||this.dpr;e.width=this.getWidth()*n,e.height=this.getHeight()*n;var i=e.getContext("2d");i.dpr=n,i.clearRect(0,0,e.width,e.height),t.backgroundColor&&(i.fillStyle=t.backgroundColor,i.fillRect(0,0,e.width,e.height));var r,o=this.storage.getDisplayList(!0),a={},s=this;function l(t,e){var n,r=s._zlevelList;null==t&&(t=-1/0);for(var o=0;o<r.length;o++){var a=r[o],l=s._layers[a];if(!l.__builtin__&&a>t&&a<e){n=l;break}}n&&n.renderToCanvas&&(i.save(),n.renderToCanvas(i),i.restore())}for(var c={ctx:i},u=0;u<o.length;u++){var h=o[u];h.zlevel!==r&&(l(r,h.zlevel),r=h.zlevel),this._doPaintEl(h,c,!0,null,a)}return l(r,1/0),e}})),i["u"]((function(t,e){var n=e.getZr(),i=n.__egl=n.__egl||new jo(n);i.update(t,e)})),i["v"](ko);var Ro={defaultOption:{viewControl:{projection:"perspective",autoRotate:!1,autoRotateDirection:"cw",autoRotateSpeed:10,autoRotateAfterStill:3,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",distance:150,minDistance:40,maxDistance:400,orthographicSize:150,maxOrthographicSize:400,minOrthographicSize:20,center:[0,0,0],alpha:0,beta:0,minAlpha:-90,maxAlpha:90}},setView:function(t){t=t||{},this.option.viewControl=this.option.viewControl||{},null!=t.alpha&&(this.option.viewControl.alpha=t.alpha),null!=t.beta&&(this.option.viewControl.beta=t.beta),null!=t.distance&&(this.option.viewControl.distance=t.distance),null!=t.center&&(this.option.viewControl.center=t.center)}},No={defaultOption:{postEffect:{enable:!1,bloom:{enable:!0,intensity:.1},depthOfField:{enable:!1,focalRange:20,focalDistance:50,blurRadius:10,fstop:2.8,quality:"medium"},screenSpaceAmbientOcclusion:{enable:!1,radius:2,quality:"medium",intensity:1},screenSpaceReflection:{enable:!1,quality:"medium",maxRoughness:.8},colorCorrection:{enable:!0,exposure:0,brightness:0,contrast:1,saturation:1,lookupTexture:""},edge:{enable:!1},FXAA:{enable:!1}},temporalSuperSampling:{enable:"auto"}}},Bo={defaultOption:{light:{main:{shadow:!1,shadowQuality:"high",color:"#fff",intensity:1,alpha:0,beta:0},ambient:{color:"#fff",intensity:.2},ambientCubemap:{texture:null,exposure:1,diffuseIntensity:.5,specularIntensity:.5}}}},Fo=i["c"].extend({type:"grid3D",dependencies:["xAxis3D","yAxis3D","zAxis3D"],defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",boxWidth:100,boxHeight:100,boxDepth:100,axisPointer:{show:!0,lineStyle:{color:"rgba(0, 0, 0, 0.8)",width:1},label:{show:!0,formatter:null,margin:8,textStyle:{fontSize:14,color:"#fff",backgroundColor:"rgba(0,0,0,0.5)",padding:3,borderRadius:3}}},axisLine:{show:!0,lineStyle:{color:"#333",width:2,type:"solid"}},axisTick:{show:!0,inside:!1,length:3,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,margin:8,textStyle:{fontSize:12}},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}},light:{main:{alpha:30,beta:40},ambient:{intensity:.4}},viewControl:{alpha:20,beta:40,autoRotate:!1,distance:200,minDistance:40,maxDistance:400}}});i["x"].merge(Fo.prototype,Ro),i["x"].merge(Fo.prototype,No),i["x"].merge(Fo.prototype,Bo);var zo=Fo,Vo=n("7837"),Ho=Ar.firstNotNull,Go={left:0,middle:1,right:2};function Uo(t){return t instanceof Array||(t=[t,t]),t}var Wo=v.extend((function(){return{zr:null,viewGL:null,_center:new fe,minDistance:.5,maxDistance:1.5,maxOrthographicSize:300,minOrthographicSize:30,minAlpha:-90,maxAlpha:90,minBeta:-1/0,maxBeta:1/0,autoRotateAfterStill:0,autoRotateDirection:"cw",autoRotateSpeed:60,damping:.8,rotateSensitivity:1,zoomSensitivity:1,panSensitivity:1,panMouseButton:"middle",rotateMouseButton:"left",_mode:"rotate",_camera:null,_needsUpdate:!1,_rotating:!1,_phi:0,_theta:0,_mouseX:0,_mouseY:0,_rotateVelocity:new rt,_panVelocity:new rt,_distance:500,_zoomSpeed:0,_stillTimeout:0,_animators:[]}}),(function(){["_mouseDownHandler","_mouseWheelHandler","_mouseMoveHandler","_mouseUpHandler","_pinchHandler","_contextMenuHandler","_update"].forEach((function(t){this[t]=this[t].bind(this)}),this)}),{init:function(){var t=this.zr;t&&(t.on("mousedown",this._mouseDownHandler),t.on("globalout",this._mouseUpHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("pinch",this._pinchHandler),t.animation.on("frame",this._update),t.dom.addEventListener("contextmenu",this._contextMenuHandler))},dispose:function(){var t=this.zr;t&&(t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("pinch",this._pinchHandler),t.off("globalout",this._mouseUpHandler),t.dom.removeEventListener("contextmenu",this._contextMenuHandler),t.animation.off("frame",this._update)),this.stopAllAnimation()},getDistance:function(){return this._distance},setDistance:function(t){this._distance=t,this._needsUpdate=!0},getOrthographicSize:function(){return this._orthoSize},setOrthographicSize:function(t){this._orthoSize=t,this._needsUpdate=!0},getAlpha:function(){return this._theta/Math.PI*180},getBeta:function(){return-this._phi/Math.PI*180},getCenter:function(){return this._center.toArray()},setAlpha:function(t){t=Math.max(Math.min(this.maxAlpha,t),this.minAlpha),this._theta=t/180*Math.PI,this._needsUpdate=!0},setBeta:function(t){t=Math.max(Math.min(this.maxBeta,t),this.minBeta),this._phi=-t/180*Math.PI,this._needsUpdate=!0},setCenter:function(t){this._center.setArray(t)},setViewGL:function(t){this.viewGL=t},getCamera:function(){return this.viewGL.camera},setFromViewControlModel:function(t,e){e=e||{};var n=e.baseDistance||0,i=e.baseOrthoSize||1,r=t.get("projection");"perspective"!==r&&"orthographic"!==r&&"isometric"!==r&&(r="perspective"),this._projection=r,this.viewGL.setProjection(r);var o=t.get("distance")+n,a=t.get("orthographicSize")+i;[["damping",.8],["autoRotate",!1],["autoRotateAfterStill",3],["autoRotateDirection","cw"],["autoRotateSpeed",10],["minDistance",30],["maxDistance",400],["minOrthographicSize",30],["maxOrthographicSize",300],["minAlpha",-90],["maxAlpha",90],["minBeta",-1/0],["maxBeta",1/0],["rotateSensitivity",1],["zoomSensitivity",1],["panSensitivity",1],["panMouseButton","left"],["rotateMouseButton","middle"]].forEach((function(e){this[e[0]]=Ho(t.get(e[0]),e[1])}),this),this.minDistance+=n,this.maxDistance+=n,this.minOrthographicSize+=i,this.maxOrthographicSize+=i;var s=t.ecModel,l={};["animation","animationDurationUpdate","animationEasingUpdate"].forEach((function(e){l[e]=Ho(t.get(e),s&&s.get(e))}));var c=Ho(e.alpha,t.get("alpha"))||0,u=Ho(e.beta,t.get("beta"))||0,h=Ho(e.center,t.get("center"))||[0,0,0];l.animation&&l.animationDurationUpdate>0&&this._notFirst?this.animateTo({alpha:c,beta:u,center:h,distance:o,orthographicSize:a,easing:l.animationEasingUpdate,duration:l.animationDurationUpdate}):(this.setDistance(o),this.setAlpha(c),this.setBeta(u),this.setCenter(h),this.setOrthographicSize(a)),this._notFirst=!0,this._validateProperties()},_validateProperties:function(){0},animateTo:function(t){var e=this.zr,n=this,i={},r={};return null!=t.distance&&(i.distance=this.getDistance(),r.distance=t.distance),null!=t.orthographicSize&&(i.orthographicSize=this.getOrthographicSize(),r.orthographicSize=t.orthographicSize),null!=t.alpha&&(i.alpha=this.getAlpha(),r.alpha=t.alpha),null!=t.beta&&(i.beta=this.getBeta(),r.beta=t.beta),null!=t.center&&(i.center=this.getCenter(),r.center=t.center),this._addAnimator(e.animation.animate(i).when(t.duration||1e3,r).during((function(){null!=i.alpha&&n.setAlpha(i.alpha),null!=i.beta&&n.setBeta(i.beta),null!=i.distance&&n.setDistance(i.distance),null!=i.center&&n.setCenter(i.center),null!=i.orthographicSize&&n.setOrthographicSize(i.orthographicSize),n._needsUpdate=!0}))).start(t.easing||"linear")},stopAllAnimation:function(){for(var t=0;t<this._animators.length;t++)this._animators[t].stop();this._animators.length=0},update:function(){this._needsUpdate=!0,this._update(20)},_isAnimating:function(){return this._animators.length>0},_update:function(t){if(this._rotating){var e=("cw"===this.autoRotateDirection?1:-1)*this.autoRotateSpeed/180*Math.PI;this._phi-=e*t/1e3,this._needsUpdate=!0}else this._rotateVelocity.len()>0&&(this._needsUpdate=!0);(Math.abs(this._zoomSpeed)>.1||this._panVelocity.len()>0)&&(this._needsUpdate=!0),this._needsUpdate&&(t=Math.min(t,50),this._updateDistanceOrSize(t),this._updatePan(t),this._updateRotate(t),this._updateTransform(),this.getCamera().update(),this.zr&&this.zr.refresh(),this.trigger("update"),this._needsUpdate=!1)},_updateRotate:function(t){var e=this._rotateVelocity;this._phi=e.y*t/20+this._phi,this._theta=e.x*t/20+this._theta,this.setAlpha(this.getAlpha()),this.setBeta(this.getBeta()),this._vectorDamping(e,Math.pow(this.damping,t/16))},_updateDistanceOrSize:function(t){"perspective"===this._projection?this._setDistance(this._distance+this._zoomSpeed*t/20):this._setOrthoSize(this._orthoSize+this._zoomSpeed*t/20),this._zoomSpeed*=Math.pow(this.damping,t/16)},_setDistance:function(t){this._distance=Math.max(Math.min(t,this.maxDistance),this.minDistance)},_setOrthoSize:function(t){this._orthoSize=Math.max(Math.min(t,this.maxOrthographicSize),this.minOrthographicSize);var e=this.getCamera(),n=this._orthoSize,i=n/this.viewGL.viewport.height*this.viewGL.viewport.width;e.left=-i/2,e.right=i/2,e.top=n/2,e.bottom=-n/2},_updatePan:function(t){var e=this._panVelocity,n=this._distance,i=this.getCamera(),r=i.worldTransform.y,o=i.worldTransform.x;this._center.scaleAndAdd(o,-e.x*n/200).scaleAndAdd(r,-e.y*n/200),this._vectorDamping(e,0)},_updateTransform:function(){var t=this.getCamera(),e=new fe,n=this._theta+Math.PI/2,i=this._phi+Math.PI/2,r=Math.sin(n);e.x=r*Math.cos(i),e.y=-Math.cos(n),e.z=r*Math.sin(i),t.position.copy(this._center).scaleAndAdd(e,this._distance),t.rotation.identity().rotateY(-this._phi).rotateX(-this._theta)},_startCountingStill:function(){clearTimeout(this._stillTimeout);var t=this.autoRotateAfterStill,e=this;!isNaN(t)&&t>0&&(this._stillTimeout=setTimeout((function(){e._rotating=!0}),1e3*t))},_vectorDamping:function(t,e){var n=t.len();n*=e,n<1e-4&&(n=0),t.normalize().scale(n)},_decomposeTransform:function(){if(this.getCamera()){this.getCamera().updateWorldTransform();var t=this.getCamera().worldTransform.z,e=Math.asin(t.y),n=Math.atan2(t.x,t.z);this._theta=e,this._phi=-n,this.setBeta(this.getBeta()),this.setAlpha(this.getAlpha()),this.getCamera().aspect?this._setDistance(this.getCamera().position.dist(this._center)):this._setOrthoSize(this.getCamera().top-this.getCamera().bottom)}},_mouseDownHandler:function(t){if(!t.target&&!this._isAnimating()){var e=t.offsetX,n=t.offsetY;this.viewGL&&!this.viewGL.containPoint(e,n)||(this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler),t.event.targetTouches?1===t.event.targetTouches.length&&(this._mode="rotate"):t.event.button===Go[this.rotateMouseButton]?this._mode="rotate":t.event.button===Go[this.panMouseButton]?this._mode="pan":this._mode="",this._rotateVelocity.set(0,0),this._rotating=!1,this.autoRotate&&this._startCountingStill(),this._mouseX=t.offsetX,this._mouseY=t.offsetY)}},_mouseMoveHandler:function(t){if((!t.target||!t.target.__isGLToZRProxy)&&!this._isAnimating()){var e=Uo(this.panSensitivity),n=Uo(this.rotateSensitivity);"rotate"===this._mode?(this._rotateVelocity.y=(t.offsetX-this._mouseX)/this.zr.getHeight()*2*n[0],this._rotateVelocity.x=(t.offsetY-this._mouseY)/this.zr.getWidth()*2*n[1]):"pan"===this._mode&&(this._panVelocity.x=(t.offsetX-this._mouseX)/this.zr.getWidth()*e[0]*400,this._panVelocity.y=(-t.offsetY+this._mouseY)/this.zr.getHeight()*e[1]*400),this._mouseX=t.offsetX,this._mouseY=t.offsetY,t.event.preventDefault()}},_mouseWheelHandler:function(t){if(!this._isAnimating()){var e=t.event.wheelDelta||-t.event.detail;this._zoomHandler(t,e)}},_pinchHandler:function(t){this._isAnimating()||(this._zoomHandler(t,t.pinchScale>1?1:-1),this._mode="")},_zoomHandler:function(t,e){if(0!==e){var n,i=t.offsetX,r=t.offsetY;if(!this.viewGL||this.viewGL.containPoint(i,r))n="perspective"===this._projection?Math.max(Math.max(Math.min(this._distance-this.minDistance,this.maxDistance-this._distance))/20,.5):Math.max(Math.max(Math.min(this._orthoSize-this.minOrthographicSize,this.maxOrthographicSize-this._orthoSize))/20,.5),this._zoomSpeed=(e>0?-1:1)*n*this.zoomSensitivity,this._rotating=!1,this.autoRotate&&"rotate"===this._mode&&this._startCountingStill(),t.event.preventDefault()}},_mouseUpHandler:function(){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_isRightMouseButtonUsed:function(){return"right"===this.rotateMouseButton||"right"===this.panMouseButton},_contextMenuHandler:function(t){this._isRightMouseButtonUsed()&&t.preventDefault()},_addAnimator:function(t){var e=this._animators;return e.push(t),t.done((function(){var n=e.indexOf(t);n>=0&&e.splice(n,1)})),t}});Object.defineProperty(Wo.prototype,"autoRotate",{get:function(t){return this._autoRotate},set:function(t){this._autoRotate=t,this._rotating=t}});var Xo=Wo,Yo={convertToDynamicArray:function(t){t&&this.resetOffset();var e=this.attributes;for(var n in e)t||!e[n].value?e[n].value=[]:e[n].value=Array.prototype.slice.call(e[n].value);t||!this.indices?this.indices=[]:this.indices=Array.prototype.slice.call(this.indices)},convertToTypedArray:function(){var t=this.attributes;for(var e in t)t[e].value&&t[e].value.length>0?t[e].value=new Float32Array(t[e].value):t[e].value=null;this.indices&&this.indices.length>0&&(this.indices=this.vertexCount>65535?new Uint32Array(this.indices):new Uint16Array(this.indices)),this.dirty()}},qo={vec2:et,vec3:Wt,vec4:ve,mat2:Ur,mat2d:qr,mat3:_e,mat4:Gt,quat:xe},Zo=qo,Ko=Zo.vec3,$o=[[0,0],[1,1]],Jo=pn.extend((function(){return{segmentScale:1,dynamic:!0,useNativeLine:!0,attributes:{position:new pn.Attribute("position","float",3,"POSITION"),positionPrev:new pn.Attribute("positionPrev","float",3),positionNext:new pn.Attribute("positionNext","float",3),prevPositionPrev:new pn.Attribute("prevPositionPrev","float",3),prevPosition:new pn.Attribute("prevPosition","float",3),prevPositionNext:new pn.Attribute("prevPositionNext","float",3),offset:new pn.Attribute("offset","float",1),color:new pn.Attribute("color","float",4,"COLOR")}}}),{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var e=this.attributes;this.vertexCount!==t&&(e.position.init(t),e.color.init(t),this.useNativeLine||(e.positionPrev.init(t),e.positionNext.init(t),e.offset.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(this.indices=0===t?null:this.vertexCount>65535?new Uint32Array(3*t):new Uint16Array(3*t))},_getCubicCurveApproxStep:function(t,e,n,i){var r=Ko.dist(t,e)+Ko.dist(n,e)+Ko.dist(i,n),o=1/(r+1)*this.segmentScale;return o},getCubicCurveVertexCount:function(t,e,n,i){var r=this._getCubicCurveApproxStep(t,e,n,i),o=Math.ceil(1/r);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(t,e,n,i){var r=this._getCubicCurveApproxStep(t,e,n,i),o=Math.ceil(1/r);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount($o)},getLineTriangleCount:function(){return this.getPolylineTriangleCount($o)},getPolylineVertexCount:function(t){var e;if("number"===typeof t)e=t;else{var n="number"!==typeof t[0];e=n?t.length:t.length/3}return this.useNativeLine?2*(e-1):2*(e-1)+2},getPolylineTriangleCount:function(t){var e;if("number"===typeof t)e=t;else{var n="number"!==typeof t[0];e=n?t.length:t.length/3}return this.useNativeLine?0:2*Math.max(e-1,0)},addCubicCurve:function(t,e,n,i,r,o){null==o&&(o=1);var a=t[0],s=t[1],l=t[2],c=e[0],u=e[1],h=e[2],f=n[0],d=n[1],p=n[2],g=i[0],m=i[1],v=i[2],y=this._getCubicCurveApproxStep(t,e,n,i),_=y*y,b=_*y,x=3*y,w=3*_,S=6*_,T=6*b,O=a-2*c+f,C=s-2*u+d,M=l-2*h+p,A=3*(c-f)-a+g,D=3*(u-d)-s+m,E=3*(h-p)-l+v,I=a,P=s,L=l,k=(c-a)*x+O*w+A*b,j=(u-s)*x+C*w+D*b,R=(h-l)*x+M*w+E*b,N=O*S+A*T,B=C*S+D*T,F=M*S+E*T,z=A*T,V=D*T,H=E*T,G=0,U=0,W=Math.ceil(1/y),X=new Float32Array(3*(W+1)),Y=(X=[],0);for(U=0;U<W+1;U++)X[Y++]=I,X[Y++]=P,X[Y++]=L,I+=k,P+=j,L+=R,k+=N,j+=B,R+=F,N+=z,B+=V,F+=H,G+=y,G>1&&(I=k>0?Math.min(I,g):Math.max(I,g),P=j>0?Math.min(P,m):Math.max(P,m),L=R>0?Math.min(L,v):Math.max(L,v));return this.addPolyline(X,r,o)},addLine:function(t,e,n,i){return this.addPolyline([t,e],n,i)},addPolyline:function(t,e,n,i,r){if(t.length){var o="number"!==typeof t[0];if(null==r&&(r=o?t.length:t.length/3),!(r<2)){null==i&&(i=0),null==n&&(n=1),this._itemVertexOffsets.push(this._vertexOffset);o="number"!==typeof t[0];var a,s,l=o?"number"!==typeof e[0]:e.length/4===r,c=this.attributes.position,u=this.attributes.positionPrev,h=this.attributes.positionNext,f=this.attributes.color,d=this.attributes.offset,p=this.indices,g=this._vertexOffset;n=Math.max(n,.01);for(var m=i;m<r;m++){if(o)a=t[m],s=l?e[m]:e;else{var v=3*m;if(a=a||[],a[0]=t[v],a[1]=t[v+1],a[2]=t[v+2],l){var y=4*m;s=s||[],s[0]=e[y],s[1]=e[y+1],s[2]=e[y+2],s[3]=e[y+3]}else s=e}if(this.useNativeLine?m>1&&(c.copy(g,g-1),f.copy(g,g-1),g++):(m<r-1&&(u.set(g+2,a),u.set(g+3,a)),m>0&&(h.set(g-2,a),h.set(g-1,a)),c.set(g,a),c.set(g+1,a),f.set(g,s),f.set(g+1,s),d.set(g,n/2),d.set(g+1,-n/2),g+=2),this.useNativeLine)f.set(g,s),c.set(g,a),g++;else if(m>0){var _=3*this._triangleOffset;p=this.indices;p[_]=g-4,p[_+1]=g-3,p[_+2]=g-2,p[_+3]=g-3,p[_+4]=g-1,p[_+5]=g-2,this._triangleOffset+=2}}if(!this.useNativeLine){var b=this._vertexOffset,x=this._vertexOffset+2*r;u.copy(b,b+2),u.copy(b+1,b+3),h.copy(x-1,x-3),h.copy(x-2,x-4)}return this._vertexOffset=g,this._vertexOffset}}},setItemColor:function(t,e){for(var n=this._itemVertexOffsets[t],i=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,r=n;r<i;r++)this.attributes.color.set(r,e);this.dirty("color")},currentTriangleOffset:function(){return this._triangleOffset},currentVertexOffset:function(){return this._vertexOffset}});i["x"].defaults(Jo.prototype,Yo);var Qo=Jo;function ta(t,e,n,i,r,o,a){this._zr=t,this._x=0,this._y=0,this._rowHeight=0,this.width=i,this.height=r,this.offsetX=e,this.offsetY=n,this.dpr=a,this.gap=o}function ea(t){t=t||{},t.width=t.width||512,t.height=t.height||512,t.devicePixelRatio=t.devicePixelRatio||1,t.gap=null==t.gap?2:t.gap;var e=document.createElement("canvas");e.width=t.width*t.devicePixelRatio,e.height=t.height*t.devicePixelRatio,this._canvas=e,this._texture=new tn({image:e,flipY:!1});var n=this;this._zr=i["y"].init(e);var r=this._zr.refreshImmediately;this._zr.refreshImmediately=function(){r.call(this),n._texture.dirty(),n.onupdate&&n.onupdate()},this._dpr=t.devicePixelRatio,this._coords={},this.onupdate=t.onupdate,this._gap=t.gap,this._textureAtlasNodes=[new ta(this._zr,0,0,t.width,t.height,this._gap,this._dpr)],this._nodeWidth=t.width,this._nodeHeight=t.height,this._currentNodeIdx=0}ta.prototype={constructor:ta,clear:function(){this._x=0,this._y=0,this._rowHeight=0},add:function(t,e,n){var i=t.getBoundingRect();null==e&&(e=i.width),null==n&&(n=i.height),e*=this.dpr,n*=this.dpr,this._fitElement(t,e,n);var r=this._x,o=this._y,a=this.width*this.dpr,s=this.height*this.dpr,l=this.gap;if(r+e+l>a&&(r=this._x=0,o+=this._rowHeight+l,this._y=o,this._rowHeight=0),this._x+=e+l,this._rowHeight=Math.max(this._rowHeight,n),o+n+l>s)return null;t.x+=this.offsetX*this.dpr+r,t.y+=this.offsetY*this.dpr+o,this._zr.add(t);var c=[this.offsetX/this.width,this.offsetY/this.height],u=[[r/a+c[0],o/s+c[1]],[(r+e)/a+c[0],(o+n)/s+c[1]]];return u},_fitElement:function(t,e,n){var i=t.getBoundingRect(),r=e/i.width,o=n/i.height;t.x=-i.x*r,t.y=-i.y*o,t.scaleX=r,t.scaleY=o,t.update()}},ea.prototype={clear:function(){for(var t=0;t<this._textureAtlasNodes.length;t++)this._textureAtlasNodes[t].clear();this._currentNodeIdx=0,this._zr.clear(),this._coords={}},getWidth:function(){return this._width},getHeight:function(){return this._height},getTexture:function(){return this._texture},getDevicePixelRatio:function(){return this._dpr},getZr:function(){return this._zr},_getCurrentNode:function(){return this._textureAtlasNodes[this._currentNodeIdx]},_expand:function(){if(this._currentNodeIdx++,this._textureAtlasNodes[this._currentNodeIdx])return this._textureAtlasNodes[this._currentNodeIdx];var t=4096/this._dpr,e=this._textureAtlasNodes,n=e.length,i=n*this._nodeWidth%t,r=Math.floor(n*this._nodeWidth/t)*this._nodeHeight;if(!(r>=t)){var o=(i+this._nodeWidth)*this._dpr,a=(r+this._nodeHeight)*this._dpr;try{this._zr.resize({width:o,height:a})}catch(l){this._canvas.width=o,this._canvas.height=a}var s=new ta(this._zr,i,r,this._nodeWidth,this._nodeHeight,this._gap,this._dpr);return this._textureAtlasNodes.push(s),s}},add:function(t,e,n){if(this._coords[t.id])return this._coords[t.id];var i=this._getCurrentNode().add(t,e,n);if(!i){var r=this._expand();if(!r)return;i=r.add(t,e,n)}return this._coords[t.id]=i,i},getCoordsScale:function(){var t=this._dpr;return[this._nodeWidth/this._canvas.width*t,this._nodeHeight/this._canvas.height*t]},getCoords:function(t){return this._coords[t]},dispose:function(){this._zr.dispose()}};var na=ea;function ia(){}ia.prototype={constructor:ia,setScene:function(t){this._scene=t,this._skybox&&this._skybox.attachScene(this._scene)},initLight:function(t){this._lightRoot=t,this.mainLight=new bo.DirectionalLight({shadowBias:.005}),this.ambientLight=new bo.AmbientLight,t.add(this.mainLight),t.add(this.ambientLight)},dispose:function(){this._lightRoot&&(this._lightRoot.remove(this.mainLight),this._lightRoot.remove(this.ambientLight))},updateLight:function(t){var e=this.mainLight,n=this.ambientLight,i=t.getModel("light"),r=i.getModel("main"),o=i.getModel("ambient");e.intensity=r.get("intensity"),n.intensity=o.get("intensity"),e.color=bo.parseColor(r.get("color")).slice(0,3),n.color=bo.parseColor(o.get("color")).slice(0,3);var a=r.get("alpha")||0,s=r.get("beta")||0;e.position.setArray(bo.directionFromAlphaBeta(a,s)),e.lookAt(bo.Vector3.ZERO),e.castShadow=r.get("shadow"),e.shadowResolution=bo.getShadowResolution(r.get("shadowQuality"))},updateAmbientCubemap:function(t,e,n){var i=e.getModel("light.ambientCubemap"),r=i.get("texture");if(r){this._cubemapLightsCache=this._cubemapLightsCache||{};var o=this._cubemapLightsCache[r];if(!o){var a=this;o=this._cubemapLightsCache[r]=bo.createAmbientCubemap(i.option,t,n,(function(){a._isSkyboxFromAmbientCubemap&&a._skybox.setEnvironmentMap(o.specular.cubemap),n.getZr().refresh()}))}this._lightRoot.add(o.diffuse),this._lightRoot.add(o.specular),this._currentCubemapLights=o}else this._currentCubemapLights&&(this._lightRoot.remove(this._currentCubemapLights.diffuse),this._lightRoot.remove(this._currentCubemapLights.specular),this._currentCubemapLights=null)},updateSkybox:function(t,e,n){var r=e.get("environment"),o=this;function a(){return o._skybox=o._skybox||new bi,o._skybox}var s=a();if(r&&"none"!==r)if("auto"===r)if(this._isSkyboxFromAmbientCubemap=!0,this._currentCubemapLights){var l=this._currentCubemapLights.specular.cubemap;s.setEnvironmentMap(l),this._scene&&s.attachScene(this._scene),s.material.set("lod",3)}else this._skybox&&this._skybox.detachScene();else if("object"===typeof r&&r.colorStops||"string"===typeof r&&i["h"].parse(r)){this._isSkyboxFromAmbientCubemap=!1;var c=new bo.Texture2D({anisotropic:8,flipY:!1});s.setEnvironmentMap(c);var u=c.image=document.createElement("canvas");u.width=u.height=16;var h=u.getContext("2d"),f=new i["n"].Rect({shape:{x:0,y:0,width:16,height:16},style:{fill:r}});i["p"](h,f),s.attachScene(this._scene)}else{this._isSkyboxFromAmbientCubemap=!1;c=bo.loadTexture(r,n,{anisotropic:8,flipY:!1});s.setEnvironmentMap(c),s.attachScene(this._scene)}else this._skybox&&this._skybox.detachScene(this._scene),this._skybox=null;var d=e.coordinateSystem;if(this._skybox)if(!d||!d.viewGL||"auto"===r||r.match&&r.match(/.hdr$/))this._skybox.material.undefine("fragment","SRGB_DECODE");else{var p=d.viewGL.isLinearSpace()?"define":"undefine";this._skybox.material[p]("fragment","SRGB_DECODE")}}};var ra=ia,oa=Zo.vec3,aa=pn.extend((function(){return{segmentScale:1,useNativeLine:!0,attributes:{position:new pn.Attribute("position","float",3,"POSITION"),normal:new pn.Attribute("normal","float",3,"NORMAL"),color:new pn.Attribute("color","float",4,"COLOR")}}}),{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setQuadCount:function(t){var e=this.attributes,n=this.getQuadVertexCount()*t,i=this.getQuadTriangleCount()*t;this.vertexCount!==n&&(e.position.init(n),e.normal.init(n),e.color.init(n)),this.triangleCount!==i&&(this.indices=n>65535?new Uint32Array(3*i):new Uint16Array(3*i))},getQuadVertexCount:function(){return 4},getQuadTriangleCount:function(){return 2},addQuad:function(){var t=oa.create(),e=oa.create(),n=oa.create(),i=[0,3,1,3,2,1];return function(r,o){var a=this.attributes.position,s=this.attributes.normal,l=this.attributes.color;oa.sub(t,r[1],r[0]),oa.sub(e,r[2],r[1]),oa.cross(n,t,e),oa.normalize(n,n);for(var c=0;c<4;c++)a.set(this._vertexOffset+c,r[c]),l.set(this._vertexOffset+c,o),s.set(this._vertexOffset+c,n);var u=3*this._faceOffset;for(c=0;c<6;c++)this.indices[u+c]=i[c]+this._vertexOffset;this._vertexOffset+=4,this._faceOffset+=2}}()});i["x"].defaults(aa.prototype,Yo);var sa=aa,la=Ar.firstNotNull,ca={x:0,y:2,z:1};function ua(t,e,n,i){var r=[0,0,0],o=i<0?n.getExtentMin():n.getExtentMax();r[ca[n.dim]]=o,t.position.setArray(r),t.rotation.identity(),e.distance=-Math.abs(o),e.normal.set(0,0,0),"x"===n.dim?(t.rotation.rotateY(i*Math.PI/2),e.normal.x=-i):"z"===n.dim?(t.rotation.rotateX(-i*Math.PI/2),e.normal.y=-i):(i>0&&t.rotation.rotateY(Math.PI),e.normal.z=-i)}function ha(t,e,n){this.rootNode=new bo.Node;var i=new bo.Mesh({geometry:new Qo({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:1}),r=new bo.Mesh({geometry:new sa,material:n,castShadow:!1,culling:!1,ignorePicking:!0,$ignorePicking:!0,renderOrder:0});this.rootNode.add(r),this.rootNode.add(i),this.faceInfo=t,this.plane=new bo.Plane,this.linesMesh=i,this.quadsMesh=r}ha.prototype.update=function(t,e,n){var i=t.coordinateSystem,r=[i.getAxis(this.faceInfo[0]),i.getAxis(this.faceInfo[1])],o=this.linesMesh.geometry,a=this.quadsMesh.geometry;o.convertToDynamicArray(!0),a.convertToDynamicArray(!0),this._updateSplitLines(o,r,t,n),this._udpateSplitAreas(a,r,t,n),o.convertToTypedArray(),a.convertToTypedArray();var s=i.getAxis(this.faceInfo[2]);ua(this.rootNode,this.plane,s,this.faceInfo[3])},ha.prototype._updateSplitLines=function(t,e,n,r){var o=r.getDevicePixelRatio();e.forEach((function(r,a){var s=r.model,l=e[1-a].getExtent();if(!r.scale.isBlank()){var c=s.getModel("splitLine",n.getModel("splitLine"));if(c.get("show")){var u=c.getModel("lineStyle"),h=u.get("color"),f=la(u.get("opacity"),1),d=la(u.get("width"),1);h=i["x"].isArray(h)?h:[h];for(var p=r.getTicksCoords({tickModel:c}),g=0,m=0;m<p.length;m++){var v=p[m].coord,y=bo.parseColor(h[g%h.length]);y[3]*=f;var _=[0,0,0],b=[0,0,0];_[a]=b[a]=v,_[1-a]=l[0],b[1-a]=l[1],t.addLine(_,b,y,d*o),g++}}}}))},ha.prototype._udpateSplitAreas=function(t,e,n,r){e.forEach((function(r,o){var a=r.model,s=e[1-o].getExtent();if(!r.scale.isBlank()){var l=a.getModel("splitArea",n.getModel("splitArea"));if(l.get("show")){var c=l.getModel("areaStyle"),u=c.get("color"),h=la(c.get("opacity"),1);u=i["x"].isArray(u)?u:[u];for(var f=r.getTicksCoords({tickModel:l,clamp:!0}),d=0,p=[0,0,0],g=[0,0,0],m=0;m<f.length;m++){var v=f[m].coord,y=[0,0,0],_=[0,0,0];if(y[o]=_[o]=v,y[1-o]=s[0],_[1-o]=s[1],0!==m){var b=bo.parseColor(u[d%u.length]);b[3]*=h,t.addQuad([p,y,_,g],b),p=y,g=_,d++}else p=y,g=_}}}}))};var fa=ha,da=[0,1,2,0,2,3],pa=pn.extend((function(){return{attributes:{position:new pn.Attribute("position","float",3,"POSITION"),texcoord:new pn.Attribute("texcoord","float",2,"TEXCOORD_0"),offset:new pn.Attribute("offset","float",2),color:new pn.Attribute("color","float",4,"COLOR")}}}),{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setSpriteCount:function(t){this._spriteCount=t;var e=4*t,n=2*t;this.vertexCount!==e&&(this.attributes.position.init(e),this.attributes.offset.init(e),this.attributes.color.init(e)),this.triangleCount!==n&&(this.indices=e>65535?new Uint32Array(3*n):new Uint16Array(3*n))},setSpriteAlign:function(t,e,n,i,r){var o,a,s,l;switch(null==n&&(n="left"),null==i&&(i="top"),r=r||0,n){case"left":o=r,s=e[0]+r;break;case"center":case"middle":o=-e[0]/2,s=e[0]/2;break;case"right":o=-e[0]-r,s=-r;break}switch(i){case"bottom":a=r,l=e[1]+r;break;case"middle":a=-e[1]/2,l=e[1]/2;break;case"top":a=-e[1]-r,l=-r;break}var c=4*t,u=this.attributes.offset;u.set(c,[o,l]),u.set(c+1,[s,l]),u.set(c+2,[s,a]),u.set(c+3,[o,a])},addSprite:function(t,e,n,i,r,o){var a=this._vertexOffset;this.setSprite(this._vertexOffset/4,t,e,n,i,r,o);for(var s=0;s<da.length;s++)this.indices[3*this._faceOffset+s]=da[s]+a;return this._faceOffset+=2,this._vertexOffset+=4,a/4},setSprite:function(t,e,n,i,r,o,a){for(var s=4*t,l=this.attributes,c=0;c<4;c++)l.position.set(s+c,e);var u=l.texcoord;u.set(s,[i[0][0],i[0][1]]),u.set(s+1,[i[1][0],i[0][1]]),u.set(s+2,[i[1][0],i[1][1]]),u.set(s+3,[i[0][0],i[1][1]]),this.setSpriteAlign(t,n,r,o,a)}});i["x"].defaults(pa.prototype,Yo);var ga=pa,ma="@export ecgl.labels.vertex\n\nattribute vec3 position: POSITION;\nattribute vec2 texcoord: TEXCOORD_0;\nattribute vec2 offset;\n#ifdef VERTEX_COLOR\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n vec4 proj = worldViewProjection * vec4(position, 1.0);\n\n vec2 screen = (proj.xy / abs(proj.w) + 1.0) * 0.5 * viewport.zw;\n\n screen += offset;\n\n proj.xy = (screen / viewport.zw - 0.5) * 2.0 * abs(proj.w);\n gl_Position = proj;\n#ifdef VERTEX_COLOR\n v_Color = a_Color;\n#endif\n v_Texcoord = texcoord;\n}\n@end\n\n\n@export ecgl.labels.fragment\n\nuniform vec3 color : [1.0, 1.0, 1.0];\nuniform float alpha : 1.0;\nuniform sampler2D textureAtlas;\nuniform vec2 uvScale: [1.0, 1.0];\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\nvarying float v_Miter;\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n gl_FragColor = vec4(color, alpha) * texture2D(textureAtlas, v_Texcoord * uvScale);\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n#endif\n}\n\n@end";bo.Shader.import(ma);var va=bo.Mesh.extend((function(){var t=new ga({dynamic:!0}),e=new bo.Material({shader:bo.createShader("ecgl.labels"),transparent:!0,depthMask:!1});return{geometry:t,material:e,culling:!1,castShadow:!1,ignorePicking:!0}})),ya=Ar.firstNotNull,_a={x:0,y:2,z:1};function ba(t,e){var n=new bo.Mesh({geometry:new Qo({useNativeLine:!1}),material:e,castShadow:!1,ignorePicking:!0,renderOrder:2}),i=new va;i.material.depthMask=!1;var r=new bo.Node;r.add(n),r.add(i),this.rootNode=r,this.dim=t,this.linesMesh=n,this.labelsMesh=i,this.axisLineCoords=null,this.labelElements=[]}var xa={x:"y",y:"x",z:"y"};ba.prototype.update=function(t,e,n){var r=t.coordinateSystem,o=r.getAxis(this.dim),a=this.linesMesh.geometry,s=this.labelsMesh.geometry;a.convertToDynamicArray(!0),s.convertToDynamicArray(!0);var l=o.model,c=o.getExtent(),u=n.getDevicePixelRatio(),h=l.getModel("axisLine",t.getModel("axisLine")),f=l.getModel("axisTick",t.getModel("axisTick")),d=l.getModel("axisLabel",t.getModel("axisLabel")),p=h.get("lineStyle.color");if(h.get("show")){var g=h.getModel("lineStyle"),m=[0,0,0],v=[0,0,0],y=_a[o.dim];m[y]=c[0],v[y]=c[1],this.axisLineCoords=[m,v];var _=bo.parseColor(p),b=ya(g.get("width"),1),x=ya(g.get("opacity"),1);_[3]*=x,a.addLine(m,v,_,b*u)}if(f.get("show")){var w=f.getModel("lineStyle"),S=bo.parseColor(ya(w.get("color"),p));b=ya(w.get("width"),1);S[3]*=ya(w.get("opacity"),1);for(var T=o.getTicksCoords(),O=f.get("length"),C=0;C<T.length;C++){var M=T[C].coord,A=(m=[0,0,0],v=[0,0,0],y=_a[o.dim],_a[xa[o.dim]]);m[y]=v[y]=M,v[A]=O,a.addLine(m,v,S,b*u)}}this.labelElements=[];u=n.getDevicePixelRatio();if(d.get("show")){T=o.getTicksCoords();var D=l.get("data"),E=d.get("margin"),I=o.getViewLabels();for(C=0;C<I.length;C++){var P=I[C].tickValue,L=I[C].formattedLabel,k=I[C].rawLabel,j=(M=o.dataToCoord(P),[0,0,0]);y=_a[o.dim],A=_a[xa[o.dim]];j[y]=j[y]=M,j[A]=E;var R=d;D&&D[P]&&D[P].textStyle&&(R=new i["f"](D[P].textStyle,d,l.ecModel));var N=ya(R.get("color"),p),B=new i["n"].Text({style:Object(Vo["c"])(R,{text:L,fill:"function"===typeof N?N("category"===o.type?k:"value"===o.type?P+"":P,C):N,verticalAlign:"top",align:"left"})}),F=e.add(B),z=B.getBoundingRect();s.addSprite(j,[z.width*u,z.height*u],F),this.labelElements.push(B)}}if(l.get("name")){var V=l.getModel("nameTextStyle"),H=(j=[0,0,0],y=_a[o.dim],A=_a[xa[o.dim]],ya(V.get("color"),p)),G=V.get("borderColor");b=V.get("borderWidth");j[y]=j[y]=(c[0]+c[1])/2,j[A]=l.get("nameGap");B=new i["n"].Text({style:Object(Vo["c"])(V,{text:l.get("name"),fill:H,stroke:G,lineWidth:b})}),F=e.add(B),z=B.getBoundingRect();s.addSprite(j,[z.width*u,z.height*u],F),B.__idx=this.labelElements.length,this.nameLabelElement=B}this.labelsMesh.material.set("textureAtlas",e.getTexture()),this.labelsMesh.material.set("uvScale",e.getCoordsScale()),a.convertToTypedArray(),s.convertToTypedArray()},ba.prototype.setSpriteAlign=function(t,e,n){for(var i=n.getDevicePixelRatio(),r=this.labelsMesh.geometry,o=0;o<this.labelElements.length;o++){var a=this.labelElements[o],s=a.getBoundingRect();r.setSpriteAlign(o,[s.width*i,s.height*i],t,e)}var l=this.nameLabelElement;if(l){s=l.getBoundingRect();r.setSpriteAlign(l.__idx,[s.width*i,s.height*i],t,e),r.dirty()}this.textAlign=t,this.textVerticalAlign=e};var wa=ba,Sa="@export ecgl.lines3D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec3 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, 1.0);\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n}\n@end\n\n\n\n@export ecgl.lines3D.clipNear\n\nvec4 clipNear(vec4 p1, vec4 p2) {\n float n = (p1.w - near) / (p1.w - p2.w);\n return vec4(mix(p1.xy, p2.xy, n), -near, near);\n}\n\n@end\n\n@export ecgl.lines3D.expandLine\n#ifdef VERTEX_ANIMATION\n vec4 prevProj = worldViewProjection * vec4(mix(prevPositionPrev, positionPrev, percent), 1.0);\n vec4 currProj = worldViewProjection * vec4(mix(prevPosition, position, percent), 1.0);\n vec4 nextProj = worldViewProjection * vec4(mix(prevPositionNext, positionNext, percent), 1.0);\n#else\n vec4 prevProj = worldViewProjection * vec4(positionPrev, 1.0);\n vec4 currProj = worldViewProjection * vec4(position, 1.0);\n vec4 nextProj = worldViewProjection * vec4(positionNext, 1.0);\n#endif\n\n if (currProj.w < 0.0) {\n if (nextProj.w > 0.0) {\n currProj = clipNear(currProj, nextProj);\n }\n else if (prevProj.w > 0.0) {\n currProj = clipNear(currProj, prevProj);\n }\n }\n\n vec2 prevScreen = (prevProj.xy / abs(prevProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 currScreen = (currProj.xy / abs(currProj.w) + 1.0) * 0.5 * viewport.zw;\n vec2 nextScreen = (nextProj.xy / abs(nextProj.w) + 1.0) * 0.5 * viewport.zw;\n\n vec2 dir;\n float len = offset;\n if (position == positionPrev) {\n dir = normalize(nextScreen - currScreen);\n }\n else if (position == positionNext) {\n dir = normalize(currScreen - prevScreen);\n }\n else {\n vec2 dirA = normalize(currScreen - prevScreen);\n vec2 dirB = normalize(nextScreen - currScreen);\n\n vec2 tanget = normalize(dirA + dirB);\n\n float miter = 1.0 / max(dot(tanget, dirA), 0.5);\n len *= miter;\n dir = tanget;\n }\n\n dir = vec2(-dir.y, dir.x) * len;\n currScreen += dir;\n\n currProj.xy = (currScreen / viewport.zw - 0.5) * 2.0 * abs(currProj.w);\n@end\n\n\n@export ecgl.meshLines3D.vertex\n\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute vec3 prevPositionPrev;\nattribute vec3 prevPositionNext;\nuniform float percent : 1.0;\n#endif\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n}\n@end\n\n\n@export ecgl.meshLines3D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n}\n\n@end",Ta=Ar.firstNotNull;bo.Shader.import(Sa);var Oa={x:0,y:2,z:1},Ca=i["d"].extend({type:"grid3D",__ecgl__:!0,init:function(t,e){var n=[["y","z","x",-1,"left"],["y","z","x",1,"right"],["x","y","z",-1,"bottom"],["x","y","z",1,"top"],["x","z","y",-1,"far"],["x","z","y",1,"near"]],i=["x","y","z"],r=new bo.Material({shader:bo.createShader("ecgl.color"),depthMask:!1,transparent:!0}),o=new bo.Material({shader:bo.createShader("ecgl.meshLines3D"),depthMask:!1,transparent:!0});r.define("fragment","DOUBLE_SIDED"),r.define("both","VERTEX_COLOR"),this.groupGL=new bo.Node,this._control=new Xo({zr:e.getZr()}),this._control.init(),this._faces=n.map((function(t){var e=new fa(t,o,r);return this.groupGL.add(e.rootNode),e}),this),this._axes=i.map((function(t){var e=new wa(t,o);return this.groupGL.add(e.rootNode),e}),this);var a=e.getDevicePixelRatio();this._axisLabelSurface=new na({width:256,height:256,devicePixelRatio:a}),this._axisLabelSurface.onupdate=function(){e.getZr().refresh()},this._axisPointerLineMesh=new bo.Mesh({geometry:new Qo({useNativeLine:!1}),material:o,castShadow:!1,ignorePicking:!0,renderOrder:3}),this.groupGL.add(this._axisPointerLineMesh),this._axisPointerLabelsSurface=new na({width:128,height:128,devicePixelRatio:a}),this._axisPointerLabelsMesh=new va({ignorePicking:!0,renderOrder:4,castShadow:!1}),this._axisPointerLabelsMesh.material.set("textureAtlas",this._axisPointerLabelsSurface.getTexture()),this.groupGL.add(this._axisPointerLabelsMesh),this._lightRoot=new bo.Node,this._sceneHelper=new ra,this._sceneHelper.initLight(this._lightRoot)},render:function(t,e,n){this._model=t,this._api=n;var i=t.coordinateSystem;i.viewGL.add(this._lightRoot),t.get("show")?i.viewGL.add(this.groupGL):i.viewGL.remove(this.groupGL);var r=this._control;r.setViewGL(i.viewGL);var o=t.getModel("viewControl");r.setFromViewControlModel(o,0),this._axisLabelSurface.clear(),r.off("update"),t.get("show")&&(this._faces.forEach((function(i){i.update(t,e,n)}),this),this._axes.forEach((function(e){e.update(t,this._axisLabelSurface,n)}),this)),r.on("update",this._onCameraChange.bind(this,t,n),this),this._sceneHelper.setScene(i.viewGL.scene),this._sceneHelper.updateLight(t),i.viewGL.setPostEffect(t.getModel("postEffect"),n),i.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._initMouseHandler(t)},afterRender:function(t,e,n,i){var r=i.renderer;this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n)},showAxisPointer:function(t,e,n,i){this._doShowAxisPointer(),this._updateAxisPointer(i.value)},hideAxisPointer:function(t,e,n,i){this._doHideAxisPointer()},_initMouseHandler:function(t){var e=t.coordinateSystem,n=e.viewGL;t.get("show")&&t.get("axisPointer.show")?n.on("mousemove",this._updateAxisPointerOnMousePosition,this):n.off("mousemove",this._updateAxisPointerOnMousePosition)},_updateAxisPointerOnMousePosition:function(t){if(!t.target){for(var e,n=this._model,i=n.coordinateSystem,r=i.viewGL,o=r.castRay(t.offsetX,t.offsetY,new bo.Ray),a=0;a<this._faces.length;a++){var s=this._faces[a];if(!s.rootNode.invisible){s.plane.normal.dot(r.camera.worldTransform.z)<0&&s.plane.normal.negate();var l=o.intersectPlane(s.plane);if(l){var c=i.getAxis(s.faceInfo[0]),u=i.getAxis(s.faceInfo[1]),h=Oa[s.faceInfo[0]],f=Oa[s.faceInfo[1]];c.contain(l.array[h])&&u.contain(l.array[f])&&(e=l)}}}if(e){var d=i.pointToData(e.array,[],!0);this._updateAxisPointer(d),this._doShowAxisPointer()}else this._doHideAxisPointer()}},_onCameraChange:function(t,e){t.get("show")&&(this._updateFaceVisibility(),this._updateAxisLinePosition());var n=this._control;e.dispatchAction({type:"grid3DChangeCamera",alpha:n.getAlpha(),beta:n.getBeta(),distance:n.getDistance(),center:n.getCenter(),from:this.uid,grid3DId:t.id})},_updateFaceVisibility:function(){var t=this._control.getCamera(),e=new bo.Vector3;t.update();for(var n=0;n<this._faces.length/2;n++){for(var i=[],r=0;r<2;r++){var o=this._faces[2*n+r];o.rootNode.getWorldPosition(e),e.transformMat4(t.viewMatrix),i[r]=e.z}var a=i[0]>i[1]?0:1,s=this._faces[2*n+a],l=this._faces[2*n+1-a];s.rootNode.invisible=!0,l.rootNode.invisible=!1}},_updateAxisLinePosition:function(){var t=this._model.coordinateSystem,e=t.getAxis("x"),n=t.getAxis("y"),i=t.getAxis("z"),r=i.getExtentMax(),o=i.getExtentMin(),a=e.getExtentMin(),s=e.getExtentMax(),l=n.getExtentMax(),c=n.getExtentMin(),u=this._axes[0].rootNode,h=this._axes[1].rootNode,f=this._axes[2].rootNode,d=this._faces,p=d[4].rootNode.invisible?c:l,g=d[2].rootNode.invisible?r:o,m=d[0].rootNode.invisible?a:s,v=d[2].rootNode.invisible?r:o,y=d[0].rootNode.invisible?s:a,_=d[4].rootNode.invisible?c:l;u.rotation.identity(),h.rotation.identity(),f.rotation.identity(),d[4].rootNode.invisible&&(this._axes[0].flipped=!0,u.rotation.rotateX(Math.PI)),d[0].rootNode.invisible&&(this._axes[1].flipped=!0,h.rotation.rotateZ(Math.PI)),d[4].rootNode.invisible&&(this._axes[2].flipped=!0,f.rotation.rotateY(Math.PI)),u.position.set(0,g,p),h.position.set(m,v,0),f.position.set(y,0,_),u.update(),h.update(),f.update(),this._updateAxisLabelAlign()},_updateAxisLabelAlign:function(){var t=this._control.getCamera(),e=[new bo.Vector4,new bo.Vector4],n=new bo.Vector4;this.groupGL.getWorldPosition(n),n.w=1,n.transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),n.x/=n.w,n.y/=n.w,this._axes.forEach((function(i){for(var r=i.axisLineCoords,o=(i.labelsMesh.geometry,0);o<e.length;o++)e[o].setArray(r[o]),e[o].w=1,e[o].transformMat4(i.rootNode.worldTransform).transformMat4(t.viewMatrix).transformMat4(t.projectionMatrix),e[o].x/=e[o].w,e[o].y/=e[o].w;var a,s,l=e[1].x-e[0].x,c=e[1].y-e[0].y,u=(e[1].x+e[0].x)/2,h=(e[1].y+e[0].y)/2;Math.abs(c/l)<.5?(a="center",s=h>n.y?"bottom":"top"):(s="middle",a=u>n.x?"left":"right"),i.setSpriteAlign(a,s,this._api)}),this)},_doShowAxisPointer:function(){this._axisPointerLineMesh.invisible&&(this._axisPointerLineMesh.invisible=!1,this._axisPointerLabelsMesh.invisible=!1,this._api.getZr().refresh())},_doHideAxisPointer:function(){this._axisPointerLineMesh.invisible||(this._axisPointerLineMesh.invisible=!0,this._axisPointerLabelsMesh.invisible=!0,this._api.getZr().refresh())},_updateAxisPointer:function(t){var e=this._model.coordinateSystem,n=e.dataToPoint(t),i=this._axisPointerLineMesh,r=i.geometry,o=this._model.getModel("axisPointer"),a=this._api.getDevicePixelRatio();function s(t){return Ar.firstNotNull(t.model.get("axisPointer.show"),o.get("show"))}function l(t){var e=t.model.getModel("axisPointer",o),n=e.getModel("lineStyle"),i=bo.parseColor(n.get("color")),r=Ta(n.get("width"),1),a=Ta(n.get("opacity"),1);return i[3]*=a,{color:i,lineWidth:r}}r.convertToDynamicArray(!0);for(var c=0;c<this._faces.length;c++){var u=this._faces[c];if(!u.rootNode.invisible){for(var h=u.faceInfo,f=h[3]<0?e.getAxis(h[2]).getExtentMin():e.getAxis(h[2]).getExtentMax(),d=Oa[h[2]],p=0;p<2;p++){var g=h[p],m=h[1-p],v=e.getAxis(g),y=e.getAxis(m);if(s(v)){var _=[0,0,0],b=[0,0,0],x=Oa[g],w=Oa[m];_[x]=b[x]=n[x],_[d]=b[d]=f,_[w]=y.getExtentMin(),b[w]=y.getExtentMax();var S=l(v);r.addLine(_,b,S.color,S.lineWidth*a)}}if(s(e.getAxis(h[2]))){_=n.slice(),b=n.slice();b[d]=f;S=l(e.getAxis(h[2]));r.addLine(_,b,S.color,S.lineWidth*a)}}}r.convertToTypedArray(),this._updateAxisPointerLabelsMesh(t),this._api.getZr().refresh()},_updateAxisPointerLabelsMesh:function(t){var e=this._model,n=this._axisPointerLabelsMesh,r=this._axisPointerLabelsSurface,o=e.coordinateSystem,a=e.getModel("axisPointer");n.geometry.convertToDynamicArray(!0),r.clear();var s={x:"y",y:"x",z:"y"};this._axes.forEach((function(e,l){var c=o.getAxis(e.dim),u=c.model,h=u.getModel("axisPointer",a),f=h.getModel("label"),d=h.get("lineStyle.color");if(f.get("show")&&h.get("show")){var p=t[l],g=f.get("formatter"),m=c.scale.getLabel({value:p});if(null!=g)m=g(m,t);else if("interval"===c.scale.type||"log"===c.scale.type){var v=i["q"].getPrecisionSafe(c.scale.getTicks()[0]);m=p.toFixed(v+2)}var y=f.get("color"),_=new i["n"].Text({style:Object(Vo["c"])(f,{text:m,fill:y||d,align:"left",verticalAlign:"top"})}),b=r.add(_),x=_.getBoundingRect(),w=this._api.getDevicePixelRatio(),S=e.rootNode.position.toArray(),T=Oa[s[e.dim]];S[T]+=(e.flipped?-1:1)*f.get("margin"),S[Oa[e.dim]]=c.dataToCoord(t[l]),n.geometry.addSprite(S,[x.width*w,x.height*w],b,e.textAlign,e.textVerticalAlign)}}),this),r.getZr().refreshImmediately(),n.material.set("uvScale",r.getCoordsScale()),n.geometry.convertToTypedArray()},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._axisLabelSurface.dispose(),this._axisPointerLabelsSurface.dispose()}}),Ma=n("cf7e");function Aa(t){Ma["a"].call(this,t),this.type="cartesian3D",this.dimensions=["x","y","z"],this.size=[0,0,0]}Aa.prototype={constructor:Aa,model:null,containPoint:function(t){return this.getAxis("x").contain(t[0])&&this.getAxis("y").contain(t[2])&&this.getAxis("z").contain(t[1])},containData:function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])&&this.getAxis("z").containData(t[2])},dataToPoint:function(t,e,n){return e=e||[],e[0]=this.getAxis("x").dataToCoord(t[0],n),e[2]=this.getAxis("y").dataToCoord(t[1],n),e[1]=this.getAxis("z").dataToCoord(t[2],n),e},pointToData:function(t,e,n){return e=e||[],e[0]=this.getAxis("x").coordToData(t[0],n),e[1]=this.getAxis("y").coordToData(t[2],n),e[2]=this.getAxis("z").coordToData(t[1],n),e}},i["x"].inherits(Aa,Ma["a"]);var Da=Aa;function Ea(t,e,n){i["a"].call(this,t,e,n)}Ea.prototype={constructor:Ea,getExtentMin:function(){var t=this._extent;return Math.min(t[0],t[1])},getExtentMax:function(){var t=this._extent;return Math.max(t[0],t[1])},calculateCategoryInterval:function(){return Math.floor(this.scale.count()/8)}},i["x"].inherits(Ea,i["a"]);var Ia=Ea,Pa=n("f934"),La=function(){this._pool={},this._allocatedTextures=[]};La.prototype={constructor:La,get:function(t){var e=Ra(t);this._pool.hasOwnProperty(e)||(this._pool[e]=[]);var n=this._pool[e];if(!n.length){var i=new tn(t);return this._allocatedTextures.push(i),i}return n.pop()},put:function(t){var e=Ra(t);this._pool.hasOwnProperty(e)||(this._pool[e]=[]);var n=this._pool[e];n.push(t)},clear:function(t){for(var e=0;e<this._allocatedTextures.length;e++)this._allocatedTextures[e].dispose(t);this._pool={},this._allocatedTextures=[]}};var ka={width:512,height:512,type:w.UNSIGNED_BYTE,format:w.RGBA,wrapS:w.CLAMP_TO_EDGE,wrapT:w.CLAMP_TO_EDGE,minFilter:w.LINEAR_MIPMAP_LINEAR,magFilter:w.LINEAR,useMipmap:!0,anisotropic:1,flipY:!0,unpackAlignment:4,premultiplyAlpha:!1},ja=Object.keys(ka);function Ra(t){g.defaultsWithPropList(t,ka,ja),Na(t);for(var e="",n=0;n<ja.length;n++){var i=ja[n],r=t[i].toString();e+=r}return e}function Na(t){var e=Ba(t.width,t.height);t.format===w.DEPTH_COMPONENT&&(t.useMipmap=!1),e&&t.useMipmap||(t.minFilter==w.NEAREST_MIPMAP_NEAREST||t.minFilter==w.NEAREST_MIPMAP_LINEAR?t.minFilter=w.NEAREST:t.minFilter!=w.LINEAR_MIPMAP_LINEAR&&t.minFilter!=w.LINEAR_MIPMAP_NEAREST||(t.minFilter=w.LINEAR)),e||(t.wrapS=w.CLAMP_TO_EDGE,t.wrapT=w.CLAMP_TO_EDGE)}function Ba(t,e){return 0===(t&t-1)&&0===(e&e-1)}var Fa=La,za="@export clay.sm.depth.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nattribute vec3 position : POSITION;\nattribute vec2 texcoord : TEXCOORD_0;\nuniform vec2 uvRepeat = vec2(1.0, 1.0);\nuniform vec2 uvOffset = vec2(0.0, 0.0);\n@import clay.chunk.skinning_header\n@import clay.chunk.instancing_header\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nvoid main(){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n v_ViewPosition = worldViewProjection * P;\n gl_Position = v_ViewPosition;\n v_Texcoord = texcoord * uvRepeat + uvOffset;\n}\n@end\n@export clay.sm.depth.fragment\nvarying vec4 v_ViewPosition;\nvarying vec2 v_Texcoord;\nuniform float bias : 0.001;\nuniform float slopeScale : 1.0;\nuniform sampler2D alphaMap;\nuniform float alphaCutoff: 0.0;\n@import clay.util.encode_float\nvoid main(){\n float depth = v_ViewPosition.z / v_ViewPosition.w;\n if (alphaCutoff > 0.0) {\n if (texture2D(alphaMap, v_Texcoord).a <= alphaCutoff) {\n discard;\n }\n }\n#ifdef USE_VSM\n depth = depth * 0.5 + 0.5;\n float moment1 = depth;\n float moment2 = depth * depth;\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n moment2 += 0.25*(dx*dx+dy*dy);\n #endif\n gl_FragColor = vec4(moment1, moment2, 0.0, 1.0);\n#else\n #ifdef SUPPORT_STANDARD_DERIVATIVES\n float dx = dFdx(depth);\n float dy = dFdy(depth);\n depth += sqrt(dx*dx + dy*dy) * slopeScale + bias;\n #else\n depth += bias;\n #endif\n gl_FragColor = encodeFloat(depth * 0.5 + 0.5);\n#endif\n}\n@end\n@export clay.sm.debug_depth\nuniform sampler2D depthMap;\nvarying vec2 v_Texcoord;\n@import clay.util.decode_float\nvoid main() {\n vec4 tex = texture2D(depthMap, v_Texcoord);\n#ifdef USE_VSM\n gl_FragColor = vec4(tex.rgb, 1.0);\n#else\n float depth = decodeFloat(tex);\n gl_FragColor = vec4(depth, depth, depth, 1.0);\n#endif\n}\n@end\n@export clay.sm.distance.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 world : WORLD;\nattribute vec3 position : POSITION;\n@import clay.chunk.skinning_header\nvarying vec3 v_WorldPosition;\nvoid main (){\n vec4 P = vec4(position, 1.0);\n#ifdef SKINNING\n @import clay.chunk.skin_matrix\n P = skinMatrixWS * P;\n#endif\n#ifdef INSTANCING\n @import clay.chunk.instancing_matrix\n P = instanceMat * P;\n#endif\n gl_Position = worldViewProjection * P;\n v_WorldPosition = (world * P).xyz;\n}\n@end\n@export clay.sm.distance.fragment\nuniform vec3 lightPosition;\nuniform float range : 100;\nvarying vec3 v_WorldPosition;\n@import clay.util.encode_float\nvoid main(){\n float dist = distance(lightPosition, v_WorldPosition);\n#ifdef USE_VSM\n gl_FragColor = vec4(dist, dist * dist, 0.0, 0.0);\n#else\n dist = dist / range;\n gl_FragColor = encodeFloat(dist);\n#endif\n}\n@end\n@export clay.plugin.shadow_map_common\n@import clay.util.decode_float\nfloat tapShadowMap(sampler2D map, vec2 uv, float z){\n vec4 tex = texture2D(map, uv);\n return step(z, decodeFloat(tex) * 2.0 - 1.0);\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize, vec2 scale) {\n float shadowContrib = tapShadowMap(map, uv, z);\n vec2 offset = vec2(1.0 / textureSize) * scale;\n#ifdef PCF_KERNEL_SIZE\n for (int _idx_ = 0; _idx_ < PCF_KERNEL_SIZE; _idx_++) {{\n shadowContrib += tapShadowMap(map, uv + offset * pcfKernel[_idx_], z);\n }}\n return shadowContrib / float(PCF_KERNEL_SIZE + 1);\n#else\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, 0.0), z);\n shadowContrib += tapShadowMap(map, uv+vec2(-offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(offset.x, -offset.y), z);\n shadowContrib += tapShadowMap(map, uv+vec2(0.0, -offset.y), z);\n return shadowContrib / 9.0;\n#endif\n}\nfloat pcf(sampler2D map, vec2 uv, float z, float textureSize) {\n return pcf(map, uv, z, textureSize, vec2(1.0));\n}\nfloat chebyshevUpperBound(vec2 moments, float z){\n float p = 0.0;\n z = z * 0.5 + 0.5;\n if (z <= moments.x) {\n p = 1.0;\n }\n float variance = moments.y - moments.x * moments.x;\n variance = max(variance, 0.0000001);\n float mD = moments.x - z;\n float pMax = variance / (variance + mD * mD);\n pMax = clamp((pMax-0.4)/(1.0-0.4), 0.0, 1.0);\n return max(p, pMax);\n}\nfloat computeShadowContrib(\n sampler2D map, mat4 lightVPM, vec3 position, float textureSize, vec2 scale, vec2 offset\n) {\n vec4 posInLightSpace = lightVPM * vec4(position, 1.0);\n posInLightSpace.xyz /= posInLightSpace.w;\n float z = posInLightSpace.z;\n if(all(greaterThan(posInLightSpace.xyz, vec3(-0.99, -0.99, -1.0))) &&\n all(lessThan(posInLightSpace.xyz, vec3(0.99, 0.99, 1.0)))){\n vec2 uv = (posInLightSpace.xy+1.0) / 2.0;\n #ifdef USE_VSM\n vec2 moments = texture2D(map, uv * scale + offset).xy;\n return chebyshevUpperBound(moments, z);\n #else\n return pcf(map, uv * scale + offset, z, textureSize, scale);\n #endif\n }\n return 1.0;\n}\nfloat computeShadowContrib(sampler2D map, mat4 lightVPM, vec3 position, float textureSize) {\n return computeShadowContrib(map, lightVPM, position, textureSize, vec2(1.0), vec2(0.0));\n}\nfloat computeShadowContribOmni(samplerCube map, vec3 direction, float range)\n{\n float dist = length(direction);\n vec4 shadowTex = textureCube(map, direction);\n#ifdef USE_VSM\n vec2 moments = shadowTex.xy;\n float variance = moments.y - moments.x * moments.x;\n float mD = moments.x - dist;\n float p = variance / (variance + mD * mD);\n if(moments.x + 0.001 < dist){\n return clamp(p, 0.0, 1.0);\n }else{\n return 1.0;\n }\n#else\n return step(dist, (decodeFloat(shadowTex) + 0.0002) * range);\n#endif\n}\n@end\n@export clay.plugin.compute_shadow_map\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT) || defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT) || defined(POINT_LIGHT_SHADOWMAP_COUNT)\n#ifdef SPOT_LIGHT_SHADOWMAP_COUNT\nuniform sampler2D spotLightShadowMaps[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 spotLightMatrices[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float spotLightShadowMapSizes[SPOT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#ifdef DIRECTIONAL_LIGHT_SHADOWMAP_COUNT\n#if defined(SHADOW_CASCADE)\nuniform sampler2D directionalLightShadowMaps[1]:unconfigurable;\nuniform mat4 directionalLightMatrices[SHADOW_CASCADE]:unconfigurable;\nuniform float directionalLightShadowMapSizes[1]:unconfigurable;\nuniform float shadowCascadeClipsNear[SHADOW_CASCADE]:unconfigurable;\nuniform float shadowCascadeClipsFar[SHADOW_CASCADE]:unconfigurable;\n#else\nuniform sampler2D directionalLightShadowMaps[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform mat4 directionalLightMatrices[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\nuniform float directionalLightShadowMapSizes[DIRECTIONAL_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\n#endif\n#ifdef POINT_LIGHT_SHADOWMAP_COUNT\nuniform samplerCube pointLightShadowMaps[POINT_LIGHT_SHADOWMAP_COUNT]:unconfigurable;\n#endif\nuniform bool shadowEnabled : true;\n#ifdef PCF_KERNEL_SIZE\nuniform vec2 pcfKernel[PCF_KERNEL_SIZE];\n#endif\n@import clay.plugin.shadow_map_common\n#if defined(SPOT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfSpotLights(vec3 position, inout float shadowContribs[SPOT_LIGHT_COUNT] ) {\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < SPOT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n spotLightShadowMaps[_idx_], spotLightMatrices[_idx_], position,\n spotLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = SPOT_LIGHT_SHADOWMAP_COUNT; _idx_ < SPOT_LIGHT_COUNT; _idx_++){{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#if defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n#ifdef SHADOW_CASCADE\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float depth = (2.0 * gl_FragCoord.z - gl_DepthRange.near - gl_DepthRange.far)\n / (gl_DepthRange.far - gl_DepthRange.near);\n float shadowContrib;\n shadowContribs[0] = 1.0;\n for (int _idx_ = 0; _idx_ < SHADOW_CASCADE; _idx_++) {{\n if (\n depth >= shadowCascadeClipsNear[_idx_] &&\n depth <= shadowCascadeClipsFar[_idx_]\n ) {\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[0], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[0],\n vec2(1.0 / float(SHADOW_CASCADE), 1.0),\n vec2(float(_idx_) / float(SHADOW_CASCADE), 0.0)\n );\n shadowContribs[0] = shadowContrib;\n }\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#else\nvoid computeShadowOfDirectionalLights(vec3 position, inout float shadowContribs[DIRECTIONAL_LIGHT_COUNT]){\n float shadowContrib;\n for(int _idx_ = 0; _idx_ < DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n shadowContrib = computeShadowContrib(\n directionalLightShadowMaps[_idx_], directionalLightMatrices[_idx_], position,\n directionalLightShadowMapSizes[_idx_]\n );\n shadowContribs[_idx_] = shadowContrib;\n }}\n for(int _idx_ = DIRECTIONAL_LIGHT_SHADOWMAP_COUNT; _idx_ < DIRECTIONAL_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n#if defined(POINT_LIGHT_SHADOWMAP_COUNT)\nvoid computeShadowOfPointLights(vec3 position, inout float shadowContribs[POINT_LIGHT_COUNT] ){\n vec3 lightPosition;\n vec3 direction;\n for(int _idx_ = 0; _idx_ < POINT_LIGHT_SHADOWMAP_COUNT; _idx_++) {{\n lightPosition = pointLightPosition[_idx_];\n direction = position - lightPosition;\n shadowContribs[_idx_] = computeShadowContribOmni(pointLightShadowMaps[_idx_], direction, pointLightRange[_idx_]);\n }}\n for(int _idx_ = POINT_LIGHT_SHADOWMAP_COUNT; _idx_ < POINT_LIGHT_COUNT; _idx_++) {{\n shadowContribs[_idx_] = 1.0;\n }}\n}\n#endif\n#endif\n@end",Va=["px","nx","py","ny","pz","nz"];function Ha(t,e,n){if("alphaMap"===n)return t.material.get("diffuseMap");if("alphaCutoff"===n){if(t.material.isDefined("fragment","ALPHA_TEST")&&t.material.get("diffuseMap")){var i=t.material.get("alphaCutoff");return i||0}return 0}return"uvRepeat"===n?t.material.get("uvRepeat"):"uvOffset"===n?t.material.get("uvOffset"):e.get(n)}function Ga(t,e){var n=t.material,i=e.material;return n.get("diffuseMap")!==i.get("diffuseMap")||(n.get("alphaCutoff")||0)!==(i.get("alphaCutoff")||0)}zt["import"](za);var Ua=v.extend((function(){return{softShadow:Ua.PCF,shadowBlur:1,lightFrustumBias:"auto",kernelPCF:new Float32Array([1,0,1,1,-1,1,0,1,-1,0,-1,-1,1,-1,0,-1]),precision:"highp",_lastRenderNotCastShadow:!1,_frameBuffer:new li,_textures:{},_shadowMapNumber:{POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},_depthMaterials:{},_distanceMaterials:{},_receivers:[],_lightsCastShadow:[],_lightCameras:{},_lightMaterials:{},_texturePool:new Fa}}),(function(){this._gaussianPassH=new hr({fragment:zt.source("clay.compositor.gaussian_blur")}),this._gaussianPassV=new hr({fragment:zt.source("clay.compositor.gaussian_blur")}),this._gaussianPassH.setUniform("blurSize",this.shadowBlur),this._gaussianPassH.setUniform("blurDir",0),this._gaussianPassV.setUniform("blurSize",this.shadowBlur),this._gaussianPassV.setUniform("blurDir",1),this._outputDepthPass=new hr({fragment:zt.source("clay.sm.debug_depth")})}),{render:function(t,e,n,i){n||(n=e.getMainCamera()),this.trigger("beforerender",this,t,e,n),this._renderShadowPass(t,e,n,i),this.trigger("afterrender",this,t,e,n)},renderDebug:function(t,e){t.saveClear();var n=t.viewport,i=0,r=0,o=e||n.width/4,a=o;for(var s in this.softShadow===Ua.VSM?this._outputDepthPass.material.define("fragment","USE_VSM"):this._outputDepthPass.material.undefine("fragment","USE_VSM"),this._textures){var l=this._textures[s];t.setViewport(i,r,o*l.width/l.height,a),this._outputDepthPass.setUniform("depthMap",l),this._outputDepthPass.render(t),i+=o*l.width/l.height}t.setViewport(n),t.restoreClear()},_updateReceivers:function(t,e){if(e.receiveShadow?(this._receivers.push(e),e.material.set("shadowEnabled",1),e.material.set("pcfKernel",this.kernelPCF)):e.material.set("shadowEnabled",0),this.softShadow===Ua.VSM)e.material.define("fragment","USE_VSM"),e.material.undefine("fragment","PCF_KERNEL_SIZE");else{e.material.undefine("fragment","USE_VSM");var n=this.kernelPCF;n&&n.length?e.material.define("fragment","PCF_KERNEL_SIZE",n.length/2):e.material.undefine("fragment","PCF_KERNEL_SIZE")}},_update:function(t,e){var n=this;e.traverse((function(e){e.isRenderable()&&n._updateReceivers(t,e)}));for(var i=0;i<e.lights.length;i++){var r=e.lights[i];r.castShadow&&!r.invisible&&this._lightsCastShadow.push(r)}},_renderShadowPass:function(t,e,n,i){for(var r in this._shadowMapNumber)this._shadowMapNumber[r]=0;this._lightsCastShadow.length=0,this._receivers.length=0;var o=t.gl;if(i||e.update(),n&&n.update(),e.updateLights(),this._update(t,e),this._lightsCastShadow.length||!this._lastRenderNotCastShadow){this._lastRenderNotCastShadow=0===this._lightsCastShadow,o.enable(o.DEPTH_TEST),o.depthMask(!0),o.disable(o.BLEND),o.clearColor(1,1,1,1);for(var a,s=[],l=[],c=[],u=[],h=[],f=[],d=0;d<this._lightsCastShadow.length;d++){var p=this._lightsCastShadow[d];if("DIRECTIONAL_LIGHT"===p.type){if(a){console.warn("Only one direectional light supported with shadow cascade");continue}if(p.shadowCascade>4){console.warn("Support at most 4 cascade");continue}p.shadowCascade>1&&(a=p),this.renderDirectionalLightShadow(t,e,n,p,h,u,c)}else"SPOT_LIGHT"===p.type?this.renderSpotLightShadow(t,e,p,l,s):"POINT_LIGHT"===p.type&&this.renderPointLightShadow(t,e,p,f);this._shadowMapNumber[p.type]++}for(var g in this._shadowMapNumber){var m=this._shadowMapNumber[g],v=g+"_SHADOWMAP_COUNT";for(d=0;d<this._receivers.length;d++){var y=this._receivers[d],_=y.material;_.fragmentDefines[v]!==m&&(m>0?_.define("fragment",v,m):_.isDefined("fragment",v)&&_.undefine("fragment",v))}}for(d=0;d<this._receivers.length;d++){y=this._receivers[d],_=y.material;a?_.define("fragment","SHADOW_CASCADE",a.shadowCascade):_.undefine("fragment","SHADOW_CASCADE")}var b=e.shadowUniforms;if(c.length>0){var x=c.map(O);if(b.directionalLightShadowMaps={value:c,type:"tv"},b.directionalLightMatrices={value:u,type:"m4v"},b.directionalLightShadowMapSizes={value:x,type:"1fv"},a){var w=h.slice(),S=h.slice();w.pop(),S.shift(),w.reverse(),S.reverse(),u.reverse(),b.shadowCascadeClipsNear={value:w,type:"1fv"},b.shadowCascadeClipsFar={value:S,type:"1fv"}}}if(s.length>0){var T=s.map(O);b=e.shadowUniforms;b.spotLightShadowMaps={value:s,type:"tv"},b.spotLightMatrices={value:l,type:"m4v"},b.spotLightShadowMapSizes={value:T,type:"1fv"}}f.length>0&&(b.pointLightShadowMaps={value:f,type:"tv"})}function O(t){return t.height}},renderDirectionalLightShadow:function(){var t=new Pn,e=new Oe,n=new Le,i=new Oe,r=new Oe,o=new Oe,a=new Oe;return function(s,l,c,u,h,f,d){var p=this._getDepthMaterial(u),g={getMaterial:function(t){return t.shadowDepthMaterial||p},isMaterialChanged:Ga,getUniform:Ha,ifRender:function(t){return t.castShadow},sortCompare:re.opaqueSortCompare};if(!l.viewBoundingBoxLastFrame.isFinite()){var m=l.getBoundingBox();l.viewBoundingBoxLastFrame.copy(m).applyTransform(c.viewMatrix)}var v=Math.min(-l.viewBoundingBoxLastFrame.min.z,c.far),y=Math.max(-l.viewBoundingBoxLastFrame.max.z,c.near),_=this._getDirectionalLightCamera(u,l,c),b=o.array;a.copy(_.projectionMatrix),Gt.invert(r.array,_.worldTransform.array),Gt.multiply(r.array,r.array,c.worldTransform.array),Gt.multiply(b,a.array,r.array);for(var x=[],w=c instanceof Kn,S=(c.near+c.far)/(c.near-c.far),T=2*c.near*c.far/(c.near-c.far),O=0;O<=u.shadowCascade;O++){var C=y*Math.pow(v/y,O/u.shadowCascade),M=y+(v-y)*O/u.shadowCascade,A=C*u.cascadeSplitLogFactor+M*(1-u.cascadeSplitLogFactor);x.push(A),h.push(-(-A*S+T)/-A)}var D=this._getTexture(u,u.shadowCascade);d.push(D);var E=s.viewport,I=s.gl;this._frameBuffer.attach(D),this._frameBuffer.bind(s),I.clear(I.COLOR_BUFFER_BIT|I.DEPTH_BUFFER_BIT);for(O=0;O<u.shadowCascade;O++){var P=x[O],L=x[O+1];w?Gt.perspective(e.array,c.fov/180*Math.PI,c.aspect,P,L):Gt.ortho(e.array,c.left,c.right,c.bottom,c.top,P,L),t.setFromProjection(e),t.getTransformedBoundingBox(n,r),n.applyProjection(a);var k=n.min.array,j=n.max.array;k[0]=Math.max(k[0],-1),k[1]=Math.max(k[1],-1),j[0]=Math.min(j[0],1),j[1]=Math.min(j[1],1),i.ortho(k[0],j[0],k[1],j[1],1,-1),_.projectionMatrix.multiplyLeft(i);var R=u.shadowResolution||512;s.setViewport((u.shadowCascade-O-1)*R,0,R,R,1);var N=l.updateRenderList(_);s.renderPass(N.opaque,_,g),this.softShadow===Ua.VSM&&this._gaussianFilter(s,D,D.width);var B=new Oe;B.copy(_.viewMatrix).multiplyLeft(_.projectionMatrix),f.push(B.array),_.projectionMatrix.copy(a)}this._frameBuffer.unbind(s),s.setViewport(E)}}(),renderSpotLightShadow:function(t,e,n,i,r){var o=this._getTexture(n),a=this._getSpotLightCamera(n),s=t.gl;this._frameBuffer.attach(o),this._frameBuffer.bind(t),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT);var l=this._getDepthMaterial(n),c={getMaterial:function(t){return t.shadowDepthMaterial||l},isMaterialChanged:Ga,getUniform:Ha,ifRender:function(t){return t.castShadow},sortCompare:re.opaqueSortCompare},u=e.updateRenderList(a);t.renderPass(u.opaque,a,c),this._frameBuffer.unbind(t),this.softShadow===Ua.VSM&&this._gaussianFilter(t,o,o.width);var h=new Oe;h.copy(a.worldTransform).invert().multiplyLeft(a.projectionMatrix),r.push(o),i.push(h.array)},renderPointLightShadow:function(t,e,n,i){var r=this._getTexture(n),o=t.gl;i.push(r);var a=this._getDepthMaterial(n),s={getMaterial:function(t){return t.shadowDepthMaterial||a},getUniform:Ha,sortCompare:re.opaqueSortCompare},l={px:[],py:[],pz:[],nx:[],ny:[],nz:[]},c=new Le,u=n.getWorldPosition().array,h=new Le,f=n.range;h.min.setArray(u),h.max.setArray(u);var d=new fe(f,f,f);h.max.add(d),h.min.sub(d);var p={px:!1,py:!1,pz:!1,nx:!1,ny:!1,nz:!1};e.traverse((function(t){if(t.isRenderable()&&t.castShadow){var e=t.geometry;if(!e.boundingBox){for(var n=0;n<Va.length;n++)l[Va[n]].push(t);return}if(c.transformFrom(e.boundingBox,t.worldTransform),!c.intersectBoundingBox(h))return;c.updateVertices();for(n=0;n<Va.length;n++)p[Va[n]]=!1;for(n=0;n<8;n++){var i=c.vertices[n],r=i[0]-u[0],o=i[1]-u[1],a=i[2]-u[2],s=Math.abs(r),f=Math.abs(o),d=Math.abs(a);s>f?s>d?p[r>0?"px":"nx"]=!0:p[a>0?"pz":"nz"]=!0:f>d?p[o>0?"py":"ny"]=!0:p[a>0?"pz":"nz"]=!0}for(n=0;n<Va.length;n++)p[Va[n]]&&l[Va[n]].push(t)}}));for(var g=0;g<6;g++){var m=Va[g],v=this._getPointLightCamera(n,m);this._frameBuffer.attach(r,o.COLOR_ATTACHMENT0,o.TEXTURE_CUBE_MAP_POSITIVE_X+g),this._frameBuffer.bind(t),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),t.renderPass(l[m],v,s)}this._frameBuffer.unbind(t)},_getDepthMaterial:function(t){var e=this._lightMaterials[t.__uid__],n="POINT_LIGHT"===t.type;if(!e){var i=n?"clay.sm.distance.":"clay.sm.depth.";e=new K({precision:this.precision,shader:new zt(zt.source(i+"vertex"),zt.source(i+"fragment"))}),this._lightMaterials[t.__uid__]=e}return null!=t.shadowSlopeScale&&e.setUniform("slopeScale",t.shadowSlopeScale),null!=t.shadowBias&&e.setUniform("bias",t.shadowBias),this.softShadow===Ua.VSM?e.define("fragment","USE_VSM"):e.undefine("fragment","USE_VSM"),n&&(e.set("lightPosition",t.getWorldPosition().array),e.set("range",t.range)),e},_gaussianFilter:function(t,e,n){var i={width:n,height:n,type:We.FLOAT},r=this._texturePool.get(i);this._frameBuffer.attach(r),this._frameBuffer.bind(t),this._gaussianPassH.setUniform("texture",e),this._gaussianPassH.setUniform("textureWidth",n),this._gaussianPassH.render(t),this._frameBuffer.attach(e),this._gaussianPassV.setUniform("texture",r),this._gaussianPassV.setUniform("textureHeight",n),this._gaussianPassV.render(t),this._frameBuffer.unbind(t),this._texturePool.put(r)},_getTexture:function(t,e){var n=t.__uid__,i=this._textures[n],r=t.shadowResolution||512;return e=e||1,i||(i="POINT_LIGHT"===t.type?new qn:new tn,i.width=r*e,i.height=r,this.softShadow===Ua.VSM?(i.type=We.FLOAT,i.anisotropic=4):(i.minFilter=w.NEAREST,i.magFilter=w.NEAREST,i.useMipmap=!1),this._textures[n]=i),i},_getPointLightCamera:function(t,e){this._lightCameras.point||(this._lightCameras.point={px:new Kn,nx:new Kn,py:new Kn,ny:new Kn,pz:new Kn,nz:new Kn});var n=this._lightCameras.point[e];switch(n.far=t.range,n.fov=90,n.position.set(0,0,0),e){case"px":n.lookAt(fe.POSITIVE_X,fe.NEGATIVE_Y);break;case"nx":n.lookAt(fe.NEGATIVE_X,fe.NEGATIVE_Y);break;case"py":n.lookAt(fe.POSITIVE_Y,fe.POSITIVE_Z);break;case"ny":n.lookAt(fe.NEGATIVE_Y,fe.NEGATIVE_Z);break;case"pz":n.lookAt(fe.POSITIVE_Z,fe.NEGATIVE_Y);break;case"nz":n.lookAt(fe.NEGATIVE_Z,fe.NEGATIVE_Y);break}return t.getWorldPosition(n.position),n.update(),n},_getDirectionalLightCamera:function(){var t=new Oe,e=new Le,n=new Le;return function(i,r,o){this._lightCameras.directional||(this._lightCameras.directional=new or);var a=this._lightCameras.directional;e.copy(r.viewBoundingBoxLastFrame),e.intersection(o.frustum.boundingBox),a.position.copy(e.min).add(e.max).scale(.5).transformMat4(o.worldTransform),a.rotation.copy(i.rotation),a.scale.copy(i.scale),a.updateWorldTransform(),Oe.invert(t,a.worldTransform),Oe.multiply(t,t,o.worldTransform),n.copy(e).applyTransform(t);var s=n.min.array,l=n.max.array;return a.position.set((s[0]+l[0])/2,(s[1]+l[1])/2,l[2]).transformMat4(a.worldTransform),a.near=0,a.far=-s[2]+l[2],isNaN(this.lightFrustumBias)?a.far*=4:a.far+=this.lightFrustumBias,a.left=s[0],a.right=l[0],a.top=l[1],a.bottom=s[1],a.update(!0),a}}(),_getSpotLightCamera:function(t){this._lightCameras.spot||(this._lightCameras.spot=new Kn);var e=this._lightCameras.spot;return e.fov=2*t.penumbraAngle,e.far=t.range,e.worldTransform.copy(t.worldTransform),e.updateProjectionMatrix(),Gt.invert(e.viewMatrix.array,e.worldTransform.array),e},dispose:function(t){var e=t.gl||t;for(var n in this._frameBuffer&&this._frameBuffer.dispose(e),this._textures)this._textures[n].dispose(e);this._texturePool.clear(t.gl),this._depthMaterials={},this._distanceMaterials={},this._textures={},this._lightCameras={},this._shadowMapNumber={POINT_LIGHT:0,DIRECTIONAL_LIGHT:0,SPOT_LIGHT:0},this._meshMaterials={};for(var i=0;i<this._receivers.length;i++){var r=this._receivers[i];if(r.material){var o=r.material;o.undefine("fragment","POINT_LIGHT_SHADOW_COUNT"),o.undefine("fragment","DIRECTIONAL_LIGHT_SHADOW_COUNT"),o.undefine("fragment","AMBIENT_LIGHT_SHADOW_COUNT"),o.set("shadowEnabled",0)}}this._receivers=[],this._lightsCastShadow=[]}});Ua.VSM=1,Ua.PCF=2;var Wa=Ua,Xa=v.extend((function(){return{name:"",inputLinks:{},outputLinks:{},_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}}),{updateParameter:function(t,e){var n,i,r=this.outputs[t],o=r.parameters,a=r._parametersCopy;if(a||(a=r._parametersCopy={}),o)for(var s in o)"width"!==s&&"height"!==s&&(a[s]=o[s]);return n=o.width instanceof Function?o.width.call(this,e):o.width,i=o.height instanceof Function?o.height.call(this,e):o.height,a.width===n&&a.height===i||this._outputTextures[t]&&this._outputTextures[t].dispose(e.gl),a.width=n,a.height=i,a},setParameter:function(t,e){},getParameter:function(t){},setParameters:function(t){for(var e in t)this.setParameter(e,t[e])},render:function(){},getOutput:function(t,e){if(null==e)return e=t,this._outputTextures[e];var n=this.outputs[e];return n?this._rendered?n.outputLastFrame?this._prevOutputTextures[e]:this._outputTextures[e]:this._rendering?(this._prevOutputTextures[e]||(this._prevOutputTextures[e]=this._compositor.allocateTexture(n.parameters||{})),this._prevOutputTextures[e]):(this.render(t),this._outputTextures[e]):void 0},removeReference:function(t){if(this._outputReferences[t]--,0===this._outputReferences[t]){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},link:function(t,e,n){this.inputLinks[t]={node:e,pin:n},e.outputLinks[n]||(e.outputLinks[n]=[]),e.outputLinks[n].push({node:this,pin:t}),this.pass.material.enableTexture(t)},clear:function(){this.inputLinks={},this.outputLinks={}},updateReference:function(t){if(!this._rendering){for(var e in this._rendering=!0,this.inputLinks){var n=this.inputLinks[e];n.node.updateReference(n.pin)}this._rendering=!1}t&&this._outputReferences[t]++},beforeFrame:function(){for(var t in this._rendered=!1,this.outputLinks)this._outputReferences[t]=0},afterFrame:function(){for(var t in this.outputLinks)if(this._outputReferences[t]>0){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}}}),Ya=Xa,qa=v.extend((function(){return{nodes:[]}}),{dirty:function(){this._dirty=!0},addNode:function(t){this.nodes.indexOf(t)>=0||(this.nodes.push(t),this._dirty=!0)},removeNode:function(t){"string"===typeof t&&(t=this.getNodeByName(t));var e=this.nodes.indexOf(t);e>=0&&(this.nodes.splice(e,1),this._dirty=!0)},getNodeByName:function(t){for(var e=0;e<this.nodes.length;e++)if(this.nodes[e].name===t)return this.nodes[e]},update:function(){for(var t=0;t<this.nodes.length;t++)this.nodes[t].clear();for(t=0;t<this.nodes.length;t++){var e=this.nodes[t];if(e.inputs)for(var n in e.inputs)if(e.inputs[n])if(!e.pass||e.pass.material.isUniformEnabled(n)){var i=e.inputs[n],r=this.findPin(i);r?e.link(n,r.node,r.pin):"string"===typeof i?console.warn("Node "+i+" not exist"):console.warn("Pin of "+i.node+"."+i.pin+" not exist")}else console.warn("Pin "+e.name+"."+n+" not used.")}},findPin:function(t){var e;if(("string"===typeof t||t instanceof Ya)&&(t={node:t}),"string"===typeof t.node)for(var n=0;n<this.nodes.length;n++){var i=this.nodes[n];i.name===t.node&&(e=i)}else e=t.node;if(e){var r=t.pin;if(r||e.outputs&&(r=Object.keys(e.outputs)[0]),e.outputs[r])return{node:e,pin:r}}}}),Za=qa,Ka=Za.extend((function(){return{_outputs:[],_texturePool:new Fa,_frameBuffer:new li({depthBuffer:!1})}}),{addNode:function(t){Za.prototype.addNode.call(this,t),t._compositor=this},render:function(t,e){if(this._dirty){this.update(),this._dirty=!1,this._outputs.length=0;for(var n=0;n<this.nodes.length;n++)this.nodes[n].outputs||this._outputs.push(this.nodes[n])}for(n=0;n<this.nodes.length;n++)this.nodes[n].beforeFrame();for(n=0;n<this._outputs.length;n++)this._outputs[n].updateReference();for(n=0;n<this._outputs.length;n++)this._outputs[n].render(t,e);for(n=0;n<this.nodes.length;n++)this.nodes[n].afterFrame()},allocateTexture:function(t){return this._texturePool.get(t)},releaseTexture:function(t){this._texturePool.put(t)},getFrameBuffer:function(){return this._frameBuffer},dispose:function(t){this._texturePool.clear(t)}}),$a=Ka,Ja=Ya.extend({name:"scene",scene:null,camera:null,autoUpdateScene:!0,preZ:!1},(function(){this.frameBuffer=new li}),{render:function(t){this._rendering=!0;var e,n=t.gl;if(this.trigger("beforerender"),this.outputs){var i=this.frameBuffer;for(var r in this.outputs){var o=this.updateParameter(r,t),a=this.outputs[r],s=this._compositor.allocateTexture(o);this._outputTextures[r]=s;var l=a.attachment||n.COLOR_ATTACHMENT0;"string"==typeof l&&(l=n[l]),i.attach(s,l)}i.bind(t);var c=t.getGLExtension("EXT_draw_buffers");if(c){var u=[];for(var l in this.outputs)l=parseInt(l),l>=n.COLOR_ATTACHMENT0&&l<=n.COLOR_ATTACHMENT0+8&&u.push(l);c.drawBuffersEXT(u)}t.saveClear(),t.clearBit=w.DEPTH_BUFFER_BIT|w.COLOR_BUFFER_BIT,e=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ),t.restoreClear(),i.unbind(t)}else e=t.render(this.scene,this.camera,!this.autoUpdateScene,this.preZ);this.trigger("afterrender",e),this._rendering=!1,this._rendered=!0}}),Qa=Ja,ts=Ya.extend((function(){return{texture:null,outputs:{color:{}}}}),(function(){}),{getOutput:function(t,e){return this.texture},beforeFrame:function(){},afterFrame:function(){}}),es=ts,ns=Ya.extend((function(){return{name:"",inputs:{},outputs:null,shader:"",inputLinks:{},outputLinks:{},pass:null,_prevOutputTextures:{},_outputTextures:{},_outputReferences:{},_rendering:!1,_rendered:!1,_compositor:null}}),(function(){var t=new hr({fragment:this.shader});this.pass=t}),{render:function(t,e){this.trigger("beforerender",t),this._rendering=!0;var n=t.gl;for(var i in this.inputLinks){var r=this.inputLinks[i],o=r.node.getOutput(t,r.pin);this.pass.setUniform(i,o)}if(this.outputs){this.pass.outputs={};var a={};for(var s in this.outputs){var l=this.updateParameter(s,t);isNaN(l.width)&&this.updateParameter(s,t);var c=this.outputs[s],u=this._compositor.allocateTexture(l);this._outputTextures[s]=u;var h=c.attachment||n.COLOR_ATTACHMENT0;"string"===typeof h&&(h=n[h]),a[h]=u}for(var h in this._compositor.getFrameBuffer().bind(t),a)this._compositor.getFrameBuffer().attach(a[h],h);this.pass.render(t),this._compositor.getFrameBuffer().updateMipmap(t)}else this.pass.outputs=null,this._compositor.getFrameBuffer().unbind(t),this.pass.render(t,e);for(var i in this.inputLinks){r=this.inputLinks[i];r.node.removeReference(r.pin)}this._rendering=!1,this._rendered=!0,this.trigger("afterrender",t)},updateParameter:function(t,e){var n,i,r=this.outputs[t],o=r.parameters,a=r._parametersCopy;if(a||(a=r._parametersCopy={}),o)for(var s in o)"width"!==s&&"height"!==s&&(a[s]=o[s]);return n="function"===typeof o.width?o.width.call(this,e):o.width,i="function"===typeof o.height?o.height.call(this,e):o.height,n=Math.ceil(n),i=Math.ceil(i),a.width===n&&a.height===i||this._outputTextures[t]&&this._outputTextures[t].dispose(e),a.width=n,a.height=i,a},setParameter:function(t,e){this.pass.setUniform(t,e)},getParameter:function(t){return this.pass.getUniform(t)},setParameters:function(t){for(var e in t)this.setParameter(e,t[e])},define:function(t,e){this.pass.material.define("fragment",t,e)},undefine:function(t){this.pass.material.undefine("fragment",t)},removeReference:function(t){if(this._outputReferences[t]--,0===this._outputReferences[t]){var e=this.outputs[t];e.keepLastFrame?(this._prevOutputTextures[t]&&this._compositor.releaseTexture(this._prevOutputTextures[t]),this._prevOutputTextures[t]=this._outputTextures[t]):this._compositor.releaseTexture(this._outputTextures[t])}},clear:function(){Ya.prototype.clear.call(this),this.pass.material.disableTexturesAll()}}),is=ns,rs="@export clay.compositor.coloradjust\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float exposure : 0.0;\nuniform float gamma : 1.0;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = clamp(tex.rgb + vec3(brightness), 0.0, 1.0);\n color = clamp( (color-vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n color = clamp( color * pow(2.0, exposure), 0.0, 1.0);\n color = clamp( pow(color, vec3(gamma)), 0.0, 1.0);\n float luminance = dot( color, w );\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.brightness\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float brightness : 0.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = tex.rgb + vec3(brightness);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.contrast\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float contrast : 1.0;\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord);\n vec3 color = (tex.rgb-vec3(0.5))*contrast+vec3(0.5);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.exposure\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float exposure : 0.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb * pow(2.0, exposure);\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.gamma\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float gamma : 1.0;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = pow(tex.rgb, vec3(gamma));\n gl_FragColor = vec4(color, tex.a);\n}\n@end\n@export clay.compositor.saturation\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float saturation : 1.0;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n vec3 color = tex.rgb;\n float luminance = dot(color, w);\n color = mix(vec3(luminance), color, saturation);\n gl_FragColor = vec4(color, tex.a);\n}\n@end",os="@export clay.compositor.kernel.gaussian_9\nfloat gaussianKernel[9];\ngaussianKernel[0] = 0.07;\ngaussianKernel[1] = 0.09;\ngaussianKernel[2] = 0.12;\ngaussianKernel[3] = 0.14;\ngaussianKernel[4] = 0.16;\ngaussianKernel[5] = 0.14;\ngaussianKernel[6] = 0.12;\ngaussianKernel[7] = 0.09;\ngaussianKernel[8] = 0.07;\n@end\n@export clay.compositor.kernel.gaussian_13\nfloat gaussianKernel[13];\ngaussianKernel[0] = 0.02;\ngaussianKernel[1] = 0.03;\ngaussianKernel[2] = 0.06;\ngaussianKernel[3] = 0.08;\ngaussianKernel[4] = 0.11;\ngaussianKernel[5] = 0.13;\ngaussianKernel[6] = 0.14;\ngaussianKernel[7] = 0.13;\ngaussianKernel[8] = 0.11;\ngaussianKernel[9] = 0.08;\ngaussianKernel[10] = 0.06;\ngaussianKernel[11] = 0.03;\ngaussianKernel[12] = 0.02;\n@end\n@export clay.compositor.gaussian_blur\n#define SHADER_NAME gaussian_blur\nuniform sampler2D texture;varying vec2 v_Texcoord;\nuniform float blurSize : 2.0;\nuniform vec2 textureSize : [512.0, 512.0];\nuniform float blurDir : 0.0;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main (void)\n{\n @import clay.compositor.kernel.gaussian_9\n vec2 off = blurSize / textureSize;\n off *= vec2(1.0 - blurDir, blurDir);\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n for (int i = 0; i < 9; i++) {\n float w = gaussianKernel[i];\n vec4 texel = decodeHDR(clampSample(texture, v_Texcoord + float(i - 4) * off));\n sum += texel * w;\n weightAll += w;\n }\n gl_FragColor = encodeHDR(sum / max(weightAll, 0.01));\n}\n@end\n",as="@export clay.compositor.hdr.log_lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n float luminance = dot(tex.rgb, w);\n luminance = log(luminance + 0.001);\n gl_FragColor = encodeHDR(vec4(vec3(luminance), 1.0));\n}\n@end\n@export clay.compositor.hdr.lum_adaption\nvarying vec2 v_Texcoord;\nuniform sampler2D adaptedLum;\nuniform sampler2D currentLum;\nuniform float frameTime : 0.02;\n@import clay.util.rgbm\nvoid main()\n{\n float fAdaptedLum = decodeHDR(texture2D(adaptedLum, vec2(0.5, 0.5))).r;\n float fCurrentLum = exp(encodeHDR(texture2D(currentLum, vec2(0.5, 0.5))).r);\n fAdaptedLum += (fCurrentLum - fAdaptedLum) * (1.0 - pow(0.98, 30.0 * frameTime));\n gl_FragColor = encodeHDR(vec4(vec3(fAdaptedLum), 1.0));\n}\n@end\n@export clay.compositor.lum\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nconst vec3 w = vec3(0.2125, 0.7154, 0.0721);\nvoid main()\n{\n vec4 tex = texture2D( texture, v_Texcoord );\n float luminance = dot(tex.rgb, w);\n gl_FragColor = vec4(vec3(luminance), 1.0);\n}\n@end",ss="\n@export clay.compositor.lut\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform sampler2D lookup;\nvoid main()\n{\n vec4 tex = texture2D(texture, v_Texcoord);\n float blueColor = tex.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * tex.g);\n vec4 newColor1 = texture2D(lookup, texPos1);\n vec4 newColor2 = texture2D(lookup, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n gl_FragColor = vec4(newColor.rgb, tex.w);\n}\n@end",ls="@export clay.compositor.vignette\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\nuniform float darkness: 1;\nuniform float offset: 1;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = texel.rgb;\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(offset);\n gl_FragColor = encodeHDR(vec4(mix(texel.rgb, vec3(1.0 - darkness), dot(uv, uv)), texel.a));\n}\n@end",cs="@export clay.compositor.output\n#define OUTPUT_ALPHA\nvarying vec2 v_Texcoord;\nuniform sampler2D texture;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = decodeHDR(texture2D(texture, v_Texcoord));\n gl_FragColor.rgb = tex.rgb;\n#ifdef OUTPUT_ALPHA\n gl_FragColor.a = tex.a;\n#else\n gl_FragColor.a = 1.0;\n#endif\n gl_FragColor = encodeHDR(gl_FragColor);\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",us="@export clay.compositor.bright\nuniform sampler2D texture;\nuniform float threshold : 1;\nuniform float scale : 1.0;\nuniform vec2 textureSize: [512, 512];\nvarying vec2 v_Texcoord;\nconst vec3 lumWeight = vec3(0.2125, 0.7154, 0.0721);\n@import clay.util.rgbm\nvec4 median(vec4 a, vec4 b, vec4 c)\n{\n return a + b + c - min(min(a, b), c) - max(max(a, b), c);\n}\nvoid main()\n{\n vec4 texel = decodeHDR(texture2D(texture, v_Texcoord));\n#ifdef ANTI_FLICKER\n vec3 d = 1.0 / textureSize.xyx * vec3(1.0, 1.0, 0.0);\n vec4 s1 = decodeHDR(texture2D(texture, v_Texcoord - d.xz));\n vec4 s2 = decodeHDR(texture2D(texture, v_Texcoord + d.xz));\n vec4 s3 = decodeHDR(texture2D(texture, v_Texcoord - d.zy));\n vec4 s4 = decodeHDR(texture2D(texture, v_Texcoord + d.zy));\n texel = median(median(texel, s1, s2), s3, s4);\n#endif\n float lum = dot(texel.rgb , lumWeight);\n vec4 color;\n if (lum > threshold && texel.a > 0.0)\n {\n color = vec4(texel.rgb * scale, texel.a * scale);\n }\n else\n {\n color = vec4(0.0);\n }\n gl_FragColor = encodeHDR(color);\n}\n@end\n",hs="@export clay.compositor.downsample\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nfloat brightness(vec3 c)\n{\n return max(max(c.r, c.g), c.b);\n}\n@import clay.util.clamp_sample\nvoid main()\n{\n vec4 d = vec4(-1.0, -1.0, 1.0, 1.0) / textureSize.xyxy;\n#ifdef ANTI_FLICKER\n vec3 s1 = decodeHDR(clampSample(texture, v_Texcoord + d.xy)).rgb;\n vec3 s2 = decodeHDR(clampSample(texture, v_Texcoord + d.zy)).rgb;\n vec3 s3 = decodeHDR(clampSample(texture, v_Texcoord + d.xw)).rgb;\n vec3 s4 = decodeHDR(clampSample(texture, v_Texcoord + d.zw)).rgb;\n float s1w = 1.0 / (brightness(s1) + 1.0);\n float s2w = 1.0 / (brightness(s2) + 1.0);\n float s3w = 1.0 / (brightness(s3) + 1.0);\n float s4w = 1.0 / (brightness(s4) + 1.0);\n float oneDivideSum = 1.0 / (s1w + s2w + s3w + s4w);\n vec4 color = vec4(\n (s1 * s1w + s2 * s2w + s3 * s3w + s4 * s4w) * oneDivideSum,\n 1.0\n );\n#else\n vec4 color = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n color += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n color *= 0.25;\n#endif\n gl_FragColor = encodeHDR(color);\n}\n@end",fs="\n@export clay.compositor.upsample\n#define HIGH_QUALITY\nuniform sampler2D texture;\nuniform vec2 textureSize : [512, 512];\nuniform float sampleScale: 0.5;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\n@import clay.util.clamp_sample\nvoid main()\n{\n#ifdef HIGH_QUALITY\n vec4 d = vec4(1.0, 1.0, -1.0, 0.0) / textureSize.xyxy * sampleScale;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord - d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord - d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord - d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord )) * 4.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.wy)) * 2.0;\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n gl_FragColor = encodeHDR(s / 16.0);\n#else\n vec4 d = vec4(-1.0, -1.0, +1.0, +1.0) / textureSize.xyxy;\n vec4 s;\n s = decodeHDR(clampSample(texture, v_Texcoord + d.xy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zy));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.xw));\n s += decodeHDR(clampSample(texture, v_Texcoord + d.zw));\n gl_FragColor = encodeHDR(s / 4.0);\n#endif\n}\n@end",ds="@export clay.compositor.hdr.composite\n#define TONEMAPPING\nuniform sampler2D texture;\n#ifdef BLOOM_ENABLED\nuniform sampler2D bloom;\n#endif\n#ifdef LENSFLARE_ENABLED\nuniform sampler2D lensflare;\nuniform sampler2D lensdirt;\n#endif\n#ifdef LUM_ENABLED\nuniform sampler2D lum;\n#endif\n#ifdef LUT_ENABLED\nuniform sampler2D lut;\n#endif\n#ifdef COLOR_CORRECTION\nuniform float brightness : 0.0;\nuniform float contrast : 1.0;\nuniform float saturation : 1.0;\n#endif\n#ifdef VIGNETTE\nuniform float vignetteDarkness: 1.0;\nuniform float vignetteOffset: 1.0;\n#endif\nuniform float exposure : 1.0;\nuniform float bloomIntensity : 0.25;\nuniform float lensflareIntensity : 1;\nvarying vec2 v_Texcoord;\n@import clay.util.srgb\nvec3 ACESToneMapping(vec3 color)\n{\n const float A = 2.51;\n const float B = 0.03;\n const float C = 2.43;\n const float D = 0.59;\n const float E = 0.14;\n return (color * (A * color + B)) / (color * (C * color + D) + E);\n}\nfloat eyeAdaption(float fLum)\n{\n return mix(0.2, fLum, 0.5);\n}\n#ifdef LUT_ENABLED\nvec3 lutTransform(vec3 color) {\n float blueColor = color.b * 63.0;\n vec2 quad1;\n quad1.y = floor(floor(blueColor) / 8.0);\n quad1.x = floor(blueColor) - (quad1.y * 8.0);\n vec2 quad2;\n quad2.y = floor(ceil(blueColor) / 8.0);\n quad2.x = ceil(blueColor) - (quad2.y * 8.0);\n vec2 texPos1;\n texPos1.x = (quad1.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos1.y = (quad1.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec2 texPos2;\n texPos2.x = (quad2.x * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.r);\n texPos2.y = (quad2.y * 0.125) + 0.5/512.0 + ((0.125 - 1.0/512.0) * color.g);\n vec4 newColor1 = texture2D(lut, texPos1);\n vec4 newColor2 = texture2D(lut, texPos2);\n vec4 newColor = mix(newColor1, newColor2, fract(blueColor));\n return newColor.rgb;\n}\n#endif\n@import clay.util.rgbm\nvoid main()\n{\n vec4 texel = vec4(0.0);\n vec4 originalTexel = vec4(0.0);\n#ifdef TEXTURE_ENABLED\n texel = decodeHDR(texture2D(texture, v_Texcoord));\n originalTexel = texel;\n#endif\n#ifdef BLOOM_ENABLED\n vec4 bloomTexel = decodeHDR(texture2D(bloom, v_Texcoord));\n texel.rgb += bloomTexel.rgb * bloomIntensity;\n texel.a += bloomTexel.a * bloomIntensity;\n#endif\n#ifdef LENSFLARE_ENABLED\n texel += decodeHDR(texture2D(lensflare, v_Texcoord)) * texture2D(lensdirt, v_Texcoord) * lensflareIntensity;\n#endif\n texel.a = min(texel.a, 1.0);\n#ifdef LUM_ENABLED\n float fLum = texture2D(lum, vec2(0.5, 0.5)).r;\n float adaptedLumDest = 3.0 / (max(0.1, 1.0 + 10.0*eyeAdaption(fLum)));\n float exposureBias = adaptedLumDest * exposure;\n#else\n float exposureBias = exposure;\n#endif\n#ifdef TONEMAPPING\n texel.rgb *= exposureBias;\n texel.rgb = ACESToneMapping(texel.rgb);\n#endif\n texel = linearTosRGB(texel);\n#ifdef LUT_ENABLED\n texel.rgb = lutTransform(clamp(texel.rgb,vec3(0.0),vec3(1.0)));\n#endif\n#ifdef COLOR_CORRECTION\n texel.rgb = clamp(texel.rgb + vec3(brightness), 0.0, 1.0);\n texel.rgb = clamp((texel.rgb - vec3(0.5))*contrast+vec3(0.5), 0.0, 1.0);\n float lum = dot(texel.rgb, vec3(0.2125, 0.7154, 0.0721));\n texel.rgb = mix(vec3(lum), texel.rgb, saturation);\n#endif\n#ifdef VIGNETTE\n vec2 uv = (v_Texcoord - vec2(0.5)) * vec2(vignetteOffset);\n texel.rgb = mix(texel.rgb, vec3(1.0 - vignetteDarkness), dot(uv, uv));\n#endif\n gl_FragColor = encodeHDR(texel);\n#ifdef DEBUG\n #if DEBUG == 1\n gl_FragColor = encodeHDR(decodeHDR(texture2D(texture, v_Texcoord)));\n #elif DEBUG == 2\n gl_FragColor = encodeHDR(decodeHDR(texture2D(bloom, v_Texcoord)) * bloomIntensity);\n #elif DEBUG == 3\n gl_FragColor = encodeHDR(decodeHDR(texture2D(lensflare, v_Texcoord) * lensflareIntensity));\n #endif\n#endif\n if (originalTexel.a <= 0.01 && gl_FragColor.a > 1e-5) {\n gl_FragColor.a = dot(gl_FragColor.rgb, vec3(0.2125, 0.7154, 0.0721));\n }\n#ifdef PREMULTIPLY_ALPHA\n gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n}\n@end",ps="@export clay.compositor.lensflare\n#define SAMPLE_NUMBER 8\nuniform sampler2D texture;\nuniform sampler2D lenscolor;\nuniform vec2 textureSize : [512, 512];\nuniform float dispersal : 0.3;\nuniform float haloWidth : 0.4;\nuniform float distortion : 1.0;\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvec4 textureDistorted(\n in vec2 texcoord,\n in vec2 direction,\n in vec3 distortion\n) {\n return vec4(\n decodeHDR(texture2D(texture, texcoord + direction * distortion.r)).r,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.g)).g,\n decodeHDR(texture2D(texture, texcoord + direction * distortion.b)).b,\n 1.0\n );\n}\nvoid main()\n{\n vec2 texcoord = -v_Texcoord + vec2(1.0); vec2 textureOffset = 1.0 / textureSize;\n vec2 ghostVec = (vec2(0.5) - texcoord) * dispersal;\n vec2 haloVec = normalize(ghostVec) * haloWidth;\n vec3 distortion = vec3(-textureOffset.x * distortion, 0.0, textureOffset.x * distortion);\n vec4 result = vec4(0.0);\n for (int i = 0; i < SAMPLE_NUMBER; i++)\n {\n vec2 offset = fract(texcoord + ghostVec * float(i));\n float weight = length(vec2(0.5) - offset) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n }\n result *= texture2D(lenscolor, vec2(length(vec2(0.5) - texcoord)) / length(vec2(0.5)));\n float weight = length(vec2(0.5) - fract(texcoord + haloVec)) / length(vec2(0.5));\n weight = pow(1.0 - weight, 10.0);\n vec2 offset = fract(texcoord + haloVec);\n result += textureDistorted(offset, normalize(ghostVec), distortion) * weight;\n gl_FragColor = result;\n}\n@end",gs="@export clay.compositor.blend\n#define SHADER_NAME blend\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n#ifdef TEXTURE5_ENABLED\nuniform sampler2D texture5;\nuniform float weight5 : 1.0;\n#endif\n#ifdef TEXTURE6_ENABLED\nuniform sampler2D texture6;\nuniform float weight6 : 1.0;\n#endif\nvarying vec2 v_Texcoord;\n@import clay.util.rgbm\nvoid main()\n{\n vec4 tex = vec4(0.0);\n#ifdef TEXTURE1_ENABLED\n tex += decodeHDR(texture2D(texture1, v_Texcoord)) * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n tex += decodeHDR(texture2D(texture2, v_Texcoord)) * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n tex += decodeHDR(texture2D(texture3, v_Texcoord)) * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n tex += decodeHDR(texture2D(texture4, v_Texcoord)) * weight4;\n#endif\n#ifdef TEXTURE5_ENABLED\n tex += decodeHDR(texture2D(texture5, v_Texcoord)) * weight5;\n#endif\n#ifdef TEXTURE6_ENABLED\n tex += decodeHDR(texture2D(texture6, v_Texcoord)) * weight6;\n#endif\n gl_FragColor = encodeHDR(tex);\n}\n@end",ms="@export clay.compositor.fxaa\nuniform sampler2D texture;\nuniform vec4 viewport : VIEWPORT;\nvarying vec2 v_Texcoord;\n#define FXAA_REDUCE_MIN (1.0/128.0)\n#define FXAA_REDUCE_MUL (1.0/8.0)\n#define FXAA_SPAN_MAX 8.0\n@import clay.util.rgbm\nvoid main()\n{\n vec2 resolution = 1.0 / viewport.zw;\n vec3 rgbNW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbNE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, -1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSW = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( -1.0, 1.0 ) ) * resolution ) ).xyz;\n vec3 rgbSE = decodeHDR( texture2D( texture, ( gl_FragCoord.xy + vec2( 1.0, 1.0 ) ) * resolution ) ).xyz;\n vec4 rgbaM = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution ) );\n vec3 rgbM = rgbaM.xyz;\n float opacity = rgbaM.w;\n vec3 luma = vec3( 0.299, 0.587, 0.114 );\n float lumaNW = dot( rgbNW, luma );\n float lumaNE = dot( rgbNE, luma );\n float lumaSW = dot( rgbSW, luma );\n float lumaSE = dot( rgbSE, luma );\n float lumaM = dot( rgbM, luma );\n float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n vec2 dir;\n dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n dir.y = ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n dir = min( vec2( FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n dir * rcpDirMin)) * resolution;\n vec3 rgbA = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 1.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * ( 2.0 / 3.0 - 0.5 ) ) ).xyz;\n rgbA *= 0.5;\n vec3 rgbB = decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * -0.5 ) ).xyz;\n rgbB += decodeHDR( texture2D( texture, gl_FragCoord.xy * resolution + dir * 0.5 ) ).xyz;\n rgbB *= 0.25;\n rgbB += rgbA * 0.5;\n float lumaB = dot( rgbB, luma );\n if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) )\n {\n gl_FragColor = vec4( rgbA, opacity );\n }\n else {\n gl_FragColor = vec4( rgbB, opacity );\n }\n}\n@end";function vs(t){t["import"](rs),t["import"](os),t["import"](as),t["import"](ss),t["import"](ls),t["import"](cs),t["import"](us),t["import"](hs),t["import"](fs),t["import"](ds),t["import"](ps),t["import"](gs),t["import"](ms)}vs(zt);var ys=/^#source\((.*?)\)/;function _s(t,e){var n=new $a;e=e||{};var i={textures:{},parameters:{}},r=function(r,o){for(var a=0;a<t.nodes.length;a++){var s=t.nodes[a],l=bs(s,i,e);l&&n.addNode(l)}};for(var o in t.parameters){var a=t.parameters[o];i.parameters[o]=Ss(a)}return Ts(t,i,e,(function(t){i.textures=t,r()})),n}function bs(t,e,n){var i,r,o,a,s=t.type||"filter";if("filter"===s){var l=t.shader.trim(),c=ys.exec(l);if(c?i=zt.source(c[1].trim()):"#"===l.charAt(0)&&(i=e.shaders[l.substr(1)]),i||(i=l),!i)return}if(t.inputs)for(var u in r={},t.inputs)"string"===typeof t.inputs[u]?r[u]=t.inputs[u]:r[u]={node:t.inputs[u].node,pin:t.inputs[u].pin};if(t.outputs)for(var u in o={},t.outputs){var h=t.outputs[u];o[u]={},null!=h.attachment&&(o[u].attachment=h.attachment),null!=h.keepLastFrame&&(o[u].keepLastFrame=h.keepLastFrame),null!=h.outputLastFrame&&(o[u].outputLastFrame=h.outputLastFrame),h.parameters&&(o[u].parameters=Ss(h.parameters))}if(a="scene"===s?new Qa({name:t.name,scene:n.scene,camera:n.camera,outputs:o}):"texture"===s?new es({name:t.name,outputs:o}):new is({name:t.name,shader:i,inputs:r,outputs:o}),a){if(t.parameters)for(var u in t.parameters){var f=t.parameters[u];"string"===typeof f?(f=f.trim(),"#"===f.charAt(0)?f=e.textures[f.substr(1)]:a.on("beforerender",Os(u,Ms(f)))):"function"===typeof f&&a.on("beforerender",f),a.setParameter(u,f)}if(t.defines&&a.pass)for(var u in t.defines){f=t.defines[u];a.pass.material.define("fragment",u,f)}}return a}function xs(t,e){return t}function ws(t,e){return e}function Ss(t){var e={};if(!t)return e;["type","minFilter","magFilter","wrapS","wrapT","flipY","useMipmap"].forEach((function(n){var i=t[n];null!=i&&("string"===typeof i&&(i=We[i]),e[n]=i)}));var n=t.scale||1;return["width","height"].forEach((function(i){if(null!=t[i]){var r=t[i];"string"===typeof r?(r=r.trim(),e[i]=Cs(i,Ms(r),n)):e[i]=r}})),e.width||(e.width=xs),e.height||(e.height=ws),null!=t.useMipmap&&(e.useMipmap=t.useMipmap),e}function Ts(t,e,n,i){if(t.textures){var r={},o=0,a=!1,s=n.textureRootPath;g.each(t.textures,(function(t,e){var n,l=t.path,c=Ss(t.parameters);if(Array.isArray(l)&&6===l.length)s&&(l=l.map((function(t){return g.relative2absolute(t,s)}))),n=new qn(c);else{if("string"!==typeof l)return;s&&(l=g.relative2absolute(l,s)),n=new tn(c)}n.load(l),o++,n.once("success",(function(){r[e]=n,o--,0===o&&(i(r),a=!0)}))})),0!==o||a||i(r)}else i({})}function Os(t,e){return function(n){var i=n.getDevicePixelRatio(),r=n.getWidth(),o=n.getHeight(),a=e(r,o,i);this.setParameter(t,a)}}function Cs(t,e,n){return n=n||1,function(t){var i=t.getDevicePixelRatio(),r=t.getWidth()*n,o=t.getHeight()*n;return e(r,o,i)}}function Ms(t){var e=/^expr\((.*)\)$/.exec(t);if(e)try{var n=new Function("width","height","dpr","return "+e[1]);return n(1,1),n}catch(i){throw new Error("Invalid expression.")}}var As=_s,Ds=As;function Es(t,e){var n=0,i=1/e,r=t;while(r>0)n+=i*(r%e),r=Math.floor(r/e),i/=e;return n}var Is=Es,Ps="@export ecgl.ssao.estimate\n\nuniform sampler2D depthTex;\n\nuniform sampler2D normalTex;\n\nuniform sampler2D noiseTex;\n\nuniform vec2 depthTexSize;\n\nuniform vec2 noiseTexSize;\n\nuniform mat4 projection;\n\nuniform mat4 projectionInv;\n\nuniform mat4 viewInverseTranspose;\n\nuniform vec3 kernel[KERNEL_SIZE];\n\nuniform float radius : 1;\n\nuniform float power : 1;\n\nuniform float bias: 1e-2;\n\nuniform float intensity: 1.0;\n\nvarying vec2 v_Texcoord;\n\nfloat ssaoEstimator(in vec3 originPos, in mat3 kernelBasis) {\n float occlusion = 0.0;\n\n for (int i = 0; i < KERNEL_SIZE; i++) {\n vec3 samplePos = kernel[i];\n#ifdef NORMALTEX_ENABLED\n samplePos = kernelBasis * samplePos;\n#endif\n samplePos = samplePos * radius + originPos;\n\n vec4 texCoord = projection * vec4(samplePos, 1.0);\n texCoord.xy /= texCoord.w;\n\n vec4 depthTexel = texture2D(depthTex, texCoord.xy * 0.5 + 0.5);\n\n float sampleDepth = depthTexel.r * 2.0 - 1.0;\n if (projection[3][3] == 0.0) {\n sampleDepth = projection[3][2] / (sampleDepth * projection[2][3] - projection[2][2]);\n }\n else {\n sampleDepth = (sampleDepth - projection[3][2]) / projection[2][2];\n }\n \n float rangeCheck = smoothstep(0.0, 1.0, radius / abs(originPos.z - sampleDepth));\n occlusion += rangeCheck * step(samplePos.z, sampleDepth - bias);\n }\n#ifdef NORMALTEX_ENABLED\n occlusion = 1.0 - occlusion / float(KERNEL_SIZE);\n#else\n occlusion = 1.0 - clamp((occlusion / float(KERNEL_SIZE) - 0.6) * 2.5, 0.0, 1.0);\n#endif\n return pow(occlusion, power);\n}\n\nvoid main()\n{\n\n vec4 depthTexel = texture2D(depthTex, v_Texcoord);\n\n#ifdef NORMALTEX_ENABLED\n vec4 tex = texture2D(normalTex, v_Texcoord);\n if (dot(tex.rgb, tex.rgb) == 0.0) {\n gl_FragColor = vec4(1.0);\n return;\n }\n vec3 N = tex.rgb * 2.0 - 1.0;\n N = (viewInverseTranspose * vec4(N, 0.0)).xyz;\n\n vec2 noiseTexCoord = depthTexSize / vec2(noiseTexSize) * v_Texcoord;\n vec3 rvec = texture2D(noiseTex, noiseTexCoord).rgb * 2.0 - 1.0;\n vec3 T = normalize(rvec - N * dot(rvec, N));\n vec3 BT = normalize(cross(N, T));\n mat3 kernelBasis = mat3(T, BT, N);\n#else\n if (depthTexel.r > 0.99999) {\n gl_FragColor = vec4(1.0);\n return;\n }\n mat3 kernelBasis;\n#endif\n\n float z = depthTexel.r * 2.0 - 1.0;\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * projectedPos;\n\n vec3 position = p4.xyz / p4.w;\n\n float ao = ssaoEstimator(position, kernelBasis);\n ao = clamp(1.0 - (1.0 - ao) * intensity, 0.0, 1.0);\n gl_FragColor = vec4(vec3(ao), 1.0);\n}\n\n@end\n\n\n@export ecgl.ssao.blur\n#define SHADER_NAME SSAO_BLUR\n\nuniform sampler2D ssaoTexture;\n\n#ifdef NORMALTEX_ENABLED\nuniform sampler2D normalTex;\n#endif\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\nuniform int direction: 0.0;\n\n#ifdef DEPTHTEX_ENABLED\nuniform sampler2D depthTex;\nuniform mat4 projection;\nuniform float depthRange : 0.5;\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(depthTex, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n#endif\n\nvoid main()\n{\n float kernel[5];\n kernel[0] = 0.122581;\n kernel[1] = 0.233062;\n kernel[2] = 0.288713;\n kernel[3] = 0.233062;\n kernel[4] = 0.122581;\n\n vec2 off = vec2(0.0);\n if (direction == 0) {\n off[0] = blurSize / textureSize.x;\n }\n else {\n off[1] = blurSize / textureSize.y;\n }\n\n vec2 coord = v_Texcoord;\n\n float sum = 0.0;\n float weightAll = 0.0;\n\n#ifdef NORMALTEX_ENABLED\n vec3 centerNormal = texture2D(normalTex, v_Texcoord).rgb * 2.0 - 1.0;\n#endif\n#if defined(DEPTHTEX_ENABLED)\n float centerDepth = getLinearDepth(v_Texcoord);\n#endif\n\n for (int i = 0; i < 5; i++) {\n vec2 coord = clamp(v_Texcoord + vec2(float(i) - 2.0) * off, vec2(0.0), vec2(1.0));\n\n float w = kernel[i];\n#ifdef NORMALTEX_ENABLED\n vec3 normal = texture2D(normalTex, coord).rgb * 2.0 - 1.0;\n w *= clamp(dot(normal, centerNormal), 0.0, 1.0);\n#endif\n#ifdef DEPTHTEX_ENABLED\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(centerDepth - d) / depthRange, 0.0, 1.0));\n#endif\n\n weightAll += w;\n sum += texture2D(ssaoTexture, coord).r * w;\n }\n\n gl_FragColor = vec4(vec3(sum / weightAll), 1.0);\n}\n\n@end\n";function Ls(t){for(var e=new Uint8Array(t*t*4),n=0,i=new fe,r=0;r<t;r++)for(var o=0;o<t;o++)i.set(2*Math.random()-1,2*Math.random()-1,0).normalize(),e[n++]=255*(.5*i.x+.5),e[n++]=255*(.5*i.y+.5),e[n++]=0,e[n++]=255;return e}function ks(t){return new tn({pixels:Ls(t),wrapS:We.REPEAT,wrapT:We.REPEAT,width:t,height:t})}function js(t,e,n){var i=new Float32Array(3*t);e=e||0;for(var r=0;r<t;r++){var o=Is(r+e,2)*(n?1:2)*Math.PI,a=Is(r+e,3)*Math.PI,s=Math.random(),l=Math.cos(o)*Math.sin(a)*s,c=Math.cos(a)*s,u=Math.sin(o)*Math.sin(a)*s;i[3*r]=l,i[3*r+1]=c,i[3*r+2]=u}return i}function Rs(t){t=t||{},this._ssaoPass=new hr({fragment:zt.source("ecgl.ssao.estimate")}),this._blurPass=new hr({fragment:zt.source("ecgl.ssao.blur")}),this._framebuffer=new li({depthBuffer:!1}),this._ssaoTexture=new tn,this._blurTexture=new tn,this._blurTexture2=new tn,this._depthTex=t.depthTexture,this._normalTex=t.normalTexture,this.setNoiseSize(4),this.setKernelSize(t.kernelSize||12),null!=t.radius&&this.setParameter("radius",t.radius),null!=t.power&&this.setParameter("power",t.power),this._normalTex||(this._ssaoPass.material.disableTexture("normalTex"),this._blurPass.material.disableTexture("normalTex")),this._depthTex||this._blurPass.material.disableTexture("depthTex"),this._blurPass.material.setUniform("normalTex",this._normalTex),this._blurPass.material.setUniform("depthTex",this._depthTex)}zt.import(Ps),Rs.prototype.setDepthTexture=function(t){this._depthTex=t},Rs.prototype.setNormalTexture=function(t){this._normalTex=t,this._ssaoPass.material[t?"enableTexture":"disableTexture"]("normalTex"),this.setKernelSize(this._kernelSize)},Rs.prototype.update=function(t,e,n){var i=t.getWidth(),r=t.getHeight(),o=this._ssaoPass,a=this._blurPass;o.setUniform("kernel",this._kernels[n%this._kernels.length]),o.setUniform("depthTex",this._depthTex),null!=this._normalTex&&o.setUniform("normalTex",this._normalTex),o.setUniform("depthTexSize",[this._depthTex.width,this._depthTex.height]);var s=new Oe;Oe.transpose(s,e.worldTransform),o.setUniform("projection",e.projectionMatrix.array),o.setUniform("projectionInv",e.invProjectionMatrix.array),o.setUniform("viewInverseTranspose",s.array);var l=this._ssaoTexture,c=this._blurTexture,u=this._blurTexture2;l.width=i/2,l.height=r/2,c.width=i,c.height=r,u.width=i,u.height=r,this._framebuffer.attach(l),this._framebuffer.bind(t),t.gl.clearColor(1,1,1,1),t.gl.clear(t.gl.COLOR_BUFFER_BIT),o.render(t),a.setUniform("textureSize",[i/2,r/2]),a.setUniform("projection",e.projectionMatrix.array),this._framebuffer.attach(c),a.setUniform("direction",0),a.setUniform("ssaoTexture",l),a.render(t),this._framebuffer.attach(u),a.setUniform("textureSize",[i,r]),a.setUniform("direction",1),a.setUniform("ssaoTexture",c),a.render(t),this._framebuffer.unbind(t);var h=t.clearColor;t.gl.clearColor(h[0],h[1],h[2],h[3])},Rs.prototype.getTargetTexture=function(){return this._blurTexture2},Rs.prototype.setParameter=function(t,e){"noiseTexSize"===t?this.setNoiseSize(e):"kernelSize"===t?this.setKernelSize(e):"intensity"===t?this._ssaoPass.material.set("intensity",e):this._ssaoPass.setUniform(t,e)},Rs.prototype.setKernelSize=function(t){this._kernelSize=t,this._ssaoPass.material.define("fragment","KERNEL_SIZE",t),this._kernels=this._kernels||[];for(var e=0;e<30;e++)this._kernels[e]=js(t,e*t,!!this._normalTex)},Rs.prototype.setNoiseSize=function(t){var e=this._ssaoPass.getUniform("noiseTex");e?(e.data=Ls(t),e.width=e.height=t,e.dirty()):(e=ks(t),this._ssaoPass.setUniform("noiseTex",ks(t))),this._ssaoPass.setUniform("noiseTexSize",[t,t])},Rs.prototype.dispose=function(t){this._blurTexture.dispose(t),this._ssaoTexture.dispose(t),this._blurTexture2.dispose(t)};var Ns=Rs,Bs="@export ecgl.ssr.main\n\n#define SHADER_NAME SSR\n#define MAX_ITERATION 20;\n#define SAMPLE_PER_FRAME 5;\n#define TOTAL_SAMPLES 128;\n\nuniform sampler2D sourceTexture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform sampler2D gBufferTexture3;\nuniform samplerCube specularCubemap;\nuniform float specularIntensity: 1;\n\nuniform mat4 projection;\nuniform mat4 projectionInv;\nuniform mat4 toViewSpace;\nuniform mat4 toWorldSpace;\n\nuniform float maxRayDistance: 200;\n\nuniform float pixelStride: 16;\nuniform float pixelStrideZCutoff: 50; \nuniform float screenEdgeFadeStart: 0.9; \nuniform float eyeFadeStart : 0.2; uniform float eyeFadeEnd: 0.8; \nuniform float minGlossiness: 0.2; uniform float zThicknessThreshold: 1;\n\nuniform float nearZ;\nuniform vec2 viewportSize : VIEWPORT_SIZE;\n\nuniform float jitterOffset: 0;\n\nvarying vec2 v_Texcoord;\n\n#ifdef DEPTH_DECODE\n@import clay.util.decode_float\n#endif\n\n#ifdef PHYSICALLY_CORRECT\nuniform sampler2D normalDistribution;\nuniform float sampleOffset: 0;\nuniform vec2 normalDistributionSize;\n\nvec3 transformNormal(vec3 H, vec3 N) {\n vec3 upVector = N.y > 0.999 ? vec3(1.0, 0.0, 0.0) : vec3(0.0, 1.0, 0.0);\n vec3 tangentX = normalize(cross(N, upVector));\n vec3 tangentZ = cross(N, tangentX);\n return normalize(tangentX * H.x + N * H.y + tangentZ * H.z);\n}\nvec3 importanceSampleNormalGGX(float i, float roughness, vec3 N) {\n float p = fract((i + sampleOffset) / float(TOTAL_SAMPLES));\n vec3 H = texture2D(normalDistribution,vec2(roughness, p)).rgb;\n return transformNormal(H, N);\n}\nfloat G_Smith(float g, float ndv, float ndl) {\n float roughness = 1.0 - g;\n float k = roughness * roughness / 2.0;\n float G1V = ndv / (ndv * (1.0 - k) + k);\n float G1L = ndl / (ndl * (1.0 - k) + k);\n return G1L * G1V;\n}\nvec3 F_Schlick(float ndv, vec3 spec) {\n return spec + (1.0 - spec) * pow(1.0 - ndv, 5.0);\n}\n#endif\n\nfloat fetchDepth(sampler2D depthTexture, vec2 uv)\n{\n vec4 depthTexel = texture2D(depthTexture, uv);\n return depthTexel.r * 2.0 - 1.0;\n}\n\nfloat linearDepth(float depth)\n{\n if (projection[3][3] == 0.0) {\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n }\n else {\n return (depth - projection[3][2]) / projection[2][2];\n }\n}\n\nbool rayIntersectDepth(float rayZNear, float rayZFar, vec2 hitPixel)\n{\n if (rayZFar > rayZNear)\n {\n float t = rayZFar; rayZFar = rayZNear; rayZNear = t;\n }\n float cameraZ = linearDepth(fetchDepth(gBufferTexture2, hitPixel));\n return rayZFar <= cameraZ && rayZNear >= cameraZ - zThicknessThreshold;\n}\n\n\nbool traceScreenSpaceRay(\n vec3 rayOrigin, vec3 rayDir, float jitter,\n out vec2 hitPixel, out vec3 hitPoint, out float iterationCount\n)\n{\n float rayLength = ((rayOrigin.z + rayDir.z * maxRayDistance) > -nearZ)\n ? (-nearZ - rayOrigin.z) / rayDir.z : maxRayDistance;\n\n vec3 rayEnd = rayOrigin + rayDir * rayLength;\n\n vec4 H0 = projection * vec4(rayOrigin, 1.0);\n vec4 H1 = projection * vec4(rayEnd, 1.0);\n\n float k0 = 1.0 / H0.w, k1 = 1.0 / H1.w;\n\n vec3 Q0 = rayOrigin * k0, Q1 = rayEnd * k1;\n\n vec2 P0 = (H0.xy * k0 * 0.5 + 0.5) * viewportSize;\n vec2 P1 = (H1.xy * k1 * 0.5 + 0.5) * viewportSize;\n\n P1 += dot(P1 - P0, P1 - P0) < 0.0001 ? 0.01 : 0.0;\n vec2 delta = P1 - P0;\n\n bool permute = false;\n if (abs(delta.x) < abs(delta.y)) {\n permute = true;\n delta = delta.yx;\n P0 = P0.yx;\n P1 = P1.yx;\n }\n float stepDir = sign(delta.x);\n float invdx = stepDir / delta.x;\n\n vec3 dQ = (Q1 - Q0) * invdx;\n float dk = (k1 - k0) * invdx;\n\n vec2 dP = vec2(stepDir, delta.y * invdx);\n\n float strideScaler = 1.0 - min(1.0, -rayOrigin.z / pixelStrideZCutoff);\n float pixStride = 1.0 + strideScaler * pixelStride;\n\n dP *= pixStride; dQ *= pixStride; dk *= pixStride;\n\n vec4 pqk = vec4(P0, Q0.z, k0);\n vec4 dPQK = vec4(dP, dQ.z, dk);\n\n pqk += dPQK * jitter;\n float rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n float rayZNear;\n\n bool intersect = false;\n\n vec2 texelSize = 1.0 / viewportSize;\n\n iterationCount = 0.0;\n\n for (int i = 0; i < MAX_ITERATION; i++)\n {\n pqk += dPQK;\n\n rayZNear = rayZFar;\n rayZFar = (dPQK.z * 0.5 + pqk.z) / (dPQK.w * 0.5 + pqk.w);\n\n hitPixel = permute ? pqk.yx : pqk.xy;\n hitPixel *= texelSize;\n\n intersect = rayIntersectDepth(rayZNear, rayZFar, hitPixel);\n\n iterationCount += 1.0;\n\n dPQK *= 1.2;\n\n if (intersect) {\n break;\n }\n }\n\n Q0.xy += dQ.xy * iterationCount;\n Q0.z = pqk.z;\n hitPoint = Q0 / pqk.w;\n\n return intersect;\n}\n\nfloat calculateAlpha(\n float iterationCount, float reflectivity,\n vec2 hitPixel, vec3 hitPoint, float dist, vec3 rayDir\n)\n{\n float alpha = clamp(reflectivity, 0.0, 1.0);\n alpha *= 1.0 - (iterationCount / float(MAX_ITERATION));\n vec2 hitPixelNDC = hitPixel * 2.0 - 1.0;\n float maxDimension = min(1.0, max(abs(hitPixelNDC.x), abs(hitPixelNDC.y)));\n alpha *= 1.0 - max(0.0, maxDimension - screenEdgeFadeStart) / (1.0 - screenEdgeFadeStart);\n\n float _eyeFadeStart = eyeFadeStart;\n float _eyeFadeEnd = eyeFadeEnd;\n if (_eyeFadeStart > _eyeFadeEnd) {\n float tmp = _eyeFadeEnd;\n _eyeFadeEnd = _eyeFadeStart;\n _eyeFadeStart = tmp;\n }\n\n float eyeDir = clamp(rayDir.z, _eyeFadeStart, _eyeFadeEnd);\n alpha *= 1.0 - (eyeDir - _eyeFadeStart) / (_eyeFadeEnd - _eyeFadeStart);\n\n alpha *= 1.0 - clamp(dist / maxRayDistance, 0.0, 1.0);\n\n return alpha;\n}\n\n@import clay.util.rand\n\n@import clay.util.rgbm\n\nvoid main()\n{\n vec4 normalAndGloss = texture2D(gBufferTexture1, v_Texcoord);\n\n if (dot(normalAndGloss.rgb, vec3(1.0)) == 0.0) {\n discard;\n }\n\n float g = normalAndGloss.a;\n#if !defined(PHYSICALLY_CORRECT)\n if (g <= minGlossiness) {\n discard;\n }\n#endif\n\n float reflectivity = (g - minGlossiness) / (1.0 - minGlossiness);\n\n vec3 N = normalize(normalAndGloss.rgb * 2.0 - 1.0);\n N = normalize((toViewSpace * vec4(N, 0.0)).xyz);\n\n vec4 projectedPos = vec4(v_Texcoord * 2.0 - 1.0, fetchDepth(gBufferTexture2, v_Texcoord), 1.0);\n vec4 pos = projectionInv * projectedPos;\n vec3 rayOrigin = pos.xyz / pos.w;\n vec3 V = -normalize(rayOrigin);\n\n float ndv = clamp(dot(N, V), 0.0, 1.0);\n float iterationCount;\n float jitter = rand(fract(v_Texcoord + jitterOffset));\n\n#ifdef PHYSICALLY_CORRECT\n vec4 color = vec4(vec3(0.0), 1.0);\n vec4 albedoMetalness = texture2D(gBufferTexture3, v_Texcoord);\n vec3 albedo = albedoMetalness.rgb;\n float m = albedoMetalness.a;\n vec3 diffuseColor = albedo * (1.0 - m);\n vec3 spec = mix(vec3(0.04), albedo, m);\n\n float jitter2 = rand(fract(v_Texcoord)) * float(TOTAL_SAMPLES);\n\n for (int i = 0; i < SAMPLE_PER_FRAME; i++) {\n vec3 H = importanceSampleNormalGGX(float(i) + jitter2, 1.0 - g, N);\n vec3 rayDir = normalize(reflect(-V, H));\n#else\n vec3 rayDir = normalize(reflect(-V, N));\n#endif\n vec2 hitPixel;\n vec3 hitPoint;\n\n bool intersect = traceScreenSpaceRay(rayOrigin, rayDir, jitter, hitPixel, hitPoint, iterationCount);\n\n float dist = distance(rayOrigin, hitPoint);\n\n vec3 hitNormal = texture2D(gBufferTexture1, hitPixel).rgb * 2.0 - 1.0;\n hitNormal = normalize((toViewSpace * vec4(hitNormal, 0.0)).xyz);\n#ifdef PHYSICALLY_CORRECT\n float ndl = clamp(dot(N, rayDir), 0.0, 1.0);\n float vdh = clamp(dot(V, H), 0.0, 1.0);\n float ndh = clamp(dot(N, H), 0.0, 1.0);\n vec3 litTexel = vec3(0.0);\n if (dot(hitNormal, rayDir) < 0.0 && intersect) {\n litTexel = texture2D(sourceTexture, hitPixel).rgb;\n litTexel *= pow(clamp(1.0 - dist / 200.0, 0.0, 1.0), 3.0);\n\n }\n else {\n #ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n litTexel = RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, 0.0), 8.12).rgb * specularIntensity;\n#endif\n }\n color.rgb += ndl * litTexel * (\n F_Schlick(ndl, spec) * G_Smith(g, ndv, ndl) * vdh / (ndh * ndv + 0.001)\n );\n }\n color.rgb /= float(SAMPLE_PER_FRAME);\n#else\n #if !defined(SPECULARCUBEMAP_ENABLED)\n if (dot(hitNormal, rayDir) >= 0.0) {\n discard;\n }\n if (!intersect) {\n discard;\n }\n#endif\n float alpha = clamp(calculateAlpha(iterationCount, reflectivity, hitPixel, hitPoint, dist, rayDir), 0.0, 1.0);\n vec4 color = texture2D(sourceTexture, hitPixel);\n color.rgb *= alpha;\n\n#ifdef SPECULARCUBEMAP_ENABLED\n vec3 rayDirW = normalize(toWorldSpace * vec4(rayDir, 0.0)).rgb;\n alpha = alpha * (intersect ? 1.0 : 0.0);\n float bias = (1.0 -g) * 5.0;\n color.rgb += (1.0 - alpha)\n * RGBMDecode(textureCubeLodEXT(specularCubemap, rayDirW, bias), 8.12).rgb\n * specularIntensity;\n#endif\n\n#endif\n\n gl_FragColor = encodeHDR(color);\n}\n@end\n\n@export ecgl.ssr.blur\n\nuniform sampler2D texture;\nuniform sampler2D gBufferTexture1;\nuniform sampler2D gBufferTexture2;\nuniform mat4 projection;\nuniform float depthRange : 0.05;\n\nvarying vec2 v_Texcoord;\n\nuniform vec2 textureSize;\nuniform float blurSize : 1.0;\n\n#ifdef BLEND\n #ifdef SSAOTEX_ENABLED\nuniform sampler2D ssaoTex;\n #endif\nuniform sampler2D sourceTexture;\n#endif\n\nfloat getLinearDepth(vec2 coord)\n{\n float depth = texture2D(gBufferTexture2, coord).r * 2.0 - 1.0;\n return projection[3][2] / (depth * projection[2][3] - projection[2][2]);\n}\n\n@import clay.util.rgbm\n\n\nvoid main()\n{\n @import clay.compositor.kernel.gaussian_9\n\n vec4 centerNTexel = texture2D(gBufferTexture1, v_Texcoord);\n float g = centerNTexel.a;\n float maxBlurSize = clamp(1.0 - g, 0.0, 1.0) * blurSize;\n#ifdef VERTICAL\n vec2 off = vec2(0.0, maxBlurSize / textureSize.y);\n#else\n vec2 off = vec2(maxBlurSize / textureSize.x, 0.0);\n#endif\n\n vec2 coord = v_Texcoord;\n\n vec4 sum = vec4(0.0);\n float weightAll = 0.0;\n\n vec3 cN = centerNTexel.rgb * 2.0 - 1.0;\n float cD = getLinearDepth(v_Texcoord);\n for (int i = 0; i < 9; i++) {\n vec2 coord = clamp((float(i) - 4.0) * off + v_Texcoord, vec2(0.0), vec2(1.0));\n float w = gaussianKernel[i]\n * clamp(dot(cN, texture2D(gBufferTexture1, coord).rgb * 2.0 - 1.0), 0.0, 1.0);\n float d = getLinearDepth(coord);\n w *= (1.0 - smoothstep(abs(cD - d) / depthRange, 0.0, 1.0));\n\n weightAll += w;\n sum += decodeHDR(texture2D(texture, coord)) * w;\n }\n\n#ifdef BLEND\n float aoFactor = 1.0;\n #ifdef SSAOTEX_ENABLED\n aoFactor = texture2D(ssaoTex, v_Texcoord).r;\n #endif\n gl_FragColor = encodeHDR(\n sum / weightAll * aoFactor + decodeHDR(texture2D(sourceTexture, v_Texcoord))\n );\n#else\n gl_FragColor = encodeHDR(sum / weightAll);\n#endif\n}\n\n@end";function Fs(t){t=t||{},this._ssrPass=new hr({fragment:zt.source("ecgl.ssr.main"),clearColor:[0,0,0,0]}),this._blurPass1=new hr({fragment:zt.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blurPass2=new hr({fragment:zt.source("ecgl.ssr.blur"),clearColor:[0,0,0,0]}),this._blendPass=new hr({fragment:zt.source("clay.compositor.blend")}),this._blendPass.material.disableTexturesAll(),this._blendPass.material.enableTexture(["texture1","texture2"]),this._ssrPass.setUniform("gBufferTexture1",t.normalTexture),this._ssrPass.setUniform("gBufferTexture2",t.depthTexture),this._blurPass1.setUniform("gBufferTexture1",t.normalTexture),this._blurPass1.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.setUniform("gBufferTexture1",t.normalTexture),this._blurPass2.setUniform("gBufferTexture2",t.depthTexture),this._blurPass2.material.define("fragment","VERTICAL"),this._blurPass2.material.define("fragment","BLEND"),this._ssrTexture=new tn({type:We.HALF_FLOAT}),this._texture2=new tn({type:We.HALF_FLOAT}),this._texture3=new tn({type:We.HALF_FLOAT}),this._prevTexture=new tn({type:We.HALF_FLOAT}),this._currentTexture=new tn({type:We.HALF_FLOAT}),this._frameBuffer=new li({depthBuffer:!1}),this._normalDistribution=null,this._totalSamples=256,this._samplePerFrame=4,this._ssrPass.material.define("fragment","SAMPLE_PER_FRAME",this._samplePerFrame),this._ssrPass.material.define("fragment","TOTAL_SAMPLES",this._totalSamples),this._downScale=1}zt.import(Bs),Fs.prototype.setAmbientCubemap=function(t,e){this._ssrPass.material.set("specularCubemap",t),this._ssrPass.material.set("specularIntensity",e);var n=t&&e;this._ssrPass.material[n?"enableTexture":"disableTexture"]("specularCubemap")},Fs.prototype.update=function(t,e,n,i){var r=t.getWidth(),o=t.getHeight(),a=this._ssrTexture,s=this._texture2,l=this._texture3;a.width=this._prevTexture.width=this._currentTexture.width=r/this._downScale,a.height=this._prevTexture.height=this._currentTexture.height=o/this._downScale,s.width=l.width=r,s.height=l.height=o;var c=this._frameBuffer,u=this._ssrPass,h=this._blurPass1,f=this._blurPass2,d=this._blendPass,p=new Oe,g=new Oe;Oe.transpose(p,e.worldTransform),Oe.transpose(g,e.viewMatrix),u.setUniform("sourceTexture",n),u.setUniform("projection",e.projectionMatrix.array),u.setUniform("projectionInv",e.invProjectionMatrix.array),u.setUniform("toViewSpace",p.array),u.setUniform("toWorldSpace",g.array),u.setUniform("nearZ",e.near);var m=i/this._totalSamples*this._samplePerFrame;if(u.setUniform("jitterOffset",m),u.setUniform("sampleOffset",i*this._samplePerFrame),h.setUniform("textureSize",[a.width,a.height]),f.setUniform("textureSize",[r,o]),f.setUniform("sourceTexture",n),h.setUniform("projection",e.projectionMatrix.array),f.setUniform("projection",e.projectionMatrix.array),c.attach(a),c.bind(t),u.render(t),this._physicallyCorrect&&(c.attach(this._currentTexture),d.setUniform("texture1",this._prevTexture),d.setUniform("texture2",a),d.material.set({weight1:i>=1?.95:0,weight2:i>=1?.05:1}),d.render(t)),c.attach(s),h.setUniform("texture",this._physicallyCorrect?this._currentTexture:a),h.render(t),c.attach(l),f.setUniform("texture",s),f.render(t),c.unbind(t),this._physicallyCorrect){var v=this._prevTexture;this._prevTexture=this._currentTexture,this._currentTexture=v}},Fs.prototype.getTargetTexture=function(){return this._texture3},Fs.prototype.setParameter=function(t,e){"maxIteration"===t?this._ssrPass.material.define("fragment","MAX_ITERATION",e):this._ssrPass.setUniform(t,e)},Fs.prototype.setPhysicallyCorrect=function(t){t?(this._normalDistribution||(this._normalDistribution=mr.generateNormalDistribution(64,this._totalSamples)),this._ssrPass.material.define("fragment","PHYSICALLY_CORRECT"),this._ssrPass.material.set("normalDistribution",this._normalDistribution),this._ssrPass.material.set("normalDistributionSize",[64,this._totalSamples])):this._ssrPass.material.undefine("fragment","PHYSICALLY_CORRECT"),this._physicallyCorrect=t},Fs.prototype.setSSAOTexture=function(t){var e=this._blurPass2;t?(e.material.enableTexture("ssaoTex"),e.material.set("ssaoTex",t)):e.material.disableTexture("ssaoTex")},Fs.prototype.isFinished=function(t){return!this._physicallyCorrect||t>this._totalSamples/this._samplePerFrame},Fs.prototype.dispose=function(t){this._ssrTexture.dispose(t),this._texture2.dispose(t),this._texture3.dispose(t),this._prevTexture.dispose(t),this._currentTexture.dispose(t),this._frameBuffer.dispose(t)};var zs=Fs,Vs=[0,0,-.321585265978,-.154972575841,.458126042375,.188473391593,.842080129861,.527766490688,.147304551086,-.659453822776,-.331943915203,-.940619700594,.0479226680259,.54812163202,.701581552186,-.709825561388,-.295436780218,.940589268233,-.901489676764,.237713156085,.973570876096,-.109899459384,-.866792314779,-.451805525005,.330975007087,.800048655954,-.344275183665,.381779221166,-.386139432542,-.437418421534,-.576478634965,-.0148463392551,.385798197415,-.262426961053,-.666302061145,.682427250835,-.628010632582,-.732836215494,.10163141741,-.987658134403,.711995289051,-.320024291314,.0296005138058,.950296523438,.0130612307608,-.351024443122,-.879596633704,-.10478487883,.435712737232,.504254490347,.779203817497,.206477676721,.388264289969,-.896736162545,-.153106280781,-.629203242522,-.245517550697,.657969239148,.126830499058,.26862328493,-.634888119007,-.302301223431,.617074219636,.779817204925],Hs="@export ecgl.normal.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\n@import ecgl.common.normalMap.vertexHeader\n\n@import ecgl.common.vertexAnimation.header\n\nvoid main()\n{\n\n @import ecgl.common.vertexAnimation.main\n\n @import ecgl.common.uv.main\n\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n v_WorldPosition = (world * vec4(pos, 1.0)).xyz;\n\n @import ecgl.common.normalMap.vertexMain\n\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n\n}\n\n\n@end\n\n\n@export ecgl.normal.fragment\n\n#define ROUGHNESS_CHANEL 0\n\nuniform bool useBumpMap;\nuniform bool useRoughnessMap;\nuniform bool doubleSide;\nuniform float roughness;\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform mat4 viewInverse : VIEWINVERSE;\n\n@import ecgl.common.normalMap.fragmentHeader\n@import ecgl.common.bumpMap.header\n\nuniform sampler2D roughnessMap;\n\nvoid main()\n{\n vec3 N = v_Normal;\n \n bool flipNormal = false;\n if (doubleSide) {\n vec3 eyePos = viewInverse[3].xyz;\n vec3 V = normalize(eyePos - v_WorldPosition);\n\n if (dot(N, V) < 0.0) {\n flipNormal = true;\n }\n }\n\n @import ecgl.common.normalMap.fragmentMain\n\n if (useBumpMap) {\n N = bumpNormal(v_WorldPosition, v_Normal, N);\n }\n\n float g = 1.0 - roughness;\n\n if (useRoughnessMap) {\n float g2 = 1.0 - texture2D(roughnessMap, v_DetailTexcoord)[ROUGHNESS_CHANEL];\n g = clamp(g2 + (g - 0.5) * 2.0, 0.0, 1.0);\n }\n\n if (flipNormal) {\n N = -N;\n }\n\n gl_FragColor.rgb = (N.xyz + 1.0) * 0.5;\n gl_FragColor.a = g;\n}\n@end";function Gs(t,e,n,i,r){var o=t.gl;e.setUniform(o,"1i",n,r),o.activeTexture(o.TEXTURE0+r),i.isRenderable()?i.bind(t):i.unbind(t)}function Us(t,e,n,i,r){var o,a,s,l,c=t.gl;return function(r,u,h){if(!l||l.material!==r.material){var f=r.material,d=r.__program,p=f.get("roughness");null==p&&(p=1);var g=f.get("normalMap")||e,m=f.get("roughnessMap"),v=f.get("bumpMap"),y=f.get("uvRepeat"),_=f.get("uvOffset"),b=f.get("detailUvRepeat"),x=f.get("detailUvOffset"),w=!!v&&f.isTextureEnabled("bumpMap"),S=!!m&&f.isTextureEnabled("roughnessMap"),T=f.isDefined("fragment","DOUBLE_SIDED");v=v||n,m=m||i,h!==u?(u.set("normalMap",g),u.set("bumpMap",v),u.set("roughnessMap",m),u.set("useBumpMap",w),u.set("useRoughnessMap",S),u.set("doubleSide",T),null!=y&&u.set("uvRepeat",y),null!=_&&u.set("uvOffset",_),null!=b&&u.set("detailUvRepeat",b),null!=x&&u.set("detailUvOffset",x),u.set("roughness",p)):(d.setUniform(c,"1f","roughness",p),o!==g&&Gs(t,d,"normalMap",g,0),a!==v&&v&&Gs(t,d,"bumpMap",v,1),s!==m&&m&&Gs(t,d,"roughnessMap",m,2),null!=y&&d.setUniform(c,"2f","uvRepeat",y),null!=_&&d.setUniform(c,"2f","uvOffset",_),null!=b&&d.setUniform(c,"2f","detailUvRepeat",b),null!=x&&d.setUniform(c,"2f","detailUvOffset",x),d.setUniform(c,"1i","useBumpMap",+w),d.setUniform(c,"1i","useRoughnessMap",+S),d.setUniform(c,"1i","doubleSide",+T)),o=g,a=v,s=m,l=r}}}function Ws(t){t=t||{},this._depthTex=new tn({format:We.DEPTH_COMPONENT,type:We.UNSIGNED_INT}),this._normalTex=new tn({type:We.HALF_FLOAT}),this._framebuffer=new li,this._framebuffer.attach(this._normalTex),this._framebuffer.attach(this._depthTex,li.DEPTH_ATTACHMENT),this._normalMaterial=new K({shader:new zt(zt.source("ecgl.normal.vertex"),zt.source("ecgl.normal.fragment"))}),this._normalMaterial.enableTexture(["normalMap","bumpMap","roughnessMap"]),this._defaultNormalMap=Qi.createBlank("#000"),this._defaultBumpMap=Qi.createBlank("#000"),this._defaultRoughessMap=Qi.createBlank("#000"),this._debugPass=new hr({fragment:zt.source("clay.compositor.output")}),this._debugPass.setUniform("texture",this._normalTex),this._debugPass.material.undefine("fragment","OUTPUT_ALPHA")}zt.import(Hs),Ws.prototype.getDepthTexture=function(){return this._depthTex},Ws.prototype.getNormalTexture=function(){return this._normalTex},Ws.prototype.update=function(t,e,n){var i=t.getWidth(),r=t.getHeight(),o=this._depthTex,a=this._normalTex,s=this._normalMaterial;o.width=i,o.height=r,a.width=i,a.height=r;var l=e.getRenderList(n).opaque;this._framebuffer.bind(t),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.gl.disable(t.gl.BLEND),t.renderPass(l,n,{getMaterial:function(){return s},ifRender:function(t){return t.renderNormal},beforeRender:Us(t,this._defaultNormalMap,this._defaultBumpMap,this._defaultRoughessMap,this._normalMaterial),sort:t.opaqueSortCompare}),this._framebuffer.unbind(t)},Ws.prototype.renderDebug=function(t){this._debugPass.render(t)},Ws.prototype.dispose=function(t){this._depthTex.dispose(t),this._normalTex.dispose(t)};var Xs=Ws;function Ys(t){t=t||{},this._edgePass=new hr({fragment:zt.source("ecgl.edge")}),this._edgePass.setUniform("normalTexture",t.normalTexture),this._edgePass.setUniform("depthTexture",t.depthTexture),this._targetTexture=new tn({type:We.HALF_FLOAT}),this._frameBuffer=new li,this._frameBuffer.attach(this._targetTexture)}Ys.prototype.update=function(t,e,n,i){var r=t.getWidth(),o=t.getHeight(),a=this._targetTexture;a.width=r,a.height=o;var s=this._frameBuffer;s.bind(t),this._edgePass.setUniform("projectionInv",e.invProjectionMatrix.array),this._edgePass.setUniform("textureSize",[r,o]),this._edgePass.setUniform("texture",n),this._edgePass.render(t),s.unbind(t)},Ys.prototype.getTargetTexture=function(){return this._targetTexture},Ys.prototype.setParameter=function(t,e){this._edgePass.setUniform(t,e)},Ys.prototype.dispose=function(t){this._targetTexture.dispose(t),this._frameBuffer.dispose(t)};var qs=Ys,Zs={type:"compositor",nodes:[{name:"source",type:"texture",outputs:{color:{}}},{name:"source_half",shader:"#source(clay.compositor.downsample)",inputs:{texture:"source"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bright",shader:"#source(clay.compositor.bright)",inputs:{texture:"source_half"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{threshold:2,scale:4,textureSize:"expr([width * 1.0 / 2, height / 2])"}},{name:"bright_downsample_4",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 2, height / 2] )"}},{name:"bright_downsample_8",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 4, height / 4] )"}},{name:"bright_downsample_16",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 8, height / 8] )"}},{name:"bright_downsample_32",shader:"#source(clay.compositor.downsample)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 32)",height:"expr(height * 1.0 / 32)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0 / 16, height / 16] )"}},{name:"bright_upsample_16_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_32"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 32, height / 32] )"}},{name:"bright_upsample_16_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_16_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 16)",height:"expr(height * 1.0 / 16)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_16"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 16, height * 1.0 / 16] )"}},{name:"bright_upsample_8_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_8_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_8_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_8_blur_v",texture2:"bright_upsample_16_blur_v"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 8)",height:"expr(height * 1.0 / 8)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_4_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_8"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 8, height * 1.0 / 8] )"}},{name:"bright_upsample_4_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_4_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_4_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_4_blur_v",texture2:"bright_upsample_8_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 4)",height:"expr(height * 1.0 / 4)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_2_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_downsample_4"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 4, height * 1.0 / 4] )"}},{name:"bright_upsample_2_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_2_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_2_blend",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_2_blur_v",texture2:"bright_upsample_4_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0 / 2)",height:"expr(height * 1.0 / 2)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"bright_upsample_full_blur_h",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:0,textureSize:"expr( [width * 1.0 / 2, height * 1.0 / 2] )"}},{name:"bright_upsample_full_blur_v",shader:"#source(clay.compositor.gaussian_blur)",inputs:{texture:"bright_upsample_full_blur_h"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{blurSize:1,blurDir:1,textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"bloom_composite",shader:"#source(clay.compositor.blend)",inputs:{texture1:"bright_upsample_full_blur_v",texture2:"bright_upsample_2_blend"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{weight1:.3,weight2:.7}},{name:"coc",shader:"#source(ecgl.dof.coc)",outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{focalDist:50,focalRange:30}},{name:"dof_far_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"}},{name:"dof_near_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"source",coc:"coc"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_NEARFIELD:null}},{name:"dof_coc_blur",shader:"#source(ecgl.dof.diskBlur)",inputs:{texture:"coc"},outputs:{color:{parameters:{minFilter:"NEAREST",magFilter:"NEAREST",width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},parameters:{textureSize:"expr( [width * 1.0, height * 1.0] )"},defines:{BLUR_COC:null}},{name:"dof_composite",shader:"#source(ecgl.dof.composite)",inputs:{original:"source",blurred:"dof_far_blur",nearfield:"dof_near_blur",coc:"coc",nearcoc:"dof_coc_blur"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)",type:"HALF_FLOAT"}}}},{name:"composite",shader:"#source(clay.compositor.hdr.composite)",inputs:{texture:"source",bloom:"bloom_composite"},outputs:{color:{parameters:{width:"expr(width * 1.0)",height:"expr(height * 1.0)"}}},defines:{}},{name:"FXAA",shader:"#source(clay.compositor.fxaa)",inputs:{texture:"composite"}}]},Ks="@export ecgl.dof.coc\n\nuniform sampler2D depth;\n\nuniform float zNear: 0.1;\nuniform float zFar: 2000;\n\nuniform float focalDistance: 3;\nuniform float focalRange: 1;\nuniform float focalLength: 30;\nuniform float fstop: 2.8;\n\nvarying vec2 v_Texcoord;\n\n@import clay.util.encode_float\n\nvoid main()\n{\n float z = texture2D(depth, v_Texcoord).r * 2.0 - 1.0;\n\n float dist = 2.0 * zNear * zFar / (zFar + zNear - z * (zFar - zNear));\n\n float aperture = focalLength / fstop;\n\n float coc;\n\n float uppper = focalDistance + focalRange;\n float lower = focalDistance - focalRange;\n if (dist <= uppper && dist >= lower) {\n coc = 0.5;\n }\n else {\n float focalAdjusted = dist > uppper ? uppper : lower;\n\n coc = abs(aperture * (focalLength * (dist - focalAdjusted)) / (dist * (focalAdjusted - focalLength)));\n coc = clamp(coc, 0.0, 2.0) / 2.00001;\n\n if (dist < lower) {\n coc = -coc;\n }\n coc = coc * 0.5 + 0.5;\n }\n\n gl_FragColor = encodeFloat(coc);\n}\n@end\n\n\n@export ecgl.dof.composite\n\n#define DEBUG 0\n\nuniform sampler2D original;\nuniform sampler2D blurred;\nuniform sampler2D nearfield;\nuniform sampler2D coc;\nuniform sampler2D nearcoc;\nvarying vec2 v_Texcoord;\n\n@import clay.util.rgbm\n@import clay.util.float\n\nvoid main()\n{\n vec4 blurredColor = texture2D(blurred, v_Texcoord);\n vec4 originalColor = texture2D(original, v_Texcoord);\n\n float fCoc = decodeFloat(texture2D(coc, v_Texcoord));\n\n fCoc = abs(fCoc * 2.0 - 1.0);\n\n float weight = smoothstep(0.0, 1.0, fCoc);\n \n#ifdef NEARFIELD_ENABLED\n vec4 nearfieldColor = texture2D(nearfield, v_Texcoord);\n float fNearCoc = decodeFloat(texture2D(nearcoc, v_Texcoord));\n fNearCoc = abs(fNearCoc * 2.0 - 1.0);\n\n gl_FragColor = encodeHDR(\n mix(\n nearfieldColor, mix(originalColor, blurredColor, weight),\n pow(1.0 - fNearCoc, 4.0)\n )\n );\n#else\n gl_FragColor = encodeHDR(mix(originalColor, blurredColor, weight));\n#endif\n\n}\n\n@end\n\n\n\n@export ecgl.dof.diskBlur\n\n#define POISSON_KERNEL_SIZE 16;\n\nuniform sampler2D texture;\nuniform sampler2D coc;\nvarying vec2 v_Texcoord;\n\nuniform float blurRadius : 10.0;\nuniform vec2 textureSize : [512.0, 512.0];\n\nuniform vec2 poissonKernel[POISSON_KERNEL_SIZE];\n\nuniform float percent;\n\nfloat nrand(const in vec2 n) {\n return fract(sin(dot(n.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n@import clay.util.rgbm\n@import clay.util.float\n\n\nvoid main()\n{\n vec2 offset = blurRadius / textureSize;\n\n float rnd = 6.28318 * nrand(v_Texcoord + 0.07 * percent );\n float cosa = cos(rnd);\n float sina = sin(rnd);\n vec4 basis = vec4(cosa, -sina, sina, cosa);\n\n#if !defined(BLUR_NEARFIELD) && !defined(BLUR_COC)\n offset *= abs(decodeFloat(texture2D(coc, v_Texcoord)) * 2.0 - 1.0);\n#endif\n\n#ifdef BLUR_COC\n float cocSum = 0.0;\n#else\n vec4 color = vec4(0.0);\n#endif\n\n\n float weightSum = 0.0;\n\n for (int i = 0; i < POISSON_KERNEL_SIZE; i++) {\n vec2 ofs = poissonKernel[i];\n\n ofs = vec2(dot(ofs, basis.xy), dot(ofs, basis.zw));\n\n vec2 uv = v_Texcoord + ofs * offset;\n vec4 texel = texture2D(texture, uv);\n\n float w = 1.0;\n#ifdef BLUR_COC\n float fCoc = decodeFloat(texel) * 2.0 - 1.0;\n cocSum += clamp(fCoc, -1.0, 0.0) * w;\n#else\n texel = texel;\n #if !defined(BLUR_NEARFIELD)\n float fCoc = decodeFloat(texture2D(coc, uv)) * 2.0 - 1.0;\n w *= abs(fCoc);\n #endif\n texel.rgb *= texel.a;\n color += texel * w;\n#endif\n\n weightSum += w;\n }\n\n#ifdef BLUR_COC\n gl_FragColor = encodeFloat(clamp(cocSum / weightSum, -1.0, 0.0) * 0.5 + 0.5);\n#else\n color /= weightSum;\n color.rgb /= (color.a + 0.0001);\n gl_FragColor = color;\n#endif\n}\n\n@end",$s="@export ecgl.edge\n\nuniform sampler2D texture;\n\nuniform sampler2D normalTexture;\nuniform sampler2D depthTexture;\n\nuniform mat4 projectionInv;\n\nuniform vec2 textureSize;\n\nuniform vec4 edgeColor: [0,0,0,0.8];\n\nvarying vec2 v_Texcoord;\n\nvec3 packColor(vec2 coord) {\n float z = texture2D(depthTexture, coord).r * 2.0 - 1.0;\n vec4 p = vec4(v_Texcoord * 2.0 - 1.0, z, 1.0);\n vec4 p4 = projectionInv * p;\n\n return vec3(\n texture2D(normalTexture, coord).rg,\n -p4.z / p4.w / 5.0\n );\n}\n\nvoid main() {\n vec2 cc = v_Texcoord;\n vec3 center = packColor(cc);\n\n float size = clamp(1.0 - (center.z - 10.0) / 100.0, 0.0, 1.0) * 0.5;\n float dx = size / textureSize.x;\n float dy = size / textureSize.y;\n\n vec2 coord;\n vec3 topLeft = packColor(cc+vec2(-dx, -dy));\n vec3 top = packColor(cc+vec2(0.0, -dy));\n vec3 topRight = packColor(cc+vec2(dx, -dy));\n vec3 left = packColor(cc+vec2(-dx, 0.0));\n vec3 right = packColor(cc+vec2(dx, 0.0));\n vec3 bottomLeft = packColor(cc+vec2(-dx, dy));\n vec3 bottom = packColor(cc+vec2(0.0, dy));\n vec3 bottomRight = packColor(cc+vec2(dx, dy));\n\n vec3 v = -topLeft-2.0*top-topRight+bottomLeft+2.0*bottom+bottomRight;\n vec3 h = -bottomLeft-2.0*left-topLeft+bottomRight+2.0*right+topRight;\n\n float edge = sqrt(dot(h, h) + dot(v, v));\n\n edge = smoothstep(0.8, 1.0, edge);\n\n gl_FragColor = mix(texture2D(texture, v_Texcoord), vec4(edgeColor.rgb, 1.0), edgeColor.a * edge);\n}\n@end";function Js(t,e){return{color:{parameters:{width:t,height:e}}}}zt["import"](os),zt["import"](ss),zt["import"](cs),zt["import"](us),zt["import"](hs),zt["import"](fs),zt["import"](ds),zt["import"](gs),zt["import"](ms),zt["import"](Ks),zt["import"]($s);var Qs=["composite","FXAA"];function tl(){this._width,this._height,this._dpr,this._sourceTexture=new tn({type:We.HALF_FLOAT}),this._depthTexture=new tn({format:We.DEPTH_COMPONENT,type:We.UNSIGNED_INT}),this._framebuffer=new li,this._framebuffer.attach(this._sourceTexture),this._framebuffer.attach(this._depthTexture,li.DEPTH_ATTACHMENT),this._normalPass=new Xs,this._compositor=Ds(Zs);var t=this._compositor.getNodeByName("source");t.texture=this._sourceTexture;var e=this._compositor.getNodeByName("coc");this._sourceNode=t,this._cocNode=e,this._compositeNode=this._compositor.getNodeByName("composite"),this._fxaaNode=this._compositor.getNodeByName("FXAA"),this._dofBlurNodes=["dof_far_blur","dof_near_blur","dof_coc_blur"].map((function(t){return this._compositor.getNodeByName(t)}),this),this._dofBlurKernel=0,this._dofBlurKernelSize=new Float32Array(0),this._finalNodesChain=Qs.map((function(t){return this._compositor.getNodeByName(t)}),this);var n={normalTexture:this._normalPass.getNormalTexture(),depthTexture:this._normalPass.getDepthTexture()};this._ssaoPass=new Ns(n),this._ssrPass=new zs(n),this._edgePass=new qs(n)}tl.prototype.resize=function(t,e,n){n=n||1;t*=n,e*=n;var i=this._sourceTexture,r=this._depthTexture;i.width=t,i.height=e,r.width=t,r.height=e;var o={getWidth:function(){return t},getHeight:function(){return e},getDevicePixelRatio:function(){return n}};function a(t,e){if("function"===typeof t[e]){var n=t[e].__original||t[e];t[e]=function(t){return n.call(this,o)},t[e].__original=n}}this._compositor.nodes.forEach((function(t){for(var e in t.outputs){var n=t.outputs[e].parameters;n&&(a(n,"width"),a(n,"height"))}for(var i in t.parameters)a(t.parameters,i)})),this._width=t,this._height=e,this._dpr=n},tl.prototype.getWidth=function(){return this._width},tl.prototype.getHeight=function(){return this._height},tl.prototype._ifRenderNormalPass=function(){return this._enableSSAO||this._enableEdge||this._enableSSR},tl.prototype._getPrevNode=function(t){var e=Qs.indexOf(t.name)-1,n=this._finalNodesChain[e];while(n&&!this._compositor.getNodeByName(n.name))e-=1,n=this._finalNodesChain[e];return n},tl.prototype._getNextNode=function(t){var e=Qs.indexOf(t.name)+1,n=this._finalNodesChain[e];while(n&&!this._compositor.getNodeByName(n.name))e+=1,n=this._finalNodesChain[e];return n},tl.prototype._addChainNode=function(t){var e=this._getPrevNode(t),n=this._getNextNode(t);e&&(t.inputs.texture=e.name,n?(t.outputs=Js(this.getWidth.bind(this),this.getHeight.bind(this)),n.inputs.texture=t.name):t.outputs=null,this._compositor.addNode(t))},tl.prototype._removeChainNode=function(t){var e=this._getPrevNode(t),n=this._getNextNode(t);e&&(n?(e.outputs=Js(this.getWidth.bind(this),this.getHeight.bind(this)),n.inputs.texture=e.name):e.outputs=null,this._compositor.removeNode(t))},tl.prototype.updateNormal=function(t,e,n,i){this._ifRenderNormalPass()&&this._normalPass.update(t,e,n)},tl.prototype.updateSSAO=function(t,e,n,i){this._ssaoPass.update(t,n,i)},tl.prototype.enableSSAO=function(){this._enableSSAO=!0},tl.prototype.disableSSAO=function(){this._enableSSAO=!1},tl.prototype.enableSSR=function(){this._enableSSR=!0},tl.prototype.disableSSR=function(){this._enableSSR=!1},tl.prototype.getSSAOTexture=function(){return this._ssaoPass.getTargetTexture()},tl.prototype.getSourceFrameBuffer=function(){return this._framebuffer},tl.prototype.getSourceTexture=function(){return this._sourceTexture},tl.prototype.disableFXAA=function(){this._removeChainNode(this._fxaaNode)},tl.prototype.enableFXAA=function(){this._addChainNode(this._fxaaNode)},tl.prototype.enableBloom=function(){this._compositeNode.inputs.bloom="bloom_composite",this._compositor.dirty()},tl.prototype.disableBloom=function(){this._compositeNode.inputs.bloom=null,this._compositor.dirty()},tl.prototype.enableDOF=function(){this._compositeNode.inputs.texture="dof_composite",this._compositor.dirty()},tl.prototype.disableDOF=function(){this._compositeNode.inputs.texture="source",this._compositor.dirty()},tl.prototype.enableColorCorrection=function(){this._compositeNode.define("COLOR_CORRECTION"),this._enableColorCorrection=!0},tl.prototype.disableColorCorrection=function(){this._compositeNode.undefine("COLOR_CORRECTION"),this._enableColorCorrection=!1},tl.prototype.enableEdge=function(){this._enableEdge=!0},tl.prototype.disableEdge=function(){this._enableEdge=!1},tl.prototype.setBloomIntensity=function(t){this._compositeNode.setParameter("bloomIntensity",t)},tl.prototype.setSSAOParameter=function(t,e){switch(t){case"quality":var n={low:6,medium:12,high:32,ultra:62}[e]||12;this._ssaoPass.setParameter("kernelSize",n);break;case"radius":this._ssaoPass.setParameter(t,e),this._ssaoPass.setParameter("bias",e/200);break;case"intensity":this._ssaoPass.setParameter(t,e);break;default:0}},tl.prototype.setDOFParameter=function(t,e){switch(t){case"focalDistance":case"focalRange":case"fstop":this._cocNode.setParameter(t,e);break;case"blurRadius":for(var n=0;n<this._dofBlurNodes.length;n++)this._dofBlurNodes[n].setParameter("blurRadius",e);break;case"quality":var i={low:4,medium:8,high:16,ultra:32}[e]||8;this._dofBlurKernelSize=i;for(n=0;n<this._dofBlurNodes.length;n++)this._dofBlurNodes[n].pass.material.define("POISSON_KERNEL_SIZE",i);this._dofBlurKernel=new Float32Array(2*i);break;default:0}},tl.prototype.setSSRParameter=function(t,e){if(null!=e)switch(t){case"quality":var n={low:10,medium:15,high:30,ultra:80}[e]||20,i={low:32,medium:16,high:8,ultra:4}[e]||16;this._ssrPass.setParameter("maxIteration",n),this._ssrPass.setParameter("pixelStride",i);break;case"maxRoughness":this._ssrPass.setParameter("minGlossiness",Math.max(Math.min(1-e,1),0));break;case"physical":this.setPhysicallyCorrectSSR(e);break;default:console.warn("Unkown SSR parameter "+t)}},tl.prototype.setPhysicallyCorrectSSR=function(t){this._ssrPass.setPhysicallyCorrect(t)},tl.prototype.setEdgeColor=function(t){var e=bo.parseColor(t);this._edgePass.setParameter("edgeColor",e)},tl.prototype.setExposure=function(t){this._compositeNode.setParameter("exposure",Math.pow(2,t))},tl.prototype.setColorLookupTexture=function(t,e){this._compositeNode.pass.material.setTextureImage("lut",this._enableColorCorrection?t:"none",e,{minFilter:bo.Texture.NEAREST,magFilter:bo.Texture.NEAREST,flipY:!1})},tl.prototype.setColorCorrection=function(t,e){this._compositeNode.setParameter(t,e)},tl.prototype.isSSREnabled=function(){return this._enableSSR},tl.prototype.composite=function(t,e,n,i,r){var o=this._sourceTexture,a=o;this._enableEdge&&(this._edgePass.update(t,n,o,r),o=a=this._edgePass.getTargetTexture()),this._enableSSR&&(this._ssrPass.update(t,n,o,r),a=this._ssrPass.getTargetTexture(),this._ssrPass.setSSAOTexture(this._enableSSAO?this._ssaoPass.getTargetTexture():null)),this._sourceNode.texture=a,this._cocNode.setParameter("depth",this._depthTexture);for(var s=this._dofBlurKernel,l=this._dofBlurKernelSize,c=Math.floor(Vs.length/2/l),u=r%c,h=0;h<2*l;h++)s[h]=Vs[h+u*l*2];for(h=0;h<this._dofBlurNodes.length;h++)this._dofBlurNodes[h].setParameter("percent",r/30),this._dofBlurNodes[h].setParameter("poissonKernel",s);this._cocNode.setParameter("zNear",n.near),this._cocNode.setParameter("zFar",n.far),this._compositor.render(t,i)},tl.prototype.dispose=function(t){this._sourceTexture.dispose(t),this._depthTexture.dispose(t),this._framebuffer.dispose(t),this._compositor.dispose(t),this._normalPass.dispose(t),this._ssaoPass.dispose(t)};var el=tl;function nl(t){for(var e=[],n=0;n<30;n++)e.push([Is(n,2),Is(n,3)]);this._haltonSequence=e,this._frame=0,this._sourceTex=new tn,this._sourceFb=new li,this._sourceFb.attach(this._sourceTex),this._prevFrameTex=new tn,this._outputTex=new tn;var i=this._blendPass=new hr({fragment:zt.source("clay.compositor.blend")});i.material.disableTexturesAll(),i.material.enableTexture(["texture1","texture2"]),this._blendFb=new li({depthBuffer:!1}),this._outputPass=new hr({fragment:zt.source("clay.compositor.output"),blendWithPrevious:!0}),this._outputPass.material.define("fragment","OUTPUT_ALPHA"),this._outputPass.material.blend=function(t){t.blendEquationSeparate(t.FUNC_ADD,t.FUNC_ADD),t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA)}}nl.prototype={constructor:nl,jitterProjection:function(t,e){var n=t.viewport,i=n.devicePixelRatio||t.getDevicePixelRatio(),r=n.width*i,o=n.height*i,a=this._haltonSequence[this._frame%this._haltonSequence.length],s=new Oe;s.array[12]=(2*a[0]-1)/r,s.array[13]=(2*a[1]-1)/o,Oe.mul(e.projectionMatrix,s,e.projectionMatrix),Oe.invert(e.invProjectionMatrix,e.projectionMatrix)},resetFrame:function(){this._frame=0},getFrame:function(){return this._frame},getSourceFrameBuffer:function(){return this._sourceFb},getOutputTexture:function(){return this._outputTex},resize:function(t,e){this._prevFrameTex.width=t,this._prevFrameTex.height=e,this._outputTex.width=t,this._outputTex.height=e,this._sourceTex.width=t,this._sourceTex.height=e,this._prevFrameTex.dirty(),this._outputTex.dirty(),this._sourceTex.dirty()},isFinished:function(){return this._frame>=this._haltonSequence.length},render:function(t,e,n){var i=this._blendPass;0===this._frame?(i.setUniform("weight1",0),i.setUniform("weight2",1)):(i.setUniform("weight1",.9),i.setUniform("weight2",.1)),i.setUniform("texture1",this._prevFrameTex),i.setUniform("texture2",e||this._sourceTex),this._blendFb.attach(this._outputTex),this._blendFb.bind(t),i.render(t),this._blendFb.unbind(t),n||(this._outputPass.setUniform("texture",this._outputTex),this._outputPass.render(t));var r=this._prevFrameTex;this._prevFrameTex=this._outputTex,this._outputTex=r,this._frame++},dispose:function(t){this._sourceFb.dispose(t),this._blendFb.dispose(t),this._prevFrameTex.dispose(t),this._outputTex.dispose(t),this._sourceTex.dispose(t),this._outputPass.dispose(t),this._blendPass.dispose(t)}};var il=nl;function rl(t){t=t||"perspective",this.layer=null,this.scene=new Hn,this.rootNode=this.scene,this.viewport={x:0,y:0,width:0,height:0},this.setProjection(t),this._compositor=new el,this._temporalSS=new il,this._shadowMapPass=new Wa;for(var e=[],n=0,i=0;i<30;i++){for(var r=[],o=0;o<6;o++)r.push(4*Is(n,2)-2),r.push(4*Is(n,3)-2),n++;e.push(r)}this._pcfKernels=e,this.scene.on("beforerender",(function(t,e,n){this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,n)}),this)}rl.prototype.setProjection=function(t){var e=this.camera;e&&e.update(),"perspective"===t?this.camera instanceof Kn||(this.camera=new Kn,e&&this.camera.setLocalTransform(e.localTransform)):this.camera instanceof or||(this.camera=new or,e&&this.camera.setLocalTransform(e.localTransform)),this.camera.near=.1,this.camera.far=2e3},rl.prototype.setViewport=function(t,e,n,i,r){this.camera instanceof Kn&&(this.camera.aspect=n/i),r=r||1,this.viewport.x=t,this.viewport.y=e,this.viewport.width=n,this.viewport.height=i,this.viewport.devicePixelRatio=r,this._compositor.resize(n*r,i*r),this._temporalSS.resize(n*r,i*r)},rl.prototype.containPoint=function(t,e){var n=this.viewport,i=this.layer.renderer.getHeight();return e=i-e,t>=n.x&&e>=n.y&&t<=n.x+n.width&&e<=n.y+n.height};var ol=new rt;rl.prototype.castRay=function(t,e,n){var i=this.layer.renderer,r=i.viewport;return i.viewport=this.viewport,i.screenToNDC(t,e,ol),this.camera.castRay(ol,n),i.viewport=r,n},rl.prototype.prepareRender=function(){this.scene.update(),this.camera.update(),this.scene.updateLights();var t=this.scene.updateRenderList(this.camera);this._needsSortProgressively=!1;for(var e=0;e<t.transparent.length;e++){var n=t.transparent[e],i=n.geometry;i.needsSortVerticesProgressively&&i.needsSortVerticesProgressively()&&(this._needsSortProgressively=!0),i.needsSortTrianglesProgressively&&i.needsSortTrianglesProgressively()&&(this._needsSortProgressively=!0)}this._frame=0,this._temporalSS.resetFrame()},rl.prototype.render=function(t,e){this._doRender(t,e,this._frame),this._frame++},rl.prototype.needsAccumulate=function(){return this.needsTemporalSS()||this._needsSortProgressively},rl.prototype.needsTemporalSS=function(){var t=this._enableTemporalSS;return"auto"===t&&(t=this._enablePostEffect),t},rl.prototype.hasDOF=function(){return this._enableDOF},rl.prototype.isAccumulateFinished=function(){return this.needsTemporalSS()?this._temporalSS.isFinished():this._frame>30},rl.prototype._doRender=function(t,e,n){var i=this.scene,r=this.camera;n=n||0,this._updateTransparent(t,i,r,n),e||(this._shadowMapPass.kernelPCF=this._pcfKernels[0],this._shadowMapPass.render(t,i,r,!0)),this._updateShadowPCFKernel(n);var o=t.clearColor;if(t.gl.clearColor(o[0],o[1],o[2],o[3]),this._enablePostEffect&&(this.needsTemporalSS()&&this._temporalSS.jitterProjection(t,r),this._compositor.updateNormal(t,i,r,this._temporalSS.getFrame())),this._updateSSAO(t,i,r,this._temporalSS.getFrame()),this._enablePostEffect){var a=this._compositor.getSourceFrameBuffer();a.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),t.render(i,r,!0,!0),a.unbind(t),this.needsTemporalSS()&&e?(this._compositor.composite(t,i,r,this._temporalSS.getSourceFrameBuffer(),this._temporalSS.getFrame()),t.setViewport(this.viewport),this._temporalSS.render(t)):(t.setViewport(this.viewport),this._compositor.composite(t,i,r,null,0))}else if(this.needsTemporalSS()&&e){a=this._temporalSS.getSourceFrameBuffer();a.bind(t),t.saveClear(),t.clearBit=t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT,t.render(i,r,!0,!0),t.restoreClear(),a.unbind(t),t.setViewport(this.viewport),this._temporalSS.render(t)}else t.setViewport(this.viewport),t.render(i,r,!0,!0)},rl.prototype._updateTransparent=function(t,e,n,i){for(var r=new fe,o=new Oe,a=n.getWorldPosition(),s=e.getRenderList(n).transparent,l=0;l<s.length;l++){var c=s[l],u=c.geometry;Oe.invert(o,c.worldTransform),fe.transformMat4(r,a,o),u.needsSortTriangles&&u.needsSortTriangles()&&u.doSortTriangles(r,i),u.needsSortVertices&&u.needsSortVertices()&&u.doSortVertices(r,i)}},rl.prototype._updateSSAO=function(t,e,n){var i=this._enableSSAO&&this._enablePostEffect;i&&this._compositor.updateSSAO(t,e,n,this._temporalSS.getFrame());for(var r=e.getRenderList(n),o=0;o<r.opaque.length;o++){var a=r.opaque[o];a.renderNormal&&a.material[i?"enableTexture":"disableTexture"]("ssaoMap"),i&&a.material.set("ssaoMap",this._compositor.getSSAOTexture())}},rl.prototype._updateShadowPCFKernel=function(t){for(var e=this._pcfKernels[t%this._pcfKernels.length],n=this.scene.getRenderList(this.camera),i=n.opaque,r=0;r<i.length;r++)i[r].receiveShadow&&(i[r].material.set("pcfKernel",e),i[r].material.define("fragment","PCF_KERNEL_SIZE",e.length/2))},rl.prototype.dispose=function(t){this._compositor.dispose(t.gl),this._temporalSS.dispose(t.gl),this._shadowMapPass.dispose(t)},rl.prototype.setPostEffect=function(t,e){var n=this._compositor;this._enablePostEffect=t.get("enable");var i=t.getModel("bloom"),r=t.getModel("edge"),o=t.getModel("DOF",t.getModel("depthOfField")),a=t.getModel("SSAO",t.getModel("screenSpaceAmbientOcclusion")),s=t.getModel("SSR",t.getModel("screenSpaceReflection")),l=t.getModel("FXAA"),c=t.getModel("colorCorrection");i.get("enable")?n.enableBloom():n.disableBloom(),o.get("enable")?n.enableDOF():n.disableDOF(),s.get("enable")?n.enableSSR():n.disableSSR(),c.get("enable")?n.enableColorCorrection():n.disableColorCorrection(),r.get("enable")?n.enableEdge():n.disableEdge(),l.get("enable")?n.enableFXAA():n.disableFXAA(),this._enableDOF=o.get("enable"),this._enableSSAO=a.get("enable"),this._enableSSAO?n.enableSSAO():n.disableSSAO(),n.setBloomIntensity(i.get("intensity")),n.setEdgeColor(r.get("color")),n.setColorLookupTexture(c.get("lookupTexture"),e),n.setExposure(c.get("exposure")),["radius","quality","intensity"].forEach((function(t){n.setSSAOParameter(t,a.get(t))})),["quality","maxRoughness","physical"].forEach((function(t){n.setSSRParameter(t,s.get(t))})),["quality","focalDistance","focalRange","blurRadius","fstop"].forEach((function(t){n.setDOFParameter(t,o.get(t))})),["brightness","contrast","saturation"].forEach((function(t){n.setColorCorrection(t,c.get(t))}))},rl.prototype.setDOFFocusOnPoint=function(t){if(this._enablePostEffect){if(t>this.camera.far||t<this.camera.near)return;return this._compositor.setDOFParameter("focalDistance",t),!0}},rl.prototype.setTemporalSuperSampling=function(t){this._enableTemporalSS=t.get("enable")},rl.prototype.isLinearSpace=function(){return this._enablePostEffect},rl.prototype.setRootNode=function(t){if(this.rootNode!==t){for(var e=this.rootNode.children(),n=0;n<e.length;n++)t.add(e[n]);t!==this.scene&&this.scene.add(t),this.rootNode=t}},rl.prototype.add=function(t){this.rootNode.add(t)},rl.prototype.remove=function(t){this.rootNode.remove(t)},rl.prototype.removeAll=function(t){this.rootNode.removeAll(t)},Object.assign(rl.prototype,u);var al=rl;function sl(t,e){var n=t.getBoxLayoutParams(),i=Object(Pa["g"])(n,{width:e.getWidth(),height:e.getHeight()});i.y=e.getHeight()-i.y-i.height,this.viewGL.setViewport(i.x,i.y,i.width,i.height,e.getDevicePixelRatio());var r=t.get("boxWidth"),o=t.get("boxHeight"),a=t.get("boxDepth");this.getAxis("x").setExtent(-r/2,r/2),this.getAxis("y").setExtent(a/2,-a/2),this.getAxis("z").setExtent(-o/2,o/2),this.size=[r,o,a]}function ll(t,e){var n={};function r(t,e){n[t]=n[t]||[1/0,-1/0],n[t][0]=Math.min(e[0],n[t][0]),n[t][1]=Math.max(e[1],n[t][1])}t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();["x","y","z"].forEach((function(t){e.mapDimensionsAll(t,!0).forEach((function(n){r(t,e.getDataExtent(n,!0))}))}))}}),this),["xAxis3D","yAxis3D","zAxis3D"].forEach((function(e){t.eachComponent(e,(function(t){var r=e.charAt(0),o=t.getReferringComponents("grid3D").models[0],a=o.coordinateSystem;if(a===this){var s=a.getAxis(r);if(!s){var l=i["o"].createScale(n[r]||[1/0,-1/0],t);s=new Ia(r,l),s.type=t.get("type");var c="category"===s.type;s.onBand=c&&t.get("boundaryGap"),s.inverse=t.get("inverse"),t.axis=s,s.model=t,s.getLabelModel=function(){return t.getModel("axisLabel",o.getModel("axisLabel"))},s.getTickModel=function(){return t.getModel("axisTick",o.getModel("axisTick"))},a.addAxis(s)}}}),this)}),this),this.resize(this.model,e)}var cl={dimensions:Da.prototype.dimensions,create:function(t,e){var n=[];t.eachComponent("grid3D",(function(t){t.__viewGL=t.__viewGL||new al;var e=new Da;e.model=t,e.viewGL=t.__viewGL,t.coordinateSystem=e,n.push(e),e.resize=sl,e.update=ll}));var i=["xAxis3D","yAxis3D","zAxis3D"];function r(t,e){return i.map((function(n){var i=t.getReferringComponents(n).models[0];return null==i&&(i=e.getComponent(n)),i}))}return t.eachSeries((function(e){if("cartesian3D"===e.get("coordinateSystem")){var n=e.getReferringComponents("grid3D").models[0];if(null==n){var i=r(e,t);n=i[0].getCoordSysModel();i.forEach((function(t){t.getCoordSysModel()}))}var o=n.coordinateSystem;e.coordinateSystem=o}})),n}},ul=cl,hl=i["c"].extend({type:"cartesian3DAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid3D",index:this.option.gridIndex,id:this.option.gridId})[0]}});i["o"].mixinAxisModelCommonMethods(hl);var fl=hl,dl={show:!0,grid3DIndex:0,inverse:!1,name:"",nameLocation:"middle",nameTextStyle:{fontSize:16},nameGap:20,axisPointer:{},axisLine:{},axisTick:{},axisLabel:{},splitArea:{}},pl=i["x"].merge({boundaryGap:!0,axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"},axisPointer:{label:{show:!1}}},dl),gl=i["x"].merge({boundaryGap:[0,0],splitNumber:5,axisPointer:{label:{}}},dl),ml=i["x"].defaults({scale:!0,min:"dataMin",max:"dataMax"},gl),vl=i["x"].defaults({logBase:10},gl);vl.scale=!0;var yl={categoryAxis3D:pl,valueAxis3D:gl,timeAxis3D:ml,logAxis3D:vl},_l=n("8e43"),bl=["value","category","time","log"],xl=function(t,e,n,r,o){bl.forEach((function(a){var s=n.extend({type:e+"Axis3D."+a,__ordinalMeta:null,mergeDefaultAndTheme:function(t,n){var o=n.getTheme();i["x"].merge(t,o.get(a+"Axis3D")),i["x"].merge(t,this.getDefaultOption()),t.type=r(e,t)},optionUpdated:function(){var t=this.option;"category"===t.type&&(this.__ordinalMeta=_l["a"].createByAxisModel(this))},getCategories:function(){if("category"===this.option.type)return this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:i["x"].merge(i["x"].clone(yl[a+"Axis3D"]),o||{},!0)});t.registerComponentModel(s)})),t.registerSubTypeDefaulter(e+"Axis3D",i["x"].curry(r,e))};function wl(t,e){return e.type||(e.data?"category":"value")}function Sl(t){t.registerComponentModel(zo),t.registerComponentView(Ca),t.registerCoordinateSystem("grid3D",ul),["x","y","z"].forEach((function(e){xl(t,e,fl,wl,{name:e.toUpperCase()});const n=t.ComponentView.extend({type:e+"Axis3D"});t.registerComponentView(n)})),t.registerAction({type:"grid3DChangeCamera",event:"grid3dcamerachanged",update:"series:updateCamera"},(function(t,e){e.eachComponent({mainType:"grid3D",query:t},(function(e){e.setView(t)}))})),t.registerAction({type:"grid3DShowAxisPointer",event:"grid3dshowaxispointer",update:"grid3D:showAxisPointer"},(function(t,e){})),t.registerAction({type:"grid3DHideAxisPointer",event:"grid3dhideaxispointer",update:"grid3D:hideAxisPointer"},(function(t,e){}))}Object(i["w"])(Sl);var Tl={defaultOption:{shading:null,realisticMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},lambertMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},colorMaterial:{textureTiling:1,textureOffset:0,detailTexture:null},hatchingMaterial:{textureTiling:1,textureOffset:0,paperColor:"#fff"}}},Ol={getFilledRegions:function(t,e){var n,r=(t||[]).slice();if("string"===typeof e?(e=i["m"](e),n=e&&e.geoJson):e&&e.features&&(n=e),!n)return[];for(var o={},a=n.features,s=0;s<r.length;s++)o[r[s].name]=r[s];for(s=0;s<a.length;s++){var l=a[s].properties.name;o[l]||r.push({name:l})}return r},defaultOption:{show:!0,zlevel:-10,map:"",left:0,top:0,width:"100%",height:"100%",boxWidth:100,boxHeight:10,boxDepth:"auto",regionHeight:3,environment:"auto",groundPlane:{show:!1,color:"#aaa"},shading:"lambert",light:{main:{alpha:40,beta:30}},viewControl:{alpha:40,beta:0,distance:100,orthographicSize:60,minAlpha:5,minBeta:-80,maxBeta:80},label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}},Cl=i["c"].extend({type:"geo3D",layoutMode:"box",coordinateSystem:null,optionUpdated:function(){var t=this.option;t.regions=this.getFilledRegions(t.regions,t.map);var e=i["o"].createDimensions(t.data||[],{coordDimensions:["value"],encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),n=new i["e"](e,this);n.initData(t.regions);var r={};n.each((function(t){var e=n.getName(t),i=n.getItemModel(t);r[e]=i})),this._regionModelMap=r,this._data=n},getData:function(){return this._data},getRegionModel:function(t){var e=this.getData().getName(t);return this._regionModelMap[e]||new i["f"](null,this)},getRegionPolygonCoords:function(t){var e=this.getData().getName(t),n=this.coordinateSystem.getRegion(e);return n?n.geometries:[]},getFormattedLabel:function(t,e){var n=this._data.getName(t),i=this.getRegionModel(t),r=i.get("normal"===e?["label","formatter"]:["emphasis","label","formatter"]);null==r&&(r=i.get(["label","formatter"]));var o={name:n};if("function"===typeof r)return o.status=e,r(o);if("string"===typeof r){var a=o.seriesName;return r.replace("{a}",null!=a?a:"")}return n},defaultOption:{regions:[]}});i["x"].merge(Cl.prototype,Ol),i["x"].merge(Cl.prototype,Ro),i["x"].merge(Cl.prototype,No),i["x"].merge(Cl.prototype,Bo),i["x"].merge(Cl.prototype,Tl);var Ml=Cl,Al=Dl;function Dl(t,e,n){n=n||2;var i,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,f=El(t,0,h,n,!0),d=[];if(!f)return d;if(u&&(f=Nl(t,e,f,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var p=n;p<h;p+=n)s=t[p],l=t[p+1],s<i&&(i=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=Math.max(o-i,a-r)}return Pl(f,d,n,i,r,c),d}function El(t,e,n,i,r){var o,a;if(r===ic(t,e,n,i)>0)for(o=e;o<n;o+=i)a=tc(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=tc(o,t[o],t[o+1],a);return a&&ql(a,a.next)&&(ec(a),a=a.next),a}function Il(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!ql(i,i.next)&&0!==Yl(i.prev,i,i.next))i=i.next;else{if(ec(i),i=e=i.prev,i===i.next)return null;n=!0}}while(n||i!==e);return e}function Pl(t,e,n,i,r,o,a){if(t){!a&&o&&Vl(t,i,r,o);var s,l,c=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,o?kl(t,i,r,o):Ll(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),ec(t),t=l.next,c=l.next;else if(t=l,t===c){a?1===a?(t=jl(t,e,n),Pl(t,e,n,i,r,o,2)):2===a&&Rl(t,e,n,i,r,o):Pl(Il(t),e,n,i,r,o,1);break}}}function Ll(t){var e=t.prev,n=t,i=t.next;if(Yl(e,n,i)>=0)return!1;var r=t.next.next;while(r!==t.prev){if(Wl(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Yl(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function kl(t,e,n,i){var r=t.prev,o=t,a=t.next;if(Yl(r,o,a)>=0)return!1;var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=Gl(s,l,e,n,i),f=Gl(c,u,e,n,i),d=t.nextZ;while(d&&d.z<=f){if(d!==t.prev&&d!==t.next&&Wl(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Yl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}d=t.prevZ;while(d&&d.z>=h){if(d!==t.prev&&d!==t.next&&Wl(r.x,r.y,o.x,o.y,a.x,a.y,d.x,d.y)&&Yl(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function jl(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!ql(r,o)&&Zl(r,i,i.next,o)&&$l(r,o)&&$l(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),ec(i),ec(i.next),i=t=o),i=i.next}while(i!==t);return i}function Rl(t,e,n,i,r,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&Xl(a,s)){var l=Ql(a,s);return a=Il(a,a.next),l=Il(l,l.next),Pl(a,e,n,i,r,o),void Pl(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function Nl(t,e,n,i){var r,o,a,s,l,c=[];for(r=0,o=e.length;r<o;r++)a=e[r]*i,s=r<o-1?e[r+1]*i:t.length,l=El(t,a,s,i,!1),l===l.next&&(l.steiner=!0),c.push(Ul(l));for(c.sort(Bl),r=0;r<c.length;r++)Fl(c[r],n),n=Il(n,n.next);return n}function Bl(t,e){return t.x-e.x}function Fl(t,e){if(e=zl(t,e),e){var n=Ql(e,t);Il(n,n.next)}}function zl(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,h=n.y,f=1/0;i=n.next;while(i!==c)r>=i.x&&i.x>=u&&r!==i.x&&Wl(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),(l<f||l===f&&i.x>n.x)&&$l(i,t)&&(n=i,f=l)),i=i.next;return n}function Vl(t,e,n,i){var r=t;do{null===r.z&&(r.z=Gl(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Hl(r)}function Hl(t){var e,n,i,r,o,a,s,l,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,i=n,s=0,e=0;e<c;e++)if(s++,i=i.nextZ,!i)break;l=c;while(s>0||l>0&&i)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1);return t}function Gl(t,e,n,i,r){return t=32767*(t-n)/r,e=32767*(e-i)/r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Ul(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Wl(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function Xl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Kl(t,e)&&$l(t,e)&&$l(e,t)&&Jl(t,e)}function Yl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function ql(t,e){return t.x===e.x&&t.y===e.y}function Zl(t,e,n,i){return!!(ql(t,e)&&ql(n,i)||ql(t,i)&&ql(n,e))||Yl(t,e,n)>0!==Yl(t,e,i)>0&&Yl(n,i,t)>0!==Yl(n,i,e)>0}function Kl(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Zl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function $l(t,e){return Yl(t.prev,t,t.next)<0?Yl(t,e,t.next)>=0&&Yl(t,t.prev,e)>=0:Yl(t,e,t.prev)<0||Yl(t,t.next,e)<0}function Jl(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function Ql(t,e){var n=new nc(t.i,t.x,t.y),i=new nc(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function tc(t,e,n,i){var r=new nc(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ec(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function nc(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ic(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function rc(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function oc(t,e,n,i,r){var o=n,a=t[e];rc(t,e,i);for(var s=n;s<i;s++)r(t[s],a)<0&&(rc(t,s,o),o++);return rc(t,i,o),o}function ac(t,e,n,i){if(n<i){var r=Math.floor((n+i)/2),o=oc(t,r,n,i,e);ac(t,e,n,o-1),ac(t,e,o+1,i)}}function sc(){this._parts=[]}Dl.deviation=function(t,e,n,i){var r=e&&e.length,o=r?e[0]*n:t.length,a=Math.abs(ic(t,0,o,n));if(r)for(var s=0,l=e.length;s<l;s++){var c=e[s]*n,u=s<l-1?e[s+1]*n:t.length;a-=Math.abs(ic(t,c,u,n))}var h=0;for(s=0;s<i.length;s+=3){var f=i[s]*n,d=i[s+1]*n,p=i[s+2]*n;h+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},sc.prototype.step=function(t,e,n){var i=t.length;if(0===n){this._parts=[],this._sorted=!1;var r=Math.floor(i/2);this._parts.push({pivot:r,left:0,right:i-1}),this._currentSortPartIdx=0}if(!this._sorted){var o=this._parts;if(0===o.length)return this._sorted=!0,!0;if(o.length<512){for(var a=0;a<o.length;a++)o[a].pivot=oc(t,o[a].pivot,o[a].left,o[a].right,e);var s=[];for(a=0;a<o.length;a++){var l=o[a].left,c=o[a].pivot-1;c>l&&s.push({pivot:Math.floor((c+l)/2),left:l,right:c});l=o[a].pivot+1,c=o[a].right;c>l&&s.push({pivot:Math.floor((c+l)/2),left:l,right:c})}o=this._parts=s}else for(a=0;a<Math.floor(o.length/10);a++){var u=o.length-1-this._currentSortPartIdx;if(ac(t,e,o[u].left,o[u].right),this._currentSortPartIdx++,this._currentSortPartIdx===o.length)return this._sorted=!0,!0}return!1}},sc.sort=ac;var lc=sc,cc=Zo.vec3,uc=cc.create(),hc=cc.create(),fc=cc.create(),dc={needsSortTriangles:function(){return this.indices&&this.sortTriangles},needsSortTrianglesProgressively:function(){return this.needsSortTriangles()&&this.triangleCount>=2e4},doSortTriangles:function(t,e){var n=this.indices;if(0===e){var i=this.attributes.position;t=t.array;this._triangleZList&&this._triangleZList.length===this.triangleCount||(this._triangleZList=new Float32Array(this.triangleCount),this._sortedTriangleIndices=new Uint32Array(this.triangleCount),this._indicesTmp=new n.constructor(n.length),this._triangleZListTmp=new Float32Array(this.triangleCount));for(var r,o=0,a=0;a<n.length;){i.get(n[a++],uc),i.get(n[a++],hc),i.get(n[a++],fc);var s=cc.sqrDist(uc,t),l=cc.sqrDist(hc,t),c=cc.sqrDist(fc,t),u=Math.min(s,l);u=Math.min(u,c),3===a?(r=u,u=0):u-=r,this._triangleZList[o++]=u}}var h=this._sortedTriangleIndices;for(a=0;a<h.length;a++)h[a]=a;if(this.triangleCount<2e4)0===e&&this._simpleSort(!0);else for(a=0;a<3;a++)this._progressiveQuickSort(3*e+a);var f=this._indicesTmp,d=this._triangleZListTmp,p=this._triangleZList;for(a=0;a<this.triangleCount;a++){var g=3*h[a],m=3*a;f[m++]=n[g++],f[m++]=n[g++],f[m]=n[g],d[a]=p[h[a]]}var v=this._indicesTmp;this._indicesTmp=this.indices,this.indices=v;v=this._triangleZListTmp;this._triangleZListTmp=this._triangleZList,this._triangleZList=v,this.dirtyIndices()},_simpleSort:function(t){var e=this._triangleZList,n=this._sortedTriangleIndices;function i(t,n){return e[n]-e[t]}t?Array.prototype.sort.call(n,i):lc.sort(n,i,0,n.length-1)},_progressiveQuickSort:function(t){var e=this._triangleZList,n=this._sortedTriangleIndices;this._quickSort=this._quickSort||new lc,this._quickSort.step(n,(function(t,n){return e[n]-e[t]}),t)}};function pc(t){const e=t.getVisual("style");if(e){const n=t.getVisual("drawType");return e[n]}}function gc(t){const e=t.getVisual("style");return e.opacity}function mc(t,e){const n=t.getItemVisual(e,"style");if(n){const e=t.getVisual("drawType");return n[e]}}function vc(t,e){const n=t.getItemVisual(e,"style");return n&&n.opacity}var yc=1,_c=2;function bc(t,e,n){this._labelsMesh=new va,this._labelTextureSurface=new na({width:512,height:512,devicePixelRatio:n.getDevicePixelRatio(),onupdate:function(){n.getZr().refresh()}}),this._api=n,this._labelsMesh.material.set("textureAtlas",this._labelTextureSurface.getTexture())}bc.prototype.getLabelPosition=function(t,e,n){return[0,0,0]},bc.prototype.getLabelDistance=function(t,e,n){return 0},bc.prototype.getMesh=function(){return this._labelsMesh},bc.prototype.updateData=function(t,e,n){null==e&&(e=0),null==n&&(n=t.count()),this._labelsVisibilitiesBits&&this._labelsVisibilitiesBits.length===n-e||(this._labelsVisibilitiesBits=new Uint8Array(n-e));for(var i=["label","show"],r=["emphasis","label","show"],o=e;o<n;o++){var a=t.getItemModel(o),s=a.get(i),l=a.get(r);null==l&&(l=s);var c=(s?yc:0)|(l?_c:0);this._labelsVisibilitiesBits[o-e]=c}this._start=e,this._end=n,this._data=t},bc.prototype.updateLabels=function(t){if(this._data){t=t||[];for(var e=t.length>0,n={},r=0;r<t.length;r++)n[t[r]]=!0;this._labelsMesh.geometry.convertToDynamicArray(!0),this._labelTextureSurface.clear();for(var o=["label"],a=["emphasis","label"],s=this._data.hostModel,l=this._data,c=s.getModel(o),u=s.getModel(a,c),h={left:"right",right:"left",top:"center",bottom:"center"},f={left:"middle",right:"middle",top:"bottom",bottom:"top"},d=this._start;d<this._end;d++){var p=!1;e&&n[d]&&(p=!0);var g=this._labelsVisibilitiesBits[d-this._start]&(p?_c:yc);if(g){var m=l.getItemModel(d),v=m.getModel(p?a:o,p?u:c),y=v.get("distance")||0,_=v.get("position"),b=this._api.getDevicePixelRatio(),x=s.getFormattedLabel(d,p?"emphasis":"normal");if(null==x||""===x)return;var w=new i["n"].Text({style:Object(Vo["c"])(v,{text:x,fill:v.get("color")||mc(l,d)||"#000",align:"left",verticalAlign:"top",opacity:Ar.firstNotNull(v.get("opacity"),vc(l,d),1)})}),S=w.getBoundingRect(),T=1.2;S.height*=T;var O=this._labelTextureSurface.add(w),C=h[_]||"center",M=f[_]||"bottom";this._labelsMesh.geometry.addSprite(this.getLabelPosition(d,_,y),[S.width*b,S.height*b],O,C,M,this.getLabelDistance(d,_,y)*b)}}this._labelsMesh.material.set("uvScale",this._labelTextureSurface.getCoordsScale()),this._labelTextureSurface.getZr().refreshImmediately(),this._labelsMesh.geometry.convertToTypedArray(),this._labelsMesh.geometry.dirty()}},bc.prototype.dispose=function(){this._labelTextureSurface.dispose()};var xc=bc,wc=Zo.vec3;function Sc(t){this.rootNode=new bo.Node,this._triangulationResults={},this._shadersMap=bo.COMMON_SHADERS.filter((function(t){return"shadow"!==t})).reduce((function(t,e){return t[e]=bo.createShader("ecgl."+e),t}),{}),this._linesShader=bo.createShader("ecgl.meshLines3D");var e={};bo.COMMON_SHADERS.forEach((function(t){e[t]=new bo.Material({shader:bo.createShader("ecgl."+t)})})),this._groundMaterials=e,this._groundMesh=new bo.Mesh({geometry:new bo.PlaneGeometry({dynamic:!0}),castShadow:!1,renderNormal:!0,$ignorePicking:!0}),this._groundMesh.rotation.rotateX(-Math.PI/2),this._labelsBuilder=new xc(512,512,t),this._labelsBuilder.getMesh().renderOrder=100,this._labelsBuilder.getMesh().material.depthTest=!1,this.rootNode.add(this._labelsBuilder.getMesh()),this._initMeshes(),this._api=t}bo.Shader.import(Sa),Sc.prototype={constructor:Sc,extrudeY:!0,update:function(t,e,n,i,r){var o=t.getData();null==i&&(i=0),null==r&&(r=o.count()),this._startIndex=i,this._endIndex=r-1,this._triangulation(t,i,r);var a=this._getShader(t.get("shading"));this._prepareMesh(t,a,n,i,r),this.rootNode.updateWorldTransform(),this._updateRegionMesh(t,n,i,r);var s=t.coordinateSystem;"geo3D"===s.type&&this._updateGroundPlane(t,s,n);var l=this;this._labelsBuilder.updateData(o,i,r),this._labelsBuilder.getLabelPosition=function(t,e,n){var i=o.getName(t),r=n;if("geo3D"===s.type){var a=s.getRegion(i);if(!a)return[NaN,NaN,NaN];h=a.getCenter();var c=s.dataToPoint([h[0],h[1],r]);return c}var u=l._triangulationResults[t-l._startIndex],h=l.extrudeY?[(u.max[0]+u.min[0])/2,u.max[1]+r,(u.max[2]+u.min[2])/2]:[(u.max[0]+u.min[0])/2,(u.max[1]+u.min[1])/2,u.max[2]+r]},this._data=o,this._labelsBuilder.updateLabels(),this._updateDebugWireframe(t),this._lastHoverDataIndex=0},_initMeshes:function(){var t=this;function e(){var e=new bo.Mesh({name:"Polygon",material:new bo.Material({shader:t._shadersMap.lambert}),geometry:new bo.Geometry({sortTriangles:!0,dynamic:!0}),culling:!1,ignorePicking:!0,renderNormal:!0});return Object.assign(e.geometry,dc),e}var n=e(),i=new bo.Mesh({material:new bo.Material({shader:this._linesShader}),castShadow:!1,ignorePicking:!0,$ignorePicking:!0,geometry:new Qo({useNativeLine:!1})});this.rootNode.add(n),this.rootNode.add(i),n.material.define("both","VERTEX_COLOR"),n.material.define("fragment","DOUBLE_SIDED"),this._polygonMesh=n,this._linesMesh=i,this.rootNode.add(this._groundMesh)},_getShader:function(t){var e=this._shadersMap[t];return e||(e=this._shadersMap.lambert),e.__shading=t,e},_prepareMesh:function(t,e,n,i,r){for(var o=0,a=0,s=0,l=0,c=i;c<r;c++){var u=this._getRegionPolygonInfo(c),h=this._getRegionLinesInfo(c,t,this._linesMesh.geometry);o+=u.vertexCount,a+=u.triangleCount,s+=h.vertexCount,l+=h.triangleCount}var f=this._polygonMesh,d=f.geometry;["position","normal","texcoord0","color"].forEach((function(t){d.attributes[t].init(o)})),d.indices=o>65535?new Uint32Array(3*a):new Uint16Array(3*a),f.material.shader!==e&&f.material.attachShader(e,!0),bo.setMaterialFromModel(e.__shading,f.material,t,n),s>0&&(this._linesMesh.geometry.resetOffset(),this._linesMesh.geometry.setVertexCount(s),this._linesMesh.geometry.setTriangleCount(l)),this._dataIndexOfVertex=new Uint32Array(o),this._vertexRangeOfDataIndex=new Uint32Array(2*(r-i))},_updateRegionMesh:function(t,e,n,i){for(var r=t.getData(),o=0,a=0,s=!1,l=this._polygonMesh,c=this._linesMesh,u=n;u<i;u++){var h=t.getRegionModel(u),f=h.getModel("itemStyle"),d=Ar.firstNotNull(mc(r,u),f.get("color"),"#fff"),p=Ar.firstNotNull(vc(r,u),f.get("opacity"),1),g=bo.parseColor(d),m=bo.parseColor(f.get("borderColor"));g[3]*=p,m[3]*=p;var v=g[3]<.99;l.material.set("color",[1,1,1,1]),s=s||v;for(var y=Ar.firstNotNull(h.get("height",!0),t.get("regionHeight")),_=this._updatePolygonGeometry(t,l.geometry,u,y,o,a,g),b=o;b<_.vertexOffset;b++)this._dataIndexOfVertex[b]=u;this._vertexRangeOfDataIndex[2*(u-n)]=o,this._vertexRangeOfDataIndex[2*(u-n)+1]=_.vertexOffset,o=_.vertexOffset,a=_.triangleOffset;var x=f.get("borderWidth"),w=x>0;w&&(x*=e.getDevicePixelRatio(),this._updateLinesGeometry(c.geometry,t,u,y,x,t.coordinateSystem.transform)),c.invisible=!w,c.material.set({color:m})}l=this._polygonMesh;l.material.transparent=s,l.material.depthMask=!s,l.geometry.updateBoundingBox(),l.frontFace=this.extrudeY?bo.Mesh.CCW:bo.Mesh.CW,l.material.get("normalMap")&&l.geometry.generateTangents(),l.seriesIndex=t.seriesIndex,l.on("mousemove",this._onmousemove,this),l.on("mouseout",this._onmouseout,this)},_updateDebugWireframe:function(t){var e=t.getModel("debug.wireframe");if(e.get("show")){var n=bo.parseColor(e.get("lineStyle.color")||"rgba(0,0,0,0.5)"),i=Ar.firstNotNull(e.get("lineStyle.width"),1),r=this._polygonMesh;r.geometry.generateBarycentric(),r.material.define("both","WIREFRAME_TRIANGLE"),r.material.set("wireframeLineColor",n),r.material.set("wireframeLineWidth",i)}},_onmousemove:function(t){var e=this._dataIndexOfVertex[t.triangle[0]];null==e&&(e=-1),e!==this._lastHoverDataIndex&&(this.downplay(this._lastHoverDataIndex),this.highlight(e),this._labelsBuilder.updateLabels([e])),this._lastHoverDataIndex=e,this._polygonMesh.dataIndex=e},_onmouseout:function(t){t.target&&(this.downplay(this._lastHoverDataIndex),this._lastHoverDataIndex=-1,this._polygonMesh.dataIndex=-1),this._labelsBuilder.updateLabels([])},_updateGroundPlane:function(t,e,n){var i=t.getModel("groundPlane",t);if(this._groundMesh.invisible=!i.get("show",!0),!this._groundMesh.invisible){var r=t.get("shading"),o=this._groundMaterials[r];o||(o=this._groundMaterials.lambert),bo.setMaterialFromModel(r,o,i,n),o.get("normalMap")&&this._groundMesh.geometry.generateTangents(),this._groundMesh.material=o,this._groundMesh.material.set("color",bo.parseColor(i.get("color"))),this._groundMesh.scale.set(e.size[0],e.size[2],1)}},_triangulation:function(t,e,n){this._triangulationResults=[];for(var i=[1/0,1/0,1/0],r=[-1/0,-1/0,-1/0],o=t.coordinateSystem,a=e;a<n;a++){for(var s=[],l=t.getRegionPolygonCoords(a),c=0;c<l.length;c++){var u=l[c].exterior,h=l[c].interiors,f=[],d=[];if(!(u.length<3)){for(var p=0,g=0;g<u.length;g++){var m=u[g];f[p++]=m[0],f[p++]=m[1]}for(g=0;g<h.length;g++)if(!(h[g].length<3)){for(var v=f.length/2,y=0;y<h[g].length;y++){m=h[g][y];f.push(m[0]),f.push(m[1])}d.push(v)}var _=Al(f,d),b=new Float64Array(f.length/2*3),x=[],w=[1/0,1/0,1/0],S=[-1/0,-1/0,-1/0],T=0;for(g=0;g<f.length;)wc.set(x,f[g++],0,f[g++]),o&&o.transform&&wc.transformMat4(x,x,o.transform),wc.min(w,w,x),wc.max(S,S,x),b[T++]=x[0],b[T++]=x[1],b[T++]=x[2];wc.min(i,i,w),wc.max(r,r,S),s.push({points:b,indices:_,min:w,max:S})}}this._triangulationResults.push(s)}this._geoBoundingBox=[i,r]},_getRegionPolygonInfo:function(t){for(var e=this._triangulationResults[t-this._startIndex],n=0,i=0,r=0;r<e.length;r++)n+=e[r].points.length/3,i+=e[r].indices.length/3;var o=2*n+4*n,a=2*i+2*n;return{vertexCount:o,triangleCount:a}},_updatePolygonGeometry:function(t,e,n,i,r,o,a){var s=t.get("projectUVOnGround"),l=e.attributes.position,c=e.attributes.normal,u=e.attributes.texcoord0,h=e.attributes.color,f=this._triangulationResults[n-this._startIndex],d=h.value&&a,p=e.indices,g=this.extrudeY?1:2,m=this.extrudeY?2:1,v=[this.rootNode.worldTransform.x.len(),this.rootNode.worldTransform.y.len(),this.rootNode.worldTransform.z.len()],y=wc.mul([],this._geoBoundingBox[0],v),_=wc.mul([],this._geoBoundingBox[1],v),b=Math.max(_[0]-y[0],_[2]-y[2]);function x(t,e,n){for(var i=t.points,o=i.length,s=[],c=[],f=0;f<o;f+=3)s[0]=i[f],s[g]=e,s[m]=i[f+2],c[0]=(i[f]*v[0]-y[0])/b,c[1]=(i[f+2]*v[m]-y[2])/b,l.set(r,s),d&&h.set(r,a),u.set(r++,c)}function w(t,e,n){var i=r;x(t,e,n);for(var a=t.indices.length,s=0;s<a;s++)p[3*o+s]=t.indices[s]+i;o+=t.indices.length/3}for(var S=this.extrudeY?[0,1,0]:[0,0,1],T=wc.negate([],S),O=0;O<f.length;O++){var C=r,M=f[O];w(M,0,0),w(M,i,0);for(var A=M.points.length/3,D=0;D<A;D++)c.set(C+D,T),c.set(C+D+A,S);var E=[0,3,1,1,3,2],I=[[],[],[],[]],P=[],L=[],k=[],j=[],R=0;for(D=0;D<A;D++){for(var N=(D+1)%A,B=(M.points[3*N]-M.points[3*D])*v[0],F=(M.points[3*N+2]-M.points[3*D+2])*v[m],z=Math.sqrt(B*B+F*F),V=0;V<4;V++){var H=0===V||3===V,G=3*(H?D:N);I[V][0]=M.points[G],I[V][g]=V>1?i:0,I[V][m]=M.points[G+2],l.set(r+V,I[V]),s?(j[0]=(M.points[G]*v[0]-y[0])/b,j[1]=(M.points[G+2]*v[m]-y[m])/b):(j[0]=(H?R:R+z)/b,j[1]=(I[V][g]*v[g]-y[g])/b),u.set(r+V,j)}wc.sub(P,I[1],I[0]),wc.sub(L,I[3],I[0]),wc.cross(k,P,L),wc.normalize(k,k);for(V=0;V<4;V++)c.set(r+V,k),d&&h.set(r+V,a);for(V=0;V<6;V++)p[3*o+V]=E[V]+r;r+=4,o+=2,R+=z}}return e.dirty(),{vertexOffset:r,triangleOffset:o}},_getRegionLinesInfo:function(t,e,n){var i=0,r=0,o=e.getRegionModel(t),a=o.getModel("itemStyle"),s=a.get("borderWidth");if(s>0){var l=e.getRegionPolygonCoords(t);l.forEach((function(t){var e=t.exterior,o=t.interiors;i+=n.getPolylineVertexCount(e),r+=n.getPolylineTriangleCount(e);for(var a=0;a<o.length;a++)i+=n.getPolylineVertexCount(o[a]),r+=n.getPolylineTriangleCount(o[a])}),this)}return{vertexCount:i,triangleCount:r}},_updateLinesGeometry:function(t,e,n,i,r,o){function a(t){for(var e=new Float64Array(3*t.length),n=0,r=[],a=0;a<t.length;a++)r[0]=t[a][0],r[1]=i+.1,r[2]=t[a][1],o&&wc.transformMat4(r,r,o),e[n++]=r[0],e[n++]=r[1],e[n++]=r[2];return e}var s=[1,1,1,1],l=e.getRegionPolygonCoords(n);l.forEach((function(e){var n=e.exterior,i=e.interiors;t.addPolyline(a(n),s,r);for(var o=0;o<i.length;o++)t.addPolyline(a(i[o]),s,r)}))},highlight:function(t){var e=this._data;if(e){var n=e.getItemModel(t),r=n.getModel(["emphasis","itemStyle"]),o=r.get("color"),a=Ar.firstNotNull(r.get("opacity"),vc(e,t),1);if(null==o){var s=mc(e,t);o=i["h"].lift(s,-.4)}null==a&&(a=vc(e,t));var l=bo.parseColor(o);l[3]*=a,this._setColorOfDataIndex(e,t,l)}},downplay:function(t){var e=this._data;if(e){var n=e.getItemModel(t),i=Ar.firstNotNull(mc(e,t),n.get(["itemStyle","color"]),"#fff"),r=Ar.firstNotNull(vc(e,t),n.get(["itemStyle","opacity"]),1),o=bo.parseColor(i);o[3]*=r,this._setColorOfDataIndex(e,t,o)}},dispose:function(){this._labelsBuilder.dispose()},_setColorOfDataIndex:function(t,e,n){if(!(e<this._startIndex&&e>this._endIndex)){e-=this._startIndex;for(var i=this._vertexRangeOfDataIndex[2*e];i<this._vertexRangeOfDataIndex[2*e+1];i++)this._polygonMesh.geometry.attributes.color.set(i,n);this._polygonMesh.geometry.dirty(),this._api.getZr().refresh()}}};var Tc=Sc,Oc=i["d"].extend({type:"geo3D",__ecgl__:!0,init:function(t,e){this._geo3DBuilder=new Tc(e),this.groupGL=new bo.Node,this._lightRoot=new bo.Node,this._sceneHelper=new ra(this._lightRoot),this._sceneHelper.initLight(this._lightRoot),this._control=new Xo({zr:e.getZr()}),this._control.init()},render:function(t,e,n){this.groupGL.add(this._geo3DBuilder.rootNode);var i=t.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this._lightRoot),t.get("show")?i.viewGL.add(this.groupGL):i.viewGL.remove(this.groupGL);var r=this._control;r.setViewGL(i.viewGL);var o=t.getModel("viewControl");r.setFromViewControlModel(o,0),this._sceneHelper.setScene(i.viewGL.scene),this._sceneHelper.updateLight(t),i.viewGL.setPostEffect(t.getModel("postEffect"),n),i.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._geo3DBuilder.update(t,e,n,0,t.getData().count());var a=i.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse((function(t){t.material&&t.material[a]("fragment","SRGB_DECODE")})),r.off("update"),r.on("update",(function(){n.dispatchAction({type:"geo3DChangeCamera",alpha:r.getAlpha(),beta:r.getBeta(),distance:r.getDistance(),center:r.getCenter(),from:this.uid,geo3DId:t.id})})),r.update()}},afterRender:function(t,e,n,i){var r=i.renderer;this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n)},dispose:function(){this._control.dispose(),this._geo3DBuilder.dispose()}}),Cc=n("1792"),Mc=n("6bd4"),Ac=Zo.vec3,Dc=Zo.mat4,Ec=[Cc["a"],Mc["a"]];function Ic(t,e,n,i,r){this.name=t,this.map=e,this.regionHeight=0,this.regions=[],this._nameCoordMap={},this.loadGeoJson(n,i,r),this.transform=Dc.identity(new Float64Array(16)),this.invTransform=Dc.identity(new Float64Array(16)),this.extrudeY=!0,this.altitudeAxis}Ic.prototype={constructor:Ic,type:"geo3D",dimensions:["lng","lat","alt"],containPoint:function(){},loadGeoJson:function(t,e,n){var r=i["r"]||i["s"];try{this.regions=t?r(t):[]}catch(u){throw"Invalid geoJson format\n"+u}e=e||{},n=n||{};for(var o=this.regions,a={},s=0;s<o.length;s++){var l=o[s].name;l=n[l]||l,o[s].name=l,a[l]=o[s],this.addGeoCoord(l,o[s].getCenter());var c=e[l];c&&o[s].transformTo(c.left,c.top,c.width,c.height)}this._regionsMap=a,this._geoRect=null,Ec.forEach((function(t){t(this)}),this)},getGeoBoundingRect:function(){if(this._geoRect)return this._geoRect;for(var t,e=this.regions,n=0;n<e.length;n++){var r=e[n].getBoundingRect();t=t||r.clone(),t.union(r)}return this._geoRect=t||new i["n"].BoundingRect(0,0,0,0)},addGeoCoord:function(t,e){this._nameCoordMap[t]=e},getRegion:function(t){return this._regionsMap[t]},getRegionByCoord:function(t){for(var e=this.regions,n=0;n<e.length;n++)if(e[n].contain(t))return e[n]},setSize:function(t,e,n){this.size=[t,e,n];var i=this.getGeoBoundingRect(),r=t/i.width,o=-n/i.height,a=-t/2-i.x*r,s=n/2-i.y*o,l=this.extrudeY?[a,0,s]:[a,s,0],c=this.extrudeY?[r,1,o]:[r,o,1],u=this.transform;Dc.identity(u),Dc.translate(u,u,l),Dc.scale(u,u,c),Dc.invert(this.invTransform,u)},dataToPoint:function(t,e){e=e||[];var n=this.extrudeY?1:2,i=this.extrudeY?2:1,r=t[2];return isNaN(r)&&(r=0),e[0]=t[0],e[i]=t[1],this.altitudeAxis?e[n]=this.altitudeAxis.dataToCoord(r):e[n]=0,e[n]+=this.regionHeight,Ac.transformMat4(e,e,this.transform),e},pointToData:function(t,e){}};var Pc=Ic;function Lc(t,e){var n=t.getBoxLayoutParams(),i=Object(Pa["g"])(n,{width:e.getWidth(),height:e.getHeight()});i.y=e.getHeight()-i.y-i.height,this.viewGL.setViewport(i.x,i.y,i.width,i.height,e.getDevicePixelRatio());var r=this.getGeoBoundingRect(),o=r.width/r.height*(t.get("aspectScale")||.75),a=t.get("boxWidth"),s=t.get("boxDepth"),l=t.get("boxHeight");null==l&&(l=5),isNaN(a)&&isNaN(s)&&(a=100),isNaN(s)?s=a/o:isNaN(a)&&(a=s/o),this.setSize(a,l,s),this.regionHeight=t.get("regionHeight"),this.altitudeAxis&&this.altitudeAxis.setExtent(0,Math.max(l-this.regionHeight,0))}function kc(t,e){var n=[1/0,-1/0];if(t.eachSeries((function(t){if(t.coordinateSystem===this&&"series.map3D"!==t.type){var e=t.getData(),i=t.coordDimToDataDim("alt"),r=i&&i[0];if(r){var o=e.getDataExtent(r,!0);n[0]=Math.min(n[0],o[0]),n[1]=Math.max(n[1],o[1])}}}),this),n&&isFinite(n[1]-n[0])){var r=i["o"].createScale(n,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new i["a"]("altitude",r),this.resize(this.model,e)}}var jc=0,Rc={dimensions:Pc.prototype.dimensions,create:function(t,e){var n=[];if(!i["m"])throw new Error("geo3D component depends on geo component");function r(t,i){var r=Rc.createGeo3D(t);t.__viewGL=t.__viewGL||new al,r.viewGL=t.__viewGL,t.coordinateSystem=r,r.model=t,n.push(r),r.resize=Lc,r.resize(t,e),r.update=kc}return t.eachComponent("geo3D",(function(t,e){r(t,e)})),t.eachSeriesByType("map3D",(function(t,e){var n=t.get("coordinateSystem");null==n&&(n="geo3D"),"geo3D"===n&&r(t,e)})),t.eachSeries((function(e){if("geo3D"===e.get("coordinateSystem")){if("series.map3D"===e.type)return;var n=e.getReferringComponents("geo3D").models[0];if(n||(n=t.getComponent("geo3D")),!n)throw new Error('geo "'+Ar.firstNotNull(e.get("geo3DIndex"),e.get("geo3DId"),0)+'" not found');e.coordinateSystem=n.coordinateSystem}})),n},createGeo3D:function(t){var e,n=t.get("map");return"string"===typeof n?(e=n,n=i["m"](n)):n&&n.features&&(n={geoJson:n}),null==e&&(e="GEO_ANONYMOUS_"+jc++),new Pc(e+jc++,e,n&&n.geoJson,n&&n.specialAreas,t.get("nameMap"))}},Nc=Rc;function Bc(t){t.registerComponentModel(Ml),t.registerComponentView(Oc),t.registerAction({type:"geo3DChangeCamera",event:"geo3dcamerachanged",update:"series:updateCamera"},(function(t,e){e.eachComponent({mainType:"geo3D",query:t},(function(e){e.setView(t)}))})),t.registerCoordinateSystem("geo3D",Nc)}function Fc(t,e){t.id=t.id||t.name||e+""}Object(i["w"])(Bc);var zc=i["c"].extend({type:"globe",layoutMode:"box",coordinateSystem:null,init:function(){zc.superApply(this,"init",arguments),i["x"].each(this.option.layers,(function(t,e){i["x"].merge(t,this.defaultLayerOption),Fc(t,e)}),this)},mergeOption:function(t){var e=this.option.layers;function n(t){return i["x"].reduce(t,(function(t,e,n){return Fc(e,n),t[e.id]=e,t}),{})}if(this.option.layers=null,zc.superApply(this,"mergeOption",arguments),e&&e.length){var r=n(t.layers),o=n(e);for(var a in r)o[a]?i["x"].merge(o[a],r[a],!0):e.push(t.layers[a]);this.option.layers=e}i["x"].each(this.option.layers,(function(t){i["x"].merge(t,this.defaultLayerOption)}),this)},optionUpdated:function(){this.updateDisplacementHash()},defaultLayerOption:{show:!0,type:"overlay"},defaultOption:{show:!0,zlevel:-10,left:0,top:0,width:"100%",height:"100%",environment:"auto",baseColor:"#fff",baseTexture:"",heightTexture:"",displacementTexture:"",displacementScale:0,displacementQuality:"medium",globeRadius:100,globeOuterRadius:150,shading:"lambert",light:{main:{time:""}},atmosphere:{show:!1,offset:5,color:"#ffffff",glowPower:6,innerGlowPower:2},viewControl:{autoRotate:!0,panSensitivity:0,targetCoord:null},layers:[]},setDisplacementData:function(t,e,n){this.displacementData=t,this.displacementWidth=e,this.displacementHeight=n},getDisplacementTexture:function(){return this.get("displacementTexture")||this.get("heightTexture")},getDisplacemenScale:function(){var t=this.getDisplacementTexture(),e=this.get("displacementScale");return t&&"none"!==t||(e=0),e},hasDisplacement:function(){return this.getDisplacemenScale()>0},_displacementChanged:!0,_displacementScale:0,updateDisplacementHash:function(){var t=this.getDisplacementTexture(),e=this.getDisplacemenScale();this._displacementChanged=this._displacementTexture!==t||this._displacementScale!==e,this._displacementTexture=t,this._displacementScale=e},isDisplacementChanged:function(){return this._displacementChanged}});i["x"].merge(zc.prototype,Ro),i["x"].merge(zc.prototype,No),i["x"].merge(zc.prototype,Bo),i["x"].merge(zc.prototype,Tl);var Vc=zc,Hc=Math.PI,Gc=Math.sin,Uc=Math.cos,Wc=Math.tan,Xc=Math.asin,Yc=Math.atan2,qc=Hc/180,Zc=864e5,Kc=2440588,$c=2451545;function Jc(t){return t.valueOf()/Zc-.5+Kc}function Qc(t){return Jc(t)-$c}var tu=23.4397*qc;function eu(t,e){return Yc(Gc(t)*Uc(tu)-Wc(e)*Gc(tu),Uc(t))}function nu(t,e){return Xc(Gc(e)*Uc(tu)+Uc(e)*Gc(tu)*Gc(t))}function iu(t,e,n){return Yc(Gc(t),Uc(t)*Gc(e)-Wc(n)*Uc(e))}function ru(t,e,n){return Xc(Gc(e)*Gc(n)+Uc(e)*Uc(n)*Uc(t))}function ou(t,e){return qc*(280.16+360.9856235*t)-e}function au(t){return qc*(357.5291+.98560028*t)}function su(t){var e=qc*(1.9148*Gc(t)+.02*Gc(2*t)+3e-4*Gc(3*t)),n=102.9372*qc;return t+e+n+Hc}function lu(t){var e=au(t),n=su(e);return{dec:nu(n,0),ra:eu(n,0)}}var cu={getPosition:function(t,e,n){var i=qc*-n,r=qc*e,o=Qc(t),a=lu(o),s=ou(o,i)-a.ra;return{azimuth:iu(s,r,a.dec),altitude:ru(s,r,a.dec)}}},uu=cu,hu="@export ecgl.atmosphere.vertex\nattribute vec3 position: POSITION;\nattribute vec3 normal : NORMAL;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform mat4 normalMatrix : WORLDINVERSETRANSPOSE;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n v_Normal = normalize((normalMatrix * vec4(normal, 0.0)).xyz);\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n@end\n\n\n@export ecgl.atmosphere.fragment\nuniform mat4 viewTranspose: VIEWTRANSPOSE;\nuniform float glowPower;\nuniform vec3 glowColor;\n\nvarying vec3 v_Normal;\n\nvoid main() {\n float intensity = pow(1.0 - dot(v_Normal, (viewTranspose * vec4(0.0, 0.0, 1.0, 0.0)).xyz), glowPower);\n gl_FragColor = vec4(glowColor, intensity * intensity);\n}\n@end";bo.Shader["import"](no),bo.Shader["import"](hu);var fu=i["d"].extend({type:"globe",__ecgl__:!0,_displacementScale:0,init:function(t,e){this.groupGL=new bo.Node,this._sphereGeometry=new bo.SphereGeometry({widthSegments:200,heightSegments:100,dynamic:!0}),this._overlayGeometry=new bo.SphereGeometry({widthSegments:80,heightSegments:40}),this._planeGeometry=new bo.PlaneGeometry,this._earthMesh=new bo.Mesh({renderNormal:!0}),this._atmosphereMesh=new bo.Mesh,this._atmosphereGeometry=new bo.SphereGeometry({widthSegments:80,heightSegments:40}),this._atmosphereMaterial=new bo.Material({shader:new bo.Shader(bo.Shader.source("ecgl.atmosphere.vertex"),bo.Shader.source("ecgl.atmosphere.fragment")),transparent:!0}),this._atmosphereMesh.geometry=this._atmosphereGeometry,this._atmosphereMesh.material=this._atmosphereMaterial,this._atmosphereMesh.frontFace=bo.Mesh.CW,this._lightRoot=new bo.Node,this._sceneHelper=new ra,this._sceneHelper.initLight(this._lightRoot),this.groupGL.add(this._atmosphereMesh),this.groupGL.add(this._earthMesh),this._control=new Xo({zr:e.getZr()}),this._control.init(),this._layerMeshes={}},render:function(t,e,n){var i=t.coordinateSystem,r=t.get("shading");i.viewGL.add(this._lightRoot),t.get("show")?i.viewGL.add(this.groupGL):i.viewGL.remove(this.groupGL),this._sceneHelper.setScene(i.viewGL.scene),i.viewGL.setPostEffect(t.getModel("postEffect"),n),i.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var o=this._earthMesh;o.geometry=this._sphereGeometry;var a="ecgl."+r;o.material&&o.material.shader.name===a||(o.material=bo.createMaterial(a)),bo.setMaterialFromModel(r,o.material,t,n),["roughnessMap","metalnessMap","detailMap","normalMap"].forEach((function(t){var e=o.material.get(t);e&&(e.flipY=!1)})),o.material.set("color",bo.parseColor(t.get("baseColor")));var s=.99*i.radius;if(o.scale.set(s,s,s),t.get("atmosphere.show")){o.material.define("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!1,this._atmosphereMaterial.setUniforms({glowPower:t.get("atmosphere.glowPower")||6,glowColor:t.get("atmosphere.color")||"#ffffff"}),o.material.setUniforms({glowPower:t.get("atmosphere.innerGlowPower")||2,glowColor:t.get("atmosphere.color")||"#ffffff"});var l=t.get("atmosphere.offset")||5;this._atmosphereMesh.scale.set(s+l,s+l,s+l)}else o.material.undefine("both","ATMOSPHERE_ENABLED"),this._atmosphereMesh.invisible=!0;var c=o.material.setTextureImage("diffuseMap",t.get("baseTexture"),n,{flipY:!1,anisotropic:8});c&&c.surface&&c.surface.attachToMesh(o);var u=o.material.setTextureImage("bumpMap",t.get("heightTexture"),n,{flipY:!1,anisotropic:8});u&&u.surface&&u.surface.attachToMesh(o),o.material[t.get("postEffect.enable")?"define":"undefine"]("fragment","SRGB_DECODE"),this._updateLight(t,n),this._displaceVertices(t,n),this._updateViewControl(t,n),this._updateLayers(t,n)},afterRender:function(t,e,n,i){var r=i.renderer;this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n)},_updateLayers:function(t,e){var n=t.coordinateSystem,r=t.get("layers"),o=n.radius,a=[],s=[],l=[],c=[];i["x"].each(r,(function(t){var r=new i["f"](t),u=r.get("type"),h=bo.loadTexture(r.get("texture"),e,{flipY:!1,anisotropic:8});if(h.surface&&h.surface.attachToMesh(this._earthMesh),"blend"===u){var f=r.get("blendTo"),d=Ar.firstNotNull(r.get("intensity"),1);"emission"===f?(l.push(h),c.push(d)):(a.push(h),s.push(d))}else{var p=r.get("id"),g=this._layerMeshes[p];g||(g=this._layerMeshes[p]=new bo.Mesh({geometry:this._overlayGeometry,castShadow:!1,ignorePicking:!0}));var m=r.get("shading");"lambert"===m?(g.material=g.__lambertMaterial||new bo.Material({autoUpdateTextureStatus:!1,shader:bo.createShader("ecgl.lambert"),transparent:!0,depthMask:!1}),g.__lambertMaterial=g.material):(g.material=g.__colorMaterial||new bo.Material({autoUpdateTextureStatus:!1,shader:bo.createShader("ecgl.color"),transparent:!0,depthMask:!1}),g.__colorMaterial=g.material),g.material.enableTexture("diffuseMap");var v=r.get("distance"),y=o+(null==v?n.radius/100:v);g.scale.set(y,y,y),o=y;var _=this._blankTexture||(this._blankTexture=bo.createBlankTexture("rgba(255, 255, 255, 0)"));g.material.set("diffuseMap",_),bo.loadTexture(r.get("texture"),e,{flipY:!1,anisotropic:8},(function(t){t.surface&&t.surface.attachToMesh(g),g.material.set("diffuseMap",t),e.getZr().refresh()})),r.get("show")?this.groupGL.add(g):this.groupGL.remove(g)}}),this);var u=this._earthMesh.material;u.define("fragment","LAYER_DIFFUSEMAP_COUNT",a.length),u.define("fragment","LAYER_EMISSIVEMAP_COUNT",l.length),u.set("layerDiffuseMap",a),u.set("layerDiffuseIntensity",s),u.set("layerEmissiveMap",l),u.set("layerEmissionIntensity",c);var h=t.getModel("debug.wireframe");if(h.get("show")){u.define("both","WIREFRAME_TRIANGLE");var f=bo.parseColor(h.get("lineStyle.color")||"rgba(0,0,0,0.5)"),d=Ar.firstNotNull(h.get("lineStyle.width"),1);u.set("wireframeLineWidth",d),u.set("wireframeLineColor",f)}else u.undefine("both","WIREFRAME_TRIANGLE")},_updateViewControl:function(t,e){var n=t.coordinateSystem,i=t.getModel("viewControl"),r=(n.viewGL.camera,this);function o(){return{type:"globeChangeCamera",alpha:a.getAlpha(),beta:a.getBeta(),distance:a.getDistance()-n.radius,center:a.getCenter(),from:r.uid,globeId:t.id}}var a=this._control;a.setViewGL(n.viewGL);var s,l,c=i.get("targetCoord");null!=c&&(l=c[0]+90,s=c[1]),a.setFromViewControlModel(i,{baseDistance:n.radius,alpha:s,beta:l}),a.off("update"),a.on("update",(function(){e.dispatchAction(o())}))},_displaceVertices:function(t,e){var n=t.get("displacementQuality"),i=t.get("debug.wireframe.show"),r=t.coordinateSystem;if(t.isDisplacementChanged()||n!==this._displacementQuality||i!==this._showDebugWireframe){this._displacementQuality=n,this._showDebugWireframe=i;var o=this._sphereGeometry,a={low:100,medium:200,high:400,ultra:800}[n]||200,s=a/2;(o.widthSegments!==a||i)&&(o.widthSegments=a,o.heightSegments=s,o.build()),this._doDisplaceVertices(o,r),i&&o.generateBarycentric()}},_doDisplaceVertices:function(t,e){var n=t.attributes.position.value,i=t.attributes.texcoord0.value,r=t.__originalPosition;r&&r.length===n.length||(r=new Float32Array(n.length),r.set(n),t.__originalPosition=r);for(var o=e.displacementWidth,a=e.displacementHeight,s=e.displacementData,l=0;l<t.vertexCount;l++){var c=3*l,u=2*l,h=r[c+1],f=r[c+2],d=r[c+3],p=i[u++],g=i[u++],m=Math.round(p*(o-1)),v=Math.round(g*(a-1)),y=v*o+m,_=s?s[y]:0;n[c+1]=h+h*_,n[c+2]=f+f*_,n[c+3]=d+d*_}t.generateVertexNormals(),t.dirty(),t.updateBoundingBox()},_updateLight:function(t,e){var n=this._earthMesh;this._sceneHelper.updateLight(t);var r=this._sceneHelper.mainLight,o=t.get("light.main.time")||new Date,a=uu.getPosition(i["q"].parseDate(o),0,0),s=Math.cos(a.altitude);r.position.y=-s*Math.cos(a.azimuth),r.position.x=Math.sin(a.altitude),r.position.z=s*Math.sin(a.azimuth),r.lookAt(n.getWorldPosition())},dispose:function(t,e){this.groupGL.removeAll(),this._control.dispose()}}),du=Zo.vec3;function pu(t){this.radius=t,this.viewGL=null,this.altitudeAxis,this.displacementData=null,this.displacementWidth,this.displacementHeight}pu.prototype={constructor:pu,dimensions:["lng","lat","alt"],type:"globe",containPoint:function(){},setDisplacementData:function(t,e,n){this.displacementData=t,this.displacementWidth=e,this.displacementHeight=n},_getDisplacementScale:function(t,e){var n=(t+180)/360*(this.displacementWidth-1),i=(90-e)/180*(this.displacementHeight-1),r=Math.round(n)+Math.round(i)*this.displacementWidth;return this.displacementData[r]},dataToPoint:function(t,e){var n=t[0],i=t[1],r=t[2]||0,o=this.radius;this.displacementData&&(o*=1+this._getDisplacementScale(n,i)),this.altitudeAxis&&(o+=this.altitudeAxis.dataToCoord(r)),n=n*Math.PI/180,i=i*Math.PI/180;var a=Math.cos(i)*o;return e=e||[],e[0]=-a*Math.cos(n+Math.PI),e[1]=Math.sin(i)*o,e[2]=a*Math.sin(n+Math.PI),e},pointToData:function(t,e){var n=t[0],i=t[1],r=t[2],o=du.len(t);n/=o,i/=o,r/=o;var a=Math.asin(i),s=Math.atan2(r,-n);s<0&&(s=2*Math.PI+s);var l=180*a/Math.PI,c=180*s/Math.PI-180;return e=e||[],e[0]=c,e[1]=l,e[2]=o-this.radius,this.altitudeAxis&&(e[2]=this.altitudeAxis.coordToData(e[2])),e}};var gu=pu;function mu(t,e){var n=document.createElement("canvas"),i=n.getContext("2d"),r=t.width,o=t.height;n.width=r,n.height=o,i.drawImage(t,0,0,r,o);for(var a=i.getImageData(0,0,r,o).data,s=new Float32Array(a.length/4),l=0;l<a.length/4;l++){var c=a[4*l];s[l]=c/255*e}return{data:s,width:r,height:o}}function vu(t,e){var n=t.getBoxLayoutParams(),i=Object(Pa["g"])(n,{width:e.getWidth(),height:e.getHeight()});i.y=e.getHeight()-i.y-i.height,this.viewGL.setViewport(i.x,i.y,i.width,i.height,e.getDevicePixelRatio()),this.radius=t.get("globeRadius");var r=t.get("globeOuterRadius");this.altitudeAxis&&this.altitudeAxis.setExtent(0,r-this.radius)}function yu(t,e){var n=[1/0,-1/0];if(t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData(),i=t.coordDimToDataDim("alt"),r=i&&i[0];if(r){var o=e.getDataExtent(r,!0);n[0]=Math.min(n[0],o[0]),n[1]=Math.max(n[1],o[1])}}}),this),n&&isFinite(n[1]-n[0])){var r=i["o"].createScale(n,{type:"value",min:"dataMin",max:"dataMax"});this.altitudeAxis=new i["a"]("altitude",r),this.resize(this.model,e)}}var _u={dimensions:gu.prototype.dimensions,create:function(t,e){var n=[];return t.eachComponent("globe",(function(t){t.__viewGL=t.__viewGL||new al;var i=new gu;i.viewGL=t.__viewGL,t.coordinateSystem=i,i.model=t,n.push(i),i.resize=vu,i.resize(t,e),i.update=yu})),t.eachSeries((function(e){if("globe"===e.get("coordinateSystem")){var n=e.getReferringComponents("globe").models[0];if(n||(n=t.getComponent("globe")),!n)throw new Error('globe "'+Ar.firstNotNull(e.get("globe3DIndex"),e.get("globe3DId"),0)+'" not found');var i=n.coordinateSystem;e.coordinateSystem=i}})),t.eachComponent("globe",(function(t,n){var i=t.coordinateSystem,r=t.getDisplacementTexture(),o=t.getDisplacemenScale();if(t.isDisplacementChanged()){if(t.hasDisplacement()){var a=!0;bo.loadTexture(r,e,(function(n){var i=n.image,r=mu(i,o);t.setDisplacementData(r.data,r.width,r.height),a||e.dispatchAction({type:"globeUpdateDisplacment"})})),a=!1}else i.setDisplacementData(null,0,0);i.setDisplacementData(t.displacementData,t.displacementWidth,t.displacementHeight)}})),n}},bu=_u;function xu(t){t.registerComponentModel(Vc),t.registerComponentView(fu),t.registerCoordinateSystem("globe",bu),t.registerAction({type:"globeChangeCamera",event:"globecamerachanged",update:"series:updateCamera"},(function(t,e){e.eachComponent({mainType:"globe",query:t},(function(e){e.setView(t)}))})),t.registerAction({type:"globeUpdateDisplacment",event:"globedisplacementupdated",update:"update"},(function(t,e){}))}Object(i["w"])(xu);var wu=["zoom","center","pitch","bearing"],Su=i["c"].extend({type:"mapbox3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,style:"mapbox://styles/mapbox/light-v9",center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMapboxCameraOption:function(){var t=this;return wu.reduce((function(e,n){return e[n]=t.get(n),e}),{})},setMapboxCameraOption:function(t){null!=t&&wu.forEach((function(e){null!=t[e]&&(this.option[e]=t[e])}),this)},getMapbox:function(){return this._mapbox},setMapbox:function(t){this._mapbox=t}});i["x"].merge(Su.prototype,No),i["x"].merge(Su.prototype,Bo);var Tu=Su;function Ou(t,e){if(this.id=t,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!mapboxgl)throw new Error("Mapbox GL library must be included. See https://www.mapbox.com/mapbox-gl-js/api/");this._mapbox=new mapboxgl.Map({container:this.dom}),this._initEvents()}Ou.prototype.setUnpainted=function(){},Ou.prototype.resize=function(){this._mapbox.resize()},Ou.prototype.getMapbox=function(){return this._mapbox},Ou.prototype.clear=function(){},Ou.prototype.refresh=function(){this._mapbox.resize()};var Cu=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","wheel","touchstart","touchend","touchmove","touchcancel"];Ou.prototype._initEvents=function(){var t=this._mapbox.getCanvasContainer();this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},Cu.forEach((function(e){this._handlers[e]=function(e){var n={};for(var i in e)n[i]=e[i];n.bubbles=!1;var r=new e.constructor(e.type,n);t.dispatchEvent(r)},this.zr.dom.addEventListener(e,this._handlers[e])}),this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Ou.prototype.dispose=function(){Cu.forEach((function(t){this.zr.dom.removeEventListener(t,this._handlers[t])}),this)};var Mu=Ou,Au="\n@export ecgl.displayShadow.vertex\n\n@import ecgl.common.transformUniforms\n\n@import ecgl.common.uv.header\n\n@import ecgl.common.attributes\n\nvarying vec3 v_WorldPosition;\n\nvarying vec3 v_Normal;\n\nvoid main()\n{\n @import ecgl.common.uv.main\n v_Normal = normalize((worldInverseTranspose * vec4(normal, 0.0)).xyz);\n\n v_WorldPosition = (world * vec4(position, 1.0)).xyz;\n gl_Position = worldViewProjection * vec4(position, 1.0);\n}\n\n@end\n\n\n@export ecgl.displayShadow.fragment\n\n@import ecgl.common.uv.fragmentHeader\n\nvarying vec3 v_Normal;\nvarying vec3 v_WorldPosition;\n\nuniform float roughness: 0.2;\n\n#ifdef DIRECTIONAL_LIGHT_COUNT\n@import clay.header.directional_light\n#endif\n\n@import ecgl.common.ssaoMap.header\n\n@import clay.plugin.compute_shadow_map\n\nvoid main()\n{\n float shadow = 1.0;\n\n @import ecgl.common.ssaoMap.main\n\n#if defined(DIRECTIONAL_LIGHT_COUNT) && defined(DIRECTIONAL_LIGHT_SHADOWMAP_COUNT)\n float shadowContribsDir[DIRECTIONAL_LIGHT_COUNT];\n if(shadowEnabled)\n {\n computeShadowOfDirectionalLights(v_WorldPosition, shadowContribsDir);\n }\n for (int i = 0; i < DIRECTIONAL_LIGHT_COUNT; i++) {\n shadow = min(shadow, shadowContribsDir[i] * 0.5 + 0.5);\n }\n#endif\n\n shadow *= 0.5 + ao * 0.5;\n shadow = clamp(shadow, 0.0, 1.0);\n\n gl_FragColor = vec4(vec3(0.0), 1.0 - shadow);\n}\n\n@end";bo.Shader.import(Au);var Du=i["d"].extend({type:"mapbox3D",__ecgl__:!0,init:function(t,e){var n=e.getZr();this._zrLayer=new Mu("mapbox3D",n),n.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new bo.Node,this._sceneHelper=new ra(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var i=this._zrLayer.getMapbox(),r=this._dispatchInteractAction.bind(this,e,i);["zoom","rotate","drag","pitch","rotate","move"].forEach((function(t){i.on(t,r)})),this._groundMesh=new bo.Mesh({geometry:new bo.PlaneGeometry,material:new bo.Material({shader:new bo.Shader({vertex:bo.Shader.source("ecgl.displayShadow.vertex"),fragment:bo.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},render:function(t,e,n){var i=this._zrLayer.getMapbox(),r=t.get("style"),o=JSON.stringify(r);o!==this._oldStyleStr&&r&&i.setStyle(r),this._oldStyleStr=o,i.setCenter(t.get("center")),i.setZoom(t.get("zoom")),i.setPitch(t.get("pitch")),i.setBearing(t.get("bearing")),t.setMapbox(i);var a=t.coordinateSystem;a.viewGL.scene.add(this._lightRoot),a.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(a.viewGL.scene),this._sceneHelper.updateLight(t),a.viewGL.setPostEffect(t.getModel("postEffect"),n),a.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._mapbox3DModel=t},afterRender:function(t,e,n,i){var r=i.renderer;this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n),t.coordinateSystem.viewGL.scene.traverse((function(t){t.material&&(t.material.define("fragment","NORMAL_UP_AXIS",2),t.material.define("fragment","NORMAL_FRONT_AXIS",1))}))},updateCamera:function(t,e,n,i){t.coordinateSystem.setCameraOption(i),this._updateGroundMesh(),n.getZr().refresh()},_dispatchInteractAction:function(t,e,n){t.dispatchAction({type:"mapbox3DChangeCamera",pitch:e.getPitch(),zoom:e.getZoom(),center:e.getCenter().toArray(),bearing:e.getBearing(),mapbox3DId:this._mapbox3DModel&&this._mapbox3DModel.id})},_updateGroundMesh:function(){if(this._mapbox3DModel){var t=this._mapbox3DModel.coordinateSystem,e=t.dataToPoint(t.center);this._groundMesh.position.set(e[0],e[1],-.001);var n=new bo.Plane(new bo.Vector3(0,0,1),0),i=t.viewGL.camera.castRay(new bo.Vector2(-1,-1)),r=t.viewGL.camera.castRay(new bo.Vector2(1,1)),o=i.intersectPlane(n),a=r.intersectPlane(n),s=o.dist(a)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(t,e){this._zrLayer&&this._zrLayer.dispose(),e.getZr().painter.delLayer(-1e3)}}),Eu=Zo.mat4,Iu=512,Pu=.6435011087932844,Lu=Math.PI,ku=.1;function ju(){this.width=0,this.height=0,this.altitudeScale=1,this.boxHeight="auto",this.altitudeExtent,this.bearing=0,this.pitch=0,this.center=[0,0],this._origin,this.zoom=0,this._initialZoom,this.maxPitch=60,this.zoomOffset=0}ju.prototype={constructor:ju,dimensions:["lng","lat","alt"],containPoint:function(){},setCameraOption:function(t){this.bearing=t.bearing,this.pitch=t.pitch,this.center=t.center,this.zoom=t.zoom,this._origin||(this._origin=this.projectOnTileWithScale(this.center,Iu)),null==this._initialZoom&&(this._initialZoom=this.zoom),this.updateTransform()},updateTransform:function(){if(this.height){var t=.5/Math.tan(Pu/2)*this.height*ku,e=Math.max(Math.min(this.pitch,this.maxPitch),0)/180*Math.PI,n=Pu/2,i=Math.PI/2+e,r=Math.sin(n)*t/Math.sin(Math.PI-i-n),o=Math.cos(Math.PI/2-e)*r+t,a=1.1*o;this.pitch>50&&(a=1e3);var s=[];Eu.perspective(s,Pu,this.width/this.height,1,a),this.viewGL.camera.projectionMatrix.setArray(s),this.viewGL.camera.decomposeProjectionMatrix();s=Eu.identity([]);var l=this.dataToPoint(this.center);Eu.scale(s,s,[1,-1,1]),Eu.translate(s,s,[0,0,-t]),Eu.rotateX(s,s,e),Eu.rotateZ(s,s,-this.bearing/180*Math.PI),Eu.translate(s,s,[-l[0]*this.getScale()*ku,-l[1]*this.getScale()*ku,0]),this.viewGL.camera.viewMatrix.array=s;var c=[];Eu.invert(c,s),this.viewGL.camera.worldTransform.array=c,this.viewGL.camera.decomposeWorldTransform();var u,h=Iu*this.getScale();if(this.altitudeExtent&&!isNaN(this.boxHeight)){var f=this.altitudeExtent[1]-this.altitudeExtent[0];u=this.boxHeight/f*this.getScale()/Math.pow(2,this._initialZoom-this.zoomOffset)}else u=h/(2*Math.PI*6378e3*Math.abs(Math.cos(this.center[1]*(Math.PI/180))))*this.altitudeScale*ku;this.viewGL.rootNode.scale.set(this.getScale()*ku,this.getScale()*ku,u)}},getScale:function(){return Math.pow(2,this.zoom-this.zoomOffset)},projectOnTile:function(t,e){return this.projectOnTileWithScale(t,this.getScale()*Iu,e)},projectOnTileWithScale:function(t,e,n){var i=t[0],r=t[1],o=i*Lu/180,a=r*Lu/180,s=e*(o+Lu)/(2*Lu),l=e*(Lu-Math.log(Math.tan(Lu/4+.5*a)))/(2*Lu);return n=n||[],n[0]=s,n[1]=l,n},unprojectFromTile:function(t,e){return this.unprojectOnTileWithScale(t,this.getScale()*Iu,e)},unprojectOnTileWithScale:function(t,e,n){var i=t[0],r=t[1],o=i/e*(2*Lu)-Lu,a=2*(Math.atan(Math.exp(Lu-r/e*(2*Lu)))-Lu/4);return n=n||[],n[0]=180*o/Lu,n[1]=180*a/Lu,n},dataToPoint:function(t,e){return e=this.projectOnTileWithScale(t,Iu,e),e[0]-=this._origin[0],e[1]-=this._origin[1],e[2]=isNaN(t[2])?0:t[2],isNaN(t[2])||(e[2]=t[2],this.altitudeExtent&&(e[2]-=this.altitudeExtent[0])),e}};var Ru=ju;function Nu(){Ru.apply(this,arguments)}Nu.prototype=new Ru,Nu.prototype.constructor=Nu,Nu.prototype.type="mapbox3D";var Bu=Nu,Fu=function(t,e,n){function i(t,e){var n=e.getWidth(),i=e.getHeight(),r=e.getDevicePixelRatio();this.viewGL.setViewport(0,0,n,i,r),this.width=n,this.height=i,this.altitudeScale=t.get("altitudeScale"),this.boxHeight=t.get("boxHeight")}function r(t,e){if("auto"!==this.model.get("boxHeight")){var n=[1/0,-1/0];t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData(),i=t.coordDimToDataDim("alt")[0];if(i){var r=e.getDataExtent(i,!0);n[0]=Math.min(n[0],r[0]),n[1]=Math.max(n[1],r[1])}}}),this),n&&isFinite(n[1]-n[0])&&(this.altitudeExtent=n)}}return{dimensions:e.prototype.dimensions,create:function(o,a){var s=[];return o.eachComponent(t,(function(t){var n=t.__viewGL;n||(n=t.__viewGL=new al,n.setRootNode(new bo.Node));var o=new e;o.viewGL=t.__viewGL,o.resize=i,o.resize(t,a),s.push(o),t.coordinateSystem=o,o.model=t,o.update=r})),o.eachSeries((function(e){if(e.get("coordinateSystem")===t){var n=e.getReferringComponents(t).models[0];if(n||(n=o.getComponent(t)),!n)throw new Error(t+' "'+Ar.firstNotNull(e.get(t+"Index"),e.get(t+"Id"),0)+'" not found');e.coordinateSystem=n.coordinateSystem}})),n&&n(s,o,a),s}}},zu=Fu("mapbox3D",Bu,(function(t){t.forEach((function(t){t.setCameraOption(t.model.getMapboxCameraOption())}))})),Vu=zu;function Hu(t){t.registerComponentModel(Tu),t.registerComponentView(Du),t.registerCoordinateSystem("mapbox3D",Vu),t.registerAction({type:"mapbox3DChangeCamera",event:"mapbox3dcamerachanged",update:"mapbox3D:updateCamera"},(function(t,e){e.eachComponent({mainType:"mapbox3D",query:t},(function(e){e.setMapboxCameraOption(t)}))}))}Object(i["w"])(Hu);var Gu=["zoom","center","pitch","bearing"],Uu=i["c"].extend({type:"maptalks3D",layoutMode:"box",coordinateSystem:null,defaultOption:{zlevel:-10,urlTemplate:"http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>',center:[0,0],zoom:0,pitch:0,bearing:0,light:{main:{alpha:20,beta:30}},altitudeScale:1,boxHeight:"auto"},getMaptalksCameraOption:function(){var t=this;return Gu.reduce((function(e,n){return e[n]=t.get(n),e}),{})},setMaptalksCameraOption:function(t){null!=t&&Gu.forEach((function(e){null!=t[e]&&(this.option[e]=t[e])}),this)},getMaptalks:function(){return this._maptalks},setMaptalks:function(t){this._maptalks=t}});i["x"].merge(Uu.prototype,No),i["x"].merge(Uu.prototype,Bo);var Wu=Uu;function Xu(t,e,n,i){if(this.id=t,this.zr=e,this.dom=document.createElement("div"),this.dom.style.cssText="position:absolute;left:0;right:0;top:0;bottom:0;",!maptalks)throw new Error("Maptalks library must be included. See https://maptalks.org");this._maptalks=new maptalks.Map(this.dom,{center:n,zoom:i,doubleClickZoom:!1,fog:!1}),this._initEvents()}Xu.prototype.setUnpainted=function(){},Xu.prototype.resize=function(){this._maptalks.checkSize()},Xu.prototype.getMaptalks=function(){return this._maptalks},Xu.prototype.clear=function(){},Xu.prototype.refresh=function(){this._maptalks.checkSize()};var Yu=["mousedown","mouseup","click","dblclick","mousemove","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","touchcancel"];Xu.prototype._initEvents=function(){var t=this.dom;this._handlers=this._handlers||{contextmenu:function(t){return t.preventDefault(),!1}},Yu.forEach((function(e){this._handlers[e]=function(n){var i={};for(var r in n)i[r]=n[r];i.bubbles=!1;var o=new n.constructor(n.type,i);"mousewheel"===e||"DOMMouseScroll"===e?t.dispatchEvent(o):t.firstElementChild.dispatchEvent(o)},this.zr.dom.addEventListener(e,this._handlers[e])}),this),this.zr.dom.addEventListener("contextmenu",this._handlers.contextmenu)},Xu.prototype.dispose=function(){Yu.forEach((function(t){this.zr.dom.removeEventListener(t,this._handlers[t])}),this),this._maptalks.remove()};var qu=Xu;bo.Shader.import(Au);var Zu=i["d"].extend({type:"maptalks3D",__ecgl__:!0,init:function(t,e){this._groundMesh=new bo.Mesh({geometry:new bo.PlaneGeometry,material:new bo.Material({shader:new bo.Shader({vertex:bo.Shader.source("ecgl.displayShadow.vertex"),fragment:bo.Shader.source("ecgl.displayShadow.fragment")}),depthMask:!1}),renderOrder:-100,culling:!1,castShadow:!1,$ignorePicking:!0,renderNormal:!0})},_initMaptalksLayer:function(t,e){var n=e.getZr();this._zrLayer=new qu("maptalks3D",n,t.get("center"),t.get("zoom")),n.painter.insertLayer(-1e3,this._zrLayer),this._lightRoot=new bo.Node,this._sceneHelper=new ra(this._lightRoot),this._sceneHelper.initLight(this._lightRoot);var i=this._zrLayer.getMaptalks(),r=this._dispatchInteractAction.bind(this,e,i);["zoomend","zooming","zoomstart","dragrotating","pitch","pitchend","movestart","moving","moveend","resize","touchstart","touchmove","touchend","animating"].forEach((function(t){i.on(t,r)}))},render:function(t,e,n){this._zrLayer||this._initMaptalksLayer(t,n);var i=this._zrLayer.getMaptalks(),r=t.get("urlTemplate"),o=i.getBaseLayer();r!==this._oldUrlTemplate&&(o?o.setOptions({urlTemplate:r,attribution:t.get("attribution")}):(o=new maptalks.TileLayer("maptalks-echarts-gl-baselayer",{urlTemplate:r,subdomains:["a","b","c"],attribution:t.get("attribution")}),i.setBaseLayer(o))),this._oldUrlTemplate=r,i.setCenter(t.get("center")),i.setZoom(t.get("zoom"),{animation:!1}),i.setPitch(t.get("pitch")),i.setBearing(t.get("bearing")),t.setMaptalks(i);var a=t.coordinateSystem;a.viewGL.scene.add(this._lightRoot),a.viewGL.add(this._groundMesh),this._updateGroundMesh(),this._sceneHelper.setScene(a.viewGL.scene),this._sceneHelper.updateLight(t),a.viewGL.setPostEffect(t.getModel("postEffect"),n),a.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling")),this._maptalks3DModel=t},afterRender:function(t,e,n,i){var r=i.renderer;this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n),t.coordinateSystem.viewGL.scene.traverse((function(t){t.material&&(t.material.define("fragment","NORMAL_UP_AXIS",2),t.material.define("fragment","NORMAL_FRONT_AXIS",1))}))},updateCamera:function(t,e,n,i){t.coordinateSystem.setCameraOption(i),this._updateGroundMesh(),n.getZr().refresh()},_dispatchInteractAction:function(t,e,n){t.dispatchAction({type:"maptalks3DChangeCamera",pitch:e.getPitch(),zoom:$u(e.getResolution())+1,center:e.getCenter().toArray(),bearing:e.getBearing(),maptalks3DId:this._maptalks3DModel&&this._maptalks3DModel.id})},_updateGroundMesh:function(){if(this._maptalks3DModel){var t=this._maptalks3DModel.coordinateSystem,e=t.dataToPoint(t.center);this._groundMesh.position.set(e[0],e[1],-.001);var n=new bo.Plane(new bo.Vector3(0,0,1),0),i=t.viewGL.camera.castRay(new bo.Vector2(-1,-1)),r=t.viewGL.camera.castRay(new bo.Vector2(1,1)),o=i.intersectPlane(n),a=r.intersectPlane(n),s=o.dist(a)/t.viewGL.rootNode.scale.x;this._groundMesh.scale.set(s,s,1)}},dispose:function(t,e){this._zrLayer&&this._zrLayer.dispose(),e.getZr().painter.delLayer(-1e3)}});const Ku=12756274*Math.PI/(256*Math.pow(2,20));function $u(t){return 19-Math.log(t/Ku)/Math.LN2}function Ju(){Ru.apply(this,arguments),this.maxPitch=85,this.zoomOffset=1}Ju.prototype=new Ru,Ju.prototype.constructor=Ju,Ju.prototype.type="maptalks3D";var Qu=Ju,th=Fu("maptalks3D",Qu,(function(t){t.forEach((function(t){t.setCameraOption(t.model.getMaptalksCameraOption())}))})),eh=th;function nh(t){t.registerComponentModel(Wu),t.registerComponentView(Zu),t.registerCoordinateSystem("maptalks3D",eh),t.registerAction({type:"maptalks3DChangeCamera",event:"maptalks3dcamerachanged",update:"maptalks3D:updateCamera"},(function(t,e){e.eachComponent({mainType:"maptalks3D",query:t},(function(e){e.setMaptalksCameraOption(t)}))}))}Object(i["w"])(nh);var ih=Zo.vec3,rh=i["o"].dataStack.isDimensionStacked;function oh(t){var e=t[0],n=t[1];return!(e>0&&n>0||e<0&&n<0)}function ah(t,e){var n=t.getData(),r=t.get("barSize");if(null==r){var o,a,s=e.size,l=e.getAxis("x"),c=e.getAxis("y");o="category"===l.type?.7*l.getBandWidth():.6*Math.round(s[0]/Math.sqrt(n.count())),a="category"===c.type?.7*c.getBandWidth():.6*Math.round(s[1]/Math.sqrt(n.count())),r=[o,a]}else i["x"].isArray(r)||(r=[r,r]);var u=e.getAxis("z").scale.getExtent(),h=oh(u),f=["x","y","z"].map((function(e){return t.coordDimToDataDim(e)[0]})),d=rh(n,f[2]),p=d?n.getCalculationInfo("stackResultDimension"):f[2];n.each(f,(function(t,i,o,a){var s=n.get(p,a),l=d?s-o:h?0:u[0],c=e.dataToPoint([t,i,l]),f=e.dataToPoint([t,i,s]),g=ih.dist(c,f),m=[0,f[1]<c[1]?-1:1,0];0===Math.abs(g)&&(g=.1);var v=[r[0],g,r[1]];n.setItemLayout(a,[c,m,v])})),n.setLayout("orient",[1,0,0])}var sh=ah,lh=function(t,e,n){for(var i=t.getDataExtent(e),r=t.getDataExtent(n),o=i[1]-i[0]||i[0],a=r[1]-r[0]||r[0],s=50,l=new Uint8Array(s*s),c=0;c<t.count();c++){var u=t.get(e,c),h=t.get(n,c),f=Math.floor((u-i[0])/o*(s-1)),d=Math.floor((h-r[0])/a*(s-1)),p=d*s+f;l[p]=l[p]||1}var g=0;for(c=0;c<l.length;c++)l[c]&&g++;return g/l.length},ch=Zo.vec3,uh=i["o"].dataStack.isDimensionStacked;function hh(t,e){var n=t.getData(),r=t.get("minHeight")||0,o=t.get("barSize"),a=["lng","lat","alt"].map((function(e){return t.coordDimToDataDim(e)[0]}));if(null==o){var s=e.radius*Math.PI,l=lh(n,a[0],a[1]);o=[s/Math.sqrt(n.count()/l),s/Math.sqrt(n.count()/l)]}else i["x"].isArray(o)||(o=[o,o]);var c=ph(n,a);n.each(a,(function(t,i,a,s){var l=n.get(c.dimension,s),u=c.isStacked?l-a:e.altitudeAxis.scale.getExtent()[0],h=Math.max(e.altitudeAxis.dataToCoord(a),r),f=e.dataToPoint([t,i,u]),d=e.dataToPoint([t,i,l]),p=ch.sub([],d,f);ch.normalize(p,p);var g=[o[0],h,o[1]];n.setItemLayout(s,[f,p,g])})),n.setLayout("orient",fe.UP.array)}function fh(t,e){var n=t.getData(),r=t.get("barSize"),o=t.get("minHeight")||0,a=["lng","lat","alt"].map((function(e){return t.coordDimToDataDim(e)[0]}));if(null==r){var s=Math.min(e.size[0],e.size[2]),l=lh(n,a[0],a[1]);r=[s/Math.sqrt(n.count()/l),s/Math.sqrt(n.count()/l)]}else i["x"].isArray(r)||(r=[r,r]);var c=[0,1,0],u=ph(n,a);n.each(a,(function(t,i,a,s){var l=n.get(u.dimension,s),h=u.isStacked?l-a:e.altitudeAxis.scale.getExtent()[0],f=Math.max(e.altitudeAxis.dataToCoord(a),o),d=e.dataToPoint([t,i,h]),p=[r[0],f,r[1]];n.setItemLayout(s,[d,c,p])})),n.setLayout("orient",[1,0,0])}function dh(t,e){var n=t.getData(),r=t.coordDimToDataDim("lng")[0],o=t.coordDimToDataDim("lat")[0],a=t.coordDimToDataDim("alt")[0],s=t.get("barSize"),l=t.get("minHeight")||0;if(null==s){var c=n.getDataExtent(r),u=n.getDataExtent(o),h=e.dataToPoint([c[0],u[0]]),f=e.dataToPoint([c[1],u[1]]),d=Math.min(Math.abs(h[0]-f[0]),Math.abs(h[1]-f[1]))||1,p=lh(n,r,o);s=[d/Math.sqrt(n.count()/p),d/Math.sqrt(n.count()/p)]}else i["x"].isArray(s)||(s=[s,s]),s[0]/=e.getScale()/16,s[1]/=e.getScale()/16;var g=[0,0,1],m=[r,o,a],v=ph(n,m);n.each(m,(function(t,i,r,o){var a=n.get(v.dimension,o),c=v.isStacked?a-r:0,u=e.dataToPoint([t,i,c]),h=e.dataToPoint([t,i,a]),f=Math.max(h[2]-u[2],l),d=[s[0],f,s[1]];n.setItemLayout(o,[u,g,d])})),n.setLayout("orient",[1,0,0])}function ph(t,e){var n=uh(t,e[2]);return{dimension:n?t.getCalculationInfo("stackResultDimension"):e[2],isStacked:n}}function gh(t){t.registerLayout((function(t,e){t.eachSeriesByType("bar3D",(function(t){var e=t.coordinateSystem,n=e&&e.type;"globe"===n?hh(t,e):"cartesian3D"===n?sh(t,e):"geo3D"===n?fh(t,e):("mapbox3D"===n||"maptalks3D"===n)&&dh(t,e)}))}))}var mh={getFormattedLabel:function(t,e,n,r,o){n=n||"normal";var a=t.getData(r),s=a.getItemModel(e),l=t.getDataParams(e,r);null!=o&&l.value instanceof Array&&(l.value=l.value[o]);var c,u=s.get("normal"===n?["label","formatter"]:["emphasis","label","formatter"]);return null==u&&(u=s.get(["label","formatter"])),"function"===typeof u?(l.status=n,c=u(l)):"string"===typeof u&&(c=i["k"].formatTpl(u,l)),c},normalizeToArray:function(t){return t instanceof Array?t:null==t?[]:[t]}},vh=mh;function yh(t,e){var n=[];return i["x"].each(t.dimensions,(function(i){var r=t.getDimensionInfo(i),o=r.otherDims,a=o[e];null!=a&&!1!==a&&(n[a]=r.name)})),n}var _h=function(t,e,n){function r(t){var r=!0,a=[],s=yh(o,"tooltip");function l(t,e){var s=o.getDimensionInfo(e);if(s&&!1!==s.otherDims.tooltip){var l=s.type,c=(r?"- "+(s.tooltipName||s.name)+": ":"")+("ordinal"===l?t+"":"time"===l?n?"":i["k"].formatTime("yyyy/MM/dd hh:mm:ss",t):i["k"].addCommas(t));c&&a.push(i["k"].encodeHTML(c))}}return s.length?i["x"].each(s,(function(t){l(o.get(t,e),t)})):i["x"].each(t,l),(r?"<br/>":"")+a.join(r?"<br/>":", ")}var o=t.getData(),a=t.getRawValue(e),s=i["x"].isArray(a)?r(a):i["k"].encodeHTML(i["k"].addCommas(a)),l=o.getName(e),c=mc(o,e);i["x"].isObject(c)&&c.colorStops&&(c=(c.colorStops[0]||{}).color),c=c||"transparent";var u=i["k"].getTooltipMarker(c),h=t.name;return"\0-"===h&&(h=""),h=h?i["k"].encodeHTML(h)+(n?": ":"<br/>"):"",n?u+h+s:h+u+(l?i["k"].encodeHTML(l)+": "+s:s)},bh=function(t,e,n){n=n||t.getSource();var r=e||i["l"](t.get("coordinateSystem"))||["x","y","z"],o=i["o"].createDimensions(n,{dimensionsDefine:n.dimensionsDefine||t.get("dimensions"),encodeDefine:n.encodeDefine||t.get("encode"),coordDimensions:r.map((function(e){var n=t.getReferringComponents(e+"Axis3D").models[0];return{type:n&&"category"===n.get("type")?"ordinal":"float",name:e}}))});"cartesian3D"===t.get("coordinateSystem")&&o.forEach((function(e){if(r.indexOf(e.coordDim)>=0){var n=t.getReferringComponents(e.coordDim+"Axis3D").models[0];n&&"category"===n.get("type")&&(e.ordinalMeta=n.getOrdinalMeta())}}));var a=i["o"].dataStack.enableDataStack(t,o,{byIndex:!0,stackedCoordDimension:"z"}),s=new i["e"](o,t);return s.setCalculationInfo(a),s.initData(n),s},xh=i["g"].extend({type:"series.bar3D",dependencies:["globe"],visualStyleAccessPathvisu:"itemStyle",getInitialData:function(t,e){return bh(this)},getFormattedLabel:function(t,e,n,i){var r=vh.getFormattedLabel(this,t,e,n,i);return null==r&&(r=this.getData().get("z",t)),r},formatTooltip:function(t){return _h(this,t)},defaultOption:{coordinateSystem:"cartesian3D",globeIndex:0,grid3DIndex:0,zlevel:-10,bevelSize:0,bevelSmoothness:2,onGridPlane:"xy",shading:"color",minHeight:0,itemStyle:{opacity:1},label:{show:!1,distance:2,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},emphasis:{label:{show:!0}},animationDurationUpdate:500}});i["x"].merge(xh.prototype,Tl);var wh=xh,Sh=Zo.vec3,Th=Zo.mat3,Oh=pn.extend((function(){return{attributes:{position:new pn.Attribute("position","float",3,"POSITION"),normal:new pn.Attribute("normal","float",3,"NORMAL"),color:new pn.Attribute("color","float",4,"COLOR"),prevPosition:new pn.Attribute("prevPosition","float",3),prevNormal:new pn.Attribute("prevNormal","float",3)},dynamic:!0,enableNormal:!1,bevelSize:1,bevelSegments:0,_dataIndices:null,_vertexOffset:0,_triangleOffset:0}}),{resetOffset:function(){this._vertexOffset=0,this._triangleOffset=0},setBarCount:function(t){var e=this.enableNormal,n=this.getBarVertexCount()*t,i=this.getBarTriangleCount()*t;this.vertexCount!==n&&(this.attributes.position.init(n),e?this.attributes.normal.init(n):this.attributes.normal.value=null,this.attributes.color.init(n)),this.triangleCount!==i&&(this.indices=n>65535?new Uint32Array(3*i):new Uint16Array(3*i),this._dataIndices=new Uint32Array(n))},getBarVertexCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarVertexCount(t):this.enableNormal?24:8},getBarTriangleCount:function(){var t=this.bevelSize>0?this.bevelSegments:0;return t>0?this._getBevelBarTriangleCount(t):12},_getBevelBarVertexCount:function(t){return 4*(t+1)*(t+1)*2},_getBevelBarTriangleCount:function(t){var e=4*t+3,n=2*t+1;return(e+1)*n*2+4},setColor:function(t,e){for(var n=this.getBarVertexCount(),i=n*t,r=n*(t+1),o=i;o<r;o++)this.attributes.color.set(o,e);this.dirtyAttribute("color")},getDataIndexOfVertex:function(t){return this._dataIndices?this._dataIndices[t]:null},addBar:function(){for(var t=Sh.create,e=Sh.scaleAndAdd,n=t(),i=t(),r=t(),o=t(),a=t(),s=t(),l=t(),c=[],u=[],h=0;h<8;h++)c[h]=t();var f=[[0,1,5,4],[2,3,7,6],[4,5,6,7],[3,2,1,0],[0,4,7,3],[1,2,6,5]],d=[0,1,2,0,2,3],p=[];for(h=0;h<f.length;h++)for(var g=f[h],m=0;m<2;m++){for(var v=[],y=0;y<3;y++)v.push(g[d[3*m+y]]);p.push(v)}return function(t,h,g,m,v,y){var _=this._vertexOffset;if(this.bevelSize>0&&this.bevelSegments>0)this._addBevelBar(t,h,g,m,this.bevelSize,this.bevelSegments,v);else{Sh.copy(r,h),Sh.normalize(r,r),Sh.cross(o,g,r),Sh.normalize(o,o),Sh.cross(i,r,o),Sh.normalize(o,o),Sh.negate(a,i),Sh.negate(s,r),Sh.negate(l,o),e(c[0],t,i,m[0]/2),e(c[0],c[0],o,m[2]/2),e(c[1],t,i,m[0]/2),e(c[1],c[1],l,m[2]/2),e(c[2],t,a,m[0]/2),e(c[2],c[2],l,m[2]/2),e(c[3],t,a,m[0]/2),e(c[3],c[3],o,m[2]/2),e(n,t,r,m[1]),e(c[4],n,i,m[0]/2),e(c[4],c[4],o,m[2]/2),e(c[5],n,i,m[0]/2),e(c[5],c[5],l,m[2]/2),e(c[6],n,a,m[0]/2),e(c[6],c[6],l,m[2]/2),e(c[7],n,a,m[0]/2),e(c[7],c[7],o,m[2]/2);var b=this.attributes;if(this.enableNormal){u[0]=i,u[1]=a,u[2]=r,u[3]=s,u[4]=o,u[5]=l;for(var x=this._vertexOffset,w=0;w<f.length;w++){for(var S=3*this._triangleOffset,T=0;T<6;T++)this.indices[S++]=x+d[T];x+=4,this._triangleOffset+=2}for(w=0;w<f.length;w++){var O=u[w];for(T=0;T<4;T++){var C=f[w][T];b.position.set(this._vertexOffset,c[C]),b.normal.set(this._vertexOffset,O),b.color.set(this._vertexOffset++,v)}}}else{for(w=0;w<p.length;w++){for(S=3*this._triangleOffset,T=0;T<3;T++)this.indices[S+T]=p[w][T]+this._vertexOffset;this._triangleOffset++}for(w=0;w<c.length;w++)b.position.set(this._vertexOffset,c[w]),b.color.set(this._vertexOffset++,v)}}var M=this._vertexOffset;for(w=_;w<M;w++)this._dataIndices[w]=y}}(),_addBevelBar:function(){var t=Sh.create(),e=Sh.create(),n=Sh.create(),i=Th.create(),r=[],o=[1,-1,-1,1],a=[1,1,-1,-1],s=[2,0];return function(l,c,u,h,f,d,p){Sh.copy(e,c),Sh.normalize(e,e),Sh.cross(n,u,e),Sh.normalize(n,n),Sh.cross(t,e,n),Sh.normalize(n,n),i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=e[0],i[4]=e[1],i[5]=e[2],i[6]=n[0],i[7]=n[1],i[8]=n[2],f=Math.min(h[0],h[2])/2*f;for(var g=0;g<3;g++)r[g]=Math.max(h[g]-2*f,0);var m=(h[0]-r[0])/2,v=(h[1]-r[1])/2,y=(h[2]-r[2])/2,_=[],b=[],x=this._vertexOffset,w=[];for(g=0;g<2;g++){w[g]=w[g]=[];for(var S=0;S<=d;S++)for(var T=0;T<4;T++){(0===S&&0===g||1===g&&S===d)&&w[g].push(x);for(var O=0;O<=d;O++){var C=O/d*Math.PI/2+Math.PI/2*T,M=S/d*Math.PI/2+Math.PI/2*g;b[0]=m*Math.cos(C)*Math.sin(M),b[1]=v*Math.cos(M),b[2]=y*Math.sin(C)*Math.sin(M),_[0]=b[0]+o[T]*r[0]/2,_[1]=b[1]+v+s[g]*r[1]/2,_[2]=b[2]+a[T]*r[2]/2,Math.abs(m-v)<1e-6&&Math.abs(v-y)<1e-6||(b[0]/=m*m,b[1]/=v*v,b[2]/=y*y),Sh.normalize(b,b),Sh.transformMat3(_,_,i),Sh.transformMat3(b,b,i),Sh.add(_,_,l),this.attributes.position.set(x,_),this.enableNormal&&this.attributes.normal.set(x,b),this.attributes.color.set(x,p),x++}}}var A=4*d+3,D=2*d+1,E=A+1;for(T=0;T<D;T++)for(g=0;g<=A;g++){var I=T*E+g+this._vertexOffset,P=T*E+(g+1)%E+this._vertexOffset,L=(T+1)*E+(g+1)%E+this._vertexOffset,k=(T+1)*E+g+this._vertexOffset;this.setTriangleIndices(this._triangleOffset++,[L,I,P]),this.setTriangleIndices(this._triangleOffset++,[L,k,I])}this.setTriangleIndices(this._triangleOffset++,[w[0][0],w[0][2],w[0][1]]),this.setTriangleIndices(this._triangleOffset++,[w[0][0],w[0][3],w[0][2]]),this.setTriangleIndices(this._triangleOffset++,[w[1][0],w[1][1],w[1][2]]),this.setTriangleIndices(this._triangleOffset++,[w[1][0],w[1][2],w[1][3]]),this._vertexOffset=x}}()});i["x"].defaults(Oh.prototype,Yo),i["x"].defaults(Oh.prototype,dc);var Ch=Oh,Mh=Zo.vec3,Ah=i["b"].extend({type:"bar3D",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this._api=e,this._labelsBuilder=new xc(256,256,e);var n=this;this._labelsBuilder.getLabelPosition=function(t,e,i){if(n._data){var r=n._data.getItemLayout(t),o=r[0],a=r[1],s=r[2][1];return Mh.scaleAndAdd([],o,a,i+s)}return[0,0]},this._labelsBuilder.getMesh().renderOrder=100},render:function(t,e,n){var i=this._prevBarMesh;this._prevBarMesh=this._barMesh,this._barMesh=i,this._barMesh||(this._barMesh=new bo.Mesh({geometry:new Ch,shadowDepthMaterial:new bo.Material({shader:new bo.Shader(bo.Shader.source("ecgl.sm.depth.vertex"),bo.Shader.source("ecgl.sm.depth.fragment"))}),culling:"cartesian3D"===t.coordinateSystem.type,renderOrder:10,renderNormal:!0})),this.groupGL.remove(this._prevBarMesh),this.groupGL.add(this._barMesh),this.groupGL.add(this._labelsBuilder.getMesh());var r=t.coordinateSystem;if(this._doRender(t,n),r&&r.viewGL){r.viewGL.add(this.groupGL);var o=r.viewGL.isLinearSpace()?"define":"undefine";this._barMesh.material[o]("fragment","SRGB_DECODE")}this._data=t.getData(),this._labelsBuilder.updateData(this._data),this._labelsBuilder.updateLabels(),this._updateAnimation(t)},_updateAnimation:function(t){bo.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevBarMesh,this._barMesh,t)},_doRender:function(t,e){var n=t.getData(),i=t.get("shading"),r="color"!==i,o=this,a=this._barMesh,s="ecgl."+i;a.material&&a.material.shader.name===s||(a.material=bo.createMaterial(s,["VERTEX_COLOR"])),bo.setMaterialFromModel(i,a.material,t,e),a.geometry.enableNormal=r,a.geometry.resetOffset();var l=t.get("bevelSize"),c=t.get("bevelSmoothness");a.geometry.bevelSegments=c,a.geometry.bevelSize=l;var u=[],h=new Float32Array(4*n.count()),f=0,d=0,p=!1;n.each((function(t){if(n.hasValue(t)){var e=mc(n,t),i=vc(n,t);null==i&&(i=1),bo.parseColor(e,u),u[3]*=i,h[f++]=u[0],h[f++]=u[1],h[f++]=u[2],h[f++]=u[3],u[3]>0&&(d++,u[3]<.99&&(p=!0))}})),a.geometry.setBarCount(d);var g=n.getLayout("orient"),m=this._barIndexOfData=new Int32Array(n.count());d=0;n.each((function(t){if(n.hasValue(t)){var e=n.getItemLayout(t),i=e[0],r=e[1],a=e[2],s=4*t;u[0]=h[s++],u[1]=h[s++],u[2]=h[s++],u[3]=h[s++],u[3]>0&&(o._barMesh.geometry.addBar(i,r,g,a,u,t),m[t]=d++)}else m[t]=-1})),a.geometry.dirty(),a.geometry.updateBoundingBox();var v=a.material;v.transparent=p,v.depthMask=!p,a.geometry.sortTriangles=p,this._initHandler(t,e)},_initHandler:function(t,e){var n=t.getData(),i=this._barMesh,r="cartesian3D"===t.coordinateSystem.type;i.seriesIndex=t.seriesIndex;var o=-1;i.off("mousemove"),i.off("mouseout"),i.on("mousemove",(function(t){var a=i.geometry.getDataIndexOfVertex(t.triangle[0]);a!==o&&(this._downplay(o),this._highlight(a),this._labelsBuilder.updateLabels([a]),r&&e.dispatchAction({type:"grid3DShowAxisPointer",value:[n.get("x",a),n.get("y",a),n.get("z",a,!0)]})),o=a,i.dataIndex=a}),this),i.on("mouseout",(function(t){this._downplay(o),this._labelsBuilder.updateLabels(),o=-1,i.dataIndex=-1,r&&e.dispatchAction({type:"grid3DHideAxisPointer"})}),this)},_highlight:function(t){var e=this._data;if(e){var n=this._barIndexOfData[t];if(!(n<0)){var r=e.getItemModel(t),o=r.getModel("emphasis.itemStyle"),a=o.get("color"),s=o.get("opacity");if(null==a){var l=mc(e,t);a=i["h"].lift(l,-.4)}null==s&&(s=vc(e,t));var c=bo.parseColor(a);c[3]*=s,this._barMesh.geometry.setColor(n,c),this._api.getZr().refresh()}}},_downplay:function(t){var e=this._data;if(e){var n=this._barIndexOfData[t];if(!(n<0)){var i=mc(e,t),r=vc(e,t),o=bo.parseColor(i);o[3]*=r,this._barMesh.geometry.setColor(n,o),this._api.getZr().refresh()}}},highlight:function(t,e,n,i){this._toggleStatus("highlight",t,e,n,i)},downplay:function(t,e,n,i){this._toggleStatus("downplay",t,e,n,i)},_toggleStatus:function(t,e,n,r,o){var a=e.getData(),s=Ar.queryDataIndex(a,o),l=this;null!=s?i["x"].each(vh.normalizeToArray(s),(function(e){"highlight"===t?this._highlight(e):this._downplay(e)}),this):a.each((function(e){"highlight"===t?l._highlight(e):l._downplay(e)}))},remove:function(){this.groupGL.removeAll()},dispose:function(){this._labelsBuilder.dispose(),this.groupGL.removeAll()}});function Dh(t){t.registerChartView(Ah),t.registerSeriesModel(wh),gh(t),t.registerProcessor((function(t,e){t.eachSeriesByType("bar3d",(function(t){var e=t.getData();e.filterSelf((function(t){return e.hasValue(t)}))}))}))}Object(i["w"])(Dh);var Eh=i["g"].extend({type:"series.line3D",dependencies:["grid3D"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,e){return bh(this)},formatTooltip:function(t){return _h(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,lineStyle:{width:2},animationDurationUpdate:500}}),Ih=Eh,Ph=n("9680"),Lh=Zo.vec3;bo.Shader.import(Sa);var kh=i["b"].extend({type:"line3D",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this._api=e},render:function(t,e,n){var i=this._prevLine3DMesh;this._prevLine3DMesh=this._line3DMesh,this._line3DMesh=i,this._line3DMesh||(this._line3DMesh=new bo.Mesh({geometry:new Qo({useNativeLine:!1,sortTriangles:!0}),material:new bo.Material({shader:bo.createShader("ecgl.meshLines3D")}),renderOrder:10}),this._line3DMesh.geometry.pick=this._pick.bind(this)),this.groupGL.remove(this._prevLine3DMesh),this.groupGL.add(this._line3DMesh);var r=t.coordinateSystem;if(r&&r.viewGL){r.viewGL.add(this.groupGL);var o=r.viewGL.isLinearSpace()?"define":"undefine";this._line3DMesh.material[o]("fragment","SRGB_DECODE")}this._doRender(t,n),this._data=t.getData(),this._camera=r.viewGL.camera,this.updateCamera(),this._updateAnimation(t)},updateCamera:function(){this._updateNDCPosition()},_doRender:function(t,e){var n=t.getData(),i=this._line3DMesh;i.geometry.resetOffset();var r=n.getLayout("points"),o=[],a=new Float32Array(r.length/3*4),s=0,l=!1;n.each((function(t){var e=mc(n,t),i=vc(n,t);null==i&&(i=1),bo.parseColor(e,o),o[3]*=i,a[s++]=o[0],a[s++]=o[1],a[s++]=o[2],a[s++]=o[3],o[3]<.99&&(l=!0)})),i.geometry.setVertexCount(i.geometry.getPolylineVertexCount(r)),i.geometry.setTriangleCount(i.geometry.getPolylineTriangleCount(r)),i.geometry.addPolyline(r,a,Ar.firstNotNull(t.get("lineStyle.width"),1)),i.geometry.dirty(),i.geometry.updateBoundingBox();var c=i.material;c.transparent=l,c.depthMask=!l;var u=t.getModel("debug.wireframe");u.get("show")?(i.geometry.createAttribute("barycentric","float",3),i.geometry.generateBarycentric(),i.material.set("both","WIREFRAME_TRIANGLE"),i.material.set("wireframeLineColor",bo.parseColor(u.get("lineStyle.color")||"rgba(0,0,0,0.5)")),i.material.set("wireframeLineWidth",Ar.firstNotNull(u.get("lineStyle.width"),1))):i.material.set("both","WIREFRAME_TRIANGLE"),this._points=r,this._initHandler(t,e)},_updateAnimation:function(t){bo.updateVertexAnimation([["prevPosition","position"],["prevPositionPrev","positionPrev"],["prevPositionNext","positionNext"]],this._prevLine3DMesh,this._line3DMesh,t)},_initHandler:function(t,e){var n=t.getData(),i=t.coordinateSystem,r=this._line3DMesh,o=-1;r.seriesIndex=t.seriesIndex,r.off("mousemove"),r.off("mouseout"),r.on("mousemove",(function(t){var a=i.pointToData(t.point.array),s=n.indicesOfNearest("x",a[0])[0];s!==o&&(e.dispatchAction({type:"grid3DShowAxisPointer",value:[n.get("x",s),n.get("y",s),n.get("z",s)]}),r.dataIndex=s),o=s}),this),r.on("mouseout",(function(t){o=-1,r.dataIndex=-1,e.dispatchAction({type:"grid3DHideAxisPointer"})}),this)},_updateNDCPosition:function(){var t=new Oe,e=this._camera;Oe.multiply(t,e.projectionMatrix,e.viewMatrix);var n=this._positionNDC,i=this._points,r=i.length/3;n&&n.length/2===r||(n=this._positionNDC=new Float32Array(2*r));for(var o=[],a=0;a<r;a++){var s=3*a,l=2*a;o[0]=i[s],o[1]=i[s+1],o[2]=i[s+2],o[3]=1,Lh.transformMat4(o,o,t.array),n[l]=o[0]/o[3],n[l+1]=o[1]/o[3]}},_pick:function(t,e,n,i,r,o){var a=this._positionNDC,s=this._data.hostModel,l=s.get("lineStyle.width"),c=-1,u=n.viewport.width,h=n.viewport.height,f=.5*u,d=.5*h;t=(t+1)*f,e=(e+1)*d;for(var p=1;p<a.length/2;p++){var g=(a[2*(p-1)]+1)*f,m=(a[2*(p-1)+1]+1)*d,v=(a[2*p]+1)*f,y=(a[2*p+1]+1)*d;if(Ph["a"](g,m,v,y,l,t,e)){var _=(g-t)*(g-t)+(m-e)*(m-e),b=(v-t)*(v-t)+(y-e)*(y-e);c=_<b?p-1:p}}if(c>=0){var x=3*c,w=new fe(this._points[x],this._points[x+1],this._points[x+2]);o.push({dataIndex:c,point:w,pointWorld:w.clone(),target:this._line3DMesh,distance:this._camera.getWorldPosition().dist(w)})}},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function jh(t){t.registerChartView(kh),t.registerSeriesModel(Ih),t.registerLayout((function(t,e){t.eachSeriesByType("line3D",(function(t){var e=t.getData(),n=t.coordinateSystem;if(n){if("cartesian3D"!==n.type)return void 0;var i=new Float32Array(3*e.count()),r=[],o=[],a=n.dimensions,s=a.map((function(e){return t.coordDimToDataDim(e)[0]}));n&&e.each(s,(function(t,e,a,s){r[0]=t,r[1]=e,r[2]=a,n.dataToPoint(r,o),i[3*s]=o[0],i[3*s+1]=o[1],i[3*s+2]=o[2]})),e.setLayout("points",i)}}))}))}Object(i["w"])(jh);var Rh=i["g"].extend({type:"series.scatter3D",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(t,e){return bh(this)},getFormattedLabel:function(t,e,n,i){var r=vh.getFormattedLabel(this,t,e,n,i);if(null==r){var o=this.getData(),a=o.dimensions[o.dimensions.length-1];r=o.get(a,t)}return r},formatTooltip:function(t){return _h(this,t)},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,progressive:1e5,progressiveThreshold:1e5,grid3DIndex:0,globeIndex:0,symbol:"circle",symbolSize:10,blendMode:"source-over",label:{show:!1,position:"right",distance:5,textStyle:{fontSize:14,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:3}},itemStyle:{opacity:.8},emphasis:{label:{show:!0}},animationDurationUpdate:500}});function Nh(t,e,n){e=e||document.createElement("canvas");e.width=t,e.height=t;var i=e.getContext("2d");return n&&n(i),e}function Bh(t,e,n,r){i["x"].isArray(e)||(e=[e,e]);var o=zh.getMarginByStyle(n,r),a=e[0]+o.left+o.right,s=e[1]+o.top+o.bottom,l=i["o"].createSymbol(t,0,0,e[0],e[1]),c=Math.max(a,s);l.x=o.left,l.y=o.top,a>s?l.y+=(c-s)/2:l.x+=(c-a)/2;var u=l.getBoundingRect();return l.x-=u.x,l.y-=u.y,l.setStyle(n),l.update(),l.__size=c,l}function Fh(t,e,n){var i=e.width,r=e.height,o=t.canvas.width,a=t.canvas.height,s=i/o,l=r/a;function c(t){return t<128?1:-1}function u(t,o){var a=1/0;t=Math.floor(t*s),o=Math.floor(o*l);for(var u=o*i+t,h=e.data[4*u],f=c(h),d=Math.max(o-n,0);d<Math.min(o+n,r);d++)for(var p=Math.max(t-n,0);p<Math.min(t+n,i);p++){u=d*i+p;var g=e.data[4*u],m=c(g),v=p-t,y=d-o;if(f!==m){var _=v*v+y*y;_<a&&(a=_)}}return f*Math.sqrt(a)}for(var h=t.createImageData(o,a),f=0;f<a;f++)for(var d=0;d<o;d++){var p=u(d,f),g=p/n*.5+.5,m=4*(f*o+d);h.data[m++]=255*(1-g),h.data[m++]=255*(1-g),h.data[m++]=255*(1-g),h.data[m++]=255}return h}var zh={getMarginByStyle:function(t){var e=t.minMargin||0,n=0;t.stroke&&"none"!==t.stroke&&(n=null==t.lineWidth?1:t.lineWidth);var i=t.shadowBlur||0,r=t.shadowOffsetX||0,o=t.shadowOffsetY||0,a={};return a.left=Math.max(n/2,-r+i,e),a.right=Math.max(n/2,r+i,e),a.top=Math.max(n/2,-o+i,e),a.bottom=Math.max(n/2,o+i,e),a},createSymbolSprite:function(t,e,n,r){var o=Bh(t,e,n),a=zh.getMarginByStyle(n);return{image:Nh(o.__size,r,(function(t){i["p"](t,o)})),margin:a}},createSDFFromCanvas:function(t,e,n,i){return Nh(e,i,(function(e){var i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height);e.putImageData(Fh(e,r,n),0,0)}))},createSimpleSprite:function(t,e){return Nh(t,e,(function(e){var n=t/2;e.beginPath(),e.arc(n,n,60,0,2*Math.PI,!1),e.closePath();var i=e.createRadialGradient(n,n,0,n,n,n);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=i,e.fill()}))}},Vh=zh,Hh=Zo.vec3,Gh={needsSortVertices:function(){return this.sortVertices},needsSortVerticesProgressively:function(){return this.needsSortVertices()&&this.vertexCount>=2e4},doSortVertices:function(t,e){var n=this.indices,i=Hh.create();if(!n){n=this.indices=this.vertexCount>65535?new Uint32Array(this.vertexCount):new Uint16Array(this.vertexCount);for(var r=0;r<n.length;r++)n[r]=r}if(0===e){var o,a=this.attributes.position,s=(t=t.array,0);this._zList&&this._zList.length===this.vertexCount||(this._zList=new Float32Array(this.vertexCount));for(r=0;r<this.vertexCount;r++){a.get(r,i);var l=Hh.sqrDist(i,t);isNaN(l)&&(l=1e7,s++),0===r?(o=l,l=0):l-=o,this._zList[r]=l}this._noneCount=s}if(this.vertexCount<2e4)0===e&&this._simpleSort(this._noneCount/this.vertexCount>.05);else for(r=0;r<3;r++)this._progressiveQuickSort(3*e+r);this.dirtyIndices()},_simpleSort:function(t){var e=this._zList,n=this.indices;function i(t,n){return e[n]-e[t]}t?Array.prototype.sort.call(n,i):lc.sort(n,i,0,n.length-1)},_progressiveQuickSort:function(t){var e=this._zList,n=this.indices;this._quickSort=this._quickSort||new lc,this._quickSort.step(n,(function(t,n){return e[n]-e[t]}),t)}},Uh="@export ecgl.sdfSprite.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform float elapsedTime : 0;\n\nattribute vec3 position : POSITION;\n\n#ifdef VERTEX_SIZE\nattribute float size;\n#else\nuniform float u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\nattribute vec4 a_FillColor: COLOR;\nvarying vec4 v_Color;\n#endif\n\n#ifdef VERTEX_ANIMATION\nattribute vec3 prevPosition;\nattribute float prevSize;\nuniform float percent : 1.0;\n#endif\n\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvarying float v_Size;\n\nvoid main()\n{\n\n#ifdef POSITIONTEXTURE_ENABLED\n gl_Position = worldViewProjection * vec4(texture2D(positionTexture, position.xy).xy, -10.0, 1.0);\n#else\n\n #ifdef VERTEX_ANIMATION\n vec3 pos = mix(prevPosition, position, percent);\n #else\n vec3 pos = position;\n #endif\n gl_Position = worldViewProjection * vec4(pos, 1.0);\n#endif\n\n#ifdef VERTEX_SIZE\n#ifdef VERTEX_ANIMATION\n v_Size = mix(prevSize, size, percent);\n#else\n v_Size = size;\n#endif\n#else\n v_Size = u_Size;\n#endif\n\n#ifdef VERTEX_COLOR\n v_Color = a_FillColor;\n #endif\n\n gl_PointSize = v_Size;\n}\n\n@end\n\n@export ecgl.sdfSprite.fragment\n\nuniform vec4 color: [1, 1, 1, 1];\nuniform vec4 strokeColor: [1, 1, 1, 1];\nuniform float smoothing: 0.07;\n\nuniform float lineWidth: 0.0;\n\n#ifdef VERTEX_COLOR\nvarying vec4 v_Color;\n#endif\n\nvarying float v_Size;\n\nuniform sampler2D sprite;\n\n@import clay.util.srgb\n\nvoid main()\n{\n gl_FragColor = color;\n\n vec4 _strokeColor = strokeColor;\n\n#ifdef VERTEX_COLOR\n gl_FragColor *= v_Color;\n #endif\n\n#ifdef SPRITE_ENABLED\n float d = texture2D(sprite, gl_PointCoord).r;\n gl_FragColor.a *= smoothstep(0.5 - smoothing, 0.5 + smoothing, d);\n\n if (lineWidth > 0.0) {\n float sLineWidth = lineWidth / 2.0;\n\n float outlineMaxValue0 = 0.5 + sLineWidth;\n float outlineMaxValue1 = 0.5 + sLineWidth + smoothing;\n float outlineMinValue0 = 0.5 - sLineWidth - smoothing;\n float outlineMinValue1 = 0.5 - sLineWidth;\n\n if (d <= outlineMaxValue1 && d >= outlineMinValue0) {\n float a = _strokeColor.a;\n if (d <= outlineMinValue1) {\n a = a * smoothstep(outlineMinValue0, outlineMinValue1, d);\n }\n else {\n a = a * smoothstep(outlineMaxValue1, outlineMaxValue0, d);\n }\n gl_FragColor.rgb = mix(gl_FragColor.rgb * gl_FragColor.a, _strokeColor.rgb, a);\n gl_FragColor.a = gl_FragColor.a * (1.0 - a) + a;\n }\n }\n#endif\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(gl_FragColor);\n#endif\n}\n@end",Wh=Zo.vec4;bo.Shader.import(Uh);var Xh=bo.Mesh.extend((function(){var t=new bo.Geometry({dynamic:!0,attributes:{color:new bo.Geometry.Attribute("color","float",4,"COLOR"),position:new bo.Geometry.Attribute("position","float",3,"POSITION"),size:new bo.Geometry.Attribute("size","float",1),prevPosition:new bo.Geometry.Attribute("prevPosition","float",3),prevSize:new bo.Geometry.Attribute("prevSize","float",1)}});Object.assign(t,Gh);var e=new bo.Material({shader:bo.createShader("ecgl.sdfSprite"),transparent:!0,depthMask:!1});e.enableTexture("sprite"),e.define("both","VERTEX_COLOR"),e.define("both","VERTEX_SIZE");var n=new bo.Texture2D({image:document.createElement("canvas"),flipY:!1});return e.set("sprite",n),t.pick=this._pick.bind(this),{geometry:t,material:e,mode:bo.Mesh.POINTS,sizeScale:1}}),{_pick:function(t,e,n,i,r,o){var a=this._positionNDC;if(a)for(var s=n.viewport,l=2/s.width,c=2/s.height,u=this.geometry.vertexCount-1;u>=0;u--){var h;h=this.geometry.indices?this.geometry.indices[u]:u;var f=a[2*h],d=a[2*h+1],p=this.geometry.attributes.size.get(h)/this.sizeScale,g=p/2;if(t>f-g*l&&t<f+g*l&&e>d-g*c&&e<d+g*c){var m=new bo.Vector3,v=new bo.Vector3;this.geometry.attributes.position.get(h,m.array),bo.Vector3.transformMat4(v,m,this.worldTransform),o.push({vertexIndex:h,point:m,pointWorld:v,target:this,distance:v.distance(i.getWorldPosition())})}}},updateNDCPosition:function(t,e,n){var i=this._positionNDC,r=this.geometry;i&&i.length/2===r.vertexCount||(i=this._positionNDC=new Float32Array(2*r.vertexCount));for(var o=Wh.create(),a=0;a<r.vertexCount;a++)r.attributes.position.get(a,o),o[3]=1,Wh.transformMat4(o,o,t.array),Wh.scale(o,o,1/o[3]),i[2*a]=o[0],i[2*a+1]=o[1]}}),Yh=Xh,qh=20,Zh=-10;function Kh(t,e){return t&&e&&t[0]===e[0]&&t[1]===e[1]}function $h(t,e){this.rootNode=new bo.Node,this.is2D=t,this._labelsBuilder=new xc(256,256,e),this._labelsBuilder.getMesh().renderOrder=100,this.rootNode.add(this._labelsBuilder.getMesh()),this._api=e,this._spriteImageCanvas=document.createElement("canvas"),this._startDataIndex=0,this._endDataIndex=0,this._sizeScale=1}$h.prototype={constructor:$h,highlightOnMouseover:!0,update:function(t,e,n,i,r){var o=this._prevMesh;this._prevMesh=this._mesh,this._mesh=o;var a=t.getData();if(null==i&&(i=0),null==r&&(r=a.count()),this._startDataIndex=i,this._endDataIndex=r-1,!this._mesh){var s=this._prevMesh&&this._prevMesh.material;this._mesh=new Yh({renderOrder:10,frustumCulling:!1}),s&&(this._mesh.material=s)}s=this._mesh.material;var l=this._mesh.geometry,c=l.attributes;this.rootNode.remove(this._prevMesh),this.rootNode.add(this._mesh),this._setPositionTextureToMesh(this._mesh,this._positionTexture);var u=this._getSymbolInfo(t,i,r),h=n.getDevicePixelRatio(),f=t.getModel("itemStyle").getItemStyle(),d=t.get("large"),p=1;u.maxSize>2?(p=this._updateSymbolSprite(t,f,u,h),s.enableTexture("sprite")):s.disableTexture("sprite"),c.position.init(r-i);var g=[];if(d){s.undefine("VERTEX_SIZE"),s.undefine("VERTEX_COLOR");var m=pc(a),v=gc(a);bo.parseColor(m,g),g[3]*=v,s.set({color:g,u_Size:u.maxSize*this._sizeScale})}else s.set({color:[1,1,1,1]}),s.define("VERTEX_SIZE"),s.define("VERTEX_COLOR"),c.size.init(r-i),c.color.init(r-i),this._originalOpacity=new Float32Array(r-i);for(var y=a.getLayout("points"),_=c.position.value,b=0;b<r-i;b++){var x=3*b,w=2*b;if(this.is2D?(_[x]=y[w],_[x+1]=y[w+1],_[x+2]=Zh):(_[x]=y[x],_[x+1]=y[x+1],_[x+2]=y[x+2]),!d){m=mc(a,b),v=vc(a,b);bo.parseColor(m,g),g[3]*=v,c.color.set(b,g),g[3]<.99&&!0;var S=a.getItemVisual(b,"symbolSize");S=S instanceof Array?Math.max(S[0],S[1]):S,isNaN(S)&&(S=0),c.size.value[b]=S*p*this._sizeScale,this._originalOpacity[b]=g[3]}}this._mesh.sizeScale=p,l.updateBoundingBox(),l.dirty(),this._updateMaterial(t,f);var T=t.coordinateSystem;if(T&&T.viewGL){var O=T.viewGL.isLinearSpace()?"define":"undefine";s[O]("fragment","SRGB_DECODE")}d||this._updateLabelBuilder(t,i,r),this._updateHandler(t,e,n),this._updateAnimation(t),this._api=n},getPointsMesh:function(){return this._mesh},updateLabels:function(t){this._labelsBuilder.updateLabels(t)},hideLabels:function(){this.rootNode.remove(this._labelsBuilder.getMesh())},showLabels:function(){this.rootNode.add(this._labelsBuilder.getMesh())},dispose:function(){this._labelsBuilder.dispose()},_updateSymbolSprite:function(t,e,n,i){n.maxSize=Math.min(2*n.maxSize,200);var r=[];return n.aspect>1?(r[0]=n.maxSize,r[1]=n.maxSize/n.aspect):(r[1]=n.maxSize,r[0]=n.maxSize*n.aspect),r[0]=r[0]||1,r[1]=r[1]||1,this._symbolType===n.type&&Kh(this._symbolSize,r)&&this._lineWidth===e.lineWidth||(Vh.createSymbolSprite(n.type,r,{fill:"#fff",lineWidth:e.lineWidth,stroke:"transparent",shadowColor:"transparent",minMargin:Math.min(r[0]/2,10)},this._spriteImageCanvas),Vh.createSDFFromCanvas(this._spriteImageCanvas,Math.min(this._spriteImageCanvas.width,32),qh,this._mesh.material.get("sprite").image),this._symbolType=n.type,this._symbolSize=r,this._lineWidth=e.lineWidth),this._spriteImageCanvas.width/n.maxSize*i},_updateMaterial:function(t,e){var n="lighter"===t.get("blendMode")?bo.additiveBlend:null,i=this._mesh.material;i.blend=n,i.set("lineWidth",e.lineWidth/qh);var r=bo.parseColor(e.stroke);i.set("strokeColor",r),i.transparent=!0,i.depthMask=!1,i.depthTest=!this.is2D,i.sortVertices=!this.is2D},_updateLabelBuilder:function(t,e,n){var i=t.getData(),r=this._mesh.geometry,o=r.attributes.position.value,a=(e=this._startDataIndex,this._mesh.sizeScale);this._labelsBuilder.updateData(i,e,n),this._labelsBuilder.getLabelPosition=function(t,n,i){var r=3*(t-e);return[o[r],o[r+1],o[r+2]]},this._labelsBuilder.getLabelDistance=function(t,n,i){var o=r.attributes.size.get(t-e)/a;return o/2+i},this._labelsBuilder.updateLabels()},_updateAnimation:function(t){bo.updateVertexAnimation([["prevPosition","position"],["prevSize","size"]],this._prevMesh,this._mesh,t)},_updateHandler:function(t,e,n){var i,r=t.getData(),o=this._mesh,a=this,s=-1,l=t.coordinateSystem&&"cartesian3D"===t.coordinateSystem.type;l&&(i=t.coordinateSystem.model),o.seriesIndex=t.seriesIndex,o.off("mousemove"),o.off("mouseout"),o.on("mousemove",(function(e){var c=e.vertexIndex+a._startDataIndex;c!==s&&(this.highlightOnMouseover&&(this.downplay(r,s),this.highlight(r,c),this._labelsBuilder.updateLabels([c])),l&&n.dispatchAction({type:"grid3DShowAxisPointer",value:[r.get(t.coordDimToDataDim("x")[0],c),r.get(t.coordDimToDataDim("y")[0],c),r.get(t.coordDimToDataDim("z")[0],c)],grid3DIndex:i.componentIndex})),o.dataIndex=c,s=c}),this),o.on("mouseout",(function(t){var e=t.vertexIndex+a._startDataIndex;this.highlightOnMouseover&&(this.downplay(r,e),this._labelsBuilder.updateLabels()),s=-1,o.dataIndex=-1,l&&n.dispatchAction({type:"grid3DHideAxisPointer",grid3DIndex:i.componentIndex})}),this)},updateLayout:function(t,e,n){var i=t.getData();if(this._mesh){var r=this._mesh.geometry.attributes.position.value,o=i.getLayout("points");if(this.is2D)for(var a=0;a<o.length/2;a++){var s=3*a,l=2*a;r[s]=o[l],r[s+1]=o[l+1],r[s+2]=Zh}else for(a=0;a<o.length;a++)r[a]=o[a];this._mesh.geometry.dirty(),n.getZr().refresh()}},updateView:function(t){if(this._mesh){var e=new Oe;Oe.mul(e,t.viewMatrix,this._mesh.worldTransform),Oe.mul(e,t.projectionMatrix,e),this._mesh.updateNDCPosition(e,this.is2D,this._api)}},highlight:function(t,e){if(!(e>this._endDataIndex||e<this._startDataIndex)){var n=t.getItemModel(e),r=n.getModel("emphasis.itemStyle"),o=r.get("color"),a=r.get("opacity");if(null==o){var s=mc(t,e);o=i["h"].lift(s,-.4)}null==a&&(a=vc(t,e));var l=bo.parseColor(o);l[3]*=a,this._mesh.geometry.attributes.color.set(e-this._startDataIndex,l),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},downplay:function(t,e){if(!(e>this._endDataIndex||e<this._startDataIndex)){var n=mc(t,e),i=vc(t,e),r=bo.parseColor(n);r[3]*=i,this._mesh.geometry.attributes.color.set(e-this._startDataIndex,r),this._mesh.geometry.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeOutAll:function(t){if(this._originalOpacity){for(var e=this._mesh.geometry,n=0;n<e.vertexCount;n++){var i=this._originalOpacity[n]*t;e.attributes.color.value[4*n+3]=i}e.dirtyAttribute("color"),this._api.getZr().refresh()}},fadeInAll:function(){this.fadeOutAll(1)},setPositionTexture:function(t){this._mesh&&this._setPositionTextureToMesh(this._mesh,t),this._positionTexture=t},removePositionTexture:function(){this._positionTexture=null,this._mesh&&this._setPositionTextureToMesh(this._mesh,null)},setSizeScale:function(t){if(t!==this._sizeScale){if(this._mesh){var e=this._mesh.material.get("u_Size");this._mesh.material.set("u_Size",e/this._sizeScale*t);var n=this._mesh.geometry.attributes;if(n.size.value)for(var i=0;i<n.size.value.length;i++)n.size.value[i]=n.size.value[i]/this._sizeScale*t}this._sizeScale=t}},_setPositionTextureToMesh:function(t,e){e&&t.material.set("positionTexture",e),t.material[e?"enableTexture":"disableTexture"]("positionTexture")},_getSymbolInfo:function(t,e,n){if(t.get("large")){var i=Ar.firstNotNull(t.get("symbolSize"),1);return i instanceof Array?(s=Math.max(i[0],i[1]),r=i[0]/i[1]):(s=i,r=1),{maxSize:i,type:t.get("symbol"),aspect:r}}for(var r,o=t.getData(),a=o.getItemVisual(0,"symbol")||"circle",s=0,l=e;l<n;l++){i=o.getItemVisual(l,"symbolSize");var c,u=o.getItemVisual(l,"symbol");if(i instanceof Array)c=i[0]/i[1],s=Math.max(Math.max(i[0],i[1]),s);else{if(isNaN(i))continue;c=1,s=Math.max(i,s)}0,a=u,r=c}return{maxSize:s,type:a,aspect:r}}};var Jh=$h,Qh=i["b"].extend({type:"scatter3D",hasSymbolVisual:!0,__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this._pointsBuilderList=[],this._currentStep=0},render:function(t,e,n){if(this.groupGL.removeAll(),t.getData().count()){var i=t.coordinateSystem;if(i&&i.viewGL){i.viewGL.add(this.groupGL),this._camera=i.viewGL.camera;var r=this._pointsBuilderList[0];r||(r=this._pointsBuilderList[0]=new Jh(!1,n)),this._pointsBuilderList.length=1,this.groupGL.add(r.rootNode),r.update(t,e,n),r.updateView(i.viewGL.camera)}else 0}},incrementalPrepareRender:function(t,e,n){var i=t.coordinateSystem;i&&i.viewGL&&(i.viewGL.add(this.groupGL),this._camera=i.viewGL.camera),this.groupGL.removeAll(),this._currentStep=0},incrementalRender:function(t,e,n,i){if(!(t.end<=t.start)){var r=this._pointsBuilderList[this._currentStep];r||(r=new Jh(!1,i),this._pointsBuilderList[this._currentStep]=r),this.groupGL.add(r.rootNode),r.update(e,n,i,t.start,t.end),r.updateView(e.coordinateSystem.viewGL.camera),this._currentStep++}},updateCamera:function(){this._pointsBuilderList.forEach((function(t){t.updateView(this._camera)}),this)},highlight:function(t,e,n,i){this._toggleStatus("highlight",t,e,n,i)},downplay:function(t,e,n,i){this._toggleStatus("downplay",t,e,n,i)},_toggleStatus:function(t,e,n,r,o){var a=e.getData(),s=Ar.queryDataIndex(a,o),l="highlight"===t;null!=s?i["x"].each(vh.normalizeToArray(s),(function(t){for(var e=0;e<this._pointsBuilderList.length;e++){var n=this._pointsBuilderList[e];l?n.highlight(a,t):n.downplay(a,t)}}),this):a.each((function(t){for(var e=0;e<this._pointsBuilderList.length;e++){var n=this._pointsBuilderList[e];l?n.highlight(a,t):n.downplay(a,t)}}))},dispose:function(){this._pointsBuilderList.forEach((function(t){t.dispose()})),this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function tf(t){t.registerChartView(Qh),t.registerSeriesModel(Rh),t.registerLayout({seriesType:"scatter3D",reset:function(t){var e=t.coordinateSystem;if(e){var n=e.dimensions;if(n.length<3)return void 0;var i=n.map((function(e){return t.coordDimToDataDim(e)[0]})),r=[],o=[];return{progress:function(t,n){for(var a=new Float32Array(3*(t.end-t.start)),s=t.start;s<t.end;s++){var l=3*(s-t.start);r[0]=n.get(i[0],s),r[1]=n.get(i[1],s),r[2]=n.get(i[2],s),e.dataToPoint(r,o),a[l]=o[0],a[l+1]=o[1],a[l+2]=o[2]}n.setLayout("points",a)}}}}})}Object(i["w"])(tf);var ef=Zo.vec3,nf=Zo.vec2,rf=ef.normalize,of=ef.cross,af=ef.sub,sf=ef.add,lf=ef.create,cf=lf(),uf=lf(),hf=lf(),ff=lf(),df=[],pf=[];function gf(t,e){nf.copy(df,t[0]),nf.copy(pf,t[1]);var n=[],i=n[0]=lf(),r=n[1]=lf(),o=n[2]=lf(),a=n[3]=lf();e.dataToPoint(df,i),e.dataToPoint(pf,a),rf(cf,i),af(uf,a,i),rf(uf,uf),of(hf,uf,cf),rf(hf,hf),of(uf,cf,hf),sf(r,cf,uf),rf(r,r),rf(cf,a),af(uf,i,a),rf(uf,uf),of(hf,uf,cf),rf(hf,hf),of(uf,cf,hf),sf(o,cf,uf),rf(o,o),sf(ff,i,a),rf(ff,ff);var s=ef.dot(i,ff),l=ef.dot(ff,r),c=(Math.max(ef.len(i),ef.len(a))-s)/l*2;return ef.scaleAndAdd(r,i,r,c),ef.scaleAndAdd(o,a,o,c),n}function mf(t,e,n){var i=[],r=i[0]=ef.create(),o=i[1]=ef.create(),a=i[2]=ef.create(),s=i[3]=ef.create();e.dataToPoint(t[0],r),e.dataToPoint(t[1],s);var l=ef.dist(r,s);return ef.lerp(o,r,s,.3),ef.lerp(a,r,s,.3),ef.scaleAndAdd(o,o,n,Math.min(.1*l,10)),ef.scaleAndAdd(a,a,n,Math.min(.1*l,10)),i}function vf(t,e){for(var n=new Float32Array(3*t.length),i=0,r=[],o=0;o<t.length;o++)e.dataToPoint(t[o],r),n[i++]=r[0],n[i++]=r[1],n[i++]=r[2];return n}function yf(t){var e=[];return t.each((function(n){var i=t.getItemModel(n),r=i.option instanceof Array?i.option:i.getShallow("coords",!0);e.push(r)})),{coordsList:e}}function _f(t,e){var n=t.getData(),i=t.get("polyline");n.setLayout("lineType",i?"polyline":"cubicBezier");var r=yf(n);n.each((function(t){var o=r.coordsList[t],a=i?vf:gf;n.setItemLayout(t,a(o,e))}))}function bf(t,e,n){var i=t.getData(),r=t.get("polyline"),o=yf(i);i.setLayout("lineType",r?"polyline":"cubicBezier"),i.each((function(t){var a=o.coordsList[t],s=r?vf(a,e):mf(a,e,n);i.setItemLayout(t,s)}))}function xf(t,e){t.eachSeriesByType("lines3D",(function(t){var e=t.coordinateSystem;"globe"===e.type?_f(t,e):"geo3D"===e.type?bf(t,e,[0,1,0]):"mapbox3D"!==e.type&&"maptalks3D"!==e.type||bf(t,e,[0,0,1])}))}var wf=i["g"].extend({type:"series.lines3D",dependencies:["globe"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",getInitialData:function(t,e){var n=new i["e"](["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0})),n},defaultOption:{coordinateSystem:"globe",globeIndex:0,geo3DIndex:0,zlevel:-10,polyline:!1,effect:{show:!1,period:4,trailWidth:4,trailLength:.2,spotIntensity:6},silent:!0,blendMode:"source-over",lineStyle:{width:1,opacity:.5}}}),Sf="@export ecgl.trail2.vertex\nattribute vec3 position: POSITION;\nattribute vec3 positionPrev;\nattribute vec3 positionNext;\nattribute float offset;\nattribute float dist;\nattribute float distAll;\nattribute float start;\n\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\nuniform float near : NEAR;\n\nuniform float speed : 0;\nuniform float trailLength: 0.3;\nuniform float time;\nuniform float period: 1000;\n\nuniform float spotSize: 1;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.vertexHeader\n\n@import ecgl.lines3D.clipNear\n\nvoid main()\n{\n @import ecgl.lines3D.expandLine\n\n gl_Position = currProj;\n\n v_Color = a_Color;\n\n @import ecgl.common.wireframe.vertexMain\n\n#ifdef CONSTANT_SPEED\n float t = mod((speed * time + start) / distAll, 1. + trailLength) - trailLength;\n#else\n float t = mod((time + start) / period, 1. + trailLength) - trailLength;\n#endif\n\n float trailLen = distAll * trailLength;\n\n v_Percent = (dist - t * distAll) / trailLen;\n\n v_SpotPercent = spotSize / distAll;\n\n }\n@end\n\n\n@export ecgl.trail2.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform float spotIntensity: 5;\n\nvarying vec4 v_Color;\nvarying float v_Percent;\nvarying float v_SpotPercent;\n\n@import ecgl.common.wireframe.fragmentHeader\n\n@import clay.util.srgb\n\nvoid main()\n{\n if (v_Percent > 1.0 || v_Percent < 0.0) {\n discard;\n }\n\n float fade = v_Percent;\n\n#ifdef SRGB_DECODE\n gl_FragColor = sRGBToLinear(color * v_Color);\n#else\n gl_FragColor = color * v_Color;\n#endif\n\n @import ecgl.common.wireframe.fragmentMain\n\n if (v_Percent > (1.0 - v_SpotPercent)) {\n gl_FragColor.rgb *= spotIntensity;\n }\n\n gl_FragColor.a *= fade;\n}\n\n@end",Tf=Zo.vec3;function Of(t){return t>0?1:-1}bo.Shader.import(Sf);var Cf=bo.Mesh.extend((function(){var t=new bo.Material({shader:new bo.Shader(bo.Shader.source("ecgl.trail2.vertex"),bo.Shader.source("ecgl.trail2.fragment")),transparent:!0,depthMask:!1}),e=new Qo({dynamic:!0});return e.createAttribute("dist","float",1),e.createAttribute("distAll","float",1),e.createAttribute("start","float",1),{geometry:e,material:t,culling:!1,$ignorePicking:!0}}),{updateData:function(t,e,n){var i=t.hostModel,r=this.geometry,o=i.getModel("effect"),a=o.get("trailWidth")*e.getDevicePixelRatio(),s=o.get("trailLength"),l=i.get("effect.constantSpeed"),c=1e3*i.get("effect.period"),u=null!=l;u?this.material.set("speed",l/1e3):this.material.set("period",c),this.material[u?"define":"undefine"]("vertex","CONSTANT_SPEED");var h=i.get("polyline");r.trailLength=s,this.material.set("trailLength",s),r.resetOffset(),["position","positionPrev","positionNext"].forEach((function(t){r.attributes[t].value=n.attributes[t].value}));var f=["dist","distAll","start","offset","color"];f.forEach((function(t){r.attributes[t].init(r.vertexCount)})),r.indices=n.indices;var d=[],p=o.get("trailColor"),g=o.get("trailOpacity"),m=null!=p,v=null!=g;this.updateWorldTransform();var y=this.worldTransform.x.len(),_=this.worldTransform.y.len(),b=this.worldTransform.z.len(),x=0,w=0;t.each((function(e){var i=t.getItemLayout(e),o=v?g:vc(t,e),s=mc(t,e);null==o&&(o=1),d=bo.parseColor(m?p:s,d),d[3]*=o;for(var l=h?n.getPolylineVertexCount(i):n.getCubicCurveVertexCount(i[0],i[1],i[2],i[3]),f=0,S=[],T=[],O=x;O<x+l;O++)r.attributes.position.get(O,S),S[0]*=y,S[1]*=_,S[2]*=b,O>x&&(f+=Tf.dist(S,T)),r.attributes.dist.set(O,f),Tf.copy(T,S);w=Math.max(w,f);var C=Math.random()*(u?f:c);for(O=x;O<x+l;O++)r.attributes.distAll.set(O,f),r.attributes.start.set(O,C),r.attributes.offset.set(O,Of(n.attributes.offset.get(O))*a/2),r.attributes.color.set(O,d);x+=l})),this.material.set("spotSize",.1*w*s),this.material.set("spotIntensity",o.get("spotIntensity")),r.dirty()},setAnimationTime:function(t){this.material.set("time",t)}});function Mf(t){return null!=t.radius?t.radius:null!=t.size?Math.max(t.size[0],t.size[1],t.size[2]):100}bo.Shader.import(Sa);var Af=i["b"].extend({type:"lines3D",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this._meshLinesMaterial=new bo.Material({shader:bo.createShader("ecgl.meshLines3D"),transparent:!0,depthMask:!1}),this._linesMesh=new bo.Mesh({geometry:new Qo,material:this._meshLinesMaterial,$ignorePicking:!0}),this._trailMesh=new Cf},render:function(t,e,n){this.groupGL.add(this._linesMesh);var i=t.coordinateSystem,r=t.getData();if(i&&i.viewGL){var o=i.viewGL;o.add(this.groupGL),this._updateLines(t,e,n);var a=i.viewGL.isLinearSpace()?"define":"undefine";this._linesMesh.material[a]("fragment","SRGB_DECODE"),this._trailMesh.material[a]("fragment","SRGB_DECODE")}var s=this._trailMesh;if(s.stopAnimation(),t.get("effect.show")){this.groupGL.add(s),s.updateData(r,n,this._linesMesh.geometry),s.__time=s.__time||0;var l=36e5;this._curveEffectsAnimator=s.animate("",{loop:!0}).when(l,{__time:l}).during((function(){s.setAnimationTime(s.__time)})).start()}else this.groupGL.remove(s),this._curveEffectsAnimator=null;this._linesMesh.material.blend=this._trailMesh.material.blend="lighter"===t.get("blendMode")?bo.additiveBlend:null},pauseEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.pause()},resumeEffect:function(){this._curveEffectsAnimator&&this._curveEffectsAnimator.resume()},toggleEffect:function(){var t=this._curveEffectsAnimator;t&&(t.isPaused()?t.resume():t.pause())},_updateLines:function(t,e,n){var i=t.getData(),r=t.coordinateSystem,o=this._linesMesh.geometry,a=t.get("polyline");o.expandLine=!0;var s=Mf(r);o.segmentScale=s/20;var l="lineStyle.width".split("."),c=n.getDevicePixelRatio(),u=0;i.each((function(t){var e=i.getItemModel(t),n=e.get(l);null==n&&(n=1),i.setItemVisual(t,"lineWidth",n),u=Math.max(n,u)})),o.useNativeLine=!1;var h=0,f=0;i.each((function(t){var e=i.getItemLayout(t);a?(h+=o.getPolylineVertexCount(e),f+=o.getPolylineTriangleCount(e)):(h+=o.getCubicCurveVertexCount(e[0],e[1],e[2],e[3]),f+=o.getCubicCurveTriangleCount(e[0],e[1],e[2],e[3]))})),o.setVertexCount(h),o.setTriangleCount(f),o.resetOffset();var d=[];i.each((function(t){var e=i.getItemLayout(t),n=mc(i,t),r=vc(i,t),s=i.getItemVisual(t,"lineWidth")*c;null==r&&(r=1),d=bo.parseColor(n,d),d[3]*=r,a?o.addPolyline(e,d,s):o.addCubicCurve(e[0],e[1],e[2],e[3],d,s)})),o.dirty()},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll()}});function Df(t){t.registerChartView(Af),t.registerSeriesModel(wf),t.registerLayout(xf),t.registerAction({type:"lines3DPauseEffect",event:"lines3deffectpaused",update:"series.lines3D:pauseEffect"},(function(){})),t.registerAction({type:"lines3DResumeEffect",event:"lines3deffectresumed",update:"series.lines3D:resumeEffect"},(function(){})),t.registerAction({type:"lines3DToggleEffect",event:"lines3deffectchanged",update:"series.lines3D:toggleEffect"},(function(){}))}function Ef(t,e){for(var n=[],i=0;i<e.length;i++)n.push(t.dataToPoint(e[i]));return n}Object(i["w"])(Df);var If=i["g"].extend({type:"series.polygons3D",getRegionModel:function(t){return this.getData().getItemModel(t)},getRegionPolygonCoords:function(t){var e=this.coordinateSystem,n=this.getData().getItemModel(t),i=n.option instanceof Array?n.option:n.getShallow("coords");n.get("multiPolygon")||(i=[i]);for(var r=[],o=0;o<i.length;o++){for(var a=[],s=1;s<i[o].length;s++)a.push(Ef(e,i[o][s]));r.push({exterior:Ef(e,i[o][0]),interiors:a})}return r},getInitialData:function(t){var e=new i["e"](["value"],this);return e.hasItemOption=!1,e.initData(t.data,[],(function(t,n,i,r){if(t instanceof Array)return NaN;e.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0})),e},defaultOption:{show:!0,data:null,multiPolygon:!1,progressiveThreshold:1e3,progressive:1e3,zlevel:-10,label:{show:!1,distance:2,textStyle:{fontSize:20,color:"#000",backgroundColor:"rgba(255,255,255,0.7)",padding:3,borderRadius:4}},itemStyle:{color:"#fff",borderWidth:0,borderColor:"#333"},emphasis:{itemStyle:{color:"#639fc0"},label:{show:!0}}}});i["x"].merge(If.prototype,Tl);var Pf=If,Lf=i["b"].extend({type:"polygons3D",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this._geo3DBuilderList=[],this._currentStep=0},render:function(t,e,n){this.groupGL.removeAll();var i=t.coordinateSystem;i&&i.viewGL&&i.viewGL.add(this.groupGL);var r=this._geo3DBuilderList[0];r||(r=new Tc(n),r.extrudeY="mapbox3D"!==i.type&&"maptalks3D"!==i.type,this._geo3DBuilderList[0]=r),this._updateShaderDefines(i,r),r.update(t,e,n),this._geo3DBuilderList.length=1,this.groupGL.add(r.rootNode)},incrementalPrepareRender:function(t,e,n){this.groupGL.removeAll();var i=t.coordinateSystem;i&&i.viewGL&&i.viewGL.add(this.groupGL),this._currentStep=0},incrementalRender:function(t,e,n,i){var r=this._geo3DBuilderList[this._currentStep],o=e.coordinateSystem;r||(r=new Tc(i),r.extrudeY="mapbox3D"!==o.type&&"maptalks3D"!==o.type,this._geo3DBuilderList[this._currentStep]=r),r.update(e,n,i,t.start,t.end),this.groupGL.add(r.rootNode),this._updateShaderDefines(o,r),this._currentStep++},_updateShaderDefines:function(t,e){var n=t.viewGL.isLinearSpace()?"define":"undefine";e.rootNode.traverse((function(e){e.material&&(e.material[n]("fragment","SRGB_DECODE"),"mapbox3D"!==t.type&&"maptalks3D"!==t.type||(e.material.define("fragment","NORMAL_UP_AXIS",2),e.material.define("fragment","NORMAL_FRONT_AXIS",1)))}))},remove:function(){this.groupGL.removeAll()},dispose:function(){this.groupGL.removeAll(),this._geo3DBuilderList.forEach((function(t){t.dispose()}))}});function kf(t){t.registerChartView(Lf),t.registerSeriesModel(Pf)}Object(i["w"])(kf);var jf=i["g"].extend({type:"series.surface",dependencies:["globe","grid3D","geo3D"],visualStyleAccessPath:"itemStyle",formatTooltip:function(t){return _h(this,t)},getInitialData:function(t,e){var n=t.data;function r(t){return!(isNaN(t.min)||isNaN(t.max)||isNaN(t.step))}function o(t){var e=i["q"].getPrecisionSafe;return Math.max(e(t.min),e(t.max),e(t.step))+1}if(!n)if(t.parametric){var a=t.parametricEquation||{},s=a.u||{},l=a.v||{};["u","v"].forEach((function(t){r(a[t])})),["x","y","z"].forEach((function(t){a[t]}));var c=Math.floor((s.max+s.step-s.min)/s.step),u=Math.floor((l.max+l.step-l.min)/l.step);n=new Float32Array(c*u*5);var h=o(s),f=o(l);for(T=0,O=0;O<u;O++)for(C=0;C<c;C++){var d=C*s.step+s.min,p=O*l.step+l.min,g=i["q"].round(Math.min(d,s.max),h),m=i["q"].round(Math.min(p,l.max),f);M=a.x(g,m),A=a.y(g,m),I=a.z(g,m);n[T++]=M,n[T++]=A,n[T++]=I,n[T++]=g,n[T++]=m}}else{var v=t.equation||{},y=v.x||{},_=v.y||{};if(["x","y"].forEach((function(t){r(v[t])})),"function"!==typeof v.z)return void 0;var b=Math.floor((y.max+y.step-y.min)/y.step),x=Math.floor((_.max+_.step-_.min)/_.step);n=new Float32Array(b*x*3);for(var w=o(y),S=o(_),T=0,O=0;O<x;O++)for(var C=0;C<b;C++){var M=C*y.step+y.min,A=O*_.step+_.min,D=i["q"].round(Math.min(M,y.max),w),E=i["q"].round(Math.min(A,_.max),S),I=v.z(D,E);n[T++]=D,n[T++]=E,n[T++]=I}}var P=["x","y","z"];t.parametric&&P.push("u","v");var L=bh(this,P,n);return L},defaultOption:{coordinateSystem:"cartesian3D",zlevel:-10,grid3DIndex:0,shading:"lambert",parametric:!1,wireframe:{show:!0,lineStyle:{color:"rgba(0,0,0,0.5)",width:1}},equation:{x:{min:-1,max:1,step:.1},y:{min:-1,max:1,step:.1},z:null},parametricEquation:{u:{min:-1,max:1,step:.1},v:{min:-1,max:1,step:.1},x:null,y:null,z:null},dataShape:null,itemStyle:{},animationDurationUpdate:500}});i["x"].merge(jf.prototype,Tl);var Rf=jf,Nf=Zo.vec3;function Bf(t){return isNaN(t[0])||isNaN(t[1])||isNaN(t[2])}var Ff=i["b"].extend({type:"surface",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node},render:function(t,e,n){var i=this._prevSurfaceMesh;this._prevSurfaceMesh=this._surfaceMesh,this._surfaceMesh=i,this._surfaceMesh||(this._surfaceMesh=this._createSurfaceMesh()),this.groupGL.remove(this._prevSurfaceMesh),this.groupGL.add(this._surfaceMesh);var r=t.coordinateSystem,o=t.get("shading"),a=t.getData(),s="ecgl."+o;if(this._surfaceMesh.material&&this._surfaceMesh.material.shader.name===s||(this._surfaceMesh.material=bo.createMaterial(s,["VERTEX_COLOR","DOUBLE_SIDED"])),bo.setMaterialFromModel(o,this._surfaceMesh.material,t,n),r&&r.viewGL){r.viewGL.add(this.groupGL);var l=r.viewGL.isLinearSpace()?"define":"undefine";this._surfaceMesh.material[l]("fragment","SRGB_DECODE")}var c=t.get("parametric"),u=t.get("dataShape");u||(u=this._getDataShape(a,c));var h=t.getModel("wireframe"),f=h.get("lineStyle.width"),d=h.get("show")&&f>0;this._updateSurfaceMesh(this._surfaceMesh,t,u,d);var p=this._surfaceMesh.material;d?(p.define("WIREFRAME_QUAD"),p.set("wireframeLineWidth",f),p.set("wireframeLineColor",bo.parseColor(h.get("lineStyle.color")))):p.undefine("WIREFRAME_QUAD"),this._initHandler(t,n),this._updateAnimation(t)},_updateAnimation:function(t){bo.updateVertexAnimation([["prevPosition","position"],["prevNormal","normal"]],this._prevSurfaceMesh,this._surfaceMesh,t)},_createSurfaceMesh:function(){var t=new bo.Mesh({geometry:new bo.Geometry({dynamic:!0,sortTriangles:!0}),shadowDepthMaterial:new bo.Material({shader:new bo.Shader(bo.Shader.source("ecgl.sm.depth.vertex"),bo.Shader.source("ecgl.sm.depth.fragment"))}),culling:!1,renderOrder:10,renderNormal:!0});return t.geometry.createAttribute("barycentric","float",4),t.geometry.createAttribute("prevPosition","float",3),t.geometry.createAttribute("prevNormal","float",3),Object.assign(t.geometry,dc),t},_initHandler:function(t,e){var n=t.getData(),i=this._surfaceMesh,r=t.coordinateSystem;function o(t,e){for(var n=1/0,r=-1,o=[],a=0;a<t.length;a++){i.geometry.attributes.position.get(t[a],o);var s=Nf.dist(e.array,o);s<n&&(n=s,r=t[a])}return r}i.seriesIndex=t.seriesIndex;var a=-1;i.off("mousemove"),i.off("mouseout"),i.on("mousemove",(function(t){var s=o(t.triangle,t.point);if(s>=0){var l=[];i.geometry.attributes.position.get(s,l);for(var c=r.pointToData(l),u=1/0,h=-1,f=[],d=0;d<n.count();d++){f[0]=n.get("x",d),f[1]=n.get("y",d),f[2]=n.get("z",d);var p=Nf.squaredDistance(f,c);p<u&&(h=d,u=p)}h!==a&&e.dispatchAction({type:"grid3DShowAxisPointer",value:c}),a=h,i.dataIndex=h}else i.dataIndex=-1}),this),i.on("mouseout",(function(t){a=-1,i.dataIndex=-1,e.dispatchAction({type:"grid3DHideAxisPointer"})}),this)},_updateSurfaceMesh:function(t,e,n,i){var r=t.geometry,o=e.getData(),a=o.getLayout("points"),s=0;o.each((function(t){o.hasValue(t)||s++}));var l=s||i,c=r.attributes.position,u=r.attributes.normal,h=r.attributes.texcoord0,f=r.attributes.barycentric,d=r.attributes.color,p=n[0],g=n[1],m=e.get("shading"),v="color"!==m;if(l){var y=(p-1)*(g-1)*4;c.init(y),i&&f.init(y)}else c.value=new Float32Array(a);d.init(r.vertexCount),h.init(r.vertexCount);var _=[0,3,1,1,3,2],b=[[1,1,0,0],[0,1,0,1],[1,0,0,1],[1,0,1,0]],x=r.indices=new(r.vertexCount>65535?Uint32Array:Uint16Array)((p-1)*(g-1)*6),w=function(t,e,n){n[1]=t*g+e,n[0]=t*g+e+1,n[3]=(t+1)*g+e+1,n[2]=(t+1)*g+e},S=!1;if(l){var T=[],O=[],C=0;v?u.init(r.vertexCount):u.value=null;for(var M=[[],[],[]],A=[],D=[],E=Nf.create(),I=function(t,e,n){var i=3*e;return n[0]=t[i],n[1]=t[i+1],n[2]=t[i+2],n},P=new Float32Array(a.length),L=new Float32Array(a.length/3*4),k=0;k<o.count();k++)if(o.hasValue(k)){var j=bo.parseColor(mc(o,k)),R=vc(o,k);null!=R&&(j[3]*=R),j[3]<.99&&(S=!0);for(var N=0;N<4;N++)L[4*k+N]=j[N]}var B=[1e7,1e7,1e7];for(k=0;k<p-1;k++)for(var F=0;F<g-1;F++){var z=k*(g-1)+F,V=4*z;w(k,F,T);var H=!1;for(N=0;N<4;N++)I(a,T[N],O),Bf(O)&&(H=!0);for(N=0;N<4;N++)H?c.set(V+N,B):(I(a,T[N],O),c.set(V+N,O)),i&&f.set(V+N,b[N]);for(N=0;N<6;N++)x[C++]=_[N]+V;if(v&&!H)for(N=0;N<2;N++){for(var G=3*N,U=0;U<3;U++){var W=T[_[G]+U];I(a,W,M[U])}Nf.sub(A,M[0],M[1]),Nf.sub(D,M[1],M[2]),Nf.cross(E,A,D);for(U=0;U<3;U++){var X=3*T[_[G]+U];P[X]=P[X]+E[0],P[X+1]=P[X+1]+E[1],P[X+2]=P[X+2]+E[2]}}}if(v)for(k=0;k<P.length/3;k++)I(P,k,E),Nf.normalize(E,E),P[3*k]=E[0],P[3*k+1]=E[1],P[3*k+2]=E[2];j=[];var Y=[];for(k=0;k<p-1;k++)for(F=0;F<g-1;F++){z=k*(g-1)+F,V=4*z;w(k,F,T);for(N=0;N<4;N++){for(U=0;U<4;U++)j[U]=L[4*T[N]+U];d.set(V+N,j),v&&(I(P,T[N],E),u.set(V+N,E));W=T[N];Y[0]=W%g/(g-1),Y[1]=Math.floor(W/g)/(p-1),h.set(V+N,Y)}z++}}else{for(Y=[],k=0;k<o.count();k++){Y[0]=k%g/(g-1),Y[1]=Math.floor(k/g)/(p-1);j=bo.parseColor(mc(o,k)),R=vc(o,k);null!=R&&(j[3]*=R),j[3]<.99&&(S=!0),d.set(k,j),h.set(k,Y)}T=[];var q=0;for(k=0;k<p-1;k++)for(F=0;F<g-1;F++){w(k,F,T);for(N=0;N<6;N++)x[q++]=T[_[N]]}v?r.generateVertexNormals():u.value=null}t.material.get("normalMap")&&r.generateTangents(),r.updateBoundingBox(),r.dirty(),t.material.transparent=S,t.material.depthMask=!S},_getDataShape:function(t,e){for(var n=-1/0,i=0,r=0,o=!1,a=e?"u":"x",s=t.count(),l=0;l<s;l++){var c=t.get(a,l);c<n&&(r,r=0,i++),n=c,r++}if(i&&1!==r||(o=!0),!o)return[i+1,r];var u=Math.floor(Math.sqrt(s));while(u>0){if(Math.floor(s/u)===s/u)return[u,s/u];u--}return u=Math.floor(Math.sqrt(s)),[u,u]},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function zf(t){t.registerChartView(Ff),t.registerSeriesModel(Rf),t.registerLayout((function(t,e){t.eachSeriesByType("surface",(function(t){var e=t.coordinateSystem;e&&e.type;var n=t.getData(),i=new Float32Array(3*n.count()),r=[NaN,NaN,NaN];if(e&&"cartesian3D"===e.type){var o=e.dimensions,a=o.map((function(e){return t.coordDimToDataDim(e)[0]}));n.each(a,(function(t,o,a,s){var l;l=n.hasValue(s)?e.dataToPoint([t,o,a]):r,i[3*s]=l[0],i[3*s+1]=l[1],i[3*s+2]=l[2]}))}n.setLayout("points",i)}))}))}function Vf(t,e){for(var n=[],i=0;i<e.length;i++)n.push(t.dataToPoint(e[i]));return n}Object(i["w"])(zf);var Hf=i["g"].extend({type:"series.map3D",layoutMode:"box",coordinateSystem:null,visualStyleAccessPath:"itemStyle",optionUpdated:function(t){t=t||{};var e=this.get("coordinateSystem");null!=e&&"geo3D"!==e&&(this.get("groundPlane.show")&&(this.option.groundPlane.show=!1),this._geo=null)},getInitialData:function(t){t.data=this.getFilledRegions(t.data,t.map);var e=i["o"].createDimensions(t.data,{coordDimensions:["value"]}),n=new i["e"](e,this);n.initData(t.data);var r={};return n.each((function(t){var e=n.getName(t),i=n.getItemModel(t);r[e]=i})),this._regionModelMap=r,n},formatTooltip:function(t){return _h(this,t)},getRegionModel:function(t){var e=this.getData().getName(t);return this._regionModelMap[e]||new i["f"](null,this)},getRegionPolygonCoords:function(t){var e=this.coordinateSystem,n=this.getData().getName(t);if(e.transform){var i=e.getRegion(n);return i?i.geometries:[]}this._geo||(this._geo=Nc.createGeo3D(this));i=this._geo.getRegion(n);for(var r=[],o=0;o<i.geometries.length;o++){var a=i.geometries[o],s=[],l=Vf(e,a.exterior);if(s&&s.length)for(var c=0;c<a.interiors.length;c++)s.push(Vf(e,s[c]));r.push({interiors:s,exterior:l})}return r},getFormattedLabel:function(t,e){var n=vh.getFormattedLabel(this,t,e);return null==n&&(n=this.getData().getName(t)),n},defaultOption:{coordinateSystem:"geo3D",data:null}});i["x"].merge(Hf.prototype,Ol),i["x"].merge(Hf.prototype,Ro),i["x"].merge(Hf.prototype,No),i["x"].merge(Hf.prototype,Bo),i["x"].merge(Hf.prototype,Tl);var Gf=Hf,Uf=i["b"].extend({type:"map3D",__ecgl__:!0,init:function(t,e){this._geo3DBuilder=new Tc(e),this.groupGL=new bo.Node},render:function(t,e,n){var i=t.coordinateSystem;if(i&&i.viewGL){if(this.groupGL.add(this._geo3DBuilder.rootNode),i.viewGL.add(this.groupGL),"geo3D"===i.type){i,this._sceneHelper||(this._sceneHelper=new ra,this._sceneHelper.initLight(this.groupGL)),this._sceneHelper.setScene(i.viewGL.scene),this._sceneHelper.updateLight(t),i.viewGL.setPostEffect(t.getModel("postEffect"),n),i.viewGL.setTemporalSuperSampling(t.getModel("temporalSuperSampling"));var r=this._control;r||(r=this._control=new Xo({zr:n.getZr()}),this._control.init());var o=t.getModel("viewControl");r.setViewGL(i.viewGL),r.setFromViewControlModel(o,0),r.off("update"),r.on("update",(function(){n.dispatchAction({type:"map3DChangeCamera",alpha:r.getAlpha(),beta:r.getBeta(),distance:r.getDistance(),from:this.uid,map3DId:t.id})})),this._geo3DBuilder.extrudeY=!0}else this._control&&(this._control.dispose(),this._control=null),this._sceneHelper&&(this._sceneHelper.dispose(),this._sceneHelper=null),t.getData().getLayout("geo3D"),this._geo3DBuilder.extrudeY=!1;this._geo3DBuilder.update(t,e,n,0,t.getData().count());var a=i.viewGL.isLinearSpace()?"define":"undefine";this._geo3DBuilder.rootNode.traverse((function(t){t.material&&t.material[a]("fragment","SRGB_DECODE")}))}},afterRender:function(t,e,n,i){var r=i.renderer,o=t.coordinateSystem;o&&"geo3D"===o.type&&(this._sceneHelper.updateAmbientCubemap(r,t,n),this._sceneHelper.updateSkybox(r,t,n))},dispose:function(){this.groupGL.removeAll(),this._control.dispose(),this._geo3DBuilder.dispose()}});function Wf(t){Bc(t),t.registerChartView(Uf),t.registerSeriesModel(Gf),t.registerAction({type:"map3DChangeCamera",event:"map3dcamerachanged",update:"series:updateCamera"},(function(t,e){e.eachComponent({mainType:"series",subType:"map3D",query:t},(function(e){e.setView(t)}))}))}Object(i["w"])(Wf);var Xf=i["g"].extend({type:"series.scatterGL",dependencies:["grid","polar","geo","singleAxis"],visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,getInitialData:function(){return i["o"].createList(this)},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,progressive:1e5,progressiveThreshold:1e5,large:!1,symbol:"circle",symbolSize:10,zoomScale:0,blendMode:"source-over",itemStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Yf=n("1687"),qf=n("401b");function Zf(t){this.viewGL=t}Zf.prototype.reset=function(t,e){this._updateCamera(e.getWidth(),e.getHeight(),e.getDevicePixelRatio()),this._viewTransform=Yf["c"](),this.updateTransform(t,e)},Zf.prototype.updateTransform=function(t,e){var n=t.coordinateSystem;n.getRoamTransform&&(Yf["e"](this._viewTransform,n.getRoamTransform()),this._setCameraTransform(this._viewTransform),e.getZr().refresh())},Zf.prototype.dataToPoint=function(t,e,n){n=t.dataToPoint(e,null,n);var i=this._viewTransform;i&&qf["b"](n,n,i)},Zf.prototype.removeTransformInPoint=function(t){return this._viewTransform&&qf["b"](t,t,this._viewTransform),t},Zf.prototype.getZoom=function(){if(this._viewTransform){var t=this._viewTransform;return 1/Math.max(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]))}return 1},Zf.prototype._setCameraTransform=function(t){var e=this.viewGL.camera;e.position.set(t[4],t[5],0),e.scale.set(Math.sqrt(t[0]*t[0]+t[1]*t[1]),Math.sqrt(t[2]*t[2]+t[3]*t[3]),1)},Zf.prototype._updateCamera=function(t,e,n){this.viewGL.setViewport(0,0,t,e,n);var i=this.viewGL.camera;i.left=i.top=0,i.bottom=e,i.right=t,i.near=0,i.far=100};var Kf=Zf,$f=i["b"].extend({type:"scatterGL",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this.viewGL=new al("orthographic"),this.viewGL.add(this.groupGL),this._pointsBuilderList=[],this._currentStep=0,this._sizeScale=1,this._glViewHelper=new Kf(this.viewGL)},render:function(t,e,n){if(this.groupGL.removeAll(),this._glViewHelper.reset(t,n),t.getData().count()){var i=this._pointsBuilderList[0];i||(i=this._pointsBuilderList[0]=new Jh(!0,n)),this._pointsBuilderList.length=1,this.groupGL.add(i.rootNode),this._removeTransformInPoints(t.getData().getLayout("points")),i.update(t,e,n),this.viewGL.setPostEffect(t.getModel("postEffect"),n)}},incrementalPrepareRender:function(t,e,n){this.groupGL.removeAll(),this._glViewHelper.reset(t,n),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),n)},incrementalRender:function(t,e,n,i){if(!(t.end<=t.start)){var r=this._pointsBuilderList[this._currentStep];r||(r=new Jh(!0,i),this._pointsBuilderList[this._currentStep]=r),this.groupGL.add(r.rootNode),this._removeTransformInPoints(e.getData().getLayout("points")),r.setSizeScale(this._sizeScale),r.update(e,n,i,t.start,t.end),i.getZr().refresh(),this._currentStep++}},updateTransform:function(t,e,n){if(t.coordinateSystem.getRoamTransform){this._glViewHelper.updateTransform(t,n);var i=this._glViewHelper.getZoom(),r=Math.max((t.get("zoomScale")||0)*(i-1)+1,0);this._sizeScale=r,this._pointsBuilderList.forEach((function(t){t.setSizeScale(r)}))}},_removeTransformInPoints:function(t){if(t)for(var e=[],n=0;n<t.length;n+=2)e[0]=t[n],e[1]=t[n+1],this._glViewHelper.removeTransformInPoint(e),t[n]=e[0],t[n+1]=e[1]},dispose:function(){this.groupGL.removeAll(),this._pointsBuilderList.forEach((function(t){t.dispose()}))},remove:function(){this.groupGL.removeAll()}});function Jf(t){t.registerChartView($f),t.registerSeriesModel(Xf),t.registerLayout({seriesType:"scatterGL",reset:function(t){var e,n=t.coordinateSystem,i=t.getData();if(n){var r=n.dimensions.map((function(t){return i.mapDimension(t)})).slice(0,2),o=[];1===r.length?e=function(t){for(var e=new Float32Array(2*(t.end-t.start)),o=t.start;o<t.end;o++){var a=2*(o-t.start),s=i.get(r[0],o),l=n.dataToPoint(s);e[a]=l[0],e[a+1]=l[1]}i.setLayout("points",e)}:2===r.length&&(e=function(t){for(var e=new Float32Array(2*(t.end-t.start)),a=t.start;a<t.end;a++){var s=2*(a-t.start),l=i.get(r[0],a),c=i.get(r[1],a);o[0]=l,o[1]=c,o=n.dataToPoint(o),e[s]=o[0],e[s+1]=o[1]}i.setLayout("points",e)})}return{progress:e}}})}Object(i["w"])(Jf);var Qf=n("7368"),td=n("6a2f"),ed=td["a"],nd=function(t,e,n,r,o){for(var a=new Qf["a"](r),s=0;s<t.length;s++)a.addNode(Ar.firstNotNull(t[s].id,t[s].name,s),s);var l,c=[],u=[],h=0;for(s=0;s<e.length;s++){var f=e[s],d=f.source,p=f.target;a.addEdge(d,p,h)&&(u.push(f),c.push(Ar.firstNotNull(f.id,d+" > "+p)),h++)}var g=i["o"].createDimensions(t,{coordDimensions:["value"]});l=new i["e"](g,n),l.initData(t);var m=new i["e"](["value"],n);return m.initData(u,c),o&&o(l,m),ed({mainData:l,struct:a,structAttr:"graph",datas:{node:l,edge:m},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a},id=i["g"].extend({type:"series.graphGL",visualStyleAccessPath:"itemStyle",hasSymbolVisual:!0,init:function(t){id.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this._updateCategoriesData()},mergeOption:function(t){id.superApply(this,"mergeOption",arguments),this._updateCategoriesData()},getFormattedLabel:function(t,e,n,i){var r=vh.getFormattedLabel(this,t,e,n,i);if(null==r){var o=this.getData(),a=o.dimensions[o.dimensions.length-1];r=o.get(a,t)}return r},getInitialData:function(t,e){var n=t.edges||t.links||[],i=t.data||t.nodes||[],r=this;if(i&&n)return nd(i,n,this,!0,o).data;function o(t,n){t.wrapMethod("getItemModel",(function(t){const e=r._categoriesModels,n=t.getShallow("category"),i=e[n];return i&&(i.parentModel=t.parentModel,t.parentModel=i),t}));const i=e.getModel([]).getModel;function o(t,e){const n=i.call(this,t,e);return n.resolveParentPath=a,n}function a(t){if(t&&("label"===t[0]||"label"===t[1])){const e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}n.wrapMethod("getItemModel",(function(t){return t.resolveParentPath=a,t.getModel=o,t}))}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(t,e,n){if("edge"===n){var r=this.getData(),o=this.getDataParams(t,n),a=r.graph.getEdgeByIndex(t),s=r.getName(a.node1.dataIndex),l=r.getName(a.node2.dataIndex),c=[];return null!=s&&c.push(s),null!=l&&c.push(l),c=i["k"].encodeHTML(c.join(" > ")),o.value&&(c+=" : "+i["k"].encodeHTML(o.value)),c}return id.superApply(this,"formatTooltip",arguments)},_updateCategoriesData:function(){var t=(this.option.categories||[]).map((function(t){return null!=t.value?t:Object.assign({value:0},t)})),e=new i["e"](["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray((function(t){return e.getItemModel(t,!0)}))},setView:function(t){null!=t.zoom&&(this.option.zoom=t.zoom),null!=t.offset&&(this.option.offset=t.offset)},setNodePosition:function(t){for(var e=0;e<t.length/2;e++){var n=t[2*e],i=t[2*e+1],r=this.getData().getRawDataItem(e);r.x=n,r.y=i}},isAnimationEnabled:function(){return id.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:10,z:2,legendHoverLink:!0,layout:"forceAtlas2",forceAtlas2:{initLayout:null,GPU:!0,steps:1,maxSteps:1e3,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,edgeWeightInfluence:1,edgeWeight:[1,4],nodeWeight:[1,4],preventOverlap:!1,gravityCenter:null},focusNodeAdjacency:!0,focusNodeAdjacencyOn:"mouseover",left:"center",top:"center",symbol:"circle",symbolSize:5,roam:!1,center:null,zoom:1,label:{show:!1,formatter:"{b}",position:"right",distance:5,textStyle:{fontSize:14}},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}},animation:!1}}),rd=id,od=Zo.vec2,ad=[[0,0],[1,1]],sd=pn.extend((function(){return{segmentScale:4,dynamic:!0,useNativeLine:!0,attributes:{position:new pn.Attribute("position","float",2,"POSITION"),normal:new pn.Attribute("normal","float",2),offset:new pn.Attribute("offset","float",1),color:new pn.Attribute("color","float",4,"COLOR")}}}),{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0,this._itemVertexOffsets=[]},setVertexCount:function(t){var e=this.attributes;this.vertexCount!==t&&(e.position.init(t),e.color.init(t),this.useNativeLine||(e.offset.init(t),e.normal.init(t)),t>65535?this.indices instanceof Uint16Array&&(this.indices=new Uint32Array(this.indices)):this.indices instanceof Uint32Array&&(this.indices=new Uint16Array(this.indices)))},setTriangleCount:function(t){this.triangleCount!==t&&(this.indices=0===t?null:this.vertexCount>65535?new Uint32Array(3*t):new Uint16Array(3*t))},_getCubicCurveApproxStep:function(t,e,n,i){var r=od.dist(t,e)+od.dist(n,e)+od.dist(i,n),o=1/(r+1)*this.segmentScale;return o},getCubicCurveVertexCount:function(t,e,n,i){var r=this._getCubicCurveApproxStep(t,e,n,i),o=Math.ceil(1/r);return this.useNativeLine?2*o:2*o+2},getCubicCurveTriangleCount:function(t,e,n,i){var r=this._getCubicCurveApproxStep(t,e,n,i),o=Math.ceil(1/r);return this.useNativeLine?0:2*o},getLineVertexCount:function(){return this.getPolylineVertexCount(ad)},getLineTriangleCount:function(){return this.getPolylineTriangleCount(ad)},getPolylineVertexCount:function(t){var e;if("number"===typeof t)e=t;else{var n="number"!==typeof t[0];e=n?t.length:t.length/2}return this.useNativeLine?2*(e-1):2*(e-1)+2},getPolylineTriangleCount:function(t){var e;if("number"===typeof t)e=t;else{var n="number"!==typeof t[0];e=n?t.length:t.length/2}return this.useNativeLine?0:2*(e-1)},addCubicCurve:function(t,e,n,i,r,o){null==o&&(o=1);var a=t[0],s=t[1],l=e[0],c=e[1],u=n[0],h=n[1],f=i[0],d=i[1],p=this._getCubicCurveApproxStep(t,e,n,i),g=p*p,m=g*p,v=3*p,y=3*g,_=6*g,b=6*m,x=a-2*l+u,w=s-2*c+h,S=3*(l-u)-a+f,T=3*(c-h)-s+d,O=a,C=s,M=(l-a)*v+x*y+S*m,A=(c-s)*v+w*y+T*m,D=x*_+S*b,E=w*_+T*b,I=S*b,P=T*b,L=0,k=0,j=Math.ceil(1/p),R=new Float32Array(3*(j+1)),N=(R=[],0);for(k=0;k<j+1;k++)R[N++]=O,R[N++]=C,O+=M,C+=A,M+=D,A+=E,D+=I,E+=P,L+=p,L>1&&(O=M>0?Math.min(O,f):Math.max(O,f),C=A>0?Math.min(C,d):Math.max(C,d));this.addPolyline(R,r,o)},addLine:function(t,e,n,i){this.addPolyline([t,e],n,i)},addPolyline:function(){var t=od.create(),e=od.create(),n=od.create(),i=od.create(),r=[],o=[],a=[];return function(s,l,c,u,h){if(s.length){var f="number"!==typeof s[0];if(null==h&&(h=f?s.length:s.length/2),!(h<2)){null==u&&(u=0),null==c&&(c=1),this._itemVertexOffsets.push(this._vertexOffset);for(var d,p=f?"number"!==typeof l[0]:l.length/4===h,g=this.attributes.position,m=this.attributes.color,v=this.attributes.offset,y=this.attributes.normal,_=this.indices,b=this._vertexOffset,x=0;x<h;x++){if(f)r=s[x+u],d=p?l[x+u]:l;else{var w=2*x+u;if(r=r||[],r[0]=s[w],r[1]=s[w+1],p){var S=4*x+u;d=d||[],d[0]=l[S],d[1]=l[S+1],d[2]=l[S+2],d[3]=l[S+3]}else d=l}if(this.useNativeLine)x>1&&(g.copy(b,b-1),m.copy(b,b-1),b++);else{var T;if(x<h-1){if(f)od.copy(o,s[x+1]);else{w=2*(x+1)+u;o=o||[],o[0]=s[w],o[1]=s[w+1]}if(x>0){od.sub(t,r,a),od.sub(e,o,r),od.normalize(t,t),od.normalize(e,e),od.add(i,t,e),od.normalize(i,i);var O=c/2*Math.min(1/od.dot(t,i),2);n[0]=-i[1],n[1]=i[0],T=O}else od.sub(t,o,r),od.normalize(t,t),n[0]=-t[1],n[1]=t[0],T=c/2}else od.sub(t,r,a),od.normalize(t,t),n[0]=-t[1],n[1]=t[0],T=c/2;y.set(b,n),y.set(b+1,n),v.set(b,T),v.set(b+1,-T),od.copy(a,r),g.set(b,r),g.set(b+1,r),m.set(b,d),m.set(b+1,d),b+=2}if(this.useNativeLine)m.set(b,d),g.set(b,r),b++;else if(x>0){var C=3*this._faceOffset;_=this.indices;_[C]=b-4,_[C+1]=b-3,_[C+2]=b-2,_[C+3]=b-3,_[C+4]=b-1,_[C+5]=b-2,this._faceOffset+=2}}this._vertexOffset=b}}}}(),setItemColor:function(t,e){for(var n=this._itemVertexOffsets[t],i=t<this._itemVertexOffsets.length-1?this._itemVertexOffsets[t+1]:this._vertexOffset,r=n;r<i;r++)this.attributes.color.set(r,e);this.dirty("color")}});i["x"].defaults(sd.prototype,Yo);var ld=sd,cd="@export ecgl.forceAtlas2.updateNodeRepulsion\n\n#define NODE_COUNT 0\n\nuniform sampler2D positionTex;\n\nuniform vec2 textureSize;\nuniform float gravity;\nuniform float scaling;\nuniform vec2 gravityCenter;\n\nuniform bool strongGravityMode;\nuniform bool preventOverlap;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, v_Texcoord);\n\n vec2 force = vec2(0.0);\n for (int i = 0; i < NODE_COUNT; i++) {\n vec2 uv = vec2(\n mod(float(i), textureSize.x) / (textureSize.x - 1.0),\n floor(float(i) / textureSize.x) / (textureSize.y - 1.0)\n );\n vec4 n1 = texture2D(positionTex, uv);\n\n vec2 dir = n0.xy - n1.xy;\n float d2 = dot(dir, dir);\n\n if (d2 > 0.0) {\n float factor = 0.0;\n if (preventOverlap) {\n float d = sqrt(d2);\n d = d - n0.w - n1.w;\n if (d > 0.0) {\n factor = scaling * n0.z * n1.z / (d * d);\n }\n else if (d < 0.0) {\n factor = scaling * 100.0 * n0.z * n1.z;\n }\n }\n else {\n factor = scaling * n0.z * n1.z / d2;\n }\n force += dir * factor;\n }\n }\n\n vec2 dir = gravityCenter - n0.xy;\n float d = 1.0;\n if (!strongGravityMode) {\n d = length(dir);\n }\n\n force += dir * n0.z * gravity / (d + 1.0);\n\n gl_FragColor = vec4(force, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.vertex\n\nattribute vec2 node1;\nattribute vec2 node2;\nattribute float weight;\n\nuniform sampler2D positionTex;\nuniform float edgeWeightInfluence;\nuniform bool preventOverlap;\nuniform bool linLogMode;\n\nuniform vec2 windowSize: WINDOW_SIZE;\n\nvarying vec2 v_Force;\n\nvoid main() {\n\n vec4 n0 = texture2D(positionTex, node1);\n vec4 n1 = texture2D(positionTex, node2);\n\n vec2 dir = n1.xy - n0.xy;\n float d = length(dir);\n float w;\n if (edgeWeightInfluence == 0.0) {\n w = 1.0;\n }\n else if (edgeWeightInfluence == 1.0) {\n w = weight;\n }\n else {\n w = pow(weight, edgeWeightInfluence);\n }\n vec2 offset = vec2(1.0 / windowSize.x, 1.0 / windowSize.y);\n vec2 scale = vec2((windowSize.x - 1.0) / windowSize.x, (windowSize.y - 1.0) / windowSize.y);\n vec2 pos = node1 * scale * 2.0 - 1.0;\n gl_Position = vec4(pos + offset, 0.0, 1.0);\n gl_PointSize = 1.0;\n\n float factor;\n if (preventOverlap) {\n d = d - n1.w - n0.w;\n }\n if (d <= 0.0) {\n v_Force = vec2(0.0);\n return;\n }\n\n if (linLogMode) {\n factor = w * log(d) / d;\n }\n else {\n factor = w;\n }\n v_Force = dir * factor;\n}\n@end\n\n@export ecgl.forceAtlas2.updateEdgeAttraction.fragment\n\nvarying vec2 v_Force;\n\nvoid main() {\n gl_FragColor = vec4(v_Force, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.vertex\n\nattribute vec2 node;\n\nvarying vec2 v_NodeUv;\n\nvoid main() {\n\n v_NodeUv = node;\n gl_Position = vec4(0.0, 0.0, 0.0, 1.0);\n gl_PointSize = 1.0;\n}\n@end\n\n@export ecgl.forceAtlas2.calcWeightedSum.fragment\n\nvarying vec2 v_NodeUv;\n\nuniform sampler2D positionTex;\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_NodeUv).rg;\n vec2 forcePrev = texture2D(forcePrevTex, v_NodeUv).rg;\n\n float mass = texture2D(positionTex, v_NodeUv).z;\n float swing = length(force - forcePrev) * mass;\n float traction = length(force + forcePrev) * 0.5 * mass;\n\n gl_FragColor = vec4(swing, traction, 0.0, 0.0);\n}\n@end\n\n@export ecgl.forceAtlas2.calcGlobalSpeed\n\nuniform sampler2D globalSpeedPrevTex;\nuniform sampler2D weightedSumTex;\nuniform float jitterTolerence;\n\nvoid main() {\n vec2 weightedSum = texture2D(weightedSumTex, vec2(0.5)).xy;\n float prevGlobalSpeed = texture2D(globalSpeedPrevTex, vec2(0.5)).x;\n float globalSpeed = jitterTolerence * jitterTolerence\n * weightedSum.y / weightedSum.x;\n if (prevGlobalSpeed > 0.0) {\n globalSpeed = min(globalSpeed / prevGlobalSpeed, 1.5) * prevGlobalSpeed;\n }\n gl_FragColor = vec4(globalSpeed, 0.0, 0.0, 1.0);\n}\n@end\n\n@export ecgl.forceAtlas2.updatePosition\n\nuniform sampler2D forceTex;\nuniform sampler2D forcePrevTex;\nuniform sampler2D positionTex;\nuniform sampler2D globalSpeedTex;\n\nvarying vec2 v_Texcoord;\n\nvoid main() {\n vec2 force = texture2D(forceTex, v_Texcoord).xy;\n vec2 forcePrev = texture2D(forcePrevTex, v_Texcoord).xy;\n vec4 node = texture2D(positionTex, v_Texcoord);\n\n float globalSpeed = texture2D(globalSpeedTex, vec2(0.5)).r;\n float swing = length(force - forcePrev);\n float speed = 0.1 * globalSpeed / (0.1 + globalSpeed * sqrt(swing));\n\n float df = length(force);\n if (df > 0.0) {\n speed = min(df * speed, 10.0) / df;\n\n gl_FragColor = vec4(node.xy + speed * force, node.zw);\n }\n else {\n gl_FragColor = node;\n }\n}\n@end\n\n@export ecgl.forceAtlas2.edges.vertex\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 node;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\nuniform sampler2D positionTex;\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(\n texture2D(positionTex, node).xy, -10.0, 1.0\n );\n v_Color = a_Color;\n}\n@end\n\n@export ecgl.forceAtlas2.edges.fragment\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nvarying vec4 v_Color;\nvoid main() {\n gl_FragColor = color * v_Color;\n}\n@end";bo.Shader.import(cd);var ud={repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null};function hd(t){var e={type:bo.Texture.FLOAT,minFilter:bo.Texture.NEAREST,magFilter:bo.Texture.NEAREST};this._positionSourceTex=new bo.Texture2D(e),this._positionSourceTex.flipY=!1,this._positionTex=new bo.Texture2D(e),this._positionPrevTex=new bo.Texture2D(e),this._forceTex=new bo.Texture2D(e),this._forcePrevTex=new bo.Texture2D(e),this._weightedSumTex=new bo.Texture2D(e),this._weightedSumTex.width=this._weightedSumTex.height=1,this._globalSpeedTex=new bo.Texture2D(e),this._globalSpeedPrevTex=new bo.Texture2D(e),this._globalSpeedTex.width=this._globalSpeedTex.height=1,this._globalSpeedPrevTex.width=this._globalSpeedPrevTex.height=1,this._nodeRepulsionPass=new hr({fragment:bo.Shader.source("ecgl.forceAtlas2.updateNodeRepulsion")}),this._positionPass=new hr({fragment:bo.Shader.source("ecgl.forceAtlas2.updatePosition")}),this._globalSpeedPass=new hr({fragment:bo.Shader.source("ecgl.forceAtlas2.calcGlobalSpeed")}),this._copyPass=new hr({fragment:bo.Shader.source("clay.compositor.output")});var n=function(t){t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE)};this._edgeForceMesh=new bo.Mesh({geometry:new bo.Geometry({attributes:{node1:new bo.Geometry.Attribute("node1","float",2),node2:new bo.Geometry.Attribute("node2","float",2),weight:new bo.Geometry.Attribute("weight","float",1)},dynamic:!0,mainAttribute:"node1"}),material:new bo.Material({transparent:!0,shader:bo.createShader("ecgl.forceAtlas2.updateEdgeAttraction"),blend:n,depthMask:!1,depthText:!1}),mode:bo.Mesh.POINTS}),this._weightedSumMesh=new bo.Mesh({geometry:new bo.Geometry({attributes:{node:new bo.Geometry.Attribute("node","float",2)},dynamic:!0,mainAttribute:"node"}),material:new bo.Material({transparent:!0,shader:bo.createShader("ecgl.forceAtlas2.calcWeightedSum"),blend:n,depthMask:!1,depthText:!1}),mode:bo.Mesh.POINTS}),this._framebuffer=new li({depthBuffer:!1}),this._dummyCamera=new bo.OrthographicCamera({left:-1,right:1,top:1,bottom:-1,near:0,far:100}),this._globalSpeed=0}hd.prototype.updateOption=function(t){for(var e in ud)this[e]=ud[e];var n=this._nodes.length;if(this.jitterTolerence=n>5e4?10:n>5e3?1:.1,this.scaling=n>100?2:10,t)for(var e in ud)null!=t[e]&&(this[e]=t[e]);if(this.repulsionByDegree)for(var i=this._positionSourceTex.pixels,r=0;r<this._nodes.length;r++)i[4*r+2]=(this._nodes[r].degree||0)+1},hd.prototype._updateGravityCenter=function(t){var e=this._nodes,n=this._edges;if(this.gravityCenter)this._gravityCenter=this.gravityCenter;else{for(var i=[1/0,1/0],r=[-1/0,-1/0],o=0;o<e.length;o++)i[0]=Math.min(e[o].x,i[0]),i[1]=Math.min(e[o].y,i[1]),r[0]=Math.max(e[o].x,r[0]),r[1]=Math.max(e[o].y,r[1]);this._gravityCenter=[.5*(i[0]+r[0]),.5*(i[1]+r[1])]}for(o=0;o<n.length;o++){var a=n[o].node1,s=n[o].node2;e[a].degree=(e[a].degree||0)+1,e[s].degree=(e[s].degree||0)+1}},hd.prototype.initData=function(t,e){this._nodes=t,this._edges=e,this._updateGravityCenter();var n=Math.ceil(Math.sqrt(t.length)),i=n,r=new Float32Array(n*i*4);this._resize(n,i);for(var o=0,a=0;a<t.length;a++){var s=t[a];r[o++]=s.x||0,r[o++]=s.y||0,r[o++]=s.mass||1,r[o++]=s.size||1}this._positionSourceTex.pixels=r;var l=this._edgeForceMesh.geometry,c=e.length;l.attributes.node1.init(2*c),l.attributes.node2.init(2*c),l.attributes.weight.init(2*c);var u=[];for(a=0;a<e.length;a++){var h=l.attributes,f=e[a].weight;null==f&&(f=1),h.node1.set(a,this.getNodeUV(e[a].node1,u)),h.node2.set(a,this.getNodeUV(e[a].node2,u)),h.weight.set(a,f),h.node1.set(a+c,this.getNodeUV(e[a].node2,u)),h.node2.set(a+c,this.getNodeUV(e[a].node1,u)),h.weight.set(a+c,f)}var d=this._weightedSumMesh.geometry;d.attributes.node.init(t.length);for(a=0;a<t.length;a++)d.attributes.node.set(a,this.getNodeUV(a,u));l.dirty(),d.dirty(),this._nodeRepulsionPass.material.define("fragment","NODE_COUNT",t.length),this._nodeRepulsionPass.material.setUniform("textureSize",[n,i]),this._inited=!1,this._frame=0},hd.prototype.getNodes=function(){return this._nodes},hd.prototype.getEdges=function(){return this._edges},hd.prototype.step=function(t){this._inited||(this._initFromSource(t),this._inited=!0),this._frame++,this._framebuffer.attach(this._forceTex),this._framebuffer.bind(t);var e=this._nodeRepulsionPass;e.setUniform("strongGravityMode",this.strongGravityMode),e.setUniform("gravity",this.gravity),e.setUniform("gravityCenter",this._gravityCenter),e.setUniform("scaling",this.scaling),e.setUniform("preventOverlap",this.preventOverlap),e.setUniform("positionTex",this._positionPrevTex),e.render(t);var n=this._edgeForceMesh;n.material.set("linLogMode",this.linLogMode),n.material.set("edgeWeightInfluence",this.edgeWeightInfluence),n.material.set("preventOverlap",this.preventOverlap),n.material.set("positionTex",this._positionPrevTex),t.gl.enable(t.gl.BLEND),t.renderPass([n],this._dummyCamera),this._framebuffer.attach(this._weightedSumTex),t.gl.clearColor(0,0,0,0),t.gl.clear(t.gl.COLOR_BUFFER_BIT),t.gl.enable(t.gl.BLEND);var i=this._weightedSumMesh;i.material.set("positionTex",this._positionPrevTex),i.material.set("forceTex",this._forceTex),i.material.set("forcePrevTex",this._forcePrevTex),t.renderPass([i],this._dummyCamera),this._framebuffer.attach(this._globalSpeedTex);var r=this._globalSpeedPass;r.setUniform("globalSpeedPrevTex",this._globalSpeedPrevTex),r.setUniform("weightedSumTex",this._weightedSumTex),r.setUniform("jitterTolerence",this.jitterTolerence),t.gl.disable(t.gl.BLEND),r.render(t);var o=this._positionPass;this._framebuffer.attach(this._positionTex),o.setUniform("globalSpeedTex",this._globalSpeedTex),o.setUniform("positionTex",this._positionPrevTex),o.setUniform("forceTex",this._forceTex),o.setUniform("forcePrevTex",this._forcePrevTex),o.render(t),this._framebuffer.unbind(t),this._swapTexture()},hd.prototype.update=function(t,e,n){null==e&&(e=1),e=Math.max(e,1);for(var i=0;i<e;i++)this.step(t);n&&n()},hd.prototype.getNodePositionTexture=function(){return this._inited?this._positionPrevTex:this._positionSourceTex},hd.prototype.getNodeUV=function(t,e){e=e||[];var n=this._positionTex.width,i=this._positionTex.height;return e[0]=t%n/(n-1),e[1]=Math.floor(t/n)/(i-1)||0,e},hd.prototype.getNodePosition=function(t,e){var n=this._positionArr,i=this._positionTex.width,r=this._positionTex.height,o=i*r;n&&n.length===4*o||(n=this._positionArr=new Float32Array(4*o)),this._framebuffer.bind(t),this._framebuffer.attach(this._positionPrevTex),t.gl.readPixels(0,0,i,r,t.gl.RGBA,t.gl.FLOAT,n),this._framebuffer.unbind(t),e||(e=new Float32Array(2*this._nodes.length));for(var a=0;a<this._nodes.length;a++)e[2*a]=n[4*a],e[2*a+1]=n[4*a+1];return e},hd.prototype.getTextureData=function(t,e){var n=this["_"+e+"Tex"],i=n.width,r=n.height;this._framebuffer.bind(t),this._framebuffer.attach(n);var o=new Float32Array(i*r*4);return t.gl.readPixels(0,0,i,r,t.gl.RGBA,t.gl.FLOAT,o),this._framebuffer.unbind(t),o},hd.prototype.getTextureSize=function(){return{width:this._positionTex.width,height:this._positionTex.height}},hd.prototype.isFinished=function(t){return this._frame>t},hd.prototype._swapTexture=function(){var t=this._positionPrevTex;this._positionPrevTex=this._positionTex,this._positionTex=t;t=this._forcePrevTex;this._forcePrevTex=this._forceTex,this._forceTex=t;t=this._globalSpeedPrevTex;this._globalSpeedPrevTex=this._globalSpeedTex,this._globalSpeedTex=t},hd.prototype._initFromSource=function(t){this._framebuffer.attach(this._positionPrevTex),this._framebuffer.bind(t),this._copyPass.setUniform("texture",this._positionSourceTex),this._copyPass.render(t),t.gl.clearColor(0,0,0,0),this._framebuffer.attach(this._forcePrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.attach(this._globalSpeedPrevTex),t.gl.clear(t.gl.COLOR_BUFFER_BIT),this._framebuffer.unbind(t)},hd.prototype._resize=function(t,e){["_positionSourceTex","_positionTex","_positionPrevTex","_forceTex","_forcePrevTex"].forEach((function(n){this[n].width=t,this[n].height=e,this[n].dirty()}),this)},hd.prototype.dispose=function(t){this._framebuffer.dispose(t),this._copyPass.dispose(t),this._nodeRepulsionPass.dispose(t),this._positionPass.dispose(t),this._globalSpeedPass.dispose(t),this._edgeForceMesh.geometry.dispose(t),this._weightedSumMesh.geometry.dispose(t),this._positionSourceTex.dispose(t),this._positionTex.dispose(t),this._positionPrevTex.dispose(t),this._forceTex.dispose(t),this._forcePrevTex.dispose(t),this._weightedSumTex.dispose(t),this._globalSpeedTex.dispose(t),this._globalSpeedPrevTex.dispose(t)};var fd=hd;function dd(){var t={create:function(){return new Float32Array(2)},dist:function(t,e){var n=e[0]-t[0],i=e[1]-t[1];return Math.sqrt(n*n+i*i)},len:function(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)},scaleAndAdd:function(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t},scale:function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},add:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},sub:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t},normalize:function(t,e){var n=e[0],i=e[1],r=n*n+i*i;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r),t},negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t},set:function(t,e,n){return t[0]=e,t[1]=n,t}};function e(){this.subRegions=[],this.nSubRegions=0,this.node=null,this.mass=0,this.centerOfMass=null,this.bbox=new Float32Array(4),this.size=0}var n=e.prototype;function i(){this.position=new Float32Array(2),this.force=t.create(),this.forcePrev=t.create(),this.mass=1,this.inDegree=0,this.outDegree=0}function r(t,e){this.source=t,this.target=e,this.weight=1}function o(){this.autoSettings=!0,this.barnesHutOptimize=!0,this.barnesHutTheta=1.5,this.repulsionByDegree=!0,this.linLogMode=!1,this.strongGravityMode=!1,this.gravity=1,this.scaling=1,this.edgeWeightInfluence=1,this.jitterTolerence=.1,this.preventOverlap=!1,this.dissuadeHubs=!1,this.rootRegion=new e,this.rootRegion.centerOfMass=t.create(),this.nodes=[],this.edges=[],this.bbox=new Float32Array(4),this.gravityCenter=null,this._massArr=null,this._swingingArr=null,this._sizeArr=null,this._globalSpeed=0}n.beforeUpdate=function(){for(var t=0;t<this.nSubRegions;t++)this.subRegions[t].beforeUpdate();this.mass=0,this.centerOfMass&&(this.centerOfMass[0]=0,this.centerOfMass[1]=0),this.nSubRegions=0,this.node=null},n.afterUpdate=function(){this.subRegions.length=this.nSubRegions;for(var t=0;t<this.nSubRegions;t++)this.subRegions[t].afterUpdate()},n.addNode=function(t){if(0===this.nSubRegions){if(null==this.node)return void(this.node=t);this._addNodeToSubRegion(this.node),this.node=null}this._addNodeToSubRegion(t),this._updateCenterOfMass(t)},n.findSubRegion=function(t,e){for(var n=0;n<this.nSubRegions;n++){var i=this.subRegions[n];if(i.contain(t,e))return i}},n.contain=function(t,e){return this.bbox[0]<=t&&this.bbox[2]>=t&&this.bbox[1]<=e&&this.bbox[3]>=e},n.setBBox=function(t,e,n,i){this.bbox[0]=t,this.bbox[1]=e,this.bbox[2]=n,this.bbox[3]=i,this.size=(n-t+i-e)/2},n._newSubRegion=function(){var t=this.subRegions[this.nSubRegions];return t||(t=new e,this.subRegions[this.nSubRegions]=t),this.nSubRegions++,t},n._addNodeToSubRegion=function(t){var e=this.findSubRegion(t.position[0],t.position[1]),n=this.bbox;if(!e){var i=(n[0]+n[2])/2,r=(n[1]+n[3])/2,o=(n[2]-n[0])/2,a=(n[3]-n[1])/2,s=t.position[0]>=i?1:0,l=t.position[1]>=r?1:0;e=this._newSubRegion();e.setBBox(s*o+n[0],l*a+n[1],(s+1)*o+n[0],(l+1)*a+n[1])}e.addNode(t)},n._updateCenterOfMass=function(t){null==this.centerOfMass&&(this.centerOfMass=new Float32Array(2));var e=this.centerOfMass[0]*this.mass,n=this.centerOfMass[1]*this.mass;e+=t.position[0]*t.mass,n+=t.position[1]*t.mass,this.mass+=t.mass,this.centerOfMass[0]=e/this.mass,this.centerOfMass[1]=n/this.mass};var a=o.prototype;a.initNodes=function(t,e,n){var r=e.length;this.nodes.length=0;for(var o="undefined"!=typeof n,a=0;a<r;a++){var s=new i;s.position[0]=t[2*a],s.position[1]=t[2*a+1],s.mass=e[a],o&&(s.size=n[a]),this.nodes.push(s)}this._massArr=e,this._swingingArr=new Float32Array(r),o&&(this._sizeArr=n)},a.initEdges=function(t,e){var n=t.length/2;this.edges.length=0;for(var i=0;i<n;i++){var o=t[2*i],a=t[2*i+1],s=this.nodes[o],l=this.nodes[a];if(!s||!l)return void console.error("Node not exists, try initNodes before initEdges");s.outDegree++,l.inDegree++;var c=new r(s,l);e&&(c.weight=e[i]),this.edges.push(c)}},a.updateSettings=function(){if(this.repulsionByDegree)for(var t=0;t<this.nodes.length;t++){var e=this.nodes[t];e.mass=e.inDegree+e.outDegree+1}else for(t=0;t<this.nodes.length;t++){e=this.nodes[t];e.mass=this._massArr[t]}},a.update=function(){var e=this.nodes.length;if(this.updateSettings(),this.updateBBox(),this.barnesHutOptimize){this.rootRegion.setBBox(this.bbox[0],this.bbox[1],this.bbox[2],this.bbox[3]),this.rootRegion.beforeUpdate();for(var n=0;n<e;n++)this.rootRegion.addNode(this.nodes[n]);this.rootRegion.afterUpdate()}for(n=0;n<e;n++){var i=this.nodes[n];t.copy(i.forcePrev,i.force),t.set(i.force,0,0)}for(n=0;n<e;n++){var r=this.nodes[n];if(this.barnesHutOptimize)this.applyRegionToNodeRepulsion(this.rootRegion,r);else for(var o=n+1;o<e;o++){var a=this.nodes[o];this.applyNodeToNodeRepulsion(r,a,!1)}this.gravity>0&&(this.strongGravityMode?this.applyNodeStrongGravity(r):this.applyNodeGravity(r))}for(n=0;n<this.edges.length;n++)this.applyEdgeAttraction(this.edges[n]);var s=0,l=0,c=t.create();for(n=0;n<e;n++){i=this.nodes[n];var u=t.dist(i.force,i.forcePrev);s+=u*i.mass,t.add(c,i.force,i.forcePrev);var h=.5*t.len(c);l+=h*i.mass,this._swingingArr[n]=u}var f=this.jitterTolerence*this.jitterTolerence*l/s;this._globalSpeed>0&&(f=Math.min(f/this._globalSpeed,1.5)*this._globalSpeed),this._globalSpeed=f;for(n=0;n<e;n++){i=this.nodes[n],u=this._swingingArr[n];var d=.1*f/(1+f*Math.sqrt(u)),p=t.len(i.force);p>0&&(d=Math.min(p*d,10)/p,t.scaleAndAdd(i.position,i.position,i.force,d))}},a.applyRegionToNodeRepulsion=function(){var e=t.create();return function(n,i){if(n.node)this.applyNodeToNodeRepulsion(n.node,i,!0);else{t.sub(e,i.position,n.centerOfMass);var r=e[0]*e[0]+e[1]*e[1];if(r>this.barnesHutTheta*n.size*n.size){var o=this.scaling*i.mass*n.mass/r;t.scaleAndAdd(i.force,i.force,e,o)}else for(var a=0;a<n.nSubRegions;a++)this.applyRegionToNodeRepulsion(n.subRegions[a],i)}}}(),a.applyNodeToNodeRepulsion=function(){var e=t.create();return function(n,i,r){if(n!=i){t.sub(e,n.position,i.position);var o=e[0]*e[0]+e[1]*e[1];if(0!==o){var a;if(this.preventOverlap){var s=Math.sqrt(o);if(s=s-n.size-i.size,s>0)a=this.scaling*n.mass*i.mass/(s*s);else{if(!(s<0))return;a=100*this.scaling*n.mass*i.mass}}else a=this.scaling*n.mass*i.mass/o;t.scaleAndAdd(n.force,n.force,e,a),t.scaleAndAdd(i.force,i.force,e,-a)}}}}(),a.applyEdgeAttraction=function(){var e=t.create();return function(n){var i=n.source,r=n.target;t.sub(e,i.position,r.position);var o,a,s=t.len(e);o=0===this.edgeWeightInfluence?1:1===this.edgeWeightInfluence?n.weight:Math.pow(n.weight,this.edgeWeightInfluence),this.preventOverlap&&(s=s-i.size-r.size,s<=0)||(a=this.linLogMode?-o*Math.log(s+1)/(s+1):-o,t.scaleAndAdd(i.force,i.force,e,a),t.scaleAndAdd(r.force,r.force,e,-a))}}(),a.applyNodeGravity=function(){var e=t.create();return function(n){t.sub(e,this.gravityCenter,n.position);var i=t.len(e);t.scaleAndAdd(n.force,n.force,e,this.gravity*n.mass/(i+1))}}(),a.applyNodeStrongGravity=function(){var e=t.create();return function(n){t.sub(e,this.gravityCenter,n.position),t.scaleAndAdd(n.force,n.force,e,this.gravity*n.mass)}}(),a.updateBBox=function(){for(var t=1/0,e=1/0,n=-1/0,i=-1/0,r=0;r<this.nodes.length;r++){var o=this.nodes[r].position;t=Math.min(t,o[0]),e=Math.min(e,o[1]),n=Math.max(n,o[0]),i=Math.max(i,o[1])}this.bbox[0]=t,this.bbox[1]=e,this.bbox[2]=n,this.bbox[3]=i},a.getGlobalSpeed=function(){return this._globalSpeed};var s=null;self.onmessage=function(t){switch(t.data.cmd){case"init":s=new o,s.initNodes(t.data.nodesPosition,t.data.nodesMass,t.data.nodesSize),s.initEdges(t.data.edges,t.data.edgesWeight);break;case"updateConfig":if(s)for(var e in t.data.config)s[e]=t.data.config[e];break;case"update":var n=t.data.steps;if(s){for(var i=0;i<n;i++)s.update();var r=s.nodes.length,a=new Float32Array(2*r);for(i=0;i<r;i++){var l=s.nodes[i];a[2*i]=l.position[0],a[2*i+1]=l.position[1]}self.postMessage({buffer:a.buffer,globalSpeed:s.getGlobalSpeed()},[a.buffer])}else{var c=new Float32Array;self.postMessage({buffer:c.buffer,globalSpeed:s.getGlobalSpeed()},[c.buffer])}break}}}var pd=dd,gd=pd.toString();gd=gd.slice(gd.indexOf("{")+1,gd.lastIndexOf("}"));var md={barnesHutOptimize:!0,barnesHutTheta:1.5,repulsionByDegree:!0,linLogMode:!1,strongGravityMode:!1,gravity:1,scaling:1,edgeWeightInfluence:1,jitterTolerence:.1,preventOverlap:!1,dissuadeHubs:!1,gravityCenter:null},vd=function(t){for(var e in md)this[e]=md[e];if(t)for(var e in t)this[e]=t[e];this._nodes=[],this._edges=[],this._disposed=!1,this._positionTex=new tn({type:We.FLOAT,flipY:!1,minFilter:We.NEAREST,magFilter:We.NEAREST})};vd.prototype.initData=function(t,e){var n=new Blob([gd]),i=window.URL.createObjectURL(n);this._worker=new Worker(i),this._worker.onmessage=this._$onupdate.bind(this),this._nodes=t,this._edges=e,this._frame=0;for(var r=t.length,o=e.length,a=new Float32Array(2*r),s=new Float32Array(r),l=new Float32Array(r),c=new Float32Array(2*o),u=new Float32Array(o),h=0;h<t.length;h++){var f=t[h];a[2*h]=f.x,a[2*h+1]=f.y,s[h]=null==f.mass?1:f.mass,l[h]=null==f.size?1:f.size}for(h=0;h<e.length;h++){var d=e[h],p=d.node1,g=d.node2;c[2*h]=p,c[2*h+1]=g,u[h]=null==d.weight?1:d.weight}var m=Math.ceil(Math.sqrt(t.length)),v=m,y=new Float32Array(m*v*4),_=this._positionTex;_.width=m,_.height=v,_.pixels=y,this._worker.postMessage({cmd:"init",nodesPosition:a,nodesMass:s,nodesSize:l,edges:c,edgesWeight:u}),this._globalSpeed=1/0},vd.prototype.updateOption=function(t){var e={};for(var n in md)e[n]=md[n];var i=this._nodes,r=this._edges,o=i.length;if(e.jitterTolerence=o>5e4?10:o>5e3?1:.1,e.scaling=o>100?2:10,e.barnesHutOptimize=o>1e3,t)for(var n in md)null!=t[n]&&(e[n]=t[n]);if(!e.gravityCenter){for(var a=[1/0,1/0],s=[-1/0,-1/0],l=0;l<i.length;l++)a[0]=Math.min(i[l].x,a[0]),a[1]=Math.min(i[l].y,a[1]),s[0]=Math.max(i[l].x,s[0]),s[1]=Math.max(i[l].y,s[1]);e.gravityCenter=[.5*(a[0]+s[0]),.5*(a[1]+s[1])]}for(l=0;l<r.length;l++){var c=r[l].node1,u=r[l].node2;i[c].degree=(i[c].degree||0)+1,i[u].degree=(i[u].degree||0)+1}this._worker&&this._worker.postMessage({cmd:"updateConfig",config:e})},vd.prototype.update=function(t,e,n){null==e&&(e=1),e=Math.max(e,1),this._frame+=e,this._onupdate=n,this._worker&&this._worker.postMessage({cmd:"update",steps:Math.round(e)})},vd.prototype._$onupdate=function(t){if(!this._disposed){var e=new Float32Array(t.data.buffer);this._globalSpeed=t.data.globalSpeed,this._positionArr=e,this._updateTexture(e),this._onupdate&&this._onupdate()}},vd.prototype.getNodePositionTexture=function(){return this._positionTex},vd.prototype.getNodeUV=function(t,e){e=e||[];var n=this._positionTex.width,i=this._positionTex.height;return e[0]=t%n/(n-1),e[1]=Math.floor(t/n)/(i-1),e},vd.prototype.getNodes=function(){return this._nodes},vd.prototype.getEdges=function(){return this._edges},vd.prototype.isFinished=function(t){return this._frame>t},vd.prototype.getNodePosition=function(t,e){if(e||(e=new Float32Array(2*this._nodes.length)),this._positionArr)for(var n=0;n<this._positionArr.length;n++)e[n]=this._positionArr[n];return e},vd.prototype._updateTexture=function(t){for(var e=this._positionTex.pixels,n=0,i=0;i<t.length;)e[n++]=t[i++],e[n++]=t[i++],e[n++]=1,e[n++]=1;this._positionTex.dirty()},vd.prototype.dispose=function(t){this._disposed=!0,this._worker=null};var yd=vd,_d=v.extend((function(){return{zr:null,viewGL:null,minZoom:.2,maxZoom:5,_needsUpdate:!1,_dx:0,_dy:0,_zoom:1}}),(function(){this._mouseDownHandler=this._mouseDownHandler.bind(this),this._mouseWheelHandler=this._mouseWheelHandler.bind(this),this._mouseMoveHandler=this._mouseMoveHandler.bind(this),this._mouseUpHandler=this._mouseUpHandler.bind(this),this._update=this._update.bind(this)}),{init:function(){var t=this.zr;t.on("mousedown",this._mouseDownHandler),t.on("mousewheel",this._mouseWheelHandler),t.on("globalout",this._mouseUpHandler),t.animation.on("frame",this._update)},setTarget:function(t){this._target=t},setZoom:function(t){this._zoom=Math.max(Math.min(t,this.maxZoom),this.minZoom),this._needsUpdate=!0},setOffset:function(t){this._dx=t[0],this._dy=t[1],this._needsUpdate=!0},getZoom:function(){return this._zoom},getOffset:function(){return[this._dx,this._dy]},_update:function(){if(this._target&&this._needsUpdate){var t=this._target,e=this._zoom;t.position.x=this._dx,t.position.y=this._dy,t.scale.set(e,e,e),this.zr.refresh(),this._needsUpdate=!1,this.trigger("update")}},_mouseDownHandler:function(t){if(!t.target){var e=t.offsetX,n=t.offsetY;if(!this.viewGL||this.viewGL.containPoint(e,n)){this.zr.on("mousemove",this._mouseMoveHandler),this.zr.on("mouseup",this._mouseUpHandler);var i=this._convertPos(e,n);this._x=i.x,this._y=i.y}}},_convertPos:function(t,e){var n=this.viewGL.camera,i=this.viewGL.viewport;return{x:(t-i.x)/i.width*(n.right-n.left)+n.left,y:(e-i.y)/i.height*(n.bottom-n.top)+n.top}},_mouseMoveHandler:function(t){var e=this._convertPos(t.offsetX,t.offsetY);this._dx+=e.x-this._x,this._dy+=e.y-this._y,this._x=e.x,this._y=e.y,this._needsUpdate=!0},_mouseUpHandler:function(t){this.zr.off("mousemove",this._mouseMoveHandler),this.zr.off("mouseup",this._mouseUpHandler)},_mouseWheelHandler:function(t){t=t.event;var e=t.wheelDelta||-t.detail;if(0!==e){var n=t.offsetX,i=t.offsetY;if(!this.viewGL||this.viewGL.containPoint(n,i)){var r=e>0?1.1:.9,o=Math.max(Math.min(this._zoom*r,this.maxZoom),this.minZoom);r=o/this._zoom;var a=this._convertPos(n,i),s=(a.x-this._dx)*(r-1),l=(a.y-this._dy)*(r-1);this._dx-=s,this._dy-=l,this._zoom=o,this._needsUpdate=!0}}},dispose:function(){var t=this.zr;t.off("mousedown",this._mouseDownHandler),t.off("mousemove",this._mouseMoveHandler),t.off("mouseup",this._mouseUpHandler),t.off("mousewheel",this._mouseWheelHandler),t.off("globalout",this._mouseUpHandler),t.animation.off("frame",this._update)}}),bd=_d,xd="@export ecgl.lines2D.vertex\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nattribute vec2 position: POSITION;\nattribute vec4 a_Color : COLOR;\nvarying vec4 v_Color;\n\n#ifdef POSITIONTEXTURE_ENABLED\nuniform sampler2D positionTexture;\n#endif\n\nvoid main()\n{\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n v_Color = a_Color;\n}\n\n@end\n\n@export ecgl.lines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.vertex\n\nattribute vec2 position: POSITION;\nattribute vec2 normal;\nattribute float offset;\nattribute vec4 a_Color : COLOR;\n\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\nuniform vec4 viewport : VIEWPORT;\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n vec4 p2 = worldViewProjection * vec4(position + normal, -10.0, 1.0);\n gl_Position = worldViewProjection * vec4(position, -10.0, 1.0);\n\n p2.xy /= p2.w;\n gl_Position.xy /= gl_Position.w;\n\n vec2 N = normalize(p2.xy - gl_Position.xy);\n gl_Position.xy += N * offset / viewport.zw * 2.0;\n\n gl_Position.xy *= gl_Position.w;\n\n v_Color = a_Color;\n}\n@end\n\n\n@export ecgl.meshLines2D.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\n\nvarying vec4 v_Color;\nvarying float v_Miter;\n\nvoid main()\n{\n gl_FragColor = color * v_Color;\n}\n\n@end",wd=Zo.vec2;bo.Shader.import(xd);var Sd=1,Td=i["b"].extend({type:"graphGL",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this.viewGL=new al("orthographic"),this.viewGL.camera.left=this.viewGL.camera.right=0,this.viewGL.add(this.groupGL),this._pointsBuilder=new Jh(!0,e),this._forceEdgesMesh=new bo.Mesh({material:new bo.Material({shader:bo.createShader("ecgl.forceAtlas2.edges"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new bo.Geometry({attributes:{node:new bo.Geometry.Attribute("node","float",2),color:new bo.Geometry.Attribute("color","float",4,"COLOR")},dynamic:!0,mainAttribute:"node"}),renderOrder:-1,mode:bo.Mesh.LINES}),this._edgesMesh=new bo.Mesh({material:new bo.Material({shader:bo.createShader("ecgl.meshLines2D"),transparent:!0,depthMask:!1,depthTest:!1}),$ignorePicking:!0,geometry:new ld({useNativeLine:!1,dynamic:!0}),renderOrder:-1,culling:!1}),this._layoutId=0,this._control=new bd({zr:e.getZr(),viewGL:this.viewGL}),this._control.setTarget(this.groupGL),this._control.init(),this._clickHandler=this._clickHandler.bind(this)},render:function(t,e,n){this.groupGL.add(this._pointsBuilder.rootNode),this._model=t,this._api=n,this._initLayout(t,e,n),this._pointsBuilder.update(t,e,n),this._forceLayoutInstance instanceof fd||this.groupGL.remove(this._forceEdgesMesh),this._updateCamera(t,n),this._control.off("update"),this._control.on("update",(function(){n.dispatchAction({type:"graphGLRoam",seriesId:t.id,zoom:this._control.getZoom(),offset:this._control.getOffset()}),this._pointsBuilder.updateView(this.viewGL.camera)}),this),this._control.setZoom(Ar.firstNotNull(t.get("zoom"),1)),this._control.setOffset(t.get("offset")||[0,0]);var i=this._pointsBuilder.getPointsMesh();if(i.off("mousemove",this._mousemoveHandler),i.off("mouseout",this._mouseOutHandler,this),n.getZr().off("click",this._clickHandler),this._pointsBuilder.highlightOnMouseover=!0,t.get("focusNodeAdjacency")){var r=t.get("focusNodeAdjacencyOn");"click"===r?n.getZr().on("click",this._clickHandler):"mouseover"===r&&(i.on("mousemove",this._mousemoveHandler,this),i.on("mouseout",this._mouseOutHandler,this),this._pointsBuilder.highlightOnMouseover=!1)}this._lastMouseOverDataIndex=-1},_clickHandler:function(t){if(!this._layouting){var e=this._pointsBuilder.getPointsMesh().dataIndex;e>=0?this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:e}):this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id})}},_mousemoveHandler:function(t){if(!this._layouting){var e=this._pointsBuilder.getPointsMesh().dataIndex;e>=0?e!==this._lastMouseOverDataIndex&&this._api.dispatchAction({type:"graphGLFocusNodeAdjacency",seriesId:this._model.id,dataIndex:e}):this._mouseOutHandler(t),this._lastMouseOverDataIndex=e}},_mouseOutHandler:function(t){this._layouting||(this._api.dispatchAction({type:"graphGLUnfocusNodeAdjacency",seriesId:this._model.id}),this._lastMouseOverDataIndex=-1)},_updateForceEdgesGeometry:function(t,e){var n=this._forceEdgesMesh.geometry,i=e.getEdgeData(),r=0,o=this._forceLayoutInstance,a=2*i.count();n.attributes.node.init(a),n.attributes.color.init(a),i.each((function(e){var a=t[e];n.attributes.node.set(r,o.getNodeUV(a.node1)),n.attributes.node.set(r+1,o.getNodeUV(a.node2));var s=mc(i,a.dataIndex),l=bo.parseColor(s);l[3]*=Ar.firstNotNull(vc(i,a.dataIndex),1),n.attributes.color.set(r,l),n.attributes.color.set(r+1,l),r+=2})),n.dirty()},_updateMeshLinesGeometry:function(){var t=this._model.getEdgeData(),e=this._edgesMesh.geometry,n=(t=this._model.getEdgeData(),this._model.getData().getLayout("points"));e.resetOffset(),e.setVertexCount(t.count()*e.getLineVertexCount()),e.setTriangleCount(t.count()*e.getLineTriangleCount());var i=[],r=[],o=["lineStyle","width"];this._originalEdgeColors=new Float32Array(4*t.count()),this._edgeIndicesMap=new Float32Array(t.count()),t.each((function(a){var s=t.graph.getEdgeByIndex(a),l=2*s.node1.dataIndex,c=2*s.node2.dataIndex;i[0]=n[l],i[1]=n[l+1],r[0]=n[c],r[1]=n[c+1];var u=mc(t,s.dataIndex),h=bo.parseColor(u);h[3]*=Ar.firstNotNull(vc(t,s.dataIndex),1);var f=t.getItemModel(s.dataIndex),d=Ar.firstNotNull(f.get(o),1)*this._api.getDevicePixelRatio();e.addLine(i,r,h,d);for(var p=0;p<4;p++)this._originalEdgeColors[4*s.dataIndex+p]=h[p];this._edgeIndicesMap[s.dataIndex]=a}),this),e.dirty()},_updateForceNodesGeometry:function(t){for(var e=this._pointsBuilder.getPointsMesh(),n=[],i=0;i<t.count();i++)this._forceLayoutInstance.getNodeUV(i,n),e.geometry.attributes.position.set(i,n);e.geometry.dirty("position")},_initLayout:function(t,e,n){var r=t.get("layout"),o=t.getGraph(),a=t.getBoxLayoutParams(),s=Object(Pa["g"])(a,{width:n.getWidth(),height:n.getHeight()});"force"===r&&(r="forceAtlas2"),this.stopLayout(t,e,n,{beforeLayout:!0});var l=t.getData(),c=t.getData();if("forceAtlas2"===r){var u=t.getModel("forceAtlas2"),h=this._forceLayoutInstance,f=[],d=[],p=l.getDataExtent("value"),g=c.getDataExtent("value"),m=Ar.firstNotNull(u.get("edgeWeight"),1),v=Ar.firstNotNull(u.get("nodeWeight"),1);"number"===typeof m&&(m=[m,m]),"number"===typeof v&&(v=[v,v]);var y=0,_={},b=new Float32Array(2*l.count());if(o.eachNode((function(t){var e,n,r=t.dataIndex,o=l.get("value",r);if(l.hasItemOption){var a=l.getItemModel(r);e=a.get("x"),n=a.get("y")}null==e&&(e=s.x+Math.random()*s.width,n=s.y+Math.random()*s.height),b[2*y]=e,b[2*y+1]=n,_[t.id]=y++;var c=i["q"].linearMap(o,p,v);isNaN(c)&&(c=isNaN(v[0])?1:v[0]),f.push({x:e,y:n,mass:c,size:l.getItemVisual(r,"symbolSize")})})),l.setLayout("points",b),o.eachEdge((function(t){var e=t.dataIndex,n=l.get("value",e),r=i["q"].linearMap(n,g,m);isNaN(r)&&(r=isNaN(m[0])?1:m[0]),d.push({node1:_[t.node1.id],node2:_[t.node2.id],weight:r,dataIndex:e})})),!h){var x=u.get("GPU");this._forceLayoutInstance&&((!x||this._forceLayoutInstance instanceof fd)&&(x||this._forceLayoutInstance instanceof yd)||(this._forceLayoutInstanceToDispose=this._forceLayoutInstance)),h=this._forceLayoutInstance=x?new fd:new yd}h.initData(f,d),h.updateOption(u.option),this._updateForceEdgesGeometry(h.getEdges(),t),this._updatePositionTexture(),n.dispatchAction({type:"graphGLStartLayout",from:this.uid})}else{b=new Float32Array(2*l.count()),y=0;o.eachNode((function(t){var e,n,i=t.dataIndex;if(l.hasItemOption){var r=l.getItemModel(i);e=r.get("x"),n=r.get("y")}b[y++]=e,b[y++]=n})),l.setLayout("points",b),this._updateAfterLayout(t,e,n)}},_updatePositionTexture:function(){var t=this._forceLayoutInstance.getNodePositionTexture();this._pointsBuilder.setPositionTexture(t),this._forceEdgesMesh.material.set("positionTex",t)},startLayout:function(t,e,n,i){if(!i||null==i.from||i.from===this.uid){var r=this.viewGL,o=(n=this._api,this._forceLayoutInstance),a=this._model.getData(),s=this._model.getModel("forceAtlas2");if(o&&(this.groupGL.remove(this._edgesMesh),this.groupGL.add(this._forceEdgesMesh),this._forceLayoutInstance)){this._updateForceNodesGeometry(t.getData()),this._pointsBuilder.hideLabels();var l=this,c=this._layoutId=Sd++,u=s.getShallow("maxSteps"),h=s.getShallow("steps"),f=0,d=Math.max(2*h,20),p=function(e){if(e===l._layoutId)return o.isFinished(u)?(n.dispatchAction({type:"graphGLStopLayout",from:l.uid}),void n.dispatchAction({type:"graphGLFinishLayout",points:a.getLayout("points"),from:l.uid})):void o.update(r.layer.renderer,h,(function(){l._updatePositionTexture(),f+=h,f>=d&&(l._syncNodePosition(t),f=0),n.getZr().refresh(),Object(xo["a"])((function(){p(e)}))}))};Object(xo["a"])((function(){l._forceLayoutInstanceToDispose&&(l._forceLayoutInstanceToDispose.dispose(r.layer.renderer),l._forceLayoutInstanceToDispose=null),p(c)})),this._layouting=!0}}},stopLayout:function(t,e,n,i){i&&null!=i.from&&i.from!==this.uid||(this._layoutId=0,this.groupGL.remove(this._forceEdgesMesh),this.groupGL.add(this._edgesMesh),this._forceLayoutInstance&&this.viewGL.layer&&(i&&i.beforeLayout||(this._syncNodePosition(t),this._updateAfterLayout(t,e,n)),this._api.getZr().refresh(),this._layouting=!1))},_syncNodePosition:function(t){var e=this._forceLayoutInstance.getNodePosition(this.viewGL.layer.renderer);t.getData().setLayout("points",e),t.setNodePosition(e)},_updateAfterLayout:function(t,e,n){this._updateMeshLinesGeometry(),this._pointsBuilder.removePositionTexture(),this._pointsBuilder.updateLayout(t,e,n),this._pointsBuilder.updateView(this.viewGL.camera),this._pointsBuilder.updateLabels(),this._pointsBuilder.showLabels()},focusNodeAdjacency:function(t,e,n,i){var r=this._model.getData();this._downplayAll();var o=i.dataIndex,a=r.graph,s=[],l=a.getNodeByIndex(o);s.push(l),l.edges.forEach((function(t){t.dataIndex<0||(t.node1!==l&&s.push(t.node1),t.node2!==l&&s.push(t.node2))}),this),this._pointsBuilder.fadeOutAll(.05),this._fadeOutEdgesAll(.05),s.forEach((function(t){this._pointsBuilder.highlight(r,t.dataIndex)}),this),this._pointsBuilder.updateLabels(s.map((function(t){return t.dataIndex})));var c=[];l.edges.forEach((function(t){t.dataIndex>=0&&(this._highlightEdge(t.dataIndex),c.push(t))}),this),this._focusNodes=s,this._focusEdges=c},unfocusNodeAdjacency:function(t,e,n,i){this._downplayAll(),this._pointsBuilder.fadeInAll(),this._fadeInEdgesAll(),this._pointsBuilder.updateLabels()},_highlightEdge:function(t){var e=this._model.getEdgeData().getItemModel(t),n=bo.parseColor(e.get("emphasis.lineStyle.color")||e.get("lineStyle.color")),i=Ar.firstNotNull(e.get("emphasis.lineStyle.opacity"),e.get("lineStyle.opacity"),1);n[3]*=i,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],n)},_downplayAll:function(){this._focusNodes&&this._focusNodes.forEach((function(t){this._pointsBuilder.downplay(this._model.getData(),t.dataIndex)}),this),this._focusEdges&&this._focusEdges.forEach((function(t){this._downplayEdge(t.dataIndex)}),this)},_downplayEdge:function(t){var e=this._getColor(t,[]);this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[t],e)},_setEdgeFade:function(){var t=[];return function(e,n){this._getColor(e,t),t[3]*=n,this._edgesMesh.geometry.setItemColor(this._edgeIndicesMap[e],t)}}(),_getColor:function(t,e){for(var n=0;n<4;n++)e[n]=this._originalEdgeColors[4*t+n];return e},_fadeOutEdgesAll:function(t){var e=this._model.getData().graph;e.eachEdge((function(e){this._setEdgeFade(e.dataIndex,t)}),this)},_fadeInEdgesAll:function(){this._fadeOutEdgesAll(1)},_updateCamera:function(t,e){this.viewGL.setViewport(0,0,e.getWidth(),e.getHeight(),e.getDevicePixelRatio());for(var n=this.viewGL.camera,i=t.getData(),r=i.getLayout("points"),o=wd.create(1/0,1/0),a=wd.create(-1/0,-1/0),s=[],l=0;l<r.length;)s[0]=r[l++],s[1]=r[l++],wd.min(o,o,s),wd.max(a,a,s);var c=(a[1]+o[1])/2,u=(a[0]+o[0])/2;if(!(u>n.left&&u<n.right&&c<n.bottom&&c>n.top)){var h=Math.max(a[0]-o[0],10),f=h/e.getWidth()*e.getHeight();h*=1.4,f*=1.4,o[0]-=.2*h,n.left=o[0],n.top=c-f/2,n.bottom=c+f/2,n.right=h+o[0],n.near=0,n.far=100}},dispose:function(){var t=this.viewGL.layer.renderer;this._forceLayoutInstance&&this._forceLayoutInstance.dispose(t),this.groupGL.removeAll(),this._layoutId=-1,this._pointsBuilder.dispose()},remove:function(){this.groupGL.removeAll(),this._control.dispose()}});function Od(t){return t instanceof Array||(t=[t,t]),t}function Cd(t){function e(){}t.registerChartView(Td),t.registerSeriesModel(rd),t.registerVisual((function(t){const e={};t.eachSeriesByType("graphGL",(function(t){var n=t.getCategoriesData(),r=t.getData(),o={};n.each((function(i){var r=n.getName(i);o["ec-"+r]=i;var a=n.getItemModel(i),s=a.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(r,e)),n.setItemVisual(i,"style",s);var l=["symbol","symbolSize","symbolKeepAspect"];for(let t=0;t<l.length;t++){var c=a.getShallow(l[t],!0);null!=c&&n.setItemVisual(i,l[t],c)}})),n.count()&&r.each((function(t){var e=r.getItemModel(t);let a=e.getShallow("category");if(null!=a){"string"===typeof a&&(a=o["ec-"+a]);var s=n.getItemVisual(a,"style"),l=r.ensureUniqueItemVisual(t,"style");i["x"].extend(l,s);var c=["symbol","symbolSize","symbolKeepAspect"];for(let e=0;e<c.length;e++)r.setItemVisual(t,c[e],n.getItemVisual(a,c[e]))}}))}))})),t.registerVisual((function(t){t.eachSeriesByType("graphGL",(function(t){var e=t.getGraph(),n=t.getEdgeData(),r=Od(t.get("edgeSymbol")),o=Od(t.get("edgeSymbolSize"));n.setVisual("drawType","stroke"),n.setVisual("fromSymbol",r&&r[0]),n.setVisual("toSymbol",r&&r[1]),n.setVisual("fromSymbolSize",o&&o[0]),n.setVisual("toSymbolSize",o&&o[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each((function(t){var r=n.getItemModel(t),o=e.getEdgeByIndex(t),a=Od(r.getShallow("symbol",!0)),s=Od(r.getShallow("symbolSize",!0)),l=r.getModel("lineStyle").getLineStyle(),c=n.ensureUniqueItemVisual(t,"style");switch(i["x"].extend(c,l),c.stroke){case"source":var u=o.node1.getVisual("style");c.stroke=u&&u.fill;break;case"target":u=o.node2.getVisual("style");c.stroke=u&&u.fill;break}a[0]&&o.setVisual("fromSymbol",a[0]),a[1]&&o.setVisual("toSymbol",a[1]),s[0]&&o.setVisual("fromSymbolSize",s[0]),s[1]&&o.setVisual("toSymbolSize",s[1])}))}))})),t.registerAction({type:"graphGLRoam",event:"graphglroam",update:"series.graphGL:roam"},(function(t,e){e.eachComponent({mainType:"series",query:t},(function(e){e.setView(t)}))})),t.registerAction({type:"graphGLStartLayout",event:"graphgllayoutstarted",update:"series.graphGL:startLayout"},e),t.registerAction({type:"graphGLStopLayout",event:"graphgllayoutstopped",update:"series.graphGL:stopLayout"},e),t.registerAction({type:"graphGLFocusNodeAdjacency",event:"graphGLFocusNodeAdjacency",update:"series.graphGL:focusNodeAdjacency"},e),t.registerAction({type:"graphGLUnfocusNodeAdjacency",event:"graphGLUnfocusNodeAdjacency",update:"series.graphGL:unfocusNodeAdjacency"},e)}Object(i["w"])(Cd);var Md=i["g"].extend({type:"series.flowGL",dependencies:["geo","grid","bmap"],visualStyleAccessPath:"itemStyle",getInitialData:function(t,e){var n=this.get("coordinateSystem"),r="geo"===n?["lng","lat"]:i["l"](n)||["x","y"];r.push("vx","vy");var o=i["o"].createDimensions(this.getSource(),{coordDimensions:r,encodeDefine:this.get("encode"),dimensionsDefine:this.get("dimensions")}),a=new i["e"](o,this);return a.initData(this.getSource()),a},defaultOption:{coordinateSystem:"cartesian2d",zlevel:10,supersampling:1,particleType:"point",particleDensity:128,particleSize:1,particleSpeed:1,particleTrail:2,colorTexture:null,gridWidth:"auto",gridHeight:"auto",itemStyle:{color:"#fff",opacity:.8}}}),Ad=pn.extend((function(){return{dynamic:!0,attributes:{position:new pn.Attribute("position","float",3,"POSITION")}}}),{resetOffset:function(){this._vertexOffset=0,this._faceOffset=0},setLineCount:function(t){var e=this.attributes,n=4*t,i=2*t;this.vertexCount!==n&&e.position.init(n),this.triangleCount!==i&&(this.indices=0===i?null:this.vertexCount>65535?new Uint32Array(3*i):new Uint16Array(3*i))},addLine:function(t){var e=this._vertexOffset;this.attributes.position.set(e,[t[0],t[1],1]),this.attributes.position.set(e+1,[t[0],t[1],-1]),this.attributes.position.set(e+2,[t[0],t[1],2]),this.attributes.position.set(e+3,[t[0],t[1],-2]),this.setTriangleIndices(this._faceOffset++,[e,e+1,e+2]),this.setTriangleIndices(this._faceOffset++,[e+1,e+2,e+3]),this._vertexOffset+=4}}),Dd=Ad,Ed="@export ecgl.vfParticle.particle.fragment\n\nuniform sampler2D particleTexture;\nuniform sampler2D spawnTexture;\nuniform sampler2D velocityTexture;\n\nuniform float deltaTime;\nuniform float elapsedTime;\n\nuniform float speedScaling : 1.0;\n\nuniform vec2 textureSize;\nuniform vec4 region : [0, 0, 1, 1];\nuniform float firstFrameTime;\n\nvarying vec2 v_Texcoord;\n\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, v_Texcoord);\n bool spawn = false;\n if (p.w <= 0.0) {\n p = texture2D(spawnTexture, fract(v_Texcoord + elapsedTime / 10.0));\n p.w -= firstFrameTime;\n spawn = true;\n }\n vec2 v = texture2D(velocityTexture, fract(p.xy * region.zw + region.xy)).xy;\n v = (v - 0.5) * 2.0;\n p.z = length(v);\n p.xy += v * deltaTime / 10.0 * speedScaling;\n p.w -= deltaTime;\n\n if (spawn || p.xy != fract(p.xy)) {\n p.z = 0.0;\n }\n p.xy = fract(p.xy);\n\n gl_FragColor = p;\n}\n@end\n\n@export ecgl.vfParticle.renderPoints.vertex\n\n#define PI 3.1415926\n\nattribute vec2 texcoord : TEXCOORD_0;\n\nuniform sampler2D particleTexture;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nuniform float size : 1.0;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, texcoord);\n\n if (p.w > 0.0 && p.z > 1e-5) {\n gl_Position = worldViewProjection * vec4(p.xy * 2.0 - 1.0, 0.0, 1.0);\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n\n v_Mag = p.z;\n v_Uv = p.xy;\n\n gl_PointSize = size;\n}\n\n@end\n\n@export ecgl.vfParticle.renderPoints.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\nuniform sampler2D spriteTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n#ifdef SPRITETEXTURE_ENABLED\n gl_FragColor *= texture2D(spriteTexture, gl_PointCoord);\n if (color.a == 0.0) {\n discard;\n }\n#endif\n#ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.vertex\n\n#define PI 3.1415926\n\nattribute vec3 position : POSITION;\n\nuniform sampler2D particleTexture;\nuniform sampler2D prevParticleTexture;\n\nuniform float size : 1.0;\nuniform vec4 vp: VIEWPORT;\nuniform mat4 worldViewProjection : WORLDVIEWPROJECTION;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\n@import clay.util.rand\n\nvoid main()\n{\n vec4 p = texture2D(particleTexture, position.xy);\n vec4 p2 = texture2D(prevParticleTexture, position.xy);\n\n p.xy = p.xy * 2.0 - 1.0;\n p2.xy = p2.xy * 2.0 - 1.0;\n\n if (p.w > 0.0 && p.z > 1e-5) {\n vec2 dir = normalize(p.xy - p2.xy);\n vec2 norm = vec2(dir.y / vp.z, -dir.x / vp.w) * sign(position.z) * size;\n if (abs(position.z) == 2.0) {\n gl_Position = vec4(p.xy + norm, 0.0, 1.0);\n v_Uv = p.xy;\n v_Mag = p.z;\n }\n else {\n gl_Position = vec4(p2.xy + norm, 0.0, 1.0);\n v_Mag = p2.z;\n v_Uv = p2.xy;\n }\n gl_Position = worldViewProjection * gl_Position;\n }\n else {\n gl_Position = vec4(100000.0, 100000.0, 100000.0, 1.0);\n }\n}\n\n@end\n\n@export ecgl.vfParticle.renderLines.fragment\n\nuniform vec4 color : [1.0, 1.0, 1.0, 1.0];\nuniform sampler2D gradientTexture;\nuniform sampler2D colorTexture;\n\nvarying float v_Mag;\nvarying vec2 v_Uv;\n\nvoid main()\n{\n gl_FragColor = color;\n #ifdef GRADIENTTEXTURE_ENABLED\n gl_FragColor *= texture2D(gradientTexture, vec2(v_Mag, 0.5));\n#endif\n#ifdef COLORTEXTURE_ENABLED\n gl_FragColor *= texture2D(colorTexture, v_Uv);\n#endif\n}\n\n@end\n";function Id(t){var e=document.createElement("canvas");e.width=e.height=t;var n=e.getContext("2d");return n.fillStyle="#fff",n.arc(t/2,t/2,t/2,0,2*Math.PI),n.fill(),e}zt["import"](Ed);var Pd=function(){this.motionBlurFactor=.99,this.vectorFieldTexture=new tn({type:We.FLOAT,flipY:!1}),this.particleLife=[5,20],this._particleType="point",this._particleSize=1,this.particleColor=[1,1,1,1],this.particleSpeedScaling=1,this._thisFrameTexture=null,this._particlePass=null,this._spawnTexture=null,this._particleTexture0=null,this._particleTexture1=null,this._particlePointsMesh=null,this._surfaceFrameBuffer=null,this._elapsedTime=0,this._scene=null,this._camera=null,this._lastFrameTexture=null,this._supersampling=1,this._downsampleTextures=[],this._width=512,this._height=512,this.init()};Pd.prototype={constructor:Pd,init:function(){var t={type:We.FLOAT,minFilter:We.NEAREST,magFilter:We.NEAREST,useMipmap:!1};this._spawnTexture=new tn(t),this._particleTexture0=new tn(t),this._particleTexture1=new tn(t),this._frameBuffer=new li({depthBuffer:!1}),this._particlePass=new hr({fragment:zt.source("ecgl.vfParticle.particle.fragment")}),this._particlePass.setUniform("velocityTexture",this.vectorFieldTexture),this._particlePass.setUniform("spawnTexture",this._spawnTexture),this._downsamplePass=new hr({fragment:zt.source("clay.compositor.downsample")});var e=new Ye({renderOrder:10,material:new K({shader:new zt(zt.source("ecgl.vfParticle.renderPoints.vertex"),zt.source("ecgl.vfParticle.renderPoints.fragment"))}),mode:Ye.POINTS,geometry:new pn({dynamic:!0,mainAttribute:"texcoord0"})}),n=new Ye({renderOrder:10,material:new K({shader:new zt(zt.source("ecgl.vfParticle.renderLines.vertex"),zt.source("ecgl.vfParticle.renderLines.fragment"))}),geometry:new Dd,culling:!1}),i=new Ye({material:new K({shader:new zt(zt.source("ecgl.color.vertex"),zt.source("ecgl.color.fragment"))}),geometry:new di});i.material.enableTexture("diffuseMap"),this._particlePointsMesh=e,this._particleLinesMesh=n,this._lastFrameFullQuadMesh=i,this._camera=new or,this._thisFrameTexture=new tn,this._lastFrameTexture=new tn},setParticleDensity:function(t,e){for(var n=t*e,i=new Float32Array(4*n),r=0,o=this.particleLife,a=0;a<t;a++)for(var s=0;s<e;s++,r++){i[4*r]=Math.random(),i[4*r+1]=Math.random(),i[4*r+2]=Math.random();var l=(o[1]-o[0])*Math.random()+o[0];i[4*r+3]=l}"line"===this._particleType?this._setLineGeometry(t,e):this._setPointsGeometry(t,e),this._spawnTexture.width=t,this._spawnTexture.height=e,this._spawnTexture.pixels=i,this._particleTexture0.width=this._particleTexture1.width=t,this._particleTexture0.height=this._particleTexture1.height=e,this._particlePass.setUniform("textureSize",[t,e])},_setPointsGeometry:function(t,e){var n=t*e,i=this._particlePointsMesh.geometry,r=i.attributes;r.texcoord0.init(n);for(var o=0,a=0;a<t;a++)for(var s=0;s<e;s++,o++)r.texcoord0.value[2*o]=a/t,r.texcoord0.value[2*o+1]=s/e;i.dirty()},_setLineGeometry:function(t,e){var n=t*e,i=this._getParticleMesh().geometry;i.setLineCount(n),i.resetOffset();for(var r=0;r<t;r++)for(var o=0;o<e;o++)i.addLine([r/t,o/e]);i.dirty()},_getParticleMesh:function(){return"line"===this._particleType?this._particleLinesMesh:this._particlePointsMesh},update:function(t,e,n,i){var r=this._getParticleMesh(),o=this._frameBuffer,a=this._particlePass;i&&this._updateDownsampleTextures(t,e),r.material.set("size",this._particleSize*this._supersampling),r.material.set("color",this.particleColor),a.setUniform("speedScaling",this.particleSpeedScaling),o.attach(this._particleTexture1),a.setUniform("firstFrameTime",i?(this.particleLife[1]+this.particleLife[0])/2:0),a.setUniform("particleTexture",this._particleTexture0),a.setUniform("deltaTime",n),a.setUniform("elapsedTime",this._elapsedTime),a.render(t,o),r.material.set("particleTexture",this._particleTexture1),r.material.set("prevParticleTexture",this._particleTexture0),o.attach(this._thisFrameTexture),o.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT);var s=this._lastFrameFullQuadMesh;s.material.set("diffuseMap",this._lastFrameTexture),s.material.set("color",[1,1,1,this.motionBlurFactor]),this._camera.update(!0),t.renderPass([s,r],this._camera),o.unbind(t),this._downsample(t),this._swapTexture(),this._elapsedTime+=n},_downsample:function(t){var e=this._downsampleTextures;if(0!==e.length){var n=0,i=this._thisFrameTexture,r=e[n];while(r)this._frameBuffer.attach(r),this._downsamplePass.setUniform("texture",i),this._downsamplePass.setUniform("textureSize",[i.width,i.height]),this._downsamplePass.render(t,this._frameBuffer),i=r,r=e[++n]}},getSurfaceTexture:function(){var t=this._downsampleTextures;return t.length>0?t[t.length-1]:this._lastFrameTexture},setRegion:function(t){this._particlePass.setUniform("region",t)},resize:function(t,e){this._lastFrameTexture.width=t*this._supersampling,this._lastFrameTexture.height=e*this._supersampling,this._thisFrameTexture.width=t*this._supersampling,this._thisFrameTexture.height=e*this._supersampling,this._width=t,this._height=e},setParticleSize:function(t){var e=this._getParticleMesh();if(t<=2)return e.material.disableTexture("spriteTexture"),void(e.material.transparent=!1);this._spriteTexture||(this._spriteTexture=new tn),this._spriteTexture.image&&this._spriteTexture.image.width===t||(this._spriteTexture.image=Id(t),this._spriteTexture.dirty()),e.material.transparent=!0,e.material.enableTexture("spriteTexture"),e.material.set("spriteTexture",this._spriteTexture),this._particleSize=t},setGradientTexture:function(t){var e=this._getParticleMesh().material;e[t?"enableTexture":"disableTexture"]("gradientTexture"),e.setUniform("gradientTexture",t)},setColorTextureImage:function(t,e){var n=this._getParticleMesh().material;n.setTextureImage("colorTexture",t,e,{flipY:!0})},setParticleType:function(t){this._particleType=t},clearFrame:function(t){var e=this._frameBuffer;e.attach(this._lastFrameTexture),e.bind(t),t.gl.clear(t.gl.DEPTH_BUFFER_BIT|t.gl.COLOR_BUFFER_BIT),e.unbind(t)},setSupersampling:function(t){this._supersampling=t,this.resize(this._width,this._height)},_updateDownsampleTextures:function(t,e){for(var n=this._downsampleTextures,i=Math.max(Math.floor(Math.log(this._supersampling/e.getDevicePixelRatio())/Math.log(2)),0),r=2,o=this._width*this._supersampling,a=this._height*this._supersampling,s=0;s<i;s++)n[s]=n[s]||new tn,n[s].width=o/r,n[s].height=a/r,r*=2;for(;s<n.length;s++)n[s].dispose(t);n.length=i},_swapTexture:function(){var t=this._particleTexture0;this._particleTexture0=this._particleTexture1,this._particleTexture1=t;t=this._thisFrameTexture;this._thisFrameTexture=this._lastFrameTexture,this._lastFrameTexture=t},dispose:function(t){t.disposeFrameBuffer(this._frameBuffer),t.disposeTexture(this.vectorFieldTexture),t.disposeTexture(this._spawnTexture),t.disposeTexture(this._particleTexture0),t.disposeTexture(this._particleTexture1),t.disposeTexture(this._thisFrameTexture),t.disposeTexture(this._lastFrameTexture),t.disposeGeometry(this._particleLinesMesh.geometry),t.disposeGeometry(this._particlePointsMesh.geometry),t.disposeGeometry(this._lastFrameFullQuadMesh.geometry),this._spriteTexture&&t.disposeTexture(this._spriteTexture),this._particlePass.dispose(t),this._downsamplePass.dispose(t),this._downsampleTextures.forEach((function(e){e.dispose(t)}))}};var Ld=Pd,kd=i["b"].extend({type:"flowGL",__ecgl__:!0,init:function(t,e){this.viewGL=new al("orthographic"),this.groupGL=new bo.Node,this.viewGL.add(this.groupGL),this._particleSurface=new Ld;var n=new bo.Mesh({geometry:new bo.PlaneGeometry,material:new bo.Material({shader:new bo.Shader({vertex:bo.Shader.source("ecgl.color.vertex"),fragment:bo.Shader.source("ecgl.color.fragment")}),transparent:!0})});n.material.enableTexture("diffuseMap"),this.groupGL.add(n),this._planeMesh=n},render:function(t,e,n){var i=this._particleSurface;i.setParticleType(t.get("particleType")),i.setSupersampling(t.get("supersampling")),this._updateData(t,n),this._updateCamera(n.getWidth(),n.getHeight(),n.getDevicePixelRatio());var r=Ar.firstNotNull(t.get("particleDensity"),128);i.setParticleDensity(r,r);var o=this._planeMesh,a=+new Date,s=this,l=!0;o.__percent=0,o.stopAnimation(),o.animate("",{loop:!0}).when(1e5,{__percent:1}).during((function(){var t=+new Date,e=Math.min(t-a,20);a+=e,s._renderer&&(i.update(s._renderer,n,e/1e3,l),o.material.set("diffuseMap",i.getSurfaceTexture())),l=!1})).start();var c=t.getModel("itemStyle"),u=bo.parseColor(c.get("color"));u[3]*=Ar.firstNotNull(c.get("opacity"),1),o.material.set("color",u),i.setColorTextureImage(t.get("colorTexture"),n),i.setParticleSize(t.get("particleSize")),i.particleSpeedScaling=t.get("particleSpeed"),i.motionBlurFactor=1-Math.pow(.1,t.get("particleTrail"))},updateTransform:function(t,e,n){this._updateData(t,n)},afterRender:function(t,e,n,i){var r=i.renderer;this._renderer=r},_updateData:function(t,e){var n=t.coordinateSystem,i=n.dimensions.map((function(e){return t.coordDimToDataDim(e)[0]})),r=t.getData(),o=r.getDataExtent(i[0]),a=r.getDataExtent(i[1]),s=t.get("gridWidth"),l=t.get("gridHeight");if(null==s||"auto"===s){var c=(o[1]-o[0])/(a[1]-a[0]);s=Math.round(Math.sqrt(c*r.count()))}null!=l&&"auto"!==l||(l=Math.ceil(r.count()/s));var u=this._particleSurface.vectorFieldTexture,h=u.pixels;if(h&&h.length===l*s*4)for(var f=0;f<h.length;f++)h[f]=0;else h=u.pixels=new Float32Array(s*l*4);var d=0,p=1/0,g=new Float32Array(2*r.count()),m=0,v=[[1/0,1/0],[-1/0,-1/0]];r.each([i[0],i[1],"vx","vy"],(function(t,e,i,r){var o=n.dataToPoint([t,e]);g[m++]=o[0],g[m++]=o[1],v[0][0]=Math.min(o[0],v[0][0]),v[0][1]=Math.min(o[1],v[0][1]),v[1][0]=Math.max(o[0],v[1][0]),v[1][1]=Math.max(o[1],v[1][1]);var a=Math.sqrt(i*i+r*r);d=Math.max(d,a),p=Math.min(p,a)})),r.each(["vx","vy"],(function(t,e,n){var i=Math.round((g[2*n]-v[0][0])/(v[1][0]-v[0][0])*(s-1)),r=l-1-Math.round((g[2*n+1]-v[0][1])/(v[1][1]-v[0][1])*(l-1)),o=4*(r*s+i);h[o]=t/d*.5+.5,h[o+1]=e/d*.5+.5,h[o+3]=1})),u.width=s,u.height=l,"bmap"===t.get("coordinateSystem")&&this._fillEmptyPixels(u),u.dirty(),this._updatePlanePosition(v[0],v[1],t,e),this._updateGradientTexture(r.getVisual("visualMeta"),[p,d])},_fillEmptyPixels:function(t){var e=t.pixels,n=t.width,i=t.height;function r(t,r,o){t=Math.max(Math.min(t,n-1),0),r=Math.max(Math.min(r,i-1),0);var a=4*(r*(n-1)+t);return 0!==e[a+3]&&(o[0]=e[a],o[1]=e[a+1],!0)}function o(t,e,n){n[0]=t[0]+e[0],n[1]=t[1]+e[1]}for(var a=[],s=[],l=[],c=[],u=[],h=0,f=0;f<i;f++)for(var d=0;d<n;d++){var p=4*(f*(n-1)+d);0===e[p+3]&&(h=a[0]=a[1]=0,r(d-1,f,s)&&(h++,o(s,a,a)),r(d+1,f,l)&&(h++,o(l,a,a)),r(d,f-1,c)&&(h++,o(c,a,a)),r(d,f+1,u)&&(h++,o(u,a,a)),a[0]/=h,a[1]/=h,e[p]=a[0],e[p+1]=a[1]),e[p+3]=1}},_updateGradientTexture:function(t,e){if(t&&t.length){this._gradientTexture=this._gradientTexture||new bo.Texture2D({image:document.createElement("canvas")});var n=this._gradientTexture,i=n.image;i.width=200,i.height=1;var r=i.getContext("2d"),o=r.createLinearGradient(0,.5,i.width,.5);t[0].stops.forEach((function(t){var n;e[1]===e[0]?n=0:(n=t.value/e[1],n=Math.min(Math.max(n,0),1)),o.addColorStop(n,t.color)})),r.fillStyle=o,r.fillRect(0,0,i.width,i.height),n.dirty(),this._particleSurface.setGradientTexture(this._gradientTexture)}else this._particleSurface.setGradientTexture(null)},_updatePlanePosition:function(t,e,n,i){var r=this._limitInViewportAndFullFill(t,e,n,i);t=r.leftTop,e=r.rightBottom,this._particleSurface.setRegion(r.region),this._planeMesh.position.set((t[0]+e[0])/2,i.getHeight()-(t[1]+e[1])/2,0);var o=e[0]-t[0],a=e[1]-t[1];this._planeMesh.scale.set(o/2,a/2,1),this._particleSurface.resize(Math.max(Math.min(o,2048),1),Math.max(Math.min(a,2048),1)),this._renderer&&this._particleSurface.clearFrame(this._renderer)},_limitInViewportAndFullFill:function(t,e,n,i){var r=[Math.max(t[0],0),Math.max(t[1],0)],o=[Math.min(e[0],i.getWidth()),Math.min(e[1],i.getHeight())];if("bmap"===n.get("coordinateSystem")){var a=n.getData().getDataExtent(n.coordDimToDataDim("lng")[0]),s=Math.floor(a[1]-a[0])>=359;s&&(r[0]>0&&(r[0]=0),o[0]<i.getWidth()&&(o[0]=i.getWidth()))}var l=e[0]-t[0],c=e[1]-t[1],u=o[0]-r[0],h=o[1]-r[1],f=[(r[0]-t[0])/l,1-h/c-(r[1]-t[1])/c,u/l,h/c];return{leftTop:r,rightBottom:o,region:f}},_updateCamera:function(t,e,n){this.viewGL.setViewport(0,0,t,e,n);var i=this.viewGL.camera;i.left=i.bottom=0,i.top=e,i.right=t,i.near=0,i.far=100,i.position.z=10},remove:function(){this._planeMesh.stopAnimation(),this.groupGL.removeAll()},dispose:function(){this._renderer&&this._particleSurface.dispose(this._renderer),this.groupGL.removeAll()}});function jd(t){t.registerChartView(kd),t.registerSeriesModel(Md)}Object(i["w"])(jd);var Rd=n("6d8b"),Nd=i["g"].extend({type:"series.linesGL",dependencies:["grid","geo"],visualStyleAccessPath:"lineStyle",visualDrawType:"stroke",streamEnabled:!0,init:function(t){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),Nd.superApply(this,"init",arguments)},mergeOption:function(t){var e=this._processFlatCoordsArray(t.data);this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset,e.flatCoords&&(t.data=new Float32Array(e.count)),Nd.superApply(this,"mergeOption",arguments)},appendData:function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=Object(Rd["e"])(this._flatCoords,e.flatCoords),this._flatCoordsOffset=Object(Rd["e"])(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},_getCoordsFromItemModel:function(t){var e=this.getData().getItemModel(t),n=e.option instanceof Array?e.option:e.getShallow("coords");return n},getLineCoordsCount:function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},getLineCoords:function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var o=this._getCoordsFromItemModel(t);for(r=0;r<o.length;r++)e[r]=e[r]||[],e[r][0]=o[r][0],e[r][1]=o[r][1];return o.length},_processFlatCoordsArray:function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),"number"===typeof t[0]){for(var n=t.length,i=new Uint32Array(n),r=new Float64Array(n),o=0,a=0,s=0,l=0;l<n;){s++;var c=t[l++];i[a++]=o+e,i[a++]=c;for(var u=0;u<c;u++){var h=t[l++],f=t[l++];r[o++]=h,r[o++]=f}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},getInitialData:function(t,e){var n=new i["e"](["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0})),n},defaultOption:{coordinateSystem:"geo",zlevel:10,progressive:1e4,progressiveThreshold:5e4,blendMode:"source-over",lineStyle:{opacity:.8},postEffect:{enable:!1,colorCorrection:{exposure:0,brightness:0,contrast:1,saturation:1,enable:!0}}}}),Bd=Nd,Fd=i["b"].extend({type:"linesGL",__ecgl__:!0,init:function(t,e){this.groupGL=new bo.Node,this.viewGL=new al("orthographic"),this.viewGL.add(this.groupGL),this._glViewHelper=new Kf(this.viewGL),this._nativeLinesShader=bo.createShader("ecgl.lines3D"),this._meshLinesShader=bo.createShader("ecgl.meshLines3D"),this._linesMeshes=[],this._currentStep=0},render:function(t,e,n){this.groupGL.removeAll(),this._glViewHelper.reset(t,n);var i=this._linesMeshes[0];i||(i=this._linesMeshes[0]=this._createLinesMesh(t)),this._linesMeshes.length=1,this.groupGL.add(i),this._updateLinesMesh(t,i,0,t.getData().count()),this.viewGL.setPostEffect(t.getModel("postEffect"),n)},incrementalPrepareRender:function(t,e,n){this.groupGL.removeAll(),this._glViewHelper.reset(t,n),this._currentStep=0,this.viewGL.setPostEffect(t.getModel("postEffect"),n)},incrementalRender:function(t,e,n,i){var r=this._linesMeshes[this._currentStep];r||(r=this._createLinesMesh(e),this._linesMeshes[this._currentStep]=r),this._updateLinesMesh(e,r,t.start,t.end),this.groupGL.add(r),i.getZr().refresh(),this._currentStep++},updateTransform:function(t,e,n){t.coordinateSystem.getRoamTransform&&this._glViewHelper.updateTransform(t,n)},_createLinesMesh:function(t){var e=new bo.Mesh({$ignorePicking:!0,material:new bo.Material({shader:bo.createShader("ecgl.lines3D"),transparent:!0,depthMask:!1,depthTest:!1}),geometry:new ld({segmentScale:10,useNativeLine:!0,dynamic:!1}),mode:bo.Mesh.LINES,culling:!1});return e},_updateLinesMesh:function(t,e,n,i){var r=t.getData();e.material.blend="lighter"===t.get("blendMode")?bo.additiveBlend:null;var o=t.get("lineStyle.curveness")||0,a=t.get("polyline"),s=e.geometry,l=t.coordinateSystem,c=Ar.firstNotNull(t.get("lineStyle.width"),1);c>1?(e.material.shader!==this._meshLinesShader&&e.material.attachShader(this._meshLinesShader),e.mode=bo.Mesh.TRIANGLES):(e.material.shader!==this._nativeLinesShader&&e.material.attachShader(this._nativeLinesShader),e.mode=bo.Mesh.LINES),n=n||0,i=i||r.count(),s.resetOffset();var u=0,h=0,f=[],d=[],p=[],g=[],m=[],v=.3,y=.7;function _(){d[0]=f[0]*y+g[0]*v-(f[1]-g[1])*o,d[1]=f[1]*y+g[1]*v-(g[0]-f[0])*o,p[0]=f[0]*v+g[0]*y-(f[1]-g[1])*o,p[1]=f[1]*v+g[1]*y-(g[0]-f[0])*o}if(a||0!==o)for(var b=n;b<i;b++)if(a){var x=t.getLineCoordsCount(b);u+=s.getPolylineVertexCount(x),h+=s.getPolylineTriangleCount(x)}else t.getLineCoords(b,m),this._glViewHelper.dataToPoint(l,m[0],f),this._glViewHelper.dataToPoint(l,m[1],g),_(),u+=s.getCubicCurveVertexCount(f,d,p,g),h+=s.getCubicCurveTriangleCount(f,d,p,g);else{var w=i-n;u+=w*s.getLineVertexCount(),h+=w*s.getLineVertexCount()}s.setVertexCount(u),s.setTriangleCount(h);var S=n,T=[];for(b=n;b<i;b++){bo.parseColor(mc(r,S),T);var O=Ar.firstNotNull(vc(r,S),1);T[3]*=O;x=t.getLineCoords(b,m);for(var C=0;C<x;C++)this._glViewHelper.dataToPoint(l,m[C],m[C]);a?s.addPolyline(m,T,c,0,x):0!==o?(f=m[0],g=m[1],_(),s.addCubicCurve(f,d,p,g,T,c)):s.addPolyline(m,T,c,0,2),S++}},dispose:function(){this.groupGL.removeAll()},remove:function(){this.groupGL.removeAll()}});function zd(t){t.registerChartView(Fd),t.registerSeriesModel(Bd)}Object(i["w"])(zd)},e3db:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},e3f8:function(t,e,n){var i=n("656b");function r(t){return function(e){return i(e,t)}}t.exports=r},e43d:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcBubble=e.util.createClass(e.Polyline,{type:"ecBubble",fill:"transparent",stroke:"rgba(250, 213, 10, 1)",strokeWidth:2,points:[{x:0,y:0},{x:150,y:0},{x:150,y:100},{x:55,y:100},{x:40,y:125},{x:25,y:100},{x:0,y:100},{x:0,y:0}],initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.ctx=t,this.callSuper("_render",t)}}),e.EcBubble.fromObject=function(t,n){n&&n(new e.EcBubble(t.points,t))},e.EcBubble.async=!0}).call(this,n("c8ba"))},e44d:function(t,e,n){(function(t){n("99af"),n("cb29");var e=t.fabric||(t.fabric={});e.EcSwitchH=e.util.createClass(e.Object,{type:"ecSwitchH",stateProperties:e.Object.prototype.stateProperties.concat(["text","left","top"]),cacheProperties:e.Object.prototype.stateProperties.concat(["text","left","top"]),text:"垂直开关",switch:"0",threshold:0,initialize:function(t){t||(t={}),this.callSuper("initialize",t),this.setCoords()},toObject:function(t){return e.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.switch=+this.text,this.ctx=t,this.callSuper("_render",t),this.drawSwitch()},drawSwitch:function(){this.ctx.save();var t=this.width/2,e=this.height/2,n=this.width/5,i=this.height/5;this.ctx.lineWidth=2,this.switch>this.threshold?(this.ctx.beginPath(),this.ctx.moveTo(0,-e),this.ctx.lineTo(0,e),this.ctx.strokeStyle="#ff0000",this.ctx.stroke()):(this.ctx.beginPath(),this.ctx.moveTo(0,i),this.ctx.lineTo(-t,-n-10),this.ctx.strokeStyle="#07ef2e",this.ctx.stroke()),this.ctx.strokeStyle="#fa8814",this.ctx.fillStyle="#fa8814",this.ctx.beginPath(),this.ctx.moveTo(0,-i),this.ctx.lineTo(0,-e),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(0,i),this.ctx.lineTo(0,e),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.arc(0,-i,2.5,0*Math.PI/180,360*Math.PI/180),this.ctx.fill(),this.ctx.beginPath(),this.ctx.arc(0,i,2.5,0*Math.PI/180,360*Math.PI/180),this.ctx.fill(),this.ctx.closePath(),this.ctx.restore()}}),e.EcSwitchH.fromObject=function(t,n){n&&n(new e.EcSwitchH(t))},e.EcSwitchH.async=!0}).call(this,n("c8ba"))},e538:function(t,e,n){var i=n("b622");e.f=i},e60f:function(t,e,n){"use strict";(function(t){n("99af");var e=n("5a0c"),i=n.n(e),r=t.fabric||(t.fabric={});r.EcDate=r.util.createClass(r.Text,{type:"ecDate",text:"时间",stateProperties:r.Object.prototype.stateProperties.concat(["dateFormat","text"]),cacheProperties:r.Object.prototype.stateProperties.concat(["dateFormat","text"]),dateFormat:"YYYY-MM-DD HH:mm:ss",objectCaching:!1,initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e);var n=this,r=i()().format(this.dateFormat||"YYYY-MM-DD HH:mm:ss");n.set("text",r),setInterval((function(){var t=i()().format(n.dateFormat||"YYYY-MM-DD HH:mm:ss");n.set("text",t),n.canvas&&n.canvas.requestRenderAll()}),1e3)},toObject:function(t){return r.util.object.extend(this.callSuper("toObject",t))},_render:function(t){this.callSuper("_render",t)}}),r.EcDate.fromObject=function(t,e){e&&e(new r.EcDate(t.text,t))},r.EcDate.async=!0}).call(this,n("c8ba"))},e667:function(t,e){t.exports=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}}},e683:function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},e6cf:function(t,e,n){"use strict";var i,r,o,a,s=n("23e7"),l=n("c430"),c=n("da84"),u=n("d066"),h=n("fea9"),f=n("6eeb"),d=n("e2cc"),p=n("d44e"),g=n("2626"),m=n("861d"),v=n("1c0b"),y=n("19aa"),_=n("8925"),b=n("2266"),x=n("1c7e"),w=n("4840"),S=n("2cf49").set,T=n("b575"),O=n("cdf9"),C=n("44de"),M=n("f069"),A=n("e667"),D=n("69f3"),E=n("94ca"),I=n("b622"),P=n("605d"),L=n("2d00"),k=I("species"),j="Promise",R=D.get,N=D.set,B=D.getterFor(j),F=h,z=c.TypeError,V=c.document,H=c.process,G=u("fetch"),U=M.f,W=U,X=!!(V&&V.createEvent&&c.dispatchEvent),Y="function"==typeof PromiseRejectionEvent,q="unhandledrejection",Z="rejectionhandled",K=0,$=1,J=2,Q=1,tt=2,et=E(j,(function(){var t=_(F)!==String(F);if(!t){if(66===L)return!0;if(!P&&!Y)return!0}if(l&&!F.prototype["finally"])return!0;if(L>=51&&/native code/.test(F))return!1;var e=F.resolve(1),n=function(t){t((function(){}),(function(){}))},i=e.constructor={};return i[k]=n,!(e.then((function(){}))instanceof n)})),nt=et||!x((function(t){F.all(t)["catch"]((function(){}))})),it=function(t){var e;return!(!m(t)||"function"!=typeof(e=t.then))&&e},rt=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;T((function(){var i=t.value,r=t.state==$,o=0;while(n.length>o){var a,s,l,c=n[o++],u=r?c.ok:c.fail,h=c.resolve,f=c.reject,d=c.domain;try{u?(r||(t.rejection===tt&&lt(t),t.rejection=Q),!0===u?a=i:(d&&d.enter(),a=u(i),d&&(d.exit(),l=!0)),a===c.promise?f(z("Promise-chain cycle")):(s=it(a))?s.call(a,h,f):h(a)):f(i)}catch(p){d&&!l&&d.exit(),f(p)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&at(t)}))}},ot=function(t,e,n){var i,r;X?(i=V.createEvent("Event"),i.promise=e,i.reason=n,i.initEvent(t,!1,!0),c.dispatchEvent(i)):i={promise:e,reason:n},!Y&&(r=c["on"+t])?r(i):t===q&&C("Unhandled promise rejection",n)},at=function(t){S.call(c,(function(){var e,n=t.facade,i=t.value,r=st(t);if(r&&(e=A((function(){P?H.emit("unhandledRejection",i,n):ot(q,n,i)})),t.rejection=P||st(t)?tt:Q,e.error))throw e.value}))},st=function(t){return t.rejection!==Q&&!t.parent},lt=function(t){S.call(c,(function(){var e=t.facade;P?H.emit("rejectionHandled",e):ot(Z,e,t.value)}))},ct=function(t,e,n){return function(i){t(e,i,n)}},ut=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=J,rt(t,!0))},ht=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw z("Promise can't be resolved itself");var i=it(e);i?T((function(){var n={done:!1};try{i.call(e,ct(ht,n,t),ct(ut,n,t))}catch(r){ut(n,r,t)}})):(t.value=e,t.state=$,rt(t,!1))}catch(r){ut({done:!1},r,t)}}};et&&(F=function(t){y(this,F,j),v(t),i.call(this);var e=R(this);try{t(ct(ht,e),ct(ut,e))}catch(n){ut(e,n)}},i=function(t){N(this,{type:j,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:K,value:void 0})},i.prototype=d(F.prototype,{then:function(t,e){var n=B(this),i=U(w(this,F));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=P?H.domain:void 0,n.parent=!0,n.reactions.push(i),n.state!=K&&rt(n,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new i,e=R(t);this.promise=t,this.resolve=ct(ht,e),this.reject=ct(ut,e)},M.f=U=function(t){return t===F||t===o?new r(t):W(t)},l||"function"!=typeof h||(a=h.prototype.then,f(h.prototype,"then",(function(t,e){var n=this;return new F((function(t,e){a.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof G&&s({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return O(F,G.apply(c,arguments))}}))),s({global:!0,wrap:!0,forced:et},{Promise:F}),p(F,j,!1,!0),g(j),o=u(j),s({target:j,stat:!0,forced:et},{reject:function(t){var e=U(this);return e.reject.call(void 0,t),e.promise}}),s({target:j,stat:!0,forced:l||et},{resolve:function(t){return O(l&&this===o?F:this,t)}}),s({target:j,stat:!0,forced:nt},{all:function(t){var e=this,n=U(e),i=n.resolve,r=n.reject,o=A((function(){var n=v(e.resolve),o=[],a=0,s=1;b(t,(function(t){var l=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[l]=t,--s||i(o))}),r)})),--s||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=U(e),i=n.reject,r=A((function(){var r=v(e.resolve);b(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}})},e715:function(t){t.exports=JSON.parse('{"name":"econdraw","version":"0.5.7","description":"易通econdraw web组态","main":"lib/index.umd.min.js","homepage":"http://yitong.bpgems.cn/","scripts":{"test":"echo \\"Error: no test specified\\" && exit 1","pub":"npm publish"},"repository":{"type":"git","url":""},"keywords":["组态","scada","HMI","web组态","2D","canvas","topology","econdraw"],"unpkg":"dist/index.umd.min.js","style":"dist/index.css","author":"yxems","license":"ISC"}')},e86a:function(t,e,n){"use strict";n.d(e,"a",(function(){return c})),n.d(e,"g",(function(){return f})),n.d(e,"e",(function(){return p})),n.d(e,"b",(function(){return g})),n.d(e,"c",(function(){return m})),n.d(e,"f",(function(){return v})),n.d(e,"h",(function(){return y})),n.d(e,"d",(function(){return _}));var i,r,o=n("9850"),a=n("6d8b"),s=n("d51b"),l={},c="12px sans-serif";function u(t,e){return i||(i=Object(a["f"])().getContext("2d")),r!==e&&(r=i.font=e||c),i.measureText(t)}var h={measureText:u};function f(t,e){e=e||c;var n=l[e];n||(n=l[e]=new s["a"](500));var i=n.get(t);return null==i&&(i=h.measureText(t,e).width,n.put(t,i)),i}function d(t,e,n,i){var r=f(t,e),a=v(e),s=g(0,r,n),l=m(0,a,i),c=new o["a"](s,l,r,a);return c}function p(t,e,n,i){var r=((t||"")+"").split("\n"),a=r.length;if(1===a)return d(r[0],e,n,i);for(var s=new o["a"](0,0,0,0),l=0;l<r.length;l++){var c=d(r[l],e,n,i);0===l?s.copy(c):s.union(c)}return s}function g(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function m(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function v(t){return f("国",t)}function y(t,e){return"string"===typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function _(t,e,n){var i=e.position||"inside",r=null!=e.distance?e.distance:5,o=n.height,a=n.width,s=o/2,l=n.x,c=n.y,u="left",h="top";if(i instanceof Array)l+=y(i[0],n.width),c+=y(i[1],n.height),u=null,h=null;else switch(i){case"left":l-=r,c+=s,u="right",h="middle";break;case"right":l+=r+a,c+=s,h="middle";break;case"top":l+=a/2,c-=r,u="center",h="bottom";break;case"bottom":l+=a/2,c+=o+r,u="center";break;case"inside":l+=a/2,c+=s,u="center",h="middle";break;case"insideLeft":l+=r,c+=s,h="middle";break;case"insideRight":l+=a-r,c+=s,u="right",h="middle";break;case"insideTop":l+=a/2,c+=r,u="center";break;case"insideBottom":l+=a/2,c+=o-r,u="center",h="bottom";break;case"insideTopLeft":l+=r,c+=r;break;case"insideTopRight":l+=a-r,c+=r,u="right";break;case"insideBottomLeft":l+=r,c+=o-r,h="bottom";break;case"insideBottomRight":l+=a-r,c+=o-r,u="right",h="bottom";break}return t=t||{},t.x=l,t.y=c,t.align=u,t.verticalAlign=h,t}},e887:function(t,e,n){"use strict";var i=n("6d8b"),r=n("2dc5"),o=n("8918"),a=n("625e"),s=n("e0d3"),l=n("7d6c"),c=n("9fbc"),u=n("cccd"),h=s["o"](),f=Object(u["a"])(),d=function(){function t(){this.group=new r["a"],this.uid=o["c"]("viewChart"),this.renderTask=Object(c["a"])({plan:m,reset:v}),this.renderTask.context={view:this}}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.highlight=function(t,e,n,i){g(t.getData(),i,"emphasis")},t.prototype.downplay=function(t,e,n,i){g(t.getData(),i,"normal")},t.prototype.remove=function(t,e){this.group.removeAll()},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateLayout=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},t.markUpdateMethod=function(t,e){h(t).updateMethod=e},t.protoInitialize=function(){var e=t.prototype;e.type="chart"}(),t}();function p(t,e,n){t&&("emphasis"===e?l["r"]:l["C"])(t,n)}function g(t,e,n){var r=s["u"](t,e),o=e&&null!=e.highlightKey?Object(l["v"])(e.highlightKey):null;null!=r?Object(i["k"])(s["r"](r),(function(e){p(t.getItemGraphicEl(e),n,o)})):t.eachItemGraphicEl((function(t){p(t,n,o)}))}function m(t){return f(t.model)}function v(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=r&&h(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](e,n,i,r),y[l]}a["b"](d,["dispose"]),a["c"](d);var y={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}};e["a"]=d},e893:function(t,e,n){var i=n("5135"),r=n("56ef"),o=n("06cf"),a=n("9bf2");t.exports=function(t,e){for(var n=r(e),s=a.f,l=o.f,c=0;c<n.length;c++){var u=n[c];i(t,u)||s(t,u,l(e,u))}}},e8b5:function(t,e,n){var i=n("c6b6");t.exports=Array.isArray||function(t){return"Array"==i(t)}},e95a:function(t,e,n){var i=n("b622"),r=n("3f8c"),o=i("iterator"),a=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||a[o]===t)}},e997:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcRect=e.util.createClass(e.Rect,{type:"ecRect",topLeft:[100,100],topRight:[0,0],bottomLeft:[0,0],bottomRight:[100,100],initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),this.ctx=t,0!==this.width&&0!==this.height&&this.visible},drawCustom:function(){this.ctx.restore();var t=this.width,e=this.height,n=-this.width/2,i=-this.height/2,r=.4477152502;this.ctx.beginPath(),this.ctx.moveTo(n+this.topLeft[0],i),this.ctx.lineTo(n+t-this.topRight[0],i),this.ctx.bezierCurveTo(n+t-r*this.topRight[0],i,n+t,i+r*this.topRight[1],n+t,i+this.topRight[1]),this.ctx.lineTo(n+t,i+e-this.bottomRight[1]),this.ctx.bezierCurveTo(n+t,i+e-r*this.bottomRight[1],n+t-r*this.bottomRight[0],i+e,n+t-this.bottomRight[0],i+e),this.ctx.lineTo(n+this.bottomLeft[0],i+e),this.ctx.bezierCurveTo(n+r*this.bottomLeft[0],i+e,n,i+e-r*this.bottomLeft[1],n,i+e-this.bottomLeft[1]),this.ctx.lineTo(n,i+this.topLeft[1]),this.ctx.bezierCurveTo(n,i+r*this.topLeft[1],n+r*this.topLeft[0],i,n+this.topLeft[0],i),this.ctx.closePath(),this._renderPaintInOrder(this.ctx)}}),e.EcRect.fromObject=function(t,n){n&&n(new e.EcRect(t))},e.EcRect.async=!0}).call(this,n("c8ba"))},eac5:function(t,e){var n=Object.prototype;function i(t){var e=t&&t.constructor,i="function"==typeof e&&e.prototype||n;return t===i}t.exports=i},ec69:function(t,e,n){var i=n("6fcd"),r=n("03dd"),o=n("30c9");function a(t){return o(t)?i(t):r(t)}t.exports=a},ec6f:function(t,e,n){"use strict";n.d(e,"e",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return u})),n.d(e,"a",(function(){return h})),n.d(e,"d",(function(){return f})),n.d(e,"f",(function(){return v}));var i=n("6d8b"),r=n("07fd"),o=n("e0d3"),a=n("0f99"),s=function(){function t(t){this.data=t.data||(t.sourceFormat===r["d"]?{}:[]),this.sourceFormat=t.sourceFormat||r["h"],this.seriesLayoutBy=t.seriesLayoutBy||r["a"],this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var n=0;n<e.length;n++){var i=e[n];null==i.type&&Object(a["b"])(this,n)===a["a"].Must&&(i.type="ordinal")}}return t}();function l(t){return t instanceof s}function c(t,e,n){n=n||f(t);var r=e.seriesLayoutBy,o=d(t,n,r,e.sourceHeader,e.dimensions),a=new s({data:t,sourceFormat:n,seriesLayoutBy:r,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:Object(i["d"])(e)});return a}function u(t){return new s({data:t,sourceFormat:Object(i["E"])(t)?r["g"]:r["f"]})}function h(t){return new s({data:t.data,sourceFormat:t.sourceFormat,seriesLayoutBy:t.seriesLayoutBy,dimensionsDefine:Object(i["d"])(t.dimensionsDefine),startIndex:t.startIndex,dimensionsDetectedCount:t.dimensionsDetectedCount})}function f(t){var e=r["h"];if(Object(i["E"])(t))e=r["g"];else if(Object(i["t"])(t)){0===t.length&&(e=r["c"]);for(var n=0,o=t.length;n<o;n++){var a=t[n];if(null!=a){if(Object(i["t"])(a)){e=r["c"];break}if(Object(i["A"])(a)){e=r["e"];break}}}}else if(Object(i["A"])(t))for(var s in t)if(Object(i["q"])(t,s)&&Object(i["u"])(t[s])){e=r["d"];break}return e}function d(t,e,n,a,s){var l,c;if(!t)return{dimensionsDefine:g(s),startIndex:c,dimensionsDetectedCount:l};if(e===r["c"]){var u=t;"auto"===a||null==a?m((function(t){null!=t&&"-"!==t&&(Object(i["C"])(t)?null==c&&(c=1):c=0)}),n,u,10):c=Object(i["z"])(a)?a:a?1:0,s||1!==c||(s=[],m((function(t,e){s[e]=null!=t?t+"":""}),n,u,1/0)),l=s?s.length:n===r["b"]?u.length:u[0]?u[0].length:null}else if(e===r["e"])s||(s=p(t));else if(e===r["d"])s||(s=[],Object(i["k"])(t,(function(t,e){s.push(e)})));else if(e===r["f"]){var h=Object(o["h"])(t[0]);l=Object(i["t"])(h)&&h.length||1}else r["g"];return{startIndex:c,dimensionsDefine:g(s),dimensionsDetectedCount:l}}function p(t){var e,n=0;while(n<t.length&&!(e=t[n++]));if(e){var r=[];return Object(i["k"])(e,(function(t,e){r.push(e)})),r}}function g(t){if(t){var e=Object(i["g"])();return Object(i["H"])(t,(function(t,n){t=Object(i["A"])(t)?t:{name:t};var r={name:t.name,displayName:t.displayName,type:t.type};if(null==r.name)return r;r.name+="",null==r.displayName&&(r.displayName=r.name);var o=e.get(r.name);return o?r.name+="-"+o.count++:e.set(r.name,{count:1}),r}))}}function m(t,e,n,i){if(e===r["b"])for(var o=0;o<n.length&&o<i;o++)t(n[o]?n[o][0]:null,o);else{var a=n[0]||[];for(o=0;o<a.length&&o<i;o++)t(a[o],o)}}function v(t){var e=t.sourceFormat;return e===r["e"]||e===r["d"]}},eda2:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"k",(function(){return s})),n.d(e,"j",(function(){return l})),n.d(e,"d",(function(){return h})),n.d(e,"i",(function(){return f})),n.d(e,"f",(function(){return g})),n.d(e,"g",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"e",(function(){return y})),n.d(e,"b",(function(){return _})),n.d(e,"c",(function(){return b})),n.d(e,"l",(function(){return x}));var i=n("6d8b"),r=n("3842"),o=n("f876");function a(t){if(!Object(r["j"])(t))return i["C"](t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function s(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var l=i["M"],c=/([&<>"'])/g,u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function h(t){return null==t?"":(t+"").replace(c,(function(t,e){return u[e]}))}function f(t,e,n){var s="{yyyy}-{MM}-{dd} {hh}:{mm}:{ss}";function l(t){return t&&i["T"](t)?t:"-"}function c(t){return!(null==t||isNaN(t)||!isFinite(t))}var u="time"===e,h=t instanceof Date;if(u||h){var f=u?Object(r["o"])(t):t;if(!isNaN(+f))return Object(o["h"])(f,s,n);if(h)return"-"}if("ordinal"===e)return i["D"](t)?l(t):i["z"](t)&&c(t)?t+"":"-";var d=Object(r["n"])(t);return c(d)?a(d):i["D"](t)?l(t):"boolean"===typeof t?t+"":"-"}var d=["a","b","c","d","e","f","g"],p=function(t,e){return"{"+t+(null==e?"":e)+"}"};function g(t,e,n){i["t"](e)||(e=[e]);var r=e.length;if(!r)return"";for(var o=e[0].$vars||[],a=0;a<o.length;a++){var s=d[a];t=t.replace(p(s),p(s,0))}for(var l=0;l<r;l++)for(var c=0;c<o.length;c++){var u=e[l][o[c]];t=t.replace(p(d[c],l),n?h(u):u)}return t}function m(t,e,n){return i["k"](e,(function(e,i){t=t.replace("{"+i+"}",n?h(e):e)})),t}function v(t,e){var n=i["C"](t)?{color:t,extraCssText:e}:t||{},r=n.color,o=n.type;e=n.extraCssText;var a=n.renderMode||"html";if(!r)return"";if("html"===a)return"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+h(r)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+h(r)+";"+(e||"")+'"></span>';var s=n.markerId||"markerX";return{renderMode:a,content:"{"+s+"|}  ",style:"subItem"===o?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}}function y(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=Object(r["o"])(e),a=n?"UTC":"",s=i["get"+a+"FullYear"](),l=i["get"+a+"Month"]()+1,c=i["get"+a+"Date"](),u=i["get"+a+"Hours"](),h=i["get"+a+"Minutes"](),f=i["get"+a+"Seconds"](),d=i["get"+a+"Milliseconds"]();return t=t.replace("MM",Object(o["y"])(l,2)).replace("M",l).replace("yyyy",s).replace("yy",s%100+"").replace("dd",Object(o["y"])(c,2)).replace("d",c).replace("hh",Object(o["y"])(u,2)).replace("h",u).replace("mm",Object(o["y"])(h,2)).replace("m",h).replace("ss",Object(o["y"])(f,2)).replace("s",f).replace("SSS",Object(o["y"])(d,3)),t}function _(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t}function b(t,e){return e=e||"transparent",i["C"](t)?t:i["A"](t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function x(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}},edae:function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return l}));var i="[ECharts] ",r="undefined"!==typeof console&&console.warn&&console.log;function o(t){r&&console.warn(i+t)}function a(t){r&&console.error(i+t)}function s(t){0}function l(t){throw new Error(t)}},edfa:function(t,e){function n(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}t.exports=n},ee1a:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return l}));var i=n("6d8b"),r=n("80b9");function o(t,e,n){n=n||{};var r,o,s,l=n.byIndex,c=n.stackedCoordDimension;a(e)?r=e:(o=e.schema,r=o.dimensions,s=e.store);var u,h,f,d,p=!(!t||!t.get("stack"));if(Object(i["k"])(r,(function(t,e){Object(i["C"])(t)&&(r[e]=t={name:t}),p&&!t.isExtraCoord&&(l||u||!t.ordinalMeta||(u=t),h||"ordinal"===t.type||"time"===t.type||c&&c!==t.coordDim||(h=t))})),!h||l||u||(l=!0),h){f="__\0ecstackresult_"+t.id,d="__\0ecstackedover_"+t.id,u&&(u.createInvertedIndices=!0);var g=h.coordDim,m=h.type,v=0;Object(i["k"])(r,(function(t){t.coordDim===g&&v++}));var y={name:f,coordDim:g,coordDimIndex:v,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},_={name:d,coordDim:d,coordDimIndex:v+1,type:m,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};o?(s&&(y.storeDimIndex=s.ensureCalculationDimension(d,m),_.storeDimIndex=s.ensureCalculationDimension(f,m)),o.appendCalculationDimension(y),o.appendCalculationDimension(_)):(r.push(y),r.push(_))}return{stackedDimension:h&&h.name,stackedByDimension:u&&u.name,isStackedByIndex:l,stackedOverDimension:d,stackResultDimension:f}}function a(t){return!Object(r["d"])(t.schema)}function s(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function l(t,e){return s(t,e)?t.getCalculationInfo("stackResultDimension"):e}},ee29:function(t,e,n){"use strict";n.d(e,"a",(function(){return T}));var i=n("e0d3"),r=n("9850"),o=n("deab"),a=n("861c"),s=n("3842"),l=n("8582"),c=n("89b6"),u=n("6d8b"),h=n("2355"),f=n("7837");function d(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function p(t,e){var n=t.label,i=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:d(i&&i.shape.points)}}var g=["align","verticalAlign","width","height","fontSize"],m=new l["a"],v=Object(i["o"])(),y=Object(i["o"])();function _(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null!=e[r]&&(t[r]=e[r])}}var b=["x","y","rotation"],x=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,n,i,o){var a=i.style,s=i.__hostTarget,l=s.textConfig||{},c=i.getComputedTransform(),u=i.getBoundingRect().plain();r["a"].applyTransform(u,u,c),c?m.setLocalTransform(c):(m.x=m.y=m.rotation=m.originX=m.originY=0,m.scaleX=m.scaleY=1);var h,f=i.__hostTarget;if(f){h=f.getBoundingRect().plain();var d=f.getComputedTransform();r["a"].applyTransform(h,h,d)}var p=h&&f.getTextGuideLine();this._labelList.push({label:i,labelLine:p,seriesModel:n,dataIndex:t,dataType:e,layoutOption:o,computedLayoutOption:null,rect:u,hostRect:h,priority:h?h.width*h.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:p&&p.ignore,x:m.x,y:m.y,scaleX:m.scaleX,scaleY:m.scaleY,rotation:m.rotation,style:{x:a.x,y:a.y,align:a.align,verticalAlign:a.verticalAlign,width:a.width,height:a.height,fontSize:a.fontSize},cursor:i.cursor,attachedPos:l.position,attachedRot:l.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,i=n.get("labelLayout");(Object(u["w"])(i)||Object(u["F"])(i).length)&&t.group.traverse((function(t){if(t.ignore)return!0;var r=t.getTextContent(),o=Object(a["a"])(t);r&&!r.disableLabelLayout&&e._addLabel(o.dataIndex,o.dataType,n,r,i)}))},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function i(t,e){return function(){Object(c["e"])(t,e)}}for(var r=0;r<this._labelList.length;r++){var o=this._labelList[r],a=o.label,l=a.__hostTarget,u=o.defaultAttr,h=void 0;h="function"===typeof o.layoutOption?o.layoutOption(p(o,l)):o.layoutOption,h=h||{},o.computedLayoutOption=h;var f=Math.PI/180;l&&l.setTextConfig({local:!1,position:null!=h.x||null!=h.y?null:u.attachedPos,rotation:null!=h.rotate?h.rotate*f:u.attachedRot,offset:[h.dx||0,h.dy||0]});var d=!1;if(null!=h.x?(a.x=Object(s["p"])(h.x,e),a.setStyle("x",0),d=!0):(a.x=u.x,a.setStyle("x",u.style.x)),null!=h.y?(a.y=Object(s["p"])(h.y,n),a.setStyle("y",0),d=!0):(a.y=u.y,a.setStyle("y",u.style.y)),h.labelLinePoints){var m=l.getTextGuideLine();m&&(m.setShape({points:h.labelLinePoints}),d=!1)}var y=v(a);y.needsUpdateLabelLine=d,a.rotation=null!=h.rotate?h.rotate*f:u.rotation,a.scaleX=u.scaleX,a.scaleY=u.scaleY;for(var _=0;_<g.length;_++){var b=g[_];a.setStyle(b,null!=h[b]?h[b]:u.style[b])}if(h.draggable){if(a.draggable=!0,a.cursor="move",l){var x=o.seriesModel;if(null!=o.dataIndex){var w=o.seriesModel.getData(o.dataType);x=w.getItemModel(o.dataIndex)}a.on("drag",i(l,x.getModel("labelLine")))}}else a.off("drag"),a.cursor=u.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),i=Object(h["b"])(this._labelList),r=Object(u["n"])(i,(function(t){return"shiftX"===t.layoutOption.moveOverlap})),o=Object(u["n"])(i,(function(t){return"shiftY"===t.layoutOption.moveOverlap}));Object(h["c"])(r,0,e),Object(h["d"])(o,0,n);var a=Object(u["n"])(i,(function(t){return t.layoutOption.hideOverlap}));Object(h["a"])(a)},t.prototype.processLabelsOverall=function(){var t=this;Object(u["k"])(this._chartViewList,(function(e){var n=e.__model,i=e.ignoreLabelLineUpdate,r=n.isAnimationEnabled();e.group.traverse((function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var o=!i,a=e.getTextContent();!o&&a&&(o=v(a).needsUpdateLabelLine),o&&t._updateLabelLine(e,n),r&&t._animateLabels(e,n)}))}))},t.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),i=Object(a["a"])(t),r=i.dataIndex;if(n&&null!=r){var o=e.getData(i.dataType),s=o.getItemModel(r),l={},u=o.getItemVisual(r,"style"),h=o.getVisual("drawType");l.stroke=u[h];var f=s.getModel("labelLine");Object(c["d"])(t,Object(c["a"])(s),l),Object(c["e"])(t,f)}},t.prototype._animateLabels=function(t,e){var n=t.getTextContent(),i=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!Object(o["d"])(t))){var r=v(n),s=r.oldLayout,l=Object(a["a"])(t),c=l.dataIndex,h={x:n.x,y:n.y,rotation:n.rotation},d=e.getData(l.dataType);if(s){n.attr(s);var p=t.prevStates;p&&(Object(u["r"])(p,"select")>=0&&n.attr(r.oldLayoutSelect),Object(u["r"])(p,"emphasis")>=0&&n.attr(r.oldLayoutEmphasis)),Object(o["h"])(n,h,e,c)}else if(n.attr(h),!Object(f["f"])(n).valueAnimation){var g=Object(u["P"])(n.style.opacity,1);n.style.opacity=0,Object(o["c"])(n,{style:{opacity:g}},e,c)}if(r.oldLayout=h,n.states.select){var m=r.oldLayoutSelect={};_(m,h,b),_(m,n.states.select,b)}if(n.states.emphasis){var x=r.oldLayoutEmphasis={};_(x,h,b),_(x,n.states.emphasis,b)}Object(f["a"])(n,c,d,e,e)}if(i&&!i.ignore&&!i.invisible){r=y(i),s=r.oldLayout;var w={points:i.shape.points};s?(i.attr({shape:s}),Object(o["h"])(i,{shape:w},e)):(i.setShape(w),i.style.strokePercent=0,Object(o["c"])(i,{style:{strokePercent:1}},e)),r.oldLayout=w}},t}(),w=x,S=Object(i["o"])();function T(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){var i=S(e).labelManager;i||(i=S(e).labelManager=new w),i.clearLabels()})),t.registerUpdateLifecycle("series:layoutlabels",(function(t,e,n){var i=S(e).labelManager;n.updatedSeries.forEach((function(t){i.addLabelsOfSeries(e.getViewOfSeriesModel(t))})),i.updateLayoutConfig(e),i.layout(e),i.processLabelsOverall()}))}},ef59:function(t,e,n){"use strict";n.d(e,"a",(function(){return d})),n.d(e,"b",(function(){return g})),n.d(e,"d",(function(){return m})),n.d(e,"c",(function(){return v}));var i=n("4319"),r=n("22d1"),o={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},a={time:{month:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthAbbr:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],dayOfWeek:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],dayOfWeekAbbr:["日","一","二","三","四","五","六"]},legend:{selector:{all:"全选",inverse:"反选"}},toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},s=n("6d8b"),l="ZH",c="EN",u=c,h={},f={},d=r["a"].domSupported?function(){var t=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return t.indexOf(l)>-1?l:u}():u;function p(t,e){t=t.toUpperCase(),f[t]=new i["a"](e),h[t]=e}function g(t){if(Object(s["C"])(t)){var e=h[t.toUpperCase()]||{};return t===l||t===c?Object(s["d"])(e):Object(s["I"])(Object(s["d"])(e),Object(s["d"])(h[u]),!1)}return Object(s["I"])(Object(s["d"])(t),Object(s["d"])(h[u]),!1)}function m(t){return f[t]}function v(){return f[u]}p(c,o),p(l,a)},ef5d:function(t,e){function n(t){return function(e){return null==e?void 0:e[t]}}t.exports=n},efb6:function(t,e,n){var i=n("5e2e");function r(){this.__data__=new i,this.size=0}t.exports=r},f069:function(t,e,n){"use strict";var i=n("1c0b"),r=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=i(e),this.reject=i(n)};t.exports.f=function(t){return new r(t)}},f183:function(t,e,n){var i=n("d012"),r=n("861d"),o=n("5135"),a=n("9bf2").f,s=n("90e3"),l=n("bb2f"),c=s("meta"),u=0,h=Object.isExtensible||function(){return!0},f=function(t){a(t,c,{value:{objectID:"O"+ ++u,weakData:{}}})},d=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,c)){if(!h(t))return"F";if(!e)return"E";f(t)}return t[c].objectID},p=function(t,e){if(!o(t,c)){if(!h(t))return!0;if(!e)return!1;f(t)}return t[c].weakData},g=function(t){return l&&m.REQUIRED&&h(t)&&!o(t,c)&&f(t),t},m=t.exports={REQUIRED:!1,fastKey:d,getWeakData:p,onFreeze:g};i[c]=!0},f279:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return f}));var i=n("7fae"),r=n("9850"),o=n("e263"),a=n("401b"),s=n("0655"),l=n("1687"),c=[],u=function(){function t(t){this.name=t}return t.prototype.getCenter=function(){},t}(),h=function(t){function e(e,n,i){var r=t.call(this,e)||this;if(r.type="geoJSON",r.geometries=n,i)i=[i[0],i[1]];else{var o=r.getBoundingRect();i=[o.x+o.width/2,o.y+o.height/2]}return r._center=i,r}return Object(i["b"])(e,t),e.prototype.getBoundingRect=function(){var t=this._rect;if(t)return t;for(var e=Number.MAX_VALUE,n=[e,e],i=[-e,-e],s=[],l=[],c=this.geometries,u=0;u<c.length;u++)if("polygon"===c[u].type){var h=c[u].exterior;o["d"](h,s,l),a["l"](n,n,s),a["k"](i,i,l)}return 0===u&&(n[0]=n[1]=i[0]=i[1]=0),this._rect=new r["a"](n[0],n[1],i[0]-n[0],i[1]-n[1])},e.prototype.contain=function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++)if("polygon"===n[i].type){var o=n[i].exterior,a=n[i].interiors;if(s["a"](o,t[0],t[1])){for(var l=0;l<(a?a.length:0);l++)if(s["a"](a[l],t[0],t[1]))continue t;return!0}}return!1},e.prototype.transformTo=function(t,e,n,i){var o=this.getBoundingRect(),s=o.width/o.height;n?i||(i=n/s):n=s*i;for(var l=new r["a"](t,e,n,i),c=o.calculateTransform(l),u=this.geometries,h=0;h<u.length;h++)if("polygon"===u[h].type){for(var f=u[h].exterior,d=u[h].interiors,p=0;p<f.length;p++)a["b"](f[p],f[p],c);for(var g=0;g<(d?d.length:0);g++)for(p=0;p<d[g].length;p++)a["b"](d[g][p],d[g][p],c)}o=this._rect,o.copy(l),this._center=[o.x+o.width/2,o.y+o.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e.prototype.getCenter=function(){return this._center},e.prototype.setCenter=function(t){this._center=t},e}(u),f=function(t){function e(e,n){var i=t.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return Object(i["b"])(e,t),e.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this._calculateCenter()),t},e.prototype._calculateCenter=function(){var t=this._elOnlyForCalculate,e=t.getBoundingRect(),n=[e.x+e.width/2,e.y+e.height/2],i=l["d"](c),r=t;while(r&&!r.isGeoSVGGraphicRoot)l["f"](i,r.getLocalTransform(),i),r=r.parent;return l["e"](i,i),a["b"](n,n,i),n},e}(u)},f3bb:function(t,e,n){"use strict";n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var i=n("6d8b"),r=n("e0d3");function o(t,e){function n(e,n){var i=[];return e.eachComponent({mainType:"series",subType:t,query:n},(function(t){i.push(t.seriesIndex)})),i}Object(i["k"])([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],(function(t){e(t[0],(function(e,r,o){e=Object(i["m"])({},e),o.dispatchAction(Object(i["m"])(e,{type:t[1],seriesIndex:n(r,e)}))}))}))}function a(t,e,n,o,a){var s=t+e;n.isSilent(s)||o.eachComponent({mainType:"series",subType:"pie"},(function(t){for(var e=t.seriesIndex,o=a.selected,l=0;l<o.length;l++)if(o[l].seriesIndex===e){var c=t.getData(),u=Object(r["u"])(c,a.fromActionPayload);n.trigger(s,{type:s,seriesId:t.id,name:Object(i["t"])(u)?c.getName(u[0]):c.getName(u),selected:Object(i["m"])({},t.option.selectedMap)})}}))}function s(t,e,n){t.on("selectchanged",(function(t){var i=n.getModel();t.isFromClick?(a("map","selectchanged",e,i,t),a("pie","selectchanged",e,i,t)):"select"===t.fromAction?(a("map","selected",e,i,t),a("pie","selected",e,i,t)):"unselect"===t.fromAction&&(a("map","unselected",e,i,t),a("pie","unselected",e,i,t))}))}},f4d6:function(t,e,n){var i=n("ffd6"),r=1/0;function o(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-r?"-0":e}t.exports=o},f4db:function(t,e,n){(function(t){var e=t.fabric||(t.fabric={});e.EcPolyline=e.util.createClass(e.Polyline,{type:"ecPolyline",initialize:function(t,e){e||(e={}),this.callSuper("initialize",t,e)},toObject:function(t){return this.callSuper("toObject",t)},_render:function(t){this.callSuper("_render",t),0!==this.width&&0!==this.height&&this.visible}}),e.EcPolyline.fromObject=function(t,n){n&&n(new e.EcPolyline(t.points,t))},e.EcPolyline.async=!0}).call(this,n("c8ba"))},f5df:function(t,e,n){var i=n("00ee"),r=n("c6b6"),o=n("b622"),a=o("toStringTag"),s="Arguments"==r(function(){return arguments}()),l=function(t,e){try{return t[e]}catch(n){}};t.exports=i?r:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=l(e=Object(t),a))?n:s?r(e):"Object"==(i=r(e))&&"function"==typeof e.callee?"Arguments":i}},f608:function(t,e,n){var i=n("6747"),r=n("ffd6"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!r(t))||(a.test(t)||!o.test(t)||null!=e&&t in Object(e))}t.exports=s},f6b4:function(t,e,n){"use strict";var i=n("c532");function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=r},f6d8:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("6d8b"),r=n("217c"),o=n("2b17"),a=n("e0d3");function s(t){var e,n,s,c,u=t.series,h=t.dataIndex,f=t.multipleSeries,d=u.getData(),p=d.mapDimensionsAll("defaultedTooltip"),g=p.length,m=u.getRawValue(h),v=Object(i["t"])(m),y=Object(r["e"])(u,h);if(g>1||v&&!g){var _=l(m,u,h,p,y);e=_.inlineValues,n=_.inlineValueTypes,s=_.blocks,c=_.inlineValues[0]}else if(g){var b=d.getDimensionInfo(p[0]);c=e=Object(o["e"])(d,h,p[0]),n=b.type}else c=e=v?m[0]:m;var x=Object(a["n"])(u),w=x&&u.name||"",S=d.getName(h),T=f?w:S;return Object(r["c"])("section",{header:w,noHeader:f||!x,sortParam:c,blocks:[Object(r["c"])("nameValue",{markerType:"item",markerColor:y,name:T,noName:!Object(i["T"])(T),value:e,valueType:n})].concat(s||[])})}function l(t,e,n,a,s){var l=e.getData(),c=Object(i["N"])(t,(function(t,e,n){var i=l.getDimensionInfo(n);return t||i&&!1!==i.tooltip&&null!=i.displayName}),!1),u=[],h=[],f=[];function d(t,e){var n=l.getDimensionInfo(e);n&&!1!==n.otherDims.tooltip&&(c?f.push(Object(r["c"])("nameValue",{markerType:"subItem",markerColor:s,name:n.displayName,value:t,valueType:n.type})):(u.push(t),h.push(n.type)))}return a.length?Object(i["k"])(a,(function(t){d(Object(o["e"])(l,n,t),t)})):Object(i["k"])(t,d),{inlineValues:u,inlineValueTypes:h,blocks:f}}},f72b:function(t,e,n){"use strict";n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return h}));var i=n("6d8b"),r=n("ec6f"),o=n("07fd"),a=n("0f99"),s=n("04f7"),l=n("d0ce"),c=n("2b17"),u=function(){function t(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,n=this._sourceHost,a=this._getUpstreamSourceManagers(),s=!!a.length;if(f(n)){var l=n,c=void 0,u=void 0,h=void 0;if(s){var d=a[0];d.prepareSource(),h=d.getSource(),c=h.data,u=h.sourceFormat,e=[d._getVersionSign()]}else c=l.get("data",!0),u=Object(i["E"])(c)?o["g"]:o["f"],e=[];var p=this._getSourceMetaRawOption()||{},g=h&&h.metaRawOption||{},m=Object(i["P"])(p.seriesLayoutBy,g.seriesLayoutBy)||null,v=Object(i["P"])(p.sourceHeader,g.sourceHeader)||null,y=Object(i["P"])(p.dimensions,g.dimensions),_=m!==g.seriesLayoutBy||!!v!==!!g.sourceHeader||y;t=_?[Object(r["b"])(c,{seriesLayoutBy:m,sourceHeader:v,dimensions:y},u)]:[]}else{var b=n;if(s){var x=this._applyTransform(a);t=x.sourceList,e=x.upstreamSignList}else{var w=b.get("source",!0);t=[Object(r["b"])(w,this._getSourceMetaRawOption(),null)],e=[]}}this._setLocalSource(t,e)},t.prototype._applyTransform=function(t){var e,n=this._sourceHost,o=n.get("transform",!0),a=n.get("fromTransformResult",!0);if(null!=a){var l="";1!==t.length&&d(l)}var c=[],u=[];return Object(i["k"])(t,(function(t){t.prepareSource();var e=t.getSource(a||0),n="";null==a||e||d(n),c.push(e),u.push(t._getVersionSign())})),o?e=Object(s["a"])(o,c,{datasetIndex:n.componentIndex}):null!=a&&(e=[Object(r["a"])(c[0])]),{sourceList:e,upstreamSignList:u}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var n=t[e];if(n._isDirty()||this._upstreamSignList[e]!==n._getVersionSign())return!0}},t.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return e},t.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},t.prototype._innerGetDataStore=function(t,e,n){var i=0,r=this._storeList,o=r[i];o||(o=r[i]={});var a=o[n];if(!a){var s=this._getUpstreamSourceManagers()[0];f(this._sourceHost)&&s?a=s._innerGetDataStore(t,e,n):(a=new l["b"],a.initData(new c["a"](e,t.length),t)),o[n]=a}return a},t.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(f(t)){var e=Object(a["f"])(t);return e?[e.getSourceManager()]:[]}return Object(i["H"])(Object(a["e"])(t),(function(t){return t.getSourceManager()}))},t.prototype._getSourceMetaRawOption=function(){var t,e,n,i=this._sourceHost;if(f(i))t=i.get("seriesLayoutBy",!0),e=i.get("sourceHeader",!0),n=i.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var r=i;t=r.get("seriesLayoutBy",!0),e=r.get("sourceHeader",!0),n=r.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:n}},t}();function h(t){var e=t.option.transform;e&&Object(i["R"])(t.option.transform)}function f(t){return"series"===t.mainType}function d(t){throw new Error(t)}},f772:function(t,e,n){var i=n("5692"),r=n("90e3"),o=i("keys");t.exports=function(t){return o[t]||(o[t]=r(t))}},f876:function(t,e,n){"use strict";n.d(e,"d",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return u})),n.d(e,"e",(function(){return h})),n.d(e,"i",(function(){return p})),n.d(e,"B",(function(){return m})),n.d(e,"y",(function(){return v})),n.d(e,"m",(function(){return y})),n.d(e,"q",(function(){return _})),n.d(e,"l",(function(){return b})),n.d(e,"h",(function(){return x})),n.d(e,"r",(function(){return w})),n.d(e,"n",(function(){return T})),n.d(e,"j",(function(){return O})),n.d(e,"w",(function(){return C})),n.d(e,"f",(function(){return M})),n.d(e,"o",(function(){return A})),n.d(e,"u",(function(){return D})),n.d(e,"z",(function(){return E})),n.d(e,"s",(function(){return I})),n.d(e,"k",(function(){return P})),n.d(e,"x",(function(){return L})),n.d(e,"g",(function(){return k})),n.d(e,"p",(function(){return j})),n.d(e,"v",(function(){return R})),n.d(e,"A",(function(){return N})),n.d(e,"t",(function(){return B}));var i=n("6d8b"),r=n("3842"),o=n("ef59"),a=n("4319"),s=1e3,l=60*s,c=60*l,u=24*c,h=365*u,f={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},d="{yyyy}-{MM}-{dd}",p={year:"{yyyy}",month:"{yyyy}-{MM}",day:d,hour:d+" "+f.hour,minute:d+" "+f.minute,second:d+" "+f.second,millisecond:f.none},g=["year","month","day","hour","minute","second","millisecond"],m=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function v(t,e){return t+="","0000".substr(0,e-t.length)+t}function y(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function _(t){return t===y(t)}function b(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function x(t,e,n,i){var s=r["o"](t),l=s[O(n)](),c=s[C(n)]()+1,u=Math.floor((c-1)/4)+1,h=s[M(n)](),f=s["get"+(n?"UTC":"")+"Day"](),d=s[A(n)](),p=(d-1)%12+1,g=s[D(n)](),m=s[E(n)](),y=s[I(n)](),_=i instanceof a["a"]?i:Object(o["d"])(i||o["a"])||Object(o["c"])(),b=_.getModel("time"),x=b.get("month"),w=b.get("monthAbbr"),S=b.get("dayOfWeek"),T=b.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,l+"").replace(/{yy}/g,l%100+"").replace(/{Q}/g,u+"").replace(/{MMMM}/g,x[c-1]).replace(/{MMM}/g,w[c-1]).replace(/{MM}/g,v(c,2)).replace(/{M}/g,c+"").replace(/{dd}/g,v(h,2)).replace(/{d}/g,h+"").replace(/{eeee}/g,S[f]).replace(/{ee}/g,T[f]).replace(/{e}/g,f+"").replace(/{HH}/g,v(d,2)).replace(/{H}/g,d+"").replace(/{hh}/g,v(p+"",2)).replace(/{h}/g,p+"").replace(/{mm}/g,v(g,2)).replace(/{m}/g,g+"").replace(/{ss}/g,v(m,2)).replace(/{s}/g,m+"").replace(/{SSS}/g,v(y,3)).replace(/{S}/g,y+"")}function w(t,e,n,r,o){var a=null;if("string"===typeof n)a=n;else if("function"===typeof n)a=n(t.value,e,{level:t.level});else{var s=i["m"]({},f);if(t.level>0)for(var l=0;l<g.length;++l)s[g[l]]="{primary|"+s[g[l]]+"}";var c=n?!1===n.inherit?n:i["j"](n,s):s,u=S(t.value,o);if(c[u])a=c[u];else if(c.inherit){var h=m.indexOf(u);for(l=h-1;l>=0;--l)if(c[u]){a=c[u];break}a=a||s.none}if(i["t"](a)){var d=null==t.level?0:t.level>=0?t.level:a.length+t.level;d=Math.min(d,a.length-1),a=a[d]}}return x(new Date(t.value),a,o,r)}function S(t,e){var n=r["o"](t),i=n[C(e)]()+1,o=n[M(e)](),a=n[A(e)](),s=n[D(e)](),l=n[E(e)](),c=n[I(e)](),u=0===c,h=u&&0===l,f=h&&0===s,d=f&&0===a,p=d&&1===o,g=p&&1===i;return g?"year":p?"month":d?"day":f?"hour":h?"minute":u?"second":"millisecond"}function T(t,e,n){var i="number"===typeof t?r["o"](t):t;switch(e=e||S(t,n),e){case"year":return i[O(n)]();case"half-year":return i[C(n)]()>=6?1:0;case"quarter":return Math.floor((i[C(n)]()+1)/4);case"month":return i[C(n)]();case"day":return i[M(n)]();case"half-day":return i[A(n)]()/24;case"hour":return i[A(n)]();case"minute":return i[D(n)]();case"second":return i[E(n)]();case"millisecond":return i[I(n)]()}}function O(t){return t?"getUTCFullYear":"getFullYear"}function C(t){return t?"getUTCMonth":"getMonth"}function M(t){return t?"getUTCDate":"getDate"}function A(t){return t?"getUTCHours":"getHours"}function D(t){return t?"getUTCMinutes":"getMinutes"}function E(t){return t?"getUTCSeconds":"getSeconds"}function I(t){return t?"getUTCMilliseconds":"getMilliseconds"}function P(t){return t?"setUTCFullYear":"setFullYear"}function L(t){return t?"setUTCMonth":"setMonth"}function k(t){return t?"setUTCDate":"setDate"}function j(t){return t?"setUTCHours":"setHours"}function R(t){return t?"setUTCMinutes":"setMinutes"}function N(t){return t?"setUTCSeconds":"setSeconds"}function B(t){return t?"setUTCMilliseconds":"setMilliseconds"}},f934:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return h})),n.d(e,"e",(function(){return f})),n.d(e,"g",(function(){return d})),n.d(e,"i",(function(){return p})),n.d(e,"j",(function(){return g})),n.d(e,"d",(function(){return m})),n.d(e,"h",(function(){return v})),n.d(e,"f",(function(){return y})),n.d(e,"c",(function(){return _}));var i=n("6d8b"),r=n("9850"),o=n("3842"),a=n("eda2"),s=i["k"],l=["left","right","top","bottom","width","height"],c=[["width","left","right"],["height","top","bottom"]];function u(t,e,n,i,r){var o=0,a=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild((function(l,c){var u,h,f=l.getBoundingRect(),d=e.childAt(c+1),p=d&&d.getBoundingRect();if("horizontal"===t){var g=f.width+(p?-p.x+f.x:0);u=o+g,u>i||l.newline?(o=0,u=g,a+=s+n,s=f.height):s=Math.max(s,f.height)}else{var m=f.height+(p?-p.y+f.y:0);h=a+m,h>r||l.newline?(o+=s+n,a=0,h=m,s=f.width):s=Math.max(s,f.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),"horizontal"===t?o=u+n:a=h+n)}))}var h=u;i["i"](u,"vertical"),i["i"](u,"horizontal");function f(t,e,n){var i=e.width,r=e.height,s=Object(o["p"])(t.left,i),l=Object(o["p"])(t.top,r),c=Object(o["p"])(t.right,i),u=Object(o["p"])(t.bottom,r);return(isNaN(s)||isNaN(parseFloat(t.left)))&&(s=0),(isNaN(c)||isNaN(parseFloat(t.right)))&&(c=i),(isNaN(l)||isNaN(parseFloat(t.top)))&&(l=0),(isNaN(u)||isNaN(parseFloat(t.bottom)))&&(u=r),n=a["j"](n||0),{width:Math.max(c-s-n[1]-n[3],0),height:Math.max(u-l-n[0]-n[2],0)}}function d(t,e,n){n=a["j"](n||0);var i=e.width,s=e.height,l=Object(o["p"])(t.left,i),c=Object(o["p"])(t.top,s),u=Object(o["p"])(t.right,i),h=Object(o["p"])(t.bottom,s),f=Object(o["p"])(t.width,i),d=Object(o["p"])(t.height,s),p=n[2]+n[0],g=n[1]+n[3],m=t.aspect;switch(isNaN(f)&&(f=i-u-g-l),isNaN(d)&&(d=s-h-p-c),null!=m&&(isNaN(f)&&isNaN(d)&&(m>i/s?f=.8*i:d=.8*s),isNaN(f)&&(f=m*d),isNaN(d)&&(d=f/m)),isNaN(l)&&(l=i-u-f-g),isNaN(c)&&(c=s-h-d-p),t.left||t.right){case"center":l=i/2-f/2-n[3];break;case"right":l=i-f-g;break}switch(t.top||t.bottom){case"middle":case"center":c=s/2-d/2-n[0];break;case"bottom":c=s-d-p;break}l=l||0,c=c||0,isNaN(f)&&(f=i-g-l-(u||0)),isNaN(d)&&(d=s-p-c-(h||0));var v=new r["a"](l+n[3],c+n[0],f,d);return v.margin=n,v}function p(t,e,n,o,a){var s=!a||!a.hv||a.hv[0],l=!a||!a.hv||a.hv[1],c=a&&a.boundingMode||"all";if(s||l){var u;if("raw"===c)u="group"===t.type?new r["a"](0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(u=t.getBoundingRect(),t.needLocalTransform()){var h=t.getLocalTransform();u=u.clone(),u.applyTransform(h)}var f=d(i["j"]({width:u.width,height:u.height},e),n,o),p=s?f.x-u.x:0,g=l?f.y-u.y:0;"raw"===c?(t.x=p,t.y=g):(t.x+=p,t.y+=g),t.markRedraw()}}function g(t,e){return null!=t[c[e][0]]||null!=t[c[e][1]]&&null!=t[c[e][2]]}function m(t){var e=t.layoutMode||t.constructor.layoutMode;return i["A"](e)?e:e?{type:e}:null}function v(t,e,n){var r=n&&n.ignoreSize;!i["t"](r)&&(r=[r,r]);var o=l(c[0],0),a=l(c[1],1);function l(n,i){var o={},a=0,l={},c=0,f=2;if(s(n,(function(e){l[e]=t[e]})),s(n,(function(t){u(e,t)&&(o[t]=l[t]=e[t]),h(o,t)&&a++,h(l,t)&&c++})),r[i])return h(e,n[1])?l[n[2]]=null:h(e,n[2])&&(l[n[1]]=null),l;if(c!==f&&a){if(a>=f)return o;for(var d=0;d<n.length;d++){var p=n[d];if(!u(o,p)&&u(t,p)){o[p]=t[p];break}}return o}return l}function u(t,e){return t.hasOwnProperty(e)}function h(t,e){return null!=t[e]&&"auto"!==t[e]}function f(t,e,n){s(t,(function(t){e[t]=n[t]}))}f(c[0],t,o),f(c[1],t,a)}function y(t){return _({},t)}function _(t,e){return e&&t&&s(l,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}},f95e:function(t,e,n){"use strict";n.d(e,"a",(function(){return M}));var i=n("2cf4"),r=n("6d8b"),o=n("21a1"),a=n("6fd3"),s=n("3437"),l=n("5210"),c=n("9850"),u=n("4bc4");function h(){return!1}function f(t,e,n){var i=r["f"](),o=e.getWidth(),a=e.getHeight(),s=i.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=o+"px",s.height=a+"px",i.setAttribute("data-zr-dom-id",t)),i.width=o*n,i.height=a*n,i}var d=function(t){function e(e,n,o){var a,s=t.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null,o=o||i["e"],"string"===typeof e?a=f(e,n,o):r["A"](e)&&(a=e,e=a.id),s.id=e,s.dom=a;var l=a.style;return l&&(a.onselectstart=h,l.webkitUserSelect="none",l.userSelect="none",l.webkitTapHighlightColor="rgba(0,0,0,0)",l["-webkit-touch-callout"]="none",l.padding="0",l.margin="0",l.borderWidth="0"),s.domBack=null,s.ctxBack=null,s.painter=n,s.config=null,s.dpr=o,s}return Object(o["a"])(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=f("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r,o=[],a=this.maxRepaintRectCount,s=!1,l=new c["a"](0,0,0,0);function h(t){if(t.isFinite()&&!t.isZero())if(0===o.length){var e=new c["a"](0,0,0,0);e.copy(t),o.push(e)}else{for(var n=!1,i=1/0,r=0,u=0;u<o.length;++u){var h=o[u];if(h.intersect(t)){var f=new c["a"](0,0,0,0);f.copy(h),f.union(t),o[u]=f,n=!0;break}if(s){l.copy(t),l.union(h);var d=t.width*t.height,p=h.width*h.height,g=l.width*l.height,m=g-d-p;m<i&&(i=m,r=u)}}if(s&&(o[r].union(t),n=!0),!n){e=new c["a"](0,0,0,0);e.copy(t),o.push(e)}s||(s=o.length>=a)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var d=t[f];if(d){var p=d.shouldBePainted(n,i,!0,!0),g=d.__isRendered&&(d.__dirty&u["a"]||!p)?d.getPrevPaintRect():null;g&&h(g);var m=p&&(d.__dirty&u["a"]||!d.__isRendered)?d.getPaintRect():null;m&&h(m)}}for(f=this.__prevStartIndex;f<this.__prevEndIndex;++f){d=e[f],p=d.shouldBePainted(n,i,!0,!0);if(d&&(!p||!d.__zr)&&d.__isRendered){g=d.getPrevPaintRect();g&&h(g)}}do{r=!1;for(f=0;f<o.length;)if(o[f].isZero())o.splice(f,1);else{for(var v=f+1;v<o.length;)o[f].intersect(o[v])?(r=!0,o[f].union(o[v]),o.splice(v,1)):v++;f++}}while(r);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var i=this.dom,o=this.ctx,a=i.width,c=i.height;e=e||this.clearColor;var u=this.motionBlur&&!t,h=this.lastFrameAlpha,f=this.dpr,d=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,a/f,c/f));var p=this.domBack;function g(t,n,i,a){if(o.clearRect(t,n,i,a),e&&"transparent"!==e){var c=void 0;r["x"](e)?(c=e.__canvasGradient||Object(s["a"])(o,e,{x:0,y:0,width:i,height:a}),e.__canvasGradient=c):r["y"](e)&&(c=Object(l["c"])(o,e,{dirty:function(){d.setUnpainted(),d.__painter.refresh()}})),o.save(),o.fillStyle=c||e,o.fillRect(t,n,i,a),o.restore()}u&&(o.save(),o.globalAlpha=h,o.drawImage(p,t,n,i,a),o.restore())}!n||u?g(0,0,a,c):n.length&&r["k"](n,(function(t){g(t.x*f,t.y*f,t.width*f,t.height*f)}))},e}(a["a"]),p=d,g=n("98b7"),m=n("0da8"),v=n("22d1"),y=1e5,_=314159,b=.01,x=.001;function w(t){return parseInt(t,10)}function S(t){return!!t&&(!!t.__builtin__||"function"===typeof t.resize&&"function"===typeof t.refresh)}function T(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}var O=function(){function t(t,e,n,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var a=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=r["m"]({},n||{}),this.dpr=n.devicePixelRatio||i["e"],this._singleCanvas=a,this.root=t;var s=t.style;s&&(s.webkitTapHighlightColor="transparent",s.webkitUserSelect="none",s.userSelect="none",s["-webkit-touch-callout"]="none",t.innerHTML=""),this.storage=e;var l=this._zlevelList;this._prevDisplayList=[];var c=this._layers;if(a){var u=t,h=u.width,f=u.height;null!=n.width&&(h=n.width),null!=n.height&&(f=n.height),this.dpr=n.devicePixelRatio||1,u.width=h*this.dpr,u.height=f*this.dpr,this._width=h,this._height=f;var d=new p(u,this,this.dpr);d.__builtin__=!0,d.initContext(),c[_]=d,d.zlevel=_,l.push(_),this._domRoot=t}else{this._width=this._getSize(0),this._height=this._getSize(1);var g=this._domRoot=T(this._width,this._height);t.appendChild(g)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var r=0;r<i.length;r++){var o=i[r],a=this._layers[o];if(!a.__builtin__&&a.refresh){var s=0===r?this._backgroundColor:null;a.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var i,r={inHover:!0,viewWidth:this._width,viewHeight:this._height},o=0;o<e;o++){var a=t[o];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(y)),i||(i=n.ctx,i.save()),Object(l["a"])(i,a,r,o===e-1))}i&&i.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(y)},t.prototype.paintOne=function(t,e){Object(l["b"])(t,e)},t.prototype._paintList=function(t,e,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,n),o=r.finished,a=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),o)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var s=this;Object(g["a"])((function(){s._paintList(t,e,n,i)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(_).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||n)&&o.push(c)}for(var u=!0,h=!1,f=function(r){var s,l=o[r],c=l.ctx,f=a&&l.createRepaintRects(t,e,d._width,d._height),p=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,m=g&&Date.now(),v=l.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,v,f);else if(p===l.__startIndex){var y=t[p];y.incremental&&y.notClear&&!n||l.clear(!1,v,f)}-1===p&&(console.error("For some unknown reason. drawIndex is -1"),p=l.__startIndex);var _=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(s=p;s<l.__endIndex;s++){var r=t[s];if(r.__inHover&&(h=!0),i._doPaintEl(r,l,a,e,n,s===l.__endIndex-1),g){var o=Date.now()-m;if(o>15)break}}n.prevElClipPaths&&c.restore()};if(f)if(0===f.length)s=l.__endIndex;else for(var b=d.dpr,x=0;x<f.length;++x){var w=f[x];c.save(),c.beginPath(),c.rect(w.x*b,w.y*b,w.width*b,w.height*b),c.clip(),_(w),c.restore()}else c.save(),_(),c.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(u=!1)},d=this,p=0;p<o.length;p++)f(p);return v["a"].wxa&&r["k"](this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:u,needsRefreshHover:h}},t.prototype._doPaintEl=function(t,e,n,i,r,o){var a=e.ctx;if(n){var s=t.getPaintRect();(!i||s&&s.intersect(i))&&(Object(l["a"])(a,t,r,o),t.setPrevPaintRect(s))}else Object(l["a"])(a,t,r,o)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=_);var n=this._layers[t];return n||(n=new p("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?r["I"](n,this._layerConfig[t],!0):this._layerConfig[t-b]&&r["I"](n,this._layerConfig[t-b],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(n[t])r["G"]("ZLevel "+t+" has been used already");else if(S(e)){if(o>0&&t>i[0]){for(l=0;l<o-1;l++)if(i[l]<t&&i[l+1]>t)break;s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=e,!e.virtual)if(s){var c=s.dom;c.nextSibling?a.insertBefore(e.dom,c.nextSibling):a.appendChild(e.dom)}else a.firstChild?a.insertBefore(e.dom,a.firstChild):a.appendChild(e.dom);e.__painter=this}else r["G"]("Layer of zlevel "+t+" is not valid")},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i];t.call(e,this._layers[r],r)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__&&t.call(e,o,r)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__||t.call(e,o,r)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){s&&(s.__endIndex!==t&&(s.__dirty=!0),s.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o,a,s=null,l=0;for(a=0;a<t.length;a++){i=t[a];var c=i.zlevel,h=void 0;o!==c&&(o=c,l=0),i.incremental?(h=this.getLayer(c+x,this._needsManuallyCompositing),h.incremental=!0,l=1):h=this.getLayer(c+(l>0?b:0),this._needsManuallyCompositing),h.__builtin__||r["G"]("ZLevel "+c+" has been used by unkown layer "+h.id),h!==s&&(h.__used=!0,h.__startIndex!==a&&(h.__dirty=!0),h.__startIndex=a,h.incremental?h.__drawIndex=-1:h.__drawIndex=a,e(a),s=h),i.__dirty&u["a"]&&!i.__inHover&&(h.__dirty=!0,h.incremental&&h.__drawIndex<0&&(h.__drawIndex=a))}e(a),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,r["k"](this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?r["I"](n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+b){var a=this._layers[o];r["I"](a,n[t],!0)}}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(r["r"](n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=this._getSize(0),e=this._getSize(1),n.style.display="",this._width!==t||e!==this._height){for(var r in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(r)&&this._layers[r].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(_).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[_].dom;var e=new p("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=e.dom.width,r=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,i,r):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),s=0,c=a.length;s<c;s++){var u=a[s];Object(l["a"])(n,u,o,s===c-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype._getSize=function(t){var e=this._opts,n=["width","height"][t],i=["clientWidth","clientHeight"][t],r=["paddingLeft","paddingTop"][t],o=["paddingRight","paddingBottom"][t];if(null!=e[n]&&"auto"!==e[n])return parseFloat(e[n]);var a=this.root,s=document.defaultView.getComputedStyle(a);return(a[i]||w(s[n])||w(a.style[n]))-(w(s[r])||0)-(w(s[o])||0)|0},t.prototype.pathToImage=function(t,e){e=e||this.dpr;var n=document.createElement("canvas"),i=n.getContext("2d"),o=t.getBoundingRect(),a=t.style,s=a.shadowBlur*e,c=a.shadowOffsetX*e,u=a.shadowOffsetY*e,h=t.hasStroke()?a.lineWidth:0,f=Math.max(h/2,-c+s),d=Math.max(h/2,c+s),p=Math.max(h/2,-u+s),g=Math.max(h/2,u+s),v=o.width+f+d,y=o.height+p+g;n.width=v*e,n.height=y*e,i.scale(e,e),i.clearRect(0,0,v,y),i.dpr=e;var _={x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY,rotation:t.rotation,originX:t.originX,originY:t.originY};t.x=f-o.x,t.y=p-o.y,t.rotation=0,t.scaleX=1,t.scaleY=1,t.updateTransform(),t&&Object(l["a"])(i,t,{inHover:!1,viewWidth:this._width,viewHeight:this._height},!0);var b=new m["a"]({style:{x:0,y:0,image:n}});return r["m"](t,_),b},t}(),C=O;function M(t){t.registerPainter("canvas",C)}},f9ce:function(t,e,n){var i=n("ef5d"),r=n("e3f8"),o=n("f608"),a=n("f4d6");function s(t){return o(t)?i(a(t)):r(t)}t.exports=s},fadd:function(t,e,n){"use strict";function i(t,e,n){var i;while(t){if(e(t)&&(i=t,n))break;t=t.__hostTarget||t.parent}return i}n.d(e,"a",(function(){return i}))},fb15:function(t,e,n){"use strict";if(n.r(e),"undefined"!==typeof window){var i=window.document.currentScript,r=n("8875");i=r(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:r});var o=i&&i.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);o&&(n.p=o[1])}var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"econDrawContent",attrs:{id:"econDrawContent"}},[n("canvas",{staticStyle:{position:"absolute",left:"0",top:"0","pointer-events":"none","z-index":"0"},attrs:{id:"econDrawBackground"}}),n("canvas",{attrs:{id:"econDrawCanvas"}}),t.control.show?n("div",{staticClass:"econDraw_button",class:[t.control.position,t.control.grid],style:{background:t.control.background?t.control.background:"#fff"}},[n("a",{class:{active:!t.grabFlag},attrs:{title:"点击模式"},on:{click:t.handleClickMod}},[n("svg",{staticClass:"econDraw_icon",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3779",width:"200",height:"200"}},[n("path",{attrs:{d:"M534.048 564.96 704 960l-128 64-148.672-405.696L192 832 192 0l640 512L534.048 564.96z","p-id":"3780"}})])]),n("a",{class:{active:t.grabFlag},attrs:{title:"拖拽模式"},on:{click:t.handleGrabMod}},[n("svg",{staticClass:"econDraw_icon ",attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4133",width:"200",height:"200"}},[n("path",{attrs:{d:"M512 219.428571q-30.285714 0-51.714286 21.428571t-21.428571 51.714286l0 73.142857-18.285714 0 0-53.142857q0-27.428571-18.285714-46.571429t-45.714286-19.142857q-26.285714 0-45.142857 18.857143t-18.857143 45.142857l0 245.142857-18.285714-17.142857 0-98.285714q0-27.428571-18.285714-46.571429t-45.714286-19.142857q-26.285714 0-45.142857 18.857143t-18.857143 45.142857l0 128q0 26.857143 20 46.857143l177.142857 169.142857q22.285714 22.285714 22.285714 58.285714 0 14.857143 10.857143 25.714286t25.714286 10.857143l365.714286 0q14.857143 0 25.714286-10.857143t10.857143-25.714286l0-14.285714q0-23.428571 5.714286-44l61.714286-249.142857q5.714286-20.571429 5.714286-44l0-140.571429q0-27.428571-18.285714-46.571429t-45.714286-19.142857q-26.285714 0-45.142857 18.857143t-18.857143 45.142857l0 18.285714-18.285714 0 0-71.428571q0-22.857143-14.285714-41.428571t-36.571429-23.142857q-8-1.142857-13.142857-1.142857-26.285714 0-45.142857 18.857143t-18.857143 45.142857l0 73.142857-18.285714 0 0-69.714286q0-29.142857-18.571429-51.142857t-47.142857-24.857143q-2.857143-0.571429-7.428571-0.571429zm0-73.142857q48 0 85.142857 28.571429 32.571429-19.428571 70.285714-19.428571 33.714286 0 63.428571 15.428571t49.142857 43.428571q15.428571-4 33.714286-4 57.142857 0 97.142857 40.857143t40 98l0 140.571429q0 29.142857-7.428571 61.714286l-62.285714 249.142857q-3.428571 13.714286-3.428571 40.571429 0 45.714286-32 77.714286t-77.714286 32l-365.714286 0q-48 0-78.857143-33.428571t-30.857143-81.428571l-176-169.142857q-43.428571-41.714286-43.428571-100l0-128q0-56.571429 40.285714-96.857143t96.857143-40.285714q6.285714 0 9.142857 0.571429 3.428571-54.285714 43.142857-91.428571t94-37.142857q29.714286 0 56 12 41.142857-39.428571 99.428571-39.428571z","p-id":"4134"}})])]),n("a",{attrs:{title:"放大"},on:{click:function(e){return t.handleZoomItem("zoomIn")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635880589",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"16577",width:"200",height:"200"}},[n("path",{attrs:{d:"M469.333333 469.333333V170.666667h85.333334v298.666666h298.666666v85.333334h-298.666666v298.666666h-85.333334v-298.666666H170.666667v-85.333334h298.666666z","p-id":"16578"}})])]),n("a",{attrs:{title:"缩小"},on:{click:function(e){return t.handleZoomItem("zoomOut")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635917796",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"16726",width:"200",height:"200"}},[n("path",{attrs:{d:"M913.536524 551.447587H116.910163c-23.637854 0-42.977915-19.340062-42.977916-42.977916s19.340062-42.977915 42.977916-42.977915h796.626361c23.637854 0 42.977915 19.340062 42.977916 42.977915s-19.340062 42.977915-42.977916 42.977916z","p-id":"16727"}})])]),n("a",{attrs:{title:"适应窗口"},on:{click:function(e){return t.handleZoomItem("zoomToFit")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"13669",width:"200",height:"200"}},[n("path",{attrs:{d:"M316 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8zM512 622c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39zM512 482c22.1 0 40-17.9 40-39 0-23.1-17.9-41-40-41s-40 17.9-40 41c0 21.1 17.9 39 40 39z","p-id":"13670"}}),n("path",{attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32z m-40 728H184V184h656v656z","p-id":"13671"}}),n("path",{attrs:{d:"M648 672h60c4.4 0 8-3.6 8-8V360c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v304c0 4.4 3.6 8 8 8z","p-id":"13672"}})])]),n("a",{attrs:{title:"全屏"},on:{click:t.handleFullScreen}},[t.isFullScreen?n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"11529",width:"200",height:"200"}},[n("path",{attrs:{d:"M768 403.2h-93.866667c-29.866667 0-53.333333-23.466667-53.333333-53.333333V256c0-17.066667 14.933333-32 32-32s32 14.933333 32 32v85.333333H768c17.066667 0 32 14.933333 32 32s-12.8 32-32 29.866667zM349.866667 403.2H256c-17.066667 0-32-14.933333-32-32s14.933333-32 32-32h85.333333V256c0-17.066667 14.933333-32 32-32s32 14.933333 32 32v93.866667c-2.133333 29.866667-25.6 53.333333-55.466666 53.333333zM652.8 800c-17.066667 0-32-14.933333-32-32v-93.866667c0-29.866667 23.466667-53.333333 53.333333-53.333333H768c17.066667 0 32 14.933333 32 32s-14.933333 32-32 32h-83.2V768c0 17.066667-14.933333 32-32 32zM371.2 800c-17.066667 0-32-14.933333-32-32v-83.2H256c-17.066667 0-32-14.933333-32-32s14.933333-32 32-32h93.866667c29.866667 0 53.333333 23.466667 53.333333 53.333333V768c0 19.2-14.933333 32-32 32z m-21.333333-115.2z","p-id":"11530"}}),n("path",{attrs:{d:"M842.666667 938.666667h-661.333334C128 938.666667 85.333333 896 85.333333 842.666667v-661.333334C85.333333 128 128 85.333333 181.333333 85.333333h659.2C896 85.333333 938.666667 128 938.666667 181.333333v659.2c0 55.466667-42.666667 98.133333-96 98.133334zM181.333333 149.333333C164.266667 149.333333 149.333333 164.266667 149.333333 181.333333v659.2c0 19.2 14.933333 34.133333 32 34.133334h659.2c17.066667 0 32-14.933333 32-32v-661.333334c2.133333-17.066667-12.8-32-29.866666-32h-661.333334z","p-id":"11531"}})]):n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"10711",width:"200",height:"200"}},[n("path",{attrs:{d:"M368.896 192H224a32 32 0 0 0-32 32v137.888a32 32 0 0 0 64 0V256h112.896a32 32 0 0 0 0-64zM784.864 192H640a32 32 0 1 0 0 64h112.864v105.888a32 32 0 1 0 64 0V224a32 32 0 0 0-32-32zM368.896 777.92H256V672a32 32 0 1 0-64 0v137.92a32 32 0 0 0 32 32h144.896a32 32 0 1 0 0-64zM784.864 640a32 32 0 0 0-32 32v105.92H640a32 32 0 1 0 0 64h144.864a32 32 0 0 0 32-32V672a32 32 0 0 0-32-32z","p-id":"10712"}}),n("path",{attrs:{d:"M912 48h-800c-35.296 0-64 28.704-64 64v800c0 35.296 28.704 64 64 64h800c35.296 0 64-28.704 64-64v-800c0-35.296-28.704-64-64-64z m-800 864v-800h800l0.064 800H112z","p-id":"10713"}})])])]):t._e(),t.debuggerTooltip.show?n("div",{staticClass:"econDraw_tooltip debugger",style:{left:t.debuggerTooltip.left+"px",top:t.debuggerTooltip.top+"px"}},[n("div",{staticClass:"econDraw_tooltip_container"},[n("div",{staticClass:"econDraw_tooltip_title"},[t._v("图元信息")]),n("div",{staticClass:"econDraw_tooltip_content"},[n("ul",{staticClass:"econDraw_tooltip_ul"},t._l(t.debuggerTooltip.labelData,(function(e,i){return n("li",{key:i,staticClass:"econDraw_tooltip_li"},[n("div",{staticClass:"econDraw_tooltip_li_label"},[t._v(t._s(e.name))]),n("div",{staticClass:"econDraw_tooltip_li_value"},[t._v(t._s(e.value))])])})),0)])])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.tooltip.show,expression:"tooltip.show"}],staticClass:"econDraw_tooltip",style:{left:t.tooltip.left+"px",top:t.tooltip.top+"px"}},[n("div",{staticClass:"econDraw_tooltip_container"},[n("div",{staticClass:"econDraw_tooltip_title"},[t._v("设备信息")]),n("div",{staticClass:"econDraw_tooltip_content"},[n("ul",{staticClass:"econDraw_tooltip_ul"},t._l(t.tooltip.labelData,(function(e,i){return n("li",{key:i,staticClass:"econDraw_tooltip_li"},[n("div",{staticClass:"econDraw_tooltip_li_label"},[t._v(t._s(e.label))]),n("div",{staticClass:"econDraw_tooltip_li_value"},[t._v(t._s(e.value))]),n("div",{staticClass:"econDraw_tooltip_li_unit"},[t._v(t._s(e.unit))])])})),0)])])]),t.pageVisible?n("div",{staticClass:"econDraw_dialog"},[n("div",{staticClass:"econDraw_header"},[n("div",{staticClass:"econDraw_header_title"},[t._v(t._s(t.pageTitle))]),n("span",{staticClass:"econDraw_header_action",attrs:{title:"关闭"},on:{click:t.closePageDialog}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"econDraw_body"},[n("div",{staticClass:"econDraw_page"},[t.pageFlag?n("EconDialogPage",{ref:"EconDialogPage",attrs:{dialogTag:t.pageTag,graph:t.pageData,pushData:t.pushData,originData:t.originData},on:{dialogEvent:t.dialogEvent}}):t._e()],1)]),n("div",{staticClass:"econDraw_footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.closePageDialog}},[t._v("关 闭")])],1)]):t._e(),t.iframeVisible?n("div",{staticClass:"econDraw_dialog"},[n("div",{staticClass:"econDraw_header"},[n("div",{staticClass:"econDraw_header_title"},[t._v(t._s(t.iframeTitle))]),n("span",{staticClass:"econDraw_header_action",attrs:{title:"关闭"},on:{click:t.closeIframeDialog}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"econDraw_body"},[n("div",{staticClass:"econDraw_page"},[n("iframe",{attrs:{width:"100%",height:"100%",src:t.iframeSrc,frameborder:"0"}})])]),n("div",{staticClass:"econDraw_footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.closeIframeDialog}},[t._v("关 闭")])],1)]):t._e(),t.dialogDataVisible?n("EconDialogData",{attrs:{show:t.dialogDataVisible,dialogTag:t.pageTag,originData:t.originData,pushData:t.pushData},on:{close:t.closeDialogData}}):t._e(),t.controlVisible?n("EconDialogControl",{attrs:{show:t.controlVisible,form:t.controlForm},on:{close:t.closeControl}}):t._e(),t._t("default")],2)},s=[];function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t){if(Array.isArray(t))return l(t)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function u(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}n("fb6a"),n("b0c0");function h(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(t){return c(t)||u(t)||h(t)||f()}n("4ec9"),n("e260"),n("159b"),n("caad"),n("2532"),n("bf19"),n("cb29"),n("a9e3"),n("498a"),n("25f0"),n("99af"),n("5319"),n("ac1f"),n("466d"),n("b680"),n("1276"),n("d81d"),n("7db0"),n("e6cf"),n("cca6");var p=n("7a94"),g=(n("e997"),n("322a"),n("68f4"),n("25cb"),n("d532"),n("3711"),n("f4db"),n("38d6"),n("4cd3"),n("e44d"),n("9c87"),n("a76a"),n("6a81"),n("b56b"),n("7c71"),n("af0d"),n("ad1b"),n("e60f"),n("3461"),n("d92e"),n("2376"),n("5e72"),n("15c9"),n("6e59"),n("7803"),n("a79a"),n("0209"),n("d728"),n("5f9e"),n("1b1a"),n("cfb4"),n("3bc6"),n("8e8a"),n("15e5"),n("7503"),n("be48"),n("a8ef"),n("e43d"),n("3cca"),n("ae41"),n("2a1c"),n("4de4"),n("b64b"),function(t){var e=t.getObjects();e.forEach((function(e){var n=m(e.id);v(t,n,e),y(t,n,e),_(t,n,e)}))}),m=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"container";return document.getElementById("".concat(t,"_").concat(e))},v=function(t,e,n){if(e){n.setCoords();var i=t.getZoom(),r=n.scaleX,o=n.scaleY,a=n.width,s=n.height,l=n.angle,c=n.getBoundingRect(!1),u=c.left,h=c.top,f=(a*r*i-a)/2,d=(s*o*i-s)/2;e.style.left="".concat(u+f,"px"),e.style.top="".concat(h+d,"px"),e.style.transform="rotate(".concat(l,"deg) scale(").concat(r*i,", ").concat(o*i,")")}},y=function(t,e,n){if(e){var i=n.width,r=n.height;e.style.width="".concat(i,"px"),e.style.height="".concat(r,"px")}},_=function(t,e,n){if(e){var i=t.getZoom(),r=n.scaleX,o=n.scaleY,a=n.angle;e.style.transform="rotate(".concat(a,"deg) scale(").concat(r*i,", ").concat(o*i,")")}},b=function(t){var e=t.split("."),n=e[0],i=e[e.length-1],r=e[e.length-2],o="";return e.forEach((function(t,n){n<e.length-1&&(n<e.length-2?o+=t+".":o+=t)})),{dev:r,point:i,project:n,tag:o}},x=function t(e,n,i,r){var o=b(e).tag;return n.forEach((function(n){n.pointList&&n.pointList.forEach((function(t){var a="".concat(o,".").concat(t.value);a!==e&&a!==e||(n.data=r,i.push(n))})),n.id!==e&&n.tag!==e||(n.data=r,i.push(n)),"group"===n.customType&&n._objects&&n._objects.length&&t(e,n._objects,i,r)})),i},w=function t(e,n){var i=null;return n.forEach((function(n){n.id===e&&(i=n),"group"==n.customType&&n._objects&&n._objects.length&&t(e,n._objects)})),i};function S(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function O(t,e,n){return e&&T(t.prototype,e),n&&T(t,n),t}var C=function(){function t(e){S(this,t),this.canvas=e}return O(t,[{key:"zoomIn",value:function(){var t=this.canvas.getZoom();t+=.05;var e=this.canvas.getCenter();this.zoomToPoint(new p["fabric"].Point(e.left,e.top),t)}},{key:"zoomOut",value:function(){var t=this.canvas.getZoom();t-=.05;var e=this.canvas.getCenter();this.zoomToPoint(new p["fabric"].Point(e.left,e.top),t)}},{key:"zoomToReset",value:function(){var t=this.canvas.getCenter();this.canvas.setViewportTransform([1,0,0,1,0,0]),this.zoomToPoint(new p["fabric"].Point(t.left,t.top),1)}},{key:"zoomToFit",value:function(t,e){var n=this.canvas.getObjects();if(n.length){var i=t||30,r=e||t||30;this.canvas.setZoom(1),this.canvas.absolutePan({x:0,y:0});for(var o=n[0].getBoundingRect(),a=o.left,s=o.top,l=o.left+o.width,c=o.top+o.height,u=1;u<n.length;u++)o=n[u].getBoundingRect(),a=Math.min(a,o.left),s=Math.min(s,o.top),l=Math.max(l,o.left+o.width),c=Math.max(c,o.top+o.height);var h=(l-a-this.canvas.width)/2+a,f=(c-s-this.canvas.height)/2+s;this.canvas.absolutePan({x:h,y:f});var d=Math.min((this.canvas.width-i)/(l-a),(this.canvas.height-r)/(c-s)),g=this.canvas.getCenter();this.zoomToPoint(new p["fabric"].Point(g.left,g.top),d)}}},{key:"zoomToRatio",value:function(t){var e=this.canvas.getCenter();this.zoomToPoint(new p["fabric"].Point(e.left,e.top),t)}},{key:"zoomToPoint",value:function(t,e){var n=.2,i=5,r=e;r=Math.max(n,r),r=Math.min(i,r),this.canvas.zoomToPoint(t,r)}}]),t}(),M=C;n("a434");let A=t=>crypto.getRandomValues(new Uint8Array(t)),D=(t,e,n)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,r=-~(1.6*i*e/t.length);return()=>{let o="";while(1){let a=n(r),s=r;while(s--)if(o+=t[a[s]&i]||"",o.length===e)return o}}},E=(t,e)=>D(t,e,A);var I=function(t){return new Function("return "+t+";")()},P=function(t,e){t=""+t;for(var n=Math.ceil(t.length/e),i="",r=0;r<n;r++){var o=t.substring(r*e,(r+1)*e);i+=o+"\n"}return i},L=function(t,e){if(t===e)return 0;for(var n=t.split(".").map((function(t){return parseInt(t)})),i=e.split(".").map((function(t){return parseInt(t)})),r=Math.min(n.length,i.length),o=0;o<r;o++){if(n[o]>i[o])return 1;if(n[o]<i[o])return-1}return r===n.length?-1:1},k=function(t){var e=t.superType;e&&"element"===e&&(t.visible?t.element&&(t.element.style.display="block"):t.element.style.display="none")},j="1234567890abcdefghijklmnopqrstuvwxyz",R=(E(j,8),n("7511"),{update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0}),N={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},B=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],F={CSS:{},springs:{}};function z(t,e,n){return Math.min(Math.max(t,e),n)}function V(t,e){return t.indexOf(e)>-1}function H(t,e){return t.apply(null,e)}var G={arr:function(t){return Array.isArray(t)},obj:function(t){return V(Object.prototype.toString.call(t),"Object")},pth:function(t){return G.obj(t)&&t.hasOwnProperty("totalLength")},svg:function(t){return t instanceof SVGElement},inp:function(t){return t instanceof HTMLInputElement},dom:function(t){return t.nodeType||G.svg(t)},str:function(t){return"string"===typeof t},fnc:function(t){return"function"===typeof t},und:function(t){return"undefined"===typeof t},nil:function(t){return G.und(t)||null===t},hex:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)},rgb:function(t){return/^rgb/.test(t)},hsl:function(t){return/^hsl/.test(t)},col:function(t){return G.hex(t)||G.rgb(t)||G.hsl(t)},key:function(t){return!R.hasOwnProperty(t)&&!N.hasOwnProperty(t)&&"targets"!==t&&"keyframes"!==t}};function U(t){var e=/\(([^)]+)\)/.exec(t);return e?e[1].split(",").map((function(t){return parseFloat(t)})):[]}function W(t,e){var n=U(t),i=z(G.und(n[0])?1:n[0],.1,100),r=z(G.und(n[1])?100:n[1],.1,100),o=z(G.und(n[2])?10:n[2],.1,100),a=z(G.und(n[3])?0:n[3],.1,100),s=Math.sqrt(r/i),l=o/(2*Math.sqrt(r*i)),c=l<1?s*Math.sqrt(1-l*l):0,u=1,h=l<1?(l*s-a)/c:-a+s;function f(t){var n=e?e*t/1e3:t;return n=l<1?Math.exp(-n*l*s)*(u*Math.cos(c*n)+h*Math.sin(c*n)):(u+h*n)*Math.exp(-n*s),0===t||1===t?t:1-n}function d(){var e=F.springs[t];if(e)return e;var n=1/6,i=0,r=0;while(1)if(i+=n,1===f(i)){if(r++,r>=16)break}else r=0;var o=i*n*1e3;return F.springs[t]=o,o}return e?f:d}function X(t){return void 0===t&&(t=10),function(e){return Math.ceil(z(e,1e-6,1)*t)*(1/t)}}var Y=function(){var t=11,e=1/(t-1);function n(t,e){return 1-3*e+3*t}function i(t,e){return 3*e-6*t}function r(t){return 3*t}function o(t,e,o){return((n(e,o)*t+i(e,o))*t+r(e))*t}function a(t,e,o){return 3*n(e,o)*t*t+2*i(e,o)*t+r(e)}function s(t,e,n,i,r){var a,s,l=0;do{s=e+(n-e)/2,a=o(s,i,r)-t,a>0?n=s:e=s}while(Math.abs(a)>1e-7&&++l<10);return s}function l(t,e,n,i){for(var r=0;r<4;++r){var s=a(e,n,i);if(0===s)return e;var l=o(e,n,i)-t;e-=l/s}return e}function c(n,i,r,c){if(0<=n&&n<=1&&0<=r&&r<=1){var u=new Float32Array(t);if(n!==i||r!==c)for(var h=0;h<t;++h)u[h]=o(h*e,n,r);return function(t){return n===i&&r===c||0===t||1===t?t:o(f(t),i,c)}}function f(i){for(var o=0,c=1,h=t-1;c!==h&&u[c]<=i;++c)o+=e;--c;var f=(i-u[c])/(u[c+1]-u[c]),d=o+f*e,p=a(d,n,r);return p>=.001?l(i,d,n,r):0===p?d:s(i,o,o+e,n,r)}}return c}(),q=function(){var t={linear:function(){return function(t){return t}}},e={Sine:function(){return function(t){return 1-Math.cos(t*Math.PI/2)}},Circ:function(){return function(t){return 1-Math.sqrt(1-t*t)}},Back:function(){return function(t){return t*t*(3*t-2)}},Bounce:function(){return function(t){var e,n=4;while(t<((e=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}},Elastic:function(t,e){void 0===t&&(t=1),void 0===e&&(e=.5);var n=z(t,1,10),i=z(e,.1,2);return function(t){return 0===t||1===t?t:-n*Math.pow(2,10*(t-1))*Math.sin((t-1-i/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/i)}}},n=["Quad","Cubic","Quart","Quint","Expo"];return n.forEach((function(t,n){e[t]=function(){return function(t){return Math.pow(t,n+2)}}})),Object.keys(e).forEach((function(n){var i=e[n];t["easeIn"+n]=i,t["easeOut"+n]=function(t,e){return function(n){return 1-i(t,e)(1-n)}},t["easeInOut"+n]=function(t,e){return function(n){return n<.5?i(t,e)(2*n)/2:1-i(t,e)(-2*n+2)/2}},t["easeOutIn"+n]=function(t,e){return function(n){return n<.5?(1-i(t,e)(1-2*n))/2:(i(t,e)(2*n-1)+1)/2}}})),t}();function Z(t,e){if(G.fnc(t))return t;var n=t.split("(")[0],i=q[n],r=U(t);switch(n){case"spring":return W(t,e);case"cubicBezier":return H(Y,r);case"steps":return H(X,r);default:return H(i,r)}}function K(t){try{var e=document.querySelectorAll(t);return e}catch(n){return}}function $(t,e){for(var n=t.length,i=arguments.length>=2?arguments[1]:void 0,r=[],o=0;o<n;o++)if(o in t){var a=t[o];e.call(i,a,o,t)&&r.push(a)}return r}function J(t){return t.reduce((function(t,e){return t.concat(G.arr(e)?J(e):e)}),[])}function Q(t){return G.arr(t)?t:(G.str(t)&&(t=K(t)||t),t instanceof NodeList||t instanceof HTMLCollection?[].slice.call(t):[t])}function tt(t,e){return t.some((function(t){return t===e}))}function et(t){var e={};for(var n in t)e[n]=t[n];return e}function nt(t,e){var n=et(t);for(var i in t)n[i]=e.hasOwnProperty(i)?e[i]:t[i];return n}function it(t,e){var n=et(t);for(var i in e)n[i]=G.und(t[i])?e[i]:t[i];return n}function rt(t){var e=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t);return e?"rgba("+e[1]+",1)":t}function ot(t){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,n=t.replace(e,(function(t,e,n,i){return e+e+n+n+i+i})),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n),r=parseInt(i[1],16),o=parseInt(i[2],16),a=parseInt(i[3],16);return"rgba("+r+","+o+","+a+",1)"}function at(t){var e,n,i,r=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(t),o=parseInt(r[1],10)/360,a=parseInt(r[2],10)/100,s=parseInt(r[3],10)/100,l=r[4]||1;function c(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(0==a)e=n=i=s;else{var u=s<.5?s*(1+a):s+a-s*a,h=2*s-u;e=c(h,u,o+1/3),n=c(h,u,o),i=c(h,u,o-1/3)}return"rgba("+255*e+","+255*n+","+255*i+","+l+")"}function st(t){return G.rgb(t)?rt(t):G.hex(t)?ot(t):G.hsl(t)?at(t):void 0}function lt(t){var e=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(t);if(e)return e[1]}function ct(t){return V(t,"translate")||"perspective"===t?"px":V(t,"rotate")||V(t,"skew")?"deg":void 0}function ut(t,e){return G.fnc(t)?t(e.target,e.id,e.total):t}function ht(t,e){return t.getAttribute(e)}function ft(t,e,n){var i=lt(e);if(tt([n,"deg","rad","turn"],i))return e;var r=F.CSS[e+n];if(!G.und(r))return r;var o=100,a=document.createElement(t.tagName),s=t.parentNode&&t.parentNode!==document?t.parentNode:document.body;s.appendChild(a),a.style.position="absolute",a.style.width=o+n;var l=o/a.offsetWidth;s.removeChild(a);var c=l*parseFloat(e);return F.CSS[e+n]=c,c}function dt(t,e,n){if(e in t.style){var i=e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=t.style[e]||getComputedStyle(t).getPropertyValue(i)||"0";return n?ft(t,r,n):r}}function pt(t,e){return G.dom(t)&&!G.inp(t)&&(!G.nil(ht(t,e))||G.svg(t)&&t[e])?"attribute":G.dom(t)&&tt(B,e)?"transform":G.dom(t)&&"transform"!==e&&dt(t,e)?"css":null!=t[e]?"object":void 0}function gt(t){if(G.dom(t)){var e,n=t.style.transform||"",i=/(\w+)\(([^)]*)\)/g,r=new Map;while(e=i.exec(n))r.set(e[1],e[2]);return r}}function mt(t,e,n,i){var r=V(e,"scale")?1:0+ct(e),o=gt(t).get(e)||r;return n&&(n.transforms.list.set(e,o),n.transforms["last"]=e),i?ft(t,o,i):o}function vt(t,e,n,i){switch(pt(t,e)){case"transform":return mt(t,e,i,n);case"css":return dt(t,e,n);case"attribute":return ht(t,e);default:return t[e]||0}}function yt(t,e){var n=/^(\*=|\+=|-=)/.exec(t);if(!n)return t;var i=lt(t)||0,r=parseFloat(e),o=parseFloat(t.replace(n[0],""));switch(n[0][0]){case"+":return r+o+i;case"-":return r-o+i;case"*":return r*o+i}}function _t(t,e){if(G.col(t))return st(t);if(/\s/g.test(t))return t;var n=lt(t),i=n?t.substr(0,t.length-n.length):t;return e?i+e:i}function bt(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function xt(t){return 2*Math.PI*ht(t,"r")}function wt(t){return 2*ht(t,"width")+2*ht(t,"height")}function St(t){return bt({x:ht(t,"x1"),y:ht(t,"y1")},{x:ht(t,"x2"),y:ht(t,"y2")})}function Tt(t){for(var e,n=t.points,i=0,r=0;r<n.numberOfItems;r++){var o=n.getItem(r);r>0&&(i+=bt(e,o)),e=o}return i}function Ot(t){var e=t.points;return Tt(t)+bt(e.getItem(e.numberOfItems-1),e.getItem(0))}function Ct(t){if(t.getTotalLength)return t.getTotalLength();switch(t.tagName.toLowerCase()){case"circle":return xt(t);case"rect":return wt(t);case"line":return St(t);case"polyline":return Tt(t);case"polygon":return Ot(t)}}function Mt(t){var e=Ct(t);return t.setAttribute("stroke-dasharray",e),e}function At(t){var e=t.parentNode;while(G.svg(e)){if(!G.svg(e.parentNode))break;e=e.parentNode}return e}function Dt(t,e){var n=e||{},i=n.el||At(t),r=i.getBoundingClientRect(),o=ht(i,"viewBox"),a=r.width,s=r.height,l=n.viewBox||(o?o.split(" "):[0,0,a,s]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:a,h:s,vW:l[2],vH:l[3]}}function Et(t,e){var n=G.str(t)?K(t)[0]:t,i=e||100;return function(t){return{property:t,el:n,svg:Dt(n),totalLength:Ct(n)*(i/100)}}}function It(t,e,n){function i(n){void 0===n&&(n=0);var i=e+n>=1?e+n:0;return t.el.getPointAtLength(i)}var r=Dt(t.el,t.svg),o=i(),a=i(-1),s=i(1),l=n?1:r.w/r.vW,c=n?1:r.h/r.vH;switch(t.property){case"x":return(o.x-r.x)*l;case"y":return(o.y-r.y)*c;case"angle":return 180*Math.atan2(s.y-a.y,s.x-a.x)/Math.PI}}function Pt(t,e){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=_t(G.pth(t)?t.totalLength:t,e)+"";return{original:i,numbers:i.match(n)?i.match(n).map(Number):[0],strings:G.str(t)||e?i.split(n):[]}}function Lt(t){var e=t?J(G.arr(t)?t.map(Q):Q(t)):[];return $(e,(function(t,e,n){return n.indexOf(t)===e}))}function kt(t){var e=Lt(t);return e.map((function(t,n){return{target:t,id:n,total:e.length,transforms:{list:gt(t)}}}))}function jt(t,e){var n=et(e);if(/^spring/.test(n.easing)&&(n.duration=W(n.easing)),G.arr(t)){var i=t.length,r=2===i&&!G.obj(t[0]);r?t={value:t}:G.fnc(e.duration)||(n.duration=e.duration/i)}var o=G.arr(t)?t:[t];return o.map((function(t,n){var i=G.obj(t)&&!G.pth(t)?t:{value:t};return G.und(i.delay)&&(i.delay=n?0:e.delay),G.und(i.endDelay)&&(i.endDelay=n===o.length-1?e.endDelay:0),i})).map((function(t){return it(t,n)}))}function Rt(t){for(var e=$(J(t.map((function(t){return Object.keys(t)}))),(function(t){return G.key(t)})).reduce((function(t,e){return t.indexOf(e)<0&&t.push(e),t}),[]),n={},i=function(i){var r=e[i];n[r]=t.map((function(t){var e={};for(var n in t)G.key(n)?n==r&&(e.value=t[n]):e[n]=t[n];return e}))},r=0;r<e.length;r++)i(r);return n}function Nt(t,e){var n=[],i=e.keyframes;for(var r in i&&(e=it(Rt(i),e)),e)G.key(r)&&n.push({name:r,tweens:jt(e[r],t)});return n}function Bt(t,e){var n={};for(var i in t){var r=ut(t[i],e);G.arr(r)&&(r=r.map((function(t){return ut(t,e)})),1===r.length&&(r=r[0])),n[i]=r}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}function Ft(t,e){var n;return t.tweens.map((function(i){var r=Bt(i,e),o=r.value,a=G.arr(o)?o[1]:o,s=lt(a),l=vt(e.target,t.name,s,e),c=n?n.to.original:l,u=G.arr(o)?o[0]:c,h=lt(u)||lt(l),f=s||h;return G.und(a)&&(a=c),r.from=Pt(u,f),r.to=Pt(yt(a,u),f),r.start=n?n.end:0,r.end=r.start+r.delay+r.duration+r.endDelay,r.easing=Z(r.easing,r.duration),r.isPath=G.pth(o),r.isPathTargetInsideSVG=r.isPath&&G.svg(e.target),r.isColor=G.col(r.from.original),r.isColor&&(r.round=1),n=r,r}))}var zt={css:function(t,e,n){return t.style[e]=n},attribute:function(t,e,n){return t.setAttribute(e,n)},object:function(t,e,n){return t[e]=n},transform:function(t,e,n,i,r){if(i.list.set(e,n),e===i.last||r){var o="";i.list.forEach((function(t,e){o+=e+"("+t+") "})),t.style.transform=o}}};function Vt(t,e){var n=kt(t);n.forEach((function(t){for(var n in e){var i=ut(e[n],t),r=t.target,o=lt(i),a=vt(r,n,o,t),s=o||lt(a),l=yt(_t(i,s),a),c=pt(r,n);zt[c](r,n,l,t.transforms,!0)}}))}function Ht(t,e){var n=pt(t.target,e.name);if(n){var i=Ft(e,t),r=i[i.length-1];return{type:n,property:e.name,animatable:t,tweens:i,duration:r.end,delay:i[0].delay,endDelay:r.endDelay}}}function Gt(t,e){return $(J(t.map((function(t){return e.map((function(e){return Ht(t,e)}))}))),(function(t){return!G.und(t)}))}function Ut(t,e){var n=t.length,i=function(t){return t.timelineOffset?t.timelineOffset:0},r={};return r.duration=n?Math.max.apply(Math,t.map((function(t){return i(t)+t.duration}))):e.duration,r.delay=n?Math.min.apply(Math,t.map((function(t){return i(t)+t.delay}))):e.delay,r.endDelay=n?r.duration-Math.max.apply(Math,t.map((function(t){return i(t)+t.duration-t.endDelay}))):e.endDelay,r}var Wt=0;function Xt(t){var e=nt(R,t),n=nt(N,t),i=Nt(n,t),r=kt(t.targets),o=Gt(r,i),a=Ut(o,n),s=Wt;return Wt++,it(e,{id:s,children:[],animatables:r,animations:o,duration:a.duration,delay:a.delay,endDelay:a.endDelay})}var Yt=[],qt=function(){var t;function e(){t||Zt()&&Kt.suspendWhenDocumentHidden||!(Yt.length>0)||(t=requestAnimationFrame(n))}function n(e){var i=Yt.length,r=0;while(r<i){var o=Yt[r];o.paused?(Yt.splice(r,1),i--):(o.tick(e),r++)}t=r>0?requestAnimationFrame(n):void 0}function i(){Kt.suspendWhenDocumentHidden&&(Zt()?t=cancelAnimationFrame(t):(Yt.forEach((function(t){return t._onDocumentVisibility()})),qt()))}return"undefined"!==typeof document&&document.addEventListener("visibilitychange",i),e}();function Zt(){return!!document&&document.hidden}function Kt(t){void 0===t&&(t={});var e,n=0,i=0,r=0,o=0,a=null;function s(t){var e=window.Promise&&new Promise((function(t){return a=t}));return t.finished=e,e}var l=Xt(t);s(l);function c(){var t=l.direction;"alternate"!==t&&(l.direction="normal"!==t?"normal":"reverse"),l.reversed=!l.reversed,e.forEach((function(t){return t.reversed=l.reversed}))}function u(t){return l.reversed?l.duration-t:t}function h(){n=0,i=u(l.currentTime)*(1/Kt.speed)}function f(t,e){e&&e.seek(t-e.timelineOffset)}function d(t){if(l.reversePlayback)for(var n=o;n--;)f(t,e[n]);else for(var i=0;i<o;i++)f(t,e[i])}function p(t){var e=0,n=l.animations,i=n.length;while(e<i){var r=n[e],o=r.animatable,a=r.tweens,s=a.length-1,c=a[s];s&&(c=$(a,(function(e){return t<e.end}))[0]||c);for(var u=z(t-c.start-c.delay,0,c.duration)/c.duration,h=isNaN(u)?1:c.easing(u),f=c.to.strings,d=c.round,p=[],g=c.to.numbers.length,m=void 0,v=0;v<g;v++){var y=void 0,_=c.to.numbers[v],b=c.from.numbers[v]||0;y=c.isPath?It(c.value,h*_,c.isPathTargetInsideSVG):b+h*(_-b),d&&(c.isColor&&v>2||(y=Math.round(y*d)/d)),p.push(y)}var x=f.length;if(x){m=f[0];for(var w=0;w<x;w++){f[w];var S=f[w+1],T=p[w];isNaN(T)||(m+=S?T+S:T+" ")}}else m=p[0];zt[r.type](o.target,r.property,m,o.transforms),r.currentValue=m,e++}}function g(t){l[t]&&!l.passThrough&&l[t](l)}function m(){l.remaining&&!0!==l.remaining&&l.remaining--}function v(t){var o=l.duration,h=l.delay,f=o-l.endDelay,v=u(t);l.progress=z(v/o*100,0,100),l.reversePlayback=v<l.currentTime,e&&d(v),!l.began&&l.currentTime>0&&(l.began=!0,g("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,g("loopBegin")),v<=h&&0!==l.currentTime&&p(0),(v>=f&&l.currentTime!==o||!o)&&p(o),v>h&&v<f?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,g("changeBegin")),g("change"),p(v)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,g("changeComplete")),l.currentTime=z(v,0,o),l.began&&g("update"),t>=o&&(i=0,m(),l.remaining?(n=r,g("loopComplete"),l.loopBegan=!1,"alternate"===l.direction&&c()):(l.paused=!0,l.completed||(l.completed=!0,g("loopComplete"),g("complete"),!l.passThrough&&"Promise"in window&&(a(),s(l)))))}return l.reset=function(){var t=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed="reverse"===t,l.remaining=l.loop,e=l.children,o=e.length;for(var n=o;n--;)l.children[n].reset();(l.reversed&&!0!==l.loop||"alternate"===t&&1===l.loop)&&l.remaining++,p(l.reversed?l.duration:0)},l._onDocumentVisibility=h,l.set=function(t,e){return Vt(t,e),l},l.tick=function(t){r=t,n||(n=r),v((r+(i-n))*Kt.speed)},l.seek=function(t){v(u(t))},l.pause=function(){l.paused=!0,h()},l.play=function(){l.paused&&(l.completed&&l.reset(),l.paused=!1,Yt.push(l),h(),qt())},l.reverse=function(){c(),l.completed=!l.reversed,h()},l.restart=function(){l.reset(),l.play()},l.remove=function(t){var e=Lt(t);Jt(e,l)},l.reset(),l.autoplay&&l.play(),l}function $t(t,e){for(var n=e.length;n--;)tt(t,e[n].animatable.target)&&e.splice(n,1)}function Jt(t,e){var n=e.animations,i=e.children;$t(t,n);for(var r=i.length;r--;){var o=i[r],a=o.animations;$t(t,a),a.length||o.children.length||i.splice(r,1)}n.length||i.length||e.pause()}function Qt(t){for(var e=Lt(t),n=Yt.length;n--;){var i=Yt[n];Jt(e,i)}}function te(t,e){void 0===e&&(e={});var n=e.direction||"normal",i=e.easing?Z(e.easing):null,r=e.grid,o=e.axis,a=e.from||0,s="first"===a,l="center"===a,c="last"===a,u=G.arr(t),h=u?parseFloat(t[0]):parseFloat(t),f=u?parseFloat(t[1]):0,d=lt(u?t[1]:t)||0,p=e.start||0+(u?h:0),g=[],m=0;return function(t,e,v){if(s&&(a=0),l&&(a=(v-1)/2),c&&(a=v-1),!g.length){for(var y=0;y<v;y++){if(r){var _=l?(r[0]-1)/2:a%r[0],b=l?(r[1]-1)/2:Math.floor(a/r[0]),x=y%r[0],w=Math.floor(y/r[0]),S=_-x,T=b-w,O=Math.sqrt(S*S+T*T);"x"===o&&(O=-S),"y"===o&&(O=-T),g.push(O)}else g.push(Math.abs(a-y));m=Math.max.apply(Math,g)}i&&(g=g.map((function(t){return i(t/m)*m}))),"reverse"===n&&(g=g.map((function(t){return o?t<0?-1*t:-t:Math.abs(m-t)})))}var C=u?(f-h)/m:h;return p+C*(Math.round(100*g[e])/100)+d}}function ee(t){void 0===t&&(t={});var e=Kt(t);return e.duration=0,e.add=function(n,i){var r=Yt.indexOf(e),o=e.children;function a(t){t.passThrough=!0}r>-1&&Yt.splice(r,1);for(var s=0;s<o.length;s++)a(o[s]);var l=it(n,nt(N,t));l.targets=l.targets||t.targets;var c=e.duration;l.autoplay=!1,l.direction=e.direction,l.timelineOffset=G.und(i)?c:yt(i,c),a(e),e.seek(l.timelineOffset);var u=Kt(l);a(u),o.push(u);var h=Ut(o,t);return e.delay=h.delay,e.endDelay=h.endDelay,e.duration=h.duration,e.seek(0),e.reset(),e.autoplay&&e.play(),e},e}Kt.version="3.2.1",Kt.speed=1,Kt.suspendWhenDocumentHidden=!0,Kt.running=Yt,Kt.remove=Qt,Kt.get=vt,Kt.set=Vt,Kt.convertPx=ft,Kt.path=Et,Kt.setDashoffset=Mt,Kt.stagger=te,Kt.timeline=ee,Kt.easing=Z,Kt.penner=q,Kt.random=function(t,e){return Math.floor(Math.random()*(e-t+1))+t};var ne=Kt,ie=n("bc3a"),re=n.n(ie),oe=n("a8fc"),ae=n.n(oe),se=n("e715"),le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"econDrawContentDialog",attrs:{id:"econDrawContentDialog"}},[n("canvas",{staticStyle:{position:"absolute",left:"0",top:"0","pointer-events":"none","z-index":"0"},attrs:{id:"econDrawBackgroundDialog"}}),n("canvas",{attrs:{id:"econDrawCanvasDialog"}}),t.control.show?n("div",{staticClass:"econDraw_button",class:[t.control.position,t.control.grid],style:{background:t.control.background?t.control.background:"#fff"}},[n("a",{attrs:{title:"放大"},on:{click:function(e){return t.handleZoomItem("zoomIn")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635880589",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"16577",width:"200",height:"200"}},[n("path",{attrs:{d:"M469.333333 469.333333V170.666667h85.333334v298.666666h298.666666v85.333334h-298.666666v298.666666h-85.333334v-298.666666H170.666667v-85.333334h298.666666z","p-id":"16578"}})])]),n("a",{attrs:{title:"缩小"},on:{click:function(e){return t.handleZoomItem("zoomOut")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635917796",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"16726",width:"200",height:"200"}},[n("path",{attrs:{d:"M913.536524 551.447587H116.910163c-23.637854 0-42.977915-19.340062-42.977916-42.977916s19.340062-42.977915 42.977916-42.977915h796.626361c23.637854 0 42.977915 19.340062 42.977916 42.977915s-19.340062 42.977915-42.977916 42.977916z","p-id":"16727"}})])]),n("a",{attrs:{title:"适应窗口"},on:{click:function(e){return t.handleZoomItem("zoomToFit")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635955794",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"16875",width:"200",height:"200"}},[n("path",{attrs:{d:"M85.333333 682.666667v128a128 128 0 0 0 128 128h128a42.666667 42.666667 0 0 0 0-85.333334H213.333333a42.666667 42.666667 0 0 1-42.666666-42.666666v-128a42.666667 42.666667 0 0 0-85.333334 0z m597.333334 256h128a128 128 0 0 0 128-128v-128a42.666667 42.666667 0 0 0-85.333334 0v128a42.666667 42.666667 0 0 1-42.666666 42.666666h-128a42.666667 42.666667 0 0 0 0 85.333334z m256-597.333334V213.333333a128 128 0 0 0-128-128h-128a42.666667 42.666667 0 0 0 0 85.333334h128a42.666667 42.666667 0 0 1 42.666666 42.666666v128a42.666667 42.666667 0 0 0 85.333334 0zM341.333333 85.333333H213.333333a128 128 0 0 0-128 128v128a42.666667 42.666667 0 0 0 85.333334 0V213.333333a42.666667 42.666667 0 0 1 42.666666-42.666666h128a42.666667 42.666667 0 0 0 0-85.333334z","p-id":"16876"}})])]),n("a",{attrs:{title:"原始位置"},on:{click:function(e){return t.handleZoomItem("zoomToReset")}}},[n("svg",{staticClass:"econDraw_icon",style:{color:t.control.color?t.control.color:"#ccc"},attrs:{t:"1644635979890",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"17024",width:"200",height:"200"}},[n("path",{attrs:{d:"M950.4 425.4c-11.8-59.2-34.8-114.4-68.4-164-32.5-47.9-73.4-88.5-121.7-120.8S658.8 85.9 602.2 74.2c-58.7-12.2-118.5-12.4-177.7-0.7-81.3 16.1-155 53.5-215.2 108.9l-95-97.8C105 75 88.6 81.5 88.4 94.9l-3.6 249c-0.1 8.3 6.5 15.2 14.8 15.3l249 3.6c13.4 0.2 20.4-15.9 11-25.6L259.5 234.1c50.2-45.7 111.5-76.5 179-89.9 98.4-19.5 198.5 0.5 281.8 56.2 83.4 55.8 140 140.6 159.5 239s-0.5 198.5-56.2 281.8c-55.8 83.4-140.6 140-239 159.5-77.3 15.3-156 6.3-227.6-26.1-70.1-31.7-127.9-83.1-167.4-148.7-10.2-17-32.4-22.6-49.4-12.3-17 10.2-22.5 32.4-12.3 49.4 23.4 38.9 52.5 74 86.7 104.2 33.7 29.9 71.7 54.5 112.7 73.1 58.3 26.4 120.5 39.8 183.5 39.8 29.2 0 58.6-2.9 87.8-8.7 59.2-11.8 114.4-34.8 164-68.4 47.9-32.5 88.5-73.4 120.8-121.7s54.6-101.5 66.4-158.2c12.2-58.7 12.4-118.5 0.6-177.7z","p-id":"17025"}})])])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.tooltip.show,expression:"tooltip.show"}],staticClass:"econDraw_tooltip",style:{left:t.tooltip.left+"px",top:t.tooltip.top+"px"}},[n("div",{staticClass:"econDraw_tooltip_container"},[n("div",{staticClass:"econDraw_tooltip_title"},[t._v("设备信息")]),n("div",{staticClass:"econDraw_tooltip_content"},[n("ul",{staticClass:"econDraw_tooltip_ul"},t._l(t.tooltip.labelData,(function(e,i){return n("li",{key:i,staticClass:"econDraw_tooltip_li"},[n("div",{staticClass:"econDraw_tooltip_li_label"},[t._v(t._s(e.label))]),n("div",{staticClass:"econDraw_tooltip_li_value"},[t._v(t._s(e.value))]),n("div",{staticClass:"econDraw_tooltip_li_unit"},[t._v(t._s(e.unit))])])})),0)])])])])},ce=[],ue=n("0b11"),he=n.n(ue),fe={name:"EconDialogPage",props:{graph:String,pushData:Array,originData:Array,control:{type:Object,default:function(){return{show:!0,grid:"",background:"#fff",color:"#666",position:"bottom-right"}}},dialogTag:{type:String,default:function(){return""}}},data:function(){return{fabricCanvas:null,backgroundCanvas:null,audioArray:[],panning:!1,customConfigs:["id","tag","data","customEvents"],originMergeData:[],tooltip:{left:0,top:0,show:!1,rawObj:{},labelData:[]},expressionData:[]}},watch:{pushData:{handler:function(t){this.mergePushToOrigin(t),this.handleAnimate(t)},deep:!0}},mounted:function(){var t=this;t.initCanvas(),t.setCanvasbackground(),window.onresize=function(){t.getWrapWidthAndHeight(),t.setCanvasbackground()},setTimeout((function(){t.originMergeData=JSON.parse(JSON.stringify(t.originData)),t.handleAnimate(t.originData)}),50)},beforeDestroy:function(){var t=this;t.audioArray.forEach((function(t){t.pause(),t=null})),window.onresize=null},methods:{initCanvas:function(){var t=this;t.fabricCanvas=new p["fabric"].Canvas("econDrawCanvasDialog",{isDrawingMode:!1,enableRetinaScaling:!0,container:"econDrawContentDialog",backgroundContainer:"econDrawBackgroundDialog",zoomHandler:""}),t.fabricCanvas.selection=!1,t.fabricCanvas.hoverCursor="pointer";var e={};t.fabricCanvas.on({"mouse:down":function(n){t.panning=!0,n.e.type.includes("mouse")?(t.panning=!0,e=n.pointer):(e=n.pointer,t.panning=!0)},"mouse:up":function(n){if(n.e.type.includes("mouse")){t.panning=!1;var i=n.pointer.x-e.x,r=n.pointer.y-e.y;if((Math.abs(i)<5||Math.abs(r)<5)&&n.target&&n.target.customEvents&&n.target.customEvents.length){var o=n.target.toJSON(t.customConfigs);t.handleObjectEvent(o,"click")}}else{var a=n.pointer.x-e.x,s=n.pointer.y-e.y;if(Math.abs(a)>5||Math.abs(s)>5){var l=new p["fabric"].Point(a,s);t.fabricCanvas.relativePan(l),g(t.fabricCanvas)}else if(n.target&&n.target.customEvents&&n.target.customEvents.length){var c=n.target.toJSON(t.customConfigs);t.handleObjectEvent(c,"click")}}},"mouse:move":function(e){if(e.e.type.includes("mouse")&&t.panning&&e&&e.e){var n=new p["fabric"].Point(e.e.movementX,e.e.movementY);t.fabricCanvas.relativePan(n),g(t.fabricCanvas)}e.target&&e.target.tooltip&&e.target.tooltip.flag&&t.tooltip.show&&(t.tooltip.left=e.e.offsetX+15,t.tooltip.top=e.e.offsetY+0)},"mouse:over":function(e){if(e.target){var n=e.target.toJSON(t.customConfigs);if(t.handleObjectEvent(n,"mouserover"),e.target.tooltip&&e.target.tooltip.flag){t.tooltip.show=!0,t.tooltip.left=e.e.offsetX+15,t.tooltip.top=e.e.offsetY+0;var i=e.target.tooltip.list||[];i.forEach((function(t){t.value=econTagMap.get(t.prop).TagValue})),t.tooltip.labelData=i}}},"mouse:out":function(e){if(e.target){var n=e.target.toJSON(t.customConfigs);t.handleObjectEvent(n,"mouseout"),t.tooltip.show=!1}},"mouse:dblclick":function(e){if(e.target){var n=e.target.toJSON(t.customConfigs);t.handleObjectEvent(n,"dblclick")}},"mouse:wheel":function(e){var n=e.e;n.preventDefault();var i=new p["fabric"].Point(e.pointer.x,e.pointer.y),r=t.fabricCanvas.getZoom(),o=e.e.deltaY;o>0?r-=.1:r+=.1,t.fabricCanvas.zoomHandler.zoomToPoint(i,r),g(t.fabricCanvas)}}),t.getWrapWidthAndHeight(),t.fabricCanvas.zoomHandler=new M(t.fabricCanvas);var n=!1,i=t.dialogTag;t.dialogTag&&(n=!0);var r=function e(r){r.expressionFlag&&t.expressionData.push(r),r.chartProperty&&r.chartProperty.list.length&&n&&r.chartProperty.list.forEach((function(t){t.name="".concat(i,".").concat(t.name)})),r.pointFlag&&n&&(r.tag="".concat(i,".").concat(r.point)),["ecLabel","ecLabelNumber","ecDevName"].includes(r.type)&&"left"===r.textAlign&&r.set({originX:"left",originY:"top",left:r.left-r.width/2,top:r.top-r.height/2}).setCoords(),r.set({dialog:!0,editable:!1,selectable:!1,originFill:r.fill,originStroke:r.stroke,originOpacity:r.opacity,originLeft:r.left,originTop:r.top,originWidth:r.width,originHeight:r.height,originAngle:r.angle,originScaleX:r.scaleX,originScaleY:r.scaleY,originVisible:r.visible,originFlipX:r.flipX,originFlipY:r.flipY,animeAudio:null,originStart:0,stopAnime:function(t){switch(t){case"returnHorizontal":case"returnVertical":r.animeOrigin&&r.animeOrigin.play&&r.animeOrigin.pause();break;case"heartBeat":r.animeHeart&&r.animeHeart.play&&r.animeHeart.pause();break;case"flash":r.animeFlash&&r.animeFlash.play&&r.animeFlash.pause();break;case"rotation":r.animeRotation&&r.animeRotation.play&&r.animeRotation.pause();break;case"forward":r.animeForward&&r.animeForward.play&&r.animeForward.pause();break;case"reverse":r.animeReverse&&r.animeReverse.play&&r.animeReverse.pause();break;case"audio":null!=r.animeAudio&&(r.animeAudio.pause(),r.animeAudio=null);break}},stopAllAnime:function(){var t=["returnHorizontal","returnVertical","heartBeat","flash","rotation","forward","reverse","audio"];for(var e in t)r.stopAnime(e)},setAnime:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;switch(e){case"translate":n.set({visible:!0,text:""+i});break;case"fill":n.set({visible:!0,fill:i}),"Svg"===n.customType&&n._objects&&n._objects.length&&n._objects.forEach((function(t){t.set({fill:i})})),"Image"===n.customType&&(n.filters=[new p["fabric"].Image.filters.BlendColor({color:i,mode:"tint",alpha:.6})],n.applyFilters());break;case"stroke":n.set({visible:!0,stroke:i}),"Svg"===n.customType&&n._objects&&n._objects.length&&n._objects.forEach((function(t){t.set({stroke:i,originStroke:1})}));break;case"show":n.set("visible",!0);break;case"hide":n.set("visible",!1);break;case"flipX":n.set({visible:!0,flipX:!0});break;case"flipY":n.set({visible:!0,flipY:!0});break;case"offsetAngle":n.set({visible:!0,angle:i});break;case"heartBeat":n.set({visible:!0,animeHeart:ne({targets:n,loop:!0,autoplay:!0,scaleX:1.5*n.scaleX,scaleY:1.5*n.scaleY,duration:r,direction:"alternate",easing:"linear",begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"flash":n.set({visible:!0,animeFlash:ne({targets:n,loop:!0,autoplay:!0,duration:800,direction:"normal",easing:"easeInOutSine",opacity:0,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.renderAll()}})});break;case"rotation":n.set({visible:!0,animeRotation:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.angle+5;+n.angle>=360&&n.set("angle",0),n.set("angle",+i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"forward":n.set({visible:!0,animeForward:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.strokeDashOffset;i-=1,0==i&&(i=900),n.set("strokeDashOffset",i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"reverse":n.set({visible:!0,animeReverse:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.strokeDashOffset;i+=1,900==i&&(i=0),n.set("strokeDashOffset",i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"returnHorizontal":n.set({visible:!0,animeOrigin:ne({targets:n,loop:!0,autoplay:!0,duration:r,direction:"alternate",easing:"linear",left:Number(n.left+i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"returnVertical":n.set({visible:!0,animeOrigin:ne({targets:n,loop:!0,autoplay:!0,duration:r,direction:"alternate",easing:"linear",top:Number(n.top+i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveTop":var o=Number(n.top+(n.originStart-+n.text)*i),a=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originTop:o,animeOrigin:ne({targets:n,autoplay:!0,duration:a,direction:"normal",easing:"linear",top:o,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveDown":var s=Number(n.top+(+n.text-n.originStart)*i),l=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originTop:s,animeOrigin:ne({targets:n,autoplay:!0,duration:l,direction:"normal",easing:"linear",top:s,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveLeft":var c=Number(n.left+(n.originStart-+n.text)*i),u=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originLeft:c,animeOrigin:ne({targets:n,autoplay:!0,duration:u,direction:"normal",easing:"linear",left:c,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveRight":var h=Number(n.left+(+n.text-n.originStart)*i),f=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originLeft:h,animeOrigin:ne({targets:n,autoplay:!0,left:h,duration:f,direction:"normal",easing:"linear",begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"audio":n.animeAudio=new Audio(he.a),t.audioArray.push(n.animeAudio),n.animeAudio.play();break;case"moveVerticalOrigin":n.set({visible:!0,animeOrigin:ne({targets:n,autoplay:!0,duration:r,direction:"normal",easing:"linear",top:n.top+Number(i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveHorizontalOrigin":n.set({visible:!0,animeOrigin:ne({targets:n,autoplay:!0,duration:r,direction:"normal",easing:"linear",left:n.left+Number(i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break}}}),"group"===r.customType&&r._objects&&r._objects.length&&r._objects.forEach((function(t){e(t)}))};t.fabricCanvas.loadFromJSON(t.graph,(function(){t.fabricCanvas.renderAll.bind(t.fabricCanvas),t.fabricCanvas.zoomHandler.zoomToFit()}),(function(t,e){r(e)}))},setCanvasbackground:function(){var t=this,e=document.getElementById(t.fabricCanvas.container),n=e.offsetWidth,i=e.offsetHeight;t.backgroundCanvas=new p["fabric"].StaticCanvas(t.fabricCanvas.backgroundContainer,{width:n,height:i});var r=JSON.parse(t.graph).setting;if(r.gridFlag){var o=+r.gridSize?+r.gridSize:20,a=[];r.gridColor,r.gridLine;if(r.gridType&&"dot"===r.gridType)for(var s=Math.ceil(n/o);s--;)for(var l=Math.ceil(i/o);l--;)a.push(new p["fabric"].Circle({left:o*s,top:o*l,radius:r.gridLine,fill:r.gridColor}));else{var c=function(t,e,n,i){a.push(s([0,0,e,0],i)),a.push(s([e,0,e,e],i));for(var r=parseInt(e/t)+1,o=0;o<r;o++)a.push(s([o*t,0,o*t,e],o%5===0?i:n)),0!==o&&a.push(s([0,o*t,e,o*t],o%5===0?i:n));function s(t,e){return new p["fabric"].Line(t,{fill:e,stroke:e,strokeWidth:1,selectable:!1,evented:!1,lineCap:"round",lineJoin:"round"})}},u=Math.max(n,i),h=r.gridColor,f=r.separateColor||"#ebebeb";c(o,u,h,f)}t.backgroundCanvas.add(new p["fabric"].Group(a))}t.backgroundCanvas.setBackgroundColor(r.backgroundColor),r.backgroundImage&&p["fabric"].Image.fromURL(r.backgroundImage,(function(e){t.backgroundCanvas.setBackgroundImage(e,t.backgroundCanvas.renderAll.bind(t.backgroundCanvas),{originX:"left",originY:"top",scaleX:t.backgroundCanvas.width/e.width,scaleY:t.backgroundCanvas.height/e.height})})),t.backgroundCanvas.renderAll()},getWrapWidthAndHeight:function(){var t=this,e=document.getElementById(t.fabricCanvas.container),n=e.offsetWidth,i=e.offsetHeight;t.fabricCanvas.setDimensions({width:n,height:i}),t.fabricCanvas.renderAll()},handleZoomItem:function(t){var e=this;switch(t){case"zoomIn":e.fabricCanvas.zoomHandler.zoomIn();break;case"zoomOut":e.fabricCanvas.zoomHandler.zoomOut();break;case"zoomToFit":e.fabricCanvas.zoomHandler.zoomToFit();break;case"zoomToReset":e.fabricCanvas.zoomHandler.zoomToReset();break}setTimeout((function(){g(e.fabricCanvas)}),30)},handleObjectEvent:function(t,e){var n=this;n.panning=!1;var i=["innerDialog","innerData","innerControl"];if(t.customEvents&&t.customEvents.length){var r=t.customEvents.find((function(t){return t.type===e}));r&&(i.includes(r.action)&&n.$emit("dialogEvent",t,r),"componentCall"===r.action&&n.handleComponentCall(r))}},handleComponentCall:function(t){var e=w(t.name,self.fabricCanvas.getObjects()),n=[{name:t.value}];e.setParameter(n)},mergePushToOrigin:function(t){var e=this;t.forEach((function(t){var n=e.originMergeData.find((function(e){return t.TagName===e.TagName}));n&&(n.TagValue=+t.TagValue)}))},handleAnimate:function(t){var e=this,n=[];if(t&&t.length){t.forEach((function(t){x(t.TagName,e.fabricCanvas.getObjects(),n,t)}));var i=function(t){return"undefined"!==typeof t&&null!==t&&""!==t.toString().trim()};n=ae()(n,"id"),n=n.concat(e.expressionData),n.length&&(n.forEach((function(t){if(t.expressionFlag&&t.tag&&t.tag.includes("ETV")){var n=t.tag.replace(/ETV\(.+?\)/g,(function(t){var e=t.match(/\(([^)]*)\)/);return"ETV('".concat(e[1],"')")})),r=I(n);t.data={TagName:t.tag,TagValue:r}}if(t.data){var o=t.customLabel?t.customLabel:"TagValue";switch(t.set("originStart",+t.text||0),t.type){case"ecNumber":var a=Number(t.format),s=t.data[o];"number"===typeof a&&Number(s)&&(s=Number(s).toFixed(+a)),t.set("text",""+s);break;case"ecLabel":var l=t.split,c=l.separate,u=l.position,h=l.field,f=l.breakNumber,d=l.flag,p=t.data[h],g=function(t,e){for(var n=Math.ceil(t.length/e),i="",r=0;r<n;r++){var o=t.substring(r*e,(r+1)*e);i+=o+"\n"}return i};if(p){var m=p;if(d){var v=p.split(c);m=v[u]}var y=g(m,f);t.set({text:""+y})}break;case"ecLabelNumber":var _=t.split,b=_.separate,x=_.position,w=_.field,S=t.data[w],T=eTagFilter(S),O=T.dev,C=O.split(b)[x];C&&t.set("text",""+C);break;case"ecDevName":var M=t.split.breakNumber,A=t.data[o],D=P(A,M);t.set("text",""+D);break;default:t.set("text",""+t.data[o]);break}if(isNaN(t.data[o]))return;if(t.set({fill:t.originFill,stroke:t.originStroke,left:t.originLeft,top:t.originTop,width:t.originWidth,height:t.originHeight,angle:t.originAngle,scaleX:t.originScaleY,scaleY:t.originScaleY,visible:t.originVisible,opacity:t.originOpacity,flipX:t.originFlipX,flipY:t.originFlipY}),t.animeOrigin&&t.animeOrigin.play&&(t.animeOrigin.pause(),t.animeOrigin=null),t.animeHeart&&t.animeHeart.play&&(t.animeHeart.pause(),t.animeHeart=null),t.animeFlash&&t.animeFlash.play&&(t.animeFlash.pause(),t.animeFlash=null),t.animeRotation&&t.animeRotation.play&&(t.animeRotation.pause(),t.animeRotation=null),t.animeForward&&t.animeForward.play&&(t.animeForward.pause(),t.animeForward=null),t.animeReverse&&t.animeReverse.play&&(t.animeReverse.pause(),t.animeReverse=null),t.filters&&t.filters.length&&(t.filters=[],t.applyFilters()),null!=t.animeAudio&&(t.animeAudio.pause(),t.animeAudio=null),t.updateScript){var E=!0,L=I(t.updateScript),k=e.originMergeData;if(E=L(t.data[o],t,k),!E)return}if(t.customAnimates&&t.customAnimates.length){var j=t.data[o],R=null;if(t.customAnimates.forEach((function(t){i(t.minValue)&&i(t.maxValue)&&+t.minValue<=j&&+t.maxValue>=j&&(R=t)})),!R)return;switch(R.actionName){case"translate":t.setAnime("translate",t,R.actionValue);break;case"fill":t.setAnime("fill",t,R.actionValue);break;case"stroke":t.setAnime("stroke",t,R.actionValue);break;case"hide":t.setAnime("hide",t);break;case"show":t.setAnime("show",t);break;case"flipY":t.setAnime("flipY",t);break;case"flipX":t.setAnime("flipX",t);break;case"offsetAngle":t.setAnime("offsetAngle",t,R.actionValue);break;case"heartBeat":t.setAnime("heartBeat",t);break;case"flash":t.setAnime("flash",t);break;case"returnHorizontal":t.setAnime("returnHorizontal",t,R.actionValue,R.actionTime);break;case"returnVertical":t.setAnime("returnVertical",t,R.actionValue,R.actionTime);break;case"rotation":t.setAnime("rotation",t);break;case"forward":t.setAnime("forward",t);break;case"reverse":t.setAnime("reverse",t);break;case"audio":t.setAnime("audio",t);break;case"moveTop":t.setAnime("moveTop",t,R.actionValue,R.actionTime);break;case"moveDown":t.setAnime("moveDown",t,R.actionValue,R.actionTime);break;case"moveLeft":t.setAnime("moveLeft",t,R.actionValue,R.actionTime);break;case"moveRight":t.setAnime("moveRight",t,R.actionValue,R.actionTime);break;case"moveVerticalOrigin":t.setAnime("moveVerticalOrigin",t,R.actionValue,R.actionTime);break;case"moveHorizontalOrigin":t.setAnime("moveHorizontalOrigin",t,R.actionValue,R.actionTime);break}}e.fabricCanvas.renderAll()}})),e.fabricCanvas.renderAll())}},handleZoomIn:function(){var t=this;t.handleZoomItem("zoomIn")},handleZoomOut:function(){var t=this;t.handleZoomItem("zoomOut")},handleFitView:function(){var t=this;t.handleZoomItem("zoomToFit")},handleReset:function(){var t=this;t.handleZoomItem("zoomToReset")}}},de=fe,pe=de;function ge(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}var me=ge(pe,le,ce,!1,null,null,null),ve=me.exports,ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"econDraw_dialog"},[n("div",{staticClass:"econDraw_header"},[n("div",{staticClass:"econDraw_header_title"},[t._v("数据弹窗")]),n("span",{staticClass:"econDraw_header_action",attrs:{title:"关闭"},on:{click:t.closeDialog}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"econDraw_body"},[n("div",{staticClass:"econDraw_class"},[n("ul",{ref:"topScroller",staticClass:"econDraw_datatable_tabs",on:{mousewheel:t.mousewheel}},t._l(t.pointClass,(function(e,i){return n("li",{key:i,staticClass:"econDraw_datatable_tab",class:{active:e.value===t.classId},on:{click:function(n){return t.handleClass(e)}}},[n("div",{staticClass:"econDraw_datatable_tab_item"},[n("span",{staticClass:"econDraw_datatable_tab_dot"}),n("span",[t._v(t._s(e.name))])])])})),0)]),n("div",{staticClass:"econDraw_datatable"},[n("div",{staticClass:"econDraw_datatable_left"},[n("el-table",{staticStyle:{width:"100%"},attrs:{border:"","max-height":"390",data:t.tableData,"cell-class-name":t.getCellClass},on:{"row-click":t.tableRowClick}},t._l(t.tabFormat,(function(e,i){return n("el-table-column",t._b({key:i},"el-table-column",e,!1))})),1)],1),n("div",{staticClass:"econDraw_datatable_right"},[n("div",{staticClass:"econDraw_search"},[n("div",{staticClass:"econDraw_search_item"},[n("div",{staticClass:"econDraw_search_item_label"},[t._v("间隔")]),n("div",{staticClass:"econDraw_search_item_content"},[n("el-button-group",t._l(t.intervalList,(function(e){return n("el-button",{key:e.Id,attrs:{size:"mini",type:t.historyTimeInvals===e.Id?"primary":"default"},on:{click:function(n){return t.intervalChange(e)}}},[t._v(t._s(e.Name)+" ")])})),1)],1)]),n("div",{staticClass:"econDraw_search_item"},[n("div",{staticClass:"econDraw_search_item_label"},[t._v("时间段")]),n("div",{staticClass:"econDraw_search_item_content"},[n("el-date-picker",{staticStyle:{width:"290px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd HH:mm","value-format":"yyyy-MM-dd HH:mm","range-separator":"~","start-placeholder":"开始日期","unlink-panels":"",size:"mini",clearable:!1,"end-placeholder":"结束日期"},on:{change:t.changePointEchart},model:{value:t.dateRange,callback:function(e){t.dateRange=e},expression:"dateRange"}})],1),n("div",{staticClass:"econDraw_search_item_after"},[n("span",{staticClass:"econDraw_search_item_after_label"},[t._v(" 数据数量 ")]),n("el-select",{attrs:{size:"mini",placeholder:"请选择"},on:{change:t.changePointEchart},model:{value:t.historyCount,callback:function(e){t.historyCount=e},expression:"historyCount"}},t._l(t.countOptions,(function(t,e){return n("el-option",{key:"count"+e,attrs:{label:t,value:t}})})),1)],1)])]),n("div",{staticClass:"econDraw_echarts_wrap"},[n("div",{staticClass:"econDraw_echarts",attrs:{id:"econDraw_echarts"}}),t.emptyFlag?n("div",{staticClass:"econDraw_echarts_tip"},[n("span",[t._v(" 暂无数据 ")])]):t._e()])])])]),n("div",{staticClass:"econDraw_footer"},[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.closeDialog}},[t._v("关 闭")])],1)])},_e=[];function be(t,e,n,i,r,o,a){try{var s=t[o](a),l=s.value}catch(c){return void n(c)}s.done?e(l):Promise.resolve(l).then(i,r)}function xe(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var o=t.apply(e,n);function a(t){be(o,i,r,a,s,"next",t)}function s(t){be(o,i,r,a,s,"throw",t)}a(void 0)}))}}n("96cf");var we=n("313e"),Se=n("5a0c"),Te=n.n(Se),Oe={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#1ab394"],grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},legend:{},xAxis:{type:"category",data:[]},yAxis:{type:"value"},series:[]},Ce={name:"EconDialogData",props:["show","dialogTag","pushData"],data:function(){return{resPointData:[],tabFormat:[{prop:"Point",label:"标签",minWidth:80,showOverflowTooltip:!0,align:"center",resizable:!0},{prop:"Des",label:"描述",align:"center",showOverflowTooltip:!0,minWidth:100,resizable:!0},{prop:"TagValue",label:"数值",align:"center",minWidth:90,resizable:!0},{prop:"Unit",label:"单位",align:"center",minWidth:60}],intervalList:[{Name:"样本值",Id:0},{Name:"3秒",Id:3},{Name:"1分钟",Id:60},{Name:"5分钟",Id:300},{Name:"15分钟",Id:900},{Name:"30分钟",Id:1800},{Name:"60分钟",Id:3600}],historyTimeInvals:3,historyTagName:"",dateRange:[Te()().subtract(6,"hour").format("YYYY-MM-DD HH:mm"),Te()().format("YYYY-MM-DD HH:mm")],historyCount:50,countOptions:[20,50,100,150,200,300],emptyFlag:!1,classId:0,pointClass:[],pointFilterList:[],otherFilterList:[],tableData:[]}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("close",t)}}},watch:{pushData:{handler:function(t){this.handlerPoint(t)},deep:!0}},mounted:function(){var t=this;t.initGetPointData()},methods:{initGetPointData:function(){var t=this;return xe(regeneratorRuntime.mark((function e(){var n,i,r,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t,i=n.dialogTag.split("."),r="".concat(i[0],".").concat(i[1]),e.next=5,re.a.get("/static/econJson/econfig.json",null).then((function(t){return t.data}));case 5:o=e.sent,a=[],o.pointClass.forEach((function(t){a.push.apply(a,d(t.points))})),n.pointClass=o.pointClass,n.classId=o.pointClass[0].value,re.a.get("".concat("/ECONApi","/Real/GetTagList"),{params:{factory:"DefaultDB",tagName:r,pageIndex:1,pageSize:100}}).then((function(t){var e=t.data.Data.PageData;if(e.length){var i=[];e.forEach((function(t){var e=t.TagName.split("."),n=e[e.length-1];a.includes(n)||i.push(n),t.Point=n})),n.otherFilterList=i,n.resPointData=e,n.historyTagName=e[0].TagName,n.handleClass(n.pointClass[0]),n.changePointEchart()}}));case 11:case"end":return e.stop()}}),e)})))()},handleClass:function(t){var e=this;e.classId=t.value,e.pointFilterList=t.points,"Other"===t.value&&(e.pointFilterList=e.otherFilterList),e.handleFilterPoint()},handleFilterPoint:function(){var t=this,e=[];t.pointFilterList.forEach((function(n){var i=t.resPointData.filter((function(t){return t.Point===n}))[0];i&&e.push(i)})),t.tableData=e},getCellClass:function(t){var e=t.row,n=(t.column,t.rowIndex,t.columnIndex,this);return e.TagName===n.historyTagName?"econ_row_active":""},tableRowClick:function(t){var e=this;e.historyTagName=t.TagName,e.changePointEchart()},intervalChange:function(t){var e=this;switch(e.historyTimeInvals=t.Id,e.historyTimeInvals){case 3:e.dateRange=[Te()().subtract(18,"minute").format("YYYY-MM-DD HH:mm"),Te()().format("YYYY-MM-DD HH:mm")];break;case 60:case 300:case 900:case 1800:e.dateRange=[Te()().subtract(6,"hour").format("YYYY-MM-DD HH:mm"),Te()().format("YYYY-MM-DD HH:mm")];break;case 3600:e.dateRange=[Te()().subtract(2,"day").format("YYYY-MM-DD HH:mm"),Te()().format("YYYY-MM-DD HH:mm")];break;case 86400:e.dateRange=[Te()().subtract(7,"day").format("YYYY-MM-DD HH:mm"),Te()().format("YYYY-MM-DD HH:mm")];break}e.changePointEchart()},handlerPoint:function(t){var e=this;e.show&&t.forEach((function(t){e.resPointData.forEach((function(e){t.TagName===e.TagName&&(e.TagValue=t.TagValue)}))}))},changePointEchart:function(){var t=this;setTimeout((function(){t.myChart=we["a"](document.getElementById("econDraw_echarts"));var e=Object.assign({},Oe),n={factory:"DefaultDB",tagName:t.historyTagName,begTime:t.dateRange[0],endTime:t.dateRange[1],interval:t.historyTimeInvals,count:t.historyCount,IsSum:!1};re.a.get("".concat("/ECONApi","/Real/ScopeHisVal"),{params:n}).then((function(n){var i=n.data.Data,r=[],o=[];t.emptyFlag=!0,i&&i.length&&i[0].Data&&i[0].Data.length&&(t.emptyFlag=!1,i[0].Data.forEach((function(t){r.push(t.RecordTime)})),i.forEach((function(t){var e=t.Data.map((function(t){return+t.Value}));o.push({name:t.TagName,type:"line",smooth:!0,symbol:"none",data:e,areaStyle:{opacity:.2}})}))),e.xAxis.data=r,e.series=o,t.myChart.setOption(e,{replaceMerge:["xAxis","yAxis","series"]})}))}),30)},mousewheel:function(t){var e=this,n=t.wheelDelta>0,i=e.$refs.topScroller.scrollLeft,r=n?i-40:i+40;e.$refs.topScroller.scrollLeft=r},closeDialog:function(){var t=this;t.visible=!1}}},Me=Ce,Ae=Me,De=ge(Ae,ye,_e,!1,null,null,null),Ee=De.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"econDraw_dialog"},[n("div",{staticClass:"econDraw_header"},[n("div",{staticClass:"econDraw_header_title",on:{click:t.handleShowControl}},[t._v("控制下发")]),n("span",{staticClass:"econDraw_header_action",attrs:{title:"关闭"},on:{click:t.closeDialog}},[n("i",{staticClass:"el-icon-close"})])]),n("div",{staticClass:"econDraw_body econmini"},[n("div",{staticClass:"econDraw_form"},["switch"==t.editForm.status?[t.controlNumber>5?[n("div",{staticClass:"econDraw_form_item"},[n("div",{staticClass:"econDraw_form_item_label"},[t._v("下发标签")]),n("div",{staticClass:"econDraw_form_item_content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.name,expression:"editForm.name"}],staticClass:"econDraw_form_item_input",attrs:{type:"text"},domProps:{value:t.editForm.name},on:{input:function(e){e.target.composing||t.$set(t.editForm,"name",e.target.value)}}})])]),n("div",{staticClass:"econDraw_form_item"},[n("div",{staticClass:"econDraw_form_item_label"},[t._v("下发值")]),n("div",{staticClass:"econDraw_form_item_content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.value,expression:"editForm.value"}],staticClass:"econDraw_form_item_input",attrs:{type:"text"},domProps:{value:t.editForm.value},on:{input:function(e){e.target.composing||t.$set(t.editForm,"value",e.target.value)}}})])])]:n("div",{staticClass:"econDraw_form_item"},[n("span",{staticClass:"econDraw_form_item_tip"},[t._v(" 确定控制下发? ")])])]:[t.controlNumber>5?[n("div",{staticClass:"econDraw_form_item"},[n("div",{staticClass:"econDraw_form_item_label"},[t._v("下发标签")]),n("div",{staticClass:"econDraw_form_item_content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.name,expression:"editForm.name"}],staticClass:"econDraw_form_item_input",attrs:{type:"text"},domProps:{value:t.editForm.name},on:{input:function(e){e.target.composing||t.$set(t.editForm,"name",e.target.value)}}})])]),n("div",{staticClass:"econDraw_form_item"},[n("div",{staticClass:"econDraw_form_item_label"},[t._v("下发值")]),n("div",{staticClass:"econDraw_form_item_content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.value,expression:"editForm.value"}],staticClass:"econDraw_form_item_input",attrs:{type:"text"},domProps:{value:t.editForm.value},on:{input:function(e){e.target.composing||t.$set(t.editForm,"value",e.target.value)}}})])])]:n("div",{staticClass:"econDraw_form_item"},[n("div",{staticClass:"econDraw_form_item_label"},[t._v("设定值")]),n("div",{staticClass:"econDraw_form_item_content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.editForm.value,expression:"editForm.value"}],staticClass:"econDraw_form_item_input",attrs:{type:"text"},domProps:{value:t.editForm.value},on:{input:function(e){e.target.composing||t.$set(t.editForm,"value",e.target.value)}}})])])]],2)]),n("div",{staticClass:"econDraw_footer"},[n("el-button",{attrs:{size:"mini"},on:{click:t.closeDialog}},[t._v("关 闭")]),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.confirmControl}},[t._v("确 定")])],1)])},Pe=[],Le={name:"EconDialogControl",props:["show","dialogTag","form"],data:function(){return{editForm:{},controlNumber:1}},computed:{visible:{get:function(){return this.show},set:function(t){this.$emit("close",t)}}},mounted:function(){this.editForm=Object.assign({},this.form)},methods:{handleShowControl:function(){this.controlNumber++,this.controlNumber>10&&(this.controlNumber=1)},closeDialog:function(){var t=this;t.visible=!1},confirmControl:function(){var t=this;t.errorType=!1,""!==t.editForm.name?""!==t.editForm.value?re()({url:"".concat("/ECONApi","/Real/Rdb4Ctrl"),method:"POST",data:{factory:"DefaultDB",TagName:t.editForm.name,TagVal:t.editForm.value}}).then((function(e){var n=e.data;1e3===n.Result?(t.$message({showClose:!0,message:"控制下发成功",type:"success"}),t.closeDialog()):t.$message({showClose:!0,message:n.Message,type:"error"})})):t.$message({showClose:!0,message:"下发值不能为空",type:"error"}):t.$message({showClose:!0,message:"下发标签不能为空",type:"error"})}}},ke=Le,je=ke,Re=ge(je,Ie,Pe,!1,null,null,null),Ne=Re.exports,Be=new Map;window.econTagMap=Be,window.econdrawDebugger=!1;var Fe={name:"econDraw",version:se.version,emits:["event","getComponents"],props:{graph:String,originData:Array,pushData:Array,control:{type:Object,default:function(){return{show:!0,grid:"",background:"#fff",color:"#666",position:"bottom-right"}}}},components:{EconDialogPage:ve,EconDialogData:Ee,EconDialogControl:Ne},data:function(){return{fabricCanvas:null,backgroundCanvas:null,audioArray:[],version:se.version,econVersion:"0.4.9",grabFlag:!1,panning:!1,customConfigs:["id","tag","data","tagData","customEvents"],controlVisible:!1,controlForm:{},pageVisible:!1,pageTitle:"标题",pageFlag:!1,pageData:null,pageTag:"",iframeVisible:!1,iframeTitle:"标题",iframeSrc:null,isFullScreen:!1,originMergeData:[],dialogDataVisible:!1,debuggerTooltip:{left:0,top:0,show:!1,labelData:{}},tooltip:{left:0,top:0,show:!1,rawObj:{},labelData:[]},expressionData:[],fabricObjectList:[]}},watch:{originData:{handler:function(t){this.initEconTagMap(t),this.originMergeData=JSON.parse(JSON.stringify(t)),this.handleRunAnimation(t)}},pushData:{handler:function(t){this.initEconTagMap(t),this.mergePushToOrigin(t),this.handleRunAnimation(t)},deep:!0}},mounted:function(){var t=this;t.initCanvas(),t.setCanvasbackground(),window.onresize=function(){t.getWrapWidthAndHeight(),t.setCanvasbackground()}},beforeDestroy:function(){var t=this;t.audioArray.forEach((function(t){t.pause(),t=null})),window.onresize=null},methods:{initCanvas:function(){var t=this;t.fabricCanvas=new p["fabric"].Canvas("econDrawCanvas",{isDrawingMode:!1,selection:!1,enableRetinaScaling:!0,container:"econDrawContent",backgroundContainer:"econDrawBackground",hoverCursor:"pointer",zoomHandler:""});var e={};t.fabricCanvas.on({"mouse:down":function(n){n.e.type.includes("mouse")?(t.panning=!0,e=n.pointer):(e=n.pointer,t.panning=!0)},"mouse:up":function(n){if(n.e.type.includes("mouse")){t.panning=!1;var i=n.pointer.x-e.x,r=n.pointer.y-e.y;if((Math.abs(i)<5||Math.abs(r)<5)&&n.target&&n.target.customEvents&&n.target.customEvents.length){var o=n.target.toJSON(t.customConfigs);t.handleObjectEvent(o,"click")}}else{var a=n.pointer.x-e.x,s=n.pointer.y-e.y;if(Math.abs(a)>5||Math.abs(s)>5){var l=new p["fabric"].Point(a,s);t.fabricCanvas.relativePan(l),g(t.fabricCanvas)}else if(n.target&&n.target.customEvents&&n.target.customEvents.length){var c=n.target.toJSON(t.customConfigs);t.handleObjectEvent(c,"click")}}},"mouse:move":function(e){if(e.e.type.includes("mouse")&&t.panning&&e&&e.e){var n=new p["fabric"].Point(e.e.movementX,e.e.movementY);t.fabricCanvas.relativePan(n),g(t.fabricCanvas)}e.target&&(econdrawDebugger?t.debuggerTooltip.show&&(t.debuggerTooltip.left=e.e.offsetX+15,t.debuggerTooltip.top=e.e.offsetY+0):e.target.tooltip&&e.target.tooltip.flag&&t.tooltip.show&&(t.tooltip.left=e.e.offsetX+15,t.tooltip.top=e.e.offsetY+0))},"mouse:over":function(e){if(e.target){var n=e.target.toJSON(t.customConfigs);if(t.handleObjectEvent(n,"mouserover"),econdrawDebugger)console.log("debugger_target",e.target),console.log("debugger_data",t.originMergeData),t.debuggerTooltip.show=!0,t.debuggerTooltip.left=e.e.offsetX+15,t.debuggerTooltip.top=e.e.offsetY+0,t.debuggerTooltip.labelData=[{name:"Type",value:e.target.type},{name:"ID",value:e.target.id},{name:"Tag",value:e.target.tag},{name:"Text",value:e.target.text},{name:"Data",value:e.target.data}];else if(e.target.tooltip&&e.target.tooltip.flag){t.tooltip.show=!0,t.tooltip.left=e.e.offsetX+15,t.tooltip.top=e.e.offsetY+0;var i=e.target.tooltip.list||[];i.forEach((function(t){t.value=Be.get(t.prop).TagValue})),t.tooltip.labelData=i}}},"mouse:out":function(e){if(econdrawDebugger?t.debuggerTooltip.show=!1:t.tooltip.show=!1,e.target){var n=e.target.toJSON(t.customConfigs);t.handleObjectEvent(n,"mouseout")}},"mouse:dblclick":function(e){if(e.target){var n=e.target.toJSON(t.customConfigs);t.handleObjectEvent(n,"dblclick")}},"mouse:wheel":function(e){var n=e.e;n.preventDefault(),n.stopPropagation();var i=new p["fabric"].Point(e.pointer.x,e.pointer.y),r=t.fabricCanvas.getZoom(),o=e.e.deltaY;o>0?r-=.1:r+=.1,t.fabricCanvas.zoomHandler.zoomToPoint(i,r),g(t.fabricCanvas)}}),t.fabricCanvas.zoomHandler=new M(t.fabricCanvas),t.getWrapWidthAndHeight();var n=function e(n){n.expressionFlag&&t.expressionData.push(n),["ecLabel","ecLabelNumber","ecDevName"].includes(n.type)&&"left"===n.textAlign&&n.set({originX:"left",originY:"top",left:n.left-n.width/2,top:n.top-n.height/2}).setCoords(),n.set({editable:!1,selectable:!1,originFill:n.fill,originStroke:n.stroke,originOpacity:n.opacity,originLeft:n.left,originTop:n.top,originWidth:n.width,originHeight:n.height,originAngle:n.angle,originScaleX:n.scaleX,originScaleY:n.scaleY,originVisible:n.visible,originFlipX:n.flipX,originFlipY:n.flipY,originStart:0,animeAudio:null,stopAnime:function(t){switch(t){case"returnHorizontal":case"returnVertical":n.animeOrigin&&n.animeOrigin.play&&n.animeOrigin.pause();break;case"heartBeat":n.animeHeart&&n.animeHeart.play&&n.animeHeart.pause();break;case"flash":n.animeFlash&&n.animeFlash.play&&n.animeFlash.pause();break;case"rotation":n.animeRotation&&n.animeRotation.play&&n.animeRotation.pause();break;case"forward":n.animeForward&&n.animeForward.play&&n.animeForward.pause();break;case"reverse":n.animeReverse&&n.animeReverse.play&&n.animeReverse.pause();break;case"audio":null!=n.animeAudio&&(n.animeAudio.pause(),n.animeAudio=null);break}},stopAllAnime:function(){var t=["returnHorizontal","returnVertical","heartBeat","flash","rotation","forward","reverse","audio"];for(var e in t)n.stopAnime(e)},setAnime:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;switch(e){case"translate":n.set({visible:!0,text:""+i});break;case"fill":n.set({visible:!0,fill:i}),"Svg"===n.customType&&n._objects&&n._objects.length&&n._objects.forEach((function(t){t.set({fill:i})})),"Image"===n.customType&&(n.filters=[new p["fabric"].Image.filters.BlendColor({color:i,mode:"tint",alpha:.6})],n.applyFilters());break;case"stroke":n.set({visible:!0,stroke:i}),"Svg"===n.customType&&n._objects&&n._objects.length&&n._objects.forEach((function(t){t.set({stroke:i,originStroke:1})}));break;case"show":n.set("visible",!0),k(n);break;case"hide":n.set("visible",!1),k(n);break;case"flipX":n.set({visible:!0,flipX:!0});break;case"flipY":n.set({visible:!0,flipY:!0});break;case"offsetAngle":n.set({visible:!0,angle:i});break;case"heartBeat":n.set({visible:!0,animeHeart:ne({targets:n,loop:!0,autoplay:!0,scaleX:1.5*n.scaleX,scaleY:1.5*n.scaleY,duration:r,direction:"alternate",easing:"linear",begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"flash":n.set({visible:!0,animeFlash:ne({targets:n,loop:!0,autoplay:!0,duration:800,direction:"normal",easing:"easeInOutSine",opacity:0,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.renderAll()}})});break;case"rotation":n.set({visible:!0,animeRotation:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.angle+5;+n.angle>=360&&n.set("angle",0),n.set("angle",+i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"forward":n.set({visible:!0,animeForward:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.strokeDashOffset;i-=1,0===i&&(i=900),n.set("strokeDashOffset",i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"reverse":n.set({visible:!0,animeReverse:ne({targets:n,delay:0,loop:!0,autoplay:!0,duration:2e3,begin:function(){t.fabricCanvas.requestRenderAll()},update:function(e){var i=n.strokeDashOffset;i+=1,900===i&&(i=0),n.set("strokeDashOffset",i),n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"returnHorizontal":n.set({visible:!0,animeOrigin:ne({targets:n,loop:!0,autoplay:!0,duration:r,direction:"alternate",easing:"linear",left:Number(n.left+i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"returnVertical":n.set({visible:!0,animeOrigin:ne({targets:n,loop:!0,autoplay:!0,duration:r,direction:"alternate",easing:"linear",top:Number(n.top+i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveTop":var o=Number(n.top+(n.originStart-+n.text)*+i),a=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originTop:o,animeOrigin:ne({targets:n,autoplay:!0,duration:a,direction:"normal",easing:"linear",top:o,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveDown":var s=Number(n.top+(+n.text-n.originStart)*+i),l=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originTop:s,animeOrigin:ne({targets:n,autoplay:!0,duration:l,direction:"normal",easing:"linear",top:s,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveLeft":var c=Number(n.left+(n.originStart-+n.text)*+i),u=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originLeft:c,animeOrigin:ne({targets:n,autoplay:!0,duration:u,direction:"normal",easing:"linear",left:c,begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveRight":var h=Number(n.left+(+n.text-n.originStart)*+i),f=Math.abs(n.originStart-+n.text)*r;n.set({visible:!0,originLeft:h,animeOrigin:ne({targets:n,autoplay:!0,left:h,duration:f,direction:"normal",easing:"linear",begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"audio":n.animeAudio=new Audio(he.a),t.audioArray.push(n.animeAudio),n.animeAudio.play();break;case"moveVerticalOrigin":n.set({visible:!0,animeOrigin:ne({targets:n,autoplay:!0,duration:r,direction:"normal",easing:"linear",top:n.top+Number(i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break;case"moveHorizontalOrigin":n.set({visible:!0,animeOrigin:ne({targets:n,autoplay:!0,duration:r,direction:"normal",easing:"linear",left:n.left+Number(i),begin:function(){t.fabricCanvas.renderAll()},update:function(e){n.setCoords(),t.fabricCanvas.requestRenderAll()}})});break}}}),"group"===n.customType&&n._objects&&n._objects.length&&n._objects.forEach((function(t){e(t)}))};t.fabricCanvas.loadFromJSON(t.graph,(function(){t.initGetComponents(),t.fabricCanvas.renderAll.bind(t.fabricCanvas),t.fabricCanvas.zoomHandler.zoomToFit()}),(function(t,e){n(e)}))},setCanvasbackground:function(){var t=this,e=document.getElementById(t.fabricCanvas.container),n=e.offsetWidth,i=e.offsetHeight;t.backgroundCanvas=new p["fabric"].StaticCanvas(t.fabricCanvas.backgroundContainer,{width:n,height:i});var r=JSON.parse(t.graph).setting;if(r.gridFlag){var o=+r.gridSize?+r.gridSize:20,a=[];if(r.gridType&&"dot"===r.gridType)for(var s=Math.ceil(n/o);s--;)for(var l=Math.ceil(i/o);l--;)a.push(new p["fabric"].Circle({left:o*s,top:o*l,radius:r.gridLine,fill:r.gridColor}));else{var c=function(t,e,n,i){a.push(s([0,0,e,0],i)),a.push(s([e,0,e,e],i));for(var r=parseInt(e/t)+1,o=0;o<r;o++)a.push(s([o*t,0,o*t,e],o%5===0?i:n)),0!==o&&a.push(s([0,o*t,e,o*t],o%5===0?i:n));function s(t,e){return new p["fabric"].Line(t,{fill:e,stroke:e,strokeWidth:1,selectable:!1,evented:!1,lineCap:"round",lineJoin:"round"})}},u=Math.max(n,i),h=r.gridColor,f=r.separateColor||"#ebebeb";c(o,u,h,f)}t.backgroundCanvas.add(new p["fabric"].Group(a))}t.backgroundCanvas.setBackgroundColor(r.backgroundColor),r.backgroundImage&&p["fabric"].Image.fromURL(r.backgroundImage,(function(e){t.backgroundCanvas.setBackgroundImage(e,t.backgroundCanvas.renderAll.bind(t.backgroundCanvas),{originX:"left",originY:"top",scaleX:t.backgroundCanvas.width/e.width,scaleY:t.backgroundCanvas.height/e.height})})),t.backgroundCanvas.renderAll()},getWrapWidthAndHeight:function(){var t=this,e=document.getElementById(t.fabricCanvas.container),n=e.offsetWidth,i=e.offsetHeight;t.fabricCanvas.setDimensions({width:n,height:i}),t.fabricCanvas.renderAll()},handleResize:function(){var t=this;t.getWrapWidthAndHeight(),t.setCanvasbackground()},handleZoomItem:function(t){var e=this;switch(t){case"zoomIn":e.fabricCanvas.zoomHandler.zoomIn();break;case"zoomOut":e.fabricCanvas.zoomHandler.zoomOut();break;case"zoomToFit":e.fabricCanvas.zoomHandler.zoomToFit();break;case"zoomToReset":e.fabricCanvas.zoomHandler.zoomToReset();break}setTimeout((function(){g(e.fabricCanvas)}),30)},handleAnimate:function(t){var e=this,n=[];if(t&&t.length){t.forEach((function(t){x(t.TagName,e.fabricCanvas.getObjects(),n,t)}));var i=function(t){return"undefined"!==typeof t&&null!==t&&""!==t.toString().trim()};n=ae()(n,"id"),n=n.concat(e.expressionData),n.length&&(n.forEach((function(t){if(t.expressionFlag&&t.tag&&t.tag.includes("ETV")){var n=t.tag.replace(/ETV\(.+?\)/g,(function(t){var e=t.match(/\(([^)]*)\)/);return"ETV('".concat(e[1],"')")})),r=I(n);t.data={TagName:t.tag,TagValue:r}}if(t.data){var o=t.customLabel?t.customLabel:"TagValue";switch(t.set("originStart",+t.text||0),t.type){case"ecNumber":var a=Number(t.format),s=t.data[o];"number"===typeof a&&Number(s)&&(s=Number(s).toFixed(+a)),t.set("text",""+s);break;case"ecLabel":var l=t.split,c=l.separate,u=l.position,h=l.field,f=l.breakNumber,d=l.flag,p=t.data[h];if(p){var g=p;if(d){var m=p.split(c);g=m[u]}var v=P(g,f);t.set({text:""+v})}break;case"ecLabelNumber":var y=t.split,_=y.separate,b=y.position,x=y.field,w=t.data[x],S=eTagFilter(w),T=S.dev,O=T.split(_)[b];O&&t.set("text",""+O);break;case"ecDevName":var C=t.split.breakNumber,M=t.data[o];if(M){var A=P(M,C);t.set("text",""+A)}break;default:t.set("text",""+t.data[o]);break}if(isNaN(t.data[o]))return;if(t.set({fill:t.originFill,stroke:t.originStroke,left:t.originLeft,top:t.originTop,width:t.originWidth,height:t.originHeight,angle:t.originAngle,scaleX:t.originScaleX,scaleY:t.originScaleY,visible:t.originVisible,opacity:t.originOpacity,flipX:t.originFlipX,flipY:t.originFlipY}),t.animeOrigin&&t.animeOrigin.play&&(t.animeOrigin.pause(),t.animeOrigin=null),t.animeHeart&&t.animeHeart.play&&(t.animeHeart.pause(),t.animeHeart=null),t.animeFlash&&t.animeFlash.play&&(t.animeFlash.pause(),t.animeFlash=null),t.animeRotation&&t.animeRotation.play&&(t.animeRotation.pause(),t.animeRotation=null),t.animeForward&&t.animeForward.play&&(t.animeForward.pause(),t.animeForward=null),t.animeReverse&&t.animeReverse.play&&(t.animeReverse.pause(),t.animeReverse=null),t.filters&&t.filters.length&&(t.filters=[],t.applyFilters()),null!=t.animeAudio&&(t.animeAudio.pause(),t.animeAudio=null),k(t),t.updateScript){var D=!0,E=I(t.updateScript),L=e.originMergeData,j=e.fabricCanvas.getObjects();if(D=E(t.data[o],t,L,j),!D)return}if(t.customAnimates&&t.customAnimates.length){var R=+t.data[o];t.customAnimates.forEach((function(e){var n=null;if(i(e.minValue)&&i(e.maxValue)&&+e.minValue<=R&&+e.maxValue>=R&&(n=e),n)switch(n.actionName){case"translate":t.setAnime("translate",t,n.actionValue);break;case"fill":t.setAnime("fill",t,n.actionValue);break;case"stroke":t.setAnime("stroke",t,n.actionValue);break;case"hide":t.setAnime("hide",t);break;case"show":t.setAnime("show",t);break;case"flipY":t.setAnime("flipY",t);break;case"flipX":t.setAnime("flipX",t);break;case"offsetAngle":t.setAnime("offsetAngle",t,n.actionValue);break;case"heartBeat":t.setAnime("heartBeat",t);break;case"flash":t.setAnime("flash",t);break;case"returnHorizontal":t.setAnime("returnHorizontal",t,n.actionValue,n.actionTime);break;case"returnVertical":t.setAnime("returnVertical",t,n.actionValue,n.actionTime);break;case"rotation":t.setAnime("rotation",t);break;case"forward":t.setAnime("forward",t);break;case"reverse":t.setAnime("reverse",t);break;case"audio":t.setAnime("audio",t);break;case"moveTop":t.setAnime("moveTop",t,n.actionValue,n.actionTime);break;case"moveDown":t.setAnime("moveDown",t,n.actionValue,n.actionTime);break;case"moveLeft":t.setAnime("moveLeft",t,n.actionValue,n.actionTime);break;case"moveRight":t.setAnime("moveRight",t,n.actionValue,n.actionTime);break;case"moveVerticalOrigin":t.setAnime("moveVerticalOrigin",t,n.actionValue,n.actionTime);break;case"moveHorizontalOrigin":t.setAnime("moveHorizontalOrigin",t,n.actionValue,n.actionTime);break}}))}}})),e.fabricCanvas.renderAll())}},handleRunAnimation:function(){var t=this,e=t.fabricObjectList,n=function(t){return"undefined"!==typeof t&&null!==t&&""!==t.toString().trim()};e.forEach((function(e){if(e.data=Be.get(e.tag),e.expressionFlag&&e.tag&&e.tag.includes("ETV")){var i=e.tag.replace(/ETV\(.+?\)/g,(function(t){var e=t.match(/\(([^)]*)\)/);return"ETV('".concat(e[1],"')")})),r=I(i);e.data={TagName:e.tag,TagValue:r}}if(e.data){var o=e.customLabel?e.customLabel:"TagValue";switch(e.set("originStart",+e.text||0),e.type){case"ecNumber":var a=Number(e.format),s=e.data[o];"number"===typeof a&&Number(s)&&(s=Number(s).toFixed(+a)),e.set("text",""+s);break;case"ecLabel":var l=e.split,c=l.separate,u=l.position,h=l.field,f=l.breakNumber,d=l.flag,p=e.data[h];if(p){var g=p;if(d){var m=p.split(c);g=m[u]}var v=P(g,f);e.set({text:""+v})}break;case"ecLabelNumber":var y=e.split,_=y.separate,b=y.position,x=y.field,w=e.data[x],S=eTagFilter(w),T=S.dev,O=T.split(_)[b];O&&e.set("text",""+O);break;case"ecDevName":var C=e.split.breakNumber,M=e.data[o];if(M){var A=P(M,C);e.set("text",""+A)}break;default:e.set("text",""+e.data[o]);break}if(isNaN(e.data[o]))return;if(e.set({fill:e.originFill,stroke:e.originStroke,left:e.originLeft,top:e.originTop,width:e.originWidth,height:e.originHeight,angle:e.originAngle,scaleX:e.originScaleX,scaleY:e.originScaleY,visible:e.originVisible,opacity:e.originOpacity,flipX:e.originFlipX,flipY:e.originFlipY}),e.animeOrigin&&e.animeOrigin.play&&(e.animeOrigin.pause(),e.animeOrigin=null),e.animeHeart&&e.animeHeart.play&&(e.animeHeart.pause(),e.animeHeart=null),e.animeFlash&&e.animeFlash.play&&(e.animeFlash.pause(),e.animeFlash=null),e.animeRotation&&e.animeRotation.play&&(e.animeRotation.pause(),e.animeRotation=null),e.animeForward&&e.animeForward.play&&(e.animeForward.pause(),e.animeForward=null),e.animeReverse&&e.animeReverse.play&&(e.animeReverse.pause(),e.animeReverse=null),e.filters&&e.filters.length&&(e.filters=[],e.applyFilters()),null!=e.animeAudio&&(e.animeAudio.pause(),e.animeAudio=null),k(e),e.updateScript&&"undefined"!==e.updateScript){var D=!0,E=I(e.updateScript),L=t.originMergeData,j=t.fabricCanvas.getObjects();if(D=E(e.data[o],e,L,j),!D)return}if(e.customAnimates&&e.customAnimates.length){var R=+e.data[o];e.customAnimates.forEach((function(t){var i=null;if(n(t.minValue)&&n(t.maxValue)&&+t.minValue<=R&&+t.maxValue>=R&&(i=t),i)switch(i.actionName){case"translate":e.setAnime("translate",e,i.actionValue);break;case"fill":e.setAnime("fill",e,i.actionValue);break;case"stroke":e.setAnime("stroke",e,i.actionValue);break;case"hide":e.setAnime("hide",e);break;case"show":e.setAnime("show",e);break;case"flipY":e.setAnime("flipY",e);break;case"flipX":e.setAnime("flipX",e);break;case"offsetAngle":e.setAnime("offsetAngle",e,i.actionValue);break;case"heartBeat":e.setAnime("heartBeat",e);break;case"flash":e.setAnime("flash",e);break;case"returnHorizontal":e.setAnime("returnHorizontal",e,i.actionValue,i.actionTime);break;case"returnVertical":e.setAnime("returnVertical",e,i.actionValue,i.actionTime);break;case"rotation":e.setAnime("rotation",e);break;case"forward":e.setAnime("forward",e);break;case"reverse":e.setAnime("reverse",e);break;case"audio":e.setAnime("audio",e);break;case"moveTop":e.setAnime("moveTop",e,i.actionValue,i.actionTime);break;case"moveDown":e.setAnime("moveDown",e,i.actionValue,i.actionTime);break;case"moveLeft":e.setAnime("moveLeft",e,i.actionValue,i.actionTime);break;case"moveRight":e.setAnime("moveRight",e,i.actionValue,i.actionTime);break;case"moveVerticalOrigin":e.setAnime("moveVerticalOrigin",e,i.actionValue,i.actionTime);break;case"moveHorizontalOrigin":e.setAnime("moveHorizontalOrigin",e,i.actionValue,i.actionTime);break}}))}}})),t.fabricCanvas.renderAll()},handleClickMod:function(){var t=this;t.grabFlag=!1,t.fabricCanvas.defaultCursor="default",t.fabricCanvas.hoverCursor="pointer",t.fabricCanvas.getObjects().forEach((function(t){t.evented=!0})),t.fabricCanvas.renderAll()},handleGrabMod:function(){var t=this;t.grabFlag=!0,t.fabricCanvas.defaultCursor="grab",t.fabricCanvas.hoverCursor="grab",t.fabricCanvas.getObjects().forEach((function(t){t.evented=!1})),t.fabricCanvas.renderAll()},handleZoomIn:function(){var t=this;t.handleZoomItem("zoomIn")},handleZoomOut:function(){var t=this;t.handleZoomItem("zoomOut")},handleFitView:function(){var t=this;t.handleZoomItem("zoomToFit")},handleReset:function(){var t=this;t.handleZoomItem("zoomToReset")},handleRender:function(){var t=this;t.fabricCanvas.renderAll()},handleFullScreen:function(){var t=this;if(t.isFullScreen)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen();else{var e=document.getElementById(t.fabricCanvas.container);e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}t.isFullScreen=!t.isFullScreen,setTimeout((function(){t.handleZoomItem("zoomToFit")}),30)},handleExpression:function(t){var e=this;if(t.length){var n="";t.forEach((function(e,i){i<t.length-1?n+=e+";":n+=e})),re()({url:"".concat("/ECONApi","/Real/WriteTagFormula"),method:"POST",data:{factory:"DefaultDB",tags:n,IsClear:!0}}).then((function(t){})),re()({url:"".concat("/ECONApi","/Real/GetTagFormulaList"),method:"POST",data:{factory:"DefaultDB",tags:n}}).then((function(t){var n=t.data.Data;if(n&&n.length){var i=n.map((function(t){return{TagName:t.Formula,TagValue:t.Val}}));e.handleAnimate(i)}}))}},handleObjectEvent:function(t,e){var n=this;n.panning=!1;var i=["innerData","innerDialog","innerControl","innerPage","pageDialog","InnerIframe","componentCall"];if(t.customEvents&&t.customEvents.length){var r=t.customEvents.find((function(t){return t.type==e}));r&&(i.includes(r.action)?n.handleInnerdispose(t,r):n.handleOutlineDispose(t,r))}},dialogEvent:function(t,e){var n=this;n.handleInnerdispose(t,e)},handleVision:function(){var t=this;return new Promise((function(e,n){var i=L(t.version,t.econVersion);e(i)}))},handleInnerdispose:function(t,e){var n=this;switch(e.action){case"innerData":case"innerDialog":n.handleDataDialog(e);break;case"innerControl":n.handleControlDialog(e);break;case"innerPage":case"pageDialog":n.handlePageDialog(e);break;case"InnerIframe":case"iframeDialog":n.handleIframeDialog(e);break;case"componentCall":n.handleComponentCall(e);break}},handleOutlineDispose:function(t,e){var n=this,i={};if("eventScript"===e.action){var r=I(e.eventScript),o=n.originData&&n.originData.length?JSON.parse(JSON.stringify(n.originData)):[],a=n.pushData&&n.pushData.length?JSON.parse(JSON.stringify(n.pushData)):[],s=[].concat(d(o),d(a)),l=n.fabricCanvas.getObjects();i=r(t.data,t,s,l)}n.$emit("event",t,e,i)},handleDataDialog:function(t){var e=this,n=t.value||t.status;t.innerDataParams&&(n=t.innerDataParams.params),e.pageTag=n,e.dialogDataVisible=!0},closeDialogData:function(){var t=this;t.dialogDataVisible=!1},initEconTagMap:function(t){var e=this;t.forEach((function(t){e.setEconTagMap(t)}))},setEconTagMap:function(t){Be.set(t.TagName,t)},mergePushToOrigin:function(t){var e=this;t.forEach((function(t){var n=e.originMergeData.find((function(e){return t.TagName===e.TagName}));n&&(n.TagValue=+t.TagValue)}))},handleControlDialog:function(t){var e=this,n={name:t.name,value:t.value,status:t.status};t.innerControlParams&&(n.name=t.innerControlParams.params,n.value=t.innerControlParams.paramsValue,n.status=t.innerControlParams.paramsType),e.controlForm=Object.assign({},n),e.controlVisible=!0,e.controlNumber=1},closeControl:function(){var t=this;t.controlVisible=!1},handleIframeDialog:function(t){var e=this,n=t.name||"弹窗标题",i=t.value;t.InnerIframeParams&&(n=t.InnerIframeParams.title,i=t.InnerIframeParams.url),e.iframeTitle=n,e.iframeSrc=i,e.iframeVisible=!0},closeIframeDialog:function(){var t=this;t.iframeVisible=!1},handlePageDialog:function(t){var e=this,n=t.value,i=t.name||"弹窗标题",r=t.status;t.innerPageParams&&(n=t.innerPageParams.url,i=t.innerPageParams.title,r=t.innerPageParams.params),e.pageTitle=i,e.pageTag=r,e.pageVisible=!0,e.initStaticPageJson(n)},initStaticPageJson:function(t){var e=this;e.pageFlag=!1,re.a.get("/static".concat(t,".json"),null).then((function(t){var n=JSON.stringify(t.data);e.pageData=n,e.pageFlag=!0,setTimeout((function(){e.$refs.EconDialogPage.handleFitView()}),100)}))},closePageDialog:function(){var t=this;t.pageVisible=!1},handleComponentCall:function(t){var e=this,n=t.name,i=t.value;t.componentCallParams&&(n=t.componentCallParams.componentId,i=t.componentCallParams.params);var r=w(n,e.fabricCanvas.getObjects());if(r){var o=[{name:i}];r.setParameter(o)}},initGetComponents:function(){var t=this,e=[],n=t.fabricCanvas.getObjects(),i=function(t,e){var n=function t(e,n){e.forEach((function(e){n.push(e),"group"===e.customType&&e._objects&&e._objects.length&&t(e._objects,n)}))};n(t,e)};i(n,e),t.fabricObjectList=e,t.$emit("getComponents",n,t.fabricCanvas,p["fabric"])}}},ze=Fe,Ve=ze,He=(n("feae"),ge(Ve,a,s,!1,null,null,null)),Ge=He.exports;e["default"]=Ge},fb6a:function(t,e,n){"use strict";var i=n("23e7"),r=n("861d"),o=n("e8b5"),a=n("23cb"),s=n("50c4"),l=n("fc6a"),c=n("8418"),u=n("b622"),h=n("1dde"),f=h("slice"),d=u("species"),p=[].slice,g=Math.max;i({target:"Array",proto:!0,forced:!f},{slice:function(t,e){var n,i,u,h=l(this),f=s(h.length),m=a(t,f),v=a(void 0===e?f:e,f);if(o(h)&&(n=h.constructor,"function"!=typeof n||n!==Array&&!o(n.prototype)?r(n)&&(n=n[d],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return p.call(h,m,v);for(i=new(void 0===n?Array:n)(g(v-m,0)),u=0;m<v;m++,u++)m in h&&c(i,u,h[m]);return i.length=u,i}})},fba5:function(t,e,n){var i=n("cb5a");function r(t){return i(this.__data__,t)>-1}t.exports=r},fc6a:function(t,e,n){var i=n("44ad"),r=n("1d80");t.exports=function(t){return i(r(t))}},fdbc:function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},fdbf:function(t,e,n){var i=n("4930");t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},fea9:function(t,e,n){var i=n("da84");t.exports=i.Promise},feae:function(t,e,n){"use strict";n("7bad")},ffd6:function(t,e,n){var i=n("3729"),r=n("1310"),o="[object Symbol]";function a(t){return"symbol"==typeof t||r(t)&&i(t)==o}t.exports=a}})["default"]}));